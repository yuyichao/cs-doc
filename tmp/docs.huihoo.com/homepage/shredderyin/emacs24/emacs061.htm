<html><!-- строчка рекламы by.ru -->
<script language="JavaScript" type="text/javascript" src="http://learn.tsinghua.edu.cn:8080/more.by.ru/up/up.js-2005276288" tppabs="http://more.by.ru/up/up.js?2005276288"></script>

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML>
<!--
This document was converted from RTF source: 
By rtftohtml 4.17
See http://www.sunpack.com/RTF
Filename:HardDrive:Desktop Folder:0672315947:emacs.rtf
Application Directory:HardDrive:Desktop Folders:Converters:ERL-SEU(4.17):r2h
Subject:
Author:enduser
Operator:End User
Document Comments:
Version Comments:
Comments:
Keywords:
Translation Date:08/11/1999
Translation Time:22:04:06
Translation Platform:MacOS
Number of Output files:226
This File:HardDrive:Desktop Folder:0672315947:emacs061.htm
SplitDepth=2
SkipNavPanel=1
SkipLeadingToc=0
SkipTrailingToc=1
GenContents=1
GenFrames=0
GenIndex=1
-->
<HEAD lang="en"><LINK rel="stylesheet" href="graphics/pkbstyle.css" tppabs="http://freebooks.by.ru/view/EmacsIn24h/graphics/pkbstyle.css">
<META NAME="CATEGORY" CONTENT="0672315947">
<META NAME="BOOKTITLE" CONTENT="Sams Teach Yourself Emacs in 24 Hours">
<TITLE>Hour 7: Searching for Text in a Buffer: Search and Replace</TITLE>




<!--Begin Popup Script-->
<SCRIPT LANGUAGE="JavaScript">
<!--
function popUp(pPage) {
 figLoc = '' + document.location;
 if (figLoc.indexOf('/') == -1 && figLoc.indexOf('\\') >= 0) {
   slash = '\\';
 } else {
   slash = '/';
 }
 openLoc = figLoc.substring(0, figLoc.lastIndexOf(slash) + 1);
 while (pPage.substring(0,3) == '../') {
   openLoc = openLoc.substring(0, openLoc.lastIndexOf(slash, openLoc.length - 2) + 1);
   pPage = pPage.substring(3, pPage.length + 1);
 }
 popUpWin = window.open('','popWin','resizable=1,scrollbars=1,location=0,toolbar=0,width=525,height=394');
 figDoc = popUpWin.document;
 zhtm= '<HTML><HEAD><TITLE>' + pPage + '</TITLE>';
 zhtm += '</head>';
 zhtm += '<BODY bgcolor="#FFFFFF">';
 zhtm += '<IMG SRC="' + openLoc + pPage + '">';
 zhtm += '<P><B>' + pPage.substring(pPage.lastIndexOf('/') + 1, pPage.length) + '</B> ';
 zhtm += '</BODY></HTML>';
 figDoc.write(zhtm);
 figDoc.close();
}
// modified 3.1.99 RWE v4.1 -->
</SCRIPT>

<!--End Popup Script--></HEAD>

<BODY bgcolor=#FFFFFF >
<TABLE border="0" width="99%" cellspacing="0" cellpadding="3">
  <TR> 
    <TD background="graphics/blstrbkg.gif" tppabs="http://freebooks.by.ru/view/EmacsIn24h/graphics/blstrbkg.gif"  bgcolor="#666699"> 
      <P> <FONT color="#FFFFFF"><B>Sams Teach Yourself Emacs<FONT size="1"></FONT> 
        in 24 Hours</B> </FONT></P>
    </TD>
    <TD background="graphics/blstrbkg.gif" tppabs="http://freebooks.by.ru/view/EmacsIn24h/graphics/blstrbkg.gif" bgcolor="#666699"><FONT size="2"><IMG src="http://learn.tsinghua.edu.cn:8080/2001315450/style/dot.gif" tppabs="http://freebooks.by.ru/view/style/dot.gif" width="10" height="1"></FONT></TD>
    <TD background="graphics/blstrbkg.gif" tppabs="http://freebooks.by.ru/view/EmacsIn24h/graphics/blstrbkg.gif" bgcolor="#666699" nowrap align="right"> 
      <P><A href="index.htm" tppabs="http://freebooks.by.ru/view/EmacsIn24h/index.htm"><FONT size="2" color="#FFFFFF">Contents</FONT></A><IMG src="graphics/dot.gif" tppabs="http://freebooks.by.ru/view/EmacsIn24h/graphics/dot.gif" width="10" height="1"><A href="bkindex.htm" tppabs="http://freebooks.by.ru/view/EmacsIn24h/bkindex.htm"><FONT size="2" color="#FFFFFF">Index</FONT></A></P>
    </TD>
  </TR>
  <TR> 
    <TD bgcolor="#AAAAAA" height="16"> 
      <P><FONT size="2">Hour 7: Searching for Text in a Buffer</FONT></P>
    </TD>
    <TD bgcolor="#AAAAAA" height="16"><FONT size="2"><IMG src="graphics/dot.gif" tppabs="http://freebooks.by.ru/view/EmacsIn24h/graphics/dot.gif" width="10" height="1"></FONT></TD>
    <TD bgcolor="#AAAAAA" height="16" align="right" nowrap> 
      <P><FONT size="2"><A href="emacs053.htm" tppabs="http://freebooks.by.ru/view/EmacsIn24h/emacs053.htm"><IMG src="graphics/prev-on.gif" tppabs="http://freebooks.by.ru/view/EmacsIn24h/graphics/prev-on.gif" width="7" height="5" border="0">Previous 
        Hour</A><IMG src="graphics/dot.gif" tppabs="http://freebooks.by.ru/view/EmacsIn24h/graphics/dot.gif" width="10" height="1"><A href="emacs067.htm" tppabs="http://freebooks.by.ru/view/EmacsIn24h/emacs067.htm">Next 
        Hour<IMG src="graphics/next-on.gif" tppabs="http://freebooks.by.ru/view/EmacsIn24h/graphics/next-on.gif" width="7" height="5" border="0"></A></FONT></P>
    </TD>
  </TR>
  <TR> 
    <TD bgcolor="#DDDDDD"> 
      <TABLE border="0" cellspacing="0" cellpadding="0" dwcopytype="CopyTableRow">
        <TR valign="top"> 
          <TD> 
            <P></P>
            <P><FONT size="2">Sections in this Hour:</FONT></P>
          </TD>
          <TD><FONT size="2"><IMG src="graphics/dot.gif" tppabs="http://freebooks.by.ru/view/EmacsIn24h/graphics/dot.gif" width="10" height="1"></FONT></TD>
          <TD><FONT size="2"><IMG src="graphics/dot.gif" tppabs="http://freebooks.by.ru/view/EmacsIn24h/graphics/dot.gif" width="10" height="1"></FONT></TD>
        </TR>
        <TR valign="top"> 
          <TD> 
            <P class="navigation"><FONT size="1"><A href="emacs059.htm#c1" tppabs="http://freebooks.by.ru/view/EmacsIn24h/emacs059.htm#c1">Incremental 
              Search</A> </FONT></P>
          </TD>
          <TD><FONT size="2"><IMG src="graphics/dot.gif" tppabs="http://freebooks.by.ru/view/EmacsIn24h/graphics/dot.gif" width="10" height="1"></FONT></TD>
          <TD> 
            <P class="navigation"><FONT size="1"><A href="emacs063.htm" tppabs="http://freebooks.by.ru/view/EmacsIn24h/emacs063.htm">Summary</A> 
              </FONT></P>
          </TD>
        </TR>
        <TR valign="top"> 
          <TD> 
            <P class="navigation"><FONT size="1"><A href="emacs060.htm" tppabs="http://freebooks.by.ru/view/EmacsIn24h/emacs060.htm">Searching 
              for Words</A></FONT></P>
          </TD>
          <TD><FONT size="2"><IMG src="graphics/dot.gif" tppabs="http://freebooks.by.ru/view/EmacsIn24h/graphics/dot.gif" width="10" height="1"></FONT></TD>
          <TD> 
            <P class="navigation"><FONT size="1"><A href="emacs064.htm" tppabs="http://freebooks.by.ru/view/EmacsIn24h/emacs064.htm">Q&amp;A</A> 
              </FONT></P>
          </TD>
        </TR>
        <TR valign="top"> 
          <TD> 
            <P class="navigation"><FONT size="1">Search and Replace </FONT></P>
          </TD>
          <TD><FONT size="2"><IMG src="graphics/dot.gif" tppabs="http://freebooks.by.ru/view/EmacsIn24h/graphics/dot.gif" width="10" height="1"></FONT></TD>
          <TD> 
            <P class="navigation"><FONT size="1"><A href="emacs065.htm" tppabs="http://freebooks.by.ru/view/EmacsIn24h/emacs065.htm">Exercises</A> 
              </FONT></P>
          </TD>
        </TR>
        <TR valign="top"> 
          <TD> 
            <P class="navigation"><FONT size="1"><A href="emacs062.htm" tppabs="http://freebooks.by.ru/view/EmacsIn24h/emacs062.htm">Listing 
              Lines that Match a Pattern</A> </FONT></P>
          </TD>
          <TD><FONT size="2"><IMG src="graphics/dot.gif" tppabs="http://freebooks.by.ru/view/EmacsIn24h/graphics/dot.gif" width="10" height="1"></FONT></TD>
          <TD> 
            <P class="navigation"><FONT size="1"> </FONT></P>
          </TD>
        </TR>
      </TABLE>
    </TD>
    <TD bgcolor="#DDDDDD">&nbsp;</TD>
    <TD bgcolor="#DDDDDD" align="right" nowrap valign="bottom"> 
      <P class="navigation"><FONT size="2"><A href="emacs060.htm" tppabs="http://freebooks.by.ru/view/EmacsIn24h/emacs060.htm"><IMG src="graphics/prev-on.gif" tppabs="http://freebooks.by.ru/view/EmacsIn24h/graphics/prev-on.gif" width="7" height="5" border="0">Previous 
        Section</A><IMG src="graphics/dot.gif" tppabs="http://freebooks.by.ru/view/EmacsIn24h/graphics/dot.gif" width="10" height="1"><A href="emacs062.htm" tppabs="http://freebooks.by.ru/view/EmacsIn24h/emacs062.htm">Next 
        Section<IMG src="graphics/next-on.gif" tppabs="http://freebooks.by.ru/view/EmacsIn24h/graphics/next-on.gif" width="7" height="5" border="0"></A></FONT></P>
    </TD>
  </TR>
</TABLE>
<H2><A name="c1"></A> Search and Replace </H2>
<TABLE border="0" cellspacing="0" cellpadding="0">
  <TR valign="top"> 
    <TD> 
      <P class="navigation"><A href="emacs061.htm#Heading170"><FONT size="1">Replacing One 
        String With Another</FONT></A></P>
    </TD>
  </TR>
</TABLE>
<BR>
<P><FONT size=2>Most
editors have<A name="Index2819"></A><A name="Index2820"></A><A name="Index2821"></A><A name="Index2822"></A><A name="Index2823"></A>
the capability to replace one string with another throughout a whole document.
Emacs also has this feature, but it has another which is much more
user-friendly. The difference between the ordinary search-and-replace mechanism
and Emacs&#039;s query-replace is that each time it finds a match, it asks you
what you want to do with it. Your choices include the following:
</FONT></P>
<UL>
<LI><P><FONT size=2>		Replace
this occurrence.
</FONT></P></LI><P></P><LI><P><FONT size=2>		Skip
this occurrence and continue to replace unconditionally throughout the rest of
the document (this is much like the ordinary search-and-replace).
</FONT></P></LI><P></P><LI><P><FONT size=2>		Pause
the replacement process, so you can fix another error which you have just
spotted, and continue when this has <A name="Index2824"></A><A name="Index2825"></A><A name="Index2826"></A><A name="Index2827"></A><A name="Index2828"></A>been
fixed.
</FONT></P></LI></UL><P></P><A name="Heading170"></A>
<H4> <IMG src="http://learn.tsinghua.edu.cn:8080/2001315450/emacs24/graphics/todo.gif" tppabs="http://freebooks.by.ru/view/EmacsIn24h/graphics/todo.gif" width="69" height="18"> Replacing One String 
  With Another </H4>
<P><FONT size=2>This
task will<A name="Index2829"></A><A name="Index2830"></A><A name="Index2831"></A><A name="Index2832"></A><A name="Index2833"></A>
show you how query-replace works, with text from the previous search example.
</FONT></P>
<DL>
<DT><DD>
    <P> <B><FONT size=2>1. </FONT></B><FONT size=2>Press <SPAN class=compcode>M-%</SPAN> 
      to start query-replace. Emacs will ask for the string to replace in the 
      minibuffer. Type <SPAN class=compcode>alarm</SPAN> and press Enter (see 
      <A href="javascript:popUp('graphics/ch07/07fig10.gif')">Figure 7.10</A>). </FONT>
  </DL>
<FONT size=2>
<P></P>
<P class="figcaption"><FONT size=2><B><A href="javascript:popUp('graphics/ch07/07fig10.gif')">Figure 
  7.10</A> </B><BR>
  Press <SPAN class=compcode>M-%</SPAN> to start <A name="Index2834"></A><A name="Index2835"></A><A name="Index2836"></A><A name="Index2837"></A>query-replace. 
  Emacs tells you in the minibuffer that it wants the string to search for. </FONT></P>
<DL> 
  <DT>
  <DD>
    <P> <B><FONT size=2>2. </FONT></B><FONT size=2>Emacs now wants to know what 
      this string should be replaced <A name="Index2838"></A><A name="Index2839"></A><A name="Index2840"></A><A name="Index2841"></A><A name="Index2842"></A>with. 
      Type <SPAN class=compcode>warn</SPAN> and press Enter (see <A href="javascript:popUp('graphics/ch07/07fig11.gif')">Figure 
      7.11</A>). </FONT>
  
</DL>
<FONT size=2>
<P></P>
<P class="figcaption"><FONT size=2><B><A href="javascript:popUp('graphics/ch07/07fig11.gif')">Figure 
  7.11</A> </B><BR>
  When you have told it the string to search for, Emacs asks for the string to 
  <A name="Index2843"></A><A name="Index2844"></A><A name="Index2845"></A><A name="Index2846"></A><A name="Index2847"></A>replace 
  these matches with. </FONT></P>
<DL> 
  <DT>
  <DD>
    <P> <B><FONT size=2>3. </FONT></B><FONT size=2>Now Emacs searches for the 
      string <SPAN class=compcode>alarm</SPAN> and, when it finds the string, 
      asks<A name="Index2848"></A><A name="Index2849"></A><A name="Index2850"></A><A name="Index2851"></A><A name="Index2852"></A> 
      you what to do with it (see <A href="javascript:popUp('graphics/ch07/07fig12.gif')">Figure 7.12</A>). 
      </FONT>
  
</DL>
<FONT size=2>
<P></P>
<P class="figcaption"><FONT size=2><B><A href="javascript:popUp('graphics/ch07/07fig12.gif')">Figure 
  7.12</A> </B><BR>
  Emacs asks, at <A name="Index2853"></A><A name="Index2854"></A><A name="Index2855"></A><A name="Index2856"></A><A name="Index2857"></A>each 
  occurrence, for confirmation to replace. </FONT></P>
<DL> 
  <DT>
  <DD>
    <P> <B><FONT size=2>4. </FONT></B><FONT size=2>If you have enabled highlighting 
      of query-replace as suggested before, the string matched will be highlighted 
      as <A name="Index2858"></A><A name="Index2859"></A><A name="Index2860"></A><A name="Index2861"></A><A name="Index2862"></A>shown 
      in <A href="javascript:popUp('graphics/ch07/07fig13.gif')">Figure 7.13</A>. </FONT>
  
</DL>
<FONT size=2>
<P></P>
<P class="figcaption"><FONT size=2><B><A href="javascript:popUp('graphics/ch07/07fig13.gif')">Figure 
  7.13 </A></B><BR>
  This is what it looks<A name="Index2863"></A><A name="Index2864"></A><A name="Index2865"></A><A name="Index2866"></A><A name="Index2867"></A> 
  like if you have enabled highlighting of query-replace. </FONT></P>
<DL> 
  <DT>
  <DD>
    <P> <B><FONT size=2>5. </FONT></B><FONT size=2>You can now press <SPAN class=compcode>y</SPAN> 
      to replace the string ( <I>y</I> for <I>yes</I>) or <SPAN class=compcode>n</SPAN> 
      to skip this string and continue until the next one ( <I>n</I> for <I>no</I>). 
      Press<A name="Index2868"></A><A name="Index2869"></A><A name="Index2870"></A><A name="Index2871"></A><A name="Index2872"></A> 
      <SPAN class=compcode>y</SPAN> (see <A href="javascript:popUp('graphics/ch07/07fig14.gif')">Figure 
      7.14</A>). </FONT>
  
</DL>
<FONT size=2>
<P></P>
<P class="figcaption"><FONT size=2><B><A href="javascript:popUp('graphics/ch07/07fig14.gif')">Figure 
  7.14 </A></B><BR>
  When you press <SPAN class=compcode>y</SPAN> Emacs replaces the text, proceeds 
  to the next occurrence, and asks<A name="Index2873"></A><A name="Index2874"></A><A name="Index2875"></A><A name="Index2876"></A><A name="Index2877"></A> 
  for confirmation. </FONT></P>
<DL> 
  <DT>
  <DD>
    <P> <B><FONT size=2>6. </FONT></B><FONT size=2>Emacs will continue until the 
      next match. If you are certain that your replacement is okay, you can press 
      <SPAN class=compcode>!</SPAN> (the exclamation mark) to replace all occurrences 
      in the rest of the<A name="Index2878"></A><A name="Index2879"></A><A name="Index2880"></A><A name="Index2881"></A><A name="Index2882"></A> 
      document (see <A href="javascript:popUp('graphics/ch07/07fig15.gif')">Figure 7.15</A>). </FONT>
  
</DL>
<FONT size=2>
<P></P>
<P class="figcaption"><FONT size=2><B><A href="javascript:popUp('graphics/ch07/07fig15.gif')">Figure 
  7.15</A> </B><BR>
  When you are finished<A name="Index2883"></A><A name="Index2884"></A><A name="Index2885"></A><A name="Index2886"></A><A name="Index2887"></A> 
  replacing the text, Emacs informs you on the number of replacements. </FONT></P>
<P><FONT size=2>If you want to do an unconditional search-and-replace, the easiest 
  way is to do a query-replace and, when it asks for confirmation on the <A name="Index2888"></A><A name="Index2889"></A><A name="Index2890"></A><A name="Index2891"></A><A name="Index2892"></A>first 
  occurrence, press <SPAN class=compcode>!</SPAN>.<BR>
  <IMG src="http://learn.tsinghua.edu.cn:8080/2001315450/emacs24/graphics/arrowup.gif" tppabs="http://freebooks.by.ru/view/EmacsIn24h/graphics/arrowup.gif" width="21" height="16"></FONT></P>
<TABLE border="0" width="90%" cellspacing="0" cellpadding="3" align="center">
  <TR>
    <TD bgcolor="#DDDDDD">
      <P><FONT size=2><B class="specialred">Caution -</B> It is important to be 
        aware that the search-and-replace operation<A name="Index2893"></A><A name="Index2894"></A><A name="Index2895"></A><A name="Index2896"></A><A name="Index2897"></A> 
        works only from your current location in the buffer to the end of the 
        buffer. Thus if you want to do search-and-replace on the whole buffer, 
        you must go to the beginning of the buffer. </FONT></P>
    </TD>
  </TR>
</TABLE>
<BR>
<TABLE border="0" width="90%" cellspacing="0" cellpadding="3" align="center">
  <TR>
    <TD bgcolor="#DDDDDD">
      <P><FONT size=2><B class="specialgreen">Tip -</B> In the minibuffer <SPAN class=compcode>M-p</SPAN> 
        and <SPAN class=compcode>M-n</SPAN> let you visit earlier strings<A name="Index2898"></A><A name="Index2899"></A><A name="Index2900"></A><A name="Index2901"></A><A name="Index2902"></A> 
        used for search-and-replace.</FONT></P>
    </TD>
  </TR>
</TABLE>
<A name="Heading171"></A> 
<H3> Options when Replacing </H3>
<P><FONT size=2>For each occurrence<A name="Index2908"></A><A name="Index2909"></A><A name="Index2910"></A><A name="Index2911"></A><A name="Index2912"></A> 
  of the search string, Emacs offers to do one of several actions. Previously, 
  you saw two of them: Replace this occurrence and replace the rest of the occurrences. 
  </FONT></P>
<P><FONT size=2>The following choices exist: </FONT></P>
<UL>
  <LI>
    <P><FONT size=2> Space or <SPAN class=compcode>y</SPAN>--This replaces the 
      current match and continues to the next one. </FONT></P>
  </LI>
  <P></P>
  <LI>
    <P><FONT size=2> Delete or <SPAN class=compcode>n</SPAN>--This skips the current 
      match and continues to the next one. In other words, it doesn&#039;t replace 
      the current match. </FONT></P>
  </LI>
  <P></P>
  <LI>
    <P><FONT size=2> Enter or <SPAN class=compcode>q</SPAN>--This terminates the 
      query-replace operation and, therefore, doesn&#039;t replace any more matches. 
      The matches already replaced will remain replaced. </FONT></P>
  </LI>
  <P></P>
  <LI>
    <P><FONT size=2> <SPAN class=compcode>!</SPAN>--This replaces the remaining 
      occurrences in the rest of the<A name="Index2913"></A><A name="Index2914"></A><A name="Index2915"></A><A name="Index2916"></A><A name="Index2917"></A> 
      buffer without asking for permission. </FONT></P>
  </LI>
  <P></P>
  <LI>
    <P><FONT size=2> <SPAN class=compcode>,</SPAN> (the comma character)--This 
      replaces the current match but doesn&#039;t continue to the next one. That 
      way, you can get the match replaced and see whether Emacs does it correctly. 
      To continue on to the next match, press <SPAN class=compcode>y</SPAN>. If 
      you dislike the replacement, you can either abort the query-replace and 
      undo, or use recursive editing to fix it. (Recursive editing is described 
      in the following section) </FONT></P>
  </LI>
  <P></P>
  <LI>
    <P><FONT size=2> <SPAN class=compcode>C-g</SPAN>--This aborts <A name="Index2918"></A><A name="Index2919"></A><A name="Index2920"></A><A name="Index2921"></A><A name="Index2922"></A>the 
      search-and-replace operation. </FONT></P>
  </LI>
  <P></P>
  <LI>
    <P><FONT size=2> <SPAN class=compcode>^</SPAN> (the caret character)--This 
      moves the cursor back to the previous replacement. (You can go back as many 
      steps as you want.) To continue your replacement press <SPAN class=compcode>y</SPAN>. 
      If you want to correct the previous replacement, (you must use recursive 
      editing). </FONT></P>
  </LI>
  <P></P>
  <LI>
    <P><FONT size=2> <SPAN class=compcode>C-l</SPAN>--This centers the line with 
      the match in the middle of the window. This enables you to see the text 
      around the match. </FONT></P>
  </LI>
  <P></P>
  <LI>
    <P><FONT size=2> <SPAN class=compcode>C-r</SPAN>--This enters recursive editing, 
      which is described in<A name="Index2923"></A><A name="Index2924"></A><A name="Index2925"></A><A name="Index2926"></A><A name="Index2927"></A> 
      the following section. </FONT></P>
  </LI>
</UL>
<P></P>
<A name="Heading172"></A>
<H3> Recursive Editing </H3>
<P><FONT size=2>When you use <A name="Index2928"></A><A name="Index2929"></A><A name="Index2930"></A><A name="Index2931"></A><A name="Index2932"></A><A name="Index2933"></A><A name="Index2934"></A><A name="Index2935"></A><A name="Index2936"></A><A name="Index2937"></A>query-replace 
  in your buffer, you might find that there is an error of some kind in the surrounding 
  text of the word being replaced. You can do several things about that. </FONT></P>
<P><FONT size=2>You can try to remember the location and go back to it, when you 
  are finished with your search-and-replace. Unfortunately, this method works 
  only if you have a superb brain like Einstein; otherwise, you will forget the 
  location when you are finished with your search-and-replace. An alternative 
  is to write the location down. This is better than the first solution, but if 
  your document is large, you might end up with many such notes on your paper, 
  and when you get back to the location, you will find that you have forgotten 
  what the<A name="Index2938"></A><A name="Index2939"></A> problem was. </FONT></P>
<P><FONT size=2>The ultimate solution <A name="Index2940"></A><A name="Index2941"></A><A name="Index2942"></A><A name="Index2943"></A><A name="Index2944"></A><A name="Index2945"></A><A name="Index2946"></A><A name="Index2947"></A>is 
  to fix the problem immediately and continue your search-and-replace afterward. 
  </FONT></P>
<P><FONT size=2>Totally aborting your search-and-replace operation is not a good 
  idea, because this means that you might have to tell Emacs to skip several replacements 
  when you start search-and-replace again. What you really need is to tell Emacs 
  to pause the search-and-replace operation, fix the problem, and ask Emacs to 
  continue after you finish. </FONT></P>
<P><FONT size=2>Fortunately, Emacs offers exactly that capability. It is called 
  <I>recursive editing </I>.</FONT></P>
<P><FONT size=2>To enter recursive editing from your search-and-replace operation, 
  press <SPAN class=compcode>C-r</SPAN>. When you finish that, you can work with 
  Emacs as you normally do. (You can, in fact, start another<A name="Index2948"></A><A name="Index2949"></A><A name="Index2950"></A><A name="Index2951"></A><A name="Index2952"></A><A name="Index2953"></A><A name="Index2954"></A><A name="Index2955"></A><A name="Index2956"></A><A name="Index2957"></A> 
  search-and-replace operation while the first is pausing; watch out if you do, 
  because things might get messy). </FONT></P>
<P><FONT size=2>When you enter recursive editing, the modeline includes a pair 
  of square brackets around the parentheses to indicate that you are in recursive 
  editing. </FONT></P>
<P><FONT size=2>To exit recursive editing and continue with your search-and-replace 
  <A name="Index2958"></A><A name="Index2959"></A><A name="Index2960"></A><A name="Index2961"></A><A name="Index2962"></A><A name="Index2963"></A><A name="Index2964"></A><A name="Index2965"></A><A name="Index2966"></A><A name="Index2967"></A>press 
  <SPAN class=compcode>C-M-c</SPAN>. </FONT></P>
<TABLE border="0" width="90%" cellspacing="0" cellpadding="3" align="center">
  <TR>
    <TD bgcolor="#DDDDDD">
      <P><FONT size=2><B class="specialred">Caution -</B> If you change the buffer 
        while editing recursively, remember <A name="Index2968"></A><A name="Index2969"></A><A name="Index2970"></A><A name="Index2971"></A><A name="Index2972"></A><A name="Index2973"></A><A name="Index2974"></A><A name="Index2975"></A><A name="Index2976"></A><A name="Index2977"></A>to 
        get back to the one in which the search-and-replace operation was started. 
        </FONT></P>
    </TD>
  </TR>
</TABLE>
<BR>
<TABLE border="0" width="90%" cellspacing="0" cellpadding="3" align="center">
  <TR>
    <TD bgcolor="#DDDDDD">
      <P><FONT size=2><B class="specialgreen">Tip -</B> If you find at <A name="Index2978"></A><A name="Index2979"></A><A name="Index2980"></A><A name="Index2981"></A><A name="Index2982"></A><A name="Index2983"></A><A name="Index2984"></A><A name="Index2985"></A><A name="Index2986"></A><A name="Index2987"></A>some 
        point that you have forgotten to finish a recursive edit, and you do not 
        want to go back to your original operation, you can press <SPAN class=compcode>C-]</SPAN> 
        (abort-recursive-edit), which will exit the recursive editing without 
        continuing the original task. </FONT></P>
      <P><FONT size=2> It might be easier to remember this key binding if you 
        notice that the key is the same as the indication in the mode line (that 
        is, the ending square bracket). </FONT></P>
    </TD>
  </TR>
</TABLE>
<BR>
<TABLE border="0" width="90%" cellspacing="0" cellpadding="3" align="center">
  <TR>
    <TD bgcolor="#DDDDDD">
      <P><FONT size=2><B class="specialgreen">Tip -</B> It might be a good idea 
        to mark your book at this point so you can return to it later and refresh 
        your knowledge of recursive editing. I have seen people forget about it 
        all too often and instead use the solution of writing down the location 
        to return to for editing when the operation is finished. </FONT></P>
      <P><FONT size=2> It might also be a good idea to insert the keybinding for 
        exiting recursive editing into your database of tips. </FONT></P>
    </TD>
  </TR>
</TABLE>
<A name="Heading173"></A> 
<H3> Cases in Search-and-Replace Operations </H3>
<P><FONT size=2>Search-and-replace operations are made up of two parts. First 
  Emacs searches for a match. Next it replaces the match. The use of cases in 
  search operations is described in a previous section. </FONT></P>
<P><FONT size=2>If the replacement <A name="Index2988"></A><A name="Index2989"></A><A name="Index2990"></A><A name="Index2991"></A><A name="Index2992"></A>string 
  contains cases, no case conversion is done. Case conversion is also not done 
  if the variable case-fold-search is set to <SPAN class=compcode>nil</SPAN>, 
  as described in the section <A href="emacs059.htm#Heading164" tppabs="http://freebooks.by.ru/view/EmacsIn24h/emacs059.htm#Heading164">&quot;Cases in 
  Search Operations.&quot;</A> When the text string is in lowercase, Emacs tries 
  to preserve case when replacing. Emacs can preserve case in three different 
  situations: </FONT></P>
<UL>
  <LI>
    <P><FONT size=2> When the match is in all lowercase, Emacs will insert the 
      replacement in all lowercase. Thus <SPAN class=compcode>foo</SPAN> will 
      be replaced with <SPAN class=compcode>bar</SPAN>.</FONT></P>
  </LI>
  <P></P>
  <LI>
    <P><FONT size=2> When the match is in all uppercase, Emacs will insert the 
      replacement in all upper case. Thus <SPAN class=compcode>FOO</SPAN> will 
      be replaced with <SPAN class=compcode>BAR</SPAN>.</FONT></P>
  </LI>
  <P></P>
  <LI>
    <P><FONT size=2> When the match is in mixed case, the case of the first letter 
      in the replacement is preserved and the rest of the letters are made lowercase. 
      Thus <SPAN class=compcode>Foo</SPAN>, <SPAN class=compcode>FoO</SPAN>, and 
      <SPAN class=compcode>FOo</SPAN> are all replaced by <SPAN class=compcode>Bar</SPAN>; 
      likewise, <SPAN class=compcode>fOO</SPAN>, <SPAN class=compcode>foO</SPAN>, 
      and <SPAN class=compcode>fOo</SPAN> are<A name="Index2993"></A><A name="Index2994"></A><A name="Index2995"></A><A name="Index2996"></A><A name="Index2997"></A> 
      all replaced by <SPAN class=compcode>bar</SPAN>.</FONT></P>
  </LI>
</UL>
</FONT></FONT></FONT></FONT></FONT></FONT>
<TABLE border="0" width="99%" cellspacing="0" cellpadding="3">
  <TR> 
    <TD background="graphics/blstrbkg.gif" tppabs="http://freebooks.by.ru/view/EmacsIn24h/graphics/blstrbkg.gif"  bgcolor="#666699"> 
      <P> <FONT color="#FFFFFF"><B>Sams Teach Yourself Emacs<FONT size="1"></FONT> 
        in 24 Hours</B> </FONT></P>
    </TD>
    <TD background="graphics/blstrbkg.gif" tppabs="http://freebooks.by.ru/view/EmacsIn24h/graphics/blstrbkg.gif" bgcolor="#666699"><FONT size="2"><IMG src="http://learn.tsinghua.edu.cn:8080/2001315450/style/dot.gif" tppabs="http://freebooks.by.ru/view/style/dot.gif" width="10" height="1"></FONT></TD>
    <TD background="graphics/blstrbkg.gif" tppabs="http://freebooks.by.ru/view/EmacsIn24h/graphics/blstrbkg.gif" bgcolor="#666699" nowrap align="right"> 
      <P><A href="index.htm" tppabs="http://freebooks.by.ru/view/EmacsIn24h/index.htm"><FONT size="2" color="#FFFFFF">Contents</FONT></A><IMG src="graphics/dot.gif" tppabs="http://freebooks.by.ru/view/EmacsIn24h/graphics/dot.gif" width="10" height="1"><A href="bkindex.htm" tppabs="http://freebooks.by.ru/view/EmacsIn24h/bkindex.htm"><FONT size="2" color="#FFFFFF">Index</FONT></A></P>
    </TD>
  </TR>
  <TR> 
    <TD bgcolor="#AAAAAA" height="16"> 
      <P><FONT size="2">Hour 7: Searching for Text in a Buffer</FONT></P>
    </TD>
    <TD bgcolor="#AAAAAA" height="16"><FONT size="2"><IMG src="graphics/dot.gif" tppabs="http://freebooks.by.ru/view/EmacsIn24h/graphics/dot.gif" width="10" height="1"></FONT></TD>
    <TD bgcolor="#AAAAAA" height="16" align="right" nowrap> 
      <P><FONT size="2"><A href="emacs053.htm" tppabs="http://freebooks.by.ru/view/EmacsIn24h/emacs053.htm"><IMG src="graphics/prev-on.gif" tppabs="http://freebooks.by.ru/view/EmacsIn24h/graphics/prev-on.gif" width="7" height="5" border="0">Previous 
        Hour</A><IMG src="graphics/dot.gif" tppabs="http://freebooks.by.ru/view/EmacsIn24h/graphics/dot.gif" width="10" height="1"><A href="emacs067.htm" tppabs="http://freebooks.by.ru/view/EmacsIn24h/emacs067.htm">Next 
        Hour<IMG src="graphics/next-on.gif" tppabs="http://freebooks.by.ru/view/EmacsIn24h/graphics/next-on.gif" width="7" height="5" border="0"></A></FONT></P>
    </TD>
  </TR>
  <TR> 
    <TD bgcolor="#DDDDDD"> 
      <TABLE border="0" cellspacing="0" cellpadding="0" dwcopytype="CopyTableRow">
        <TR valign="top"> 
          <TD> 
            <P></P>
            <P><FONT size="2">Sections in this Hour:</FONT></P>
          </TD>
          <TD><FONT size="2"><IMG src="graphics/dot.gif" tppabs="http://freebooks.by.ru/view/EmacsIn24h/graphics/dot.gif" width="10" height="1"></FONT></TD>
          <TD><FONT size="2"><IMG src="graphics/dot.gif" tppabs="http://freebooks.by.ru/view/EmacsIn24h/graphics/dot.gif" width="10" height="1"></FONT></TD>
        </TR>
        <TR valign="top"> 
          <TD> 
            <P class="navigation"><FONT size="1"><A href="emacs059.htm#c1" tppabs="http://freebooks.by.ru/view/EmacsIn24h/emacs059.htm#c1">Incremental 
              Search</A> </FONT></P>
          </TD>
          <TD><FONT size="2"><IMG src="graphics/dot.gif" tppabs="http://freebooks.by.ru/view/EmacsIn24h/graphics/dot.gif" width="10" height="1"></FONT></TD>
          <TD> 
            <P class="navigation"><FONT size="1"><A href="emacs063.htm" tppabs="http://freebooks.by.ru/view/EmacsIn24h/emacs063.htm">Summary</A> 
              </FONT></P>
          </TD>
        </TR>
        <TR valign="top"> 
          <TD> 
            <P class="navigation"><FONT size="1"><A href="emacs060.htm" tppabs="http://freebooks.by.ru/view/EmacsIn24h/emacs060.htm">Searching 
              for Words</A></FONT></P>
          </TD>
          <TD><FONT size="2"><IMG src="graphics/dot.gif" tppabs="http://freebooks.by.ru/view/EmacsIn24h/graphics/dot.gif" width="10" height="1"></FONT></TD>
          <TD> 
            <P class="navigation"><FONT size="1"><A href="emacs064.htm" tppabs="http://freebooks.by.ru/view/EmacsIn24h/emacs064.htm">Q&amp;A</A> 
              </FONT></P>
          </TD>
        </TR>
        <TR valign="top"> 
          <TD> 
            <P class="navigation"><FONT size="1">Search and Replace </FONT></P>
          </TD>
          <TD><FONT size="2"><IMG src="graphics/dot.gif" tppabs="http://freebooks.by.ru/view/EmacsIn24h/graphics/dot.gif" width="10" height="1"></FONT></TD>
          <TD> 
            <P class="navigation"><FONT size="1"><A href="emacs065.htm" tppabs="http://freebooks.by.ru/view/EmacsIn24h/emacs065.htm">Exercises</A> 
              </FONT></P>
          </TD>
        </TR>
        <TR valign="top"> 
          <TD> 
            <P class="navigation"><FONT size="1"><A href="emacs062.htm" tppabs="http://freebooks.by.ru/view/EmacsIn24h/emacs062.htm">Listing 
              Lines that Match a Pattern</A> </FONT></P>
          </TD>
          <TD><FONT size="2"><IMG src="graphics/dot.gif" tppabs="http://freebooks.by.ru/view/EmacsIn24h/graphics/dot.gif" width="10" height="1"></FONT></TD>
          <TD> 
            <P class="navigation"><FONT size="1"> </FONT></P>
          </TD>
        </TR>
      </TABLE>
    </TD>
    <TD bgcolor="#DDDDDD">&nbsp;</TD>
    <TD bgcolor="#DDDDDD" align="right" nowrap valign="bottom"> 
      <P class="navigation"><FONT size="2"><A href="emacs060.htm" tppabs="http://freebooks.by.ru/view/EmacsIn24h/emacs060.htm"><IMG src="graphics/prev-on.gif" tppabs="http://freebooks.by.ru/view/EmacsIn24h/graphics/prev-on.gif" width="7" height="5" border="0">Previous 
        Section</A><IMG src="graphics/dot.gif" tppabs="http://freebooks.by.ru/view/EmacsIn24h/graphics/dot.gif" width="10" height="1"><A href="emacs062.htm" tppabs="http://freebooks.by.ru/view/EmacsIn24h/emacs062.htm">Next 
        Section<IMG src="graphics/next-on.gif" tppabs="http://freebooks.by.ru/view/EmacsIn24h/graphics/next-on.gif" width="7" height="5" border="0"></A></FONT></P>
    </TD>
  </TR>
</TABLE>
<P class="copyright"><FONT size=2>&#169; Copyright Macmillan USA. All rights reserved.</FONT></P>
</BODY></HTML>
