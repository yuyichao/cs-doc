<html><!-- строчка рекламы by.ru -->
<script language="JavaScript" type="text/javascript" src="http://learn.tsinghua.edu.cn:8080/more.by.ru/up/up.js-1452413312" tppabs="http://more.by.ru/up/up.js?1452413312"></script>

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML>
<!--
This document was converted from RTF source: 
By rtftohtml 4.17
See http://www.sunpack.com/RTF
Filename:HardDrive:Desktop Folder:0672315947:emacs.rtf
Application Directory:HardDrive:Desktop Folders:Converters:ERL-SEU(4.17):r2h
Subject:
Author:enduser
Operator:End User
Document Comments:
Version Comments:
Comments:
Keywords:
Translation Date:08/11/1999
Translation Time:22:04:40
Translation Platform:MacOS
Number of Output files:226
This File:HardDrive:Desktop Folder:0672315947:emacs120.htm
SplitDepth=2
SkipNavPanel=1
SkipLeadingToc=0
SkipTrailingToc=1
GenContents=1
GenFrames=0
GenIndex=1
-->
<HEAD lang="en"><LINK rel="stylesheet" href="graphics/pkbstyle.css" tppabs="http://freebooks.by.ru/view/EmacsIn24h/graphics/pkbstyle.css">
<META NAME="CATEGORY" CONTENT="0672315947">
<META NAME="BOOKTITLE" CONTENT="Sams Teach Yourself Emacs in 24 Hours">
<TITLE>Hour 14: Finding Differences Between Files: Diffing Two Files with Ediff </TITLE>




</SCRIPT><!--Begin Popup Script-->
<SCRIPT LANGUAGE="JavaScript">
<!--
function popUp(pPage) {
 figLoc = '' + document.location;
 if (figLoc.indexOf('/') == -1 && figLoc.indexOf('\\') >= 0) {
   slash = '\\';
 } else {
   slash = '/';
 }
 openLoc = figLoc.substring(0, figLoc.lastIndexOf(slash) + 1);
 while (pPage.substring(0,3) == '../') {
   openLoc = openLoc.substring(0, openLoc.lastIndexOf(slash, openLoc.length - 2) + 1);
   pPage = pPage.substring(3, pPage.length + 1);
 }
 popUpWin = window.open('','popWin','resizable=1,scrollbars=1,location=0,toolbar=0,width=525,height=394');
 figDoc = popUpWin.document;
 zhtm= '<HTML><HEAD><TITLE>' + pPage + '</TITLE>';
 zhtm += '</head>';
 zhtm += '<BODY bgcolor="#FFFFFF">';
 zhtm += '<IMG SRC="' + openLoc + pPage + '">';
 zhtm += '<P><B>' + pPage.substring(pPage.lastIndexOf('/') + 1, pPage.length) + '</B> ';
 zhtm += '</BODY></HTML>';
 figDoc.write(zhtm);
 figDoc.close();
}
// modified 3.1.99 RWE v4.1 -->
</SCRIPT>

<!--End Popup Script--></HEAD>

<BODY bgcolor=#FFFFFF >
<TABLE border="0" width="99%" cellspacing="0" cellpadding="3">
  <TR> 
    <TD background="graphics/blstrbkg.gif" tppabs="http://freebooks.by.ru/view/EmacsIn24h/graphics/blstrbkg.gif"  bgcolor="#666699"> 
      <P> <FONT color="#FFFFFF"><B>Sams Teach Yourself Emacs<FONT size="1"></FONT> 
        in 24 Hours</B> </FONT></P>
    </TD>
    <TD background="graphics/blstrbkg.gif" tppabs="http://freebooks.by.ru/view/EmacsIn24h/graphics/blstrbkg.gif" bgcolor="#666699"><FONT size="2"><IMG src="http://learn.tsinghua.edu.cn:8080/2001315450/style/dot.gif" tppabs="http://freebooks.by.ru/view/style/dot.gif" width="10" height="1"></FONT></TD>
    <TD background="graphics/blstrbkg.gif" tppabs="http://freebooks.by.ru/view/EmacsIn24h/graphics/blstrbkg.gif" bgcolor="#666699" nowrap align="right"> 
      <P><A href="index.htm" tppabs="http://freebooks.by.ru/view/EmacsIn24h/index.htm"><FONT size="2" color="#FFFFFF">Contents</FONT></A><IMG src="graphics/dot.gif" tppabs="http://freebooks.by.ru/view/EmacsIn24h/graphics/dot.gif" width="10" height="1"><A href="bkindex.htm" tppabs="http://freebooks.by.ru/view/EmacsIn24h/bkindex.htm"><FONT size="2" color="#FFFFFF">Index</FONT></A></P>
    </TD>
  </TR>
  <TR> 
    <TD bgcolor="#AAAAAA" height="16"> 
      <P><FONT size="2">Hour 14: Finding Differences Between Files</FONT></P>
    </TD>
    <TD bgcolor="#AAAAAA" height="16"><FONT size="2"><IMG src="graphics/dot.gif" tppabs="http://freebooks.by.ru/view/EmacsIn24h/graphics/dot.gif" width="10" height="1"></FONT></TD>
    <TD bgcolor="#AAAAAA" height="16" align="right" nowrap> 
      <P><FONT size="2"><A href="emacs110.htm" tppabs="http://freebooks.by.ru/view/EmacsIn24h/emacs110.htm"><IMG src="graphics/prev-on.gif" tppabs="http://freebooks.by.ru/view/EmacsIn24h/graphics/prev-on.gif" width="7" height="5" border="0">Previous 
        Hour</A><IMG src="graphics/dot.gif" tppabs="http://freebooks.by.ru/view/EmacsIn24h/graphics/dot.gif" width="10" height="1"><A href="emacs130.htm" tppabs="http://freebooks.by.ru/view/EmacsIn24h/emacs130.htm">Next 
        Hour<IMG src="graphics/next-on.gif" tppabs="http://freebooks.by.ru/view/EmacsIn24h/graphics/next-on.gif" width="7" height="5" border="0"></A></FONT></P>
    </TD>
  </TR>
  <TR> 
    <TD bgcolor="#DDDDDD"> 
      <TABLE border="0" cellspacing="0" cellpadding="0" dwcopytype="CopyTableRow">
        <TR valign="top"> 
          <TD> 
            <P></P>
            <P><FONT size="2">Sections in this Hour:</FONT></P>
          </TD>
          <TD><FONT size="2"><IMG src="graphics/dot.gif" tppabs="http://freebooks.by.ru/view/EmacsIn24h/graphics/dot.gif" width="10" height="1"></FONT></TD>
          <TD><FONT size="2"><IMG src="graphics/dot.gif" tppabs="http://freebooks.by.ru/view/EmacsIn24h/graphics/dot.gif" width="10" height="1"></FONT></TD>
          <TD width="11"><FONT size="2"><IMG src="graphics/dot.gif" tppabs="http://freebooks.by.ru/view/EmacsIn24h/graphics/dot.gif" width="10" height="1"></FONT></TD>
          <TD> 
            <P class="navigation"><FONT size="1"> </FONT></P>
          </TD>
        </TR>
        <TR valign="top"> 
          <TD> 
            <P class="navigation"><FONT size="1">Diffing Two Files with Ediff 
              </FONT></P>
          </TD>
          <TD><FONT size="2"><IMG src="graphics/dot.gif" tppabs="http://freebooks.by.ru/view/EmacsIn24h/graphics/dot.gif" width="10" height="1"></FONT></TD>
          <TD> 
            <P class="navigation"><FONT size="1"><A href="emacs123.htm" tppabs="http://freebooks.by.ru/view/EmacsIn24h/emacs123.htm">Merging 
              Files</A> </FONT></P>
          </TD>
          <TD width="11"><FONT size="2"><IMG src="graphics/dot.gif" tppabs="http://freebooks.by.ru/view/EmacsIn24h/graphics/dot.gif" width="10" height="1"></FONT></TD>
          <TD> 
            <P class="navigation"><FONT size="1"><A href="emacs126.htm" tppabs="http://freebooks.by.ru/view/EmacsIn24h/emacs126.htm">Summary</A> 
              </FONT></P>
          </TD>
        </TR>
        <TR valign="top"> 
          <TD> 
            <P class="navigation"><FONT size="1"><A href="emacs121.htm" tppabs="http://freebooks.by.ru/view/EmacsIn24h/emacs121.htm">Diffing 
              Two Files with a Common Ancestor</A></FONT></P>
          </TD>
          <TD><FONT size="2"><IMG src="graphics/dot.gif" tppabs="http://freebooks.by.ru/view/EmacsIn24h/graphics/dot.gif" width="10" height="1"></FONT></TD>
          <TD> 
            <P class="navigation"><FONT size="1"><A href="emacs124.htm" tppabs="http://freebooks.by.ru/view/EmacsIn24h/emacs124.htm">Using 
              Ediff with Directories of Files</A> </FONT></P>
          </TD>
          <TD><FONT size="2"><IMG src="graphics/dot.gif" tppabs="http://freebooks.by.ru/view/EmacsIn24h/graphics/dot.gif" width="10" height="1"></FONT></TD>
          <TD> 
            <P class="navigation"><FONT size="1"><A href="emacs127.htm" tppabs="http://freebooks.by.ru/view/EmacsIn24h/emacs127.htm">Q&amp;A</A> 
              </FONT></P>
          </TD>
        </TR>
        <TR valign="top"> 
          <TD> 
            <P class="navigation"><FONT size="1"><A href="emacs122.htm" tppabs="http://freebooks.by.ru/view/EmacsIn24h/emacs122.htm">Ediff 
              Session</A> </FONT></P>
          </TD>
          <TD><FONT size="2"><IMG src="graphics/dot.gif" tppabs="http://freebooks.by.ru/view/EmacsIn24h/graphics/dot.gif" width="10" height="1"></FONT></TD>
          <TD> 
            <P class="navigation"><FONT size="1"><A href="emacs125.htm" tppabs="http://freebooks.by.ru/view/EmacsIn24h/emacs125.htm">Ediff 
              and Version Control Systems</A> </FONT></P>
          </TD>
          <TD><FONT size="2"><IMG src="graphics/dot.gif" tppabs="http://freebooks.by.ru/view/EmacsIn24h/graphics/dot.gif" width="10" height="1"></FONT></TD>
          <TD> 
            <P class="navigation"><FONT size="1"><A href="emacs128.htm" tppabs="http://freebooks.by.ru/view/EmacsIn24h/emacs128.htm">Exercises</A></FONT></P>
          </TD>
        </TR>
      </TABLE>
    </TD>
    <TD bgcolor="#DDDDDD">&nbsp;</TD>
    <TD bgcolor="#DDDDDD" align="right" nowrap valign="bottom"> 
      <P class="navigation"><FONT size="2"><IMG src="graphics/prev-off.gif" tppabs="http://freebooks.by.ru/view/EmacsIn24h/graphics/prev-off.gif" width="7" height="5" border="0">Previous 
        Section<IMG src="graphics/dot.gif" tppabs="http://freebooks.by.ru/view/EmacsIn24h/graphics/dot.gif" width="10" height="1"><A href="emacs121.htm" tppabs="http://freebooks.by.ru/view/EmacsIn24h/emacs121.htm">Next 
        Section<IMG src="graphics/next-on.gif" tppabs="http://freebooks.by.ru/view/EmacsIn24h/graphics/next-on.gif" width="7" height="5" border="0"></A></FONT></P>
    </TD>
  </TR>
</TABLE>
<H2>Hour 14<BR>
  Finding Differences Between Files </H2>
<P><FONT size=2>Using the UNIX program<A name="Index5276"></A><A name="Index5277"></A><A name="Index5278"></A><A name="Index5279"></A><A name="Index5280"></A><A name="Index5281"></A> 
  diff, you can find the differences between two files that are almost identical. 
  The two files might be </FONT></P>
<UL>
  <LI>
    <P><FONT size=2> The original file before a change and the changed file. </FONT></P>
  </LI>
  <P></P>
  <LI>
    <P><FONT size=2> A file edited by two different persons (for example, two 
      different persons who work together on a project). </FONT></P>
  </LI>
  <P></P>
  <LI>
    <P><FONT size=2> A file located on two different machines and edited on both 
      machines. An example of this might be your <SPAN class=compcode>.emacs</SPAN> 
      file that you might have a copy of both at home and at work. </FONT></P>
  </LI>
</UL>
<P></P>
<P><FONT size=2>In the last two examples, both files have a common ancestor, namely 
  the file before it was modified. When this is the case, the program diff3 might 
  make it easier for you to create one file, which<A name="Index5282"></A><A name="Index5283"></A><A name="Index5284"></A><A name="Index5285"></A><A name="Index5286"></A><A name="Index5287"></A> 
  is the original file plus the modifications made. </FONT></P>
<P><FONT size=2>The output from the command-line version of diff is hard to interpret, 
  unless the changes are few or you are really cool at looking at these outputs. 
  Fortunately, Emacs contains an interface to diff, called<A name="Index5288"></A><A name="Index5289"></A><A name="Index5290"></A><A name="Index5291"></A><A name="Index5292"></A><A name="Index5293"></A><A name="Index5294"></A> 
  Ediff, that makes it much easier. Besides making it easier to look at the output 
  from one diff, Emacs also offers functions for merging the files and applying 
  patches. Applying patches is beyond the scope of this book, but if you apply 
  patches often, I urge you to take a look at the info pages for Ediff. Emacs 
  also has the capability to find the differences between the files of two directories. 
  This is especially useful if you have a set of files that you work on in two 
  different places (such as your Lisp files located at work and <A name="Index5295"></A><A name="Index5296"></A><A name="Index5297"></A><A name="Index5298"></A><A name="Index5299"></A><A name="Index5300"></A><A name="Index5301"></A>at 
  home). </FONT></P>
<TABLE border="0" width="90%" cellspacing="0" cellpadding="3" align="center">
  <TR>
    <TD bgcolor="#DDDDDD">
      <P><FONT size=2><B class="specialgreen">Note -</B> Windows doesn&#039;t 
        include diff, so you have to install a<A name="Index5302"></A><A name="Index5303"></A><A name="Index5304"></A><A name="Index5305"></A><A name="Index5306"></A><A name="Index5307"></A><A name="Index5308"></A> 
        copy. There is a diff program included with the Cygwin tools on the <A name="Index5309"></A>CD-ROM. 
        Other UNIX tool sets might also include diff, but you should test them 
        to make sure that Emacs understands the output from another version of<A name="Index5310"></A><A name="Index5311"></A><A name="Index5312"></A><A name="Index5313"></A><A name="Index5314"></A><A name="Index5315"></A> 
        diff. </FONT></P>
      <P><FONT size=2> Regardless of the version of diff you use, you might have 
        to<A name="Index5316"></A><A name="Index5317"></A><A name="Index5318"></A><A name="Index5319"></A><A name="Index5320"></A><A name="Index5321"></A> 
        customize the variable <SPAN class=compcode>diff-command</SPAN> so that 
        Emacs can execute it. (See <A href="emacs083.htm" tppabs="http://freebooks.by.ru/view/EmacsIn24h/emacs083.htm">Hour 10, &quot;The Emacs 
        Help System and Configuration System,&quot;</A> for a description of how 
        to customize variables.) </FONT></P>
    </TD>
  </TR>
</TABLE>
<H2><A name="c1"></A> Diffing Two Files with Ediff </H2>
<TABLE border="0" cellspacing="0" cellpadding="0">
  <TR valign="top"> 
    <TD> 
      <P class="navigation"><FONT size="1"><A href="emacs120.htm#Heading299">Moving Around</A></FONT></P>
    </TD>
  </TR>
  <TR valign="top"> 
    <TD> 
      <P class="navigation"><FONT size="1"><A href="emacs120.htm#Heading300">Refinement</A></FONT></P>
    </TD>
  </TR>
  <TR valign="top"> 
    <TD> 
      <P class="navigation"><FONT size="1"><A href="emacs120.htm#Heading301">Copying from 
        Buffer to Buffer</A></FONT></P>
    </TD>
  </TR>
</TABLE>
<BR>
<P><FONT size=2>A
number of functions<A name="Index5322"></A><A name="Index5323"></A><A name="Index5324"></A><A name="Index5325"></A><A name="Index5326"></A><A name="Index5327"></A><A name="Index5328"></A>
in the Ediff library lets you diff two items.
</FONT></P>
<UL>
<LI><P><FONT size=2>		ediff-buffers--This
asks for the name of two buffers and diffs <A name="Index5329"></A><A name="Index5330"></A>them.</FONT></P></LI><P></P><LI><P><FONT size=2>		ediff-files--This
asks for the name of two files, loads them into<A name="Index5331"></A><A name="Index5332"></A><A name="Index5333"></A><A name="Index5334"></A><A name="Index5335"></A><A name="Index5336"></A><A name="Index5337"></A>
Emacs, and diffs them.
</FONT></P></LI><P></P><LI><P><FONT size=2>		ediff-windows-linewise,
ediff-windows-wordwise--These ask you to<A name="Index5338"></A><A name="Index5339"></A>
point at two windows and then diff the content of these windows. The 
<SPAN class=compcode>-linewise</SPAN>
function is faster than the 
<SPAN class=compcode>-wordwise</SPAN>,
but on the other hand, the 
<SPAN class=compcode>-wordwise</SPAN>
function generally does a better job, especially with small regions. 
<SPAN class=compcode>-linewise</SPAN>
compares buffers line-by-line, while 
<SPAN class=compcode>-wordwise</SPAN>
compares<A name="Index5340"></A><A name="Index5341"></A>
them word-by-word.
</FONT></P></LI><P></P><LI>
    <P><FONT size=2> ediff-regions-linewise, ediff-regions-wordwise--These ask 
      for <A name="Index5342"></A><A name="Index5343"></A>the names of two buffers 
      and then diff the region of these. Note that you can have only one region 
      in each buffer, therefore it is not possible to create two regions in the 
      same file for diffing. However, in <A href="emacs130.htm" tppabs="http://freebooks.by.ru/view/EmacsIn24h/emacs130.htm">Hour 15, &quot;Getting 
      an Overview of a File,&quot;</A> a method for diffing two parts of the same 
      buffer is shown (technically it is not the same buffer, but it seems so<A name="Index5344"></A><A name="Index5345"></A> 
      to the user). </FONT></P>
  </LI></UL><P></P><P><FONT size=2>Don&#039;t
let it scare you that there are so many different functions for diffing two
files; after all, they are easy to remember, because they<A name="Index5346"></A><A name="Index5347"></A><A name="Index5348"></A><A name="Index5349"></A><A name="Index5350"></A><A name="Index5351"></A><A name="Index5352"></A>
are all called ediff-
<I>what-you-want-to-diff</I>.</FONT></P>
<P><FONT size=2>In <A href="javascript:popUp('graphics/ch14/14fig01.gif')">Figure 14.1</A>, an Ediff 
  session is shown. Emacs has found four differences between the two files. The 
  current difference is number one and is highlighted, which makes it easier to 
  find. The differences reported by the diff program can span more text than is 
  actually the difference, therefore Emacs highlights the part which is actually 
  different. Thus in the upper buffer, the line that is the current difference 
  is green, except for the word <SPAN class=compcode>redo</SPAN>, which is dark 
  blue, to indicate that this is the actual difference. Likewise the line in the 
  buffer below is yellow, except the <A name="Index5353"></A><A name="Index5354"></A><A name="Index5355"></A><A name="Index5356"></A><A name="Index5357"></A><A name="Index5358"></A><A name="Index5359"></A>word 
  <SPAN class=compcode>undefined</SPAN>, which is light blue. </FONT></P>
<P class="figcaption"><FONT size=2><B><A href="javascript:popUp('graphics/ch14/14fig01.gif')">Figure 
  14.1</A> </B><BR>
The
Emacs interface<A name="Index5360"></A><A name="Index5361"></A><A name="Index5362"></A><A name="Index5363"></A><A name="Index5364"></A><A name="Index5365"></A><A name="Index5366"></A>
 to 
<SPAN class=compcode>diff</SPAN>.</FONT></P>
<TABLE border="0" width="90%" cellspacing="0" cellpadding="3" align="center"><TR><TD bgcolor="#DDDDDD">
      <P><FONT size=2><B class="specialred">Caution -</B> <A href="javascript:popUp('graphics/ch14/14fig01.gif')">Figure 
        14.1</A> includes the window managers border, which you can see at the 
        top of the window. This is merely to show you that the control buffer 
        is located in its own frame. </FONT></P>
    </TD></TR></TABLE><BR>
<TABLE border="0" width="90%" cellspacing="0" cellpadding="3" align="center"><TR><TD bgcolor="#DDDDDD"><P><FONT size=2><B class="specialgreen">Note -</B>
This
might be the right time to tell you, before you get too excited, Ediff really
does require a color monitor. It is <A name="Index5367"></A><A name="Index5368"></A><A name="Index5369"></A><A name="Index5370"></A><A name="Index5371"></A><A name="Index5372"></A><A name="Index5373"></A>capable
of showing the difference with a black-and-white monitor, but the output is
much harder to interpret.
</FONT></P></TD></TR></TABLE><BR>
<P><FONT size=2>If
you make the window with the control buffer the active one, you can invoke<A name="Index5374"></A><A name="Index5375"></A><A name="Index5376"></A><A name="Index5377"></A><A name="Index5378"></A><A name="Index5379"></A><A name="Index5380"></A>
the command that controls the Ediff session.
</FONT></P>
<TABLE border="0" width="90%" cellspacing="0" cellpadding="3" align="center"><TR><TD bgcolor="#DDDDDD">
      <P><FONT size=2><B class="specialgreen">Tip -</B> If you press <SPAN class=compcode>?</SPAN> 
        in the control buffer, the buffer expands to show the available keybindings 
        in it. This can be seen in <A href="javascript:popUp('graphics/ch14/14fig02.gif')">Figure 
        14.2</A> </FONT></P>
    </TD></TR></TABLE><BR>
<P class="figcaption"><FONT size=2><B><A href="javascript:popUp('graphics/ch14/14fig02.gif')">Figure 
  14.2</A> </B><BR>
The
control buffer <A name="Index5381"></A><A name="Index5382"></A><A name="Index5383"></A><A name="Index5384"></A><A name="Index5385"></A><A name="Index5386"></A><A name="Index5387"></A>expanded
to show available commands.
</FONT></P>
<A name="Heading299"></A><H3>
Moving
Around
</H3>
<P><FONT size=2>There
are several ways with which you can move from diff to diff. The most basic <A name="Index5388"></A><A name="Index5389"></A><A name="Index5390"></A><A name="Index5391"></A><A name="Index5392"></A><A name="Index5393"></A><A name="Index5394"></A>one
 is by pressing 
<SPAN class=compcode>n</SPAN>
or 
<SPAN class=compcode>p</SPAN>
in the control buffer. These move, respectively, to the next or previous diff. 
</FONT></P>
<TABLE border="0" width="90%" cellspacing="0" cellpadding="3" align="center"><TR><TD bgcolor="#DDDDDD"><P><FONT size=2><B class="specialgreen">Note -</B>
In
the following text it is understood that all the commands are invoked in the
control buffer. The two buffers showing the difference are modifiable as
always, thus if you press a key such as 
<SPAN class=compcode>n</SPAN>
in this buffer, it is simply inserted into the buffer.
</FONT></P></TD></TR></TABLE><BR>
<P><FONT size=2>If
you know<A name="Index5395"></A><A name="Index5396"></A><A name="Index5397"></A><A name="Index5398"></A><A name="Index5399"></A><A name="Index5400"></A><A name="Index5401"></A>
the number of a difference, you can jump directly to this diff by pressing the
number and the letter 
<SPAN class=compcode>j</SPAN>.
Thus pressing 
<SPAN class=compcode>4j</SPAN>
in the control buffer takes you<A name="Index5402"></A><A name="Index5403"></A><A name="Index5404"></A><A name="Index5405"></A><A name="Index5406"></A><A name="Index5407"></A><A name="Index5408"></A>
to difference number four. 
</FONT></P>
<TABLE border="0" width="90%" cellspacing="0" cellpadding="3" align="center"><TR><TD bgcolor="#DDDDDD"><P><FONT size=2><B class="specialred">Caution -</B>
It
is also possible to take the content of the diff region from one<A name="Index5409"></A><A name="Index5410"></A><A name="Index5411"></A><A name="Index5412"></A><A name="Index5413"></A><A name="Index5414"></A>
buffer and insert it in the other. Furthermore, it is possible to ask Emacs to
recalculate the difference. This means that the number of a difference region
might change, because a previous region might not be different anymore and
therefore the number of diffs might have decreased by one.
</FONT></P></TD></TR></TABLE><BR>
<P><FONT size=2>When
you browse one of the difference buffers, you might find a location of special
interest. You can synchronize both buffers to the same<A name="Index5415"></A><A name="Index5416"></A><A name="Index5417"></A><A name="Index5418"></A><A name="Index5419"></A><A name="Index5420"></A>
location by locating the point in the difference region and, in the control
buffer, pressing 
<SPAN class=compcode>ga</SPAN>
or 
<SPAN class=compcode>gb</SPAN>
depending on whether the buffer where you placed the point is buffer 
<SPAN class=compcode>A</SPAN>
or buffer 
<SPAN class=compcode>B</SPAN>.
(The name of the buffer is indicated in the <A name="Index5421"></A><A name="Index5422"></A><A name="Index5423"></A><A name="Index5424"></A><A name="Index5425"></A><A name="Index5426"></A>mode
line.)
</FONT></P><P><FONT size=2>The
buffers with the differences are editable like always; therefore, you <A name="Index5427"></A><A name="Index5428"></A><A name="Index5429"></A><A name="Index5430"></A><A name="Index5431"></A><A name="Index5432"></A>can
also scroll them up and down to see other parts of the buffers without having
to advance to another difference. Sometimes you might want to scroll both
buffers simultaneously. To do that press 
<SPAN class=compcode>v</SPAN>
to scroll downward in the buffer, and 
<SPAN class=compcode>V</SPAN>
to scroll upward. Likewise if the lines are truncated, you can scroll both
buffers horizontally at the same time by pressing <A name="Index5433"></A><A name="Index5434"></A><A name="Index5435"></A><A name="Index5436"></A><A name="Index5437"></A><A name="Index5438"></A>either
<SPAN class=compcode>&lt;</SPAN>
or 
<SPAN class=compcode>&gt;</SPAN>.</FONT></P><P><FONT size=2>To
quit one of the Ediff commands press 
<SPAN class=compcode>q</SPAN>
(
<I>q</I>
for 
<I>q</I>uit).</FONT></P>
<A name="Heading300"></A><H3>
Refinement</H3>
<P><FONT size=2>Ediff
uses the<A name="Index5439"></A><A name="Index5440"></A><A name="Index5441"></A><A name="Index5442"></A><A name="Index5443"></A><A name="Index5444"></A><A name="Index5445"></A><A name="Index5446"></A>
diff program to calculate the differences. The region that is marked as
different, but actually isn&#039;t different, is the output from diff. Emacs
can optionally do extra refinements of the difference, but this costs extra
computer power. If you have a slow computer (or it is hard at work), this might
not be desirable. By pressing 
<SPAN class=compcode>@</SPAN>
in the control buffer, you can turn off this extra refinement; pressing 
<SPAN class=compcode>@</SPAN>
again turns it back on.
</FONT></P>
<P><FONT size=2>To avoid spending a lot of time refining huge regions, Emacs contains 
  a variable called <SPAN class=compcode>ediff-auto-refine-limit</SPAN>, which 
  is a number saying how many characters at most a region must contain for automatic 
  refinement to take place (see <A href="emacs083.htm" tppabs="http://freebooks.by.ru/view/EmacsIn24h/emacs083.htm">Hour 10, &quot;The Emacs 
  Help System and Configuration System,&quot;</A> for a description of how to 
  customize <A name="Index5447"></A><A name="Index5448"></A><A name="Index5449"></A><A name="Index5450"></A><A name="Index5451"></A><A name="Index5452"></A><A name="Index5453"></A><A name="Index5454"></A>variables). 
  </FONT></P>
<TABLE border="0" width="90%" cellspacing="0" cellpadding="3" align="center"><TR><TD bgcolor="#DDDDDD"><P><FONT size=2><B class="specialred">Caution -</B>
This
option doesn&#039;t seem to work in the version of Ediff that is <A name="Index5455"></A><A name="Index5456"></A><A name="Index5457"></A><A name="Index5458"></A><A name="Index5459"></A><A name="Index5460"></A><A name="Index5461"></A><A name="Index5462"></A>shipped
with GNU Emacs version 19. You must have GNU Emacs version 20.
</FONT></P></TD></TR></TABLE><BR>
<P><FONT size=2>When
automatic refinement has been disabled or was not done due to a huge region,
you can press 
<SPAN class=compcode>*</SPAN>
to force Emacs to do the refinement.
</FONT></P><P><FONT size=2>You
might run into situations when a large chunk of text has been edited and then
moved to a different place. In such cases, these two chunks of text are
unlikely to belong to the same difference region, so the refinement feature of
Ediff will not be able to tell you what exactly differs inside these chunks. In
these situations you can mark the text that should be almost identical in both
buffers and press 
<SPAN class=compcode>=</SPAN>
(the equals sign). This starts a new Ediff session <A name="Index5463"></A><A name="Index5464"></A><A name="Index5465"></A><A name="Index5466"></A><A name="Index5467"></A><A name="Index5468"></A><A name="Index5469"></A><A name="Index5470"></A>for
the subpart of the buffers.
</FONT></P>
<TABLE border="0" width="90%" cellspacing="0" cellpadding="3" align="center"><TR><TD bgcolor="#DDDDDD"><P><FONT size=2><B class="specialred">Caution -</B>
This
feature doesn&#039;t work in the version of Ediff that is shipped <A name="Index5471"></A><A name="Index5472"></A><A name="Index5473"></A><A name="Index5474"></A><A name="Index5475"></A><A name="Index5476"></A><A name="Index5477"></A><A name="Index5478"></A>with
GNU Emacs version 19. You must use GNU Emacs version 20. 
</FONT></P></TD></TR></TABLE><BR>
<P><FONT size=2>You
might often want to skip the diffs that contain only differences in the number
of white spaces. To do this, press 
<SPAN class=compcode>##</SPAN>
(two hash marks). Emacs <A name="Index5479"></A><A name="Index5480"></A><A name="Index5481"></A><A name="Index5482"></A><A name="Index5483"></A><A name="Index5484"></A><A name="Index5485"></A><A name="Index5486"></A>then
simply skips these regions.
</FONT></P>
<A name="Heading301"></A><H3>
Copying
from Buffer to Buffer
</H3>
<P><FONT size=2>Though
Ediff has special functions for merging two buffers into one, it is often<A name="Index5487"></A><A name="Index5488"></A><A name="Index5489"></A><A name="Index5490"></A><A name="Index5491"></A><A name="Index5492"></A><A name="Index5493"></A><A name="Index5494"></A>
easier  to use Ediff and copy the resulting files into one of the files. This
can be done by  pressing either 
<SPAN class=compcode>a</SPAN>
or 
<SPAN class=compcode>b</SPAN>.
<SPAN class=compcode>a</SPAN>
copies the diff from buffer 
<SPAN class=compcode>A</SPAN>
to buffer 
<SPAN class=compcode>B</SPAN>,
while 
<SPAN class=compcode>b</SPAN>
copies the text the other way.
</FONT></P><P><FONT size=2>If
you later find that it was wrong to overwrite a given region, you can restore
it again by pressing either 
<SPAN class=compcode>ra</SPAN>
or 
<SPAN class=compcode>rb</SPAN>,
for restore region in buffer 
<SPAN class=compcode>A</SPAN>
or in buffer 
<SPAN class=compcode>B</SPAN>.</FONT></P>
<P><FONT size=2>When you have copied a region from one buffer to the other, you 
  might want to recalculate the difference between the two buffers. This can be 
  done <A name="Index5495"></A><A name="Index5496"></A><A name="Index5497"></A><A name="Index5498"></A><A name="Index5499"></A><A name="Index5500"></A><A name="Index5501"></A><A name="Index5502"></A>by 
  pressing <SPAN class=compcode>!</SPAN> (the exclamation point). </FONT></P>
<TABLE border="0" width="99%" cellspacing="0" cellpadding="3">
  <TR> 
    <TD background="graphics/blstrbkg.gif" tppabs="http://freebooks.by.ru/view/EmacsIn24h/graphics/blstrbkg.gif"  bgcolor="#666699"> 
      <P> <FONT color="#FFFFFF"><B>Sams Teach Yourself Emacs<FONT size="1"></FONT> 
        in 24 Hours</B> </FONT></P>
    </TD>
    <TD background="graphics/blstrbkg.gif" tppabs="http://freebooks.by.ru/view/EmacsIn24h/graphics/blstrbkg.gif" bgcolor="#666699"><FONT size="2"><IMG src="http://learn.tsinghua.edu.cn:8080/2001315450/style/dot.gif" tppabs="http://freebooks.by.ru/view/style/dot.gif" width="10" height="1"></FONT></TD>
    <TD background="graphics/blstrbkg.gif" tppabs="http://freebooks.by.ru/view/EmacsIn24h/graphics/blstrbkg.gif" bgcolor="#666699" nowrap align="right"> 
      <P><A href="index.htm" tppabs="http://freebooks.by.ru/view/EmacsIn24h/index.htm"><FONT size="2" color="#FFFFFF">Contents</FONT></A><IMG src="graphics/dot.gif" tppabs="http://freebooks.by.ru/view/EmacsIn24h/graphics/dot.gif" width="10" height="1"><A href="bkindex.htm" tppabs="http://freebooks.by.ru/view/EmacsIn24h/bkindex.htm"><FONT size="2" color="#FFFFFF">Index</FONT></A></P>
    </TD>
  </TR>
  <TR> 
    <TD bgcolor="#AAAAAA" height="16"> 
      <P><FONT size="2">Hour 14: Finding Differences Between Files</FONT></P>
    </TD>
    <TD bgcolor="#AAAAAA" height="16"><FONT size="2"><IMG src="graphics/dot.gif" tppabs="http://freebooks.by.ru/view/EmacsIn24h/graphics/dot.gif" width="10" height="1"></FONT></TD>
    <TD bgcolor="#AAAAAA" height="16" align="right" nowrap> 
      <P><FONT size="2"><A href="emacs110.htm" tppabs="http://freebooks.by.ru/view/EmacsIn24h/emacs110.htm"><IMG src="graphics/prev-on.gif" tppabs="http://freebooks.by.ru/view/EmacsIn24h/graphics/prev-on.gif" width="7" height="5" border="0">Previous 
        Hour</A><IMG src="graphics/dot.gif" tppabs="http://freebooks.by.ru/view/EmacsIn24h/graphics/dot.gif" width="10" height="1"><A href="emacs130.htm" tppabs="http://freebooks.by.ru/view/EmacsIn24h/emacs130.htm">Next 
        Hour<IMG src="graphics/next-on.gif" tppabs="http://freebooks.by.ru/view/EmacsIn24h/graphics/next-on.gif" width="7" height="5" border="0"></A></FONT></P>
    </TD>
  </TR>
  <TR> 
    <TD bgcolor="#DDDDDD"> 
      <TABLE border="0" cellspacing="0" cellpadding="0" dwcopytype="CopyTableRow">
        <TR valign="top"> 
          <TD> 
            <P></P>
            <P><FONT size="2">Sections in this Hour:</FONT></P>
          </TD>
          <TD><FONT size="2"><IMG src="graphics/dot.gif" tppabs="http://freebooks.by.ru/view/EmacsIn24h/graphics/dot.gif" width="10" height="1"></FONT></TD>
          <TD><FONT size="2"><IMG src="graphics/dot.gif" tppabs="http://freebooks.by.ru/view/EmacsIn24h/graphics/dot.gif" width="10" height="1"></FONT></TD>
          <TD width="11"><FONT size="2"><IMG src="graphics/dot.gif" tppabs="http://freebooks.by.ru/view/EmacsIn24h/graphics/dot.gif" width="10" height="1"></FONT></TD>
          <TD> 
            <P class="navigation"><FONT size="1"> </FONT></P>
          </TD>
        </TR>
        <TR valign="top"> 
          <TD> 
            <P class="navigation"><FONT size="1">Diffing Two Files with Ediff 
              </FONT></P>
          </TD>
          <TD><FONT size="2"><IMG src="graphics/dot.gif" tppabs="http://freebooks.by.ru/view/EmacsIn24h/graphics/dot.gif" width="10" height="1"></FONT></TD>
          <TD> 
            <P class="navigation"><FONT size="1"><A href="emacs123.htm" tppabs="http://freebooks.by.ru/view/EmacsIn24h/emacs123.htm">Merging 
              Files</A> </FONT></P>
          </TD>
          <TD width="11"><FONT size="2"><IMG src="graphics/dot.gif" tppabs="http://freebooks.by.ru/view/EmacsIn24h/graphics/dot.gif" width="10" height="1"></FONT></TD>
          <TD> 
            <P class="navigation"><FONT size="1"><A href="emacs126.htm" tppabs="http://freebooks.by.ru/view/EmacsIn24h/emacs126.htm">Summary</A> 
              </FONT></P>
          </TD>
        </TR>
        <TR valign="top"> 
          <TD> 
            <P class="navigation"><FONT size="1"><A href="emacs121.htm" tppabs="http://freebooks.by.ru/view/EmacsIn24h/emacs121.htm">Diffing 
              Two Files with a Common Ancestor</A></FONT></P>
          </TD>
          <TD><FONT size="2"><IMG src="graphics/dot.gif" tppabs="http://freebooks.by.ru/view/EmacsIn24h/graphics/dot.gif" width="10" height="1"></FONT></TD>
          <TD> 
            <P class="navigation"><FONT size="1"><A href="emacs124.htm" tppabs="http://freebooks.by.ru/view/EmacsIn24h/emacs124.htm">Using 
              Ediff with Directories of Files</A> </FONT></P>
          </TD>
          <TD><FONT size="2"><IMG src="graphics/dot.gif" tppabs="http://freebooks.by.ru/view/EmacsIn24h/graphics/dot.gif" width="10" height="1"></FONT></TD>
          <TD> 
            <P class="navigation"><FONT size="1"><A href="emacs127.htm" tppabs="http://freebooks.by.ru/view/EmacsIn24h/emacs127.htm">Q&amp;A</A> 
              </FONT></P>
          </TD>
        </TR>
        <TR valign="top"> 
          <TD> 
            <P class="navigation"><FONT size="1"><A href="emacs122.htm" tppabs="http://freebooks.by.ru/view/EmacsIn24h/emacs122.htm">Ediff 
              Session</A> </FONT></P>
          </TD>
          <TD><FONT size="2"><IMG src="graphics/dot.gif" tppabs="http://freebooks.by.ru/view/EmacsIn24h/graphics/dot.gif" width="10" height="1"></FONT></TD>
          <TD> 
            <P class="navigation"><FONT size="1"><A href="emacs125.htm" tppabs="http://freebooks.by.ru/view/EmacsIn24h/emacs125.htm">Ediff 
              and Version Control Systems</A> </FONT></P>
          </TD>
          <TD><FONT size="2"><IMG src="graphics/dot.gif" tppabs="http://freebooks.by.ru/view/EmacsIn24h/graphics/dot.gif" width="10" height="1"></FONT></TD>
          <TD> 
            <P class="navigation"><FONT size="1"><A href="emacs128.htm" tppabs="http://freebooks.by.ru/view/EmacsIn24h/emacs128.htm">Exercises</A></FONT></P>
          </TD>
        </TR>
      </TABLE>
    </TD>
    <TD bgcolor="#DDDDDD">&nbsp;</TD>
    <TD bgcolor="#DDDDDD" align="right" nowrap valign="bottom"> 
      <P class="navigation"><FONT size="2"><IMG src="graphics/prev-off.gif" tppabs="http://freebooks.by.ru/view/EmacsIn24h/graphics/prev-off.gif" width="7" height="5" border="0">Previous 
        Section<IMG src="graphics/dot.gif" tppabs="http://freebooks.by.ru/view/EmacsIn24h/graphics/dot.gif" width="10" height="1"><A href="emacs121.htm" tppabs="http://freebooks.by.ru/view/EmacsIn24h/emacs121.htm">Next 
        Section<IMG src="graphics/next-on.gif" tppabs="http://freebooks.by.ru/view/EmacsIn24h/graphics/next-on.gif" width="7" height="5" border="0"></A></FONT></P>
    </TD>
  </TR>
</TABLE>
<P class="copyright"><FONT size=2>&#169; Copyright Macmillan USA. All rights reserved.</FONT> 
</P>
</BODY>

</HTML>
