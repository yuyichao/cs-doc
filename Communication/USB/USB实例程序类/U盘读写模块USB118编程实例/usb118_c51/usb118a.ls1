A51 MACRO ASSEMBLER  USB118A                                                              05/23/2008 08:44:20 PAGE     1


MACRO ASSEMBLER A51 V8.00
OBJECT MODULE PLACED IN usb118a.OBJ
ASSEMBLER INVOKED BY: C:\Keil\C51\BIN\A51.EXE usb118a.src PR(.\usb118a.ls1) EP DEBUG

LOC  OBJ            LINE     SOURCE

                       1     ; .\usb118a.SRC generated from: usb118a.c
                       2     ; COMPILER INVOKED BY:
                       3     ;        C:\Keil\C51\BIN\C51.EXE usb118a.c COMPACT BROWSE DEBUG OBJECTEXTEND SRC(.\usb118a.
                             SRC)
                       4     
                       5     $nomod51 
                       6     
                       7     NAME    USB118A
                       8     
  0080                 9     P0      DATA    080H
  0090                10     P1      DATA    090H
  00A0                11     P2      DATA    0A0H
  00B0                12     P3      DATA    0B0H
  00D6                13     AC      BIT     0D0H.6
  00B4                14     T0      BIT     0B0H.4
  00B5                15     T1      BIT     0B0H.5
  00AF                16     EA      BIT     0A8H.7
  0090                17     T2      BIT     090H.0
  00A8                18     IE      DATA    0A8H
  0080                19     P0_0    BIT     080H.0
  0090                20     P1_0    BIT     090H.0
  0081                21     P0_1    BIT     080H.1
  00D1                22     FL      BIT     0D0H.1
  00A0                23     P2_0    BIT     0A0H.0
  0091                24     P1_1    BIT     090H.1
  0082                25     P0_2    BIT     080H.2
  00B0                26     P3_0    BIT     0B0H.0
  00A1                27     P2_1    BIT     0A0H.1
  0092                28     P1_2    BIT     090H.2
  0083                29     P0_3    BIT     080H.3
  00B1                30     P3_1    BIT     0B0H.1
  00A2                31     P2_2    BIT     0A0H.2
  0093                32     P1_3    BIT     090H.3
  0084                33     P0_4    BIT     080H.4
  00B2                34     P3_2    BIT     0B0H.2
  00A3                35     P2_3    BIT     0A0H.3
  0094                36     P1_4    BIT     090H.4
  0085                37     P0_5    BIT     080H.5
  00CE                38     EXF2    BIT     0C8H.6
  00B7                39     RD      BIT     0B0H.7
  00B3                40     P3_3    BIT     0B0H.3
  00A4                41     P2_4    BIT     0A0H.4
  0095                42     P1_5    BIT     090H.5
  0086                43     P0_6    BIT     080H.6
  00B4                44     P3_4    BIT     0B0H.4
  00A5                45     P2_5    BIT     0A0H.5
  0096                46     P1_6    BIT     090H.6
  0087                47     P0_7    BIT     080H.7
  00B5                48     P3_5    BIT     0B0H.5
  00AC                49     ES      BIT     0A8H.4
  00A6                50     P2_6    BIT     0A0H.6
  0097                51     P1_7    BIT     090H.7
  00B6                52     P3_6    BIT     0B0H.6
  00A7                53     P2_7    BIT     0A0H.7
  00B8                54     IP      DATA    0B8H
  00B7                55     P3_7    BIT     0B0H.7
  0098                56     RI      BIT     098H.0
  00D7                57     CY      BIT     0D0H.7
A51 MACRO ASSEMBLER  USB118A                                                              05/23/2008 08:44:20 PAGE     2

  00B2                58     INT0    BIT     0B0H.2
  00B3                59     INT1    BIT     0B0H.3
  0099                60     TI      BIT     098H.1
  00CB                61     RCAP2H  DATA    0CBH
  00BC                62     PS      BIT     0B8H.4
  0081                63     SP      DATA    081H
  0091                64     T2EX    BIT     090H.1
  00D2                65     OV      BIT     0D0H.2
  00CA                66     RCAP2L  DATA    0CAH
  00C9                67     C_T2    BIT     0C8H.1
  00B6                68     WR      BIT     0B0H.6
  00CD                69     RCLK    BIT     0C8H.5
  00CC                70     TCLK    BIT     0C8H.4
  0099                71     SBUF    DATA    099H
  0087                72     PCON    DATA    087H
  0098                73     SCON    DATA    098H
  0089                74     TMOD    DATA    089H
  0088                75     TCON    DATA    088H
  0089                76     IE0     BIT     088H.1
  008B                77     IE1     BIT     088H.3
  00F0                78     B       DATA    0F0H
  00C8                79     CP_RL2  BIT     0C8H.0
  00E0                80     ACC     DATA    0E0H
  00A9                81     ET0     BIT     0A8H.1
  00AB                82     ET1     BIT     0A8H.3
  008D                83     TF0     BIT     088H.5
  00AD                84     ET2     BIT     0A8H.5
  008F                85     TF1     BIT     088H.7
  00CF                86     TF2     BIT     0C8H.7
  009A                87     RB8     BIT     098H.2
  008C                88     TH0     DATA    08CH
  00A8                89     EX0     BIT     0A8H.0
  0088                90     IT0     BIT     088H.0
  008D                91     TH1     DATA    08DH
  00AA                92     EX1     BIT     0A8H.2
  009B                93     TB8     BIT     098H.3
  008A                94     IT1     BIT     088H.2
  00CD                95     TH2     DATA    0CDH
  00D0                96     P       BIT     0D0H.0
  009F                97     SM0     BIT     098H.7
  008A                98     TL0     DATA    08AH
  009E                99     SM1     BIT     098H.6
  008B               100     TL1     DATA    08BH
  009D               101     SM2     BIT     098H.5
  00CC               102     TL2     DATA    0CCH
  00B9               103     PT0     BIT     0B8H.1
  00D3               104     RS0     BIT     0D0H.3
  00BB               105     PT1     BIT     0B8H.3
  00D4               106     RS1     BIT     0D0H.4
  00BD               107     PT2     BIT     0B8H.5
  008C               108     TR0     BIT     088H.4
  008E               109     TR1     BIT     088H.6
  00CA               110     TR2     BIT     0C8H.2
  00B8               111     PX0     BIT     0B8H.0
  00BA               112     PX1     BIT     0B8H.2
  0083               113     DPH     DATA    083H
  0082               114     DPL     DATA    082H
  00CB               115     EXEN2   BIT     0C8H.3
  009C               116     REN     BIT     098H.4
  00C9               117     T2MOD   DATA    0C9H
  00C8               118     T2CON   DATA    0C8H
  00B0               119     RXD     BIT     0B0H.0
  00B1               120     TXD     BIT     0B0H.1
  00D5               121     F0      BIT     0D0H.5
  00D0               122     PSW     DATA    0D0H
                     123     ?PR?_int_data?USB118A                    SEGMENT CODE 
A51 MACRO ASSEMBLER  USB118A                                                              05/23/2008 08:44:20 PAGE     3

                     124     ?PR?_intia?USB118A   SEGMENT CODE 
                     125     ?PR?_delay?USB118A   SEGMENT CODE 
                     126     ?PR?_Del?USB118A     SEGMENT CODE 
                     127     ?PR?_Init_COMM?USB118A                   SEGMENT CODE 
                     128     ?PR?serial_syn?USB118A                   SEGMENT CODE 
                     129     ?PR?_Send_Data?USB118A                   SEGMENT CODE 
                     130     ?PR?_serial_send?USB118A                 SEGMENT CODE 
                     131     ?PD?_serial_send?USB118A                 SEGMENT XDATA INPAGE OVERLAYABLE 
                     132     ?PR?Receive_Data?USB118A                 SEGMENT CODE 
                     133     ?PR?_Receive_One?USB118A                 SEGMENT CODE 
                     134     ?PD?_Receive_One?USB118A                 SEGMENT XDATA INPAGE OVERLAYABLE 
                     135     ?PR?USB118_Detect?USB118A                SEGMENT CODE 
                     136     ?PR?_USB118_Crefiledir?USB118A           SEGMENT CODE 
                     137     ?PD?_USB118_Crefiledir?USB118A           SEGMENT XDATA INPAGE OVERLAYABLE 
                     138     ?PR?_USB118_Open?USB118A                 SEGMENT CODE 
                     139     ?PD?_USB118_Open?USB118A                 SEGMENT XDATA INPAGE OVERLAYABLE 
                     140     ?PR?_USB118_Write?USB118A                SEGMENT CODE 
                     141     ?PD?_USB118_Write?USB118A                SEGMENT XDATA INPAGE OVERLAYABLE 
                     142     ?PR?main?USB118A     SEGMENT CODE 
                     143     ?PR?serial?USB118A   SEGMENT CODE 
                     144     ?C_INITSEG           SEGMENT CODE 
                     145     ?PD?USB118A          SEGMENT XDATA INPAGE 
                     146             EXTRN   CODE (?C?ICASE)
                     147             EXTRN   CODE (?C?CLDPTR)
                     148             EXTRN   CODE (?C?CSTPTR)
                     149             EXTRN   CODE (?C?CSTOPTR)
                     150             EXTRN   CODE (?C_STARTUP)
                     151             PUBLIC  dat1
                     152             PUBLIC  Command_status
                     153             PUBLIC  commd
                     154             PUBLIC  serial
                     155             PUBLIC  main
                     156             PUBLIC  _USB118_Write
                     157             PUBLIC  ?_USB118_Open?BYTE
                     158             PUBLIC  _USB118_Open
                     159             PUBLIC  ?_USB118_Crefiledir?BYTE
                     160             PUBLIC  _USB118_Crefiledir
                     161             PUBLIC  USB118_Detect
                     162             PUBLIC  ?_Receive_One?BYTE
                     163             PUBLIC  _Receive_One
                     164             PUBLIC  Receive_Data
                     165             PUBLIC  ?_serial_send?BYTE
                     166             PUBLIC  _serial_send
                     167             PUBLIC  _Send_Data
                     168             PUBLIC  serial_syn
                     169             PUBLIC  _Init_COMM
                     170             PUBLIC  _Del
                     171             PUBLIC  _delay
                     172             PUBLIC  _intia
                     173             PUBLIC  _int_data
                     174     
----                 175             RSEG  ?PD?_Receive_One?USB118A
0000                 176     ?_Receive_One?BYTE:
0001                 177             ORG  1
0001                 178       r_command?960:   DS   3
0003                 179             ORG  3
0003                 180           r_dat?961:   DS   3
0006                 181             ORG  6
0006                 182               i?962:   DS   1
0007                 183             ORG  7
0007                 184           r_num?963:   DS   2
                     185     
----                 186             RSEG  ?PD?_USB118_Crefiledir?USB118A
0000                 187     ?_USB118_Crefiledir?BYTE:
0004                 188             ORG  4
0004                 189           tpye?1164:   DS   1
A51 MACRO ASSEMBLER  USB118A                                                              05/23/2008 08:44:20 PAGE     4

0005                 190             ORG  5
0005                 191            na1?1165:   DS   1
0003                 192             ORG  3
0003                 193            na2?1166:   DS   1
0003                 194             ORG  3
0003                 195            na3?1167:   DS   1
0004                 196             ORG  4
0004                 197            na4?1168:   DS   1
0005                 198             ORG  5
0005                 199            na5?1169:   DS   1
0006                 200             ORG  6
0006                 201            na6?1170:   DS   1
0007                 202             ORG  7
0007                 203            na7?1171:   DS   1
0008                 204             ORG  8
0008                 205            na8?1172:   DS   1
0009                 206             ORG  9
0009                 207            tp1?1173:   DS   1
000A                 208             ORG  10
000A                 209            tp2?1174:   DS   1
000B                 210             ORG  11
000B                 211            tp3?1175:   DS   1
                     212     
----                 213             RSEG  ?PD?_USB118_Write?USB118A
0000                 214     ?_USB118_Write?BYTE:
0000                 215          wdata?1387:   DS   3
                     216     
----                 217             RSEG  ?PD?_USB118_Open?USB118A
0000                 218     ?_USB118_Open?BYTE:
0004                 219             ORG  4
0004                 220            na1?1276:   DS   1
0005                 221             ORG  5
0005                 222            na2?1277:   DS   1
0003                 223             ORG  3
0003                 224            na3?1278:   DS   1
0003                 225             ORG  3
0003                 226            na4?1279:   DS   1
0004                 227             ORG  4
0004                 228            na5?1280:   DS   1
0005                 229             ORG  5
0005                 230            na6?1281:   DS   1
0006                 231             ORG  6
0006                 232            na7?1282:   DS   1
0007                 233             ORG  7
0007                 234            na8?1283:   DS   1
0008                 235             ORG  8
0008                 236            tp1?1284:   DS   1
0009                 237             ORG  9
0009                 238            tp2?1285:   DS   1
000A                 239             ORG  10
000A                 240            tp3?1286:   DS   1
                     241     
----                 242             RSEG  ?PD?_serial_send?USB118A
0000                 243     ?_serial_send?BYTE:
0001                 244             ORG  1
0001                 245       s_command?755:   DS   3
0003                 246             ORG  3
0003                 247           s_dat?756:   DS   3
0006                 248             ORG  6
0006                 249           s_num?757:   DS   2
                     250     
----                 251             RSEG  ?PD?USB118A
0000                 252               commd:   DS   66
0042                 253      Command_status:   DS   1
0043                 254                dat1:   DS   6
                     255     
A51 MACRO ASSEMBLER  USB118A                                                              05/23/2008 08:44:20 PAGE     5

----                 256             RSEG  ?C_INITSEG
0000 A0              257             DB      0A0H
0001 42              258             DB      042H
0002 00       F      259             DB      LOW (commd)
0003 01              260             DB      001H
0004 02              261             DB      002H
0005 43              262             DB      043H
0006 44              263             DB      044H
0007 45              264             DB      045H
0008 46              265             DB      046H
0009 00000000        266             DB  000H,000H,000H,000H,000H,000H,000H,000H,000H,000H
000D 00000000                
0011 0000                    
0013 00000000        267             DB  000H,000H,000H,000H,000H,000H,000H,000H,000H,000H
0017 00000000                
001B 0000                    
001D 00000000        268             DB  000H,000H,000H,000H,000H,000H,000H,000H,000H,000H
0021 00000000                
0025 0000                    
0027 00000000        269             DB  000H,000H,000H,000H,000H,000H,000H,000H,000H,000H
002B 00000000                
002F 0000                    
0031 00000000        270             DB  000H,000H,000H,000H,000H,000H,000H,000H,000H,000H
0035 00000000                
0039 0000                    
003B 00000000        271             DB  000H,000H,000H,000H,000H,000H,000H,000H,000H,000H
003F 00000000                
0043 0000                    
                     272     
0045 86              273             DB      086H
0046 00       F      274             DB      LOW (dat1)
0047 61              275             DB      061H
0048 62              276             DB      062H
0049 63              277             DB      063H
004A 64              278             DB      064H
004B 65              279             DB      065H
004C 66              280             DB      066H
                     281     
004D 81              282             DB      081H
004E 00       F      283             DB      LOW (Command_status)
004F 00              284             DB      000H
                     285     
                     286     ; #include <AT89X52.h>
                     287     ; 
                     288     ; #define uchar  unsigned  char
                     289     ; #define uint   unsigned  int 
                     290     ;       
                     291     ; uchar  commd[66]={0x01,0x02,0x43,0x44,0x45,0x46}; //send and receive command buffer
                     292     ; uchar  dat1[6]={0x61,0x62,0x63,0x64,0x65,0x66}; //send  and receive databuffer
                     293     ;  
                     294     ; uchar Command_status=0;         //receive status 
                     295     ; 
                     296     ; /*-------------
                     297     ; 函数功能；send data 
                     298     ; 入口参数：
                     299     ; --------------*/
                     300     ; void int_data(uchar da)
                     301     
----                 302             RSEG  ?PR?_int_data?USB118A
0000                 303     _int_data:
                     304             USING   0
                     305                             ; SOURCE LINE # 15
                     306     ;---- Variable 'da?040' assigned to Register 'R7' ----
                     307     ; {
                     308                             ; SOURCE LINE # 16
                     309     ;  uchar dat;
A51 MACRO ASSEMBLER  USB118A                                                              05/23/2008 08:44:20 PAGE     6

                     310     ;  for(dat=0; dat<32; dat++)
                     311                             ; SOURCE LINE # 18
                     312     ;---- Variable 'dat?041' assigned to Register 'R6' ----
0000 E4              313             CLR     A
0001 FE              314             MOV     R6,A
0002                 315     ?C0001:
                     316     ;    {
                     317                             ; SOURCE LINE # 19
                     318     ;     dat1[dat]=da+dat;
                     319                             ; SOURCE LINE # 20
0002 EF              320             MOV     A,R7
0003 2E              321             ADD     A,R6
0004 FD              322             MOV     R5,A
0005 7400     F      323             MOV     A,#LOW (dat1)
0007 2E              324             ADD     A,R6
0008 F8              325             MOV     R0,A
0009 ED              326             MOV     A,R5
000A F2              327             MOVX    @R0,A
                     328     ;    }
                     329                             ; SOURCE LINE # 21
000B 0E              330             INC     R6
000C EE              331             MOV     A,R6
000D B420F2          332             CJNE    A,#020H,?C0001
                     333     ; }
                     334                             ; SOURCE LINE # 22
0010                 335     ?C0004:
0010 22              336             RET     
                     337     ; END OF _int_data
                     338     
                     339     ; /*-------------------------------------------
                     340     ;             数组初始化函数
                     341     ; 函数功能：初始化函数
                     342     ; 入口参数：ia是要给commd[]数组初始化值
                     343     ; 出口参数：
                     344     ; -------------------------------------------*/
                     345     ; void intia(uchar ia)
                     346     
----                 347             RSEG  ?PR?_intia?USB118A
0000                 348     _intia:
                     349             USING   0
                     350                             ; SOURCE LINE # 29
                     351     ;---- Variable 'ia?142' assigned to Register 'R7' ----
                     352     ; {
                     353                             ; SOURCE LINE # 30
                     354     ;   uchar t;
                     355     ;   for(t=0; t<66; t++)
                     356                             ; SOURCE LINE # 32
                     357     ;---- Variable 't?143' assigned to Register 'R6' ----
0000 E4              358             CLR     A
0001 FE              359             MOV     R6,A
0002                 360     ?C0005:
                     361     ;    {
                     362                             ; SOURCE LINE # 33
                     363     ;     commd[t]=ia;
                     364                             ; SOURCE LINE # 34
0002 7400     F      365             MOV     A,#LOW (commd)
0004 2E              366             ADD     A,R6
0005 F8              367             MOV     R0,A
0006 EF              368             MOV     A,R7
0007 F2              369             MOVX    @R0,A
                     370     ;    }
                     371                             ; SOURCE LINE # 35
0008 0E              372             INC     R6
0009 EE              373             MOV     A,R6
000A B442F5          374             CJNE    A,#042H,?C0005
                     375     ; }
A51 MACRO ASSEMBLER  USB118A                                                              05/23/2008 08:44:20 PAGE     7

                     376                             ; SOURCE LINE # 36
000D                 377     ?C0008:
000D 22              378             RET     
                     379     ; END OF _intia
                     380     
                     381     ; 
                     382     ; 
                     383     ; /*--------------------------------------------------
                     384     ;                延时函数  延时sec*01ms
                     385     ; 函数功能：延时 function ,when frenquency 24M , 0.1ms
                     386     ; 入口参数：c 是延时多少个0.1ms
                     387     ; -----------------------------------------------------*/
                     388     ; void delay(uint sec) 
                     389     
----                 390             RSEG  ?PR?_delay?USB118A
0000                 391     _delay:
                     392             USING   0
                     393                             ; SOURCE LINE # 44
                     394     ;---- Variable 'sec?244' assigned to Register 'R6/R7' ----
                     395     ; {
                     396                             ; SOURCE LINE # 45
                     397     ;  uint i;
                     398     ;  uchar j;
                     399     ;  for(i=0; i<sec; i++)
                     400                             ; SOURCE LINE # 48
                     401     ;---- Variable 'i?245' assigned to Register 'R4/R5' ----
0000 E4              402             CLR     A
0001 FD              403             MOV     R5,A
0002 FC              404             MOV     R4,A
0003                 405     ?C0009:
0003 C3              406             CLR     C
0004 ED              407             MOV     A,R5
0005 9F              408             SUBB    A,R7
0006 EC              409             MOV     A,R4
0007 9E              410             SUBB    A,R6
0008 500E            411             JNC     ?C0015
                     412     ;    for(j=0; j<100; j++)
                     413                             ; SOURCE LINE # 49
                     414     ;---- Variable 'j?246' assigned to Register 'R3' ----
000A E4              415             CLR     A
000B FB              416             MOV     R3,A
000C                 417     ?C0012:
000C 0B              418             INC     R3
000D EB              419             MOV     A,R3
000E B464FB          420             CJNE    A,#064H,?C0012
0011                 421     ?C0011:
0011 0D              422             INC     R5
0012 BD0001          423             CJNE    R5,#00H,?C0092
0015 0C              424             INC     R4
0016                 425     ?C0092:
0016 80EB            426             SJMP    ?C0009
                     427     ;       ;                  
                     428     ; }
                     429                             ; SOURCE LINE # 51
0018                 430     ?C0015:
0018 22              431             RET     
                     432     ; END OF _delay
                     433     
                     434     ; 
                     435     ;  /*------------------------------------------------------
                     436     ;                延时函数  延时=sec*15.1ms
                     437     ; 函数功能：延时 function ,when frenquency 24M , 15.1ms
                     438     ; 入口参数：c 是延时多少个15.1ms
                     439     ; --------------------------------------------------------*/
                     440     ; void Del(int sec) 
                     441     
A51 MACRO ASSEMBLER  USB118A                                                              05/23/2008 08:44:20 PAGE     8

----                 442             RSEG  ?PR?_Del?USB118A
0000                 443     _Del:
                     444             USING   0
                     445                             ; SOURCE LINE # 58
                     446     ;---- Variable 'sec?347' assigned to Register 'R6/R7' ----
                     447     ; {
                     448                             ; SOURCE LINE # 59
                     449     ;  uint i;
                     450     ;  uchar j, b; 
                     451     ;  for(i=0; i<sec; i++)
                     452                             ; SOURCE LINE # 62
                     453     ;---- Variable 'i?348' assigned to Register 'R4/R5' ----
0000 E4              454             CLR     A
0001 FD              455             MOV     R5,A
0002 FC              456             MOV     R4,A
0003                 457     ?C0016:
0003 C3              458             CLR     C
0004 ED              459             MOV     A,R5
0005 9F              460             SUBB    A,R7
0006 EC              461             MOV     A,R4
0007 9E              462             SUBB    A,R6
0008 5015            463             JNC     ?C0025
                     464     ;    for(j=0; j<100; j++)
                     465                             ; SOURCE LINE # 63
                     466     ;---- Variable 'j?349' assigned to Register 'R3' ----
000A E4              467             CLR     A
000B FB              468             MOV     R3,A
000C                 469     ?C0019:
                     470     ;      for(b=0; b<99; b++)
                     471                             ; SOURCE LINE # 64
                     472     ;---- Variable 'b?350' assigned to Register 'R2' ----
000C E4              473             CLR     A
000D FA              474             MOV     R2,A
000E                 475     ?C0022:
000E 0A              476             INC     R2
000F EA              477             MOV     A,R2
0010 B463FB          478             CJNE    A,#063H,?C0022
0013                 479     ?C0021:
0013 0B              480             INC     R3
0014 EB              481             MOV     A,R3
0015 B464F4          482             CJNE    A,#064H,?C0019
0018                 483     ?C0018:
0018 0D              484             INC     R5
0019 BD0001          485             CJNE    R5,#00H,?C0093
001C 0C              486             INC     R4
001D                 487     ?C0093:
001D 80E4            488             SJMP    ?C0016
                     489     ;          ;       
                     490     ; }
                     491                             ; SOURCE LINE # 66
001F                 492     ?C0025:
001F 22              493             RET     
                     494     ; END OF _Del
                     495     
                     496     ; 
                     497     ; /*----------------------------------------
                     498     ; 函数功能：initialize serial function
                     499     ; 
                     500     ; -------------------------------------------
                     501     ; void serial_int()
                     502     ; {
                     503     ;   EA=0;                //总中断禁止
                     504     ;   ES=0;                //serial interrupt forbid
                     505     ;   TMOD=0x20; //定时器T1使用工作方式2
                     506     ;   TH1=0xF3;   //设置初值
                     507     ;   TL1=0xF3;
A51 MACRO ASSEMBLER  USB118A                                                              05/23/2008 08:44:20 PAGE     9

                     508     ;   TR1=1;
                     509     ;   PCON=0x80;  //SMOD=1
                     510     ;   SCON=0x50;  //工作方式1，9600bit/s 
                     511     ;   TI=1;
                     512     ;   REN=1;
                     513     ; }
                     514     ; */
                     515     ; 
                     516     ; /*---------------------------------------------------
                     517     ;                 串行通讯口初始化函数 
                     518     ; 函数功能：初始化uart   
                     519     ; 入口参数：波特率（9600， 19200， 57600）
                     520     ; ----------------------------------------------------*/ 
                     521     ; void Init_COMM(uint sp)
                     522     
----                 523             RSEG  ?PR?_Init_COMM?USB118A
0000                 524     _Init_COMM:
                     525             USING   0
                     526                             ; SOURCE LINE # 92
                     527     ;---- Variable 'sp?451' assigned to Register 'R6/R7' ----
                     528     ; {
                     529                             ; SOURCE LINE # 93
                     530     ;            SCON = 0x53;
                     531                             ; SOURCE LINE # 94
0000 759853          532             MOV     SCON,#053H
                     533     ;            PCON = 0x80 | PCON;
                     534                             ; SOURCE LINE # 95
0003 438780          535             ORL     PCON,#080H
                     536     ;          T2CON=0x30;
                     537                             ; SOURCE LINE # 96
0006 75C830          538             MOV     T2CON,#030H
                     539     ;            switch(sp)
                     540                             ; SOURCE LINE # 97
0009 EF              541             MOV     A,R7
000A 8EF0            542             MOV     B,R6
000C 120000   F      543             LCALL   ?C?ICASE
000F 0000     F      544             DW      ?C0027
0011 2580            545             DW      02580H
0013 0000     F      546             DW      ?C0028
0015 4B00            547             DW      04B00H
0017 0000     F      548             DW      ?C0029
0019 E100            549             DW      0E100H
001B 0000            550             DW      00H
001D 0000     F      551             DW      ?C0026
                     552     ;            {
                     553                             ; SOURCE LINE # 98
                     554     ;              case 9600:{// 9600 @ 24MHz: 24000000/(32*(65536-(RCAP2H,RCAP2L)))
                     555                             ; SOURCE LINE # 99
001F                 556     ?C0027:
                     557     ;                         RCAP2H=0xFF;          
                     558                             ; SOURCE LINE # 100
001F 75CBFF          559             MOV     RCAP2H,#0FFH
                     560     ;                           RCAP2L=0xB2;
                     561                             ; SOURCE LINE # 101
0022 75CAB2          562             MOV     RCAP2L,#0B2H
                     563     ;                                         }break;
                     564                             ; SOURCE LINE # 102
0025 800E            565             SJMP    ?C0026
                     566     ;                  case 19200:{// 19200 @ 24MHz: 24000000/(32*(65536-(RCAP2H,RCAP2L)))
                     567                             ; SOURCE LINE # 103
0027                 568     ?C0028:
                     569     ;                                   RCAP2H=0xFF;                
                     570                             ; SOURCE LINE # 104
0027 75CBFF          571             MOV     RCAP2H,#0FFH
                     572     ;                           RCAP2L=0xD9;
                     573                             ; SOURCE LINE # 105
A51 MACRO ASSEMBLER  USB118A                                                              05/23/2008 08:44:20 PAGE    10

002A 75CAD9          574             MOV     RCAP2L,#0D9H
                     575     ;                                         }break;
                     576                             ; SOURCE LINE # 106
002D 8006            577             SJMP    ?C0026
                     578     ;            case 57600:{// 57600 @ 24MHz: 24000000/(32*(65536-(RCAP2H,RCAP2L)))
                     579                             ; SOURCE LINE # 107
002F                 580     ?C0029:
                     581     ;                                   RCAP2H=0xFF;                
                     582                             ; SOURCE LINE # 108
002F 75CBFF          583             MOV     RCAP2H,#0FFH
                     584     ;                           RCAP2L=0xF3;
                     585                             ; SOURCE LINE # 109
0032 75CAF3          586             MOV     RCAP2L,#0F3H
                     587     ;                                         }break;
                     588                             ; SOURCE LINE # 110
                     589     ;           }
                     590                             ; SOURCE LINE # 111
0035                 591     ?C0026:
                     592     ;           TI=1;
                     593                             ; SOURCE LINE # 112
0035 D299            594             SETB    TI
                     595     ;             RI=0;
                     596                             ; SOURCE LINE # 113
0037 C298            597             CLR     RI
                     598     ;             TR2=1;
                     599                             ; SOURCE LINE # 114
0039 D2CA            600             SETB    TR2
                     601     ;                 
                     602     ; }
                     603                             ; SOURCE LINE # 116
003B 22              604             RET     
                     605     ; END OF _Init_COMM
                     606     
                     607     ; /*-----------------------------------------------------
                     608     ;                 URAT命令格式0xaa+0xbb+command+data
                     609     ; 函数功能：是发送同步码0xaa+0xbb
                     610     ; 参数说明：syn is send string 
                     611     ; -------------------------------------------------------*/
                     612     ; void serial_syn(  )
                     613     
----                 614             RSEG  ?PR?serial_syn?USB118A
0000                 615     serial_syn:
                     616             USING   0
                     617                             ; SOURCE LINE # 122
                     618     ; {
                     619                             ; SOURCE LINE # 123
                     620     ;   uchar i;
                     621     ;   uchar syn;
                     622     ;   i=0;
                     623                             ; SOURCE LINE # 126
                     624     ;---- Variable 'i?552' assigned to Register 'R7' ----
0000 E4              625             CLR     A
0001 FF              626             MOV     R7,A
                     627     ;   syn=0xaa;
                     628                             ; SOURCE LINE # 127
                     629     ;---- Variable 'syn?553' assigned to Register 'R6' ----
0002 7EAA            630             MOV     R6,#0AAH
                     631     ;   TI=0;
                     632                             ; SOURCE LINE # 128
0004 C299            633             CLR     TI
0006                 634     ?C0031:
                     635     ;   while(i<2)
                     636                             ; SOURCE LINE # 129
                     637     ;   { 
                     638                             ; SOURCE LINE # 130
                     639     ;     SBUF=syn;
A51 MACRO ASSEMBLER  USB118A                                                              05/23/2008 08:44:20 PAGE    11

                     640                             ; SOURCE LINE # 131
0006 8E99            641             MOV     SBUF,R6
0008                 642     ?C0033:
                     643     ;     while(!TI);
                     644                             ; SOURCE LINE # 132
0008 3099FD          645             JNB     TI,?C0033
000B                 646     ?C0034:
                     647     ;       TI=0;           
                     648                             ; SOURCE LINE # 133
000B C299            649             CLR     TI
                     650     ;       syn=0xbb;
                     651                             ; SOURCE LINE # 134
000D 7EBB            652             MOV     R6,#0BBH
                     653     ;       i++;   
                     654                             ; SOURCE LINE # 135
000F 0F              655             INC     R7
                     656     ;   }
                     657                             ; SOURCE LINE # 136
0010 EF              658             MOV     A,R7
0011 B402F2          659             CJNE    A,#02H,?C0031
                     660     ; }
                     661                             ; SOURCE LINE # 137
0014                 662     ?C0035:
0014 22              663             RET     
                     664     ; END OF serial_syn
                     665     
                     666     ; 
                     667     ; /*--------------------------------------------------------
                     668     ;                    串口接收一个字节数据
                     669     ; 函数功能：接收一个字节数据
                     670     ; ---------------------------------------------------------*/
                     671     ; void Send_Data(uchar send)
                     672     
----                 673             RSEG  ?PR?_Send_Data?USB118A
0000                 674     _Send_Data:
                     675                             ; SOURCE LINE # 143
                     676     ;---- Variable 'send?654' assigned to Register 'R7' ----
                     677     ; {
                     678                             ; SOURCE LINE # 144
                     679     ;    
                     680     ;    SBUF=send;
                     681                             ; SOURCE LINE # 146
0000 8F99            682             MOV     SBUF,R7
0002                 683     ?C0036:
                     684     ;    while(!TI);   
                     685                             ; SOURCE LINE # 147
0002 3099FD          686             JNB     TI,?C0036
0005                 687     ?C0037:
                     688     ;    TI=0;                                                  
                     689                             ; SOURCE LINE # 148
0005 C299            690             CLR     TI
                     691     ; }
                     692                             ; SOURCE LINE # 149
0007 22              693             RET     
                     694     ; END OF _Send_Data
                     695     
                     696     ; /*---------------------------------------------------------------------------------------
                             ------------
                     697     ;                      串口发送函数command(64)+data(0-2048)
                     698     ; 函数功能: serial send data
                     699     ; 入口参数: *s_command 是命令指针，按协议要求发送64个字节为一帧，*s_dat是数据指针，
                     700     ;           s_num是要发送的数据字节数（0-2048）
                     701     ;  ----------------------------------------------------------------------------------------
                             ------------*/
                     702     ; void serial_send(uchar *s_command,  uchar *s_dat, uint s_num)
                     703     
A51 MACRO ASSEMBLER  USB118A                                                              05/23/2008 08:44:20 PAGE    12

----                 704             RSEG  ?PR?_serial_send?USB118A
0000                 705     _serial_send:
                     706             USING   0
                     707                             ; SOURCE LINE # 156
                     708     ;---- Variable 's_command?755' assigned to Register 'R1/R2/R3' ----
                     709     ; {
                     710                             ; SOURCE LINE # 157
                     711     ;   uint s;
                     712     ;   for(s=0; s<64; s++)          
                     713                             ; SOURCE LINE # 159
                     714     ;---- Variable 's?758' assigned to Register 'R4/R5' ----
0000 E4              715             CLR     A
0001 FD              716             MOV     R5,A
0002 FC              717             MOV     R4,A
0003                 718     ?C0039:
                     719     ;    {
                     720                             ; SOURCE LINE # 160
                     721     ;      //SBUF=*s_command;
                     722     ;       // while(!TI);
                     723     ;       // TI=0;
                     724     ;        Send_Data(*s_command);
                     725                             ; SOURCE LINE # 164
0003 120000   F      726             LCALL   ?C?CLDPTR
0006 FF              727             MOV     R7,A
0007 120000   F      728             LCALL   _Send_Data
                     729     ;        s_command++;  
                     730                             ; SOURCE LINE # 165
000A 7401            731             MOV     A,#01H
000C 29              732             ADD     A,R1
000D F9              733             MOV     R1,A
000E E4              734             CLR     A
000F 3A              735             ADDC    A,R2
0010 FA              736             MOV     R2,A
                     737     ;     }
                     738                             ; SOURCE LINE # 166
0011 0D              739             INC     R5
0012 BD0001          740             CJNE    R5,#00H,?C0094
0015 0C              741             INC     R4
0016                 742     ?C0094:
0016 ED              743             MOV     A,R5
0017 6440            744             XRL     A,#040H
0019 4C              745             ORL     A,R4
001A 70E7            746             JNZ     ?C0039
001C                 747     ?C0040:
                     748     ;    for(s=0; s<s_num; s++)
                     749                             ; SOURCE LINE # 167
001C E4              750             CLR     A
001D FC              751             MOV     R4,A
001E FD              752             MOV     R5,A
001F                 753     ?C0042:
001F D3              754             SETB    C
0020 7800     F      755             MOV     R0,#LOW (s_num?757+01H)
0022 E2              756             MOVX    A,@R0
0023 9D              757             SUBB    A,R5
0024 18              758             DEC     R0
0025 E2              759             MOVX    A,@R0
0026 9C              760             SUBB    A,R4
0027 4021            761             JC      ?C0043
                     762     ;       {
                     763                             ; SOURCE LINE # 168
                     764     ;        //SBUF=*s_dat;
                     765     ;        //while(!TI);
                     766     ;        //TI=0;
                     767     ;        Send_Data(*s_dat);
                     768                             ; SOURCE LINE # 172
0029 7800     F      769             MOV     R0,#LOW (s_dat?756)
A51 MACRO ASSEMBLER  USB118A                                                              05/23/2008 08:44:20 PAGE    13

002B E2              770             MOVX    A,@R0
002C FB              771             MOV     R3,A
002D 08              772             INC     R0
002E E2              773             MOVX    A,@R0
002F FA              774             MOV     R2,A
0030 08              775             INC     R0
0031 E2              776             MOVX    A,@R0
0032 F9              777             MOV     R1,A
0033 120000   F      778             LCALL   ?C?CLDPTR
0036 FF              779             MOV     R7,A
0037 120000   F      780             LCALL   _Send_Data
                     781     ;        s_dat++;       
                     782                             ; SOURCE LINE # 173
003A E2              783             MOVX    A,@R0
003B 2401            784             ADD     A,#01H
003D F2              785             MOVX    @R0,A
003E 18              786             DEC     R0
003F E2              787             MOVX    A,@R0
0040 3400            788             ADDC    A,#00H
0042 F2              789             MOVX    @R0,A
                     790     ;       }
                     791                             ; SOURCE LINE # 174
0043 0D              792             INC     R5
0044 BD0001          793             CJNE    R5,#00H,?C0095
0047 0C              794             INC     R4
0048                 795     ?C0095:
0048 80D5            796             SJMP    ?C0042
004A                 797     ?C0043:
                     798     ;    TI=0;
                     799                             ; SOURCE LINE # 175
004A C299            800             CLR     TI
                     801     ;    RI=0;
                     802                             ; SOURCE LINE # 176
004C C298            803             CLR     RI
                     804     ; 
                     805     ;    EA=1;
                     806                             ; SOURCE LINE # 178
004E D2AF            807             SETB    EA
                     808     ;    ES=1;    
                     809                             ; SOURCE LINE # 179
0050 D2AC            810             SETB    ES
                     811     ; }
                     812                             ; SOURCE LINE # 180
0052 22              813             RET     
                     814     ; END OF _serial_send
                     815     
                     816     ; 
                     817     ; /*--------------------------------------------------------
                     818     ;                    串口接收一个字节数据
                     819     ; 函数功能：接收一个字节数据
                     820     ; ---------------------------------------------------------*/
                     821     ; unsigned char Receive_Data()
                     822     
----                 823             RSEG  ?PR?Receive_Data?USB118A
0000                 824     Receive_Data:
                     825             USING   0
                     826                             ; SOURCE LINE # 186
                     827     ; {
                     828                             ; SOURCE LINE # 187
0000                 829     ?C0046:
                     830     ;          uchar receive;
                     831     ;                while(!RI);
                     832                             ; SOURCE LINE # 189
0000 3098FD          833             JNB     RI,?C0046
0003                 834     ?C0047:
                     835     ;                receive=SBUF;
A51 MACRO ASSEMBLER  USB118A                                                              05/23/2008 08:44:20 PAGE    14

                     836                             ; SOURCE LINE # 190
                     837     ;---- Variable 'receive?859' assigned to Register 'R7' ----
0003 AF99            838             MOV     R7,SBUF
                     839     ;                RI=0;                                    
                     840                             ; SOURCE LINE # 191
0005 C298            841             CLR     RI
                     842     ;          return (receive);           
                     843                             ; SOURCE LINE # 192
                     844     ; }
                     845                             ; SOURCE LINE # 193
0007                 846     ?C0048:
0007 22              847             RET     
                     848     ; END OF Receive_Data
                     849     
                     850     ; /*---------------------------------------------------------------------------------------
                             ----------
                     851     ;                     串口接收一帧数据：数据格式 command(64)+data(0-16384)
                     852     ; 函数功能：接收一帧数据
                     853     ; 入口参数：*r_command是接收响应命令帧数据指针，*r_dat是接收数据指针，r_num是在命令指针后的
                             数据个数。
                     854     ; 出口参数：return 0 表示错误命令, 1 表示接收一帧完成 
                     855     ; -----------------------------------------------------------------------------------------
                             ----------*/
                     856     ; unsigned char Receive_One(uchar *r_command,  uchar *r_dat)
                     857     
----                 858             RSEG  ?PR?_Receive_One?USB118A
0000                 859     _Receive_One:
                     860             USING   0
                     861                             ; SOURCE LINE # 200
                     862     ;---- Variable 'r_command?960' assigned to Register 'R1/R2/R3' ----
                     863     ; {
                     864                             ; SOURCE LINE # 201
                     865     ;          
                     866     ;   uchar i;
                     867     ;   uint r_num;
                     868     ;   r_num=0;
                     869                             ; SOURCE LINE # 205
0000 E4              870             CLR     A
0001 7800     F      871             MOV     R0,#LOW (r_num?963)
0003 F2              872             MOVX    @R0,A
0004 08              873             INC     R0
0005 F2              874             MOVX    @R0,A
                     875     ;   for(i=0; i<3; i++)
                     876                             ; SOURCE LINE # 206
0006 7800     F      877             MOV     R0,#LOW (i?962)
0008 F2              878             MOVX    @R0,A
0009                 879     ?C0049:
                     880     ;    {
                     881                             ; SOURCE LINE # 207
                     882     ;     *r_command=Receive_Data();
                     883                             ; SOURCE LINE # 208
0009 120000   F      884             LCALL   Receive_Data
000C EF              885             MOV     A,R7
000D 120000   F      886             LCALL   ?C?CSTPTR
                     887     ;        r_command++;
                     888                             ; SOURCE LINE # 209
0010 7401            889             MOV     A,#01H
0012 29              890             ADD     A,R1
0013 F9              891             MOV     R1,A
0014 E4              892             CLR     A
0015 3A              893             ADDC    A,R2
0016 FA              894             MOV     R2,A
                     895     ;    }
                     896                             ; SOURCE LINE # 210
0017 7800     F      897             MOV     R0,#LOW (i?962)
0019 E2              898             MOVX    A,@R0
A51 MACRO ASSEMBLER  USB118A                                                              05/23/2008 08:44:20 PAGE    15

001A 04              899             INC     A
001B F2              900             MOVX    @R0,A
001C E2              901             MOVX    A,@R0
001D C3              902             CLR     C
001E 9403            903             SUBB    A,#03H
0020 40E7            904             JC      ?C0049
0022                 905     ?C0050:
                     906     ;   if(commd[0]==0xaa)   //如果接收到0xaa+0xbb+0x01 错误信息格式是： 0xaa + 0xbb +0x01
                     907                             ; SOURCE LINE # 211
0022 7800     F      908             MOV     R0,#LOW (commd)
0024 E2              909             MOVX    A,@R0
0025 B4AA03          910             CJNE    A,#0AAH,?C0052
                     911     ;         return 0;
                     912                             ; SOURCE LINE # 212
0028 7F00            913             MOV     R7,#00H
002A 22              914             RET     
002B                 915     ?C0052:
                     916     ;   for(i=3;i<10;i++)      //不是错误信息时，继续接收完一帧（64byte）    
                     917                             ; SOURCE LINE # 213
002B 7800     F      918             MOV     R0,#LOW (i?962)
002D 7403            919             MOV     A,#03H
002F F2              920             MOVX    @R0,A
0030                 921     ?C0054:
                     922     ;    {
                     923                             ; SOURCE LINE # 214
                     924     ;     *r_command=Receive_Data();
                     925                             ; SOURCE LINE # 215
0030 120000   F      926             LCALL   Receive_Data
0033 EF              927             MOV     A,R7
0034 120000   F      928             LCALL   ?C?CSTPTR
                     929     ;       r_command++;
                     930                             ; SOURCE LINE # 216
0037 7401            931             MOV     A,#01H
0039 29              932             ADD     A,R1
003A F9              933             MOV     R1,A
003B E4              934             CLR     A
003C 3A              935             ADDC    A,R2
003D FA              936             MOV     R2,A
                     937     ;     }
                     938                             ; SOURCE LINE # 217
003E 7800     F      939             MOV     R0,#LOW (i?962)
0040 E2              940             MOVX    A,@R0
0041 04              941             INC     A
0042 F2              942             MOVX    @R0,A
0043 E2              943             MOVX    A,@R0
0044 C3              944             CLR     C
0045 940A            945             SUBB    A,#0AH
0047 40E7            946             JC      ?C0054
0049                 947     ?C0055:
                     948     ;                                                                                          
                                                                                                   
                     949     ;   if((commd[0]==0xB0))         //如果是read 命令则有数据返回
                     950                             ; SOURCE LINE # 219
0049 7800     F      951             MOV     R0,#LOW (commd)
004B E2              952             MOVX    A,@R0
004C F9              953             MOV     R1,A
004D B4B01F          954             CJNE    A,#0B0H,?C0057
                     955     ;     {
                     956                             ; SOURCE LINE # 220
                     957     ;       r_num=commd[6];  //data for r_num BYTE    
                     958                             ; SOURCE LINE # 221
0050 7800     F      959             MOV     R0,#LOW (commd+06H)
0052 E2              960             MOVX    A,@R0
0053 FF              961             MOV     R7,A
0054 7800     F      962             MOV     R0,#LOW (r_num?963)
0056 E4              963             CLR     A
A51 MACRO ASSEMBLER  USB118A                                                              05/23/2008 08:44:20 PAGE    16

0057 F2              964             MOVX    @R0,A
0058 08              965             INC     R0
0059 EF              966             MOV     A,R7
005A F2              967             MOVX    @R0,A
                     968     ;               r_num<<=8;
                     969                             ; SOURCE LINE # 222
005B E2              970             MOVX    A,@R0
005C 7F00            971             MOV     R7,#00H
005E 18              972             DEC     R0
005F F2              973             MOVX    @R0,A
0060 FE              974             MOV     R6,A
0061 08              975             INC     R0
0062 EF              976             MOV     A,R7
0063 F2              977             MOVX    @R0,A
                     978     ;               r_num|=commd[5];
                     979                             ; SOURCE LINE # 223
0064 7800     F      980             MOV     R0,#LOW (commd+05H)
0066 E2              981             MOVX    A,@R0
0067 FD              982             MOV     R5,A
0068 EE              983             MOV     A,R6
0069 7800     F      984             MOV     R0,#LOW (r_num?963)
006B F2              985             MOVX    @R0,A
006C ED              986             MOV     A,R5
006D 08              987             INC     R0
006E F2              988             MOVX    @R0,A
                     989     ;      }
                     990                             ; SOURCE LINE # 224
006F                 991     ?C0057:
                     992     ;    if(commd[0]==0x20)          //如果是 list 命令则有数据返回
                     993                             ; SOURCE LINE # 225
006F E9              994             MOV     A,R1
0070 B4201F          995             CJNE    A,#020H,?C0058
                     996     ;        {
                     997                             ; SOURCE LINE # 226
                     998     ;        r_num=commd[5];         //data for r_num BYTE    
                     999                             ; SOURCE LINE # 227
0073 7800     F     1000             MOV     R0,#LOW (commd+05H)
0075 E2             1001             MOVX    A,@R0
0076 FF             1002             MOV     R7,A
0077 7800     F     1003             MOV     R0,#LOW (r_num?963)
0079 E4             1004             CLR     A
007A F2             1005             MOVX    @R0,A
007B 08             1006             INC     R0
007C EF             1007             MOV     A,R7
007D F2             1008             MOVX    @R0,A
                    1009     ;        r_num<<=8;
                    1010                             ; SOURCE LINE # 228
007E E2             1011             MOVX    A,@R0
007F 7F00           1012             MOV     R7,#00H
0081 18             1013             DEC     R0
0082 F2             1014             MOVX    @R0,A
0083 FE             1015             MOV     R6,A
0084 08             1016             INC     R0
0085 EF             1017             MOV     A,R7
0086 F2             1018             MOVX    @R0,A
                    1019     ;          r_num|=commd[4];
                    1020                             ; SOURCE LINE # 229
0087 7800     F     1021             MOV     R0,#LOW (commd+04H)
0089 E2             1022             MOVX    A,@R0
008A FD             1023             MOV     R5,A
008B EE             1024             MOV     A,R6
008C 7800     F     1025             MOV     R0,#LOW (r_num?963)
008E F2             1026             MOVX    @R0,A
008F ED             1027             MOV     A,R5
0090 08             1028             INC     R0
0091 F2             1029             MOVX    @R0,A
A51 MACRO ASSEMBLER  USB118A                                                              05/23/2008 08:44:20 PAGE    17

                    1030     ;         }                
                    1031                             ; SOURCE LINE # 230
0092                1032     ?C0058:
                    1033     ;    for(i=0;i<r_num;i++)    //receive data,   r_num(0-16384)
                    1034                             ; SOURCE LINE # 231
0092 E4             1035             CLR     A
0093 7800     F     1036             MOV     R0,#LOW (i?962)
0095 F2             1037             MOVX    @R0,A
0096                1038     ?C0059:
0096 7800     F     1039             MOV     R0,#LOW (i?962)
0098 E2             1040             MOVX    A,@R0
0099 FF             1041             MOV     R7,A
009A D3             1042             SETB    C
009B 7800     F     1043             MOV     R0,#LOW (r_num?963+01H)
009D E2             1044             MOVX    A,@R0
009E 9F             1045             SUBB    A,R7
009F 18             1046             DEC     R0
00A0 E2             1047             MOVX    A,@R0
00A1 9400           1048             SUBB    A,#00H
00A3 401F           1049             JC      ?C0060
                    1050     ;      {
                    1051                             ; SOURCE LINE # 232
                    1052     ;       *(r_dat+i)=Receive_Data();
                    1053                             ; SOURCE LINE # 233
00A5 120000   F     1054             LCALL   Receive_Data
00A8 7800     F     1055             MOV     R0,#LOW (r_dat?961)
00AA E2             1056             MOVX    A,@R0
00AB FB             1057             MOV     R3,A
00AC 08             1058             INC     R0
00AD E2             1059             MOVX    A,@R0
00AE FA             1060             MOV     R2,A
00AF 08             1061             INC     R0
00B0 E2             1062             MOVX    A,@R0
00B1 F9             1063             MOV     R1,A
00B2 08             1064             INC     R0
00B3 E2             1065             MOVX    A,@R0
00B4 F582           1066             MOV     DPL,A
00B6 758300         1067             MOV     DPH,#00H
00B9 EF             1068             MOV     A,R7
00BA 120000   F     1069             LCALL   ?C?CSTOPTR
                    1070     ;      }                 
                    1071                             ; SOURCE LINE # 234
00BD 7800     F     1072             MOV     R0,#LOW (i?962)
00BF E2             1073             MOVX    A,@R0
00C0 04             1074             INC     A
00C1 F2             1075             MOVX    @R0,A
00C2 80D2           1076             SJMP    ?C0059
00C4                1077     ?C0060:
                    1078     ;     return 1;
                    1079                             ; SOURCE LINE # 235
00C4 7F01           1080             MOV     R7,#01H
                    1081     ; }
                    1082                             ; SOURCE LINE # 236
00C6                1083     ?C0053:
00C6 22             1084             RET     
                    1085     ; END OF _Receive_One
                    1086     
                    1087     ; /*----------------------------------------------
                    1088     ; 函数功能：serial receive  data
                    1089     ; 参数说明：同serial_send()
                    1090     ; ------------------------------------------------*
                    1091     ; unsigned char serial_rec(unsigned char *r_command,  unsigned char *r_dat,  unsigned int r
                             _num)
                    1092     ; {
                    1093     ;  unsigned int r, receive_data;
                    1094     ;  //serial_int();
A51 MACRO ASSEMBLER  USB118A                                                              05/23/2008 08:44:20 PAGE    18

                    1095     ;  
                    1096     ;  for(r=0; r<3; r++)
                    1097     ;    {
                    1098     ;     while(!RI);
                    1099     ;       receive_data=SBUF;
                    1100     ;       RI=0;
                    1101     ;     *r_command=receive_data;                                           
                    1102     ;       r_command++;    
                    1103     ;         
                    1104     ;    }
                    1105     ;    delay(10);
                    1106     ;   if(commd[0]==0xaa)
                    1107     ;       return 0;
                    1108     ; 
                    1109     ;  for(r=3; r<64; r++)   
                    1110     ;    {
                    1111     ;       while(!RI);
                    1112     ;       receive_data=SBUF;
                    1113     ;       RI=0;
                    1114     ;       *r_command=receive_data;                                                 
                    1115     ;       r_command++;
                    1116     ;       
                    1117     ;         
                    1118     ;    }
                    1119     ; 
                    1120     ;  for(r=0; r<r_num; r++)
                    1121     ;    {
                    1122     ;       while(!RI);
                    1123     ;       receive_data=SBUF;
                    1124     ;       RI=0; 
                    1125     ;       *r_dat=receive_data;
                    1126     ;     r_dat++;
                    1127     ;       
                    1128     ;        
                    1129     ;    }
                    1130     ;     return 1;  
                    1131     ;   
                    1132     ; }
                    1133     ;  
                    1134     ; /*---------------------------------------------------------------------------------------
                             ----
                    1135     ;             检测设备是否正常
                    1136     ; 函数功能: USB118 detect u
                    1137     ; 出口参数: USB118T_Detect commd[0]= 0x04, commd[1] 是检测结果 0x01有磁盘，0x00没有磁盘。 
                    1138     ; -----------------------------------------------------------------------------------------
                             -- */
                    1139     ; void USB118_Detect()
                    1140     
----                1141             RSEG  ?PR?USB118_Detect?USB118A
0000                1142     USB118_Detect:
                    1143             USING   0
                    1144                             ; SOURCE LINE # 289
                    1145     ; {
                    1146                             ; SOURCE LINE # 290
                    1147     ;   intia(0x20);                //intialize     command data group
                    1148                             ; SOURCE LINE # 291
0000 7F20           1149             MOV     R7,#020H
0002 120000   F     1150             LCALL   _intia
                    1151     ; 
                    1152     ;   commd[0]=0x01;       //USB118R_Detect command 0x01
                    1153                             ; SOURCE LINE # 293
0005 7800     F     1154             MOV     R0,#LOW (commd)
0007 7401           1155             MOV     A,#01H
0009 F2             1156             MOVX    @R0,A
                    1157     ;   commd[1]=0x00;  
                    1158                             ; SOURCE LINE # 294
A51 MACRO ASSEMBLER  USB118A                                                              05/23/2008 08:44:20 PAGE    19

000A E4             1159             CLR     A
000B 08             1160             INC     R0
000C F2             1161             MOVX    @R0,A
                    1162     ;     
                    1163     ;   serial_syn();
                    1164                             ; SOURCE LINE # 296
000D 120000   F     1165             LCALL   serial_syn
                    1166     ;   serial_send(commd, 0, 0);
                    1167                             ; SOURCE LINE # 297
0010 7800     F     1168             MOV     R0,#LOW (?_serial_send?BYTE+03H)
0012 E4             1169             CLR     A
0013 F2             1170             MOVX    @R0,A
0014 08             1171             INC     R0
0015 F2             1172             MOVX    @R0,A
0016 08             1173             INC     R0
0017 F2             1174             MOVX    @R0,A
0018 08             1175             INC     R0
0019 F2             1176             MOVX    @R0,A
001A 08             1177             INC     R0
001B F2             1178             MOVX    @R0,A
001C 7BFE           1179             MOV     R3,#0FEH
001E 7A00     F     1180             MOV     R2,#HIGH (commd)
0020 7900     F     1181             MOV     R1,#LOW (commd)
0022 020000   F     1182             LJMP    _serial_send
                    1183     ; END OF USB118_Detect
                    1184     
                    1185     ; }
                    1186     ; 
                    1187     ; /*---------------------------------------------------------------------------------------
                             --------------------------------
                    1188     ;                 创建文件或者目录
                    1189     ; 函数功能：create file or makedir
                    1190     ; 入口参数：tpye is 0x07(file) or 0x32(makedir),na1--an8 feil name, tp1--tp3 feil tpye
                    1191     ; 出口参数：USB118_Create  ,Create 返回command[0]=0x0A, command [1]  01H表示成功，00H表示失
                             败，command[2]-[3]表示错误码
                    1192     ;       and USB118_MakeDir ,MakeDir返回command[0]=0x42，command [1]  01H表示成功，00H表示失
                             败，command[2]-[3]表示错误码 
                    1193     ; -----------------------------------------------------------------------------------------
                             ------------------------------ */
                    1194     ; void USB118_Crefiledir( uchar tpye,  uchar na1, uchar na2, uchar na3, uchar na4, 
                    1195     
----                1196             RSEG  ?PR?_USB118_Crefiledir?USB118A
0000                1197     _USB118_Crefiledir:
                    1198             USING   0
                    1199                             ; SOURCE LINE # 307
                    1200     ;---- Variable 'tpye?1164' assigned to Register 'R4' ----
0000 AC07           1201             MOV     R4,AR7
                    1202     ;---- Variable 'na2?1166' assigned to Register 'R3' ----
                    1203     ;---- Variable 'na1?1165' assigned to Register 'R5' ----
                    1204     ;                          uchar na5,  uchar na6, uchar na7, uchar na8, uchar tp1,
                    1205     ;                                                uchar tp2,  uchar tp3 )
                    1206     ; {
                    1207                             ; SOURCE LINE # 310
                    1208     ;  intia(0);
                    1209                             ; SOURCE LINE # 311
0002 E4             1210             CLR     A
0003 FF             1211             MOV     R7,A
0004 120000   F     1212             LCALL   _intia
                    1213     ;  commd[0]=tpye;               //create file(07H) or dir(32H)
                    1214                             ; SOURCE LINE # 312
0007 7800     F     1215             MOV     R0,#LOW (commd)
0009 EC             1216             MOV     A,R4
000A F2             1217             MOVX    @R0,A
                    1218     ;  commd[1]=na1;
                    1219                             ; SOURCE LINE # 313
000B 08             1220             INC     R0
A51 MACRO ASSEMBLER  USB118A                                                              05/23/2008 08:44:20 PAGE    20

000C ED             1221             MOV     A,R5
000D F2             1222             MOVX    @R0,A
                    1223     ;  commd[2]=na2;
                    1224                             ; SOURCE LINE # 314
000E 08             1225             INC     R0
000F EB             1226             MOV     A,R3
0010 F2             1227             MOVX    @R0,A
                    1228     ;  commd[3]=na3;
                    1229                             ; SOURCE LINE # 315
0011 7800     F     1230             MOV     R0,#LOW (na3?1167)
0013 E2             1231             MOVX    A,@R0
0014 7800     F     1232             MOV     R0,#LOW (commd+03H)
0016 F2             1233             MOVX    @R0,A
                    1234     ;  commd[4]=na4;
                    1235                             ; SOURCE LINE # 316
0017 7800     F     1236             MOV     R0,#LOW (na4?1168)
0019 E2             1237             MOVX    A,@R0
001A 7800     F     1238             MOV     R0,#LOW (commd+04H)
001C F2             1239             MOVX    @R0,A
                    1240     ;  commd[5]=na5;
                    1241                             ; SOURCE LINE # 317
001D 7800     F     1242             MOV     R0,#LOW (na5?1169)
001F E2             1243             MOVX    A,@R0
0020 7800     F     1244             MOV     R0,#LOW (commd+05H)
0022 F2             1245             MOVX    @R0,A
                    1246     ;  commd[6]=na6;
                    1247                             ; SOURCE LINE # 318
0023 7800     F     1248             MOV     R0,#LOW (na6?1170)
0025 E2             1249             MOVX    A,@R0
0026 7800     F     1250             MOV     R0,#LOW (commd+06H)
0028 F2             1251             MOVX    @R0,A
                    1252     ;  commd[7]=na7;
                    1253                             ; SOURCE LINE # 319
0029 7800     F     1254             MOV     R0,#LOW (na7?1171)
002B E2             1255             MOVX    A,@R0
002C 7800     F     1256             MOV     R0,#LOW (commd+07H)
002E F2             1257             MOVX    @R0,A
                    1258     ;  commd[8]=na8;
                    1259                             ; SOURCE LINE # 320
002F 7800     F     1260             MOV     R0,#LOW (na8?1172)
0031 E2             1261             MOVX    A,@R0
0032 7800     F     1262             MOV     R0,#LOW (commd+08H)
0034 F2             1263             MOVX    @R0,A
                    1264     ; 
                    1265     ;  commd[9]=tp1;
                    1266                             ; SOURCE LINE # 322
0035 7800     F     1267             MOV     R0,#LOW (tp1?1173)
0037 E2             1268             MOVX    A,@R0
0038 7800     F     1269             MOV     R0,#LOW (commd+09H)
003A F2             1270             MOVX    @R0,A
                    1271     ;  commd[10]=tp2;
                    1272                             ; SOURCE LINE # 323
003B 7800     F     1273             MOV     R0,#LOW (tp2?1174)
003D E2             1274             MOVX    A,@R0
003E 7800     F     1275             MOV     R0,#LOW (commd+0AH)
0040 F2             1276             MOVX    @R0,A
                    1277     ;  commd[11]=tp3;
                    1278                             ; SOURCE LINE # 324
0041 7800     F     1279             MOV     R0,#LOW (tp3?1175)
0043 E2             1280             MOVX    A,@R0
0044 7800     F     1281             MOV     R0,#LOW (commd+0BH)
0046 F2             1282             MOVX    @R0,A
                    1283     ; 
                    1284     ;  commd[12]=0x20;      //create file attribute
                    1285                             ; SOURCE LINE # 326
0047 08             1286             INC     R0
A51 MACRO ASSEMBLER  USB118A                                                              05/23/2008 08:44:20 PAGE    21

0048 7420           1287             MOV     A,#020H
004A F2             1288             MOVX    @R0,A
                    1289     ;  commd[23]=0x38;    //create file time
                    1290                             ; SOURCE LINE # 327
004B 7800     F     1291             MOV     R0,#LOW (commd+017H)
004D 7438           1292             MOV     A,#038H
004F F2             1293             MOVX    @R0,A
                    1294     ;  commd[24]=0x21;
                    1295                             ; SOURCE LINE # 328
0050 08             1296             INC     R0
0051 7421           1297             MOV     A,#021H
0053 F2             1298             MOVX    @R0,A
                    1299     ;  commd[33]=0;
                    1300                             ; SOURCE LINE # 329
0054 E4             1301             CLR     A
0055 7800     F     1302             MOV     R0,#LOW (commd+021H)
0057 F2             1303             MOVX    @R0,A
                    1304     ; 
                    1305     ;  serial_syn();
                    1306                             ; SOURCE LINE # 331
0058 120000   F     1307             LCALL   serial_syn
                    1308     ;  serial_send(commd, 0, 0);  
                    1309                             ; SOURCE LINE # 332
005B 7800     F     1310             MOV     R0,#LOW (?_serial_send?BYTE+03H)
005D E4             1311             CLR     A
005E F2             1312             MOVX    @R0,A
005F 08             1313             INC     R0
0060 F2             1314             MOVX    @R0,A
0061 08             1315             INC     R0
0062 F2             1316             MOVX    @R0,A
0063 08             1317             INC     R0
0064 F2             1318             MOVX    @R0,A
0065 08             1319             INC     R0
0066 F2             1320             MOVX    @R0,A
0067 7BFE           1321             MOV     R3,#0FEH
0069 7A00     F     1322             MOV     R2,#HIGH (commd)
006B 7900     F     1323             MOV     R1,#LOW (commd)
006D 020000   F     1324             LJMP    _serial_send
                    1325     ; END OF _USB118_Crefiledir
                    1326     
                    1327     ;  //serial_rec(commd, 0, 0);
                    1328     ; }
                    1329     ; 
                    1330     ; /*------------------------------------------------------------------
                    1331     ; 函数功能： open file
                    1332     ; 入口参数：The na1-8 is file name, the tp1-3 is file type.
                    1333     ; 出口参数：USB118_Open  ,Open 返回command[0]=0x0D, command [1]  01H表示成功，00H表示失败，
                    1334     ;           command[2]-[3]表示错误码 
                    1335     ; ------------------------------------------------------------------*/
                    1336     ; void  USB118_Open(uchar na1, uchar na2, uchar na3, uchar na4,uchar na5, uchar na6, uchar 
                             na7, uchar na8, 
                    1337     
----                1338             RSEG  ?PR?_USB118_Open?USB118A
0000                1339     _USB118_Open:
                    1340             USING   0
                    1341                             ; SOURCE LINE # 342
                    1342     ;---- Variable 'na1?1276' assigned to Register 'R4' ----
0000 AC07           1343             MOV     R4,AR7
                    1344     ;---- Variable 'na3?1278' assigned to Register 'R3' ----
                    1345     ;---- Variable 'na2?1277' assigned to Register 'R5' ----
                    1346     ;                   uchar tp1, uchar tp2, uchar tp3)
                    1347     ;                                                  
                    1348     ; {
                    1349                             ; SOURCE LINE # 345
                    1350     ;  intia(0x20);
                    1351                             ; SOURCE LINE # 346
A51 MACRO ASSEMBLER  USB118A                                                              05/23/2008 08:44:20 PAGE    22

0002 7F20           1352             MOV     R7,#020H
0004 120000   F     1353             LCALL   _intia
                    1354     ;  commd[0]=0x06;        //open file 
                    1355                             ; SOURCE LINE # 347
0007 7800     F     1356             MOV     R0,#LOW (commd)
0009 7406           1357             MOV     A,#06H
000B F2             1358             MOVX    @R0,A
                    1359     ;  commd[1]=na1;
                    1360                             ; SOURCE LINE # 348
000C 08             1361             INC     R0
000D EC             1362             MOV     A,R4
000E F2             1363             MOVX    @R0,A
                    1364     ;  commd[2]=na2;
                    1365                             ; SOURCE LINE # 349
000F 08             1366             INC     R0
0010 ED             1367             MOV     A,R5
0011 F2             1368             MOVX    @R0,A
                    1369     ;  commd[3]=na3;
                    1370                             ; SOURCE LINE # 350
0012 08             1371             INC     R0
0013 EB             1372             MOV     A,R3
0014 F2             1373             MOVX    @R0,A
                    1374     ;  commd[4]=na4;
                    1375                             ; SOURCE LINE # 351
0015 7800     F     1376             MOV     R0,#LOW (na4?1279)
0017 E2             1377             MOVX    A,@R0
0018 7800     F     1378             MOV     R0,#LOW (commd+04H)
001A F2             1379             MOVX    @R0,A
                    1380     ;  commd[5]=na5;
                    1381                             ; SOURCE LINE # 352
001B 7800     F     1382             MOV     R0,#LOW (na5?1280)
001D E2             1383             MOVX    A,@R0
001E 7800     F     1384             MOV     R0,#LOW (commd+05H)
0020 F2             1385             MOVX    @R0,A
                    1386     ;  commd[6]=na6;
                    1387                             ; SOURCE LINE # 353
0021 7800     F     1388             MOV     R0,#LOW (na6?1281)
0023 E2             1389             MOVX    A,@R0
0024 7800     F     1390             MOV     R0,#LOW (commd+06H)
0026 F2             1391             MOVX    @R0,A
                    1392     ;  commd[7]=na7;
                    1393                             ; SOURCE LINE # 354
0027 7800     F     1394             MOV     R0,#LOW (na7?1282)
0029 E2             1395             MOVX    A,@R0
002A 7800     F     1396             MOV     R0,#LOW (commd+07H)
002C F2             1397             MOVX    @R0,A
                    1398     ;  commd[8]=na8;
                    1399                             ; SOURCE LINE # 355
002D 7800     F     1400             MOV     R0,#LOW (na8?1283)
002F E2             1401             MOVX    A,@R0
0030 7800     F     1402             MOV     R0,#LOW (commd+08H)
0032 F2             1403             MOVX    @R0,A
                    1404     ; 
                    1405     ;  commd[9]=tp1;
                    1406                             ; SOURCE LINE # 357
0033 7800     F     1407             MOV     R0,#LOW (tp1?1284)
0035 E2             1408             MOVX    A,@R0
0036 7800     F     1409             MOV     R0,#LOW (commd+09H)
0038 F2             1410             MOVX    @R0,A
                    1411     ;  commd[10]=tp2;
                    1412                             ; SOURCE LINE # 358
0039 7800     F     1413             MOV     R0,#LOW (tp2?1285)
003B E2             1414             MOVX    A,@R0
003C 7800     F     1415             MOV     R0,#LOW (commd+0AH)
003E F2             1416             MOVX    @R0,A
                    1417     ;  commd[11]=tp3;
A51 MACRO ASSEMBLER  USB118A                                                              05/23/2008 08:44:20 PAGE    23

                    1418                             ; SOURCE LINE # 359
003F 7800     F     1419             MOV     R0,#LOW (tp3?1286)
0041 E2             1420             MOVX    A,@R0
0042 7800     F     1421             MOV     R0,#LOW (commd+0BH)
0044 F2             1422             MOVX    @R0,A
                    1423     ; 
                    1424     ;  serial_syn();
                    1425                             ; SOURCE LINE # 361
0045 120000   F     1426             LCALL   serial_syn
                    1427     ;  serial_send(commd, 0, 0);
                    1428                             ; SOURCE LINE # 362
0048 7800     F     1429             MOV     R0,#LOW (?_serial_send?BYTE+03H)
004A E4             1430             CLR     A
004B F2             1431             MOVX    @R0,A
004C 08             1432             INC     R0
004D F2             1433             MOVX    @R0,A
004E 08             1434             INC     R0
004F F2             1435             MOVX    @R0,A
0050 08             1436             INC     R0
0051 F2             1437             MOVX    @R0,A
0052 08             1438             INC     R0
0053 F2             1439             MOVX    @R0,A
0054 7BFE           1440             MOV     R3,#0FEH
0056 7A00     F     1441             MOV     R2,#HIGH (commd)
0058 7900     F     1442             MOV     R1,#LOW (commd)
005A 020000   F     1443             LJMP    _serial_send
                    1444     ; END OF _USB118_Open
                    1445     
                    1446     ;  //serial_rec(commd, 0, 0);   
                    1447     ; }
                    1448     ; 
                    1449     ; /*-----------------------------------------------------
                    1450     ;              写入数据
                    1451     ; 函数功能：when open  or create file, write data
                    1452     ; 入口参数：*wdata 将要写入数据组的指针头, wnum是写入数据的长度(0--2048)
                    1453     ; -------------------------------------------------------*/              
                    1454     ; void USB118_Write(uchar *wdata, uint wnum)
                    1455     
----                1456             RSEG  ?PR?_USB118_Write?USB118A
0000                1457     _USB118_Write:
                    1458             USING   0
                    1459                             ; SOURCE LINE # 371
0000 7800     F     1460             MOV     R0,#LOW (wdata?1387)
0002 EB             1461             MOV     A,R3
0003 F2             1462             MOVX    @R0,A
0004 08             1463             INC     R0
0005 EA             1464             MOV     A,R2
0006 F2             1465             MOVX    @R0,A
0007 08             1466             INC     R0
0008 E9             1467             MOV     A,R1
0009 F2             1468             MOVX    @R0,A
                    1469     ;---- Variable 'wnum?1388' assigned to Register 'R4/R5' ----
                    1470     ; {
                    1471                             ; SOURCE LINE # 372
                    1472     ;   
                    1473     ;   uchar n;
                    1474     ;   uint data_num;
                    1475     ;   intia(0);
                    1476                             ; SOURCE LINE # 376
000A E4             1477             CLR     A
000B FF             1478             MOV     R7,A
000C 120000   F     1479             LCALL   _intia
                    1480     ;   data_num=wnum;
                    1481                             ; SOURCE LINE # 377
                    1482     ;---- Variable 'data_num?1390' assigned to Register 'DPTR' ----
000F 8D82           1483             MOV     DPL,R5
A51 MACRO ASSEMBLER  USB118A                                                              05/23/2008 08:44:20 PAGE    24

0011 8C83           1484             MOV     DPH,R4
                    1485     ;   n=wnum&0xff;
                    1486                             ; SOURCE LINE # 378
0013 ED             1487             MOV     A,R5
                    1488     ;---- Variable 'n?1389' assigned to Register 'R3' ----
0014 FB             1489             MOV     R3,A
                    1490     ;   wnum>>=8;
                    1491                             ; SOURCE LINE # 379
0015 EC             1492             MOV     A,R4
0016 FD             1493             MOV     R5,A
0017 7C00           1494             MOV     R4,#00H
                    1495     ;   
                    1496     ;   commd[0]=0x09;       //write data
                    1497                             ; SOURCE LINE # 381
0019 7800     F     1498             MOV     R0,#LOW (commd)
001B 7409           1499             MOV     A,#09H
001D F2             1500             MOVX    @R0,A
                    1501     ;   commd[1]=0;
                    1502                             ; SOURCE LINE # 382
001E E4             1503             CLR     A
001F 08             1504             INC     R0
0020 F2             1505             MOVX    @R0,A
                    1506     ;   commd[2]=n;
                    1507                             ; SOURCE LINE # 383
0021 08             1508             INC     R0
0022 EB             1509             MOV     A,R3
0023 F2             1510             MOVX    @R0,A
                    1511     ;   commd[3]=(uchar)wnum;
                    1512                             ; SOURCE LINE # 384
0024 08             1513             INC     R0
0025 ED             1514             MOV     A,R5
0026 F2             1515             MOVX    @R0,A
                    1516     ;                                   
                    1517     ;   serial_syn();
                    1518                             ; SOURCE LINE # 386
0027 120000   F     1519             LCALL   serial_syn
                    1520     ;   serial_send(commd, wdata, data_num);
                    1521                             ; SOURCE LINE # 387
002A 7800     F     1522             MOV     R0,#LOW (wdata?1387)
002C E2             1523             MOVX    A,@R0
002D F9             1524             MOV     R1,A
002E 08             1525             INC     R0
002F E2             1526             MOVX    A,@R0
0030 FA             1527             MOV     R2,A
0031 08             1528             INC     R0
0032 E2             1529             MOVX    A,@R0
0033 7800     F     1530             MOV     R0,#LOW (?_serial_send?BYTE+03H)
0035 C9             1531             XCH     A,R1
0036 F2             1532             MOVX    @R0,A
0037 08             1533             INC     R0
0038 EA             1534             MOV     A,R2
0039 F2             1535             MOVX    @R0,A
003A 08             1536             INC     R0
003B E9             1537             MOV     A,R1
003C F2             1538             MOVX    @R0,A
003D AE83           1539             MOV     R6,DPH
003F AF82           1540             MOV     R7,DPL
0041 08             1541             INC     R0
0042 EE             1542             MOV     A,R6
0043 F2             1543             MOVX    @R0,A
0044 08             1544             INC     R0
0045 EF             1545             MOV     A,R7
0046 F2             1546             MOVX    @R0,A
0047 7BFE           1547             MOV     R3,#0FEH
0049 7A00     F     1548             MOV     R2,#HIGH (commd)
004B 7900     F     1549             MOV     R1,#LOW (commd)
A51 MACRO ASSEMBLER  USB118A                                                              05/23/2008 08:44:20 PAGE    25

004D 020000   F     1550             LJMP    _serial_send
                    1551     ; END OF _USB118_Write
                    1552     
                    1553     ; 
                    1554     ;   //serial_rec(commd, 0, 0);
                    1555     ; }       
                    1556     ; /*-----------------------------------------------
                    1557     ; 函数功能:进入子目录
                    1558     ; 入口参数:na1-8是要进入的目录名
                    1559     ; ------------------------------------------------*
                    1560     ; void USB118_InDir(uchar na1, uchar na2, uchar na3, uchar na4,uchar na5, uchar na6, uchar 
                             na7, uchar na8)
                    1561     ; {
                    1562     ;  intia(0x20);
                    1563     ; 
                    1564     ;  commd[0]=0x33;                  //in dir
                    1565     ;  commd[1]=na1;
                    1566     ;  commd[2]=na2;
                    1567     ;  commd[3]=na3;
                    1568     ;  commd[4]=na4;
                    1569     ;  commd[5]=na5;
                    1570     ;  commd[6]=na6;
                    1571     ;  commd[7]=na7;
                    1572     ;  commd[8]=na8;
                    1573     ; 
                    1574     ;  serial_syn();
                    1575     ;  serial_send(commd, 0, 0);
                    1576     ; }
                    1577     ; 
                    1578     ; /*------------------------------       
                    1579     ; 函数功能:返回当前目录的上一层
                    1580     ; -------------------------------*
                    1581     ; void USB118_OutDir()
                    1582     ; {
                    1583     ;  intia(0x20);
                    1584     ;  
                    1585     ;  commd[0]=0x34;         // out dir
                    1586     ; 
                    1587     ;  serial_syn();
                    1588     ;  serial_send(commd, 0, 0);
                    1589     ; }
                    1590     ; 
                    1591     ; /*------------------------------------
                    1592     ; 函数功能:返回根目录
                    1593     ; --------------------------------------*
                    1594     ; void USB118_RootDir()
                    1595     ; {
                    1596     ;  intia(0x20);
                    1597     ; 
                    1598     ;  commd[0]=0x35;         // return root dir
                    1599     ; 
                    1600     ;  serial_syn();
                    1601     ;  serial_send(commd, 0, 0);
                    1602     ; }
                    1603     ; 
                    1604     ; /*----------------------------------
                    1605     ; 函数功能:read data
                    1606     ; 入口参数:length读取数据的长度
                    1607     ; -----------------------------------*
                    1608     ; void USB118_Read(uint length)
                    1609     ; {
                    1610     ;  uchar leng;
                    1611     ;  intia(0x20);
                    1612     ; 
                    1613     ;  leng=(uchar)length&0xff;
                    1614     ;  length>>=8; 
A51 MACRO ASSEMBLER  USB118A                                                              05/23/2008 08:44:20 PAGE    26

                    1615     ;  commd[0]=0x08;           //read file
                    1616     ;  commd[1]=leng;
                    1617     ;  commd[2]=(uchar)length;
                    1618     ; 
                    1619     ;  serial_syn();
                    1620     ;  serial_send(commd, 0, 0);
                    1621     ; }
                    1622     ; 
                    1623     ; /*----------------------------------
                    1624     ; 函数功能:列举目录下文件和文件夹
                    1625     ; -----------------------------------*
                    1626     ; void USB118_List()
                    1627     ; {
                    1628     ;  intia(0x20);
                    1629     ;  
                    1630     ;  commd[0]=0x10;
                    1631     ;  commd[1]=0;
                    1632     ; 
                    1633     ;  serial_syn();
                    1634     ;  serial_send(commd, 0, 0);
                    1635     ; }
                    1636     ; 
                    1637     ; /*--------------------------------------------------------------
                    1638     ; 函数功能:删除指定文件或子目录
                    1639     ; 入口参数:na1-8是要删除的文件名, tp1-3是要删除的文件的扩展名
                    1640     ; --------------------------------------------------------------*
                    1641     ; void USB118_Remove(uchar na1, uchar na2, uchar na3, uchar na4,uchar na5, uchar na6, uchar
                              na7, uchar na8, 
                    1642     ;                   uchar tp1, uchar tp2, uchar tp3)
                    1643     ; {
                    1644     ;  intia(0x20);
                    1645     ; 
                    1646     ;  commd[0]=0x11;
                    1647     ;  commd[1]=0;
                    1648     ;  commd[2]=na1;
                    1649     ;  commd[3]=na2;
                    1650     ;  commd[4]=na3;
                    1651     ;  commd[5]=na4;
                    1652     ;  commd[6]=na5;
                    1653     ;  commd[7]=na6;
                    1654     ;  commd[8]=na7;
                    1655     ;  commd[9]=na8;
                    1656     ; 
                    1657     ;  commd[10]=tp1;
                    1658     ;  commd[11]=tp2;
                    1659     ;  commd[12]=tp3;
                    1660     ; 
                    1661     ;  serial_syn();
                    1662     ;  serial_send(commd, 0, 0);
                    1663     ; }
                    1664     ; 
                    1665     ; /*----------------------------------------
                    1666     ; 函数功能:获取磁盘空间
                    1667     ; ----------------------------------------*
                    1668     ; void USB118_GetCapacity()
                    1669     ; {
                    1670     ;   intia(0x20);
                    1671     ; 
                    1672     ;   commd[0]=0x12;
                    1673     ;   commd[1]=0;
                    1674     ; 
                    1675     ;   serial_syn();
                    1676     ;   serial_send(commd, 0, 0);
                    1677     ; }
                    1678     ; 
                    1679     ; /*--------------------------------------------------
A51 MACRO ASSEMBLER  USB118A                                                              05/23/2008 08:44:20 PAGE    27

                    1680     ; 函数功能:移动指针位置
                    1681     ; 入口函数:sp 是指针移动到的位置 (0--4294967295)
                    1682     ; ---------------------------------------------------*
                    1683     ; void USB118_SetFilePointer(long int sp)
                    1684     ; {
                    1685     ;  intia(0x20);
                    1686     ; 
                    1687     ;  commd[0]=0x15;
                    1688     ;  commd[1]=0;
                    1689     ;  commd[2]=(uchar)sp;
                    1690     ;  sp>>=8;
                    1691     ;  commd[3]=(uchar)sp;
                    1692     ;  sp>>=8;
                    1693     ;  commd[4]=(uchar)sp;
                    1694     ;  sp>>=8;
                    1695     ;  commd[5]=(uchar)sp;
                    1696     ; 
                    1697     ;  serial_syn();
                    1698     ;  serial_send(commd, 0, 0);
                    1699     ; }
                    1700     ; 
                    1701     ; /*---------------------------------
                    1702     ; 函数功能:获取系统版本号
                    1703     ; -----------------------------------
                    1704     ; void USB118_GetVersion()
                    1705     ; {
                    1706     ;  intia(0x20);
                    1707     ; 
                    1708     ;  commd[0]=0x30;
                    1709     ;  commd[1]=0;
                    1710     ; 
                    1711     ;  serial_syn();
                    1712     ;  serial_send(commd, 0, 0);
                    1713     ; } */
                    1714     ; 
                    1715     ; main()
                    1716     
----                1717             RSEG  ?PR?main?USB118A
0000                1718     main:
                    1719             USING   0
                    1720                             ; SOURCE LINE # 550
                    1721     ; {
                    1722                             ; SOURCE LINE # 551
                    1723     ;  Del(200);
                    1724                             ; SOURCE LINE # 552
0000 7FC8           1725             MOV     R7,#0C8H
0002 7E00           1726             MOV     R6,#00H
0004 120000   F     1727             LCALL   _Del
                    1728     ; 
                    1729     ;  //intia(0x20);  
                    1730     ;  Init_COMM(9600);
                    1731                             ; SOURCE LINE # 555
0007 7F80           1732             MOV     R7,#080H
0009 7E25           1733             MOV     R6,#025H
000B 120000   F     1734             LCALL   _Init_COMM
000E                1735     ?C0066:
                    1736     ; 
                    1737     ;  while(1)
                    1738                             ; SOURCE LINE # 557
                    1739     ;  {
                    1740                             ; SOURCE LINE # 558
                    1741     ;   USB118_Detect();
                    1742                             ; SOURCE LINE # 559
000E 120000   F     1743             LCALL   USB118_Detect
                    1744     ;   Del(50);
                    1745                             ; SOURCE LINE # 560
A51 MACRO ASSEMBLER  USB118A                                                              05/23/2008 08:44:20 PAGE    28

0011 7F32           1746             MOV     R7,#032H
0013 7E00           1747             MOV     R6,#00H
0015 120000   F     1748             LCALL   _Del
                    1749     ;   delay(20);
                    1750                             ; SOURCE LINE # 561
0018 7F14           1751             MOV     R7,#014H
001A 120000   F     1752             LCALL   _delay
                    1753     ;  // if(Command_status==0x01)
                    1754     ;       if((commd[0]==0x04)&(commd[1]==0x01)) 
                    1755                             ; SOURCE LINE # 563
001D 7800     F     1756             MOV     R0,#LOW (commd+01H)
001F E2             1757             MOVX    A,@R0
0020 B40104         1758             CJNE    A,#01H,?C0069
0023 7F01           1759             MOV     R7,#01H
0025 8002           1760             SJMP    ?C0070
0027                1761     ?C0069:
0027 7F00           1762             MOV     R7,#00H
0029                1763     ?C0070:
0029 7800     F     1764             MOV     R0,#LOW (commd)
002B E2             1765             MOVX    A,@R0
002C B40404         1766             CJNE    A,#04H,?C0071
002F 7E01           1767             MOV     R6,#01H
0031 8002           1768             SJMP    ?C0072
0033                1769     ?C0071:
0033 7E00           1770             MOV     R6,#00H
0035                1771     ?C0072:
0035 EE             1772             MOV     A,R6
0036 5F             1773             ANL     A,R7
0037 60D5           1774             JZ      ?C0066
                    1775     ;         {
                    1776                             ; SOURCE LINE # 564
                    1777     ;          break;
                    1778                             ; SOURCE LINE # 565
                    1779     ;          }
                    1780                             ; SOURCE LINE # 566
                    1781     ;    
                    1782     ;  }
                    1783                             ; SOURCE LINE # 568
0039                1784     ?C0073:
                    1785     ;   while(1)
                    1786                             ; SOURCE LINE # 569
                    1787     ;  {
                    1788                             ; SOURCE LINE # 570
                    1789     ;    USB118_Open('A', 'C', 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 'T', 'X', 'T');
                    1790                             ; SOURCE LINE # 571
0039 7800     F     1791             MOV     R0,#LOW (?_USB118_Open?BYTE+03H)
003B 7420           1792             MOV     A,#020H
003D F2             1793             MOVX    @R0,A
003E 08             1794             INC     R0
003F F2             1795             MOVX    @R0,A
0040 08             1796             INC     R0
0041 F2             1797             MOVX    @R0,A
0042 08             1798             INC     R0
0043 F2             1799             MOVX    @R0,A
0044 08             1800             INC     R0
0045 F2             1801             MOVX    @R0,A
0046 08             1802             INC     R0
0047 7454           1803             MOV     A,#054H
0049 F2             1804             MOVX    @R0,A
004A 08             1805             INC     R0
004B 7458           1806             MOV     A,#058H
004D F2             1807             MOVX    @R0,A
004E 08             1808             INC     R0
004F 7454           1809             MOV     A,#054H
0051 F2             1810             MOVX    @R0,A
0052 7B20           1811             MOV     R3,#020H
A51 MACRO ASSEMBLER  USB118A                                                              05/23/2008 08:44:20 PAGE    29

0054 7D43           1812             MOV     R5,#043H
0056 7F41           1813             MOV     R7,#041H
0058 120000   F     1814             LCALL   _USB118_Open
                    1815     ;    delay(20);
                    1816                             ; SOURCE LINE # 572
005B 7F14           1817             MOV     R7,#014H
005D 7E00           1818             MOV     R6,#00H
005F 120000   F     1819             LCALL   _delay
                    1820     ;    Del(50);
                    1821                             ; SOURCE LINE # 573
0062 7F32           1822             MOV     R7,#032H
0064 120000   F     1823             LCALL   _Del
                    1824     ;    //if(Command_status==0x01)
                    1825     ;       if((commd[0]==0x0D)&(commd[1]==0x01)) 
                    1826                             ; SOURCE LINE # 575
0067 7800     F     1827             MOV     R0,#LOW (commd+01H)
0069 E2             1828             MOVX    A,@R0
006A B40104         1829             CJNE    A,#01H,?C0076
006D 7F01           1830             MOV     R7,#01H
006F 8002           1831             SJMP    ?C0077
0071                1832     ?C0076:
0071 7F00           1833             MOV     R7,#00H
0073                1834     ?C0077:
0073 7800     F     1835             MOV     R0,#LOW (commd)
0075 E2             1836             MOVX    A,@R0
0076 B40D04         1837             CJNE    A,#0DH,?C0078
0079 7E01           1838             MOV     R6,#01H
007B 8002           1839             SJMP    ?C0079
007D                1840     ?C0078:
007D 7E00           1841             MOV     R6,#00H
007F                1842     ?C0079:
007F EE             1843             MOV     A,R6
0080 5F             1844             ANL     A,R7
0081 600F           1845             JZ      ?C0075
                    1846     ;         {
                    1847                             ; SOURCE LINE # 576
                    1848     ;          int_data(0x61);
                    1849                             ; SOURCE LINE # 577
0083 7F61           1850             MOV     R7,#061H
0085 120000   F     1851             LCALL   _int_data
                    1852     ;          USB118_Write(dat1, 10);
                    1853                             ; SOURCE LINE # 578
0088 7BFE           1854             MOV     R3,#0FEH
008A 7A00     F     1855             MOV     R2,#HIGH (dat1)
008C 7900     F     1856             MOV     R1,#LOW (dat1)
008E 7D0A           1857             MOV     R5,#0AH
                    1858     ;          break;
                    1859                             ; SOURCE LINE # 579
0090 8057           1860             SJMP    ?C0096
                    1861     ; 
                    1862     ;          }
                    1863                             ; SOURCE LINE # 581
0092                1864     ?C0075:
                    1865     ;        else
                    1866     ;          {
                    1867                             ; SOURCE LINE # 583
                    1868     ;               USB118_Crefiledir( 0x07,  'A', 'C', 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 'T'
                             , 'X', 'T');
                    1869                             ; SOURCE LINE # 584
0092 7800     F     1870             MOV     R0,#LOW (?_USB118_Crefiledir?BYTE+03H)
0094 7420           1871             MOV     A,#020H
0096 F2             1872             MOVX    @R0,A
0097 08             1873             INC     R0
0098 F2             1874             MOVX    @R0,A
0099 08             1875             INC     R0
009A F2             1876             MOVX    @R0,A
A51 MACRO ASSEMBLER  USB118A                                                              05/23/2008 08:44:20 PAGE    30

009B 08             1877             INC     R0
009C F2             1878             MOVX    @R0,A
009D 08             1879             INC     R0
009E F2             1880             MOVX    @R0,A
009F 08             1881             INC     R0
00A0 F2             1882             MOVX    @R0,A
00A1 08             1883             INC     R0
00A2 7454           1884             MOV     A,#054H
00A4 F2             1885             MOVX    @R0,A
00A5 08             1886             INC     R0
00A6 7458           1887             MOV     A,#058H
00A8 F2             1888             MOVX    @R0,A
00A9 08             1889             INC     R0
00AA 7454           1890             MOV     A,#054H
00AC F2             1891             MOVX    @R0,A
00AD 7B43           1892             MOV     R3,#043H
00AF 7D41           1893             MOV     R5,#041H
00B1 7F07           1894             MOV     R7,#07H
00B3 120000   F     1895             LCALL   _USB118_Crefiledir
                    1896     ;                //if(Command_status==0x01)
                    1897     ;                Del(50);
                    1898                             ; SOURCE LINE # 586
00B6 7F32           1899             MOV     R7,#032H
00B8 7E00           1900             MOV     R6,#00H
00BA 120000   F     1901             LCALL   _Del
                    1902     ;               if((commd[0]==0x0A)&(commd[1]==0x01)) 
                    1903                             ; SOURCE LINE # 587
00BD 7800     F     1904             MOV     R0,#LOW (commd+01H)
00BF E2             1905             MOVX    A,@R0
00C0 B40104         1906             CJNE    A,#01H,?C0082
00C3 7F01           1907             MOV     R7,#01H
00C5 8002           1908             SJMP    ?C0083
00C7                1909     ?C0082:
00C7 7F00           1910             MOV     R7,#00H
00C9                1911     ?C0083:
00C9 7800     F     1912             MOV     R0,#LOW (commd)
00CB E2             1913             MOVX    A,@R0
00CC B40A04         1914             CJNE    A,#0AH,?C0084
00CF 7E01           1915             MOV     R6,#01H
00D1 8002           1916             SJMP    ?C0085
00D3                1917     ?C0084:
00D3 7E00           1918             MOV     R6,#00H
00D5                1919     ?C0085:
00D5 EE             1920             MOV     A,R6
00D6 5F             1921             ANL     A,R7
00D7 7003           1922             JNZ     $ + 5H
00D9 020000   F     1923             LJMP    ?C0073
                    1924     ;                 {
                    1925                             ; SOURCE LINE # 588
                    1926     ;                          int_data(0x61);
                    1927                             ; SOURCE LINE # 589
00DC 7F61           1928             MOV     R7,#061H
00DE 120000   F     1929             LCALL   _int_data
                    1930     ;                  USB118_Write(dat1, 4);
                    1931                             ; SOURCE LINE # 590
00E1 7BFE           1932             MOV     R3,#0FEH
00E3 7A00     F     1933             MOV     R2,#HIGH (dat1)
00E5 7900     F     1934             MOV     R1,#LOW (dat1)
00E7 7D04           1935             MOV     R5,#04H
00E9                1936     ?C0096:
00E9 7C00           1937             MOV     R4,#00H
00EB 120000   F     1938             LCALL   _USB118_Write
                    1939     ;                  break;
                    1940                             ; SOURCE LINE # 591
                    1941     ;                  }
                    1942                             ; SOURCE LINE # 592
A51 MACRO ASSEMBLER  USB118A                                                              05/23/2008 08:44:20 PAGE    31

                    1943     ;          }
                    1944                             ; SOURCE LINE # 593
                    1945     ; 
                    1946     ;    
                    1947     ;   }
                    1948                             ; SOURCE LINE # 596
00EE                1949     ?C0086:
                    1950     ;  while(1);
                    1951                             ; SOURCE LINE # 597
00EE 80FE           1952             SJMP    ?C0086
                    1953     ; END OF main
                    1954     
----                1955     CSEG    AT      00023H
0023 020000   F     1956             LJMP    serial
                    1957     
                    1958     ;  }
                    1959     ; 
                    1960     ; /*---------------------------------------------------
                    1961     ;                 接收中断函数
                    1962     ; 函数功能：接收数据
                    1963     ; 出口参数：Command_status的状态
                    1964     ; ----------------------------------------------------*/
                    1965     ; void serial() interrupt 4 using 0
                    1966     
----                1967             RSEG  ?PR?serial?USB118A
                    1968             USING   0
0000                1969     serial:
0000 C0E0           1970             PUSH    ACC
0002 C083           1971             PUSH    DPH
0004 C082           1972             PUSH    DPL
0006 C0D0           1973             PUSH    PSW
                    1974             USING   0
0008 75D000         1975             MOV     PSW,#00H
                    1976                             ; SOURCE LINE # 605
                    1977     ; {
                    1978     ;   uint m;
                    1979     ;   if(RI)
                    1980                             ; SOURCE LINE # 608
000B 30981D         1981             JNB     RI,?C0091
                    1982     ;    {
                    1983                             ; SOURCE LINE # 609
                    1984     ;    ES=0;
                    1985                             ; SOURCE LINE # 610
000E C2AC           1986             CLR     ES
                    1987     ;    m= Receive_One(commd, 0);
                    1988                             ; SOURCE LINE # 611
0010 7800     F     1989             MOV     R0,#LOW (?_Receive_One?BYTE+03H)
0012 E4             1990             CLR     A
0013 F2             1991             MOVX    @R0,A
0014 08             1992             INC     R0
0015 F2             1993             MOVX    @R0,A
0016 08             1994             INC     R0
0017 F2             1995             MOVX    @R0,A
0018 7BFE           1996             MOV     R3,#0FEH
001A 7A00     F     1997             MOV     R2,#HIGH (commd)
001C 7900     F     1998             MOV     R1,#LOW (commd)
001E 120000   F     1999             LCALL   _Receive_One
0021 7E00           2000             MOV     R6,#00H
                    2001     ;---- Variable 'm?1591' assigned to Register 'R6/R7' ----
                    2002     ;   //m=serial_rec(commd,0, 0);  
                    2003     ;    if(m)
                    2004                             ; SOURCE LINE # 613
0023 EF             2005             MOV     A,R7
0024 6005           2006             JZ      ?C0091
                    2007     ;      Command_status=0x01;             
                    2008                             ; SOURCE LINE # 614
A51 MACRO ASSEMBLER  USB118A                                                              05/23/2008 08:44:20 PAGE    32

0026 7800     F     2009             MOV     R0,#LOW (Command_status)
0028 7401           2010             MOV     A,#01H
002A F2             2011             MOVX    @R0,A
                    2012     ;   }
                    2013                             ; SOURCE LINE # 615
                    2014     ;  }                    ; SOURCE LINE # 616
002B                2015     ?C0091:
002B D0D0           2016             POP     PSW
002D D082           2017             POP     DPL
002F D083           2018             POP     DPH
0031 D0E0           2019             POP     ACC
0033 32             2020             RETI    
                    2021     ; END OF serial
                    2022     
                    2023             END
A51 MACRO ASSEMBLER  USB118A                                                              05/23/2008 08:44:20 PAGE    33

SYMBOL TABLE LISTING
------ ----- -------


N A M E                         T Y P E  V A L U E   ATTRIBUTES

?C0001 . . . . . . . . . . . .  C ADDR   0002H   R   SEG=?PR?_INT_DATA?USB118A
?C0004 . . . . . . . . . . . .  C ADDR   0010H   R   SEG=?PR?_INT_DATA?USB118A
?C0005 . . . . . . . . . . . .  C ADDR   0002H   R   SEG=?PR?_INTIA?USB118A
?C0008 . . . . . . . . . . . .  C ADDR   000DH   R   SEG=?PR?_INTIA?USB118A
?C0009 . . . . . . . . . . . .  C ADDR   0003H   R   SEG=?PR?_DELAY?USB118A
?C0011 . . . . . . . . . . . .  C ADDR   0011H   R   SEG=?PR?_DELAY?USB118A
?C0012 . . . . . . . . . . . .  C ADDR   000CH   R   SEG=?PR?_DELAY?USB118A
?C0015 . . . . . . . . . . . .  C ADDR   0018H   R   SEG=?PR?_DELAY?USB118A
?C0016 . . . . . . . . . . . .  C ADDR   0003H   R   SEG=?PR?_DEL?USB118A
?C0018 . . . . . . . . . . . .  C ADDR   0018H   R   SEG=?PR?_DEL?USB118A
?C0019 . . . . . . . . . . . .  C ADDR   000CH   R   SEG=?PR?_DEL?USB118A
?C0021 . . . . . . . . . . . .  C ADDR   0013H   R   SEG=?PR?_DEL?USB118A
?C0022 . . . . . . . . . . . .  C ADDR   000EH   R   SEG=?PR?_DEL?USB118A
?C0025 . . . . . . . . . . . .  C ADDR   001FH   R   SEG=?PR?_DEL?USB118A
?C0026 . . . . . . . . . . . .  C ADDR   0035H   R   SEG=?PR?_INIT_COMM?USB118A
?C0027 . . . . . . . . . . . .  C ADDR   001FH   R   SEG=?PR?_INIT_COMM?USB118A
?C0028 . . . . . . . . . . . .  C ADDR   0027H   R   SEG=?PR?_INIT_COMM?USB118A
?C0029 . . . . . . . . . . . .  C ADDR   002FH   R   SEG=?PR?_INIT_COMM?USB118A
?C0031 . . . . . . . . . . . .  C ADDR   0006H   R   SEG=?PR?SERIAL_SYN?USB118A
?C0033 . . . . . . . . . . . .  C ADDR   0008H   R   SEG=?PR?SERIAL_SYN?USB118A
?C0034 . . . . . . . . . . . .  C ADDR   000BH   R   SEG=?PR?SERIAL_SYN?USB118A
?C0035 . . . . . . . . . . . .  C ADDR   0014H   R   SEG=?PR?SERIAL_SYN?USB118A
?C0036 . . . . . . . . . . . .  C ADDR   0002H   R   SEG=?PR?_SEND_DATA?USB118A
?C0037 . . . . . . . . . . . .  C ADDR   0005H   R   SEG=?PR?_SEND_DATA?USB118A
?C0039 . . . . . . . . . . . .  C ADDR   0003H   R   SEG=?PR?_SERIAL_SEND?USB118A
?C0040 . . . . . . . . . . . .  C ADDR   001CH   R   SEG=?PR?_SERIAL_SEND?USB118A
?C0042 . . . . . . . . . . . .  C ADDR   001FH   R   SEG=?PR?_SERIAL_SEND?USB118A
?C0043 . . . . . . . . . . . .  C ADDR   004AH   R   SEG=?PR?_SERIAL_SEND?USB118A
?C0046 . . . . . . . . . . . .  C ADDR   0000H   R   SEG=?PR?RECEIVE_DATA?USB118A
?C0047 . . . . . . . . . . . .  C ADDR   0003H   R   SEG=?PR?RECEIVE_DATA?USB118A
?C0048 . . . . . . . . . . . .  C ADDR   0007H   R   SEG=?PR?RECEIVE_DATA?USB118A
?C0049 . . . . . . . . . . . .  C ADDR   0009H   R   SEG=?PR?_RECEIVE_ONE?USB118A
?C0050 . . . . . . . . . . . .  C ADDR   0022H   R   SEG=?PR?_RECEIVE_ONE?USB118A
?C0052 . . . . . . . . . . . .  C ADDR   002BH   R   SEG=?PR?_RECEIVE_ONE?USB118A
?C0053 . . . . . . . . . . . .  C ADDR   00C6H   R   SEG=?PR?_RECEIVE_ONE?USB118A
?C0054 . . . . . . . . . . . .  C ADDR   0030H   R   SEG=?PR?_RECEIVE_ONE?USB118A
?C0055 . . . . . . . . . . . .  C ADDR   0049H   R   SEG=?PR?_RECEIVE_ONE?USB118A
?C0057 . . . . . . . . . . . .  C ADDR   006FH   R   SEG=?PR?_RECEIVE_ONE?USB118A
?C0058 . . . . . . . . . . . .  C ADDR   0092H   R   SEG=?PR?_RECEIVE_ONE?USB118A
?C0059 . . . . . . . . . . . .  C ADDR   0096H   R   SEG=?PR?_RECEIVE_ONE?USB118A
?C0060 . . . . . . . . . . . .  C ADDR   00C4H   R   SEG=?PR?_RECEIVE_ONE?USB118A
?C0066 . . . . . . . . . . . .  C ADDR   000EH   R   SEG=?PR?MAIN?USB118A
?C0069 . . . . . . . . . . . .  C ADDR   0027H   R   SEG=?PR?MAIN?USB118A
?C0070 . . . . . . . . . . . .  C ADDR   0029H   R   SEG=?PR?MAIN?USB118A
?C0071 . . . . . . . . . . . .  C ADDR   0033H   R   SEG=?PR?MAIN?USB118A
?C0072 . . . . . . . . . . . .  C ADDR   0035H   R   SEG=?PR?MAIN?USB118A
?C0073 . . . . . . . . . . . .  C ADDR   0039H   R   SEG=?PR?MAIN?USB118A
?C0075 . . . . . . . . . . . .  C ADDR   0092H   R   SEG=?PR?MAIN?USB118A
?C0076 . . . . . . . . . . . .  C ADDR   0071H   R   SEG=?PR?MAIN?USB118A
?C0077 . . . . . . . . . . . .  C ADDR   0073H   R   SEG=?PR?MAIN?USB118A
?C0078 . . . . . . . . . . . .  C ADDR   007DH   R   SEG=?PR?MAIN?USB118A
?C0079 . . . . . . . . . . . .  C ADDR   007FH   R   SEG=?PR?MAIN?USB118A
?C0082 . . . . . . . . . . . .  C ADDR   00C7H   R   SEG=?PR?MAIN?USB118A
?C0083 . . . . . . . . . . . .  C ADDR   00C9H   R   SEG=?PR?MAIN?USB118A
?C0084 . . . . . . . . . . . .  C ADDR   00D3H   R   SEG=?PR?MAIN?USB118A
?C0085 . . . . . . . . . . . .  C ADDR   00D5H   R   SEG=?PR?MAIN?USB118A
?C0086 . . . . . . . . . . . .  C ADDR   00EEH   R   SEG=?PR?MAIN?USB118A
?C0091 . . . . . . . . . . . .  C ADDR   002BH   R   SEG=?PR?SERIAL?USB118A
?C0092 . . . . . . . . . . . .  C ADDR   0016H   R   SEG=?PR?_DELAY?USB118A
?C0093 . . . . . . . . . . . .  C ADDR   001DH   R   SEG=?PR?_DEL?USB118A
A51 MACRO ASSEMBLER  USB118A                                                              05/23/2008 08:44:20 PAGE    34

?C0094 . . . . . . . . . . . .  C ADDR   0016H   R   SEG=?PR?_SERIAL_SEND?USB118A
?C0095 . . . . . . . . . . . .  C ADDR   0048H   R   SEG=?PR?_SERIAL_SEND?USB118A
?C0096 . . . . . . . . . . . .  C ADDR   00E9H   R   SEG=?PR?MAIN?USB118A
?C?CLDPTR. . . . . . . . . . .  C ADDR   -----       EXT
?C?CSTOPTR . . . . . . . . . .  C ADDR   -----       EXT
?C?CSTPTR. . . . . . . . . . .  C ADDR   -----       EXT
?C?ICASE . . . . . . . . . . .  C ADDR   -----       EXT
?C_INITSEG . . . . . . . . . .  C SEG    0050H       REL=UNIT
?C_STARTUP . . . . . . . . . .  C ADDR   -----       EXT
?PD?USB118A. . . . . . . . . .  X SEG    0049H       REL=INPAGE
?PD?_RECEIVE_ONE?USB118A . . .  X SEG    0009H       REL=INPAGE
?PD?_SERIAL_SEND?USB118A . . .  X SEG    0008H       REL=INPAGE
?PD?_USB118_CREFILEDIR?USB118A  X SEG    000CH       REL=INPAGE
?PD?_USB118_OPEN?USB118A . . .  X SEG    000BH       REL=INPAGE
?PD?_USB118_WRITE?USB118A. . .  X SEG    0003H       REL=INPAGE
?PR?MAIN?USB118A . . . . . . .  C SEG    00F0H       REL=UNIT
?PR?RECEIVE_DATA?USB118A . . .  C SEG    0008H       REL=UNIT
?PR?SERIAL?USB118A . . . . . .  C SEG    0034H       REL=UNIT
?PR?SERIAL_SYN?USB118A . . . .  C SEG    0015H       REL=UNIT
?PR?USB118_DETECT?USB118A. . .  C SEG    0025H       REL=UNIT
?PR?_DEL?USB118A . . . . . . .  C SEG    0020H       REL=UNIT
?PR?_DELAY?USB118A . . . . . .  C SEG    0019H       REL=UNIT
?PR?_INIT_COMM?USB118A . . . .  C SEG    003CH       REL=UNIT
?PR?_INTIA?USB118A . . . . . .  C SEG    000EH       REL=UNIT
?PR?_INT_DATA?USB118A. . . . .  C SEG    0011H       REL=UNIT
?PR?_RECEIVE_ONE?USB118A . . .  C SEG    00C7H       REL=UNIT
?PR?_SEND_DATA?USB118A . . . .  C SEG    0008H       REL=UNIT
?PR?_SERIAL_SEND?USB118A . . .  C SEG    0053H       REL=UNIT
?PR?_USB118_CREFILEDIR?USB118A  C SEG    0070H       REL=UNIT
?PR?_USB118_OPEN?USB118A . . .  C SEG    005DH       REL=UNIT
?PR?_USB118_WRITE?USB118A. . .  C SEG    0050H       REL=UNIT
?_RECEIVE_ONE?BYTE . . . . . .  X ADDR   0000H   R   SEG=?PD?_RECEIVE_ONE?USB118A
?_SERIAL_SEND?BYTE . . . . . .  X ADDR   0000H   R   SEG=?PD?_SERIAL_SEND?USB118A
?_USB118_CREFILEDIR?BYTE . . .  X ADDR   0000H   R   SEG=?PD?_USB118_CREFILEDIR?USB118A
?_USB118_OPEN?BYTE . . . . . .  X ADDR   0000H   R   SEG=?PD?_USB118_OPEN?USB118A
?_USB118_WRITE?BYTE. . . . . .  X ADDR   0000H   R   SEG=?PD?_USB118_WRITE?USB118A
AC . . . . . . . . . . . . . .  B ADDR   00D0H.6 A   
ACC. . . . . . . . . . . . . .  D ADDR   00E0H   A   
AR7. . . . . . . . . . . . . .  D ADDR   0007H   A   
B. . . . . . . . . . . . . . .  D ADDR   00F0H   A   
COMMAND_STATUS . . . . . . . .  X ADDR   0042H   R   SEG=?PD?USB118A
COMMD. . . . . . . . . . . . .  X ADDR   0000H   R   SEG=?PD?USB118A
CP_RL2 . . . . . . . . . . . .  B ADDR   00C8H.0 A   
CY . . . . . . . . . . . . . .  B ADDR   00D0H.7 A   
C_T2 . . . . . . . . . . . . .  B ADDR   00C8H.1 A   
DAT1 . . . . . . . . . . . . .  X ADDR   0043H   R   SEG=?PD?USB118A
DPH. . . . . . . . . . . . . .  D ADDR   0083H   A   
DPL. . . . . . . . . . . . . .  D ADDR   0082H   A   
EA . . . . . . . . . . . . . .  B ADDR   00A8H.7 A   
ES . . . . . . . . . . . . . .  B ADDR   00A8H.4 A   
ET0. . . . . . . . . . . . . .  B ADDR   00A8H.1 A   
ET1. . . . . . . . . . . . . .  B ADDR   00A8H.3 A   
ET2. . . . . . . . . . . . . .  B ADDR   00A8H.5 A   
EX0. . . . . . . . . . . . . .  B ADDR   00A8H.0 A   
EX1. . . . . . . . . . . . . .  B ADDR   00A8H.2 A   
EXEN2. . . . . . . . . . . . .  B ADDR   00C8H.3 A   
EXF2 . . . . . . . . . . . . .  B ADDR   00C8H.6 A   
F0 . . . . . . . . . . . . . .  B ADDR   00D0H.5 A   
FL . . . . . . . . . . . . . .  B ADDR   00D0H.1 A   
I?962. . . . . . . . . . . . .  X ADDR   0006H   R   SEG=?PD?_RECEIVE_ONE?USB118A
IE . . . . . . . . . . . . . .  D ADDR   00A8H   A   
IE0. . . . . . . . . . . . . .  B ADDR   0088H.1 A   
IE1. . . . . . . . . . . . . .  B ADDR   0088H.3 A   
INT0 . . . . . . . . . . . . .  B ADDR   00B0H.2 A   
INT1 . . . . . . . . . . . . .  B ADDR   00B0H.3 A   
IP . . . . . . . . . . . . . .  D ADDR   00B8H   A   
A51 MACRO ASSEMBLER  USB118A                                                              05/23/2008 08:44:20 PAGE    35

IT0. . . . . . . . . . . . . .  B ADDR   0088H.0 A   
IT1. . . . . . . . . . . . . .  B ADDR   0088H.2 A   
MAIN . . . . . . . . . . . . .  C ADDR   0000H   R   SEG=?PR?MAIN?USB118A
NA1?1165 . . . . . . . . . . .  X ADDR   0005H   R   SEG=?PD?_USB118_CREFILEDIR?USB118A
NA1?1276 . . . . . . . . . . .  X ADDR   0004H   R   SEG=?PD?_USB118_OPEN?USB118A
NA2?1166 . . . . . . . . . . .  X ADDR   0003H   R   SEG=?PD?_USB118_CREFILEDIR?USB118A
NA2?1277 . . . . . . . . . . .  X ADDR   0005H   R   SEG=?PD?_USB118_OPEN?USB118A
NA3?1167 . . . . . . . . . . .  X ADDR   0003H   R   SEG=?PD?_USB118_CREFILEDIR?USB118A
NA3?1278 . . . . . . . . . . .  X ADDR   0003H   R   SEG=?PD?_USB118_OPEN?USB118A
NA4?1168 . . . . . . . . . . .  X ADDR   0004H   R   SEG=?PD?_USB118_CREFILEDIR?USB118A
NA4?1279 . . . . . . . . . . .  X ADDR   0003H   R   SEG=?PD?_USB118_OPEN?USB118A
NA5?1169 . . . . . . . . . . .  X ADDR   0005H   R   SEG=?PD?_USB118_CREFILEDIR?USB118A
NA5?1280 . . . . . . . . . . .  X ADDR   0004H   R   SEG=?PD?_USB118_OPEN?USB118A
NA6?1170 . . . . . . . . . . .  X ADDR   0006H   R   SEG=?PD?_USB118_CREFILEDIR?USB118A
NA6?1281 . . . . . . . . . . .  X ADDR   0005H   R   SEG=?PD?_USB118_OPEN?USB118A
NA7?1171 . . . . . . . . . . .  X ADDR   0007H   R   SEG=?PD?_USB118_CREFILEDIR?USB118A
NA7?1282 . . . . . . . . . . .  X ADDR   0006H   R   SEG=?PD?_USB118_OPEN?USB118A
NA8?1172 . . . . . . . . . . .  X ADDR   0008H   R   SEG=?PD?_USB118_CREFILEDIR?USB118A
NA8?1283 . . . . . . . . . . .  X ADDR   0007H   R   SEG=?PD?_USB118_OPEN?USB118A
OV . . . . . . . . . . . . . .  B ADDR   00D0H.2 A   
P. . . . . . . . . . . . . . .  B ADDR   00D0H.0 A   
P0 . . . . . . . . . . . . . .  D ADDR   0080H   A   
P0_0 . . . . . . . . . . . . .  B ADDR   0080H.0 A   
P0_1 . . . . . . . . . . . . .  B ADDR   0080H.1 A   
P0_2 . . . . . . . . . . . . .  B ADDR   0080H.2 A   
P0_3 . . . . . . . . . . . . .  B ADDR   0080H.3 A   
P0_4 . . . . . . . . . . . . .  B ADDR   0080H.4 A   
P0_5 . . . . . . . . . . . . .  B ADDR   0080H.5 A   
P0_6 . . . . . . . . . . . . .  B ADDR   0080H.6 A   
P0_7 . . . . . . . . . . . . .  B ADDR   0080H.7 A   
P1 . . . . . . . . . . . . . .  D ADDR   0090H   A   
P1_0 . . . . . . . . . . . . .  B ADDR   0090H.0 A   
P1_1 . . . . . . . . . . . . .  B ADDR   0090H.1 A   
P1_2 . . . . . . . . . . . . .  B ADDR   0090H.2 A   
P1_3 . . . . . . . . . . . . .  B ADDR   0090H.3 A   
P1_4 . . . . . . . . . . . . .  B ADDR   0090H.4 A   
P1_5 . . . . . . . . . . . . .  B ADDR   0090H.5 A   
P1_6 . . . . . . . . . . . . .  B ADDR   0090H.6 A   
P1_7 . . . . . . . . . . . . .  B ADDR   0090H.7 A   
P2 . . . . . . . . . . . . . .  D ADDR   00A0H   A   
P2_0 . . . . . . . . . . . . .  B ADDR   00A0H.0 A   
P2_1 . . . . . . . . . . . . .  B ADDR   00A0H.1 A   
P2_2 . . . . . . . . . . . . .  B ADDR   00A0H.2 A   
P2_3 . . . . . . . . . . . . .  B ADDR   00A0H.3 A   
P2_4 . . . . . . . . . . . . .  B ADDR   00A0H.4 A   
P2_5 . . . . . . . . . . . . .  B ADDR   00A0H.5 A   
P2_6 . . . . . . . . . . . . .  B ADDR   00A0H.6 A   
P2_7 . . . . . . . . . . . . .  B ADDR   00A0H.7 A   
P3 . . . . . . . . . . . . . .  D ADDR   00B0H   A   
P3_0 . . . . . . . . . . . . .  B ADDR   00B0H.0 A   
P3_1 . . . . . . . . . . . . .  B ADDR   00B0H.1 A   
P3_2 . . . . . . . . . . . . .  B ADDR   00B0H.2 A   
P3_3 . . . . . . . . . . . . .  B ADDR   00B0H.3 A   
P3_4 . . . . . . . . . . . . .  B ADDR   00B0H.4 A   
P3_5 . . . . . . . . . . . . .  B ADDR   00B0H.5 A   
P3_6 . . . . . . . . . . . . .  B ADDR   00B0H.6 A   
P3_7 . . . . . . . . . . . . .  B ADDR   00B0H.7 A   
PCON . . . . . . . . . . . . .  D ADDR   0087H   A   
PS . . . . . . . . . . . . . .  B ADDR   00B8H.4 A   
PSW. . . . . . . . . . . . . .  D ADDR   00D0H   A   
PT0. . . . . . . . . . . . . .  B ADDR   00B8H.1 A   
PT1. . . . . . . . . . . . . .  B ADDR   00B8H.3 A   
PT2. . . . . . . . . . . . . .  B ADDR   00B8H.5 A   
PX0. . . . . . . . . . . . . .  B ADDR   00B8H.0 A   
PX1. . . . . . . . . . . . . .  B ADDR   00B8H.2 A   
RB8. . . . . . . . . . . . . .  B ADDR   0098H.2 A   
A51 MACRO ASSEMBLER  USB118A                                                              05/23/2008 08:44:20 PAGE    36

RCAP2H . . . . . . . . . . . .  D ADDR   00CBH   A   
RCAP2L . . . . . . . . . . . .  D ADDR   00CAH   A   
RCLK . . . . . . . . . . . . .  B ADDR   00C8H.5 A   
RD . . . . . . . . . . . . . .  B ADDR   00B0H.7 A   
RECEIVE_DATA . . . . . . . . .  C ADDR   0000H   R   SEG=?PR?RECEIVE_DATA?USB118A
REN. . . . . . . . . . . . . .  B ADDR   0098H.4 A   
RI . . . . . . . . . . . . . .  B ADDR   0098H.0 A   
RS0. . . . . . . . . . . . . .  B ADDR   00D0H.3 A   
RS1. . . . . . . . . . . . . .  B ADDR   00D0H.4 A   
RXD. . . . . . . . . . . . . .  B ADDR   00B0H.0 A   
R_COMMAND?960. . . . . . . . .  X ADDR   0001H   R   SEG=?PD?_RECEIVE_ONE?USB118A
R_DAT?961. . . . . . . . . . .  X ADDR   0003H   R   SEG=?PD?_RECEIVE_ONE?USB118A
R_NUM?963. . . . . . . . . . .  X ADDR   0007H   R   SEG=?PD?_RECEIVE_ONE?USB118A
SBUF . . . . . . . . . . . . .  D ADDR   0099H   A   
SCON . . . . . . . . . . . . .  D ADDR   0098H   A   
SERIAL . . . . . . . . . . . .  C ADDR   0000H   R   SEG=?PR?SERIAL?USB118A
SERIAL_SYN . . . . . . . . . .  C ADDR   0000H   R   SEG=?PR?SERIAL_SYN?USB118A
SM0. . . . . . . . . . . . . .  B ADDR   0098H.7 A   
SM1. . . . . . . . . . . . . .  B ADDR   0098H.6 A   
SM2. . . . . . . . . . . . . .  B ADDR   0098H.5 A   
SP . . . . . . . . . . . . . .  D ADDR   0081H   A   
S_COMMAND?755. . . . . . . . .  X ADDR   0001H   R   SEG=?PD?_SERIAL_SEND?USB118A
S_DAT?756. . . . . . . . . . .  X ADDR   0003H   R   SEG=?PD?_SERIAL_SEND?USB118A
S_NUM?757. . . . . . . . . . .  X ADDR   0006H   R   SEG=?PD?_SERIAL_SEND?USB118A
T0 . . . . . . . . . . . . . .  B ADDR   00B0H.4 A   
T1 . . . . . . . . . . . . . .  B ADDR   00B0H.5 A   
T2 . . . . . . . . . . . . . .  B ADDR   0090H.0 A   
T2CON. . . . . . . . . . . . .  D ADDR   00C8H   A   
T2EX . . . . . . . . . . . . .  B ADDR   0090H.1 A   
T2MOD. . . . . . . . . . . . .  D ADDR   00C9H   A   
TB8. . . . . . . . . . . . . .  B ADDR   0098H.3 A   
TCLK . . . . . . . . . . . . .  B ADDR   00C8H.4 A   
TCON . . . . . . . . . . . . .  D ADDR   0088H   A   
TF0. . . . . . . . . . . . . .  B ADDR   0088H.5 A   
TF1. . . . . . . . . . . . . .  B ADDR   0088H.7 A   
TF2. . . . . . . . . . . . . .  B ADDR   00C8H.7 A   
TH0. . . . . . . . . . . . . .  D ADDR   008CH   A   
TH1. . . . . . . . . . . . . .  D ADDR   008DH   A   
TH2. . . . . . . . . . . . . .  D ADDR   00CDH   A   
TI . . . . . . . . . . . . . .  B ADDR   0098H.1 A   
TL0. . . . . . . . . . . . . .  D ADDR   008AH   A   
TL1. . . . . . . . . . . . . .  D ADDR   008BH   A   
TL2. . . . . . . . . . . . . .  D ADDR   00CCH   A   
TMOD . . . . . . . . . . . . .  D ADDR   0089H   A   
TP1?1173 . . . . . . . . . . .  X ADDR   0009H   R   SEG=?PD?_USB118_CREFILEDIR?USB118A
TP1?1284 . . . . . . . . . . .  X ADDR   0008H   R   SEG=?PD?_USB118_OPEN?USB118A
TP2?1174 . . . . . . . . . . .  X ADDR   000AH   R   SEG=?PD?_USB118_CREFILEDIR?USB118A
TP2?1285 . . . . . . . . . . .  X ADDR   0009H   R   SEG=?PD?_USB118_OPEN?USB118A
TP3?1175 . . . . . . . . . . .  X ADDR   000BH   R   SEG=?PD?_USB118_CREFILEDIR?USB118A
TP3?1286 . . . . . . . . . . .  X ADDR   000AH   R   SEG=?PD?_USB118_OPEN?USB118A
TPYE?1164. . . . . . . . . . .  X ADDR   0004H   R   SEG=?PD?_USB118_CREFILEDIR?USB118A
TR0. . . . . . . . . . . . . .  B ADDR   0088H.4 A   
TR1. . . . . . . . . . . . . .  B ADDR   0088H.6 A   
TR2. . . . . . . . . . . . . .  B ADDR   00C8H.2 A   
TXD. . . . . . . . . . . . . .  B ADDR   00B0H.1 A   
USB118A. . . . . . . . . . . .  N NUMB   -----       
USB118_DETECT. . . . . . . . .  C ADDR   0000H   R   SEG=?PR?USB118_DETECT?USB118A
WDATA?1387 . . . . . . . . . .  X ADDR   0000H   R   SEG=?PD?_USB118_WRITE?USB118A
WR . . . . . . . . . . . . . .  B ADDR   00B0H.6 A   
_DEL . . . . . . . . . . . . .  C ADDR   0000H   R   SEG=?PR?_DEL?USB118A
_DELAY . . . . . . . . . . . .  C ADDR   0000H   R   SEG=?PR?_DELAY?USB118A
_INIT_COMM . . . . . . . . . .  C ADDR   0000H   R   SEG=?PR?_INIT_COMM?USB118A
_INTIA . . . . . . . . . . . .  C ADDR   0000H   R   SEG=?PR?_INTIA?USB118A
_INT_DATA. . . . . . . . . . .  C ADDR   0000H   R   SEG=?PR?_INT_DATA?USB118A
_RECEIVE_ONE . . . . . . . . .  C ADDR   0000H   R   SEG=?PR?_RECEIVE_ONE?USB118A
_SEND_DATA . . . . . . . . . .  C ADDR   0000H   R   SEG=?PR?_SEND_DATA?USB118A
A51 MACRO ASSEMBLER  USB118A                                                              05/23/2008 08:44:20 PAGE    37

_SERIAL_SEND . . . . . . . . .  C ADDR   0000H   R   SEG=?PR?_SERIAL_SEND?USB118A
_USB118_CREFILEDIR . . . . . .  C ADDR   0000H   R   SEG=?PR?_USB118_CREFILEDIR?USB118A
_USB118_OPEN . . . . . . . . .  C ADDR   0000H   R   SEG=?PR?_USB118_OPEN?USB118A
_USB118_WRITE. . . . . . . . .  C ADDR   0000H   R   SEG=?PR?_USB118_WRITE?USB118A


REGISTER BANK(S) USED: 0 


ASSEMBLY COMPLETE.  0 WARNING(S), 0 ERROR(S)
